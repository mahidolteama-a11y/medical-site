var bO=Object.defineProperty;var _O=(e,t,n)=>t in e?bO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Eh=(e,t,n)=>_O(e,typeof t!="symbol"?t+"":t,n);function wO(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var jO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var y1={exports:{}},Md={},x1={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=Symbol.for("react.element"),NO=Symbol.for("react.portal"),SO=Symbol.for("react.fragment"),PO=Symbol.for("react.strict_mode"),kO=Symbol.for("react.profiler"),CO=Symbol.for("react.provider"),EO=Symbol.for("react.context"),OO=Symbol.for("react.forward_ref"),TO=Symbol.for("react.suspense"),AO=Symbol.for("react.memo"),MO=Symbol.for("react.lazy"),jx=Symbol.iterator;function LO(e){return e===null||typeof e!="object"?null:(e=jx&&e[jx]||e["@@iterator"],typeof e=="function"?e:null)}var b1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_1=Object.assign,w1={};function Zs(e,t,n){this.props=e,this.context=t,this.refs=w1,this.updater=n||b1}Zs.prototype.isReactComponent={};Zs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j1(){}j1.prototype=Zs.prototype;function Sg(e,t,n){this.props=e,this.context=t,this.refs=w1,this.updater=n||b1}var Pg=Sg.prototype=new j1;Pg.constructor=Sg;_1(Pg,Zs.prototype);Pg.isPureReactComponent=!0;var Nx=Array.isArray,N1=Object.prototype.hasOwnProperty,kg={current:null},S1={key:!0,ref:!0,__self:!0,__source:!0};function P1(e,t,n){var r,i={},a=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)N1.call(t,r)&&!S1.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var d=Array(u),m=0;m<u;m++)d[m]=arguments[m+2];i.children=d}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Al,type:e,key:a,ref:l,props:i,_owner:kg.current}}function DO(e,t){return{$$typeof:Al,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Al}function IO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Sx=/\/+/g;function Oh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?IO(""+e.key):t.toString(36)}function Jc(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Al:case NO:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+Oh(l,0):r,Nx(i)?(n="",e!=null&&(n=e.replace(Sx,"$&/")+"/"),Jc(i,t,n,"",function(m){return m})):i!=null&&(Cg(i)&&(i=DO(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Sx,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",Nx(e))for(var u=0;u<e.length;u++){a=e[u];var d=r+Oh(a,u);l+=Jc(a,t,n,d,i)}else if(d=LO(e),typeof d=="function")for(e=d.call(e),u=0;!(a=e.next()).done;)a=a.value,d=r+Oh(a,u++),l+=Jc(a,t,n,d,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function bc(e,t,n){if(e==null)return e;var r=[],i=0;return Jc(e,r,"","",function(a){return t.call(n,a,i++)}),r}function RO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xt={current:null},eu={transition:null},zO={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:eu,ReactCurrentOwner:kg};function k1(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:bc,forEach:function(e,t,n){bc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bc(e,function(){t++}),t},toArray:function(e){return bc(e,function(t){return t})||[]},only:function(e){if(!Cg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=Zs;_e.Fragment=SO;_e.Profiler=kO;_e.PureComponent=Sg;_e.StrictMode=PO;_e.Suspense=TO;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zO;_e.act=k1;_e.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_1({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=kg.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)N1.call(t,d)&&!S1.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var m=0;m<d;m++)u[m]=arguments[m+2];r.children=u}return{$$typeof:Al,type:e.type,key:i,ref:a,props:r,_owner:l}};_e.createContext=function(e){return e={$$typeof:EO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:CO,_context:e},e.Consumer=e};_e.createElement=P1;_e.createFactory=function(e){var t=P1.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:OO,render:e}};_e.isValidElement=Cg;_e.lazy=function(e){return{$$typeof:MO,_payload:{_status:-1,_result:e},_init:RO}};_e.memo=function(e,t){return{$$typeof:AO,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=eu.transition;eu.transition={};try{e()}finally{eu.transition=t}};_e.unstable_act=k1;_e.useCallback=function(e,t){return Xt.current.useCallback(e,t)};_e.useContext=function(e){return Xt.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return Xt.current.useDeferredValue(e)};_e.useEffect=function(e,t){return Xt.current.useEffect(e,t)};_e.useId=function(){return Xt.current.useId()};_e.useImperativeHandle=function(e,t,n){return Xt.current.useImperativeHandle(e,t,n)};_e.useInsertionEffect=function(e,t){return Xt.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return Xt.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return Xt.current.useMemo(e,t)};_e.useReducer=function(e,t,n){return Xt.current.useReducer(e,t,n)};_e.useRef=function(e){return Xt.current.useRef(e)};_e.useState=function(e){return Xt.current.useState(e)};_e.useSyncExternalStore=function(e,t,n){return Xt.current.useSyncExternalStore(e,t,n)};_e.useTransition=function(){return Xt.current.useTransition()};_e.version="18.3.1";x1.exports=_e;var b=x1.exports;const pu=Tr(b),$O=wO({__proto__:null,default:pu},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BO=b,FO=Symbol.for("react.element"),UO=Symbol.for("react.fragment"),HO=Object.prototype.hasOwnProperty,ZO=BO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WO={key:!0,ref:!0,__self:!0,__source:!0};function C1(e,t,n){var r,i={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)HO.call(t,r)&&!WO.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:FO,type:e,key:a,ref:l,props:i,_owner:ZO.current}}Md.Fragment=UO;Md.jsx=C1;Md.jsxs=C1;y1.exports=Md;var s=y1.exports,E1={exports:{}},Pn={},O1={exports:{}},T1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,Y){var G=R.length;R.push(Y);e:for(;0<G;){var re=G-1>>>1,ne=R[re];if(0<i(ne,Y))R[re]=Y,R[G]=ne,G=re;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var Y=R[0],G=R.pop();if(G!==Y){R[0]=G;e:for(var re=0,ne=R.length,H=ne>>>1;re<H;){var ee=2*(re+1)-1,Q=R[ee],ae=ee+1,Te=R[ae];if(0>i(Q,G))ae<ne&&0>i(Te,Q)?(R[re]=Te,R[ae]=G,re=ae):(R[re]=Q,R[ee]=G,re=ee);else if(ae<ne&&0>i(Te,G))R[re]=Te,R[ae]=G,re=ae;else break e}}return Y}function i(R,Y){var G=R.sortIndex-Y.sortIndex;return G!==0?G:R.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],h=1,f=null,g=3,x=!1,j=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var Y=n(m);Y!==null;){if(Y.callback===null)r(m);else if(Y.startTime<=R)r(m),Y.sortIndex=Y.expirationTime,t(d,Y);else break;Y=n(m)}}function k(R){if(w=!1,v(R),!j)if(n(d)!==null)j=!0,Z(O);else{var Y=n(m);Y!==null&&q(k,Y.startTime-R)}}function O(R,Y){j=!1,w&&(w=!1,_(I),I=-1),x=!0;var G=g;try{for(v(Y),f=n(d);f!==null&&(!(f.expirationTime>Y)||R&&!M());){var re=f.callback;if(typeof re=="function"){f.callback=null,g=f.priorityLevel;var ne=re(f.expirationTime<=Y);Y=e.unstable_now(),typeof ne=="function"?f.callback=ne:f===n(d)&&r(d),v(Y)}else r(d);f=n(d)}if(f!==null)var H=!0;else{var ee=n(m);ee!==null&&q(k,ee.startTime-Y),H=!1}return H}finally{f=null,g=G,x=!1}}var A=!1,E=null,I=-1,$=5,D=-1;function M(){return!(e.unstable_now()-D<$)}function z(){if(E!==null){var R=e.unstable_now();D=R;var Y=!0;try{Y=E(!0,R)}finally{Y?B():(A=!1,E=null)}}else A=!1}var B;if(typeof N=="function")B=function(){N(z)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,U=C.port2;C.port1.onmessage=z,B=function(){U.postMessage(null)}}else B=function(){S(z,0)};function Z(R){E=R,A||(A=!0,B())}function q(R,Y){I=S(function(){R(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){j||x||(j=!0,Z(O))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(R){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var G=g;g=Y;try{return R()}finally{g=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,Y){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=g;g=R;try{return Y()}finally{g=G}},e.unstable_scheduleCallback=function(R,Y,G){var re=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?re+G:re):G=re,R){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=G+ne,R={id:h++,callback:Y,priorityLevel:R,startTime:G,expirationTime:ne,sortIndex:-1},G>re?(R.sortIndex=G,t(m,R),n(d)===null&&R===n(m)&&(w?(_(I),I=-1):w=!0,q(k,G-re))):(R.sortIndex=ne,t(d,R),j||x||(j=!0,Z(O))),R},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(R){var Y=g;return function(){var G=g;g=Y;try{return R.apply(this,arguments)}finally{g=G}}}})(T1);O1.exports=T1;var VO=O1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KO=b,wn=VO;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A1=new Set,nl={};function Aa(e,t){_s(e,t),_s(e+"Capture",t)}function _s(e,t){for(nl[e]=t,e=0;e<t.length;e++)A1.add(t[e])}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lm=Object.prototype.hasOwnProperty,qO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Px={},kx={};function GO(e){return Lm.call(kx,e)?!0:Lm.call(Px,e)?!1:qO.test(e)?kx[e]=!0:(Px[e]=!0,!1)}function YO(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XO(e,t,n,r){if(t===null||typeof t>"u"||YO(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qt(e,t,n,r,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new Qt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new Qt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new Qt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new Qt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new Qt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new Qt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new Qt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new Qt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new Qt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Eg=/[\-:]([a-z])/g;function Og(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Eg,Og);Et[t]=new Qt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Eg,Og);Et[t]=new Qt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Eg,Og);Et[t]=new Qt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new Qt(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new Qt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tg(e,t,n,r){var i=Et.hasOwnProperty(t)?Et[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XO(t,n,i,r)&&(n=null),r||i===null?GO(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ii=KO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_c=Symbol.for("react.element"),Xa=Symbol.for("react.portal"),Qa=Symbol.for("react.fragment"),Ag=Symbol.for("react.strict_mode"),Dm=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),L1=Symbol.for("react.context"),Mg=Symbol.for("react.forward_ref"),Im=Symbol.for("react.suspense"),Rm=Symbol.for("react.suspense_list"),Lg=Symbol.for("react.memo"),pi=Symbol.for("react.lazy"),D1=Symbol.for("react.offscreen"),Cx=Symbol.iterator;function xo(e){return e===null||typeof e!="object"?null:(e=Cx&&e[Cx]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,Th;function zo(e){if(Th===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Th=t&&t[1]||""}return`
`+Th+e}var Ah=!1;function Mh(e,t){if(!e||Ah)return"";Ah=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var r=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){r=m}e.call(t.prototype)}else{try{throw Error()}catch(m){r=m}e()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),a=r.stack.split(`
`),l=i.length-1,u=a.length-1;1<=l&&0<=u&&i[l]!==a[u];)u--;for(;1<=l&&0<=u;l--,u--)if(i[l]!==a[u]){if(l!==1||u!==1)do if(l--,u--,0>u||i[l]!==a[u]){var d=`
`+i[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=u);break}}}finally{Ah=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zo(e):""}function QO(e){switch(e.tag){case 5:return zo(e.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return e=Mh(e.type,!1),e;case 11:return e=Mh(e.type.render,!1),e;case 1:return e=Mh(e.type,!0),e;default:return""}}function zm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qa:return"Fragment";case Xa:return"Portal";case Dm:return"Profiler";case Ag:return"StrictMode";case Im:return"Suspense";case Rm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case L1:return(e.displayName||"Context")+".Consumer";case M1:return(e._context.displayName||"Context")+".Provider";case Mg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Lg:return t=e.displayName||null,t!==null?t:zm(e.type)||"Memo";case pi:t=e._payload,e=e._init;try{return zm(e(t))}catch{}}return null}function JO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zm(t);case 8:return t===Ag?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ri(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function I1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eT(e){var t=I1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wc(e){e._valueTracker||(e._valueTracker=eT(e))}function R1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=I1(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $m(e,t){var n=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ex(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ri(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function z1(e,t){t=t.checked,t!=null&&Tg(e,"checked",t,!1)}function Bm(e,t){z1(e,t);var n=Ri(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fm(e,t.type,n):t.hasOwnProperty("defaultValue")&&Fm(e,t.type,Ri(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ox(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Fm(e,t,n){(t!=="number"||gu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $o=Array.isArray;function ds(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ri(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Um(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(te(92));if($o(n)){if(1<n.length)throw Error(te(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ri(n)}}function $1(e,t){var n=Ri(t.value),r=Ri(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ax(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function B1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?B1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jc,F1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jc=jc||document.createElement("div"),jc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tT=["Webkit","ms","Moz","O"];Object.keys(Zo).forEach(function(e){tT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zo[t]=Zo[e]})});function U1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zo.hasOwnProperty(e)&&Zo[e]?(""+t).trim():t+"px"}function H1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=U1(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var nT=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zm(e,t){if(t){if(nT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function Wm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vm=null;function Dg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Km=null,fs=null,hs=null;function Mx(e){if(e=Dl(e)){if(typeof Km!="function")throw Error(te(280));var t=e.stateNode;t&&(t=zd(t),Km(e.stateNode,e.type,t))}}function Z1(e){fs?hs?hs.push(e):hs=[e]:fs=e}function W1(){if(fs){var e=fs,t=hs;if(hs=fs=null,Mx(e),t)for(e=0;e<t.length;e++)Mx(t[e])}}function V1(e,t){return e(t)}function K1(){}var Lh=!1;function q1(e,t,n){if(Lh)return e(t,n);Lh=!0;try{return V1(e,t,n)}finally{Lh=!1,(fs!==null||hs!==null)&&(K1(),W1())}}function il(e,t){var n=e.stateNode;if(n===null)return null;var r=zd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var qm=!1;if(Yr)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){qm=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{qm=!1}function rT(e,t,n,r,i,a,l,u,d){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(h){this.onError(h)}}var Wo=!1,vu=null,yu=!1,Gm=null,iT={onError:function(e){Wo=!0,vu=e}};function aT(e,t,n,r,i,a,l,u,d){Wo=!1,vu=null,rT.apply(iT,arguments)}function sT(e,t,n,r,i,a,l,u,d){if(aT.apply(this,arguments),Wo){if(Wo){var m=vu;Wo=!1,vu=null}else throw Error(te(198));yu||(yu=!0,Gm=m)}}function Ma(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function G1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lx(e){if(Ma(e)!==e)throw Error(te(188))}function oT(e){var t=e.alternate;if(!t){if(t=Ma(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Lx(i),e;if(a===r)return Lx(i),t;a=a.sibling}throw Error(te(188))}if(n.return!==r.return)n=i,r=a;else{for(var l=!1,u=i.child;u;){if(u===n){l=!0,n=i,r=a;break}if(u===r){l=!0,r=i,n=a;break}u=u.sibling}if(!l){for(u=a.child;u;){if(u===n){l=!0,n=a,r=i;break}if(u===r){l=!0,r=a,n=i;break}u=u.sibling}if(!l)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function Y1(e){return e=oT(e),e!==null?X1(e):null}function X1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=X1(e);if(t!==null)return t;e=e.sibling}return null}var Q1=wn.unstable_scheduleCallback,Dx=wn.unstable_cancelCallback,lT=wn.unstable_shouldYield,cT=wn.unstable_requestPaint,Je=wn.unstable_now,uT=wn.unstable_getCurrentPriorityLevel,Ig=wn.unstable_ImmediatePriority,J1=wn.unstable_UserBlockingPriority,xu=wn.unstable_NormalPriority,dT=wn.unstable_LowPriority,ej=wn.unstable_IdlePriority,Ld=null,Pr=null;function fT(e){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot(Ld,e,void 0,(e.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:pT,hT=Math.log,mT=Math.LN2;function pT(e){return e>>>=0,e===0?32:31-(hT(e)/mT|0)|0}var Nc=64,Sc=4194304;function Bo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var u=l&~i;u!==0?r=Bo(u):(a&=l,a!==0&&(r=Bo(a)))}else l=n&~i,l!==0?r=Bo(l):a!==0&&(r=Bo(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-dr(t),i=1<<n,r|=e[n],t&=~i;return r}function gT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vT(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-dr(a),u=1<<l,d=i[l];d===-1?(!(u&n)||u&r)&&(i[l]=gT(u,t)):d<=t&&(e.expiredLanes|=u),a&=~u}}function Ym(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tj(){var e=Nc;return Nc<<=1,!(Nc&4194240)&&(Nc=64),e}function Dh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ml(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dr(t),e[t]=n}function yT(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-dr(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Rg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ee=0;function nj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var rj,zg,ij,aj,sj,Xm=!1,Pc=[],Pi=null,ki=null,Ci=null,al=new Map,sl=new Map,xi=[],xT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ix(e,t){switch(e){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":al.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(t.pointerId)}}function _o(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Dl(t),t!==null&&zg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function bT(e,t,n,r,i){switch(t){case"focusin":return Pi=_o(Pi,e,t,n,r,i),!0;case"dragenter":return ki=_o(ki,e,t,n,r,i),!0;case"mouseover":return Ci=_o(Ci,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return al.set(a,_o(al.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,sl.set(a,_o(sl.get(a)||null,e,t,n,r,i)),!0}return!1}function oj(e){var t=oa(e.target);if(t!==null){var n=Ma(t);if(n!==null){if(t=n.tag,t===13){if(t=G1(n),t!==null){e.blockedOn=t,sj(e.priority,function(){ij(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Vm=r,n.target.dispatchEvent(r),Vm=null}else return t=Dl(n),t!==null&&zg(t),e.blockedOn=n,!1;t.shift()}return!0}function Rx(e,t,n){tu(e)&&n.delete(t)}function _T(){Xm=!1,Pi!==null&&tu(Pi)&&(Pi=null),ki!==null&&tu(ki)&&(ki=null),Ci!==null&&tu(Ci)&&(Ci=null),al.forEach(Rx),sl.forEach(Rx)}function wo(e,t){e.blockedOn===t&&(e.blockedOn=null,Xm||(Xm=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,_T)))}function ol(e){function t(i){return wo(i,e)}if(0<Pc.length){wo(Pc[0],e);for(var n=1;n<Pc.length;n++){var r=Pc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Pi!==null&&wo(Pi,e),ki!==null&&wo(ki,e),Ci!==null&&wo(Ci,e),al.forEach(t),sl.forEach(t),n=0;n<xi.length;n++)r=xi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xi.length&&(n=xi[0],n.blockedOn===null);)oj(n),n.blockedOn===null&&xi.shift()}var ms=ii.ReactCurrentBatchConfig,_u=!0;function wT(e,t,n,r){var i=Ee,a=ms.transition;ms.transition=null;try{Ee=1,$g(e,t,n,r)}finally{Ee=i,ms.transition=a}}function jT(e,t,n,r){var i=Ee,a=ms.transition;ms.transition=null;try{Ee=4,$g(e,t,n,r)}finally{Ee=i,ms.transition=a}}function $g(e,t,n,r){if(_u){var i=Qm(e,t,n,r);if(i===null)Wh(e,t,r,wu,n),Ix(e,r);else if(bT(i,e,t,n,r))r.stopPropagation();else if(Ix(e,r),t&4&&-1<xT.indexOf(e)){for(;i!==null;){var a=Dl(i);if(a!==null&&rj(a),a=Qm(e,t,n,r),a===null&&Wh(e,t,r,wu,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Wh(e,t,r,null,n)}}var wu=null;function Qm(e,t,n,r){if(wu=null,e=Dg(r),e=oa(e),e!==null)if(t=Ma(e),t===null)e=null;else if(n=t.tag,n===13){if(e=G1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wu=e,null}function lj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uT()){case Ig:return 1;case J1:return 4;case xu:case dT:return 16;case ej:return 536870912;default:return 16}default:return 16}}var ji=null,Bg=null,nu=null;function cj(){if(nu)return nu;var e,t=Bg,n=t.length,r,i="value"in ji?ji.value:ji.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[a-r];r++);return nu=i.slice(e,1<r?1-r:void 0)}function ru(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kc(){return!0}function zx(){return!1}function kn(e){function t(n,r,i,a,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?kc:zx,this.isPropagationStopped=zx,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kc)},persist:function(){},isPersistent:kc}),t}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fg=kn(Ws),Ll=qe({},Ws,{view:0,detail:0}),NT=kn(Ll),Ih,Rh,jo,Dd=qe({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ug,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jo&&(jo&&e.type==="mousemove"?(Ih=e.screenX-jo.screenX,Rh=e.screenY-jo.screenY):Rh=Ih=0,jo=e),Ih)},movementY:function(e){return"movementY"in e?e.movementY:Rh}}),$x=kn(Dd),ST=qe({},Dd,{dataTransfer:0}),PT=kn(ST),kT=qe({},Ll,{relatedTarget:0}),zh=kn(kT),CT=qe({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),ET=kn(CT),OT=qe({},Ws,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),TT=kn(OT),AT=qe({},Ws,{data:0}),Bx=kn(AT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DT[e])?!!t[e]:!1}function Ug(){return IT}var RT=qe({},Ll,{key:function(e){if(e.key){var t=MT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ru(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?LT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ug,charCode:function(e){return e.type==="keypress"?ru(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ru(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zT=kn(RT),$T=qe({},Dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fx=kn($T),BT=qe({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ug}),FT=kn(BT),UT=qe({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),HT=kn(UT),ZT=qe({},Dd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WT=kn(ZT),VT=[9,13,27,32],Hg=Yr&&"CompositionEvent"in window,Vo=null;Yr&&"documentMode"in document&&(Vo=document.documentMode);var KT=Yr&&"TextEvent"in window&&!Vo,uj=Yr&&(!Hg||Vo&&8<Vo&&11>=Vo),Ux=" ",Hx=!1;function dj(e,t){switch(e){case"keyup":return VT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ja=!1;function qT(e,t){switch(e){case"compositionend":return fj(t);case"keypress":return t.which!==32?null:(Hx=!0,Ux);case"textInput":return e=t.data,e===Ux&&Hx?null:e;default:return null}}function GT(e,t){if(Ja)return e==="compositionend"||!Hg&&dj(e,t)?(e=cj(),nu=Bg=ji=null,Ja=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uj&&t.locale!=="ko"?null:t.data;default:return null}}var YT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!YT[e.type]:t==="textarea"}function hj(e,t,n,r){Z1(r),t=ju(t,"onChange"),0<t.length&&(n=new Fg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ko=null,ll=null;function XT(e){Nj(e,0)}function Id(e){var t=ns(e);if(R1(t))return e}function QT(e,t){if(e==="change")return t}var mj=!1;if(Yr){var $h;if(Yr){var Bh="oninput"in document;if(!Bh){var Wx=document.createElement("div");Wx.setAttribute("oninput","return;"),Bh=typeof Wx.oninput=="function"}$h=Bh}else $h=!1;mj=$h&&(!document.documentMode||9<document.documentMode)}function Vx(){Ko&&(Ko.detachEvent("onpropertychange",pj),ll=Ko=null)}function pj(e){if(e.propertyName==="value"&&Id(ll)){var t=[];hj(t,ll,e,Dg(e)),q1(XT,t)}}function JT(e,t,n){e==="focusin"?(Vx(),Ko=t,ll=n,Ko.attachEvent("onpropertychange",pj)):e==="focusout"&&Vx()}function eA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Id(ll)}function tA(e,t){if(e==="click")return Id(t)}function nA(e,t){if(e==="input"||e==="change")return Id(t)}function rA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hr=typeof Object.is=="function"?Object.is:rA;function cl(e,t){if(hr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lm.call(t,i)||!hr(e[i],t[i]))return!1}return!0}function Kx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qx(e,t){var n=Kx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kx(n)}}function gj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vj(){for(var e=window,t=gu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gu(e.document)}return t}function Zg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function iA(e){var t=vj(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&gj(n.ownerDocument.documentElement,n)){if(r!==null&&Zg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=qx(n,a);var l=qx(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var aA=Yr&&"documentMode"in document&&11>=document.documentMode,es=null,Jm=null,qo=null,ep=!1;function Gx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ep||es==null||es!==gu(r)||(r=es,"selectionStart"in r&&Zg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qo&&cl(qo,r)||(qo=r,r=ju(Jm,"onSelect"),0<r.length&&(t=new Fg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=es)))}function Cc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ts={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},Fh={},yj={};Yr&&(yj=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function Rd(e){if(Fh[e])return Fh[e];if(!ts[e])return e;var t=ts[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in yj)return Fh[e]=t[n];return e}var xj=Rd("animationend"),bj=Rd("animationiteration"),_j=Rd("animationstart"),wj=Rd("transitionend"),jj=new Map,Yx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fi(e,t){jj.set(e,t),Aa(t,[e])}for(var Uh=0;Uh<Yx.length;Uh++){var Hh=Yx[Uh],sA=Hh.toLowerCase(),oA=Hh[0].toUpperCase()+Hh.slice(1);Fi(sA,"on"+oA)}Fi(xj,"onAnimationEnd");Fi(bj,"onAnimationIteration");Fi(_j,"onAnimationStart");Fi("dblclick","onDoubleClick");Fi("focusin","onFocus");Fi("focusout","onBlur");Fi(wj,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fo));function Xx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,sT(r,t,void 0,e),e.currentTarget=null}function Nj(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var l=r.length-1;0<=l;l--){var u=r[l],d=u.instance,m=u.currentTarget;if(u=u.listener,d!==a&&i.isPropagationStopped())break e;Xx(i,u,m),a=d}else for(l=0;l<r.length;l++){if(u=r[l],d=u.instance,m=u.currentTarget,u=u.listener,d!==a&&i.isPropagationStopped())break e;Xx(i,u,m),a=d}}}if(yu)throw e=Gm,yu=!1,Gm=null,e}function Be(e,t){var n=t[ap];n===void 0&&(n=t[ap]=new Set);var r=e+"__bubble";n.has(r)||(Sj(t,e,2,!1),n.add(r))}function Zh(e,t,n){var r=0;t&&(r|=4),Sj(n,e,r,t)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function ul(e){if(!e[Ec]){e[Ec]=!0,A1.forEach(function(n){n!=="selectionchange"&&(lA.has(n)||Zh(n,!1,e),Zh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ec]||(t[Ec]=!0,Zh("selectionchange",!1,t))}}function Sj(e,t,n,r){switch(lj(t)){case 1:var i=wT;break;case 4:i=jT;break;default:i=$g}n=i.bind(null,t,n,e),i=void 0,!qm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wh(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;u!==null;){if(l=oa(u),l===null)return;if(d=l.tag,d===5||d===6){r=a=l;continue e}u=u.parentNode}}r=r.return}q1(function(){var m=a,h=Dg(n),f=[];e:{var g=jj.get(e);if(g!==void 0){var x=Fg,j=e;switch(e){case"keypress":if(ru(n)===0)break e;case"keydown":case"keyup":x=zT;break;case"focusin":j="focus",x=zh;break;case"focusout":j="blur",x=zh;break;case"beforeblur":case"afterblur":x=zh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=$x;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=PT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=FT;break;case xj:case bj:case _j:x=ET;break;case wj:x=HT;break;case"scroll":x=NT;break;case"wheel":x=WT;break;case"copy":case"cut":case"paste":x=TT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Fx}var w=(t&4)!==0,S=!w&&e==="scroll",_=w?g!==null?g+"Capture":null:g;w=[];for(var N=m,v;N!==null;){v=N;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,_!==null&&(k=il(N,_),k!=null&&w.push(dl(N,k,v)))),S)break;N=N.return}0<w.length&&(g=new x(g,j,null,n,h),f.push({event:g,listeners:w}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",g&&n!==Vm&&(j=n.relatedTarget||n.fromElement)&&(oa(j)||j[Xr]))break e;if((x||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,x?(j=n.relatedTarget||n.toElement,x=m,j=j?oa(j):null,j!==null&&(S=Ma(j),j!==S||j.tag!==5&&j.tag!==6)&&(j=null)):(x=null,j=m),x!==j)){if(w=$x,k="onMouseLeave",_="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(w=Fx,k="onPointerLeave",_="onPointerEnter",N="pointer"),S=x==null?g:ns(x),v=j==null?g:ns(j),g=new w(k,N+"leave",x,n,h),g.target=S,g.relatedTarget=v,k=null,oa(h)===m&&(w=new w(_,N+"enter",j,n,h),w.target=v,w.relatedTarget=S,k=w),S=k,x&&j)t:{for(w=x,_=j,N=0,v=w;v;v=qa(v))N++;for(v=0,k=_;k;k=qa(k))v++;for(;0<N-v;)w=qa(w),N--;for(;0<v-N;)_=qa(_),v--;for(;N--;){if(w===_||_!==null&&w===_.alternate)break t;w=qa(w),_=qa(_)}w=null}else w=null;x!==null&&Qx(f,g,x,w,!1),j!==null&&S!==null&&Qx(f,S,j,w,!0)}}e:{if(g=m?ns(m):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var O=QT;else if(Zx(g))if(mj)O=nA;else{O=eA;var A=JT}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=tA);if(O&&(O=O(e,m))){hj(f,O,n,h);break e}A&&A(e,g,m),e==="focusout"&&(A=g._wrapperState)&&A.controlled&&g.type==="number"&&Fm(g,"number",g.value)}switch(A=m?ns(m):window,e){case"focusin":(Zx(A)||A.contentEditable==="true")&&(es=A,Jm=m,qo=null);break;case"focusout":qo=Jm=es=null;break;case"mousedown":ep=!0;break;case"contextmenu":case"mouseup":case"dragend":ep=!1,Gx(f,n,h);break;case"selectionchange":if(aA)break;case"keydown":case"keyup":Gx(f,n,h)}var E;if(Hg)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ja?dj(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(uj&&n.locale!=="ko"&&(Ja||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ja&&(E=cj()):(ji=h,Bg="value"in ji?ji.value:ji.textContent,Ja=!0)),A=ju(m,I),0<A.length&&(I=new Bx(I,e,null,n,h),f.push({event:I,listeners:A}),E?I.data=E:(E=fj(n),E!==null&&(I.data=E)))),(E=KT?qT(e,n):GT(e,n))&&(m=ju(m,"onBeforeInput"),0<m.length&&(h=new Bx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:m}),h.data=E))}Nj(f,t)})}function dl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ju(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=il(e,n),a!=null&&r.unshift(dl(e,a,i)),a=il(e,t),a!=null&&r.push(dl(e,a,i))),e=e.return}return r}function qa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qx(e,t,n,r,i){for(var a=t._reactName,l=[];n!==null&&n!==r;){var u=n,d=u.alternate,m=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&m!==null&&(u=m,i?(d=il(n,a),d!=null&&l.unshift(dl(n,d,u))):i||(d=il(n,a),d!=null&&l.push(dl(n,d,u)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var cA=/\r\n?/g,uA=/\u0000|\uFFFD/g;function Jx(e){return(typeof e=="string"?e:""+e).replace(cA,`
`).replace(uA,"")}function Oc(e,t,n){if(t=Jx(t),Jx(e)!==t&&n)throw Error(te(425))}function Nu(){}var tp=null,np=null;function rp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ip=typeof setTimeout=="function"?setTimeout:void 0,dA=typeof clearTimeout=="function"?clearTimeout:void 0,eb=typeof Promise=="function"?Promise:void 0,fA=typeof queueMicrotask=="function"?queueMicrotask:typeof eb<"u"?function(e){return eb.resolve(null).then(e).catch(hA)}:ip;function hA(e){setTimeout(function(){throw e})}function Vh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ol(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ol(t)}function Ei(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),jr="__reactFiber$"+Vs,fl="__reactProps$"+Vs,Xr="__reactContainer$"+Vs,ap="__reactEvents$"+Vs,mA="__reactListeners$"+Vs,pA="__reactHandles$"+Vs;function oa(e){var t=e[jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xr]||n[jr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tb(e);e!==null;){if(n=e[jr])return n;e=tb(e)}return t}e=n,n=e.parentNode}return null}function Dl(e){return e=e[jr]||e[Xr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ns(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function zd(e){return e[fl]||null}var sp=[],rs=-1;function Ui(e){return{current:e}}function Ue(e){0>rs||(e.current=sp[rs],sp[rs]=null,rs--)}function ze(e,t){rs++,sp[rs]=e.current,e.current=t}var zi={},$t=Ui(zi),on=Ui(!1),wa=zi;function ws(e,t){var n=e.type.contextTypes;if(!n)return zi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ln(e){return e=e.childContextTypes,e!=null}function Su(){Ue(on),Ue($t)}function nb(e,t,n){if($t.current!==zi)throw Error(te(168));ze($t,t),ze(on,n)}function Pj(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(te(108,JO(e)||"Unknown",i));return qe({},n,r)}function Pu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zi,wa=$t.current,ze($t,e),ze(on,on.current),!0}function rb(e,t,n){var r=e.stateNode;if(!r)throw Error(te(169));n?(e=Pj(e,t,wa),r.__reactInternalMemoizedMergedChildContext=e,Ue(on),Ue($t),ze($t,e)):Ue(on),ze(on,n)}var Rr=null,$d=!1,Kh=!1;function kj(e){Rr===null?Rr=[e]:Rr.push(e)}function gA(e){$d=!0,kj(e)}function Hi(){if(!Kh&&Rr!==null){Kh=!0;var e=0,t=Ee;try{var n=Rr;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Rr=null,$d=!1}catch(i){throw Rr!==null&&(Rr=Rr.slice(e+1)),Q1(Ig,Hi),i}finally{Ee=t,Kh=!1}}return null}var is=[],as=0,ku=null,Cu=0,Rn=[],zn=0,ja=null,Br=1,Fr="";function ta(e,t){is[as++]=Cu,is[as++]=ku,ku=e,Cu=t}function Cj(e,t,n){Rn[zn++]=Br,Rn[zn++]=Fr,Rn[zn++]=ja,ja=e;var r=Br;e=Fr;var i=32-dr(r)-1;r&=~(1<<i),n+=1;var a=32-dr(t)+i;if(30<a){var l=i-i%5;a=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Br=1<<32-dr(t)+i|n<<i|r,Fr=a+e}else Br=1<<a|n<<i|r,Fr=e}function Wg(e){e.return!==null&&(ta(e,1),Cj(e,1,0))}function Vg(e){for(;e===ku;)ku=is[--as],is[as]=null,Cu=is[--as],is[as]=null;for(;e===ja;)ja=Rn[--zn],Rn[zn]=null,Fr=Rn[--zn],Rn[zn]=null,Br=Rn[--zn],Rn[zn]=null}var bn=null,yn=null,He=!1,or=null;function Ej(e,t){var n=Un(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ib(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bn=e,yn=Ei(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bn=e,yn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ja!==null?{id:Br,overflow:Fr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Un(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,bn=e,yn=null,!0):!1;default:return!1}}function op(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lp(e){if(He){var t=yn;if(t){var n=t;if(!ib(e,t)){if(op(e))throw Error(te(418));t=Ei(n.nextSibling);var r=bn;t&&ib(e,t)?Ej(r,n):(e.flags=e.flags&-4097|2,He=!1,bn=e)}}else{if(op(e))throw Error(te(418));e.flags=e.flags&-4097|2,He=!1,bn=e}}}function ab(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bn=e}function Tc(e){if(e!==bn)return!1;if(!He)return ab(e),He=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rp(e.type,e.memoizedProps)),t&&(t=yn)){if(op(e))throw Oj(),Error(te(418));for(;t;)Ej(e,t),t=Ei(t.nextSibling)}if(ab(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yn=Ei(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yn=null}}else yn=bn?Ei(e.stateNode.nextSibling):null;return!0}function Oj(){for(var e=yn;e;)e=Ei(e.nextSibling)}function js(){yn=bn=null,He=!1}function Kg(e){or===null?or=[e]:or.push(e)}var vA=ii.ReactCurrentBatchConfig;function No(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var u=i.refs;l===null?delete u[a]:u[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,e))}return e}function Ac(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sb(e){var t=e._init;return t(e._payload)}function Tj(e){function t(_,N){if(e){var v=_.deletions;v===null?(_.deletions=[N],_.flags|=16):v.push(N)}}function n(_,N){if(!e)return null;for(;N!==null;)t(_,N),N=N.sibling;return null}function r(_,N){for(_=new Map;N!==null;)N.key!==null?_.set(N.key,N):_.set(N.index,N),N=N.sibling;return _}function i(_,N){return _=Mi(_,N),_.index=0,_.sibling=null,_}function a(_,N,v){return _.index=v,e?(v=_.alternate,v!==null?(v=v.index,v<N?(_.flags|=2,N):v):(_.flags|=2,N)):(_.flags|=1048576,N)}function l(_){return e&&_.alternate===null&&(_.flags|=2),_}function u(_,N,v,k){return N===null||N.tag!==6?(N=em(v,_.mode,k),N.return=_,N):(N=i(N,v),N.return=_,N)}function d(_,N,v,k){var O=v.type;return O===Qa?h(_,N,v.props.children,k,v.key):N!==null&&(N.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===pi&&sb(O)===N.type)?(k=i(N,v.props),k.ref=No(_,N,v),k.return=_,k):(k=uu(v.type,v.key,v.props,null,_.mode,k),k.ref=No(_,N,v),k.return=_,k)}function m(_,N,v,k){return N===null||N.tag!==4||N.stateNode.containerInfo!==v.containerInfo||N.stateNode.implementation!==v.implementation?(N=tm(v,_.mode,k),N.return=_,N):(N=i(N,v.children||[]),N.return=_,N)}function h(_,N,v,k,O){return N===null||N.tag!==7?(N=va(v,_.mode,k,O),N.return=_,N):(N=i(N,v),N.return=_,N)}function f(_,N,v){if(typeof N=="string"&&N!==""||typeof N=="number")return N=em(""+N,_.mode,v),N.return=_,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case _c:return v=uu(N.type,N.key,N.props,null,_.mode,v),v.ref=No(_,null,N),v.return=_,v;case Xa:return N=tm(N,_.mode,v),N.return=_,N;case pi:var k=N._init;return f(_,k(N._payload),v)}if($o(N)||xo(N))return N=va(N,_.mode,v,null),N.return=_,N;Ac(_,N)}return null}function g(_,N,v,k){var O=N!==null?N.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return O!==null?null:u(_,N,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _c:return v.key===O?d(_,N,v,k):null;case Xa:return v.key===O?m(_,N,v,k):null;case pi:return O=v._init,g(_,N,O(v._payload),k)}if($o(v)||xo(v))return O!==null?null:h(_,N,v,k,null);Ac(_,v)}return null}function x(_,N,v,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(v)||null,u(N,_,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _c:return _=_.get(k.key===null?v:k.key)||null,d(N,_,k,O);case Xa:return _=_.get(k.key===null?v:k.key)||null,m(N,_,k,O);case pi:var A=k._init;return x(_,N,v,A(k._payload),O)}if($o(k)||xo(k))return _=_.get(v)||null,h(N,_,k,O,null);Ac(N,k)}return null}function j(_,N,v,k){for(var O=null,A=null,E=N,I=N=0,$=null;E!==null&&I<v.length;I++){E.index>I?($=E,E=null):$=E.sibling;var D=g(_,E,v[I],k);if(D===null){E===null&&(E=$);break}e&&E&&D.alternate===null&&t(_,E),N=a(D,N,I),A===null?O=D:A.sibling=D,A=D,E=$}if(I===v.length)return n(_,E),He&&ta(_,I),O;if(E===null){for(;I<v.length;I++)E=f(_,v[I],k),E!==null&&(N=a(E,N,I),A===null?O=E:A.sibling=E,A=E);return He&&ta(_,I),O}for(E=r(_,E);I<v.length;I++)$=x(E,_,I,v[I],k),$!==null&&(e&&$.alternate!==null&&E.delete($.key===null?I:$.key),N=a($,N,I),A===null?O=$:A.sibling=$,A=$);return e&&E.forEach(function(M){return t(_,M)}),He&&ta(_,I),O}function w(_,N,v,k){var O=xo(v);if(typeof O!="function")throw Error(te(150));if(v=O.call(v),v==null)throw Error(te(151));for(var A=O=null,E=N,I=N=0,$=null,D=v.next();E!==null&&!D.done;I++,D=v.next()){E.index>I?($=E,E=null):$=E.sibling;var M=g(_,E,D.value,k);if(M===null){E===null&&(E=$);break}e&&E&&M.alternate===null&&t(_,E),N=a(M,N,I),A===null?O=M:A.sibling=M,A=M,E=$}if(D.done)return n(_,E),He&&ta(_,I),O;if(E===null){for(;!D.done;I++,D=v.next())D=f(_,D.value,k),D!==null&&(N=a(D,N,I),A===null?O=D:A.sibling=D,A=D);return He&&ta(_,I),O}for(E=r(_,E);!D.done;I++,D=v.next())D=x(E,_,I,D.value,k),D!==null&&(e&&D.alternate!==null&&E.delete(D.key===null?I:D.key),N=a(D,N,I),A===null?O=D:A.sibling=D,A=D);return e&&E.forEach(function(z){return t(_,z)}),He&&ta(_,I),O}function S(_,N,v,k){if(typeof v=="object"&&v!==null&&v.type===Qa&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case _c:e:{for(var O=v.key,A=N;A!==null;){if(A.key===O){if(O=v.type,O===Qa){if(A.tag===7){n(_,A.sibling),N=i(A,v.props.children),N.return=_,_=N;break e}}else if(A.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===pi&&sb(O)===A.type){n(_,A.sibling),N=i(A,v.props),N.ref=No(_,A,v),N.return=_,_=N;break e}n(_,A);break}else t(_,A);A=A.sibling}v.type===Qa?(N=va(v.props.children,_.mode,k,v.key),N.return=_,_=N):(k=uu(v.type,v.key,v.props,null,_.mode,k),k.ref=No(_,N,v),k.return=_,_=k)}return l(_);case Xa:e:{for(A=v.key;N!==null;){if(N.key===A)if(N.tag===4&&N.stateNode.containerInfo===v.containerInfo&&N.stateNode.implementation===v.implementation){n(_,N.sibling),N=i(N,v.children||[]),N.return=_,_=N;break e}else{n(_,N);break}else t(_,N);N=N.sibling}N=tm(v,_.mode,k),N.return=_,_=N}return l(_);case pi:return A=v._init,S(_,N,A(v._payload),k)}if($o(v))return j(_,N,v,k);if(xo(v))return w(_,N,v,k);Ac(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,N!==null&&N.tag===6?(n(_,N.sibling),N=i(N,v),N.return=_,_=N):(n(_,N),N=em(v,_.mode,k),N.return=_,_=N),l(_)):n(_,N)}return S}var Ns=Tj(!0),Aj=Tj(!1),Eu=Ui(null),Ou=null,ss=null,qg=null;function Gg(){qg=ss=Ou=null}function Yg(e){var t=Eu.current;Ue(Eu),e._currentValue=t}function cp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ps(e,t){Ou=e,qg=ss=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rn=!0),e.firstContext=null)}function Wn(e){var t=e._currentValue;if(qg!==e)if(e={context:e,memoizedValue:t,next:null},ss===null){if(Ou===null)throw Error(te(308));ss=e,Ou.dependencies={lanes:0,firstContext:e}}else ss=ss.next=e;return t}var la=null;function Xg(e){la===null?la=[e]:la.push(e)}function Mj(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Xg(t)):(n.next=i.next,i.next=n),t.interleaved=n,Qr(e,r)}function Qr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var gi=!1;function Qg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Qr(e,n)}return i=r.interleaved,i===null?(t.next=t,Xg(r)):(t.next=i.next,i.next=t),r.interleaved=t,Qr(e,n)}function iu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rg(e,n)}}function ob(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Tu(e,t,n,r){var i=e.updateQueue;gi=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,m=d.next;d.next=null,l===null?a=m:l.next=m,l=d;var h=e.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==l&&(u===null?h.firstBaseUpdate=m:u.next=m,h.lastBaseUpdate=d))}if(a!==null){var f=i.baseState;l=0,h=m=d=null,u=a;do{var g=u.lane,x=u.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:x,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var j=e,w=u;switch(g=t,x=n,w.tag){case 1:if(j=w.payload,typeof j=="function"){f=j.call(x,f,g);break e}f=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=w.payload,g=typeof j=="function"?j.call(x,f,g):j,g==null)break e;f=qe({},f,g);break e;case 2:gi=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[u]:g.push(u))}else x={eventTime:x,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(m=h=x,d=f):h=h.next=x,l|=g;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;g=u,u=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(d=f),i.baseState=d,i.firstBaseUpdate=m,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Sa|=l,e.lanes=l,e.memoizedState=f}}function lb(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(te(191,i));i.call(r)}}}var Il={},kr=Ui(Il),hl=Ui(Il),ml=Ui(Il);function ca(e){if(e===Il)throw Error(te(174));return e}function Jg(e,t){switch(ze(ml,t),ze(hl,e),ze(kr,Il),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Hm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Hm(t,e)}Ue(kr),ze(kr,t)}function Ss(){Ue(kr),Ue(hl),Ue(ml)}function Dj(e){ca(ml.current);var t=ca(kr.current),n=Hm(t,e.type);t!==n&&(ze(hl,e),ze(kr,n))}function ev(e){hl.current===e&&(Ue(kr),Ue(hl))}var Ve=Ui(0);function Au(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qh=[];function tv(){for(var e=0;e<qh.length;e++)qh[e]._workInProgressVersionPrimary=null;qh.length=0}var au=ii.ReactCurrentDispatcher,Gh=ii.ReactCurrentBatchConfig,Na=0,Ke=null,ot=null,pt=null,Mu=!1,Go=!1,pl=0,yA=0;function Mt(){throw Error(te(321))}function nv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hr(e[n],t[n]))return!1;return!0}function rv(e,t,n,r,i,a){if(Na=a,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,au.current=e===null||e.memoizedState===null?wA:jA,e=n(r,i),Go){a=0;do{if(Go=!1,pl=0,25<=a)throw Error(te(301));a+=1,pt=ot=null,t.updateQueue=null,au.current=NA,e=n(r,i)}while(Go)}if(au.current=Lu,t=ot!==null&&ot.next!==null,Na=0,pt=ot=Ke=null,Mu=!1,t)throw Error(te(300));return e}function iv(){var e=pl!==0;return pl=0,e}function wr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ke.memoizedState=pt=e:pt=pt.next=e,pt}function Vn(){if(ot===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=pt===null?Ke.memoizedState:pt.next;if(t!==null)pt=t,ot=e;else{if(e===null)throw Error(te(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},pt===null?Ke.memoizedState=pt=e:pt=pt.next=e}return pt}function gl(e,t){return typeof t=="function"?t(e):t}function Yh(e){var t=Vn(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=ot,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var u=l=null,d=null,m=a;do{var h=m.lane;if((Na&h)===h)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:e(r,m.action);else{var f={lane:h,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(u=d=f,l=r):d=d.next=f,Ke.lanes|=h,Sa|=h}m=m.next}while(m!==null&&m!==a);d===null?l=r:d.next=u,hr(r,t.memoizedState)||(rn=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Ke.lanes|=a,Sa|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xh(e){var t=Vn(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);hr(a,t.memoizedState)||(rn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ij(){}function Rj(e,t){var n=Ke,r=Vn(),i=t(),a=!hr(r.memoizedState,i);if(a&&(r.memoizedState=i,rn=!0),r=r.queue,av(Bj.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,vl(9,$j.bind(null,n,r,i,t),void 0,null),gt===null)throw Error(te(349));Na&30||zj(n,t,i)}return i}function zj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $j(e,t,n,r){t.value=n,t.getSnapshot=r,Fj(t)&&Uj(e)}function Bj(e,t,n){return n(function(){Fj(t)&&Uj(e)})}function Fj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hr(e,n)}catch{return!0}}function Uj(e){var t=Qr(e,1);t!==null&&fr(t,e,1,-1)}function cb(e){var t=wr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:e},t.queue=e,e=e.dispatch=_A.bind(null,Ke,e),[t.memoizedState,e]}function vl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hj(){return Vn().memoizedState}function su(e,t,n,r){var i=wr();Ke.flags|=e,i.memoizedState=vl(1|t,n,void 0,r===void 0?null:r)}function Bd(e,t,n,r){var i=Vn();r=r===void 0?null:r;var a=void 0;if(ot!==null){var l=ot.memoizedState;if(a=l.destroy,r!==null&&nv(r,l.deps)){i.memoizedState=vl(t,n,a,r);return}}Ke.flags|=e,i.memoizedState=vl(1|t,n,a,r)}function ub(e,t){return su(8390656,8,e,t)}function av(e,t){return Bd(2048,8,e,t)}function Zj(e,t){return Bd(4,2,e,t)}function Wj(e,t){return Bd(4,4,e,t)}function Vj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kj(e,t,n){return n=n!=null?n.concat([e]):null,Bd(4,4,Vj.bind(null,t,e),n)}function sv(){}function qj(e,t){var n=Vn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Gj(e,t){var n=Vn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yj(e,t,n){return Na&21?(hr(n,t)||(n=tj(),Ke.lanes|=n,Sa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rn=!0),e.memoizedState=n)}function xA(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=Gh.transition;Gh.transition={};try{e(!1),t()}finally{Ee=n,Gh.transition=r}}function Xj(){return Vn().memoizedState}function bA(e,t,n){var r=Ai(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qj(e))Jj(t,n);else if(n=Mj(e,t,n,r),n!==null){var i=qt();fr(n,e,r,i),e2(n,t,r)}}function _A(e,t,n){var r=Ai(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qj(e))Jj(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,u=a(l,n);if(i.hasEagerState=!0,i.eagerState=u,hr(u,l)){var d=t.interleaved;d===null?(i.next=i,Xg(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}n=Mj(e,t,i,r),n!==null&&(i=qt(),fr(n,e,r,i),e2(n,t,r))}}function Qj(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function Jj(e,t){Go=Mu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function e2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rg(e,n)}}var Lu={readContext:Wn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},wA={readContext:Wn,useCallback:function(e,t){return wr().memoizedState=[e,t===void 0?null:t],e},useContext:Wn,useEffect:ub,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,su(4194308,4,Vj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return su(4194308,4,e,t)},useInsertionEffect:function(e,t){return su(4,2,e,t)},useMemo:function(e,t){var n=wr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=bA.bind(null,Ke,e),[r.memoizedState,e]},useRef:function(e){var t=wr();return e={current:e},t.memoizedState=e},useState:cb,useDebugValue:sv,useDeferredValue:function(e){return wr().memoizedState=e},useTransition:function(){var e=cb(!1),t=e[0];return e=xA.bind(null,e[1]),wr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ke,i=wr();if(He){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),gt===null)throw Error(te(349));Na&30||zj(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ub(Bj.bind(null,r,a,e),[e]),r.flags|=2048,vl(9,$j.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=wr(),t=gt.identifierPrefix;if(He){var n=Fr,r=Br;n=(r&~(1<<32-dr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=pl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yA++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jA={readContext:Wn,useCallback:qj,useContext:Wn,useEffect:av,useImperativeHandle:Kj,useInsertionEffect:Zj,useLayoutEffect:Wj,useMemo:Gj,useReducer:Yh,useRef:Hj,useState:function(){return Yh(gl)},useDebugValue:sv,useDeferredValue:function(e){var t=Vn();return Yj(t,ot.memoizedState,e)},useTransition:function(){var e=Yh(gl)[0],t=Vn().memoizedState;return[e,t]},useMutableSource:Ij,useSyncExternalStore:Rj,useId:Xj,unstable_isNewReconciler:!1},NA={readContext:Wn,useCallback:qj,useContext:Wn,useEffect:av,useImperativeHandle:Kj,useInsertionEffect:Zj,useLayoutEffect:Wj,useMemo:Gj,useReducer:Xh,useRef:Hj,useState:function(){return Xh(gl)},useDebugValue:sv,useDeferredValue:function(e){var t=Vn();return ot===null?t.memoizedState=e:Yj(t,ot.memoizedState,e)},useTransition:function(){var e=Xh(gl)[0],t=Vn().memoizedState;return[e,t]},useMutableSource:Ij,useSyncExternalStore:Rj,useId:Xj,unstable_isNewReconciler:!1};function ar(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function up(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fd={isMounted:function(e){return(e=e._reactInternals)?Ma(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qt(),i=Ai(e),a=Vr(r,i);a.payload=t,n!=null&&(a.callback=n),t=Oi(e,a,i),t!==null&&(fr(t,e,i,r),iu(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qt(),i=Ai(e),a=Vr(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Oi(e,a,i),t!==null&&(fr(t,e,i,r),iu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qt(),r=Ai(e),i=Vr(n,r);i.tag=2,t!=null&&(i.callback=t),t=Oi(e,i,r),t!==null&&(fr(t,e,r,n),iu(t,e,r))}};function db(e,t,n,r,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,l):t.prototype&&t.prototype.isPureReactComponent?!cl(n,r)||!cl(i,a):!0}function t2(e,t,n){var r=!1,i=zi,a=t.contextType;return typeof a=="object"&&a!==null?a=Wn(a):(i=ln(t)?wa:$t.current,r=t.contextTypes,a=(r=r!=null)?ws(e,i):zi),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function fb(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fd.enqueueReplaceState(t,t.state,null)}function dp(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Qg(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Wn(a):(a=ln(t)?wa:$t.current,i.context=ws(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(up(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Fd.enqueueReplaceState(i,i.state,null),Tu(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ps(e,t){try{var n="",r=t;do n+=QO(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Qh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function fp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var SA=typeof WeakMap=="function"?WeakMap:Map;function n2(e,t,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Iu||(Iu=!0,wp=r),fp(e,t)},n}function r2(e,t,n){n=Vr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fp(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){fp(e,t),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function hb(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new SA;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=$A.bind(null,e,t,n),t.then(e,e))}function mb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pb(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vr(-1,1),t.tag=2,Oi(n,t,1))),n.lanes|=1),e)}var PA=ii.ReactCurrentOwner,rn=!1;function Ht(e,t,n,r){t.child=e===null?Aj(t,null,n,r):Ns(t,e.child,n,r)}function gb(e,t,n,r,i){n=n.render;var a=t.ref;return ps(t,i),r=rv(e,t,n,r,a,i),n=iv(),e!==null&&!rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jr(e,t,i)):(He&&n&&Wg(t),t.flags|=1,Ht(e,t,r,i),t.child)}function vb(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!mv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,i2(e,t,a,r,i)):(e=uu(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:cl,n(l,r)&&e.ref===t.ref)return Jr(e,t,i)}return t.flags|=1,e=Mi(a,r),e.ref=t.ref,e.return=t,t.child=e}function i2(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(cl(a,r)&&e.ref===t.ref)if(rn=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(rn=!0);else return t.lanes=e.lanes,Jr(e,t,i)}return hp(e,t,n,r,i)}function a2(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(ls,mn),mn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(ls,mn),mn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ze(ls,mn),mn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,ze(ls,mn),mn|=r;return Ht(e,t,i,n),t.child}function s2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function hp(e,t,n,r,i){var a=ln(n)?wa:$t.current;return a=ws(t,a),ps(t,i),n=rv(e,t,n,r,a,i),r=iv(),e!==null&&!rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jr(e,t,i)):(He&&r&&Wg(t),t.flags|=1,Ht(e,t,n,i),t.child)}function yb(e,t,n,r,i){if(ln(n)){var a=!0;Pu(t)}else a=!1;if(ps(t,i),t.stateNode===null)ou(e,t),t2(t,n,r),dp(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var d=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=Wn(m):(m=ln(n)?wa:$t.current,m=ws(t,m));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||d!==m)&&fb(t,l,r,m),gi=!1;var g=t.memoizedState;l.state=g,Tu(t,r,l,i),d=t.memoizedState,u!==r||g!==d||on.current||gi?(typeof h=="function"&&(up(t,n,h,r),d=t.memoizedState),(u=gi||db(t,n,u,r,g,d,m))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),l.props=r,l.state=d,l.context=m,r=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Lj(e,t),u=t.memoizedProps,m=t.type===t.elementType?u:ar(t.type,u),l.props=m,f=t.pendingProps,g=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Wn(d):(d=ln(n)?wa:$t.current,d=ws(t,d));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==f||g!==d)&&fb(t,l,r,d),gi=!1,g=t.memoizedState,l.state=g,Tu(t,r,l,i);var j=t.memoizedState;u!==f||g!==j||on.current||gi?(typeof x=="function"&&(up(t,n,x,r),j=t.memoizedState),(m=gi||db(t,n,m,r,g,j,d)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,j,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,j,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),l.props=r,l.state=j,l.context=d,r=m):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return mp(e,t,n,r,a,i)}function mp(e,t,n,r,i,a){s2(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&rb(t,n,!1),Jr(e,t,a);r=t.stateNode,PA.current=t;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Ns(t,e.child,null,a),t.child=Ns(t,null,u,a)):Ht(e,t,u,a),t.memoizedState=r.state,i&&rb(t,n,!0),t.child}function o2(e){var t=e.stateNode;t.pendingContext?nb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nb(e,t.context,!1),Jg(e,t.containerInfo)}function xb(e,t,n,r,i){return js(),Kg(i),t.flags|=256,Ht(e,t,n,r),t.child}var pp={dehydrated:null,treeContext:null,retryLane:0};function gp(e){return{baseLanes:e,cachePool:null,transitions:null}}function l2(e,t,n){var r=t.pendingProps,i=Ve.current,a=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ze(Ve,i&1),e===null)return lp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Zd(l,r,0,null),e=va(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=gp(n),t.memoizedState=pp,e):ov(t,l));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return kA(e,t,l,r,u,i,n);if(a){a=r.fallback,l=t.mode,i=e.child,u=i.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Mi(i,d),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?a=Mi(u,a):(a=va(a,l,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=e.child.memoizedState,l=l===null?gp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=pp,r}return a=e.child,e=a.sibling,r=Mi(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ov(e,t){return t=Zd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mc(e,t,n,r){return r!==null&&Kg(r),Ns(t,e.child,null,n),e=ov(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kA(e,t,n,r,i,a,l){if(n)return t.flags&256?(t.flags&=-257,r=Qh(Error(te(422))),Mc(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Zd({mode:"visible",children:r.children},i,0,null),a=va(a,i,l,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Ns(t,e.child,null,l),t.child.memoizedState=gp(l),t.memoizedState=pp,a);if(!(t.mode&1))return Mc(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,a=Error(te(419)),r=Qh(a,r,void 0),Mc(e,t,l,r)}if(u=(l&e.childLanes)!==0,rn||u){if(r=gt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Qr(e,i),fr(r,e,i,-1))}return hv(),r=Qh(Error(te(421))),Mc(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=BA.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,yn=Ei(i.nextSibling),bn=t,He=!0,or=null,e!==null&&(Rn[zn++]=Br,Rn[zn++]=Fr,Rn[zn++]=ja,Br=e.id,Fr=e.overflow,ja=t),t=ov(t,r.children),t.flags|=4096,t)}function bb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),cp(e.return,t,n)}function Jh(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function c2(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Ht(e,t,r.children,n),r=Ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bb(e,n,t);else if(e.tag===19)bb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze(Ve,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Au(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Jh(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Au(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Jh(t,!0,n,null,a);break;case"together":Jh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ou(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Sa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=Mi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function CA(e,t,n){switch(t.tag){case 3:o2(t),js();break;case 5:Dj(t);break;case 1:ln(t.type)&&Pu(t);break;case 4:Jg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ze(Eu,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze(Ve,Ve.current&1),t.flags|=128,null):n&t.child.childLanes?l2(e,t,n):(ze(Ve,Ve.current&1),e=Jr(e,t,n),e!==null?e.sibling:null);ze(Ve,Ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return c2(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(Ve,Ve.current),r)break;return null;case 22:case 23:return t.lanes=0,a2(e,t,n)}return Jr(e,t,n)}var u2,vp,d2,f2;u2=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vp=function(){};d2=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ca(kr.current);var a=null;switch(n){case"input":i=$m(e,i),r=$m(e,r),a=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),a=[];break;case"textarea":i=Um(e,i),r=Um(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Nu)}Zm(n,r);var l;n=null;for(m in i)if(!r.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var u=i[m];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(nl.hasOwnProperty(m)?a||(a=[]):(a=a||[]).push(m,null));for(m in r){var d=r[m];if(u=i!=null?i[m]:void 0,r.hasOwnProperty(m)&&d!==u&&(d!=null||u!=null))if(m==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(a||(a=[]),a.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(a=a||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(nl.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&Be("scroll",e),a||u===d||(a=[])):(a=a||[]).push(m,d))}n&&(a=a||[]).push("style",n);var m=a;(t.updateQueue=m)&&(t.flags|=4)}};f2=function(e,t,n,r){n!==r&&(t.flags|=4)};function So(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function EA(e,t,n){var r=t.pendingProps;switch(Vg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(t),null;case 1:return ln(t.type)&&Su(),Lt(t),null;case 3:return r=t.stateNode,Ss(),Ue(on),Ue($t),tv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Tc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,or!==null&&(Sp(or),or=null))),vp(e,t),Lt(t),null;case 5:ev(t);var i=ca(ml.current);if(n=t.type,e!==null&&t.stateNode!=null)d2(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(te(166));return Lt(t),null}if(e=ca(kr.current),Tc(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[jr]=t,r[fl]=a,e=(t.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<Fo.length;i++)Be(Fo[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Ex(r,a),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Be("invalid",r);break;case"textarea":Tx(r,a),Be("invalid",r)}Zm(n,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];l==="children"?typeof u=="string"?r.textContent!==u&&(a.suppressHydrationWarning!==!0&&Oc(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&Oc(r.textContent,u,e),i=["children",""+u]):nl.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Be("scroll",r)}switch(n){case"input":wc(r),Ox(r,a,!0);break;case"textarea":wc(r),Ax(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Nu)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=B1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[jr]=t,e[fl]=r,u2(e,t,!1,!1),t.stateNode=e;e:{switch(l=Wm(n,r),n){case"dialog":Be("cancel",e),Be("close",e),i=r;break;case"iframe":case"object":case"embed":Be("load",e),i=r;break;case"video":case"audio":for(i=0;i<Fo.length;i++)Be(Fo[i],e);i=r;break;case"source":Be("error",e),i=r;break;case"img":case"image":case"link":Be("error",e),Be("load",e),i=r;break;case"details":Be("toggle",e),i=r;break;case"input":Ex(e,r),i=$m(e,r),Be("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Be("invalid",e);break;case"textarea":Tx(e,r),i=Um(e,r),Be("invalid",e);break;default:i=r}Zm(n,i),u=i;for(a in u)if(u.hasOwnProperty(a)){var d=u[a];a==="style"?H1(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&F1(e,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&rl(e,d):typeof d=="number"&&rl(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(nl.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Be("scroll",e):d!=null&&Tg(e,a,d,l))}switch(n){case"input":wc(e),Ox(e,r,!1);break;case"textarea":wc(e),Ax(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ri(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?ds(e,!!r.multiple,a,!1):r.defaultValue!=null&&ds(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Nu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Lt(t),null;case 6:if(e&&t.stateNode!=null)f2(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(te(166));if(n=ca(ml.current),ca(kr.current),Tc(t)){if(r=t.stateNode,n=t.memoizedProps,r[jr]=t,(a=r.nodeValue!==n)&&(e=bn,e!==null))switch(e.tag){case 3:Oc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Oc(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jr]=t,t.stateNode=r}return Lt(t),null;case 13:if(Ue(Ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(He&&yn!==null&&t.mode&1&&!(t.flags&128))Oj(),js(),t.flags|=98560,a=!1;else if(a=Tc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(te(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(te(317));a[jr]=t}else js(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Lt(t),a=!1}else or!==null&&(Sp(or),or=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ve.current&1?ct===0&&(ct=3):hv())),t.updateQueue!==null&&(t.flags|=4),Lt(t),null);case 4:return Ss(),vp(e,t),e===null&&ul(t.stateNode.containerInfo),Lt(t),null;case 10:return Yg(t.type._context),Lt(t),null;case 17:return ln(t.type)&&Su(),Lt(t),null;case 19:if(Ue(Ve),a=t.memoizedState,a===null)return Lt(t),null;if(r=(t.flags&128)!==0,l=a.rendering,l===null)if(r)So(a,!1);else{if(ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Au(e),l!==null){for(t.flags|=128,So(a,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze(Ve,Ve.current&1|2),t.child}e=e.sibling}a.tail!==null&&Je()>ks&&(t.flags|=128,r=!0,So(a,!1),t.lanes=4194304)}else{if(!r)if(e=Au(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),So(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!He)return Lt(t),null}else 2*Je()-a.renderingStartTime>ks&&n!==1073741824&&(t.flags|=128,r=!0,So(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=Ve.current,ze(Ve,r?n&1|2:n&1),t):(Lt(t),null);case 22:case 23:return fv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?mn&1073741824&&(Lt(t),t.subtreeFlags&6&&(t.flags|=8192)):Lt(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function OA(e,t){switch(Vg(t),t.tag){case 1:return ln(t.type)&&Su(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ss(),Ue(on),Ue($t),tv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ev(t),null;case 13:if(Ue(Ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));js()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Ve),null;case 4:return Ss(),null;case 10:return Yg(t.type._context),null;case 22:case 23:return fv(),null;case 24:return null;default:return null}}var Lc=!1,It=!1,TA=typeof WeakSet=="function"?WeakSet:Set,oe=null;function os(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(e,t,r)}else n.current=null}function yp(e,t,n){try{n()}catch(r){Ge(e,t,r)}}var _b=!1;function AA(e,t){if(tp=_u,e=vj(),Zg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,u=-1,d=-1,m=0,h=0,f=e,g=null;t:for(;;){for(var x;f!==n||i!==0&&f.nodeType!==3||(u=l+i),f!==a||r!==0&&f.nodeType!==3||(d=l+r),f.nodeType===3&&(l+=f.nodeValue.length),(x=f.firstChild)!==null;)g=f,f=x;for(;;){if(f===e)break t;if(g===n&&++m===i&&(u=l),g===a&&++h===r&&(d=l),(x=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=x}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(np={focusedElem:e,selectionRange:n},_u=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var w=j.memoizedProps,S=j.memoizedState,_=t.stateNode,N=_.getSnapshotBeforeUpdate(t.elementType===t.type?w:ar(t.type,w),S);_.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(k){Ge(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return j=_b,_b=!1,j}function Yo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&yp(t,n,a)}i=i.next}while(i!==r)}}function Ud(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function xp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function h2(e){var t=e.alternate;t!==null&&(e.alternate=null,h2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jr],delete t[fl],delete t[ap],delete t[mA],delete t[pA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function m2(e){return e.tag===5||e.tag===3||e.tag===4}function wb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||m2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nu));else if(r!==4&&(e=e.child,e!==null))for(bp(e,t,n),e=e.sibling;e!==null;)bp(e,t,n),e=e.sibling}function _p(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(_p(e,t,n),e=e.sibling;e!==null;)_p(e,t,n),e=e.sibling}var jt=null,sr=!1;function mi(e,t,n){for(n=n.child;n!==null;)p2(e,t,n),n=n.sibling}function p2(e,t,n){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount(Ld,n)}catch{}switch(n.tag){case 5:It||os(n,t);case 6:var r=jt,i=sr;jt=null,mi(e,t,n),jt=r,sr=i,jt!==null&&(sr?(e=jt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(sr?(e=jt,n=n.stateNode,e.nodeType===8?Vh(e.parentNode,n):e.nodeType===1&&Vh(e,n),ol(e)):Vh(jt,n.stateNode));break;case 4:r=jt,i=sr,jt=n.stateNode.containerInfo,sr=!0,mi(e,t,n),jt=r,sr=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&yp(n,t,l),i=i.next}while(i!==r)}mi(e,t,n);break;case 1:if(!It&&(os(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ge(n,t,u)}mi(e,t,n);break;case 21:mi(e,t,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,mi(e,t,n),It=r):mi(e,t,n);break;default:mi(e,t,n)}}function jb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new TA),t.forEach(function(r){var i=FA.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ir(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:jt=u.stateNode,sr=!1;break e;case 3:jt=u.stateNode.containerInfo,sr=!0;break e;case 4:jt=u.stateNode.containerInfo,sr=!0;break e}u=u.return}if(jt===null)throw Error(te(160));p2(a,l,i),jt=null,sr=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(m){Ge(i,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)g2(t,e),t=t.sibling}function g2(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ir(t,e),_r(e),r&4){try{Yo(3,e,e.return),Ud(3,e)}catch(w){Ge(e,e.return,w)}try{Yo(5,e,e.return)}catch(w){Ge(e,e.return,w)}}break;case 1:ir(t,e),_r(e),r&512&&n!==null&&os(n,n.return);break;case 5:if(ir(t,e),_r(e),r&512&&n!==null&&os(n,n.return),e.flags&32){var i=e.stateNode;try{rl(i,"")}catch(w){Ge(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&z1(i,a),Wm(u,l);var m=Wm(u,a);for(l=0;l<d.length;l+=2){var h=d[l],f=d[l+1];h==="style"?H1(i,f):h==="dangerouslySetInnerHTML"?F1(i,f):h==="children"?rl(i,f):Tg(i,h,f,m)}switch(u){case"input":Bm(i,a);break;case"textarea":$1(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?ds(i,!!a.multiple,x,!1):g!==!!a.multiple&&(a.defaultValue!=null?ds(i,!!a.multiple,a.defaultValue,!0):ds(i,!!a.multiple,a.multiple?[]:"",!1))}i[fl]=a}catch(w){Ge(e,e.return,w)}}break;case 6:if(ir(t,e),_r(e),r&4){if(e.stateNode===null)throw Error(te(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(w){Ge(e,e.return,w)}}break;case 3:if(ir(t,e),_r(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ol(t.containerInfo)}catch(w){Ge(e,e.return,w)}break;case 4:ir(t,e),_r(e);break;case 13:ir(t,e),_r(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(uv=Je())),r&4&&jb(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(It=(m=It)||h,ir(t,e),It=m):ir(t,e),_r(e),r&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!h&&e.mode&1)for(oe=e,h=e.child;h!==null;){for(f=oe=h;oe!==null;){switch(g=oe,x=g.child,g.tag){case 0:case 11:case 14:case 15:Yo(4,g,g.return);break;case 1:os(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(w){Ge(r,n,w)}}break;case 5:os(g,g.return);break;case 22:if(g.memoizedState!==null){Sb(f);continue}}x!==null?(x.return=g,oe=x):Sb(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,m?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=f.stateNode,d=f.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=U1("display",l))}catch(w){Ge(e,e.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=m?"":f.memoizedProps}catch(w){Ge(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ir(t,e),_r(e),r&4&&jb(e);break;case 21:break;default:ir(t,e),_r(e)}}function _r(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(m2(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rl(i,""),r.flags&=-33);var a=wb(e);_p(e,a,i);break;case 3:case 4:var l=r.stateNode.containerInfo,u=wb(e);bp(e,u,l);break;default:throw Error(te(161))}}catch(d){Ge(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function MA(e,t,n){oe=e,v2(e)}function v2(e,t,n){for(var r=(e.mode&1)!==0;oe!==null;){var i=oe,a=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Lc;if(!l){var u=i.alternate,d=u!==null&&u.memoizedState!==null||It;u=Lc;var m=It;if(Lc=l,(It=d)&&!m)for(oe=i;oe!==null;)l=oe,d=l.child,l.tag===22&&l.memoizedState!==null?Pb(i):d!==null?(d.return=l,oe=d):Pb(i);for(;a!==null;)oe=a,v2(a),a=a.sibling;oe=i,Lc=u,It=m}Nb(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,oe=a):Nb(e)}}function Nb(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:It||Ud(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ar(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&lb(t,a,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}lb(t,l,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var h=m.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ol(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}It||t.flags&512&&xp(t)}catch(g){Ge(t,t.return,g)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Sb(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Pb(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ud(4,t)}catch(d){Ge(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){Ge(t,i,d)}}var a=t.return;try{xp(t)}catch(d){Ge(t,a,d)}break;case 5:var l=t.return;try{xp(t)}catch(d){Ge(t,l,d)}}}catch(d){Ge(t,t.return,d)}if(t===e){oe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,oe=u;break}oe=t.return}}var LA=Math.ceil,Du=ii.ReactCurrentDispatcher,lv=ii.ReactCurrentOwner,Zn=ii.ReactCurrentBatchConfig,Ne=0,gt=null,nt=null,kt=0,mn=0,ls=Ui(0),ct=0,yl=null,Sa=0,Hd=0,cv=0,Xo=null,tn=null,uv=0,ks=1/0,Ir=null,Iu=!1,wp=null,Ti=null,Dc=!1,Ni=null,Ru=0,Qo=0,jp=null,lu=-1,cu=0;function qt(){return Ne&6?Je():lu!==-1?lu:lu=Je()}function Ai(e){return e.mode&1?Ne&2&&kt!==0?kt&-kt:vA.transition!==null?(cu===0&&(cu=tj()),cu):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:lj(e.type)),e):1}function fr(e,t,n,r){if(50<Qo)throw Qo=0,jp=null,Error(te(185));Ml(e,n,r),(!(Ne&2)||e!==gt)&&(e===gt&&(!(Ne&2)&&(Hd|=n),ct===4&&bi(e,kt)),cn(e,r),n===1&&Ne===0&&!(t.mode&1)&&(ks=Je()+500,$d&&Hi()))}function cn(e,t){var n=e.callbackNode;vT(e,t);var r=bu(e,e===gt?kt:0);if(r===0)n!==null&&Dx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Dx(n),t===1)e.tag===0?gA(kb.bind(null,e)):kj(kb.bind(null,e)),fA(function(){!(Ne&6)&&Hi()}),n=null;else{switch(nj(r)){case 1:n=Ig;break;case 4:n=J1;break;case 16:n=xu;break;case 536870912:n=ej;break;default:n=xu}n=S2(n,y2.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function y2(e,t){if(lu=-1,cu=0,Ne&6)throw Error(te(327));var n=e.callbackNode;if(gs()&&e.callbackNode!==n)return null;var r=bu(e,e===gt?kt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=zu(e,r);else{t=r;var i=Ne;Ne|=2;var a=b2();(gt!==e||kt!==t)&&(Ir=null,ks=Je()+500,ga(e,t));do try{RA();break}catch(u){x2(e,u)}while(!0);Gg(),Du.current=a,Ne=i,nt!==null?t=0:(gt=null,kt=0,t=ct)}if(t!==0){if(t===2&&(i=Ym(e),i!==0&&(r=i,t=Np(e,i))),t===1)throw n=yl,ga(e,0),bi(e,r),cn(e,Je()),n;if(t===6)bi(e,r);else{if(i=e.current.alternate,!(r&30)&&!DA(i)&&(t=zu(e,r),t===2&&(a=Ym(e),a!==0&&(r=a,t=Np(e,a))),t===1))throw n=yl,ga(e,0),bi(e,r),cn(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(te(345));case 2:na(e,tn,Ir);break;case 3:if(bi(e,r),(r&130023424)===r&&(t=uv+500-Je(),10<t)){if(bu(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){qt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ip(na.bind(null,e,tn,Ir),t);break}na(e,tn,Ir);break;case 4:if(bi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-dr(r);a=1<<l,l=t[l],l>i&&(i=l),r&=~a}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LA(r/1960))-r,10<r){e.timeoutHandle=ip(na.bind(null,e,tn,Ir),r);break}na(e,tn,Ir);break;case 5:na(e,tn,Ir);break;default:throw Error(te(329))}}}return cn(e,Je()),e.callbackNode===n?y2.bind(null,e):null}function Np(e,t){var n=Xo;return e.current.memoizedState.isDehydrated&&(ga(e,t).flags|=256),e=zu(e,t),e!==2&&(t=tn,tn=n,t!==null&&Sp(t)),e}function Sp(e){tn===null?tn=e:tn.push.apply(tn,e)}function DA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!hr(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bi(e,t){for(t&=~cv,t&=~Hd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dr(t),r=1<<n;e[n]=-1,t&=~r}}function kb(e){if(Ne&6)throw Error(te(327));gs();var t=bu(e,0);if(!(t&1))return cn(e,Je()),null;var n=zu(e,t);if(e.tag!==0&&n===2){var r=Ym(e);r!==0&&(t=r,n=Np(e,r))}if(n===1)throw n=yl,ga(e,0),bi(e,t),cn(e,Je()),n;if(n===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,na(e,tn,Ir),cn(e,Je()),null}function dv(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(ks=Je()+500,$d&&Hi())}}function Pa(e){Ni!==null&&Ni.tag===0&&!(Ne&6)&&gs();var t=Ne;Ne|=1;var n=Zn.transition,r=Ee;try{if(Zn.transition=null,Ee=1,e)return e()}finally{Ee=r,Zn.transition=n,Ne=t,!(Ne&6)&&Hi()}}function fv(){mn=ls.current,Ue(ls)}function ga(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,dA(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(Vg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Su();break;case 3:Ss(),Ue(on),Ue($t),tv();break;case 5:ev(r);break;case 4:Ss();break;case 13:Ue(Ve);break;case 19:Ue(Ve);break;case 10:Yg(r.type._context);break;case 22:case 23:fv()}n=n.return}if(gt=e,nt=e=Mi(e.current,null),kt=mn=t,ct=0,yl=null,cv=Hd=Sa=0,tn=Xo=null,la!==null){for(t=0;t<la.length;t++)if(n=la[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var l=a.next;a.next=i,r.next=l}n.pending=r}la=null}return e}function x2(e,t){do{var n=nt;try{if(Gg(),au.current=Lu,Mu){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Mu=!1}if(Na=0,pt=ot=Ke=null,Go=!1,pl=0,lv.current=null,n===null||n.return===null){ct=1,yl=t,nt=null;break}e:{var a=e,l=n.return,u=n,d=t;if(t=kt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,h=u,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=mb(l);if(x!==null){x.flags&=-257,pb(x,l,u,a,t),x.mode&1&&hb(a,m,t),t=x,d=m;var j=t.updateQueue;if(j===null){var w=new Set;w.add(d),t.updateQueue=w}else j.add(d);break e}else{if(!(t&1)){hb(a,m,t),hv();break e}d=Error(te(426))}}else if(He&&u.mode&1){var S=mb(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),pb(S,l,u,a,t),Kg(Ps(d,u));break e}}a=d=Ps(d,u),ct!==4&&(ct=2),Xo===null?Xo=[a]:Xo.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var _=n2(a,d,t);ob(a,_);break e;case 1:u=d;var N=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof N.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ti===null||!Ti.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var k=r2(a,u,t);ob(a,k);break e}}a=a.return}while(a!==null)}w2(n)}catch(O){t=O,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function b2(){var e=Du.current;return Du.current=Lu,e===null?Lu:e}function hv(){(ct===0||ct===3||ct===2)&&(ct=4),gt===null||!(Sa&268435455)&&!(Hd&268435455)||bi(gt,kt)}function zu(e,t){var n=Ne;Ne|=2;var r=b2();(gt!==e||kt!==t)&&(Ir=null,ga(e,t));do try{IA();break}catch(i){x2(e,i)}while(!0);if(Gg(),Ne=n,Du.current=r,nt!==null)throw Error(te(261));return gt=null,kt=0,ct}function IA(){for(;nt!==null;)_2(nt)}function RA(){for(;nt!==null&&!lT();)_2(nt)}function _2(e){var t=N2(e.alternate,e,mn);e.memoizedProps=e.pendingProps,t===null?w2(e):nt=t,lv.current=null}function w2(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=OA(n,t),n!==null){n.flags&=32767,nt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ct=6,nt=null;return}}else if(n=EA(n,t,mn),n!==null){nt=n;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);ct===0&&(ct=5)}function na(e,t,n){var r=Ee,i=Zn.transition;try{Zn.transition=null,Ee=1,zA(e,t,n,r)}finally{Zn.transition=i,Ee=r}return null}function zA(e,t,n,r){do gs();while(Ni!==null);if(Ne&6)throw Error(te(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(yT(e,a),e===gt&&(nt=gt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dc||(Dc=!0,S2(xu,function(){return gs(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Zn.transition,Zn.transition=null;var l=Ee;Ee=1;var u=Ne;Ne|=4,lv.current=null,AA(e,n),g2(n,e),iA(np),_u=!!tp,np=tp=null,e.current=n,MA(n),cT(),Ne=u,Ee=l,Zn.transition=a}else e.current=n;if(Dc&&(Dc=!1,Ni=e,Ru=i),a=e.pendingLanes,a===0&&(Ti=null),fT(n.stateNode),cn(e,Je()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Iu)throw Iu=!1,e=wp,wp=null,e;return Ru&1&&e.tag!==0&&gs(),a=e.pendingLanes,a&1?e===jp?Qo++:(Qo=0,jp=e):Qo=0,Hi(),null}function gs(){if(Ni!==null){var e=nj(Ru),t=Zn.transition,n=Ee;try{if(Zn.transition=null,Ee=16>e?16:e,Ni===null)var r=!1;else{if(e=Ni,Ni=null,Ru=0,Ne&6)throw Error(te(331));var i=Ne;for(Ne|=4,oe=e.current;oe!==null;){var a=oe,l=a.child;if(oe.flags&16){var u=a.deletions;if(u!==null){for(var d=0;d<u.length;d++){var m=u[d];for(oe=m;oe!==null;){var h=oe;switch(h.tag){case 0:case 11:case 15:Yo(8,h,a)}var f=h.child;if(f!==null)f.return=h,oe=f;else for(;oe!==null;){h=oe;var g=h.sibling,x=h.return;if(h2(h),h===m){oe=null;break}if(g!==null){g.return=x,oe=g;break}oe=x}}}var j=a.alternate;if(j!==null){var w=j.child;if(w!==null){j.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}oe=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,oe=l;else e:for(;oe!==null;){if(a=oe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Yo(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,oe=_;break e}oe=a.return}}var N=e.current;for(oe=N;oe!==null;){l=oe;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,oe=v;else e:for(l=N;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ud(9,u)}}catch(O){Ge(u,u.return,O)}if(u===l){oe=null;break e}var k=u.sibling;if(k!==null){k.return=u.return,oe=k;break e}oe=u.return}}if(Ne=i,Hi(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot(Ld,e)}catch{}r=!0}return r}finally{Ee=n,Zn.transition=t}}return!1}function Cb(e,t,n){t=Ps(n,t),t=n2(e,t,1),e=Oi(e,t,1),t=qt(),e!==null&&(Ml(e,1,t),cn(e,t))}function Ge(e,t,n){if(e.tag===3)Cb(e,e,n);else for(;t!==null;){if(t.tag===3){Cb(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){e=Ps(n,e),e=r2(t,e,1),t=Oi(t,e,1),e=qt(),t!==null&&(Ml(t,1,e),cn(t,e));break}}t=t.return}}function $A(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qt(),e.pingedLanes|=e.suspendedLanes&n,gt===e&&(kt&n)===n&&(ct===4||ct===3&&(kt&130023424)===kt&&500>Je()-uv?ga(e,0):cv|=n),cn(e,t)}function j2(e,t){t===0&&(e.mode&1?(t=Sc,Sc<<=1,!(Sc&130023424)&&(Sc=4194304)):t=1);var n=qt();e=Qr(e,t),e!==null&&(Ml(e,t,n),cn(e,n))}function BA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),j2(e,n)}function FA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(t),j2(e,n)}var N2;N2=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||on.current)rn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rn=!1,CA(e,t,n);rn=!!(e.flags&131072)}else rn=!1,He&&t.flags&1048576&&Cj(t,Cu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ou(e,t),e=t.pendingProps;var i=ws(t,$t.current);ps(t,n),i=rv(null,t,r,e,i,n);var a=iv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ln(r)?(a=!0,Pu(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qg(t),i.updater=Fd,t.stateNode=i,i._reactInternals=t,dp(t,r,e,n),t=mp(null,t,r,!0,a,n)):(t.tag=0,He&&a&&Wg(t),Ht(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ou(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=HA(r),e=ar(r,e),i){case 0:t=hp(null,t,r,e,n);break e;case 1:t=yb(null,t,r,e,n);break e;case 11:t=gb(null,t,r,e,n);break e;case 14:t=vb(null,t,r,ar(r.type,e),n);break e}throw Error(te(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),hp(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),yb(e,t,r,i,n);case 3:e:{if(o2(t),e===null)throw Error(te(387));r=t.pendingProps,a=t.memoizedState,i=a.element,Lj(e,t),Tu(t,r,null,n);var l=t.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Ps(Error(te(423)),t),t=xb(e,t,r,n,i);break e}else if(r!==i){i=Ps(Error(te(424)),t),t=xb(e,t,r,n,i);break e}else for(yn=Ei(t.stateNode.containerInfo.firstChild),bn=t,He=!0,or=null,n=Aj(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(js(),r===i){t=Jr(e,t,n);break e}Ht(e,t,r,n)}t=t.child}return t;case 5:return Dj(t),e===null&&lp(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,rp(r,i)?l=null:a!==null&&rp(r,a)&&(t.flags|=32),s2(e,t),Ht(e,t,l,n),t.child;case 6:return e===null&&lp(t),null;case 13:return l2(e,t,n);case 4:return Jg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ns(t,null,r,n):Ht(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),gb(e,t,r,i,n);case 7:return Ht(e,t,t.pendingProps,n),t.child;case 8:return Ht(e,t,t.pendingProps.children,n),t.child;case 12:return Ht(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,ze(Eu,r._currentValue),r._currentValue=l,a!==null)if(hr(a.value,l)){if(a.children===i.children&&!on.current){t=Jr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){l=a.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=Vr(-1,n&-n),d.tag=2;var m=a.updateQueue;if(m!==null){m=m.shared;var h=m.pending;h===null?d.next=d:(d.next=h.next,h.next=d),m.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),cp(a.return,n,t),u.lanes|=n;break}d=d.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(te(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),cp(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Ht(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ps(t,n),i=Wn(i),r=r(i),t.flags|=1,Ht(e,t,r,n),t.child;case 14:return r=t.type,i=ar(r,t.pendingProps),i=ar(r.type,i),vb(e,t,r,i,n);case 15:return i2(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),ou(e,t),t.tag=1,ln(r)?(e=!0,Pu(t)):e=!1,ps(t,n),t2(t,r,i),dp(t,r,i,n),mp(null,t,r,!0,e,n);case 19:return c2(e,t,n);case 22:return a2(e,t,n)}throw Error(te(156,t.tag))};function S2(e,t){return Q1(e,t)}function UA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(e,t,n,r){return new UA(e,t,n,r)}function mv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HA(e){if(typeof e=="function")return mv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mg)return 11;if(e===Lg)return 14}return 2}function Mi(e,t){var n=e.alternate;return n===null?(n=Un(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function uu(e,t,n,r,i,a){var l=2;if(r=e,typeof e=="function")mv(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Qa:return va(n.children,i,a,t);case Ag:l=8,i|=8;break;case Dm:return e=Un(12,n,t,i|2),e.elementType=Dm,e.lanes=a,e;case Im:return e=Un(13,n,t,i),e.elementType=Im,e.lanes=a,e;case Rm:return e=Un(19,n,t,i),e.elementType=Rm,e.lanes=a,e;case D1:return Zd(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M1:l=10;break e;case L1:l=9;break e;case Mg:l=11;break e;case Lg:l=14;break e;case pi:l=16,r=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=Un(l,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function va(e,t,n,r){return e=Un(7,e,r,t),e.lanes=n,e}function Zd(e,t,n,r){return e=Un(22,e,r,t),e.elementType=D1,e.lanes=n,e.stateNode={isHidden:!1},e}function em(e,t,n){return e=Un(6,e,null,t),e.lanes=n,e}function tm(e,t,n){return t=Un(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZA(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dh(0),this.expirationTimes=Dh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pv(e,t,n,r,i,a,l,u,d){return e=new ZA(e,t,n,u,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Un(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qg(a),e}function WA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xa,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function P2(e){if(!e)return zi;e=e._reactInternals;e:{if(Ma(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ln(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var n=e.type;if(ln(n))return Pj(e,n,t)}return t}function k2(e,t,n,r,i,a,l,u,d){return e=pv(n,r,!0,e,i,a,l,u,d),e.context=P2(null),n=e.current,r=qt(),i=Ai(n),a=Vr(r,i),a.callback=t??null,Oi(n,a,i),e.current.lanes=i,Ml(e,i,r),cn(e,r),e}function Wd(e,t,n,r){var i=t.current,a=qt(),l=Ai(i);return n=P2(n),t.context===null?t.context=n:t.pendingContext=n,t=Vr(a,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Oi(i,t,l),e!==null&&(fr(e,i,l,a),iu(e,i,l)),l}function $u(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Eb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gv(e,t){Eb(e,t),(e=e.alternate)&&Eb(e,t)}function VA(){return null}var C2=typeof reportError=="function"?reportError:function(e){console.error(e)};function vv(e){this._internalRoot=e}Vd.prototype.render=vv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));Wd(e,t,null,null)};Vd.prototype.unmount=vv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pa(function(){Wd(null,e,null,null)}),t[Xr]=null}};function Vd(e){this._internalRoot=e}Vd.prototype.unstable_scheduleHydration=function(e){if(e){var t=aj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xi.length&&t!==0&&t<xi[n].priority;n++);xi.splice(n,0,e),n===0&&oj(e)}};function yv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ob(){}function KA(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var m=$u(l);a.call(m)}}var l=k2(t,r,e,0,null,!1,!1,"",Ob);return e._reactRootContainer=l,e[Xr]=l.current,ul(e.nodeType===8?e.parentNode:e),Pa(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var m=$u(d);u.call(m)}}var d=pv(e,0,!1,null,null,!1,!1,"",Ob);return e._reactRootContainer=d,e[Xr]=d.current,ul(e.nodeType===8?e.parentNode:e),Pa(function(){Wd(t,d,n,r)}),d}function qd(e,t,n,r,i){var a=n._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var u=i;i=function(){var d=$u(l);u.call(d)}}Wd(t,l,e,i)}else l=KA(n,t,e,i,r);return $u(l)}rj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bo(t.pendingLanes);n!==0&&(Rg(t,n|1),cn(t,Je()),!(Ne&6)&&(ks=Je()+500,Hi()))}break;case 13:Pa(function(){var r=Qr(e,1);if(r!==null){var i=qt();fr(r,e,1,i)}}),gv(e,1)}};zg=function(e){if(e.tag===13){var t=Qr(e,134217728);if(t!==null){var n=qt();fr(t,e,134217728,n)}gv(e,134217728)}};ij=function(e){if(e.tag===13){var t=Ai(e),n=Qr(e,t);if(n!==null){var r=qt();fr(n,e,t,r)}gv(e,t)}};aj=function(){return Ee};sj=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};Km=function(e,t,n){switch(t){case"input":if(Bm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=zd(r);if(!i)throw Error(te(90));R1(r),Bm(r,i)}}}break;case"textarea":$1(e,n);break;case"select":t=n.value,t!=null&&ds(e,!!n.multiple,t,!1)}};V1=dv;K1=Pa;var qA={usingClientEntryPoint:!1,Events:[Dl,ns,zd,Z1,W1,dv]},Po={findFiberByHostInstance:oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GA={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Y1(e),e===null?null:e.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||VA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{Ld=Ic.inject(GA),Pr=Ic}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qA;Pn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yv(t))throw Error(te(200));return WA(e,t,null,n)};Pn.createRoot=function(e,t){if(!yv(e))throw Error(te(299));var n=!1,r="",i=C2;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=pv(e,1,!1,null,null,n,!1,r,i),e[Xr]=t.current,ul(e.nodeType===8?e.parentNode:e),new vv(t)};Pn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=Y1(t),e=e===null?null:e.stateNode,e};Pn.flushSync=function(e){return Pa(e)};Pn.hydrate=function(e,t,n){if(!Kd(t))throw Error(te(200));return qd(null,e,t,!0,n)};Pn.hydrateRoot=function(e,t,n){if(!yv(e))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",l=C2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=k2(t,null,e,1,n??null,i,!1,a,l),e[Xr]=t.current,ul(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Vd(t)};Pn.render=function(e,t,n){if(!Kd(t))throw Error(te(200));return qd(null,e,t,!1,n)};Pn.unmountComponentAtNode=function(e){if(!Kd(e))throw Error(te(40));return e._reactRootContainer?(Pa(function(){qd(null,null,e,!1,function(){e._reactRootContainer=null,e[Xr]=null})}),!0):!1};Pn.unstable_batchedUpdates=dv;Pn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kd(n))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return qd(e,t,n,!1,r)};Pn.version="18.3.1-next-f1338f8080-20240426";function E2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E2)}catch(e){console.error(e)}}E2(),E1.exports=Pn;var Gd=E1.exports,O2,Tb=Gd;O2=Tb.createRoot,Tb.hydrateRoot;const YA=[],XA=[],QA=[],JA=[],nm=new Date().toISOString().slice(0,10),rm=e=>{const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().slice(0,10)};function it(){return crypto.randomUUID()}function he(){return new Date().toISOString()}const Pp=[{id:"550e8400-e29b-41d4-a716-446655440001",email:"dr.smith@hospital.com",password:"password321",full_name:"Dr. Sarah Smith",role:"doctor",created_at:"2024-01-15T08:00:00Z"},{id:"550e8400-e29b-41d4-a716-446655440002",email:"john.doe@email.com",password:"password321",full_name:"John Doe",role:"patient",created_at:"2024-01-16T09:30:00Z"},{id:"550e8400-e29b-41d4-a716-446655440003",email:"volunteer@hospital.com",password:"password321",full_name:"Maria Garcia",role:"volunteer",created_at:"2024-01-17T10:15:00Z"},{id:"550e8400-e29b-41d4-a716-446655440004",email:"jane.wilson@email.com",password:"password321",full_name:"Jane Wilson",role:"patient",created_at:"2024-01-18T11:00:00Z"},{id:"550e8400-e29b-41d4-a716-446655440005",email:"dr.johnson@hospital.com",password:"password321",full_name:"Dr. Michael Johnson",role:"doctor",created_at:"2024-01-19T07:45:00Z"}],Bu=[{id:"area-default-salaya",name:"Mahidol University Salaya",color:"#F97316",geometry:{type:"Polygon",coordinates:[[[13.807,100.3198],[13.8068,100.3278],[13.8002,100.3318],[13.7915,100.3306],[13.787,100.323],[13.79,100.316],[13.797,100.3135]]]},created_by:"550e8400-e29b-41d4-a716-446655440001",created_at:"2024-01-20T08:00:00Z",updated_at:"2024-01-20T08:00:00Z"}],eM=[{id:"patient-3",user_id:"user-6",name:"Robert Chen",doe:"2024-01-10",gender:"male",address:"789 Pine Street, Springfield, IL 62703",caregivers_contact:"Linda Chen - (555) 456-7890",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-24",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-009876",lat:13.804,lng:100.326,phone_number:"+66 80 777 8899",patient_categories:{critical:!0,elderly:!0,pregnant:!1},personal_health_history:"History of heart disease, stroke in 2019, diabetes since 2015",doctor_diagnosed:"Congestive Heart Failure, Type 2 Diabetes, Hypertension",medications_history:"Metoprolol 50mg daily, Lisinopril 20mg daily, Insulin glargine",food_allergies:"Dairy products",medication_allergies:"Sulfa drugs",height:"168 cm",weight:"85 kg",bmi:"30.1",temperature:"99.2F",pulse:"88 bpm",blood_pressure:"145/92 mmHg",diabetes:"Type 2 - HbA1c: 8.1%",mental_health_status:"Mild depression, receiving counseling",other_symptoms:"Shortness of breath, swelling in legs",pregnancy_details:"N/A",smoker:!0,doctors_note:"Critical patient requiring close monitoring. Heart failure symptoms worsening.",created_by:"user-1",created_at:"2024-01-15T11:20:00Z",updated_at:"2024-01-26T14:30:00Z"},{id:"patient-11",user_id:"user-14",name:"Olivia Brown",doe:"2025-08-15",gender:"female",address:"22 Meadow Ln, Springfield, IL 62701",caregivers_contact:"Mark Brown - (555) 777-8899",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2025-09-25",today_date:"2025-09-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-202509-01",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2025-09-20",personal_health_history:"Uncomplicated pregnancy and delivery",doctor_diagnosed:"Postpartum recovery",medications_history:"Prenatal vitamins",food_allergies:"None known",medication_allergies:"None known",height:"165 cm",weight:"68 kg",bmi:"25.0",temperature:"98.6F",pulse:"76 bpm",blood_pressure:"118/76 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Mild fatigue",pregnancy_details:"Delivered a healthy baby",smoker:!1,doctors_note:"Routine postpartum follow-up in 6 weeks",created_by:"user-5",created_at:"2025-09-21T10:00:00Z",updated_at:"2025-09-26T09:00:00Z"},{id:"patient-12",user_id:"user-15",name:"Ava Nguyen",doe:"2025-08-28",gender:"female",address:"90 Hillcrest Rd, Springfield, IL 62702",caregivers_contact:"Tom Nguyen - (555) 222-3344",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2025-09-24",today_date:"2025-09-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-202509-02",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2025-08-30",personal_health_history:"Gestational diabetes, controlled",doctor_diagnosed:"Postpartum monitoring",medications_history:"Insulin during pregnancy",food_allergies:"None",medication_allergies:"None",height:"162 cm",weight:"67 kg",bmi:"25.5",temperature:"98.4F",pulse:"74 bpm",blood_pressure:"120/78 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"None",pregnancy_details:"Delivered a healthy baby",smoker:!1,doctors_note:"Blood sugar normalized postpartum",created_by:"user-5",created_at:"2025-09-01T11:00:00Z",updated_at:"2025-09-26T08:30:00Z"},{id:"patient-9",user_id:"user-12",name:"Sofia Martinez",doe:"2024-01-18",gender:"female",address:"12 River Park, Springfield, IL 62701",caregivers_contact:"Daniel Martinez - (555) 111-2233",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-889900",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2024-01-20",personal_health_history:"Healthy pregnancy, normal delivery",doctor_diagnosed:"Postpartum recovery",medications_history:"Prenatal vitamins, iron supplements",food_allergies:"None known",medication_allergies:"None known",height:"164 cm",weight:"66 kg",bmi:"24.5",temperature:"98.6F",pulse:"76 bpm",blood_pressure:"120/78 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Mild fatigue",pregnancy_details:"Delivered a healthy baby boy",smoker:!1,doctors_note:"Recovering well postpartum. Routine follow-up in 6 weeks.",created_by:"user-5",created_at:"2024-01-20T12:30:00Z",updated_at:"2024-01-26T09:30:00Z"},{id:"patient-10",user_id:"user-13",name:"Hannah Lee",doe:"2023-12-28",gender:"female",address:"98 Lake View, Springfield, IL 62702",caregivers_contact:"Eric Lee - (555) 333-4455",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-991122",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2023-12-30",personal_health_history:"Gestational hypertension in late pregnancy",doctor_diagnosed:"Postpartum monitoring",medications_history:"Labetalol during pregnancy",food_allergies:"None known",medication_allergies:"None known",height:"168 cm",weight:"70 kg",bmi:"24.8",temperature:"98.4F",pulse:"74 bpm",blood_pressure:"124/80 mmHg",diabetes:"None",mental_health_status:"Some anxiety, improving",other_symptoms:"Occasional headaches",pregnancy_details:"Delivered a healthy baby girl",smoker:!1,doctors_note:"BP stable postpartum. Continue monitoring.",created_by:"user-5",created_at:"2024-01-01T11:20:00Z",updated_at:"2024-01-26T10:10:00Z"},{id:"patient-4",user_id:"user-7",name:"Emily Rodriguez",doe:"2024-01-12",gender:"female",address:"321 Oak Drive, Springfield, IL 62704",caregivers_contact:"Carlos Rodriguez - (555) 234-5678",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-112233",lat:13.786,lng:100.317,phone_number:"+66 80 222 3344",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-04-02",personal_health_history:"Second pregnancy, first child born healthy in 2020",doctor_diagnosed:"Pregnancy - 32 weeks, Mild Anemia",medications_history:"Prenatal vitamins, Iron supplements",food_allergies:"None known",medication_allergies:"None known",height:"162 cm",weight:"72 kg",bmi:"27.4",temperature:"98.2F",pulse:"82 bpm",blood_pressure:"125/78 mmHg",diabetes:"None",mental_health_status:"Good, excited about pregnancy",other_symptoms:"Mild fatigue, occasional heartburn",pregnancy_details:"32 weeks gestation, estimated due date: April 2, 2024. Baby developing normally, mild anemia being treated.",smoker:!1,doctors_note:"Pregnancy progressing well. Monitor iron levels and continue supplements.",created_by:"user-5",created_at:"2024-01-16T09:45:00Z",updated_at:"2024-01-26T10:15:00Z"},{id:"patient-5",user_id:"user-8",name:"Michael Thompson",doe:"2024-01-08",gender:"male",address:"654 Maple Avenue, Springfield, IL 62705",caregivers_contact:"Sarah Thompson - (555) 345-6789",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-445566",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"Generally healthy, occasional sports injuries",doctor_diagnosed:"Acute Bronchitis, Seasonal Allergies",medications_history:"Albuterol inhaler as needed, Claritin during allergy season",food_allergies:"None known",medication_allergies:"None known",height:"180 cm",weight:"75 kg",bmi:"23.1",temperature:"98.8F",pulse:"68 bpm",blood_pressure:"118/72 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Persistent cough, mild congestion",pregnancy_details:"N/A",smoker:!1,doctors_note:"Recovering from bronchitis. Should improve with current treatment.",created_by:"user-1",created_at:"2024-01-12T13:30:00Z",updated_at:"2024-01-26T16:20:00Z"},{id:"patient-6",user_id:"user-9",name:"Margaret Foster",doe:"2024-01-05",gender:"female",address:"987 Cedar Lane, Springfield, IL 62706",caregivers_contact:"David Foster - (555) 567-8901",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-778899",patient_categories:{critical:!1,elderly:!0,pregnant:!1},personal_health_history:"Osteoporosis, mild cognitive decline, history of falls",doctor_diagnosed:"Osteoporosis, Mild Dementia, Hypertension",medications_history:"Alendronate weekly, Amlodipine 5mg daily, Donepezil 10mg daily",food_allergies:"None known",medication_allergies:"Aspirin",height:"155 cm",weight:"58 kg",bmi:"24.1",temperature:"98.4F",pulse:"76 bpm",blood_pressure:"138/82 mmHg",diabetes:"None",mental_health_status:"Mild anxiety, some confusion",other_symptoms:"Occasional dizziness, memory issues",pregnancy_details:"N/A",smoker:!1,doctors_note:"Stable condition. Family support is excellent. Continue current medications.",created_by:"user-5",created_at:"2024-01-10T08:15:00Z",updated_at:"2024-01-26T11:45:00Z"},{id:"patient-7",user_id:"user-10",name:"James Patterson",doe:"2024-01-14",gender:"male",address:"147 Birch Street, Springfield, IL 62707",caregivers_contact:"Helen Patterson - (555) 678-9012",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-334455",patient_categories:{critical:!0,elderly:!0,pregnant:!1},personal_health_history:"COPD, former heavy smoker, multiple hospitalizations",doctor_diagnosed:"Chronic Obstructive Pulmonary Disease (COPD), Chronic Kidney Disease",medications_history:"Tiotropium inhaler daily, Prednisone 10mg daily, Furosemide 40mg daily",food_allergies:"None known",medication_allergies:"Penicillin, Codeine",height:"175 cm",weight:"62 kg",bmi:"20.2",temperature:"99.4F",pulse:"92 bpm",blood_pressure:"152/88 mmHg",diabetes:"None",mental_health_status:"Moderate depression due to chronic illness",other_symptoms:"Severe shortness of breath, chronic fatigue, frequent coughing",pregnancy_details:"N/A",smoker:!1,doctors_note:"Critical patient with advanced COPD. Requires frequent monitoring and possible hospitalization.",created_by:"user-1",created_at:"2024-01-18T15:20:00Z",updated_at:"2024-01-26T17:10:00Z"},{id:"patient-8",user_id:"user-11",name:"Lisa Wang",doe:"2024-01-20",gender:"female",address:"258 Elm Court, Springfield, IL 62708",caregivers_contact:"Kevin Wang - (555) 789-0123",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-556677",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-05-20",personal_health_history:"First pregnancy, generally healthy",doctor_diagnosed:"Pregnancy - 24 weeks, Gestational Hypertension",medications_history:"Prenatal vitamins, Labetalol 200mg twice daily",food_allergies:"Shellfish",medication_allergies:"None known",height:"158 cm",weight:"65 kg",bmi:"26.0",temperature:"98.6F",pulse:"85 bpm",blood_pressure:"142/85 mmHg",diabetes:"None",mental_health_status:"Some anxiety about pregnancy complications",other_symptoms:"Mild headaches, swelling in hands and feet",pregnancy_details:"24 weeks gestation, estimated due date: May 20, 2024. Developing gestational hypertension, requires close monitoring.",smoker:!1,doctors_note:"Monitor blood pressure closely. May need to consider early delivery if hypertension worsens.",created_by:"user-5",created_at:"2024-01-22T12:30:00Z",updated_at:"2024-01-26T13:45:00Z"}],tM=[{id:"patient-1",user_id:"user-2",name:"John Doe",doe:"2024-01-15",gender:"male",address:"123 Main Street, Springfield, IL 62701",caregivers_contact:"Mary Doe - (555) 123-4567",assigned_doctor:"Dr. Sarah Smith - (111) 123-4567",last_record_date:"2024-01-20",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia - (111) 123-4567",medical_record_number:"MRN-001234",lat:13.7992,lng:100.3195,phone_number:"+66 80 111 2233",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"Family history of cardiovascular disease. Previous surgery for appendectomy in 2010.",doctor_diagnosed:"Hypertension, Type 2 Diabetes Mellitus",medications_history:"Lisinopril 10mg daily since 2020, Metformin 500mg twice daily since 2021",food_allergies:"Shellfish, Nuts",medication_allergies:"Penicillin",height:"175 cm",weight:"80 kg",bmi:"26.1",temperature:"98.6F",pulse:"72 bpm",blood_pressure:"130/85 mmHg",diabetes:"Type 2 - HbA1c: 7.2%",mental_health_status:"Stable, no current concerns",other_symptoms:"Occasional headaches, mild fatigue",pregnancy_details:"N/A",smoker:!1,doctors_note:"Patient shows good compliance with medication. Blood pressure slightly elevated, recommend lifestyle modifications and regular monitoring.",created_by:"user-1",created_at:"2024-01-20T14:30:00Z",updated_at:"2024-01-25T16:45:00Z"},{id:"patient-2",user_id:"user-4",name:"Jane Wilson",doe:"2024-01-18",gender:"female",address:"456 Oak Avenue, Springfield, IL 62702",caregivers_contact:"Robert Wilson - (555) 987-6543",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-005678",lat:13.7901,lng:100.3282,phone_number:"+66 80 444 5566",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-03-15",personal_health_history:"No significant past medical history. First pregnancy.",doctor_diagnosed:"Gestational Diabetes, Pregnancy - 28 weeks",medications_history:"Prenatal vitamins, Insulin as needed for glucose control",food_allergies:"None known",medication_allergies:"None known",height:"165 cm",weight:"68 kg",bmi:"25.0",temperature:"98.4F",pulse:"78 bpm",blood_pressure:"118/75 mmHg",diabetes:"Gestational - Fasting glucose: 95 mg/dL",mental_health_status:"Mild anxiety related to pregnancy, receiving counseling",other_symptoms:"Morning sickness (resolved), mild back pain",pregnancy_details:"28 weeks gestation, estimated due date: March 15, 2024. Regular prenatal checkups, baby developing normally.",smoker:!1,doctors_note:"Pregnancy progressing well. Gestational diabetes well controlled with diet and occasional insulin. Continue regular monitoring.",created_by:"user-3",created_at:"2024-01-21T10:15:00Z",updated_at:"2024-01-26T09:20:00Z"},{name:"Zach",doe:"2025-09-25",gender:"male",address:"Bangkok",caregivers_contact:"111",assigned_doctor:"Strange",last_record_date:"2025-09-25",today_date:"2025-09-25",assigned_vhv_name:"Ironman",medical_record_number:"12345",patient_categories:{critical:!1,elderly:!0,pregnant:!1},personal_health_history:"Good Healthy",doctor_diagnosed:"Lack of sleep",medications_history:"Sleeping pills",food_allergies:"prawns",medication_allergies:"none",height:"170cm",weight:"70kg",bmi:"22.9",temperature:"98.6",pulse:"72",blood_pressure:"120/80",diabetes:"Type2",mental_health_status:"Sound Mind",other_symptoms:"Dream walking",pregnancy_details:"",smoker:!1,doctors_note:"Good To Go",created_by:"user-1",user_id:"user-1",id:"id-uqy6ynvpa",created_at:"2025-09-24T18:14:30.861Z",updated_at:"2025-09-24T18:16:35.460Z"},...eM],nM=[{id:"task-1",title:"Follow-up Blood Pressure Check",description:"Schedule and conduct follow-up blood pressure monitoring for patient John Doe. Check medication compliance and adjust dosage if necessary.",priority:"high",status:"pending",assigned_to:"user-3",assigned_by:"user-1",patient_id:"patient-1",due_date:"2024-01-28",created_at:"2024-01-25T10:30:00Z",updated_at:"2024-01-25T10:30:00Z"},{id:"task-v1",title:"Home Visit - John Doe",description:"Check blood pressure, confirm medications, record vitals.",priority:"high",status:"pending",assigned_to:"user-3",assigned_by:"user-1",patient_id:"patient-1",due_date:nm,created_at:he(),updated_at:he()},{id:"task-v2",title:"Follow-up Call - Jane Wilson",description:"Call to review glucose logs and confirm prenatal visit.",priority:"medium",status:"pending",assigned_to:"user-3",assigned_by:"user-5",patient_id:"patient-2",due_date:nm,created_at:he(),updated_at:he()},{id:"task-v3",title:"Supply Check - Outreach Kits",description:"Verify stock of glucose strips and BP cuffs for field work.",priority:"low",status:"pending",assigned_to:"user-3",assigned_by:"user-1",due_date:nm,created_at:he(),updated_at:he()},{id:"task-2",title:"Prenatal Care Coordination",description:"Coordinate prenatal care appointments and ensure all necessary tests are scheduled for Jane Wilson. Monitor gestational diabetes management.",priority:"urgent",status:"in_progress",assigned_to:"user-3",assigned_by:"user-5",patient_id:"patient-2",due_date:"2024-01-27",created_at:"2024-01-24T14:15:00Z",updated_at:"2024-01-26T09:45:00Z"},{id:"task-3",title:"Medication Inventory Check",description:"Review and update medication inventory. Ensure adequate stock of diabetes medications and blood pressure medications.",priority:"medium",status:"completed",assigned_to:"user-3",assigned_by:"user-1",due_date:"2024-01-26",created_at:"2024-01-23T08:00:00Z",updated_at:"2024-01-26T16:30:00Z",completed_at:"2024-01-26T16:30:00Z"},{id:"task-4",title:"Patient Education Session",description:"Conduct diabetes management education session for newly diagnosed patients. Prepare educational materials and schedule group session.",priority:"medium",status:"pending",assigned_to:"user-1",assigned_by:"user-5",due_date:"2024-01-30",created_at:"2024-01-25T11:00:00Z",updated_at:"2024-01-25T11:00:00Z"},{id:"appt-jd-1",title:"Clinic Visit - BP Review",description:"Follow-up on blood pressure and medication adherence.",priority:"medium",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:rm(3),created_at:he(),updated_at:he()},{id:"appt-jd-2",title:"Lab Results Discussion",description:"Discuss recent lab results and adjust care plan as needed.",priority:"low",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:rm(10),created_at:he(),updated_at:he()},{id:"appt-jd-overdue",title:"Missed Appointment - Check-in",description:"Reschedule missed appointment and check symptoms.",priority:"high",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:rm(-2),created_at:he(),updated_at:he()}],rM=[{id:"msg-1",sender_id:"user-1",recipient_id:"user-2",subject:"Follow-up Appointment",content:"Hi John, I wanted to follow up on your recent blood pressure readings. Please schedule an appointment for next week.",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-25T09:30:00Z"},{id:"msg-2",sender_id:"user-2",recipient_id:"user-1",subject:"Re: Follow-up Appointment",content:"Thank you Dr. Smith. I will call the office today to schedule the appointment.",image_url:void 0,image_name:void 0,is_read:!0,created_at:"2024-01-25T14:15:00Z"},{id:"msg-3",sender_id:"user-3",recipient_id:"user-4",subject:"Medication Reminder",content:"Hi Jane, this is a friendly reminder to take your evening insulin. Let me know if you have any questions!",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-26T19:00:00Z"},{id:"msg-4",sender_id:"user-5",recipient_id:"user-2",subject:"Lab Results Available",content:"Your recent lab results are now available. Overall looking good, but we should discuss a few items at your next visit.",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-26T11:30:00Z"}],iM=[{id:"ann-1",title:"New Health Guidelines",content:"Please note the updated health and safety guidelines for patient care. All staff should review the new protocols for infection control and patient interaction.",priority:"high",created_by:"user-1",created_at:"2024-01-25T08:00:00Z",updated_at:"2024-01-25T08:00:00Z"},{id:"ann-2",title:"Medication Inventory Update",content:"The medication inventory has been updated. Please check the new stock levels and report any shortages immediately.",priority:"medium",created_by:"user-5",created_at:"2024-01-24T14:30:00Z",updated_at:"2024-01-24T14:30:00Z"},{id:"ann-3",title:"Emergency Contact Information",content:"Updated emergency contact information has been distributed. Please ensure all patients have current emergency contacts on file.",priority:"urgent",created_by:"user-1",created_at:"2024-01-26T10:15:00Z",updated_at:"2024-01-26T10:15:00Z"}],aM=[{id:"record-1",patient_id:"patient-1",recorded_by:"user-2",record_date:"2024-01-26",temperature:"98.6F",pulse:"75 bpm",blood_pressure:"128/82 mmHg",weight:"79.5 kg",blood_sugar:"110 mg/dL",pain_level:3,fatigue_level:4,mood:"good",appetite:"good",sleep_quality:"fair",symptoms_description:"Mild headache in the morning, feeling better now",medications_taken:"Lisinopril 10mg, Metformin 500mg",activities:"Light walking for 30 minutes",notes:"Feeling overall better than yesterday",created_at:"2024-01-26T08:30:00Z",updated_at:"2024-01-26T08:30:00Z"},{id:"record-2",patient_id:"patient-2",recorded_by:"user-4",record_date:"2024-01-26",temperature:"98.4F",pulse:"80 bpm",blood_pressure:"115/70 mmHg",weight:"68.2 kg",blood_sugar:"92 mg/dL",pain_level:2,fatigue_level:3,mood:"excellent",appetite:"excellent",sleep_quality:"good",symptoms_description:"Baby is very active today, no morning sickness",medications_taken:"Prenatal vitamins",activities:"Prenatal yoga, light housework",notes:"Feeling great, baby movements are strong",created_at:"2024-01-26T09:15:00Z",updated_at:"2024-01-26T09:15:00Z"},{id:"record-3",patient_id:"patient-1",recorded_by:"user-2",record_date:"2024-01-25",temperature:"99.1F",pulse:"78 bpm",blood_pressure:"132/85 mmHg",weight:"80 kg",blood_sugar:"125 mg/dL",pain_level:5,fatigue_level:6,mood:"fair",appetite:"poor",sleep_quality:"poor",symptoms_description:"Persistent headache, feeling tired",medications_taken:"Lisinopril 10mg, Metformin 500mg, Tylenol for headache",activities:"Mostly resting",notes:"Not feeling well today, headache is bothering me",created_at:"2024-01-25T19:00:00Z",updated_at:"2024-01-25T19:00:00Z"}],T2=[{id:"loc-v-1",type:"volunteer",name:"Maria Garcia (Volunteer)",lat:13.8005,lng:100.3231,address:"Near Salaya Market",user_id:"user-3"},{id:"loc-c-1",type:"center",name:"Community Health Center - Salaya",lat:13.7963,lng:100.3127,address:"Salaya Rd",phone:"+66 2 555 0101"},{id:"loc-c-2",type:"center",name:"Phutthamonthon Health Center",lat:13.8048,lng:100.3342,address:"Phutthamonthon",phone:"+66 2 555 0202"},{id:"loc-h-1",type:"hospital",name:"Nakhon Pathom Hospital (Annex)",lat:13.7769,lng:100.3186,address:"Near Salaya",phone:"+66 2 555 0303"}],A2=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),sM=()=>{var t;const e="medical_portal_session";try{const n=localStorage.getItem(e);if(n){const r=JSON.parse(n);if((t=r==null?void 0:r.user)!=null&&t.id&&!A2(r.user.id))return console.warn("Detected invalid user ID format in session. Clearing..."),localStorage.removeItem(e),!0}}catch(n){console.error("Error validating session:",n)}return!1},ua="medical_portal_session",M2="dummyUsers",oM=e=>{try{localStorage.setItem(M2,JSON.stringify(e))}catch(t){console.error("Error saving users to localStorage:",t)}},L2=()=>{try{const e=localStorage.getItem(M2);return e?JSON.parse(e):[...Pp]}catch(e){return console.error("Error loading users from localStorage:",e),[...Pp]}};let xn=L2();const xv=()=>{xn=L2()},lM=async(e,t,n,r)=>{if(xn.find(u=>u.email===e))return{data:null,error:{message:"User already exists with this email"}};const a={id:it(),email:e,password:t,full_name:n,role:r,created_at:he()};xn.push(a),oM(xn);const l={user:a,token:it(),expires_at:new Date(Date.now()+24*60*60*1e3).toISOString()};return localStorage.setItem(ua,JSON.stringify(l)),{data:{user:a,session:l},error:null}},cM=async(e,t)=>{xv();const n=xn.find(i=>i.email===e&&i.password===t);if(!n)return{data:null,error:{message:"Invalid email or password"}};const r={user:n,token:it(),expires_at:new Date(Date.now()+24*60*60*1e3).toISOString()};return localStorage.setItem(ua,JSON.stringify(r)),{data:{user:n,session:r},error:null}},uM=async()=>(localStorage.removeItem(ua),{error:null}),dM=()=>{const e=localStorage.getItem(ua);if(!e)return null;try{const t=JSON.parse(e);return new Date(t.expires_at)<new Date?(localStorage.removeItem(ua),null):A2(t.user.id)?t:(console.warn("Invalid user ID format detected. Clearing session. Please log in again."),localStorage.removeItem(ua),null)}catch{return localStorage.removeItem(ua),null}},Li=e=>(xv(),xn.find(t=>t.id===e)),Yd=async(e,t)=>{const n=xn.findIndex(r=>r.id===e);if(n===-1)return{error:{message:"User not found"}};xn[n].password=t||"";try{localStorage.setItem("dummyUsers",JSON.stringify(xn))}catch{}return{error:null}},fM=async(e,t)=>{xv();const n=xn.findIndex(i=>i.id===e);if(n===-1)return{error:{message:"User not found"}};if(xn.find((i,a)=>a!==n&&i.email.toLowerCase()===t.toLowerCase()))return{error:{message:"Email already in use"}};xn[n].email=t;try{localStorage.setItem("dummyUsers",JSON.stringify(xn))}catch{}return{error:null}},D2=b.createContext(void 0),Se=()=>{const e=b.useContext(D2);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},hM=({children:e})=>{const[t,n]=b.useState(null),[r,i]=b.useState(null),[a,l]=b.useState(!0);b.useEffect(()=>{const f=dM();f&&(i(f),n(f.user)),l(!1)},[]);const h={user:t,session:r,loading:a,signUp:async(f,g,x,j)=>{const{data:w,error:S}=await lM(f,g,x,j);return w&&!S&&(i(w.session),n(w.user)),{data:w,error:S}},signIn:async(f,g)=>{const{data:x,error:j}=await cM(f,g);return x&&!j&&(i(x.session),n(x.user)),{data:x,error:j}},signOut:async()=>{const{error:f}=await uM();return f||(i(null),n(null)),{error:f}}};return s.jsx(D2.Provider,{value:h,children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(e,t)=>{const n=b.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:u="",children:d,...m},h)=>b.createElement("svg",{ref:h,...mM,width:i,height:i,stroke:r,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${pM(e)}`,u].join(" "),...m},[...t.map(([f,g])=>b.createElement(f,g)),...Array.isArray(d)?d:[d]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=pe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=pe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=pe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=pe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=pe("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=pe("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=pe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=pe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=pe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=pe("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=pe("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=pe("UserSearch",[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=pe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),we=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t)),console.log(` Data saved to LOCALSTORAGE with key: ${e}`,t.length||Object.keys(t).length),console.log(" This data is stored in your BROWSER, not in actual files")}catch(n){console.error("Error saving to localStorage:",n)}},Yn=(e,t)=>{try{const n=localStorage.getItem(e),r=n?JSON.parse(n):t;return console.log(` Data loaded from LOCALSTORAGE with key: ${e}`,r.length||Object.keys(r).length),console.log(" This data comes from your BROWSER storage, not actual files"),r}catch(n){return console.error("Error loading from localStorage:",n),t}};let Ye=Yn("dummyPatientProfiles",[...tM]),Bn=Yn("dummyMessages",[...rM]),xe=Yn("dummyUsers",[...Pp]),St=Yn("dummyTasks",[...nM]),lr=Yn("dummyAnnouncements",[...iM]),zt=Yn("dummyDailyRecords",[...aM]),Ya=Yn("dummyLocations",[...T2]),nn=Yn("dummyVolunteers",[]),Cp=Yn("dummyMentalAssessments",[...YA]),Fn=Yn("dummyMedications",[...XA]),fu=Yn("dummyMedicationIntakes",[...QA]),_i=Yn("dummyMedicationRequests",[...JA]);try{const e=[];for(const t of Ye)if(!xe.find(r=>r.id===t.user_id)){const r={id:t.user_id||it(),email:`patient+${(t.user_id||"").toLowerCase()||Math.random().toString(36).slice(2)}@example.local`,password:"",full_name:t.name||"Patient",role:"patient",created_at:he()};xe.push(r),e.push(r)}e.length>0&&(we("dummyUsers",xe),console.log(`Seeded ${e.length} user(s) from patient profiles`))}catch(e){console.warn("Unable to seed users from patient profiles",e)}try{const e=new Map((xe||[]).map(f=>[f.id,f])),t=(xe||[]).filter(f=>f.role==="doctor"),n=t[0];for(const f of t)if(!f.doctor_code){const g=t.indexOf(f);f.doctor_code=`DR-${String(g+1).padStart(6,"0")}`}we("dummyUsers",xe);const r=(Bu||[])[0],i=r?(()=>{const f=r.geometry.coordinates[0]||[],g=f.reduce((j,w)=>j+((w==null?void 0:w[0])||0),0)/(f.length||1),x=f.reduce((j,w)=>j+((w==null?void 0:w[1])||0),0)/(f.length||1);return{lat:g,lng:x}})():{lat:13.793,lng:100.321};let a=!1;Ye=(Ye||[]).filter(f=>!!f&&!!f.name).map(f=>{const g={...f},x=t.map(_=>(_.full_name||"").toLowerCase()),j=(g.assigned_doctor||"").toLowerCase();!x.find(_=>j.includes(_))&&n&&(g.assigned_doctor=n.full_name,a=!0);const S="Maria Garcia";if((typeof g.assigned_vhv_name!="string"||g.assigned_vhv_name.length===0||/(ironman|unknown|n\/a)/i.test(g.assigned_vhv_name))&&(g.assigned_vhv_name=S,a=!0),!g.medical_record_number||!/^MRN-/.test(g.medical_record_number)){const _=Math.floor(1e5+Math.random()*899999);g.medical_record_number=`MRN-${String(_).padStart(6,"0")}`,a=!0}if(typeof g.lat!="number"||typeof g.lng!="number"){const _=()=>(Math.random()-.5)*.01;g.lat=i.lat+_(),g.lng=i.lng+_(),a=!0}if(!g.area_name&&r&&(g.area_name=r.name,a=!0),!g.user_id||!e.get(g.user_id)){const _=it();g.user_id=_,xe.push({id:_,email:`patient+${_.slice(0,6)}@example.local`,password:"",full_name:g.name,role:"patient",created_at:he()}),we("dummyUsers",xe),a=!0}return g}),a&&we("dummyPatientProfiles",Ye),(nn||[]).length;const l=(Bn||[]).length;Bn=(Bn||[]).filter(f=>e.has(f.sender_id)&&e.has(f.recipient_id)),Bn.length!==l&&we("dummyMessages",Bn);const u=new Set((Ye||[]).map(f=>f.id)),d=(St||[]).length;St=(St||[]).filter(f=>e.has(f.assigned_to)&&e.has(f.assigned_by)&&(!f.patient_id||u.has(f.patient_id))),St.length!==d&&we("dummyTasks",St);const m=(zt||[]).length;zt=(zt||[]).filter(f=>u.has(f.patient_id)&&e.has(f.recorded_by)),zt.length!==m&&we("dummyDailyRecords",zt);const h=(Ya||[]).length;Ya=(Ya||[]).filter(f=>!f.user_id||e.has(f.user_id)),Ya.length!==h&&we("dummyLocations",Ya)}catch(e){console.warn("Normalization pass skipped:",e)}const CM=e=>{if(!e)return 0;const t=(e.match(/(\d+)/)||[])[1];return t?parseInt(t,10):0},EM=e=>`MRN-${String(e).padStart(6,"0")}`,F2=async()=>{await new Promise(t=>setTimeout(t,50));const e=Ye.reduce((t,n)=>Math.max(t,CM(n.medical_record_number)),0);return EM(e+1)},OM=e=>{if(!e)return 0;const t=(e.match(/(\d+)/)||[])[1];return t?parseInt(t,10):0},U2=e=>`VHV-${String(e).padStart(6,"0")}`,H2=async()=>{await new Promise(t=>setTimeout(t,20));const e=nn.reduce((t,n)=>Math.max(t,OM(n.volunteer_code)),0);return U2(e+1)},TM=e=>{if(!e)return 0;const t=(e.match(/(\d+)/)||[])[1];return t?parseInt(t,10):0},AM=e=>`DR-${String(e).padStart(6,"0")}`,MM=async()=>{await new Promise(t=>setTimeout(t,20));const e=xe.filter(t=>t.role==="doctor").reduce((t,n)=>Math.max(t,TM(n.doctor_code)),0);return AM(e+1)},Bt=async()=>(await new Promise(e=>setTimeout(e,500)),{data:Ye.map(e=>({...e,created_by_user:xe.find(t=>t.id===e.created_by)})),error:null}),LM=async e=>{await new Promise(n=>setTimeout(n,200));const t=Ye.find(n=>(n.medical_record_number||"").toLowerCase()===(e||"").toLowerCase());return t?{data:t,error:null}:{data:null,error:{message:"No patient with that ID"}}},ai=async e=>{await new Promise(n=>setTimeout(n,300));const t=Ye.find(n=>n.user_id===e);return t?{data:{...t,created_by_user:xe.find(n=>n.id===t.created_by)},error:null}:{data:null,error:{code:"PGRST116",message:"No profile found"}}},DM=async e=>{await new Promise(r=>setTimeout(r,400));let t=e.medical_record_number;t||(t=await F2());const n={...e,medical_record_number:t,id:it(),created_at:he(),updated_at:he()};return Ye.push(n),we("dummyPatientProfiles",Ye),{data:n,error:null}},Wu=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=Ye.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Profile not found"}}:(Ye[n]={...Ye[n],...t,updated_at:he()},we("dummyPatientProfiles",Ye),{data:Ye[n],error:null})},un=async()=>{if(await new Promise(t=>setTimeout(t,200)),(nn||[]).length===0){const t=(xe||[]).filter(n=>n.role==="volunteer").map((n,r)=>{const i=(T2||[]).find(d=>d.user_id===n.id),a=(Bu||[])[0],l=a?(()=>{const d=a.geometry.coordinates[0]||[],m=d.reduce((f,g)=>f+((g==null?void 0:g[0])||0),0)/(d.length||1),h=d.reduce((f,g)=>f+((g==null?void 0:g[1])||0),0)/(d.length||1);return{lat:m,lng:h}})():void 0,u={id:it(),user_id:n.id,volunteer_code:U2(r+1),name:n.full_name,email:n.email,phone:void 0,address:i==null?void 0:i.address,lat:i==null?void 0:i.lat,lng:i==null?void 0:i.lng,created_at:he(),updated_at:he()};return(n.email||"").toLowerCase()==="volunteer@hospital.com"&&a&&(u.area_id=a.id,u.area_name=a.name,(!u.lat||!u.lng)&&(u.lat=l==null?void 0:l.lat,u.lng=l==null?void 0:l.lng)),u});t.length>0&&(nn=t,we("dummyVolunteers",nn))}return{data:nn.map(t=>({...t,user:xe.find(n=>n.id===t.user_id)})),error:null}},IM=async e=>{await new Promise(n=>setTimeout(n,150));const t=nn.find(n=>(n.volunteer_code||"").toLowerCase()===e.toLowerCase());return{data:t||null,error:t?null:{message:"Not found"}}},RM=async e=>{await new Promise(r=>setTimeout(r,200));const t=e.volunteer_code||await H2(),n={...e,volunteer_code:t,id:it(),created_at:he(),updated_at:he()};return nn.push(n),we("dummyVolunteers",nn),{data:n,error:null}},Z2=async(e,t)=>{await new Promise(r=>setTimeout(r,200));const n=nn.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Volunteer not found"}}:(nn[n]={...nn[n],...t,updated_at:he()},we("dummyVolunteers",nn),{data:nn[n],error:null})},zM=async e=>(await new Promise(n=>setTimeout(n,400)),{data:Bn.filter(n=>n.sender_id===e||n.recipient_id===e).map(n=>({...n,sender:xe.find(r=>r.id===n.sender_id),recipient:xe.find(r=>r.id===n.recipient_id)})).sort((n,r)=>new Date(r.created_at).getTime()-new Date(n.created_at).getTime()),error:null}),mr=async e=>{await new Promise(n=>setTimeout(n,300));const t={...e,id:it(),created_at:he()};return Bn.push(t),we("dummyMessages",Bn),console.log(" Message saved to BROWSER LOCALSTORAGE:",t),console.log(" Total messages in BROWSER storage:",Bn.length),console.log("  NOTE: Data is NOT saved to actual files, only in browser localStorage"),{data:t,error:null}},$M=async(e,t)=>{await new Promise(r=>setTimeout(r,200));const n=Bn.findIndex(r=>r.id===e&&r.recipient_id===t);return n!==-1&&(Bn[n].is_read=!0,we("dummyMessages",Bn)),{error:null}},Ct=async e=>(await new Promise(n=>setTimeout(n,300)),{data:e?xe.filter(n=>n.id!==e):xe,error:null}),Ab=async(e,t)=>{if(await new Promise(i=>setTimeout(i,150)),!e)return{data:null,error:{message:"Email is required"}};const n=xe.find(i=>i.email.toLowerCase()===e.toLowerCase());if(n)return{data:n,error:null};const r={id:it(),email:e,password:"",full_name:t||e.split("@")[0],role:"patient",created_at:he()};return xe.push(r),we("dummyUsers",xe),{data:r,error:null}},BM=async(e,t)=>{if(await new Promise(i=>setTimeout(i,150)),!e)return{data:null,error:{message:"Email is required"}};const n=xe.find(i=>i.email.toLowerCase()===e.toLowerCase());if(n)return{data:n,error:null};const r={id:it(),email:e,password:"",full_name:t||e.split("@")[0],role:"volunteer",created_at:he()};return xe.push(r),we("dummyUsers",xe),{data:r,error:null}},FM=async(e,t)=>{if(await new Promise(a=>setTimeout(a,150)),!e)return{data:null,error:{message:"Email is required"}};const n=xe.find(a=>a.email.toLowerCase()===e.toLowerCase());if(n)return{data:n,error:null};const r=await MM(),i={id:it(),email:e,password:"",full_name:t||e.split("@")[0],role:"doctor",created_at:he(),doctor_code:r};return xe.push(i),we("dummyUsers",xe),{data:i,error:null}},Ep=async(e,t)=>{await new Promise(r=>setTimeout(r,150));const n=xe.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"User not found"}}:(xe[n]={...xe[n],...t},we("dummyUsers",xe),{data:xe[n],error:null})},UM=async e=>{await new Promise(r=>setTimeout(r,120));const t=xe.findIndex(r=>r.id===e);if(t===-1)return{data:null,error:{message:"User not found"}};const[n]=xe.splice(t,1);return we("dummyUsers",xe),{data:n,error:null}},HM=async()=>(await new Promise(e=>setTimeout(e,200)),{data:Ya,error:null}),ZM=async e=>{await new Promise(n=>setTimeout(n,120));const t=(xe||[]).find(n=>n.role==="doctor"&&(n.doctor_code||"").toLowerCase()===(e||"").toLowerCase());return{data:t||null,error:t?null:{message:"Not found"}}},Hr=async e=>{await new Promise(n=>setTimeout(n,400));let t=St.map(n=>({...n,assigned_to_user:xe.find(r=>r.id===n.assigned_to),assigned_by_user:xe.find(r=>r.id===n.assigned_by),patient:n.patient_id?Ye.find(r=>r.id===n.patient_id):void 0}));return e&&(t=t.filter(n=>n.assigned_to===e||n.assigned_by===e)),{data:t.sort((n,r)=>new Date(r.created_at).getTime()-new Date(n.created_at).getTime()),error:null}},zl=async e=>{await new Promise(n=>setTimeout(n,400));const t={...e,id:it(),created_at:he(),updated_at:he()};return St.push(t),we("dummyTasks",St),{data:t,error:null}},Nr=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=St.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Task not found"}}:(t.status==="completed"&&St[n].status!=="completed"&&(t.completed_at=he()),St[n]={...St[n],...t,updated_at:he()},we("dummyTasks",St),{data:St[n],error:null})},W2=async e=>{await new Promise(n=>setTimeout(n,300));const t=St.findIndex(n=>n.id===e);return t===-1?{data:null,error:{message:"Task not found"}}:(St.splice(t,1),we("dummyTasks",St),{data:null,error:null})},WM=async()=>(await new Promise(t=>setTimeout(t,300)),{data:lr.map(t=>({...t,created_by_user:xe.find(n=>n.id===t.created_by)})).sort((t,n)=>new Date(n.created_at).getTime()-new Date(t.created_at).getTime()),error:null}),VM=async e=>{await new Promise(n=>setTimeout(n,400));const t={...e,id:it(),created_at:he(),updated_at:he()};return lr.push(t),we("dummyAnnouncements",lr),{data:t,error:null}},KM=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=lr.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Announcement not found"}}:(lr[n]={...lr[n],...t,updated_at:he()},we("dummyAnnouncements",lr),{data:lr[n],error:null})},qM=async e=>{await new Promise(n=>setTimeout(n,300));const t=lr.findIndex(n=>n.id===e);return t===-1?{data:null,error:{message:"Announcement not found"}}:(lr.splice(t,1),we("dummyAnnouncements",lr),{data:null,error:null})},GM=async(e,t)=>{await new Promise(r=>setTimeout(r,400));let n=zt.map(r=>({...r,patient:Ye.find(i=>i.id===r.patient_id),recorded_by_user:xe.find(i=>i.id===r.recorded_by)}));if(t){const r=Ye.find(i=>i.user_id===t);r&&(n=n.filter(i=>i.patient_id===r.id))}return{data:n.sort((r,i)=>new Date(i.record_date).getTime()-new Date(r.record_date).getTime()),error:null}},YM=async e=>{await new Promise(n=>setTimeout(n,400));const t={...e,id:it(),created_at:he(),updated_at:he()};return zt.push(t),we("dummyDailyRecords",zt),{data:t,error:null}},XM=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=zt.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Daily record not found"}}:(zt[n]={...zt[n],...t,updated_at:he()},we("dummyDailyRecords",zt),{data:zt[n],error:null})},QM=async e=>{await new Promise(n=>setTimeout(n,300));const t=zt.findIndex(n=>n.id===e);return t===-1?{data:null,error:{message:"Daily record not found"}}:(zt.splice(t,1),we("dummyDailyRecords",zt),{data:null,error:null})},Op=async(e,t)=>{await new Promise(r=>setTimeout(r,200));let n=Cp.map(r=>({...r,patient:Ye.find(i=>i.id===r.patient_id),recorded_by_user:xe.find(i=>i.id===r.recorded_by)}));return e&&(n=n.filter(r=>r.patient_id===e)),{data:n.sort((r,i)=>new Date(i.date).getTime()-new Date(r.date).getTime()),error:null}},JM=async e=>{await new Promise(n=>setTimeout(n,200));const t={...e,id:it(),created_at:he()};return Cp.push(t),we("dummyMentalAssessments",Cp),{data:t,error:null}},e3=async e=>{await new Promise(n=>setTimeout(n,100));let t=[...Fn];return e&&(t=t.filter(n=>n.patient_id===e)),{data:t,error:null}},V2=async e=>{await new Promise(n=>setTimeout(n,100));const t={...e,id:it(),created_at:he(),updated_at:he()};return Fn.push(t),we("dummyMedications",Fn),{data:t,error:null}},t3=async(e,t)=>{await new Promise(r=>setTimeout(r,100));const n=Fn.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Medication not found"}}:(Fn[n]={...Fn[n],...t,updated_at:he()},we("dummyMedications",Fn),{data:Fn[n],error:null})},n3=async e=>{await new Promise(n=>setTimeout(n,100));const t=Fn.findIndex(n=>n.id===e);return t!==-1&&(Fn.splice(t,1),we("dummyMedications",Fn)),{data:null,error:null}},r3=async(e,t,n)=>{await new Promise(i=>setTimeout(i,100));const r=fu.find(i=>i.medication_id===e&&i.scheduled_at===n);return r?(r.status="taken",r.taken_at=he()):fu.push({id:it(),medication_id:e,patient_id:t,scheduled_at:n,taken_at:he(),status:"taken"}),we("dummyMedicationIntakes",fu),{data:!0,error:null}},i3=e=>{const[t,n]=(e||"00:00").split(":").map(i=>parseInt(i,10)||0),r=new Date;return r.setHours(t,n,0,0),r},a3=async e=>{await new Promise(u=>setTimeout(u,50));const t=Ye.find(u=>u.user_id===e);if(!t)return{data:[],error:null};const n=new Date,r=n.toISOString().slice(0,10),i=Fn.filter(u=>u.patient_id===t.id&&u.reminders_enabled!==!1).filter(u=>(!u.start_date||u.start_date<=r)&&(!u.end_date||u.end_date>=r)),a=[],l=5;for(const u of i)for(const d of u.times||[]){const m=i3(d);if(Math.abs((n.getTime()-m.getTime())/6e4)<=l){const f=new Date(m.getTime()).toISOString();fu.find(x=>x.medication_id===u.id&&x.scheduled_at===f&&x.status==="taken")||a.push({medication:u,scheduledAt:f})}}return{data:a,error:null}},Vu=async e=>{await new Promise(n=>setTimeout(n,120));let t=(_i||[]).map(n=>({...n,patient:(Ye||[]).find(r=>r.id===n.patient_id)}));return e&&(t=t.filter(n=>n.patient_id===e)),{data:t.sort((n,r)=>new Date(r.created_at).getTime()-new Date(n.created_at).getTime()),error:null}},s3=async e=>{await new Promise(n=>setTimeout(n,120));const t={...e,status:e.status||"pending",id:it(),created_at:he(),updated_at:he()};return _i.push(t),we("dummyMedicationRequests",_i),{data:t,error:null}},Mb=async(e,t)=>{await new Promise(r=>setTimeout(r,120));const n=_i.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Request not found"}}:(_i[n]={..._i[n],...t,updated_at:he()},we("dummyMedicationRequests",_i),{data:_i[n],error:null})},o3=()=>{const{signIn:e}=Se(),[t,n]=b.useState("identify"),[r,i]=b.useState(""),[a,l]=b.useState(""),[u,d]=b.useState(null),[m,h]=b.useState(!1),[f,g]=b.useState(""),[x,j]=b.useState(""),[w,S]=b.useState(!1),[_,N]=b.useState(""),v=async A=>{A.preventDefault(),N(""),S(!0);try{let E="",I=null;const $=r.trim();if(!$)throw new Error("Please enter patient ID or email");if($.includes("@")){const{data:z}=await Ct(),B=(z||[]).find(C=>C.role==="patient"&&C.email.toLowerCase()===$.toLowerCase());if(!B)throw new Error("No patient account with this email");I=B.id,E=B.email}else{const{data:z}=await LM($);if(!z)throw new Error("Patient ID not found");if(z.user_id){const B=Li(z.user_id);B&&B.role==="patient"&&(I=B.id,E=B.email)}if(!I)throw new Error("This patient has no account yet. Ask your care team to add an email for login.")}d(I),l(E);const D=I?Li(I):void 0,M=!!(D&&D.password&&D.password.length>0);h(M),n(M?"password":"set-password")}catch(E){N(E.message||"Unable to identify patient")}finally{S(!1)}},k=async A=>{if(A.preventDefault(),N(""),f.length<6)return N("Password must be at least 6 characters");if(f!==x)return N("Passwords do not match");if(!u)return N("Missing user account");S(!0);try{const{error:E}=await Yd(u,f);if(E)throw new Error(E.message);const I=await e(a,f);I!=null&&I.error&&N(I.error.message)}catch(E){N(E.message||"Unable to set password")}finally{S(!1)}},O=async A=>{A.preventDefault(),N(""),S(!0);try{const{error:E}=await e(a,f);E&&N(E.message)}catch{N("Login failed")}finally{S(!1)}};return s.jsxs("div",{className:"w-full",children:[t==="identify"&&s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(B2,{className:"w-8 h-8 inline text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Patient Access"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Patient ID (MRN) or Email"})]}),s.jsx("input",{type:"text",value:r,onChange:A=>i(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"MRN-001234 or you@example.com"}),_&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:_}),s.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(ka,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&s.jsxs("form",{onSubmit:O,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:a,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{type:"password",value:f,onChange:A=>g(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),_&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:_}),s.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(ka,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&s.jsxs("form",{onSubmit:k,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(Es,{className:"w-8 h-8 inline text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",a]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsx("input",{type:"password",value:f,onChange:A=>g(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsx("input",{type:"password",value:x,onChange:A=>j(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),_&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:_}),s.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Es,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},l3=()=>{const{signIn:e}=Se(),[t,n]=b.useState("identify"),[r,i]=b.useState(""),[a,l]=b.useState(""),[u,d]=b.useState(null),[m,h]=b.useState(""),[f,g]=b.useState(""),[x,j]=b.useState(!1),[w,S]=b.useState(""),_=async k=>{k.preventDefault(),S(""),j(!0);try{let O=null,A="";const E=r.trim();if(!E)throw new Error("Enter Volunteer ID or Email");if(E.includes("@")){const{data:D}=await Ct(),M=(D||[]).find(z=>z.role==="volunteer"&&z.email.toLowerCase()===E.toLowerCase());if(!M)throw new Error("Volunteer email not found");O=M.id,A=M.email}else{const{data:D}=await IM(E);if(!D)throw new Error("Volunteer ID not found");O=D.user_id;const M=O?Li(O):void 0;if(!M)throw new Error("No user linked to this volunteer");A=M.email}d(O),l(A);const I=O?Li(O):void 0,$=!!(I&&I.password&&I.password.length>0);n($?"password":"set-password")}catch(O){S(O.message||"Unable to identify")}finally{j(!1)}},N=async k=>{if(k.preventDefault(),S(""),m.length<6)return S("Password must be at least 6 characters");if(m!==f)return S("Passwords do not match");if(!u)return S("Missing user account");j(!0);try{const{error:O}=await Yd(u,m);if(O)throw new Error(O.message);const A=await e(a,m);A!=null&&A.error&&S(A.error.message)}catch(O){S(O.message||"Unable to set password")}finally{j(!1)}},v=async k=>{k.preventDefault(),S(""),j(!0);try{const{error:O}=await e(a,m);O&&S(O.message)}finally{j(!1)}};return s.jsxs("div",{className:"w-full",children:[t==="identify"&&s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(B2,{className:"w-8 h-8 inline text-emerald-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Volunteer Access"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Volunteer ID or Email"})]}),s.jsx("input",{type:"text",value:r,onChange:k=>i(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"VHV-000123 or you@example.com"}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:x,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[x?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(ka,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:a,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{type:"password",value:m,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:x,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[x?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(ka,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&s.jsxs("form",{onSubmit:N,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(Es,{className:"w-8 h-8 inline text-emerald-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",a]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsx("input",{type:"password",value:m,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsx("input",{type:"password",value:f,onChange:k=>g(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:x,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[x?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Es,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},c3=()=>{const{signIn:e}=Se(),[t,n]=b.useState("identify"),[r,i]=b.useState(""),[a,l]=b.useState(""),[u,d]=b.useState(null),[m,h]=b.useState(""),[f,g]=b.useState(""),[x,j]=b.useState(!1),[w,S]=b.useState(""),_=async k=>{k.preventDefault(),S(""),j(!0);try{let O=null,A="";const E=r.trim();if(!E)throw new Error("Enter Doctor ID or Email");if(E.includes("@")){const{data:D}=await Ct(),M=(D||[]).find(z=>z.role==="doctor"&&(z.email||"").toLowerCase()===E.toLowerCase());if(!M)throw new Error("Doctor email not found");O=M.id,A=M.email}else{const{data:D}=await ZM(E);if(!D)throw new Error("Doctor ID not found");O=D.id,A=D.email}d(O),l(A);const I=O?Li(O):void 0,$=!!(I&&I.password&&I.password.length>0);n($?"password":"set-password")}catch(O){S(O.message||"Unable to identify")}finally{j(!1)}},N=async k=>{if(k.preventDefault(),S(""),m.length<6)return S("Password must be at least 6 characters");if(m!==f)return S("Passwords do not match");if(!u)return S("Missing user account");j(!0);try{const{error:O}=await Yd(u,m);if(O)throw new Error(O.message);const A=await e(a,m);A!=null&&A.error&&S(A.error.message)}catch(O){S(O.message||"Unable to set password")}finally{j(!1)}},v=async k=>{k.preventDefault(),S(""),j(!0);try{const{error:O}=await e(a,m);O&&S(O.message)}finally{j(!1)}};return s.jsxs("div",{className:"w-full",children:[t==="identify"&&s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(Zu,{className:"w-8 h-8 inline text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Doctor Access"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Doctor ID or Email"})]}),s.jsx("input",{type:"text",value:r,onChange:k=>i(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"DR-000123 or you@example.com"}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:x,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[x?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(ka,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:a,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{type:"password",value:m,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:x,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[x?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(ka,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&s.jsxs("form",{onSubmit:N,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(Es,{className:"w-8 h-8 inline text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",a]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsx("input",{type:"password",value:m,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsx("input",{type:"password",value:f,onChange:k=>g(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:x,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[x?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Es,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},u3=()=>{const[e,t]=b.useState("patient"),[n,r]=b.useState(!0),[i,a]=b.useState(""),[l,u]=b.useState(""),[d,m]=b.useState(""),[h,f]=b.useState("patient"),[g,x]=b.useState(!1),[j,w]=b.useState(""),{signIn:S,signUp:_}=Se(),N=async v=>{v.preventDefault(),w(""),x(!0);try{if(n){const{error:k}=await S(i,l);k&&w(k.message)}else{const{error:k}=await _(i,l,d,h);k&&w(k.message)}}catch{w("An unexpected error occurred")}finally{x(!1)}};return e==="patient"?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"flex justify-center mb-3",children:s.jsx("img",{src:"/logo.png",alt:"Health Bride",className:"h-12"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Health Bride Patient Portal"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Access with your MRN or email"})]}),s.jsx(o3,{}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{onClick:()=>t("staff"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Staff login"}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsx("button",{onClick:()=>t("volunteer"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Volunteer login"})]})})]})}):e==="volunteer"?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"flex justify-center mb-3",children:s.jsx("img",{src:"/logo.png",alt:"Health Bride",className:"h-12"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Health Bride Volunteer Portal"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Access with Volunteer ID or email"})]}),s.jsx(l3,{}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{onClick:()=>t("staff"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Staff login"}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsx("button",{onClick:()=>t("patient"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Patient login"})]})})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("img",{src:"/logo.png",alt:"Health Bride",className:"h-12"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Health Bride Portal"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),s.jsx("div",{className:"mb-6",children:s.jsx(c3,{})}),s.jsxs("form",{onSubmit:N,className:"space-y-6 hidden",children:[!n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",required:!0,value:d,onChange:v=>m(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{value:h,onChange:v=>f(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"patient",children:"Patient"}),s.jsx("option",{value:"doctor",children:"Doctor"}),s.jsx("option",{value:"volunteer",children:"Volunteer"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",required:!0,value:i,onChange:v=>a(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{type:"password",required:!0,value:l,onChange:v=>u(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your password"})]}),j&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:j}),s.jsx("button",{type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[n?s.jsx(ka,{className:"w-5 h-5"}):s.jsx(kM,{className:"w-5 h-5"}),s.jsx("span",{children:n?"Sign In":"Sign Up"})]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{onClick:()=>t("patient"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Patient login"}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsx("button",{onClick:()=>t("volunteer"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Volunteer login"})]})})]})})},d3=({onMenuClick:e,onViewChange:t})=>{var d,m;const{user:n,signOut:r}=Se(),[i,a]=b.useState(void 0);b.useEffect(()=>{let h=!0;return(async()=>{if(n){if(n.photo_url){a(n.photo_url);return}if(n.role==="patient"){const{data:g}=await ai(n.id);h&&a(g==null?void 0:g.photo_url)}}})(),()=>{h=!1}},[n]);const l=async()=>{await r()},u=h=>{switch(h){case"doctor":return"bg-green-100 text-green-800";case"volunteer":return"bg-purple-100 text-purple-800";case"patient":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s.jsx("nav",{className:"bg-white shadow-md border-b border-gray-200 sticky top-0 z-20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100",onClick:e,"aria-label":"Open menu",children:s.jsx($2,{className:"w-5 h-5"})})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t("user-profile"),className:"w-9 h-9 rounded-full overflow-hidden border border-gray-200 bg-gray-50 flex items-center justify-center hover:ring-2 hover:ring-blue-500",title:"My Profile",children:i?s.jsx("img",{src:i,className:"w-full h-full object-cover"}):s.jsx(Re,{className:"w-5 h-5 text-gray-500"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:n==null?void 0:n.full_name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u((n==null?void 0:n.role)||"")}`,children:((d=n==null?void 0:n.role)==null?void 0:d.charAt(0).toUpperCase())+((m=n==null?void 0:n.role)==null?void 0:m.slice(1))})]}),s.jsx("button",{onClick:l,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",title:"Sign Out",children:s.jsx(jM,{className:"w-5 h-5"})})]})]})})})},f3=({currentView:e,onViewChange:t,mobileOpen:n,setMobileOpen:r})=>{const{user:i}=Se(),[a,l]=b.useState(!1);b.useEffect(()=>{const f=localStorage.getItem("sidebar-collapsed");f&&l(f==="1")},[]);const u=()=>{const f=!a;l(f),localStorage.setItem("sidebar-collapsed",f?"1":"0")},d=()=>{const f=[{key:"dashboard",label:"Dashboard",icon:Re},{key:"messages",label:"Messages",icon:Di},{key:"tasks",label:"My Tasks",icon:ys},{key:"records",label:"Daily Records",icon:Kr},{key:"map",label:"Map",icon:Qd}];if((i==null?void 0:i.role)==="doctor"||(i==null?void 0:i.role)==="volunteer"){if(f.splice(1,0,{key:"patients",label:"Patients",icon:Si}),(i==null?void 0:i.role)==="doctor"&&(f.splice(2,0,{key:"volunteers",label:"Volunteers",icon:ys}),f.splice(3,0,{key:"doctors",label:"Doctors",icon:Zt}),f.splice(5,0,{key:"med-requests",label:"Medication Requests",icon:Zt})),(i==null?void 0:i.role)==="volunteer"){const g=f.findIndex(x=>x.key==="tasks");f.splice(g+1,0,{key:"appointments",label:"Appointments",icon:Cs}),f.splice(2,0,{key:"doctors",label:"Doctors",icon:Zt}),f.splice(6,0,{key:"med-requests",label:"Medication Requests",icon:Zt})}}else if((i==null?void 0:i.role)==="patient"){f.splice(1,0,{key:"profile",label:"My Profile",icon:Si}),f.splice(2,0,{key:"doctors",label:"Doctors",icon:Zt}),f.splice(3,0,{key:"medication",label:"Medication Request",icon:Ks}),f.splice(4,0,{key:"medications",label:"My Medications",icon:Zt}),f.splice(4,0,{key:"mental",label:"Mental Assessment",icon:Kr});const g=f.findIndex(x=>x.key==="tasks");g!==-1&&(f[g]={key:"appointments",label:"Appointments",icon:Cs})}return(i==null?void 0:i.role)==="doctor"&&(f.splice(3,0,{key:"volunteer-tasks",label:"Volunteer Tasks",icon:ys}),f.splice(4,0,{key:"mental-assessments",label:"Mental Assessments",icon:Kr})),f},m=()=>s.jsx("ul",{className:"mt-4 space-y-1",children:d().map(f=>{const g=f.icon,x=e===f.key;return s.jsx("li",{children:s.jsxs("button",{onClick:()=>{t(f.key),r&&r(!1)},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${x?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[s.jsx(g,{className:"w-5 h-5 shrink-0"}),!a&&s.jsx("span",{className:"text-sm font-medium truncate",children:f.label})]})},f.key)})}),h=s.jsxs("div",{className:`h-full flex flex-col ${a?"items-center":""}`,children:[s.jsx("div",{className:`flex items-center ${a?"justify-center":"justify-start"} h-16 px-3 border-b border-gray-200`,children:a?s.jsx("img",{src:"/logo.png",alt:"logo",className:"h-8 object-contain"}):s.jsx("img",{src:"/logo.png",alt:"logo",className:"h-9 object-contain"})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:s.jsx(m,{})}),s.jsx("div",{className:"p-2 border-t border-gray-200",children:s.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg px-3 py-2",children:[a?s.jsx($2,{className:"w-4 h-4"}):s.jsx(bM,{className:"w-4 h-4"}),!a&&s.jsx("span",{className:"text-sm",children:"Collapse"})]})})]});return s.jsxs(s.Fragment,{children:[s.jsx("aside",{className:`hidden md:flex md:flex-col bg-white border-r border-gray-200 h-screen sticky top-0 z-30 transition-[width] duration-200 ${a?"w-20":"w-64"}`,children:h}),s.jsxs("div",{className:`md:hidden ${n?"fixed inset-0 z-40":"hidden"}`,children:[s.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>r&&r(!1)}),s.jsxs("aside",{className:"absolute left-0 top-0 h-full w-72 bg-white border-r border-gray-200 shadow-xl",children:[s.jsxs("div",{className:"h-16 flex items-center justify-between px-3 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:s.jsx(Zt,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-lg font-bold text-gray-900",children:"HealthBridge"})]}),s.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100",onClick:()=>r&&r(!1),children:s.jsx(Os,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"h-[calc(100%-4rem)] overflow-y-auto px-2",children:s.jsx(m,{})})]})]})]})},h3=({announcement:e,onClose:t,onSuccess:n})=>{const{user:r}=Se(),[i,a]=b.useState(!1),[l,u]=b.useState({title:(e==null?void 0:e.title)||"",content:(e==null?void 0:e.content)||"",priority:(e==null?void 0:e.priority)||"medium"}),d=async h=>{h.preventDefault(),a(!0);try{if(e){const{error:f}=await KM(e.id,l);if(f){console.error("Error updating announcement:",f);return}}else{const{error:f}=await VM({...l,created_by:(r==null?void 0:r.id)||""});if(f){console.error("Error creating announcement:",f);return}}n(),t()}catch(f){console.error("Error saving announcement:",f)}finally{a(!1)}},m=h=>{const{name:f,value:g}=h.target;u({...l,[f]:g})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(du,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Edit Announcement":"Create New Announcement"})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(Os,{className:"w-5 h-5"})})]})}),s.jsxs("form",{onSubmit:d,className:"p-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),s.jsx("input",{type:"text",name:"title",required:!0,value:l.title,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter announcement title..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),s.jsxs("select",{name:"priority",required:!0,value:l.priority,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),s.jsx("textarea",{name:"content",required:!0,rows:6,value:l.content,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter announcement content..."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(La,{className:"w-5 h-5"}),s.jsxs("span",{children:[e?"Update":"Create"," Announcement"]})]})})]})]})]})})};function K2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=K2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function $e(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=K2(e))&&(r&&(r+=" "),r+=t);return r}var Jd={},q2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(q2);var bv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(bv);var _v={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(_v);var ef={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let a=0,l="",u="",d=!1;for(n.charCodeAt(0)===46&&(r.push(""),a++);a<i;){const m=n[a];u?m==="\\"&&a+1<i?(a++,l+=n[a]):m===u?u="":l+=m:d?m==='"'||m==="'"?u=m:m==="]"?(d=!1,r.push(l),l=""):l+=m:m==="["?(d=!0,l&&(r.push(l),l="")):m==="."?l&&(r.push(l),l=""):l+=m,a++}return l&&r.push(l),r}e.toPath=t})(ef);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q2,n=bv,r=_v,i=ef;function a(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const h=u[d];return h===void 0?n.isDeepKey(d)?a(u,i.toPath(d),m):m:h}case"number":case"symbol":{typeof d=="number"&&(d=r.toKey(d));const h=u[d];return h===void 0?m:h}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const h=u[d];return h===void 0?m:h}}}function l(u,d,m){if(d.length===0)return m;let h=u;for(let f=0;f<d.length;f++){if(h==null||t.isUnsafeProperty(d[f]))return m;h=h[d[f]]}return h===void 0?m:h}e.get=a})(Jd);var m3=Jd.get;const Ts=Tr(m3);var G2={exports:{}},Le={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv=Symbol.for("react.transitional.element"),jv=Symbol.for("react.portal"),tf=Symbol.for("react.fragment"),nf=Symbol.for("react.strict_mode"),rf=Symbol.for("react.profiler"),af=Symbol.for("react.consumer"),sf=Symbol.for("react.context"),of=Symbol.for("react.forward_ref"),lf=Symbol.for("react.suspense"),cf=Symbol.for("react.suspense_list"),uf=Symbol.for("react.memo"),df=Symbol.for("react.lazy"),p3=Symbol.for("react.view_transition"),g3=Symbol.for("react.client.reference");function Xn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wv:switch(e=e.type,e){case tf:case rf:case nf:case lf:case cf:case p3:return e;default:switch(e=e&&e.$$typeof,e){case sf:case of:case df:case uf:return e;case af:return e;default:return t}}case jv:return t}}}Le.ContextConsumer=af;Le.ContextProvider=sf;Le.Element=wv;Le.ForwardRef=of;Le.Fragment=tf;Le.Lazy=df;Le.Memo=uf;Le.Portal=jv;Le.Profiler=rf;Le.StrictMode=nf;Le.Suspense=lf;Le.SuspenseList=cf;Le.isContextConsumer=function(e){return Xn(e)===af};Le.isContextProvider=function(e){return Xn(e)===sf};Le.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wv};Le.isForwardRef=function(e){return Xn(e)===of};Le.isFragment=function(e){return Xn(e)===tf};Le.isLazy=function(e){return Xn(e)===df};Le.isMemo=function(e){return Xn(e)===uf};Le.isPortal=function(e){return Xn(e)===jv};Le.isProfiler=function(e){return Xn(e)===rf};Le.isStrictMode=function(e){return Xn(e)===nf};Le.isSuspense=function(e){return Xn(e)===lf};Le.isSuspenseList=function(e){return Xn(e)===cf};Le.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===tf||e===rf||e===nf||e===lf||e===cf||typeof e=="object"&&e!==null&&(e.$$typeof===df||e.$$typeof===uf||e.$$typeof===sf||e.$$typeof===af||e.$$typeof===of||e.$$typeof===g3||e.getModuleId!==void 0)};Le.typeOf=Xn;G2.exports=Le;var v3=G2.exports,an=e=>e===0?0:e>0?1:-1,jn=e=>typeof e=="number"&&e!=+e,da=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,de=e=>(typeof e=="number"||e instanceof Number)&&!jn(e),Er=e=>de(e)||typeof e=="string",y3=0,bl=e=>{var t=++y3;return"".concat(e||"").concat(t)},pr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!de(t)&&typeof t!="string")return r;var a;if(da(t)){if(n==null)return r;var l=t.indexOf("%");a=n*parseFloat(t.slice(0,l))/100}else a=+t;return jn(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},Y2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Wt(e,t,n){return de(e)&&de(t)?e+n*(t-e):t}function x3(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Ts(r,t))===n)}var vt=e=>e===null||typeof e>"u",$l=e=>vt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),b3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Nv(e){if(typeof e!="string")return!1;var t=b3;return t.includes(e)}var _3=["viewBox","children"],Lb=["points","pathLength"],im={svg:_3,polygon:Lb,polyline:Lb},w3=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(b.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Nv(i)&&(r[i]=a=>n[i](n,a))}),r},j3=(e,t,n)=>r=>(e(t,n,r),null),ff=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];Nv(i)&&typeof a=="function"&&(r||(r={}),r[i]=j3(a,t,n))}),r},N3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function X2(e){if(typeof e!="string")return!1;var t=N3;return t.includes(e)}function qs(e){var t=Object.entries(e).filter(n=>{var[r]=n;return X2(r)});return Object.fromEntries(t)}var Db=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Ib=null,am=null,Q2=e=>{if(e===Ib&&Array.isArray(am))return am;var t=[];return b.Children.forEach(e,n=>{vt(n)||(v3.isFragment(n)?t=t.concat(Q2(n.props.children)):t.push(n))}),am=t,Ib=e,t};function S3(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>Db(i)):r=[Db(t)],Q2(e).forEach(i=>{var a=Ts(i,"type.displayName")||Ts(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}var P3=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(i=r&&(im==null?void 0:im[r]))!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&a.includes(t)||X2(t)),d=!!n&&Nv(t);return l||u||d},Ot=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(b.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(a=>{var l;P3((l=r)===null||l===void 0?void 0:l[a],a,t,n)&&(i[a]=r[a])}),i},k3=["children","width","height","viewBox","className","style","title","desc"];function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tp.apply(null,arguments)}function C3(e,t){if(e==null)return{};var n,r,i=E3(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function E3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Sv=b.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:a,className:l,style:u,title:d,desc:m}=e,h=C3(e,k3),f=a||{width:r,height:i,x:0,y:0},g=$e("recharts-surface",l);return b.createElement("svg",Tp({},Ot(h,!0,"svg"),{className:g,width:r,height:i,style:u,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),b.createElement("title",null,d),b.createElement("desc",null,m),n)}),O3=["children","className"];function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ap.apply(null,arguments)}function T3(e,t){if(e==null)return{};var n,r,i=A3(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var $i=b.forwardRef((e,t)=>{var{children:n,className:r}=e,i=T3(e,O3),a=$e("recharts-layer",r);return b.createElement("g",Ap({className:a},Ot(i,!0),{ref:t}),n)}),J2=b.createContext(null),M3=()=>b.useContext(J2);function Ie(e){return function(){return e}}const eN=Math.cos,Ku=Math.sin,gr=Math.sqrt,qu=Math.PI,hf=2*qu,Mp=Math.PI,Lp=2*Mp,ra=1e-6,L3=Lp-ra;function tN(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function D3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tN;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class I3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tN:D3(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+l}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,u=this._y1,d=r-t,m=i-n,h=l-t,f=u-n,g=h*h+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>ra)if(!(Math.abs(f*d-m*h)>ra)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-l,j=i-u,w=d*d+m*m,S=x*x+j*j,_=Math.sqrt(w),N=Math.sqrt(g),v=a*Math.tan((Mp-Math.acos((w+g-S)/(2*_*N)))/2),k=v/N,O=v/_;Math.abs(k-1)>ra&&this._append`L${t+k*h},${n+k*f}`,this._append`A${a},${a},0,0,${+(f*x>h*j)},${this._x1=t+O*d},${this._y1=n+O*m}`}}arc(t,n,r,i,a,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),d=r*Math.sin(i),m=t+u,h=n+d,f=1^l,g=l?i-a:a-i;this._x1===null?this._append`M${m},${h}`:(Math.abs(this._x1-m)>ra||Math.abs(this._y1-h)>ra)&&this._append`L${m},${h}`,r&&(g<0&&(g=g%Lp+Lp),g>L3?this._append`A${r},${r},0,1,${f},${t-u},${n-d}A${r},${r},0,1,${f},${this._x1=m},${this._y1=h}`:g>ra&&this._append`A${r},${r},0,${+(g>=Mp)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Pv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new I3(t)}function kv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nN(e){this._context=e}nN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function mf(e){return new nN(e)}function rN(e){return e[0]}function iN(e){return e[1]}function aN(e,t){var n=Ie(!0),r=null,i=mf,a=null,l=Pv(u);e=typeof e=="function"?e:e===void 0?rN:Ie(e),t=typeof t=="function"?t:t===void 0?iN:Ie(t);function u(d){var m,h=(d=kv(d)).length,f,g=!1,x;for(r==null&&(a=i(x=l())),m=0;m<=h;++m)!(m<h&&n(f=d[m],m,d))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+e(f,m,d),+t(f,m,d));if(x)return a=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Ie(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Ie(+d),u):t},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:Ie(!!d),u):n},u.curve=function(d){return arguments.length?(i=d,r!=null&&(a=i(r)),u):i},u.context=function(d){return arguments.length?(d==null?r=a=null:a=i(r=d),u):r},u}function Rc(e,t,n){var r=null,i=Ie(!0),a=null,l=mf,u=null,d=Pv(m);e=typeof e=="function"?e:e===void 0?rN:Ie(+e),t=typeof t=="function"?t:Ie(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?iN:Ie(+n);function m(f){var g,x,j,w=(f=kv(f)).length,S,_=!1,N,v=new Array(w),k=new Array(w);for(a==null&&(u=l(N=d())),g=0;g<=w;++g){if(!(g<w&&i(S=f[g],g,f))===_)if(_=!_)x=g,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),j=g-1;j>=x;--j)u.point(v[j],k[j]);u.lineEnd(),u.areaEnd()}_&&(v[g]=+e(S,g,f),k[g]=+t(S,g,f),u.point(r?+r(S,g,f):v[g],n?+n(S,g,f):k[g]))}if(N)return u=null,N+""||null}function h(){return aN().defined(i).curve(l).context(a)}return m.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ie(+f),r=null,m):e},m.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ie(+f),m):e},m.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ie(+f),m):r},m.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ie(+f),n=null,m):t},m.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ie(+f),m):t},m.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ie(+f),m):n},m.lineX0=m.lineY0=function(){return h().x(e).y(t)},m.lineY1=function(){return h().x(e).y(n)},m.lineX1=function(){return h().x(r).y(t)},m.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ie(!!f),m):i},m.curve=function(f){return arguments.length?(l=f,a!=null&&(u=l(a)),m):l},m.context=function(f){return arguments.length?(f==null?a=u=null:u=l(a=f),m):a},m}class sN{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function R3(e){return new sN(e,!0)}function z3(e){return new sN(e,!1)}const Cv={draw(e,t){const n=gr(t/qu);e.moveTo(n,0),e.arc(0,0,n,0,hf)}},$3={draw(e,t){const n=gr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},oN=gr(1/3),B3=oN*2,F3={draw(e,t){const n=gr(t/B3),r=n*oN;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},U3={draw(e,t){const n=gr(t),r=-n/2;e.rect(r,r,n,n)}},H3=.8908130915292852,lN=Ku(qu/10)/Ku(7*qu/10),Z3=Ku(hf/10)*lN,W3=-eN(hf/10)*lN,V3={draw(e,t){const n=gr(t*H3),r=Z3*n,i=W3*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const l=hf*a/5,u=eN(l),d=Ku(l);e.lineTo(d*n,-u*n),e.lineTo(u*r-d*i,d*r+u*i)}e.closePath()}},sm=gr(3),K3={draw(e,t){const n=-gr(t/(sm*3));e.moveTo(0,n*2),e.lineTo(-sm*n,-n),e.lineTo(sm*n,-n),e.closePath()}},An=-.5,Mn=gr(3)/2,Dp=1/gr(12),q3=(Dp/2+1)*3,G3={draw(e,t){const n=gr(t/q3),r=n/2,i=n*Dp,a=r,l=n*Dp+n,u=-a,d=l;e.moveTo(r,i),e.lineTo(a,l),e.lineTo(u,d),e.lineTo(An*r-Mn*i,Mn*r+An*i),e.lineTo(An*a-Mn*l,Mn*a+An*l),e.lineTo(An*u-Mn*d,Mn*u+An*d),e.lineTo(An*r+Mn*i,An*i-Mn*r),e.lineTo(An*a+Mn*l,An*l-Mn*a),e.lineTo(An*u+Mn*d,An*d-Mn*u),e.closePath()}};function Y3(e,t){let n=null,r=Pv(i);e=typeof e=="function"?e:Ie(e||Cv),t=typeof t=="function"?t:Ie(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Ie(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Ie(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Gu(){}function Yu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function cN(e){this._context=e}cN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function X3(e){return new cN(e)}function uN(e){this._context=e}uN.prototype={areaStart:Gu,areaEnd:Gu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Yu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Q3(e){return new uN(e)}function dN(e){this._context=e}dN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Yu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function J3(e){return new dN(e)}function fN(e){this._context=e}fN.prototype={areaStart:Gu,areaEnd:Gu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function e4(e){return new fN(e)}function Rb(e){return e<0?-1:1}function zb(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(a*i+l*r)/(r+i);return(Rb(a)+Rb(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(u))||0}function $b(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function om(e,t,n){var r=e._x0,i=e._y0,a=e._x1,l=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,l-u*n,a,l)}function Xu(e){this._context=e}Xu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:om(this,this._t0,$b(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,om(this,$b(this,n=zb(this,e,t)),n);break;default:om(this,this._t0,n=zb(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function hN(e){this._context=new mN(e)}(hN.prototype=Object.create(Xu.prototype)).point=function(e,t){Xu.prototype.point.call(this,t,e)};function mN(e){this._context=e}mN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function t4(e){return new Xu(e)}function n4(e){return new hN(e)}function pN(e){this._context=e}pN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Bb(e),i=Bb(t),a=0,l=1;l<n;++a,++l)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Bb(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),l=new Array(n);for(i[0]=0,a[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function r4(e){return new pN(e)}function pf(e,t){this._context=e,this._t=t}pf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function i4(e){return new pf(e,.5)}function a4(e){return new pf(e,0)}function s4(e){return new pf(e,1)}function As(e,t){if((l=e.length)>1)for(var n=1,r,i,a=e[t[0]],l,u=a.length;n<l;++n)for(i=a,a=e[t[n]],r=0;r<u;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ip(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function o4(e,t){return e[t]}function l4(e){const t=[];return t.key=e,t}function c4(){var e=Ie([]),t=Ip,n=As,r=o4;function i(a){var l=Array.from(e.apply(this,arguments),l4),u,d=l.length,m=-1,h;for(const f of a)for(u=0,++m;u<d;++u)(l[u][m]=[0,+r(f,l[u].key,m,a)]).data=f;for(u=0,h=kv(t(l));u<d;++u)l[h[u]].index=u;return n(l,h),l}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Ie(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Ie(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?Ip:typeof a=="function"?a:Ie(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??As,i):n},i}function u4(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,l;i<a;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}As(e,t)}}function d4(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}As(e,t)}}function f4(e,t){if(!(!((l=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,l;r<a;++r){for(var u=0,d=0,m=0;u<l;++u){for(var h=e[t[u]],f=h[r][1]||0,g=h[r-1][1]||0,x=(f-g)/2,j=0;j<u;++j){var w=e[t[j]],S=w[r][1]||0,_=w[r-1][1]||0;x+=S-_}d+=f,m+=x*f}i[r-1][1]+=i[r-1][0]=n,d&&(n-=m/d)}i[r-1][1]+=i[r-1][0]=n,As(e,t)}}var h4=["type","size","sizeType"];function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rp.apply(null,arguments)}function Fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ub(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fb(Object(n),!0).forEach(function(r){m4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m4(e,t,n){return(t=p4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p4(e){var t=g4(e,"string");return typeof t=="symbol"?t:t+""}function g4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v4(e,t){if(e==null)return{};var n,r,i=y4(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var gN={symbolCircle:Cv,symbolCross:$3,symbolDiamond:F3,symbolSquare:U3,symbolStar:V3,symbolTriangle:K3,symbolWye:G3},x4=Math.PI/180,b4=e=>{var t="symbol".concat($l(e));return gN[t]||Cv},_4=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*x4;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},w4=(e,t)=>{gN["symbol".concat($l(e))]=t},Ev=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=v4(e,h4),a=Ub(Ub({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var g=b4(l),x=Y3().type(g).size(_4(n,r,l));return x()},{className:d,cx:m,cy:h}=a,f=Ot(a,!0);return m===+m&&h===+h&&n===+n?b.createElement("path",Rp({},f,{className:$e("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(h,")"),d:u()})):null};Ev.registerSymbol=w4;function zp(){return zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zp.apply(null,arguments)}function Hb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function j4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hb(Object(n),!0).forEach(function(r){Ov(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ov(e,t,n){return(t=N4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N4(e){var t=S4(e,"string");return typeof t=="symbol"?t:t+""}function S4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ln=32;class Tv extends b.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Ln/2,a=Ln/6,l=Ln/3,u=t.inactive?r:t.color,d=n??t.type;if(d==="none")return null;if(d==="plainline")return b.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Ln,y2:i,className:"recharts-legend-icon"});if(d==="line")return b.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Ln,"M").concat(2*l,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(d==="rect")return b.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Ln/8,"h").concat(Ln,"v").concat(Ln*3/4,"h").concat(-Ln,"z"),className:"recharts-legend-icon"});if(b.isValidElement(t.legendIcon)){var m=j4({},t);return delete m.legendIcon,b.cloneElement(t.legendIcon,m)}return b.createElement(Ev,{fill:u,cx:i,cy:i,size:Ln,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:l}=this.props,u={x:0,y:0,width:Ln,height:Ln},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,f)=>{var g=h.formatter||i,x=$e({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:h.inactive});if(h.type==="none")return null;var j=h.inactive?a:h.color,w=g?g(h.value,h,f):h.value;return b.createElement("li",zp({className:x,style:d,key:"legend-item-".concat(f)},ff(this.props,h,f)),b.createElement(Sv,{width:n,height:n,viewBox:u,style:m,"aria-label":"".concat(w," legend icon")},this.renderIcon(h,l)),b.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},w))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return b.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Ov(Tv,"displayName","Legend");Ov(Tv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var vN={},yN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let a=0;a<n.length;a++){const l=n[a],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(yN);var Av={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Av);var xN={},gf={},bN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(bN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bN;function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(gf);var _N={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(_N);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gf,n=_N;function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(xN);var wN={},jN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jd;function n(r){return function(i){return t.get(i,r)}}e.property=n})(jN);var NN={},lm={},cm={},Mv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Mv);var Lv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Lv);var Dv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Dv);var Zb;function P4(){return Zb||(Zb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iv(),n=Mv,r=Lv,i=Dv;function a(f,g,x){return typeof x!="function"?t.isMatch(f,g):l(f,g,function j(w,S,_,N,v,k){const O=x(w,S,_,N,v,k);return O!==void 0?!!O:l(w,S,j,k)},new Map)}function l(f,g,x,j){if(g===f)return!0;switch(typeof g){case"object":return u(f,g,x,j);case"function":return Object.keys(g).length>0?l(f,{...g},x,j):i.eq(f,g);default:return n.isObject(f)?typeof g=="string"?g==="":!0:i.eq(f,g)}}function u(f,g,x,j){if(g==null)return!0;if(Array.isArray(g))return m(f,g,x,j);if(g instanceof Map)return d(f,g,x,j);if(g instanceof Set)return h(f,g,x,j);const w=Object.keys(g);if(f==null)return w.length===0;if(w.length===0)return!0;if(j&&j.has(g))return j.get(g)===f;j&&j.set(g,f);try{for(let S=0;S<w.length;S++){const _=w[S];if(!r.isPrimitive(f)&&!(_ in f)||g[_]===void 0&&f[_]!==void 0||g[_]===null&&f[_]!==null||!x(f[_],g[_],_,f,g,j))return!1}return!0}finally{j&&j.delete(g)}}function d(f,g,x,j){if(g.size===0)return!0;if(!(f instanceof Map))return!1;for(const[w,S]of g.entries()){const _=f.get(w);if(x(_,S,w,f,g,j)===!1)return!1}return!0}function m(f,g,x,j){if(g.length===0)return!0;if(!Array.isArray(f))return!1;const w=new Set;for(let S=0;S<g.length;S++){const _=g[S];let N=!1;for(let v=0;v<f.length;v++){if(w.has(v))continue;const k=f[v];let O=!1;if(x(k,_,S,f,g,j)&&(O=!0),O){w.add(v),N=!0;break}}if(!N)return!1}return!0}function h(f,g,x,j){return g.size===0?!0:f instanceof Set?m([...f],[...g],x,j):!1}e.isMatchWith=a,e.isSetMatch=h}(cm)),cm}var Wb;function Iv(){return Wb||(Wb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P4();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n}(lm)),lm}var SN={},Rv={},PN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(PN);var zv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(zv);var $v={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",h="[object Array]",f="[object Function]",g="[object ArrayBuffer]",x="[object Object]",j="[object Error]",w="[object DataView]",S="[object Uint8Array]",_="[object Uint8ClampedArray]",N="[object Uint16Array]",v="[object Uint32Array]",k="[object BigUint64Array]",O="[object Int8Array]",A="[object Int16Array]",E="[object Int32Array]",I="[object BigInt64Array]",$="[object Float32Array]",D="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=g,e.arrayTag=h,e.bigInt64ArrayTag=I,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=w,e.dateTag=u,e.errorTag=j,e.float32ArrayTag=$,e.float64ArrayTag=D,e.functionTag=f,e.int16ArrayTag=A,e.int32ArrayTag=E,e.int8ArrayTag=O,e.mapTag=d,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=N,e.uint32ArrayTag=v,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=_})($v);var kN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(kN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PN,n=zv,r=$v,i=Lv,a=kN;function l(h,f){return u(h,void 0,h,new Map,f)}function u(h,f,g,x=new Map,j=void 0){const w=j==null?void 0:j(h,f,g,x);if(w!==void 0)return w;if(i.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const S=new Array(h.length);x.set(h,S);for(let _=0;_<h.length;_++)S[_]=u(h[_],_,g,x,j);return Object.hasOwn(h,"index")&&(S.index=h.index),Object.hasOwn(h,"input")&&(S.input=h.input),S}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const S=new RegExp(h.source,h.flags);return S.lastIndex=h.lastIndex,S}if(h instanceof Map){const S=new Map;x.set(h,S);for(const[_,N]of h)S.set(_,u(N,_,g,x,j));return S}if(h instanceof Set){const S=new Set;x.set(h,S);for(const _ of h)S.add(u(_,void 0,g,x,j));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const S=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,S);for(let _=0;_<h.length;_++)S[_]=u(h[_],_,g,x,j);return S}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const S=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,S),d(S,h,g,x,j),S}if(typeof File<"u"&&h instanceof File){const S=new File([h],h.name,{type:h.type});return x.set(h,S),d(S,h,g,x,j),S}if(h instanceof Blob){const S=new Blob([h],{type:h.type});return x.set(h,S),d(S,h,g,x,j),S}if(h instanceof Error){const S=new h.constructor;return x.set(h,S),S.message=h.message,S.name=h.name,S.stack=h.stack,S.cause=h.cause,d(S,h,g,x,j),S}if(typeof h=="object"&&m(h)){const S=Object.create(Object.getPrototypeOf(h));return x.set(h,S),d(S,h,g,x,j),S}return h}function d(h,f,g=h,x,j){const w=[...Object.keys(f),...t.getSymbols(f)];for(let S=0;S<w.length;S++){const _=w[S],N=Object.getOwnPropertyDescriptor(h,_);(N==null||N.writable)&&(h[_]=u(f[_],_,g,x,j))}}function m(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Rv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rv;function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(SN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iv(),n=SN;function r(i){return i=n.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=r})(NN);var CN={},EN={},ON={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rv,n=$v;function r(i,a){return t.cloneDeepWith(i,(l,u,d,m)=>{const h=a==null?void 0:a(l,u,d,m);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(f,i),f}case n.argumentsTag:{const f={};return t.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}e.cloneDeepWith=r})(ON);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ON;function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(EN);var TN={},Bv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Bv);var AN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zv;function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(AN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bv,n=Bv,r=AN,i=ef;function a(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=i.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let h=0;h<d.length;h++){const f=d[h];if((m==null||!Object.hasOwn(m,f))&&!((Array.isArray(m)||r.isArguments(m))&&n.isIndex(f)&&f<m.length))return!1;m=m[f]}return!0}e.has=a})(TN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iv(),n=_v,r=EN,i=Jd,a=TN;function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return d=r.cloneDeep(d),function(m){const h=i.get(m,u);return h===void 0?a.has(m,u):d===void 0?h===void 0:t.isMatch(h,d)}}e.matchesProperty=l})(CN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Av,n=jN,r=NN,i=CN;function a(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=a})(wN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yN,n=Av,r=xN,i=wN;function a(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=a})(vN);var k4=vN.uniqBy;const Vb=Tr(k4);function MN(e,t,n){return t===!0?Vb(e,n):typeof t=="function"?Vb(e,t):e}var LN={exports:{}},DN={},IN={exports:{}},RN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=b;function C4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var E4=typeof Object.is=="function"?Object.is:C4,O4=Ms.useState,T4=Ms.useEffect,A4=Ms.useLayoutEffect,M4=Ms.useDebugValue;function L4(e,t){var n=t(),r=O4({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return A4(function(){i.value=n,i.getSnapshot=t,um(i)&&a({inst:i})},[e,n,t]),T4(function(){return um(i)&&a({inst:i}),e(function(){um(i)&&a({inst:i})})},[e]),M4(n),n}function um(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!E4(e,n)}catch{return!0}}function D4(e,t){return t()}var I4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?D4:L4;RN.useSyncExternalStore=Ms.useSyncExternalStore!==void 0?Ms.useSyncExternalStore:I4;IN.exports=RN;var R4=IN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=b,z4=R4;function $4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var B4=typeof Object.is=="function"?Object.is:$4,F4=z4.useSyncExternalStore,U4=vf.useRef,H4=vf.useEffect,Z4=vf.useMemo,W4=vf.useDebugValue;DN.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=U4(null);if(a.current===null){var l={hasValue:!1,value:null};a.current=l}else l=a.current;a=Z4(function(){function d(x){if(!m){if(m=!0,h=x,x=r(x),i!==void 0&&l.hasValue){var j=l.value;if(i(j,x))return f=j}return f=x}if(j=f,B4(h,x))return j;var w=r(x);return i!==void 0&&i(j,w)?(h=x,j):(h=x,f=w)}var m=!1,h,f,g=n===void 0?null:n;return[function(){return d(t())},g===null?void 0:function(){return d(g())}]},[t,n,r,i]);var u=F4(e,a[0],a[1]);return H4(function(){l.hasValue=!0,l.value=u},[u]),W4(u),u};LN.exports=DN;var V4=LN.exports,Fv=b.createContext(null),K4=e=>e,at=()=>{var e=b.useContext(Fv);return e?e.store.dispatch:K4},hu=()=>{},q4=()=>hu,G4=(e,t)=>e===t;function ue(e){var t=b.useContext(Fv);return V4.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:q4,t?t.store.getState:hu,t?t.store.getState:hu,t?e:hu,G4)}function Y4(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function X4(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Q4(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Kb=e=>Array.isArray(e)?e:[e];function J4(e){const t=Array.isArray(e[0])?e[0]:e;return Q4(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function eL(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var tL=class{constructor(e){this.value=e}deref(){return this.value}},nL=typeof WeakRef<"u"?WeakRef:tL,rL=0,qb=1;function zc(){return{s:rL,v:void 0,o:null,p:null}}function zN(e,t={}){let n=zc();const{resultEqualityCheck:r}=t;let i,a=0;function l(){var f;let u=n;const{length:d}=arguments;for(let g=0,x=d;g<x;g++){const j=arguments[g];if(typeof j=="function"||typeof j=="object"&&j!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const S=w.get(j);S===void 0?(u=zc(),w.set(j,u)):u=S}else{let w=u.p;w===null&&(u.p=w=new Map);const S=w.get(j);S===void 0?(u=zc(),w.set(j,u)):u=S}}const m=u;let h;if(u.s===qb)h=u.v;else if(h=e.apply(null,arguments),a++,r){const g=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;g!=null&&r(g,h)&&(h=g,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new nL(h):h}return m.s=qb,m.v=h,h}return l.clearCache=()=>{n=zc(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function iL(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let a=0,l=0,u,d={},m=i.pop();typeof m=="object"&&(d=m,m=i.pop()),Y4(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const h={...n,...d},{memoize:f,memoizeOptions:g=[],argsMemoize:x=zN,argsMemoizeOptions:j=[],devModeChecks:w={}}=h,S=Kb(g),_=Kb(j),N=J4(i),v=f(function(){return a++,m.apply(null,arguments)},...S),k=x(function(){l++;const A=eL(N,arguments);return u=v.apply(null,A),u},..._);return Object.assign(k,{resultFunc:m,memoizedResultFunc:v,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var K=iL(zN),aL=Object.assign((e,t=K)=>{X4(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(a=>e[a]);return t(r,(...a)=>a.reduce((l,u,d)=>(l[n[d]]=u,l),{}))},{withTypes:()=>aL}),$N={},BN={},FN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?u-l:l-u}return 0};e.compareValues=n})(FN);var UN={},Uv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Uv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uv,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||l!=null&&Object.hasOwn(l,a)}e.isKey=i})(UN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FN,n=UN,r=ef;function i(a,l,u,d){if(a==null)return[];u=d?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,j)=>{let w=x;for(let S=0;S<j.length&&w!=null;++S)w=w[j[S]];return w},h=(x,j)=>j==null||x==null?j:typeof x=="object"&&"key"in x?Object.hasOwn(j,x.key)?j[x.key]:m(j,x.path):typeof x=="function"?x(j):Array.isArray(x)?m(j,x):typeof j=="object"?j[x]:j,f=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return a.map(x=>({original:x,criteria:f.map(j=>h(j,x))})).slice().sort((x,j)=>{for(let w=0;w<f.length;w++){const S=t.compareValues(x.criteria[w],j.criteria[w],u[w]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=i})(BN);var HN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],a=Math.floor(r),l=(u,d)=>{for(let m=0;m<u.length;m++){const h=u[m];Array.isArray(h)&&d<a?l(h,d+1):i.push(h)}};return l(n,0),i}e.flatten=t})(HN);var Hv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bv,n=gf,r=Mv,i=Dv;function a(l,u,d){return r.isObject(d)&&(typeof u=="number"&&n.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?i.eq(d[u],l):!1}e.isIterateeCall=a})(Hv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BN,n=HN,r=Hv;function i(a,...l){const u=l.length;return u>1&&r.isIterateeCall(a,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(a,n.flatten(l),["asc"])}e.sortBy=i})($N);var sL=$N.sortBy;const yf=Tr(sL);var ZN=e=>e.legend.settings,oL=e=>e.legend.size,lL=e=>e.legend.payload,cL=K([lL,ZN],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?yf(r,n):r});function uL(){return ue(cL)}var $c=1;function WN(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=b.useState({height:0,left:0,top:0,width:0}),r=b.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-t.height)>$c||Math.abs(l.left-t.left)>$c||Math.abs(l.top-t.top)>$c||Math.abs(l.width-t.width)>$c)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function wt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dL=typeof Symbol=="function"&&Symbol.observable||"@@observable",Gb=dL,dm=()=>Math.random().toString(36).substring(7).split("").join("."),fL={INIT:`@@redux/INIT${dm()}`,REPLACE:`@@redux/REPLACE${dm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${dm()}`},Qu=fL;function Zv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function VN(e,t,n){if(typeof e!="function")throw new Error(wt(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(wt(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(wt(1));return n(VN)(e,t)}let r=e,i=t,a=new Map,l=a,u=0,d=!1;function m(){l===a&&(l=new Map,a.forEach((S,_)=>{l.set(_,S)}))}function h(){if(d)throw new Error(wt(3));return i}function f(S){if(typeof S!="function")throw new Error(wt(4));if(d)throw new Error(wt(5));let _=!0;m();const N=u++;return l.set(N,S),function(){if(_){if(d)throw new Error(wt(6));_=!1,m(),l.delete(N),a=null}}}function g(S){if(!Zv(S))throw new Error(wt(7));if(typeof S.type>"u")throw new Error(wt(8));if(typeof S.type!="string")throw new Error(wt(17));if(d)throw new Error(wt(9));try{d=!0,i=r(i,S)}finally{d=!1}return(a=l).forEach(N=>{N()}),S}function x(S){if(typeof S!="function")throw new Error(wt(10));r=S,g({type:Qu.REPLACE})}function j(){const S=f;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(wt(11));function N(){const k=_;k.next&&k.next(h())}return N(),{unsubscribe:S(N)}},[Gb](){return this}}}return g({type:Qu.INIT}),{dispatch:g,subscribe:f,getState:h,replaceReducer:x,[Gb]:j}}function hL(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Qu.INIT})>"u")throw new Error(wt(12));if(typeof n(void 0,{type:Qu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(wt(13))})}function KN(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const l=t[a];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{hL(n)}catch(a){i=a}return function(l={},u){if(i)throw i;let d=!1;const m={};for(let h=0;h<r.length;h++){const f=r[h],g=n[f],x=l[f],j=g(x,u);if(typeof j>"u")throw u&&u.type,new Error(wt(14));m[f]=j,d=d||j!==x}return d=d||r.length!==Object.keys(l).length,d?m:l}}function Ju(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function mL(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(wt(15))};const l={getState:i.getState,dispatch:(d,...m)=>a(d,...m)},u=e.map(d=>d(l));return a=Ju(...u)(i.dispatch),{...i,dispatch:a}}}function qN(e){return Zv(e)&&"type"in e&&typeof e.type=="string"}var GN=Symbol.for("immer-nothing"),Yb=Symbol.for("immer-draftable"),Nn=Symbol.for("immer-state");function cr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ls=Object.getPrototypeOf;function Ca(e){return!!e&&!!e[Nn]}function ei(e){var t;return e?YN(e)||Array.isArray(e)||!!e[Yb]||!!((t=e.constructor)!=null&&t[Yb])||Bl(e)||bf(e):!1}var pL=Object.prototype.constructor.toString();function YN(e){if(!e||typeof e!="object")return!1;const t=Ls(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===pL}function ed(e,t){xf(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function xf(e){const t=e[Nn];return t?t.type_:Array.isArray(e)?1:Bl(e)?2:bf(e)?3:0}function $p(e,t){return xf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XN(e,t,n){const r=xf(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function gL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Bl(e){return e instanceof Map}function bf(e){return e instanceof Set}function ia(e){return e.copy_||e.base_}function Bp(e,t){if(Bl(e))return new Map(e);if(bf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=YN(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Nn];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Ls(e),r)}else{const r=Ls(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Wv(e,t=!1){return _f(e)||Ca(e)||!ei(e)||(xf(e)>1&&Object.defineProperties(e,{set:{value:Bc},add:{value:Bc},clear:{value:Bc},delete:{value:Bc}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Wv(n,!0))),e}function Bc(){cr(2)}function _f(e){return Object.isFrozen(e)}var vL={};function Ea(e){const t=vL[e];return t||cr(0,e),t}var _l;function QN(){return _l}function yL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Xb(e,t){t&&(Ea("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Fp(e){Up(e),e.drafts_.forEach(xL),e.drafts_=null}function Up(e){e===_l&&(_l=e.parent_)}function Qb(e){return _l=yL(_l,e)}function xL(e){const t=e[Nn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Jb(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Nn].modified_&&(Fp(t),cr(4)),ei(e)&&(e=td(t,e),t.parent_||nd(t,e)),t.patches_&&Ea("Patches").generateReplacementPatches_(n[Nn].base_,e,t.patches_,t.inversePatches_)):e=td(t,n,[]),Fp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==GN?e:void 0}function td(e,t,n){if(_f(t))return t;const r=t[Nn];if(!r)return ed(t,(i,a)=>e_(e,r,t,i,a,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return nd(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,l=!1;r.type_===3&&(a=new Set(i),i.clear(),l=!0),ed(a,(u,d)=>e_(e,r,i,u,d,n,l)),nd(e,i,!1),n&&e.patches_&&Ea("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function e_(e,t,n,r,i,a,l){if(Ca(i)){const u=a&&t&&t.type_!==3&&!$p(t.assigned_,r)?a.concat(r):void 0,d=td(e,i,u);if(XN(n,r,d),Ca(d))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(ei(i)&&!_f(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;td(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Bl(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&nd(e,i)}}function nd(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Wv(t,n)}function bL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:QN(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=Vv;n&&(i=[r],a=wl);const{revoke:l,proxy:u}=Proxy.revocable(i,a);return r.draft_=u,r.revoke_=l,u}var Vv={get(e,t){if(t===Nn)return e;const n=ia(e);if(!$p(n,t))return _L(e,n,t);const r=n[t];return e.finalized_||!ei(r)?r:r===fm(e.base_,t)?(hm(e),e.copy_[t]=Zp(r,e)):r},has(e,t){return t in ia(e)},ownKeys(e){return Reflect.ownKeys(ia(e))},set(e,t,n){const r=JN(ia(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=fm(ia(e),t),a=i==null?void 0:i[Nn];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(gL(n,i)&&(n!==void 0||$p(e.base_,t)))return!0;hm(e),Hp(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return fm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,hm(e),Hp(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ia(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){cr(11)},getPrototypeOf(e){return Ls(e.base_)},setPrototypeOf(){cr(12)}},wl={};ed(Vv,(e,t)=>{wl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});wl.deleteProperty=function(e,t){return wl.set.call(this,e,t,void 0)};wl.set=function(e,t,n){return Vv.set.call(this,e[0],t,n,e[0])};function fm(e,t){const n=e[Nn];return(n?ia(n):e)[t]}function _L(e,t,n){var i;const r=JN(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function JN(e,t){if(!(t in e))return;let n=Ls(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Ls(n)}}function Hp(e){e.modified_||(e.modified_=!0,e.parent_&&Hp(e.parent_))}function hm(e){e.copy_||(e.copy_=Bp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var wL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const l=this;return function(d=a,...m){return l.produce(d,h=>n.call(this,h,...m))}}typeof n!="function"&&cr(6),r!==void 0&&typeof r!="function"&&cr(7);let i;if(ei(t)){const a=Qb(this),l=Zp(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?Fp(a):Up(a)}return Xb(a,r),Jb(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===GN&&(i=void 0),this.autoFreeze_&&Wv(i,!0),r){const a=[],l=[];Ea("Patches").generateReplacementPatches_(t,i,a,l),r(a,l)}return i}else cr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ei(e)||cr(8),Ca(e)&&(e=qr(e));const t=Qb(this),n=Zp(e,void 0);return n[Nn].isManual_=!0,Up(t),n}finishDraft(e,t){const n=e&&e[Nn];(!n||!n.isManual_)&&cr(9);const{scope_:r}=n;return Xb(r,t),Jb(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Ea("Patches").applyPatches_;return Ca(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Zp(e,t){const n=Bl(e)?Ea("MapSet").proxyMap_(e,t):bf(e)?Ea("MapSet").proxySet_(e,t):bL(e,t);return(t?t.scope_:QN()).drafts_.push(n),n}function qr(e){return Ca(e)||cr(10,e),eS(e)}function eS(e){if(!ei(e)||_f(e))return e;const t=e[Nn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Bp(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Bp(e,!0);return ed(n,(r,i)=>{XN(n,r,eS(i))}),t&&(t.finalized_=!1),n}var jL=new wL,tS=jL.produce;function nS(e){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,e):i(a)}var NL=nS(),SL=nS,PL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ju:Ju.apply(null,arguments)};function qn(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(_n(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>qN(r)&&r.type===e,n}var rS=class Uo extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Uo.prototype)}static get[Symbol.species](){return Uo}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Uo(...t[0].concat(this)):new Uo(...t.concat(this))}};function t_(e){return ei(e)?tS(e,()=>{}):e}function Fc(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function kL(e){return typeof e=="boolean"}var CL=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let l=new rS;return n&&(kL(n)?l.push(NL):l.push(SL(n.extraArgument))),l},EL="RTK_autoBatch",n_=e=>t=>{setTimeout(t,e)},OL=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,a=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:n_(10):e.type==="callback"?e.queueNotification:n_(e.timeout),m=()=>{l=!1,a&&(a=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const f=()=>i&&h(),g=r.subscribe(f);return u.add(h),()=>{g(),u.delete(h)}},dispatch(h){var f;try{return i=!((f=h==null?void 0:h.meta)!=null&&f[EL]),a=!i,a&&(l||(l=!0,d(m))),r.dispatch(h)}finally{i=!0}}})},TL=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new rS(e);return r&&i.push(OL(typeof r=="object"?r:void 0)),i};function AL(e){const t=CL(),{reducer:n=void 0,middleware:r,devTools:i=!0,duplicateMiddlewareCheck:a=!0,preloadedState:l=void 0,enhancers:u=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(Zv(n))d=KN(n);else throw new Error(_n(1));let m;typeof r=="function"?m=r(t):m=t();let h=Ju;i&&(h=PL({trace:!1,...typeof i=="object"&&i}));const f=mL(...m),g=TL(f);let x=typeof u=="function"?u(g):g();const j=h(...x);return VN(d,l,j)}function iS(e){const t={},n=[];let r;const i={addCase(a,l){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(_n(28));if(u in t)throw new Error(_n(29));return t[u]=l,i},addAsyncThunk(a,l){return l.pending&&(t[a.pending.type]=l.pending),l.rejected&&(t[a.rejected.type]=l.rejected),l.fulfilled&&(t[a.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:a.settled,reducer:l.settled}),i},addMatcher(a,l){return n.push({matcher:a,reducer:l}),i},addDefaultCase(a){return r=a,i}};return e(i),[t,n,r]}function ML(e){return typeof e=="function"}function LL(e,t){let[n,r,i]=iS(t),a;if(ML(e))a=()=>t_(e());else{const u=t_(e);a=()=>u}function l(u=a(),d){let m=[n[d.type],...r.filter(({matcher:h})=>h(d)).map(({reducer:h})=>h)];return m.filter(h=>!!h).length===0&&(m=[i]),m.reduce((h,f)=>{if(f)if(Ca(h)){const x=f(h,d);return x===void 0?h:x}else{if(ei(h))return tS(h,g=>f(g,d));{const g=f(h,d);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},u)}return l.getInitialState=a,l}var DL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",IL=(e=21)=>{let t="",n=e;for(;n--;)t+=DL[Math.random()*64|0];return t},RL=Symbol.for("rtk-slice-createasyncthunk");function zL(e,t){return`${e}/${t}`}function $L({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[RL];return function(i){const{name:a,reducerPath:l=a}=i;if(!a)throw new Error(_n(11));typeof process<"u";const u=(typeof i.reducers=="function"?i.reducers(FL()):i.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(k,O){const A=typeof k=="string"?k:k.type;if(!A)throw new Error(_n(12));if(A in m.sliceCaseReducersByType)throw new Error(_n(13));return m.sliceCaseReducersByType[A]=O,h},addMatcher(k,O){return m.sliceMatchers.push({matcher:k,reducer:O}),h},exposeAction(k,O){return m.actionCreators[k]=O,h},exposeCaseReducer(k,O){return m.sliceCaseReducersByName[k]=O,h}};d.forEach(k=>{const O=u[k],A={reducerName:k,type:zL(a,k),createNotation:typeof i.reducers=="function"};HL(O)?WL(A,O,h,t):UL(A,O,h)});function f(){const[k={},O=[],A=void 0]=typeof i.extraReducers=="function"?iS(i.extraReducers):[i.extraReducers],E={...k,...m.sliceCaseReducersByType};return LL(i.initialState,I=>{for(let $ in E)I.addCase($,E[$]);for(let $ of m.sliceMatchers)I.addMatcher($.matcher,$.reducer);for(let $ of O)I.addMatcher($.matcher,$.reducer);A&&I.addDefaultCase(A)})}const g=k=>k,x=new Map,j=new WeakMap;let w;function S(k,O){return w||(w=f()),w(k,O)}function _(){return w||(w=f()),w.getInitialState()}function N(k,O=!1){function A(I){let $=I[k];return typeof $>"u"&&O&&($=Fc(j,A,_)),$}function E(I=g){const $=Fc(x,O,()=>new WeakMap);return Fc($,I,()=>{const D={};for(const[M,z]of Object.entries(i.selectors??{}))D[M]=BL(z,I,()=>Fc(j,I,_),O);return D})}return{reducerPath:k,getSelectors:E,get selectors(){return E(A)},selectSlice:A}}const v={name:a,reducer:S,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:_,...N(l),injectInto(k,{reducerPath:O,...A}={}){const E=O??l;return k.inject({reducerPath:E,reducer:S},A),{...v,...N(E,!0)}}};return v}}function BL(e,t,n,r){function i(a,...l){let u=t(a);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var Cn=$L();function FL(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function UL({type:e,reducerName:t,createNotation:n},r,i){let a,l;if("reducer"in r){if(n&&!ZL(r))throw new Error(_n(17));a=r.reducer,l=r.prepare}else a=r;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,l?qn(e,l):qn(e))}function HL(e){return e._reducerDefinitionType==="asyncThunk"}function ZL(e){return e._reducerDefinitionType==="reducerWithPrepare"}function WL({type:e,reducerName:t},n,r,i){if(!i)throw new Error(_n(18));const{payloadCreator:a,fulfilled:l,pending:u,rejected:d,settled:m,options:h}=n,f=i(e,a,h);r.exposeAction(t,f),l&&r.addCase(f.fulfilled,l),u&&r.addCase(f.pending,u),d&&r.addCase(f.rejected,d),m&&r.addMatcher(f.settled,m),r.exposeCaseReducer(t,{fulfilled:l||Uc,pending:u||Uc,rejected:d||Uc,settled:m||Uc})}function Uc(){}var VL="task",aS="listener",sS="completed",Kv="cancelled",KL=`task-${Kv}`,qL=`task-${sS}`,Wp=`${aS}-${Kv}`,GL=`${aS}-${sS}`,wf=class{constructor(e){Eh(this,"name","TaskAbortError");Eh(this,"message");this.code=e,this.message=`${VL} ${Kv} (reason: ${e})`}},qv=(e,t)=>{if(typeof e!="function")throw new TypeError(_n(32))},rd=()=>{},oS=(e,t=rd)=>(e.catch(t),e),lS=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ya=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},xa=e=>{if(e.aborted){const{reason:t}=e;throw new wf(t)}};function cS(e,t){let n=rd;return new Promise((r,i)=>{const a=()=>i(new wf(e.reason));if(e.aborted){a();return}n=lS(e,a),t.finally(()=>n()).then(r,i)}).finally(()=>{n=rd})}var YL=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof wf?"cancelled":"rejected",error:n}}finally{t==null||t()}},id=e=>t=>oS(cS(e,t).then(n=>(xa(e),n))),uS=e=>{const t=id(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:xs}=Object,r_={},jf="listenerMiddleware",XL=(e,t)=>{const n=r=>lS(e,()=>ya(r,e.reason));return(r,i)=>{qv(r);const a=new AbortController;n(a);const l=YL(async()=>{xa(e),xa(a.signal);const u=await r({pause:id(a.signal),delay:uS(a.signal),signal:a.signal});return xa(a.signal),u},()=>ya(a,qL));return i!=null&&i.autoJoin&&t.push(l.catch(rd)),{result:id(e)(l),cancel(){ya(a,KL)}}}},QL=(e,t)=>{const n=async(r,i)=>{xa(t);let a=()=>{};const u=[new Promise((d,m)=>{let h=e({predicate:r,effect:(f,g)=>{g.unsubscribe(),d([f,g.getState(),g.getOriginalState()])}});a=()=>{h(),m()}})];i!=null&&u.push(new Promise(d=>setTimeout(d,i,null)));try{const d=await cS(t,Promise.race(u));return xa(t),d}finally{a()}};return(r,i)=>oS(n(r,i))},dS=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=qn(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(_n(21));return qv(a),{predicate:i,type:t,effect:a}},fS=xs(e=>{const{type:t,predicate:n,effect:r}=dS(e);return{id:IL(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(_n(22))}}},{withTypes:()=>fS}),i_=(e,t)=>{const{type:n,effect:r,predicate:i}=dS(t);return Array.from(e.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},Vp=e=>{e.pending.forEach(t=>{ya(t,Wp)})},JL=e=>()=>{e.forEach(Vp),e.clear()},a_=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},hS=xs(qn(`${jf}/add`),{withTypes:()=>hS}),eD=qn(`${jf}/removeAll`),mS=xs(qn(`${jf}/remove`),{withTypes:()=>mS}),tD=(...e)=>{console.error(`${jf}/error`,...e)},Fl=(e={})=>{const t=new Map,{extra:n,onError:r=tD}=e;qv(r);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),f=>{h.unsubscribe(),f!=null&&f.cancelActive&&Vp(h)}),a=h=>{const f=i_(t,h)??fS(h);return i(f)};xs(a,{withTypes:()=>a});const l=h=>{const f=i_(t,h);return f&&(f.unsubscribe(),h.cancelActive&&Vp(f)),!!f};xs(l,{withTypes:()=>l});const u=async(h,f,g,x)=>{const j=new AbortController,w=QL(a,j.signal),S=[];try{h.pending.add(j),await Promise.resolve(h.effect(f,xs({},g,{getOriginalState:x,condition:(_,N)=>w(_,N).then(Boolean),take:w,delay:uS(j.signal),pause:id(j.signal),extra:n,signal:j.signal,fork:XL(j.signal,S),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((_,N,v)=>{_!==j&&(ya(_,Wp),v.delete(_))})},cancel:()=>{ya(j,Wp),h.pending.delete(j)},throwIfCancelled:()=>{xa(j.signal)}})))}catch(_){_ instanceof wf||a_(r,_,{raisedBy:"effect"})}finally{await Promise.all(S),ya(j,GL),h.pending.delete(j)}},d=JL(t);return{middleware:h=>f=>g=>{if(!qN(g))return f(g);if(hS.match(g))return a(g.payload);if(eD.match(g)){d();return}if(mS.match(g))return l(g.payload);let x=h.getState();const j=()=>{if(x===r_)throw new Error(_n(23));return x};let w;try{if(w=f(g),t.size>0){const S=h.getState(),_=Array.from(t.values());for(const N of _){let v=!1;try{v=N.predicate(g,S,x)}catch(k){v=!1,a_(r,k,{raisedBy:"predicate"})}v&&u(N,g,h,j)}}}finally{x=r_}return w},startListening:a,stopListening:l,clearListeners:d}};function _n(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nD={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},pS=Cn({name:"chartLayout",initialState:nD,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,a;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:rD,setLayout:iD,setChartSize:aD,setScale:sD}=pS.actions,oD=pS.reducer;function s_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function o_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s_(Object(n),!0).forEach(function(r){lD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lD(e,t,n){return(t=cD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cD(e){var t=uD(e,"string");return typeof t=="symbol"?t:t+""}function uD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ad=Math.PI/180,dD=e=>e*180/Math.PI,Pt=(e,t,n,r)=>({x:e+Math.cos(-ad*r)*n,y:t+Math.sin(-ad*r)*n}),fD=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},hD=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)},mD=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,l=hD({x:n,y:r},{x:i,y:a});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,d=Math.acos(u);return r>a&&(d=2*Math.PI-d),{radius:l,angle:dD(d),angleInRadian:d}},pD=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-a*360,endAngle:n-a*360}},gD=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360),l=Math.min(i,a);return e+l*360},vD=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:a}=mD({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:d,endAngle:m}=pD(t),h=a,f;if(d<=m){for(;h>m;)h-=360;for(;h<d;)h+=360;f=h>=d&&h<=m}else{for(;h>d;)h-=360;for(;h<m;)h+=360;f=h>=m&&h<=d}return f?o_(o_({},t),{},{radius:i,angle:gD(h,t)}):null};function gS(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function l_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l_(Object(n),!0).forEach(function(r){yD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yD(e,t,n){return(t=xD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xD(e){var t=bD(e,"string");return typeof t=="symbol"?t:t+""}function bD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gt(e,t,n){return vt(e)||vt(t)?n:Er(t)?Ts(e,t,n):typeof t=="function"?t(e):n}var _D=(e,t,n,r,i)=>{var a,l=-1,u=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?n[d-1].coordinate:n[u-1].coordinate,h=n[d].coordinate,f=d>=u-1?n[0].coordinate:n[d+1].coordinate,g=void 0;if(an(h-m)!==an(f-h)){var x=[];if(an(f-h)===an(i[1]-i[0])){g=f;var j=h+i[1]-i[0];x[0]=Math.min(j,(j+m)/2),x[1]=Math.max(j,(j+m)/2)}else{g=m;var w=f+i[1]-i[0];x[0]=Math.min(h,(w+h)/2),x[1]=Math.max(h,(w+h)/2)}var S=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=n[d]);break}}else{var _=Math.min(m,f),N=Math.max(m,f);if(e>(_+h)/2&&e<=(N+h)/2){({index:l}=n[d]);break}}}else if(t){for(var v=0;v<u;v++)if(v===0&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v>0&&v<u-1&&e>(t[v].coordinate+t[v-1].coordinate)/2&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v===u-1&&e>(t[v].coordinate+t[v-1].coordinate)/2){({index:l}=t[v]);break}}return l},wD=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&a!=="center"&&de(e[a]))return $n($n({},e),{},{[a]:e[a]+(r||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&l!=="middle"&&de(e[l]))return $n($n({},e),{},{[l]:e[l]+(i||0)})}return e},Da=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",vS=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,a,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(a=!0),u.coordinate));return i||l.push(t),a||l.push(n),l},yS=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:l,realScaleType:u,isCategorical:d,categoricalDomain:m,tickCount:h,ticks:f,niceTicks:g,axisType:x}=e;if(!l)return null;var j=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,w=i==="category"&&l.bandwidth?l.bandwidth()/j:0;if(w=x==="angleAxis"&&a&&a.length>=2?an(a[0]-a[1])*2*w:w,f||g){var S=(f||g||[]).map((_,N)=>{var v=r?r.indexOf(_):_;return{coordinate:l(v)+w,value:_,offset:w,index:N}});return S.filter(_=>!jn(_.coordinate))}return d&&m?m.map((_,N)=>({coordinate:l(_)+w,value:_,index:N,offset:w})):l.ticks&&!n&&h!=null?l.ticks(h).map((_,N)=>({coordinate:l(_)+w,value:_,offset:w,index:N})):l.domain().map((_,N)=>({coordinate:l(_)+w,value:r?r[_]:_,index:N,offset:w}))},c_=1e-4,jD=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-c_,a=Math.max(r[0],r[1])+c_,l=e(t[0]),u=e(t[n-1]);(l<i||l>a||u<i||u>a)&&e.domain([t[0],t[n-1]])}},ND=(e,t)=>{if(!t||t.length!==2||!de(t[0])||!de(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!de(e[0])||e[0]<n)&&(i[0]=n),(!de(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},SD=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,l=0;l<t;++l){var u=jn(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=a,e[l][n][1]=a+u,a=e[l][n][1])}},PD=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var l=jn(e[a][n][1])?e[a][n][0]:e[a][n][1];l>=0?(e[a][n][0]=i,e[a][n][1]=i+l,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},kD={sign:SD,expand:u4,none:As,silhouette:d4,wiggle:f4,positive:PD},CD=(e,t,n)=>{var r=kD[n],i=c4().keys(t).value((a,l)=>+Gt(a,l,0)).order(Ip).offset(r);return i(e)};function ED(e){return e==null?void 0:String(e)}var u_=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:a,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=Gt(a,t.dataKey,t.scale.domain()[l]);return vt(u)?null:t.scale(u)-i/2+r},OD=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},TD=e=>{var t=e.flat(2).filter(de);return[Math.min(...t),Math.max(...t)]},AD=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],MD=(e,t,n)=>{if(e!=null)return AD(Object.keys(e).reduce((r,i)=>{var a=e[i],{stackedData:l}=a,u=l.reduce((d,m)=>{var h=gS(m,t,n),f=TD(h);return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},d_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,f_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Gv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=yf(t,h=>h.coordinate),a=1/0,l=1,u=i.length;l<u;l++){var d=i[l],m=i[l-1];a=Math.min((d.coordinate||0)-(m.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function h_(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return $n($n({},t),{},{dataKey:n,payload:r,value:i,name:a})}function xS(e,t){if(e)return String(e);if(typeof t=="string")return t}function LD(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var a=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return a?{x:e,y:t}:null}return r?vD({x:e,y:t},r):null}var DD=(e,t,n,r)=>{var i=t.find(m=>m&&m.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var a=i.coordinate,{radius:l}=r;return $n($n($n({},r),Pt(r.cx,r.cy,l,a)),{},{angle:a,radius:l})}var u=i.coordinate,{angle:d}=r;return $n($n($n({},r),Pt(r.cx,r.cy,u,d)),{},{angle:d,radius:u})}return{x:0,y:0}},ID=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,si=e=>e.layout.width,oi=e=>e.layout.height,RD=e=>e.layout.scale,bS=e=>e.layout.margin,Nf=K(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Sf=K(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),zD="data-recharts-item-index",$D="data-recharts-item-data-key",Ul=60;function m_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m_(Object(n),!0).forEach(function(r){BD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BD(e,t,n){return(t=FD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FD(e){var t=UD(e,"string");return typeof t=="symbol"?t:t+""}function UD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HD=e=>e.brush.height;function ZD(e){var t=Sf(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Ul;return n+i}return n},0)}function WD(e){var t=Sf(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Ul;return n+i}return n},0)}function VD(e){var t=Nf(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function KD(e){var t=Nf(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var yt=K([si,oi,bS,HD,ZD,WD,VD,KD,ZN,oL],(e,t,n,r,i,a,l,u,d,m)=>{var h={left:(n.left||0)+i,right:(n.right||0)+a},f={top:(n.top||0)+l,bottom:(n.bottom||0)+u},g=Hc(Hc({},f),h),x=g.bottom;g.bottom+=r,g=wD(g,d,m);var j=e-g.left-g.right,w=t-g.top-g.bottom;return Hc(Hc({brushBottom:x},g),{},{width:Math.max(j,0),height:Math.max(w,0)})}),qD=K(yt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Yv=K(si,oi,(e,t)=>({x:0,y:0,width:e,height:t})),GD=b.createContext(null),Qn=()=>b.useContext(GD)!=null,Pf=e=>e.brush,kf=K([Pf,yt,bS],(e,t,n)=>({height:e.height,x:de(e.x)?e.x:t.left,y:de(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:de(e.width)?e.width:t.width})),Xv=()=>{var e,t=Qn(),n=ue(qD),r=ue(kf),i=(e=ue(Pf))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},YD={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},_S=()=>{var e;return(e=ue(yt))!==null&&e!==void 0?e:YD},Qv=()=>ue(si),Jv=()=>ue(oi),XD=()=>ue(e=>e.layout.margin),Oe=e=>e.layout.layoutType,e0=()=>ue(Oe),QD={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},wS=Cn({name:"legend",initialState:QD,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=qr(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:p_,setLegendSettings:JD,addLegendPayload:eI,removeLegendPayload:tI}=wS.actions,nI=wS.reducer,rI=["contextPayload"];function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kp.apply(null,arguments)}function g_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ds(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g_(Object(n),!0).forEach(function(r){t0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t0(e,t,n){return(t=iI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iI(e){var t=aI(e,"string");return typeof t=="symbol"?t:t+""}function aI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sI(e,t){if(e==null)return{};var n,r,i=oI(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function oI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function lI(e){return e.value}function cI(e){var{contextPayload:t}=e,n=sI(e,rI),r=MN(t,e.payloadUniqBy,lI),i=Ds(Ds({},n),{},{payload:r});return b.isValidElement(e.content)?b.cloneElement(e.content,i):typeof e.content=="function"?b.createElement(e.content,i):b.createElement(Tv,i)}function uI(e,t,n,r,i,a){var{layout:l,align:u,verticalAlign:d}=t,m,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?m={left:((r||0)-a.width)/2}:m=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?h={top:((i||0)-a.height)/2}:h=d==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Ds(Ds({},m),h)}function dI(e){var t=at();return b.useEffect(()=>{t(JD(e))},[t,e]),null}function fI(e){var t=at();return b.useEffect(()=>(t(p_(e)),()=>{t(p_({width:0,height:0}))}),[t,e]),null}function hI(e){var t=uL(),n=M3(),r=XD(),{width:i,height:a,wrapperStyle:l,portal:u}=e,[d,m]=WN([t]),h=Qv(),f=Jv();if(h==null||f==null)return null;var g=h-(r.left||0)-(r.right||0),x=Cf.getWidthOrHeight(e.layout,a,i,g),j=u?l:Ds(Ds({position:"absolute",width:(x==null?void 0:x.width)||i||"auto",height:(x==null?void 0:x.height)||a||"auto"},uI(l,e,r,h,f,d)),l),w=u??n;if(w==null)return null;var S=b.createElement("div",{className:"recharts-legend-wrapper",style:j,ref:m},b.createElement(dI,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),b.createElement(fI,{width:d.width,height:d.height}),b.createElement(cI,Kp({},e,x,{margin:r,chartWidth:h,chartHeight:f,contextPayload:t})));return Gd.createPortal(S,w)}class Cf extends b.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&de(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return b.createElement(hI,this.props)}}t0(Cf,"displayName","Legend");t0(Cf,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function qp(){return qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qp.apply(null,arguments)}function v_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v_(Object(n),!0).forEach(function(r){mI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mI(e,t,n){return(t=pI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pI(e){var t=gI(e,"string");return typeof t=="symbol"?t:t+""}function gI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vI(e){return Array.isArray(e)&&Er(e[0])&&Er(e[1])?e.join(" ~ "):e}var yI=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:h,labelFormatter:f,accessibilityLayer:g=!1}=e,x=()=>{if(a&&a.length){var O={padding:0,margin:0},A=(u?yf(a,u):a).map((E,I)=>{if(E.type==="none")return null;var $=E.formatter||l||vI,{value:D,name:M}=E,z=D,B=M;if($){var C=$(D,M,E,I,a);if(Array.isArray(C))[z,B]=C;else if(C!=null)z=C;else return null}var U=mm({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},r);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:U},Er(B)?b.createElement("span",{className:"recharts-tooltip-item-name"},B):null,Er(B)?b.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,b.createElement("span",{className:"recharts-tooltip-item-value"},z),b.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:O},A)}return null},j=mm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=mm({margin:0},i),S=!vt(h),_=S?h:"",N=$e("recharts-default-tooltip",d),v=$e("recharts-tooltip-label",m);S&&f&&a!==void 0&&a!==null&&(_=f(h,a));var k=g?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",qp({className:N,style:j},k),b.createElement("p",{className:v,style:w},b.isValidElement(_)?_:"".concat(_)),x())},Co="recharts-tooltip-wrapper",xI={visibility:"hidden"};function bI(e){var{coordinate:t,translateX:n,translateY:r}=e;return $e(Co,{["".concat(Co,"-right")]:de(n)&&t&&de(t.x)&&n>=t.x,["".concat(Co,"-left")]:de(n)&&t&&de(t.x)&&n<t.x,["".concat(Co,"-bottom")]:de(r)&&t&&de(t.y)&&r>=t.y,["".concat(Co,"-top")]:de(r)&&t&&de(t.y)&&r<t.y})}function y_(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(a&&de(a[r]))return a[r];var h=n[r]-u-(i>0?i:0),f=n[r]+i;if(t[r])return l[r]?h:f;var g=d[r];if(g==null)return 0;if(l[r]){var x=h,j=g;return x<j?Math.max(f,g):Math.max(h,g)}if(m==null)return 0;var w=f+u,S=g+m;return w>S?Math.max(h,g):Math.max(f,g)}function _I(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function wI(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,h,f;return l.height>0&&l.width>0&&n?(h=y_({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),f=y_({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=_I({translateX:h,translateY:f,useTranslate3d:u})):m=xI,{cssProperties:m,cssClasses:bI({translateX:h,translateY:f,coordinate:n})}}function x_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x_(Object(n),!0).forEach(function(r){Gp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gp(e,t,n){return(t=jI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jI(e){var t=NI(e,"string");return typeof t=="symbol"?t:t+""}function NI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class SI extends b.PureComponent{constructor(){super(...arguments),Gp(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Gp(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:h,reverseDirection:f,useTranslate3d:g,viewBox:x,wrapperStyle:j,lastBoundingBox:w,innerRef:S,hasPortalFromProps:_}=this.props,{cssClasses:N,cssProperties:v}=wI({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:m,position:h,reverseDirection:f,tooltipBox:{height:w.height,width:w.width},useTranslate3d:g,viewBox:x}),k=_?{}:Zc(Zc({transition:d&&t?"transform ".concat(r,"ms ").concat(i):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),O=Zc(Zc({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},j);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:O,ref:S},a)}}var PI=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Gs={devToolsEnabled:!1,isSsr:PI()},jS=()=>ue(e=>e.rootProps.accessibilityLayer);function Sn(e){return Number.isFinite(e)}function sd(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yp.apply(null,arguments)}function b_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function __(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b_(Object(n),!0).forEach(function(r){kI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kI(e,t,n){return(t=CI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CI(e){var t=EI(e,"string");return typeof t=="symbol"?t:t+""}function EI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w_={curveBasisClosed:Q3,curveBasisOpen:J3,curveBasis:X3,curveBumpX:R3,curveBumpY:z3,curveLinearClosed:e4,curveLinear:mf,curveMonotoneX:t4,curveMonotoneY:n4,curveNatural:r4,curveStep:i4,curveStepAfter:s4,curveStepBefore:a4},Wc=e=>Sn(e.x)&&Sn(e.y),Eo=e=>e.x,Oo=e=>e.y,OI=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat($l(e));return(n==="curveMonotone"||n==="curveBump")&&t?w_["".concat(n).concat(t==="vertical"?"Y":"X")]:w_[n]||mf},TI=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=e,l=OI(t,i),u=a?n.filter(Wc):n,d;if(Array.isArray(r)){var m=a?r.filter(f=>Wc(f)):r,h=u.map((f,g)=>__(__({},f),{},{base:m[g]}));return i==="vertical"?d=Rc().y(Oo).x1(Eo).x0(f=>f.base.x):d=Rc().x(Eo).y1(Oo).y0(f=>f.base.y),d.defined(Wc).curve(l),d(h)}return i==="vertical"&&de(r)?d=Rc().y(Oo).x1(Eo).x0(r):de(r)?d=Rc().x(Eo).y1(Oo).y0(r):d=aN().x(Eo).y(Oo),d.defined(Wc).curve(l),d(u)},AI=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var a=n&&n.length?TI(e):r;return b.createElement("path",Yp({},qs(e),w3(e),{className:$e("recharts-curve",t),d:a===null?void 0:a,ref:i}))},MI=["x","y","top","left","width","height","className"];function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xp.apply(null,arguments)}function j_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j_(Object(n),!0).forEach(function(r){DI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DI(e,t,n){return(t=II(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function II(e){var t=RI(e,"string");return typeof t=="symbol"?t:t+""}function RI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zI(e,t){if(e==null)return{};var n,r,i=$I(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $I(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var BI=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),FI=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:a=0,height:l=0,className:u}=e,d=zI(e,MI),m=LI({x:t,y:n,top:r,left:i,width:a,height:l},d);return!de(t)||!de(n)||!de(a)||!de(l)||!de(r)||!de(i)?null:b.createElement("path",Xp({},Ot(m,!0),{className:$e("recharts-cross",u),d:BI(t,n,a,l,r,i)}))};function UI(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function N_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function HI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N_(Object(n),!0).forEach(function(r){ZI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZI(e,t,n){return(t=WI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WI(e){var t=VI(e,"string");return typeof t=="symbol"?t:t+""}function VI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jn(e,t){var n=HI({},e),r=t,i=Object.keys(t),a=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return a}function KI(){}function S_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function P_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(n),!0).forEach(function(r){qI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qI(e,t,n){return(t=GI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GI(e){var t=YI(e,"string");return typeof t=="symbol"?t:t+""}function YI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XI=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),NS=(e,t,n)=>e.map(r=>"".concat(XI(r)," ").concat(t,"ms ").concat(n)).join(","),QI=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),jl=(e,t)=>Object.keys(t).reduce((n,r)=>P_(P_({},n),{},{[r]:e(r,t[r])}),{});function k_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k_(Object(n),!0).forEach(function(r){JI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JI(e,t,n){return(t=e5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e5(e){var t=t5(e,"string");return typeof t=="symbol"?t:t+""}function t5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var od=(e,t,n)=>e+(t-e)*n,Qp=e=>{var{from:t,to:n}=e;return t!==n},SS=(e,t,n)=>{var r=jl((i,a)=>{if(Qp(a)){var[l,u]=e(a.from,a.to,a.velocity);return Nt(Nt({},a),{},{from:l,velocity:u})}return a},t);return n<1?jl((i,a)=>Qp(a)?Nt(Nt({},a),{},{velocity:od(a.velocity,r[i].velocity,n),from:od(a.from,r[i].from,n)}):a,t):SS(e,r,n-1)};function n5(e,t,n,r,i,a){var l,u=r.reduce((g,x)=>Nt(Nt({},g),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>jl((g,x)=>x.from,u),m=()=>!Object.values(u).filter(Qp).length,h=null,f=g=>{l||(l=g);var x=g-l,j=x/n.dt;u=SS(n,u,j),i(Nt(Nt(Nt({},e),t),d())),l=g,m()||(h=a.setTimeout(f))};return()=>(h=a.setTimeout(f),()=>{h()})}function r5(e,t,n,r,i,a,l){var u=null,d=i.reduce((f,g)=>Nt(Nt({},f),{},{[g]:[e[g],t[g]]}),{}),m,h=f=>{m||(m=f);var g=(f-m)/r,x=jl((w,S)=>od(...S,n(g)),d);if(a(Nt(Nt(Nt({},e),t),x)),g<1)u=l.setTimeout(h);else{var j=jl((w,S)=>od(...S,n(1)),d);a(Nt(Nt(Nt({},e),t),j))}};return()=>(u=l.setTimeout(h),()=>{u()})}const i5=(e,t,n,r,i,a)=>{var l=QI(e,t);return n.isStepper===!0?n5(e,t,n,l,i,a):r5(e,t,n,r,l,i,a)};var ld=1e-4,PS=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],kS=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),C_=(e,t)=>n=>{var r=PS(e,t);return kS(r,n)},a5=(e,t)=>n=>{var r=PS(e,t),i=[...r.map((a,l)=>a*l).slice(1),0];return kS(i,n)},E_=function(){for(var t,n,r,i,a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var d=l[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,r,n,i]=d[1].split(")")[0].split(",").map(j=>parseFloat(j)))}}else l.length===4&&([t,r,n,i]=l);var m=C_(t,n),h=C_(r,i),f=a5(t,n),g=j=>j>1?1:j<0?0:j,x=j=>{for(var w=j>1?1:j,S=w,_=0;_<8;++_){var N=m(S)-w,v=f(S);if(Math.abs(N-w)<ld||v<ld)return h(S);S=g(S-N/v)}return h(S)};return x.isStepper=!1,x},s5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,a=(l,u,d)=>{var m=-(l-u)*n,h=d*r,f=d+(m-h)*i/1e3,g=d*i/1e3+l;return Math.abs(g-u)<ld&&Math.abs(f)<ld?[u,0]:[g,f]};return a.isStepper=!0,a.dt=i,a},o5=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return E_(e);case"spring":return s5();default:if(e.split("(")[0]==="cubic-bezier")return E_(e)}return typeof e=="function"?e:null};function l5(e){var t,n=()=>null,r=!1,i=null,a=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){i=e.setTimeout(a.bind(null,m),d);return}a(d),i=e.setTimeout(a.bind(null,m));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),a(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class c5{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}function u5(){return l5(new c5)}var d5=b.createContext(u5);function f5(e,t){var n=b.useContext(d5);return b.useMemo(()=>t??n(e),[e,t,n])}var h5={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},O_={t:0},pm={t:1};function n0(e){var t=Jn(e,h5),{isActive:n,canBegin:r,duration:i,easing:a,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,h=f5(t.animationId,t.animationManager),[f,g]=b.useState(n?O_:pm),x=b.useRef(null);return b.useEffect(()=>{n||g(pm)},[n]),b.useEffect(()=>{if(!n||!r)return KI;var j=i5(O_,pm,o5(a),i,g,h.getTimeoutController()),w=()=>{x.current=j()};return h.start([d,l,w,i,u]),()=>{h.stop(),x.current&&x.current(),u()}},[n,r,i,a,l,d,u,h]),m(f.t)}function r0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=b.useRef(bl(t)),r=b.useRef(e);return r.current!==e&&(n.current=bl(t),r.current=e),n.current}function T_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function A_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T_(Object(n),!0).forEach(function(r){m5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m5(e,t,n){return(t=p5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p5(e){var t=g5(e,"string");return typeof t=="symbol"?t:t+""}function g5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cd.apply(null,arguments)}var M_=(e,t,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,d=r>=0&&n>=0||r<0&&n<0?1:0,m;if(a>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,g=4;f<g;f++)h[f]=i[f]>a?a:i[f];m="M".concat(e,",").concat(t+l*h[0]),h[0]>0&&(m+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(e+u*h[0],",").concat(t)),m+="L ".concat(e+n-u*h[1],",").concat(t),h[1]>0&&(m+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(t+l*h[1])),m+="L ".concat(e+n,",").concat(t+r-l*h[2]),h[2]>0&&(m+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(e+n-u*h[2],",").concat(t+r)),m+="L ".concat(e+u*h[3],",").concat(t+r),h[3]>0&&(m+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+r-l*h[3])),m+="Z"}else if(a>0&&i===+i&&i>0){var x=Math.min(a,i);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+n-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n,",").concat(t+l*x,`
            L `).concat(e+n,",").concat(t+r-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+n-u*x,",").concat(t+r,`
            L `).concat(e+u*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+r-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return m},v5={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CS=e=>{var t=Jn(e,v5),n=b.useRef(null),[r,i]=b.useState(-1);b.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&i(C)}catch{}},[]);var{x:a,y:l,width:u,height:d,radius:m,className:h}=t,{animationEasing:f,animationDuration:g,animationBegin:x,isAnimationActive:j,isUpdateAnimationActive:w}=t,S=b.useRef(u),_=b.useRef(d),N=b.useRef(a),v=b.useRef(l),k=b.useMemo(()=>({x:a,y:l,width:u,height:d,radius:m}),[a,l,u,d,m]),O=r0(k,"rectangle-");if(a!==+a||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var A=$e("recharts-rectangle",h);if(!w)return b.createElement("path",cd({},Ot(t,!0),{className:A,d:M_(a,l,u,d,m)}));var E=S.current,I=_.current,$=N.current,D=v.current,M="0px ".concat(r===-1?1:r,"px"),z="".concat(r,"px 0px"),B=NS(["strokeDasharray"],g,typeof f=="string"?f:void 0);return b.createElement(n0,{animationId:O,key:O,canBegin:r>0,duration:g,easing:f,isActive:w,begin:x},C=>{var U=Wt(E,u,C),Z=Wt(I,d,C),q=Wt($,a,C),R=Wt(D,l,C);n.current&&(S.current=U,_.current=Z,N.current=q,v.current=R);var Y;return j?C>0?Y={transition:B,strokeDasharray:z}:Y={strokeDasharray:M}:Y={strokeDasharray:z},b.createElement("path",cd({},Ot(t,!0),{className:A,d:M_(q,R,U,Z,m),ref:n,style:A_(A_({},Y),t.style)}))})};function ES(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e,l=Pt(t,n,r,i),u=Pt(t,n,r,a);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function Jp(){return Jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jp.apply(null,arguments)}var y5=(e,t)=>{var n=an(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Vc=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+r,h=Math.asin(u/m)/ad,f=d?i:i+a*h,g=Pt(t,n,m,f),x=Pt(t,n,r,f),j=d?i-a*h:i,w=Pt(t,n,m*Math.cos(h*ad),j);return{center:g,circleTangency:x,lineTangency:w,theta:h}},OS=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:l}=e,u=y5(a,l),d=a+u,m=Pt(t,n,i,a),h=Pt(t,n,i,d),f="M ".concat(m.x,",").concat(m.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var g=Pt(t,n,r,a),x=Pt(t,n,r,d);f+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else f+="L ".concat(t,",").concat(n," Z");return f},x5=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,h=an(m-d),{circleTangency:f,lineTangency:g,theta:x}=Vc({cx:t,cy:n,radius:i,angle:d,sign:h,cornerRadius:a,cornerIsExternal:u}),{circleTangency:j,lineTangency:w,theta:S}=Vc({cx:t,cy:n,radius:i,angle:m,sign:-h,cornerRadius:a,cornerIsExternal:u}),_=u?Math.abs(d-m):Math.abs(d-m)-x-S;if(_<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):OS({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:d,endAngle:m});var N="M ".concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(r>0){var{circleTangency:v,lineTangency:k,theta:O}=Vc({cx:t,cy:n,radius:r,angle:d,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:A,lineTangency:E,theta:I}=Vc({cx:t,cy:n,radius:r,angle:m,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),$=u?Math.abs(d-m):Math.abs(d-m)-O-I;if($<0&&a===0)return"".concat(N,"L").concat(t,",").concat(n,"Z");N+="L".concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(r,",").concat(r,",0,").concat(+($>180),",").concat(+(h>0),",").concat(v.x,",").concat(v.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,"Z")}else N+="L".concat(t,",").concat(n,"Z");return N},b5={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},TS=e=>{var t=Jn(e,b5),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:h,className:f}=t;if(a<i||m===h)return null;var g=$e("recharts-sector",f),x=a-i,j=pr(l,x,0,!0),w;return j>0&&Math.abs(m-h)<360?w=x5({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(j,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:h}):w=OS({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:m,endAngle:h}),b.createElement("path",Jp({},Ot(t,!0),{className:g,d:w}))};function _5(e,t,n){var r,i,a,l;if(e==="horizontal")r=t.x,a=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:d,innerRadius:m,outerRadius:h,angle:f}=t,g=Pt(u,d,m,f),x=Pt(u,d,h,f);r=g.x,i=g.y,a=x.x,l=x.y}else return ES(t);return[{x:r,y:i},{x:a,y:l}]}var AS={},MS={},LS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uv;function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(LS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LS;function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(MS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hv,n=MS;function r(i,a,l){l&&typeof l!="number"&&t.isIterateeCall(i,a,l)&&(a=l=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),l=l===void 0?i<a?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((a-i)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=i,i+=l;return d}e.range=r})(AS);var w5=AS.range;const DS=Tr(w5);function Ii(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function j5(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i0(e){let t,n,r;e.length!==2?(t=Ii,n=(u,d)=>Ii(e(u),d),r=(u,d)=>e(u)-d):(t=e===Ii||e===j5?e:N5,n=e,r=e);function i(u,d,m=0,h=u.length){if(m<h){if(t(d,d)!==0)return h;do{const f=m+h>>>1;n(u[f],d)<0?m=f+1:h=f}while(m<h)}return m}function a(u,d,m=0,h=u.length){if(m<h){if(t(d,d)!==0)return h;do{const f=m+h>>>1;n(u[f],d)<=0?m=f+1:h=f}while(m<h)}return m}function l(u,d,m=0,h=u.length){const f=i(u,d,m,h-1);return f>m&&r(u[f-1],d)>-r(u[f],d)?f-1:f}return{left:i,center:l,right:a}}function N5(){return 0}function IS(e){return e===null?NaN:+e}function*S5(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const P5=i0(Ii),Hl=P5.right;i0(IS).center;class L_ extends Map{constructor(t,n=E5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(D_(this,t))}has(t){return super.has(D_(this,t))}set(t,n){return super.set(k5(this,t),n)}delete(t){return super.delete(C5(this,t))}}function D_({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function k5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function C5({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function E5(e){return e!==null&&typeof e=="object"?e.valueOf():e}function O5(e=Ii){if(e===Ii)return RS;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function RS(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const T5=Math.sqrt(50),A5=Math.sqrt(10),M5=Math.sqrt(2);function ud(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),l=a>=T5?10:a>=A5?5:a>=M5?2:1;let u,d,m;return i<0?(m=Math.pow(10,-i)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,i)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=n&&n<2?ud(e,t,n*2):[u,d,m]}function eg(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,l]=r?ud(t,e,n):ud(e,t,n);if(!(a>=i))return[];const u=a-i+1,d=new Array(u);if(r)if(l<0)for(let m=0;m<u;++m)d[m]=(a-m)/-l;else for(let m=0;m<u;++m)d[m]=(a-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(i+m)/-l;else for(let m=0;m<u;++m)d[m]=(i+m)*l;return d}function tg(e,t,n){return t=+t,e=+e,n=+n,ud(e,t,n)[2]}function ng(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?tg(t,e,n):tg(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function I_(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function R_(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function zS(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?RS:O5(i);r>n;){if(r-n>600){const d=r-n+1,m=t-n+1,h=Math.log(d),f=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*f*(d-f)/d)*(m-d/2<0?-1:1),x=Math.max(n,Math.floor(t-m*f/d+g)),j=Math.min(r,Math.floor(t+(d-m)*f/d+g));zS(e,t,x,j,i)}const a=e[t];let l=n,u=r;for(To(e,n,t),i(e[r],a)>0&&To(e,n,r);l<u;){for(To(e,l,u),++l,--u;i(e[l],a)<0;)++l;for(;i(e[u],a)>0;)--u}i(e[n],a)===0?To(e,n,u):(++u,To(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function To(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function L5(e,t,n){if(e=Float64Array.from(S5(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return R_(e);if(t>=1)return I_(e);var r,i=(r-1)*t,a=Math.floor(i),l=I_(zS(e,a).subarray(0,a+1)),u=R_(e.subarray(a+1));return l+(u-l)*(i-a)}}function D5(e,t,n=IS){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),l=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return l+(u-l)*(i-a)}}function I5(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function er(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function li(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rg=Symbol("implicit");function a0(){var e=new L_,t=[],n=[],r=rg;function i(a){let l=e.get(a);if(l===void 0){if(r!==rg)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new L_;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return a0(t,n).unknown(r)},er.apply(i,arguments),i}function s0(){var e=a0().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,l,u=!1,d=0,m=0,h=.5;delete e.unknown;function f(){var g=t().length,x=i<r,j=x?i:r,w=x?r:i;a=(w-j)/Math.max(1,g-d+m*2),u&&(a=Math.floor(a)),j+=(w-j-a*(g-d))*h,l=a*(1-d),u&&(j=Math.round(j),l=Math.round(l));var S=I5(g).map(function(_){return j+a*_});return n(x?S.reverse():S)}return e.domain=function(g){return arguments.length?(t(g),f()):t()},e.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,u=!0,f()},e.bandwidth=function(){return l},e.step=function(){return a},e.round=function(g){return arguments.length?(u=!!g,f()):u},e.padding=function(g){return arguments.length?(d=Math.min(1,m=+g),f()):d},e.paddingInner=function(g){return arguments.length?(d=Math.min(1,g),f()):d},e.paddingOuter=function(g){return arguments.length?(m=+g,f()):m},e.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),f()):h},e.copy=function(){return s0(t(),[r,i]).round(u).paddingInner(d).paddingOuter(m).align(h)},er.apply(f(),arguments)}function $S(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return $S(t())},e}function R5(){return $S(s0.apply(null,arguments).paddingInner(1))}function o0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function BS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zl(){}var Nl=.7,dd=1/Nl,bs="\\s*([+-]?\\d+)\\s*",Sl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",z5=/^#([0-9a-f]{3,8})$/,$5=new RegExp(`^rgb\\(${bs},${bs},${bs}\\)$`),B5=new RegExp(`^rgb\\(${Cr},${Cr},${Cr}\\)$`),F5=new RegExp(`^rgba\\(${bs},${bs},${bs},${Sl}\\)$`),U5=new RegExp(`^rgba\\(${Cr},${Cr},${Cr},${Sl}\\)$`),H5=new RegExp(`^hsl\\(${Sl},${Cr},${Cr}\\)$`),Z5=new RegExp(`^hsla\\(${Sl},${Cr},${Cr},${Sl}\\)$`),z_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o0(Zl,Pl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$_,formatHex:$_,formatHex8:W5,formatHsl:V5,formatRgb:B_,toString:B_});function $_(){return this.rgb().formatHex()}function W5(){return this.rgb().formatHex8()}function V5(){return FS(this).formatHsl()}function B_(){return this.rgb().formatRgb()}function Pl(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=z5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?F_(t):n===3?new sn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Kc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Kc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$5.exec(e))?new sn(t[1],t[2],t[3],1):(t=B5.exec(e))?new sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=F5.exec(e))?Kc(t[1],t[2],t[3],t[4]):(t=U5.exec(e))?Kc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=H5.exec(e))?Z_(t[1],t[2]/100,t[3]/100,1):(t=Z5.exec(e))?Z_(t[1],t[2]/100,t[3]/100,t[4]):z_.hasOwnProperty(e)?F_(z_[e]):e==="transparent"?new sn(NaN,NaN,NaN,0):null}function F_(e){return new sn(e>>16&255,e>>8&255,e&255,1)}function Kc(e,t,n,r){return r<=0&&(e=t=n=NaN),new sn(e,t,n,r)}function K5(e){return e instanceof Zl||(e=Pl(e)),e?(e=e.rgb(),new sn(e.r,e.g,e.b,e.opacity)):new sn}function ig(e,t,n,r){return arguments.length===1?K5(e):new sn(e,t,n,r??1)}function sn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}o0(sn,ig,BS(Zl,{brighter(e){return e=e==null?dd:Math.pow(dd,e),new sn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nl:Math.pow(Nl,e),new sn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sn(ba(this.r),ba(this.g),ba(this.b),fd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:U_,formatHex:U_,formatHex8:q5,formatRgb:H_,toString:H_}));function U_(){return`#${fa(this.r)}${fa(this.g)}${fa(this.b)}`}function q5(){return`#${fa(this.r)}${fa(this.g)}${fa(this.b)}${fa((isNaN(this.opacity)?1:this.opacity)*255)}`}function H_(){const e=fd(this.opacity);return`${e===1?"rgb(":"rgba("}${ba(this.r)}, ${ba(this.g)}, ${ba(this.b)}${e===1?")":`, ${e})`}`}function fd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ba(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fa(e){return e=ba(e),(e<16?"0":"")+e.toString(16)}function Z_(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ur(e,t,n,r)}function FS(e){if(e instanceof ur)return new ur(e.h,e.s,e.l,e.opacity);if(e instanceof Zl||(e=Pl(e)),!e)return new ur;if(e instanceof ur)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,u=a-i,d=(a+i)/2;return u?(t===a?l=(n-r)/u+(n<r)*6:n===a?l=(r-t)/u+2:l=(t-n)/u+4,u/=d<.5?a+i:2-a-i,l*=60):u=d>0&&d<1?0:l,new ur(l,u,d,e.opacity)}function G5(e,t,n,r){return arguments.length===1?FS(e):new ur(e,t,n,r??1)}function ur(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}o0(ur,G5,BS(Zl,{brighter(e){return e=e==null?dd:Math.pow(dd,e),new ur(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nl:Math.pow(Nl,e),new ur(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new sn(gm(e>=240?e-240:e+120,i,r),gm(e,i,r),gm(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ur(W_(this.h),qc(this.s),qc(this.l),fd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fd(this.opacity);return`${e===1?"hsl(":"hsla("}${W_(this.h)}, ${qc(this.s)*100}%, ${qc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function W_(e){return e=(e||0)%360,e<0?e+360:e}function qc(e){return Math.max(0,Math.min(1,e||0))}function gm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const l0=e=>()=>e;function Y5(e,t){return function(n){return e+n*t}}function X5(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Q5(e){return(e=+e)==1?US:function(t,n){return n-t?X5(t,n,e):l0(isNaN(t)?n:t)}}function US(e,t){var n=t-e;return n?Y5(e,n):l0(isNaN(e)?t:e)}const V_=function e(t){var n=Q5(t);function r(i,a){var l=n((i=ig(i)).r,(a=ig(a)).r),u=n(i.g,a.g),d=n(i.b,a.b),m=US(i.opacity,a.opacity);return function(h){return i.r=l(h),i.g=u(h),i.b=d(h),i.opacity=m(h),i+""}}return r.gamma=e,r}(1);function J5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function e6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function t6(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=Ys(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(u){for(l=0;l<r;++l)a[l]=i[l](u);return a}}function n6(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function hd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function r6(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ys(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var ag=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vm=new RegExp(ag.source,"g");function i6(e){return function(){return e}}function a6(e){return function(t){return e(t)+""}}function s6(e,t){var n=ag.lastIndex=vm.lastIndex=0,r,i,a,l=-1,u=[],d=[];for(e=e+"",t=t+"";(r=ag.exec(e))&&(i=vm.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[l]?u[l]+=a:u[++l]=a),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,d.push({i:l,x:hd(r,i)})),n=vm.lastIndex;return n<t.length&&(a=t.slice(n),u[l]?u[l]+=a:u[++l]=a),u.length<2?d[0]?a6(d[0].x):i6(t):(t=d.length,function(m){for(var h=0,f;h<t;++h)u[(f=d[h]).i]=f.x(m);return u.join("")})}function Ys(e,t){var n=typeof t,r;return t==null||n==="boolean"?l0(t):(n==="number"?hd:n==="string"?(r=Pl(t))?(t=r,V_):s6:t instanceof Pl?V_:t instanceof Date?n6:e6(t)?J5:Array.isArray(t)?t6:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?r6:hd)(e,t)}function c0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function o6(e,t){t===void 0&&(t=e,e=Ys);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return a[u](l-u)}}function l6(e){return function(){return e}}function md(e){return+e}var K_=[0,1];function Kt(e){return e}function sg(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:l6(isNaN(t)?NaN:.5)}function c6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function u6(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=sg(i,r),a=n(l,a)):(r=sg(r,i),a=n(a,l)),function(u){return a(r(u))}}function d6(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=sg(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(u){var d=Hl(e,u,1,r)-1;return a[d](i[d](u))}}function Wl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ef(){var e=K_,t=K_,n=Ys,r,i,a,l=Kt,u,d,m;function h(){var g=Math.min(e.length,t.length);return l!==Kt&&(l=c6(e[0],e[g-1])),u=g>2?d6:u6,d=m=null,f}function f(g){return g==null||isNaN(g=+g)?a:(d||(d=u(e.map(r),t,n)))(r(l(g)))}return f.invert=function(g){return l(i((m||(m=u(t,e.map(r),hd)))(g)))},f.domain=function(g){return arguments.length?(e=Array.from(g,md),h()):e.slice()},f.range=function(g){return arguments.length?(t=Array.from(g),h()):t.slice()},f.rangeRound=function(g){return t=Array.from(g),n=c0,h()},f.clamp=function(g){return arguments.length?(l=g?!0:Kt,h()):l!==Kt},f.interpolate=function(g){return arguments.length?(n=g,h()):n},f.unknown=function(g){return arguments.length?(a=g,f):a},function(g,x){return r=g,i=x,h()}}function u0(){return Ef()(Kt,Kt)}function f6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Is(e){return e=pd(Math.abs(e)),e?e[1]:NaN}function h6(e,t){return function(n,r){for(var i=n.length,a=[],l=0,u=e[0],d=0;i>0&&u>0&&(d+u+1>r&&(u=Math.max(1,r-d)),a.push(n.substring(i-=u,i+u)),!((d+=u+1)>r));)u=e[l=(l+1)%e.length];return a.reverse().join(t)}}function m6(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var p6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kl(e){if(!(t=p6.exec(e)))throw new Error("invalid format: "+e);var t;return new d0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}kl.prototype=d0.prototype;function d0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}d0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function g6(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var HS;function v6(e,t){var n=pd(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(HS=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+pd(e,Math.max(0,t+a-1))[0]}function q_(e,t){var n=pd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const G_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:f6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>q_(e*100,t),r:q_,s:v6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Y_(e){return e}var X_=Array.prototype.map,Q_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function y6(e){var t=e.grouping===void 0||e.thousands===void 0?Y_:h6(X_.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Y_:m6(X_.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(f){f=kl(f);var g=f.fill,x=f.align,j=f.sign,w=f.symbol,S=f.zero,_=f.width,N=f.comma,v=f.precision,k=f.trim,O=f.type;O==="n"?(N=!0,O="g"):G_[O]||(v===void 0&&(v=12),k=!0,O="g"),(S||g==="0"&&x==="=")&&(S=!0,g="0",x="=");var A=w==="$"?n:w==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",E=w==="$"?r:/[%p]/.test(O)?l:"",I=G_[O],$=/[defgprs%]/.test(O);v=v===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function D(M){var z=A,B=E,C,U,Z;if(O==="c")B=I(M)+B,M="";else{M=+M;var q=M<0||1/M<0;if(M=isNaN(M)?d:I(Math.abs(M),v),k&&(M=g6(M)),q&&+M==0&&j!=="+"&&(q=!1),z=(q?j==="("?j:u:j==="-"||j==="("?"":j)+z,B=(O==="s"?Q_[8+HS/3]:"")+B+(q&&j==="("?")":""),$){for(C=-1,U=M.length;++C<U;)if(Z=M.charCodeAt(C),48>Z||Z>57){B=(Z===46?i+M.slice(C+1):M.slice(C))+B,M=M.slice(0,C);break}}}N&&!S&&(M=t(M,1/0));var R=z.length+M.length+B.length,Y=R<_?new Array(_-R+1).join(g):"";switch(N&&S&&(M=t(Y+M,Y.length?_-B.length:1/0),Y=""),x){case"<":M=z+M+B+Y;break;case"=":M=z+Y+M+B;break;case"^":M=Y.slice(0,R=Y.length>>1)+z+M+B+Y.slice(R);break;default:M=Y+z+M+B;break}return a(M)}return D.toString=function(){return f+""},D}function h(f,g){var x=m((f=kl(f),f.type="f",f)),j=Math.max(-8,Math.min(8,Math.floor(Is(g)/3)))*3,w=Math.pow(10,-j),S=Q_[8+j/3];return function(_){return x(w*_)+S}}return{format:m,formatPrefix:h}}var Gc,f0,ZS;x6({thousands:",",grouping:[3],currency:["$",""]});function x6(e){return Gc=y6(e),f0=Gc.format,ZS=Gc.formatPrefix,Gc}function b6(e){return Math.max(0,-Is(Math.abs(e)))}function _6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Is(t)/3)))*3-Is(Math.abs(e)))}function w6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Is(t)-Is(e))+1}function WS(e,t,n,r){var i=ng(e,t,n),a;switch(r=kl(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=_6(i,l))&&(r.precision=a),ZS(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=w6(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=b6(i))&&(r.precision=a-(r.type==="%")*2);break}}return f0(r)}function Zi(e){var t=e.domain;return e.ticks=function(n){var r=t();return eg(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return WS(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],u=r[a],d,m,h=10;for(u<l&&(m=l,l=u,u=m,m=i,i=a,a=m);h-- >0;){if(m=tg(l,u,n),m===d)return r[i]=l,r[a]=u,t(r);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function VS(){var e=u0();return e.copy=function(){return Wl(e,VS())},er.apply(e,arguments),Zi(e)}function KS(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,md),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return KS(e).unknown(t)},e=arguments.length?Array.from(e,md):[0,1],Zi(n)}function qS(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],l;return a<i&&(l=n,n=r,r=l,l=i,i=a,a=l),e[n]=t.floor(i),e[r]=t.ceil(a),e}function J_(e){return Math.log(e)}function ew(e){return Math.exp(e)}function j6(e){return-Math.log(-e)}function N6(e){return-Math.exp(-e)}function S6(e){return isFinite(e)?+("1e"+e):e<0?0:e}function P6(e){return e===10?S6:e===Math.E?Math.exp:t=>Math.pow(e,t)}function k6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function tw(e){return(t,n)=>-e(-t,n)}function h0(e){const t=e(J_,ew),n=t.domain;let r=10,i,a;function l(){return i=k6(r),a=P6(r),n()[0]<0?(i=tw(i),a=tw(a),e(j6,N6)):e(J_,ew),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const d=n();let m=d[0],h=d[d.length-1];const f=h<m;f&&([m,h]=[h,m]);let g=i(m),x=i(h),j,w;const S=u==null?10:+u;let _=[];if(!(r%1)&&x-g<S){if(g=Math.floor(g),x=Math.ceil(x),m>0){for(;g<=x;++g)for(j=1;j<r;++j)if(w=g<0?j/a(-g):j*a(g),!(w<m)){if(w>h)break;_.push(w)}}else for(;g<=x;++g)for(j=r-1;j>=1;--j)if(w=g>0?j/a(-g):j*a(g),!(w<m)){if(w>h)break;_.push(w)}_.length*2<S&&(_=eg(m,h,S))}else _=eg(g,x,Math.min(x-g,S)).map(a);return f?_.reverse():_},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=kl(d)).precision==null&&(d.trim=!0),d=f0(d)),u===1/0)return d;const m=Math.max(1,r*u/t.ticks().length);return h=>{let f=h/a(Math.round(i(h)));return f*r<r-.5&&(f*=r),f<=m?d(h):""}},t.nice=()=>n(qS(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),t}function GS(){const e=h0(Ef()).domain([1,10]);return e.copy=()=>Wl(e,GS()).base(e.base()),er.apply(e,arguments),e}function nw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function rw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function m0(e){var t=1,n=e(nw(t),rw(t));return n.constant=function(r){return arguments.length?e(nw(t=+r),rw(t)):t},Zi(n)}function YS(){var e=m0(Ef());return e.copy=function(){return Wl(e,YS()).constant(e.constant())},er.apply(e,arguments)}function iw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function C6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function E6(e){return e<0?-e*e:e*e}function p0(e){var t=e(Kt,Kt),n=1;function r(){return n===1?e(Kt,Kt):n===.5?e(C6,E6):e(iw(n),iw(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Zi(t)}function g0(){var e=p0(Ef());return e.copy=function(){return Wl(e,g0()).exponent(e.exponent())},er.apply(e,arguments),e}function O6(){return g0.apply(null,arguments).exponent(.5)}function aw(e){return Math.sign(e)*e*e}function T6(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function XS(){var e=u0(),t=[0,1],n=!1,r;function i(a){var l=T6(e(a));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(a){return e.invert(aw(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,md)).map(aw)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return XS(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},er.apply(i,arguments),Zi(i)}function QS(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=D5(e,l/u);return a}function a(l){return l==null||isNaN(l=+l)?r:t[Hl(n,l)]}return a.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ii),i()},a.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},a.unknown=function(l){return arguments.length?(r=l,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return QS().domain(e).range(t).unknown(r)},er.apply(a,arguments)}function JS(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function l(d){return d!=null&&d<=d?i[Hl(r,d,0,n)]:a}function u(){var d=-1;for(r=new Array(n);++d<n;)r[d]=((d+1)*t-(d-n)*e)/(n+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(n=(i=Array.from(d)).length-1,u()):i.slice()},l.invertExtent=function(d){var m=i.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,r[0]]:m>=n?[r[n-1],t]:[r[m-1],r[m]]},l.unknown=function(d){return arguments.length&&(a=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return JS().domain([e,t]).range(i).unknown(a)},er.apply(Zi(l),arguments)}function eP(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Hl(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var l=t.indexOf(a);return[e[l-1],e[l]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return eP().domain(e).range(t).unknown(n)},er.apply(i,arguments)}const ym=new Date,xm=new Date;function ut(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const l=i(a),u=i.ceil(a);return a-l<u-a?l:u},i.offset=(a,l)=>(t(a=new Date(+a),l==null?1:Math.floor(l)),a),i.range=(a,l,u)=>{const d=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<l)||!(u>0))return d;let m;do d.push(m=new Date(+a)),t(a,u),e(a);while(m<a&&a<l);return d},i.filter=a=>ut(l=>{if(l>=l)for(;e(l),!a(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!a(l););else for(;--u>=0;)for(;t(l,1),!a(l););}),n&&(i.count=(a,l)=>(ym.setTime(+a),xm.setTime(+l),e(ym),e(xm),Math.floor(n(ym,xm))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?l=>r(l)%a===0:l=>i.count(0,l)%a===0):i)),i}const gd=ut(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ut(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gd);gd.range;const Zr=1e3,Hn=Zr*60,Wr=Hn*60,ti=Wr*24,v0=ti*7,sw=ti*30,bm=ti*365,ha=ut(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zr)},(e,t)=>(t-e)/Zr,e=>e.getUTCSeconds());ha.range;const y0=ut(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zr)},(e,t)=>{e.setTime(+e+t*Hn)},(e,t)=>(t-e)/Hn,e=>e.getMinutes());y0.range;const x0=ut(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Hn)},(e,t)=>(t-e)/Hn,e=>e.getUTCMinutes());x0.range;const b0=ut(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zr-e.getMinutes()*Hn)},(e,t)=>{e.setTime(+e+t*Wr)},(e,t)=>(t-e)/Wr,e=>e.getHours());b0.range;const _0=ut(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Wr)},(e,t)=>(t-e)/Wr,e=>e.getUTCHours());_0.range;const Vl=ut(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Hn)/ti,e=>e.getDate()-1);Vl.range;const Of=ut(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ti,e=>e.getUTCDate()-1);Of.range;const tP=ut(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ti,e=>Math.floor(e/ti));tP.range;function Ia(e){return ut(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Hn)/v0)}const Tf=Ia(0),vd=Ia(1),A6=Ia(2),M6=Ia(3),Rs=Ia(4),L6=Ia(5),D6=Ia(6);Tf.range;vd.range;A6.range;M6.range;Rs.range;L6.range;D6.range;function Ra(e){return ut(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/v0)}const Af=Ra(0),yd=Ra(1),I6=Ra(2),R6=Ra(3),zs=Ra(4),z6=Ra(5),$6=Ra(6);Af.range;yd.range;I6.range;R6.range;zs.range;z6.range;$6.range;const w0=ut(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());w0.range;const j0=ut(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());j0.range;const ni=ut(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ni.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ut(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ni.range;const ri=ut(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ri.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ut(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ri.range;function nP(e,t,n,r,i,a){const l=[[ha,1,Zr],[ha,5,5*Zr],[ha,15,15*Zr],[ha,30,30*Zr],[a,1,Hn],[a,5,5*Hn],[a,15,15*Hn],[a,30,30*Hn],[i,1,Wr],[i,3,3*Wr],[i,6,6*Wr],[i,12,12*Wr],[r,1,ti],[r,2,2*ti],[n,1,v0],[t,1,sw],[t,3,3*sw],[e,1,bm]];function u(m,h,f){const g=h<m;g&&([m,h]=[h,m]);const x=f&&typeof f.range=="function"?f:d(m,h,f),j=x?x.range(m,+h+1):[];return g?j.reverse():j}function d(m,h,f){const g=Math.abs(h-m)/f,x=i0(([,,S])=>S).right(l,g);if(x===l.length)return e.every(ng(m/bm,h/bm,f));if(x===0)return gd.every(Math.max(ng(m,h,f),1));const[j,w]=l[g/l[x-1][2]<l[x][2]/g?x-1:x];return j.every(w)}return[u,d]}const[B6,F6]=nP(ri,j0,Af,tP,_0,x0),[U6,H6]=nP(ni,w0,Tf,Vl,b0,y0);function _m(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ao(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Z6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=Mo(i),h=Lo(i),f=Mo(a),g=Lo(a),x=Mo(l),j=Lo(l),w=Mo(u),S=Lo(u),_=Mo(d),N=Lo(d),v={a:q,A:R,b:Y,B:G,c:null,d:fw,e:fw,f:hR,g:jR,G:SR,H:uR,I:dR,j:fR,L:rP,m:mR,M:pR,p:re,q:ne,Q:pw,s:gw,S:gR,u:vR,U:yR,V:xR,w:bR,W:_R,x:null,X:null,y:wR,Y:NR,Z:PR,"%":mw},k={a:H,A:ee,b:Q,B:ae,c:null,d:hw,e:hw,f:OR,g:BR,G:UR,H:kR,I:CR,j:ER,L:aP,m:TR,M:AR,p:Te,q:Ft,Q:pw,s:gw,S:MR,u:LR,U:DR,V:IR,w:RR,W:zR,x:null,X:null,y:$R,Y:FR,Z:HR,"%":mw},O={a:D,A:M,b:z,B,c:C,d:uw,e:uw,f:sR,g:cw,G:lw,H:dw,I:dw,j:nR,L:aR,m:tR,M:rR,p:$,q:eR,Q:lR,s:cR,S:iR,u:G6,U:Y6,V:X6,w:q6,W:Q6,x:U,X:Z,y:cw,Y:lw,Z:J6,"%":oR};v.x=A(n,v),v.X=A(r,v),v.c=A(t,v),k.x=A(n,k),k.X=A(r,k),k.c=A(t,k);function A(se,ge){return function(me){var J=[],ft=-1,Ae=0,Tt=se.length,At,tr,qi;for(me instanceof Date||(me=new Date(+me));++ft<Tt;)se.charCodeAt(ft)===37&&(J.push(se.slice(Ae,ft)),(tr=ow[At=se.charAt(++ft)])!=null?At=se.charAt(++ft):tr=At==="e"?" ":"0",(qi=ge[At])&&(At=qi(me,tr)),J.push(At),Ae=ft+1);return J.push(se.slice(Ae,ft)),J.join("")}}function E(se,ge){return function(me){var J=Ao(1900,void 0,1),ft=I(J,se,me+="",0),Ae,Tt;if(ft!=me.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(ge&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(Ae=wm(Ao(J.y,0,1)),Tt=Ae.getUTCDay(),Ae=Tt>4||Tt===0?yd.ceil(Ae):yd(Ae),Ae=Of.offset(Ae,(J.V-1)*7),J.y=Ae.getUTCFullYear(),J.m=Ae.getUTCMonth(),J.d=Ae.getUTCDate()+(J.w+6)%7):(Ae=_m(Ao(J.y,0,1)),Tt=Ae.getDay(),Ae=Tt>4||Tt===0?vd.ceil(Ae):vd(Ae),Ae=Vl.offset(Ae,(J.V-1)*7),J.y=Ae.getFullYear(),J.m=Ae.getMonth(),J.d=Ae.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),Tt="Z"in J?wm(Ao(J.y,0,1)).getUTCDay():_m(Ao(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(Tt+5)%7:J.w+J.U*7-(Tt+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,wm(J)):_m(J)}}function I(se,ge,me,J){for(var ft=0,Ae=ge.length,Tt=me.length,At,tr;ft<Ae;){if(J>=Tt)return-1;if(At=ge.charCodeAt(ft++),At===37){if(At=ge.charAt(ft++),tr=O[At in ow?ge.charAt(ft++):At],!tr||(J=tr(se,me,J))<0)return-1}else if(At!=me.charCodeAt(J++))return-1}return J}function $(se,ge,me){var J=m.exec(ge.slice(me));return J?(se.p=h.get(J[0].toLowerCase()),me+J[0].length):-1}function D(se,ge,me){var J=x.exec(ge.slice(me));return J?(se.w=j.get(J[0].toLowerCase()),me+J[0].length):-1}function M(se,ge,me){var J=f.exec(ge.slice(me));return J?(se.w=g.get(J[0].toLowerCase()),me+J[0].length):-1}function z(se,ge,me){var J=_.exec(ge.slice(me));return J?(se.m=N.get(J[0].toLowerCase()),me+J[0].length):-1}function B(se,ge,me){var J=w.exec(ge.slice(me));return J?(se.m=S.get(J[0].toLowerCase()),me+J[0].length):-1}function C(se,ge,me){return I(se,t,ge,me)}function U(se,ge,me){return I(se,n,ge,me)}function Z(se,ge,me){return I(se,r,ge,me)}function q(se){return l[se.getDay()]}function R(se){return a[se.getDay()]}function Y(se){return d[se.getMonth()]}function G(se){return u[se.getMonth()]}function re(se){return i[+(se.getHours()>=12)]}function ne(se){return 1+~~(se.getMonth()/3)}function H(se){return l[se.getUTCDay()]}function ee(se){return a[se.getUTCDay()]}function Q(se){return d[se.getUTCMonth()]}function ae(se){return u[se.getUTCMonth()]}function Te(se){return i[+(se.getUTCHours()>=12)]}function Ft(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var ge=A(se+="",v);return ge.toString=function(){return se},ge},parse:function(se){var ge=E(se+="",!1);return ge.toString=function(){return se},ge},utcFormat:function(se){var ge=A(se+="",k);return ge.toString=function(){return se},ge},utcParse:function(se){var ge=E(se+="",!0);return ge.toString=function(){return se},ge}}}var ow={"-":"",_:" ",0:"0"},xt=/^\s*\d+/,W6=/^%/,V6=/[\\^$*+?|[\]().{}]/g;function ke(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function K6(e){return e.replace(V6,"\\$&")}function Mo(e){return new RegExp("^(?:"+e.map(K6).join("|")+")","i")}function Lo(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function q6(e,t,n){var r=xt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function G6(e,t,n){var r=xt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Y6(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function X6(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Q6(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function lw(e,t,n){var r=xt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function cw(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function J6(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function eR(e,t,n){var r=xt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function tR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function uw(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function nR(e,t,n){var r=xt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function dw(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function iR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function aR(e,t,n){var r=xt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function sR(e,t,n){var r=xt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function oR(e,t,n){var r=W6.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function lR(e,t,n){var r=xt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function cR(e,t,n){var r=xt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function fw(e,t){return ke(e.getDate(),t,2)}function uR(e,t){return ke(e.getHours(),t,2)}function dR(e,t){return ke(e.getHours()%12||12,t,2)}function fR(e,t){return ke(1+Vl.count(ni(e),e),t,3)}function rP(e,t){return ke(e.getMilliseconds(),t,3)}function hR(e,t){return rP(e,t)+"000"}function mR(e,t){return ke(e.getMonth()+1,t,2)}function pR(e,t){return ke(e.getMinutes(),t,2)}function gR(e,t){return ke(e.getSeconds(),t,2)}function vR(e){var t=e.getDay();return t===0?7:t}function yR(e,t){return ke(Tf.count(ni(e)-1,e),t,2)}function iP(e){var t=e.getDay();return t>=4||t===0?Rs(e):Rs.ceil(e)}function xR(e,t){return e=iP(e),ke(Rs.count(ni(e),e)+(ni(e).getDay()===4),t,2)}function bR(e){return e.getDay()}function _R(e,t){return ke(vd.count(ni(e)-1,e),t,2)}function wR(e,t){return ke(e.getFullYear()%100,t,2)}function jR(e,t){return e=iP(e),ke(e.getFullYear()%100,t,2)}function NR(e,t){return ke(e.getFullYear()%1e4,t,4)}function SR(e,t){var n=e.getDay();return e=n>=4||n===0?Rs(e):Rs.ceil(e),ke(e.getFullYear()%1e4,t,4)}function PR(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ke(t/60|0,"0",2)+ke(t%60,"0",2)}function hw(e,t){return ke(e.getUTCDate(),t,2)}function kR(e,t){return ke(e.getUTCHours(),t,2)}function CR(e,t){return ke(e.getUTCHours()%12||12,t,2)}function ER(e,t){return ke(1+Of.count(ri(e),e),t,3)}function aP(e,t){return ke(e.getUTCMilliseconds(),t,3)}function OR(e,t){return aP(e,t)+"000"}function TR(e,t){return ke(e.getUTCMonth()+1,t,2)}function AR(e,t){return ke(e.getUTCMinutes(),t,2)}function MR(e,t){return ke(e.getUTCSeconds(),t,2)}function LR(e){var t=e.getUTCDay();return t===0?7:t}function DR(e,t){return ke(Af.count(ri(e)-1,e),t,2)}function sP(e){var t=e.getUTCDay();return t>=4||t===0?zs(e):zs.ceil(e)}function IR(e,t){return e=sP(e),ke(zs.count(ri(e),e)+(ri(e).getUTCDay()===4),t,2)}function RR(e){return e.getUTCDay()}function zR(e,t){return ke(yd.count(ri(e)-1,e),t,2)}function $R(e,t){return ke(e.getUTCFullYear()%100,t,2)}function BR(e,t){return e=sP(e),ke(e.getUTCFullYear()%100,t,2)}function FR(e,t){return ke(e.getUTCFullYear()%1e4,t,4)}function UR(e,t){var n=e.getUTCDay();return e=n>=4||n===0?zs(e):zs.ceil(e),ke(e.getUTCFullYear()%1e4,t,4)}function HR(){return"+0000"}function mw(){return"%"}function pw(e){return+e}function gw(e){return Math.floor(+e/1e3)}var Ga,oP,lP;ZR({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ZR(e){return Ga=Z6(e),oP=Ga.format,Ga.parse,lP=Ga.utcFormat,Ga.utcParse,Ga}function WR(e){return new Date(e)}function VR(e){return e instanceof Date?+e:+new Date(+e)}function N0(e,t,n,r,i,a,l,u,d,m){var h=u0(),f=h.invert,g=h.domain,x=m(".%L"),j=m(":%S"),w=m("%I:%M"),S=m("%I %p"),_=m("%a %d"),N=m("%b %d"),v=m("%B"),k=m("%Y");function O(A){return(d(A)<A?x:u(A)<A?j:l(A)<A?w:a(A)<A?S:r(A)<A?i(A)<A?_:N:n(A)<A?v:k)(A)}return h.invert=function(A){return new Date(f(A))},h.domain=function(A){return arguments.length?g(Array.from(A,VR)):g().map(WR)},h.ticks=function(A){var E=g();return e(E[0],E[E.length-1],A??10)},h.tickFormat=function(A,E){return E==null?O:m(E)},h.nice=function(A){var E=g();return(!A||typeof A.range!="function")&&(A=t(E[0],E[E.length-1],A??10)),A?g(qS(E,A)):h},h.copy=function(){return Wl(h,N0(e,t,n,r,i,a,l,u,d,m))},h}function KR(){return er.apply(N0(U6,H6,ni,w0,Tf,Vl,b0,y0,ha,oP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qR(){return er.apply(N0(B6,F6,ri,j0,Af,Of,_0,x0,ha,lP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mf(){var e=0,t=1,n,r,i,a,l=Kt,u=!1,d;function m(f){return f==null||isNaN(f=+f)?d:l(i===0?.5:(f=(a(f)-n)*i,u?Math.max(0,Math.min(1,f)):f))}m.domain=function(f){return arguments.length?([e,t]=f,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),m):[e,t]},m.clamp=function(f){return arguments.length?(u=!!f,m):u},m.interpolator=function(f){return arguments.length?(l=f,m):l};function h(f){return function(g){var x,j;return arguments.length?([x,j]=g,l=f(x,j),m):[l(0),l(1)]}}return m.range=h(Ys),m.rangeRound=h(c0),m.unknown=function(f){return arguments.length?(d=f,m):d},function(f){return a=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),m}}function Wi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function cP(){var e=Zi(Mf()(Kt));return e.copy=function(){return Wi(e,cP())},li.apply(e,arguments)}function uP(){var e=h0(Mf()).domain([1,10]);return e.copy=function(){return Wi(e,uP()).base(e.base())},li.apply(e,arguments)}function dP(){var e=m0(Mf());return e.copy=function(){return Wi(e,dP()).constant(e.constant())},li.apply(e,arguments)}function S0(){var e=p0(Mf());return e.copy=function(){return Wi(e,S0()).exponent(e.exponent())},li.apply(e,arguments)}function GR(){return S0.apply(null,arguments).exponent(.5)}function fP(){var e=[],t=Kt;function n(r){if(r!=null&&!isNaN(r=+r))return t((Hl(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Ii),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>L5(e,a/r))},n.copy=function(){return fP(t).domain(e)},li.apply(n,arguments)}function Lf(){var e=0,t=.5,n=1,r=1,i,a,l,u,d,m=Kt,h,f=!1,g;function x(w){return isNaN(w=+w)?g:(w=.5+((w=+h(w))-a)*(r*w<r*a?u:d),m(f?Math.max(0,Math.min(1,w)):w))}x.domain=function(w){return arguments.length?([e,t,n]=w,i=h(e=+e),a=h(t=+t),l=h(n=+n),u=i===a?0:.5/(a-i),d=a===l?0:.5/(l-a),r=a<i?-1:1,x):[e,t,n]},x.clamp=function(w){return arguments.length?(f=!!w,x):f},x.interpolator=function(w){return arguments.length?(m=w,x):m};function j(w){return function(S){var _,N,v;return arguments.length?([_,N,v]=S,m=o6(w,[_,N,v]),x):[m(0),m(.5),m(1)]}}return x.range=j(Ys),x.rangeRound=j(c0),x.unknown=function(w){return arguments.length?(g=w,x):g},function(w){return h=w,i=w(e),a=w(t),l=w(n),u=i===a?0:.5/(a-i),d=a===l?0:.5/(l-a),r=a<i?-1:1,x}}function hP(){var e=Zi(Lf()(Kt));return e.copy=function(){return Wi(e,hP())},li.apply(e,arguments)}function mP(){var e=h0(Lf()).domain([.1,1,10]);return e.copy=function(){return Wi(e,mP()).base(e.base())},li.apply(e,arguments)}function pP(){var e=m0(Lf());return e.copy=function(){return Wi(e,pP()).constant(e.constant())},li.apply(e,arguments)}function P0(){var e=p0(Lf());return e.copy=function(){return Wi(e,P0()).exponent(e.exponent())},li.apply(e,arguments)}function YR(){return P0.apply(null,arguments).exponent(.5)}const Ho=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:s0,scaleDiverging:hP,scaleDivergingLog:mP,scaleDivergingPow:P0,scaleDivergingSqrt:YR,scaleDivergingSymlog:pP,scaleIdentity:KS,scaleImplicit:rg,scaleLinear:VS,scaleLog:GS,scaleOrdinal:a0,scalePoint:R5,scalePow:g0,scaleQuantile:QS,scaleQuantize:JS,scaleRadial:XS,scaleSequential:cP,scaleSequentialLog:uP,scaleSequentialPow:S0,scaleSequentialQuantile:fP,scaleSequentialSqrt:GR,scaleSequentialSymlog:dP,scaleSqrt:O6,scaleSymlog:YS,scaleThreshold:eP,scaleTime:KR,scaleUtc:qR,tickFormat:WS},Symbol.toStringTag,{value:"Module"}));var Vi=e=>e.chartData,XR=K([Vi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),k0=(e,t,n,r)=>r?XR(e):Vi(e);function $s(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Sn(t)&&Sn(n))return!0}return!1}function vw(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function QR(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,a;if(Sn(n))i=n;else if(typeof n=="function")return;if(Sn(r))a=r;else if(typeof r=="function")return;var l=[i,a];if($s(l))return l}}function JR(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if($s(r))return vw(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(de(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&d_.test(i)){var d=d_.exec(i);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(a==="auto")t!=null&&(u=Math.max(...t));else if(de(a))u=a;else if(typeof a=="function")try{t!=null&&(u=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&f_.test(a)){var h=f_.exec(a);if(h==null||t==null)u=void 0;else{var f=+h[1];u=t[1]+f}}else u=t==null?void 0:t[1];var g=[l,u];if($s(g))return t==null?g:vw(g,t,n)}}}var Xs=1e9,e8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},E0,Ze=!0,Gn="[DecimalError] ",_a=Gn+"Invalid argument: ",C0=Gn+"Exponent out of range: ",Qs=Math.floor,aa=Math.pow,t8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vn,mt=1e7,Fe=7,gP=9007199254740991,xd=Qs(gP/Fe),le={};le.absoluteValue=le.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};le.comparedTo=le.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};le.decimalPlaces=le.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Fe;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};le.dividedBy=le.div=function(e){return Gr(this,new this.constructor(e))};le.dividedToIntegerBy=le.idiv=function(e){var t=this,n=t.constructor;return Me(Gr(t,new n(e),0,1),n.precision)};le.equals=le.eq=function(e){return!this.cmp(e)};le.exponent=function(){return rt(this)};le.greaterThan=le.gt=function(e){return this.cmp(e)>0};le.greaterThanOrEqualTo=le.gte=function(e){return this.cmp(e)>=0};le.isInteger=le.isint=function(){return this.e>this.d.length-2};le.isNegative=le.isneg=function(){return this.s<0};le.isPositive=le.ispos=function(){return this.s>0};le.isZero=function(){return this.s===0};le.lessThan=le.lt=function(e){return this.cmp(e)<0};le.lessThanOrEqualTo=le.lte=function(e){return this.cmp(e)<1};le.logarithm=le.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(vn))throw Error(Gn+"NaN");if(n.s<1)throw Error(Gn+(n.s?"NaN":"-Infinity"));return n.eq(vn)?new r(0):(Ze=!1,t=Gr(Cl(n,a),Cl(e,a),a),Ze=!0,Me(t,i))};le.minus=le.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?xP(t,e):vP(t,(e.s=-e.s,e))};le.modulo=le.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Gn+"NaN");return n.s?(Ze=!1,t=Gr(n,e,0,1).times(e),Ze=!0,n.minus(t)):Me(new r(n),i)};le.naturalExponential=le.exp=function(){return yP(this)};le.naturalLogarithm=le.ln=function(){return Cl(this)};le.negated=le.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};le.plus=le.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?vP(t,e):xP(t,(e.s=-e.s,e))};le.precision=le.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(_a+e);if(t=rt(i)+1,r=i.d.length-1,n=r*Fe+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};le.squareRoot=le.sqrt=function(){var e,t,n,r,i,a,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Gn+"NaN")}for(e=rt(u),Ze=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=Sr(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Qs((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new d(t)):r=new d(i.toString()),n=d.precision,i=l=n+3;;)if(a=r,r=a.plus(Gr(u,a,l+2)).times(.5),Sr(a.d).slice(0,l)===(t=Sr(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(Me(a,n+1,0),a.times(a).eq(u)){r=a;break}}else if(t!="9999")break;l+=4}return Ze=!0,Me(r,n)};le.times=le.mul=function(e){var t,n,r,i,a,l,u,d,m,h=this,f=h.constructor,g=h.d,x=(e=new f(e)).d;if(!h.s||!e.s)return new f(0);for(e.s*=h.s,n=h.e+e.e,d=g.length,m=x.length,d<m&&(a=g,g=x,x=a,l=d,d=m,m=l),a=[],l=d+m,r=l;r--;)a.push(0);for(r=m;--r>=0;){for(t=0,i=d+r;i>r;)u=a[i]+x[r]*g[i-r-1]+t,a[i--]=u%mt|0,t=u/mt|0;a[i]=(a[i]+t)%mt|0}for(;!a[--l];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,Ze?Me(e,f.precision):e};le.toDecimalPlaces=le.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Or(e,0,Xs),t===void 0?t=r.rounding:Or(t,0,8),Me(n,e+rt(n)+1,t))};le.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Oa(r,!0):(Or(e,0,Xs),t===void 0?t=i.rounding:Or(t,0,8),r=Me(new i(r),e+1,t),n=Oa(r,!0,e+1)),n};le.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?Oa(i):(Or(e,0,Xs),t===void 0?t=a.rounding:Or(t,0,8),r=Me(new a(i),e+rt(i)+1,t),n=Oa(r.abs(),!1,e+rt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};le.toInteger=le.toint=function(){var e=this,t=e.constructor;return Me(new t(e),rt(e)+1,t.rounding)};le.toNumber=function(){return+this};le.toPower=le.pow=function(e){var t,n,r,i,a,l,u=this,d=u.constructor,m=12,h=+(e=new d(e));if(!e.s)return new d(vn);if(u=new d(u),!u.s){if(e.s<1)throw Error(Gn+"Infinity");return u}if(u.eq(vn))return u;if(r=d.precision,e.eq(vn))return Me(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,a=u.s,l){if((n=h<0?-h:h)<=gP){for(i=new d(vn),t=Math.ceil(r/Fe+4),Ze=!1;n%2&&(i=i.times(u),xw(i.d,t)),n=Qs(n/2),n!==0;)u=u.times(u),xw(u.d,t);return Ze=!0,e.s<0?new d(vn).div(i):Me(i,r)}}else if(a<0)throw Error(Gn+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,Ze=!1,i=e.times(Cl(u,r+m)),Ze=!0,i=yP(i),i.s=a,i};le.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=rt(i),r=Oa(i,n<=a.toExpNeg||n>=a.toExpPos)):(Or(e,1,Xs),t===void 0?t=a.rounding:Or(t,0,8),i=Me(new a(i),e,t),n=rt(i),r=Oa(i,e<=n||n<=a.toExpNeg,e)),r};le.toSignificantDigits=le.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Or(e,1,Xs),t===void 0?t=r.rounding:Or(t,0,8)),Me(new r(n),e,t)};le.toString=le.valueOf=le.val=le.toJSON=le[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=rt(e),n=e.constructor;return Oa(e,t<=n.toExpNeg||t>=n.toExpPos)};function vP(e,t){var n,r,i,a,l,u,d,m,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Ze?Me(t,f):t;if(d=e.d,m=t.d,l=e.e,i=t.e,d=d.slice(),a=l-i,a){for(a<0?(r=d,a=-a,u=m.length):(r=m,i=l,u=d.length),l=Math.ceil(f/Fe),u=l>u?l+1:u+1,a>u&&(a=u,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(u=d.length,a=m.length,u-a<0&&(a=u,r=m,m=d,d=r),n=0;a;)n=(d[--a]=d[a]+m[a]+n)/mt|0,d[a]%=mt;for(n&&(d.unshift(n),++i),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=i,Ze?Me(t,f):t}function Or(e,t,n){if(e!==~~e||e<t||e>n)throw Error(_a+e)}function Sr(e){var t,n,r,i=e.length-1,a="",l=e[0];if(i>0){for(a+=l,t=1;t<i;t++)r=e[t]+"",n=Fe-r.length,n&&(a+=vi(n)),a+=r;l=e[t],r=l+"",n=Fe-r.length,n&&(a+=vi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var Gr=function(){function e(r,i){var a,l=0,u=r.length;for(r=r.slice();u--;)a=r[u]*i+l,r[u]=a%mt|0,l=a/mt|0;return l&&r.unshift(l),r}function t(r,i,a,l){var u,d;if(a!=l)d=a>l?1:-1;else for(u=d=0;u<a;u++)if(r[u]!=i[u]){d=r[u]>i[u]?1:-1;break}return d}function n(r,i,a){for(var l=0;a--;)r[a]-=l,l=r[a]<i[a]?1:0,r[a]=l*mt+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,l){var u,d,m,h,f,g,x,j,w,S,_,N,v,k,O,A,E,I,$=r.constructor,D=r.s==i.s?1:-1,M=r.d,z=i.d;if(!r.s)return new $(r);if(!i.s)throw Error(Gn+"Division by zero");for(d=r.e-i.e,E=z.length,O=M.length,x=new $(D),j=x.d=[],m=0;z[m]==(M[m]||0);)++m;if(z[m]>(M[m]||0)&&--d,a==null?N=a=$.precision:l?N=a+(rt(r)-rt(i))+1:N=a,N<0)return new $(0);if(N=N/Fe+2|0,m=0,E==1)for(h=0,z=z[0],N++;(m<O||h)&&N--;m++)v=h*mt+(M[m]||0),j[m]=v/z|0,h=v%z|0;else{for(h=mt/(z[0]+1)|0,h>1&&(z=e(z,h),M=e(M,h),E=z.length,O=M.length),k=E,w=M.slice(0,E),S=w.length;S<E;)w[S++]=0;I=z.slice(),I.unshift(0),A=z[0],z[1]>=mt/2&&++A;do h=0,u=t(z,w,E,S),u<0?(_=w[0],E!=S&&(_=_*mt+(w[1]||0)),h=_/A|0,h>1?(h>=mt&&(h=mt-1),f=e(z,h),g=f.length,S=w.length,u=t(f,w,g,S),u==1&&(h--,n(f,E<g?I:z,g))):(h==0&&(u=h=1),f=z.slice()),g=f.length,g<S&&f.unshift(0),n(w,f,S),u==-1&&(S=w.length,u=t(z,w,E,S),u<1&&(h++,n(w,E<S?I:z,S))),S=w.length):u===0&&(h++,w=[0]),j[m++]=h,u&&w[0]?w[S++]=M[k]||0:(w=[M[k]],S=1);while((k++<O||w[0]!==void 0)&&N--)}return j[0]||j.shift(),x.e=d,Me(x,l?a+rt(x)+1:a)}}();function yP(e,t){var n,r,i,a,l,u,d=0,m=0,h=e.constructor,f=h.precision;if(rt(e)>16)throw Error(C0+rt(e));if(!e.s)return new h(vn);for(t==null?(Ze=!1,u=f):u=t,l=new h(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(r=Math.log(aa(2,m))/Math.LN10*2+5|0,u+=r,n=i=a=new h(vn),h.precision=u;;){if(i=Me(i.times(e),u),n=n.times(++d),l=a.plus(Gr(i,n,u)),Sr(l.d).slice(0,u)===Sr(a.d).slice(0,u)){for(;m--;)a=Me(a.times(a),u);return h.precision=f,t==null?(Ze=!0,Me(a,f)):a}a=l}}function rt(e){for(var t=e.e*Fe,n=e.d[0];n>=10;n/=10)t++;return t}function jm(e,t,n){if(t>e.LN10.sd())throw Ze=!0,n&&(e.precision=n),Error(Gn+"LN10 precision limit exceeded");return Me(new e(e.LN10),t)}function vi(e){for(var t="";e--;)t+="0";return t}function Cl(e,t){var n,r,i,a,l,u,d,m,h,f=1,g=10,x=e,j=x.d,w=x.constructor,S=w.precision;if(x.s<1)throw Error(Gn+(x.s?"NaN":"-Infinity"));if(x.eq(vn))return new w(0);if(t==null?(Ze=!1,m=S):m=t,x.eq(10))return t==null&&(Ze=!0),jm(w,m);if(m+=g,w.precision=m,n=Sr(j),r=n.charAt(0),a=rt(x),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=Sr(x.d),r=n.charAt(0),f++;a=rt(x),r>1?(x=new w("0."+n),a++):x=new w(r+"."+n.slice(1))}else return d=jm(w,m+2,S).times(a+""),x=Cl(new w(r+"."+n.slice(1)),m-g).plus(d),w.precision=S,t==null?(Ze=!0,Me(x,S)):x;for(u=l=x=Gr(x.minus(vn),x.plus(vn),m),h=Me(x.times(x),m),i=3;;){if(l=Me(l.times(h),m),d=u.plus(Gr(l,new w(i),m)),Sr(d.d).slice(0,m)===Sr(u.d).slice(0,m))return u=u.times(2),a!==0&&(u=u.plus(jm(w,m+2,S).times(a+""))),u=Gr(u,new w(f),m),w.precision=S,t==null?(Ze=!0,Me(u,S)):u;u=d,i+=2}}function yw(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Qs(n/Fe),e.d=[],r=(n+1)%Fe,n<0&&(r+=Fe),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Fe;r<i;)e.d.push(+t.slice(r,r+=Fe));t=t.slice(r),r=Fe-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Ze&&(e.e>xd||e.e<-xd))throw Error(C0+n)}else e.s=0,e.e=0,e.d=[0];return e}function Me(e,t,n){var r,i,a,l,u,d,m,h,f=e.d;for(l=1,a=f[0];a>=10;a/=10)l++;if(r=t-l,r<0)r+=Fe,i=t,m=f[h=0];else{if(h=Math.ceil((r+1)/Fe),a=f.length,h>=a)return e;for(m=a=f[h],l=1;a>=10;a/=10)l++;r%=Fe,i=r-Fe+l}if(n!==void 0&&(a=aa(10,l-i-1),u=m/a%10|0,d=t<0||f[h+1]!==void 0||m%a,d=n<4?(u||d)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||d||n==6&&(r>0?i>0?m/aa(10,l-i):0:f[h-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return d?(a=rt(e),f.length=1,t=t-a-1,f[0]=aa(10,(Fe-t%Fe)%Fe),e.e=Qs(-t/Fe)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=h,a=1,h--):(f.length=h+1,a=aa(10,Fe-r),f[h]=i>0?(m/aa(10,l-i)%aa(10,i)|0)*a:0),d)for(;;)if(h==0){(f[0]+=a)==mt&&(f[0]=1,++e.e);break}else{if(f[h]+=a,f[h]!=mt)break;f[h--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(Ze&&(e.e>xd||e.e<-xd))throw Error(C0+rt(e));return e}function xP(e,t){var n,r,i,a,l,u,d,m,h,f,g=e.constructor,x=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),Ze?Me(t,x):t;if(d=e.d,f=t.d,r=t.e,m=e.e,d=d.slice(),l=m-r,l){for(h=l<0,h?(n=d,l=-l,u=f.length):(n=f,r=m,u=d.length),i=Math.max(Math.ceil(x/Fe),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=d.length,u=f.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(d[i]!=f[i]){h=d[i]<f[i];break}l=0}for(h&&(n=d,d=f,f=n,t.s=-t.s),u=d.length,i=f.length-u;i>0;--i)d[u++]=0;for(i=f.length;i>l;){if(d[--i]<f[i]){for(a=i;a&&d[--a]===0;)d[a]=mt-1;--d[a],d[i]+=mt}d[i]-=f[i]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(t.d=d,t.e=r,Ze?Me(t,x):t):new g(0)}function Oa(e,t,n){var r,i=rt(e),a=Sr(e.d),l=a.length;return t?(n&&(r=n-l)>0?a=a.charAt(0)+"."+a.slice(1)+vi(r):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+vi(-i-1)+a,n&&(r=n-l)>0&&(a+=vi(r))):i>=l?(a+=vi(i+1-l),n&&(r=n-i-1)>0&&(a=a+"."+vi(r))):((r=i+1)<l&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(a+="."),a+=vi(r))),e.s<0?"-"+a:a}function xw(e,t){if(e.length>t)return e.length=t,!0}function bP(e){var t,n,r;function i(a){var l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,a instanceof i){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(_a+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return yw(l,a.toString())}else if(typeof a!="string")throw Error(_a+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,t8.test(a))yw(l,a);else throw Error(_a+a)}if(i.prototype=le,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=bP,i.config=i.set=n8,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function n8(e){if(!e||typeof e!="object")throw Error(Gn+"Object expected");var t,n,r,i=["precision",1,Xs,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Qs(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(_a+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(_a+n+": "+r);return this}var E0=bP(e8);vn=new E0(1);const Ce=E0;var r8=e=>e,_P={"@@functional/placeholder":!0},wP=e=>e===_P,bw=e=>function t(){return arguments.length===0||arguments.length===1&&wP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},jP=(e,t)=>e===1?t:bw(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(l=>l!==_P).length;return a>=e?t(...r):jP(e-a,bw(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=r.map(h=>wP(h)?u.shift():h);return t(...m,...u)}))}),Df=e=>jP(e.length,e),og=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},i8=Df((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),a8=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return r8;var i=n.reverse(),a=i[0],l=i.slice(1);return function(){return l.reduce((u,d)=>d(u),a(...arguments))}},lg=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),NP=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t&&i.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=i,n=e(...i)),n}};function SP(e){var t;return e===0?t=1:t=Math.floor(new Ce(e).abs().log(10).toNumber())+1,t}function PP(e,t,n){for(var r=new Ce(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}Df((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Df((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Df((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var kP=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},CP=(e,t,n)=>{if(e.lte(0))return new Ce(0);var r=SP(e.toNumber()),i=new Ce(10).pow(r),a=e.div(i),l=r!==1?.05:.1,u=new Ce(Math.ceil(a.div(l).toNumber())).add(n).mul(l),d=u.mul(i);return t?new Ce(d.toNumber()):new Ce(Math.ceil(d.toNumber()))},s8=(e,t,n)=>{var r=new Ce(1),i=new Ce(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new Ce(10).pow(SP(e)-1),i=new Ce(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Ce(Math.floor(e)))}else e===0?i=new Ce(Math.floor((t-1)/2)):n||(i=new Ce(Math.floor(e)));var l=Math.floor((t-1)/2),u=a8(i8(d=>i.add(new Ce(d-l).mul(r)).toNumber()),og);return u(0,t)},EP=function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new Ce(0),tickMin:new Ce(0),tickMax:new Ce(0)};var l=CP(new Ce(n).sub(t).div(r-1),i,a),u;t<=0&&n>=0?u=new Ce(0):(u=new Ce(t).add(n).div(2),u=u.sub(new Ce(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new Ce(n).sub(u).div(l).toNumber()),h=d+m+1;return h>r?EP(t,n,r,i,a+1):(h<r&&(m=n>0?m+(r-h):m,d=n>0?d:d+(r-h)),{step:l,tickMin:u.sub(new Ce(d).mul(l)),tickMax:u.add(new Ce(m).mul(l))})};function o8(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[l,u]=kP([t,n]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...og(0,r-1).map(()=>1/0)]:[...og(0,r-1).map(()=>-1/0),u];return t>n?lg(d):d}if(l===u)return s8(l,r,i);var{step:m,tickMin:h,tickMax:f}=EP(l,u,a,i,0),g=PP(h,f.add(new Ce(.1).mul(m)),m);return t>n?lg(g):g}function l8(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=kP([n,r]);if(a===-1/0||l===1/0)return[n,r];if(a===l)return[a];var u=Math.max(t,2),d=CP(new Ce(l).sub(a).div(u-1),i,0),m=[...PP(new Ce(a),new Ce(l),d),l];return i===!1&&(m=m.map(h=>Math.round(h))),n>r?lg(m):m}var c8=NP(o8),u8=NP(l8),OP=e=>e.rootProps.maxBarSize,d8=e=>e.rootProps.barGap,TP=e=>e.rootProps.barCategoryGap,f8=e=>e.rootProps.barSize,If=e=>e.rootProps.stackOffset,O0=e=>e.options.chartName,T0=e=>e.rootProps.syncId,AP=e=>e.rootProps.syncMethod,A0=e=>e.options.eventEmitter,zr={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},pn={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},Rf=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},h8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:zr.angleAxisId,includeHidden:!1,name:void 0,reversed:zr.reversed,scale:zr.scale,tick:zr.tick,tickCount:void 0,ticks:void 0,type:zr.type,unit:void 0},m8={allowDataOverflow:pn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:pn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:pn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:pn.scale,tick:pn.tick,tickCount:pn.tickCount,ticks:void 0,type:pn.type,unit:void 0},p8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:zr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zr.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zr.scale,tick:zr.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},g8={allowDataOverflow:pn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:pn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:pn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:pn.scale,tick:pn.tick,tickCount:pn.tickCount,ticks:void 0,type:"category",unit:void 0},M0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?p8:h8,L0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?g8:m8,zf=e=>e.polarOptions,D0=K([si,oi,yt],fD),MP=K([zf,D0],(e,t)=>{if(e!=null)return pr(e.innerRadius,t,0)}),LP=K([zf,D0],(e,t)=>{if(e!=null)return pr(e.outerRadius,t,t*.8)}),v8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},DP=K([zf],v8);K([M0,DP],Rf);var IP=K([D0,MP,LP],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});K([L0,IP],Rf);var RP=K([Oe,zf,MP,LP,si,oi],(e,t,n,r,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:pr(l,i,i/2),cy:pr(u,a,a/2),innerRadius:n,outerRadius:r,startAngle:d,endAngle:m,clockWise:!1}}}),st=(e,t)=>t,$f=(e,t,n)=>n;function I0(e){return e==null?void 0:e.id}var dt=e=>{var t=Oe(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Js=e=>e.tooltip.settings.axisId,bt=e=>{var t=dt(e),n=Js(e);return Kl(e,t,n)},zP=K([bt],e=>e==null?void 0:e.dataKey);function $P(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=n,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:r;if(!(m==null||m.length===0)){var h=I0(u);m.forEach((f,g)=>{var x=a==null||i?g:String(Gt(f,a,null)),j=Gt(f,u.dataKey,0),w;l.has(x)?w=l.get(x):w={},Object.assign(w,{[h]:j}),l.set(x,w)})}}),Array.from(l.values())}function Bf(e){return e.stackId!=null&&e.dataKey!=null}function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_w(Object(n),!0).forEach(function(r){y8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y8(e,t,n){return(t=x8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x8(e){var t=b8(e,"string");return typeof t=="symbol"?t:t+""}function b8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cg=[0,"auto"],fn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},BP=(e,t)=>e.cartesianAxis.xAxis[t],ci=(e,t)=>{var n=BP(e,t);return n??fn},hn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:cg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ul},FP=(e,t)=>e.cartesianAxis.yAxis[t],ui=(e,t)=>{var n=FP(e,t);return n??hn},_8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},R0=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??_8},dn=(e,t,n)=>{switch(t){case"xAxis":return ci(e,n);case"yAxis":return ui(e,n);case"zAxis":return R0(e,n);case"angleAxis":return M0(e,n);case"radiusAxis":return L0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},w8=(e,t,n)=>{switch(t){case"xAxis":return ci(e,n);case"yAxis":return ui(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Kl=(e,t,n)=>{switch(t){case"xAxis":return ci(e,n);case"yAxis":return ui(e,n);case"angleAxis":return M0(e,n);case"radiusAxis":return L0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},UP=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function HP(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var z0=e=>e.graphicalItems.cartesianItems,j8=K([st,$f],HP),ZP=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),ql=K([z0,dn,j8],ZP),WP=K([ql],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Bf)),VP=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),KP=K([ql],VP),qP=e=>e.map(t=>t.data).filter(Boolean).flat(1),N8=K([ql],qP),GP=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},$0=K([N8,k0],GP),YP=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Gt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Gt(i,r)}))):e.map(r=>({value:r})),Ff=K([$0,dn,ql],YP);function XP(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function za(e){return e.filter(t=>Er(t)||t instanceof Date).map(Number).filter(t=>jn(t)===!1)}function S8(e,t,n){return!n||typeof t!="number"||jn(t)?[]:n.length?za(n.flatMap(r=>{var i=Gt(e,r.dataKey),a,l;if(Array.isArray(i)?[a,l]=i:a=l=i,!(!Sn(a)||!Sn(l)))return[t-a,t+l]})):[]}var P8=K([WP,k0,bt],$P),QP=(e,t,n)=>{var r={},i=t.reduce((a,l)=>(l.stackId==null||(a[l.stackId]==null&&(a[l.stackId]=[]),a[l.stackId].push(l)),a),r);return Object.fromEntries(Object.entries(i).map(a=>{var[l,u]=a,d=u.map(I0);return[l,{stackedData:CD(e,d,n),graphicalItems:u}]}))},ug=K([P8,WP,If],QP),JP=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var a=MD(e,r,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},k8=K([ug,Vi,st],JP),ek=(e,t,n,r,i)=>n.length>0?e.flatMap(a=>n.flatMap(l=>{var u,d,m=(u=r[l.id])===null||u===void 0?void 0:u.filter(f=>XP(i,f)),h=Gt(a,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey);return{value:h,errorDomain:S8(a,h,m)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Gt(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),Uf=e=>e.errorBars,tk=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>XP(n,r));K([KP,Uf,st],tk);var C8=K([$0,dn,KP,Uf,st],ek);function E8(e){var{value:t}=e;if(Er(t)||t instanceof Date)return t}var ww=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=za(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},O8=(e,t,n)=>{var r=e.map(E8).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&Y2(r))?DS(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},B0=e=>{var t;if(e==null||!("domain"in e))return cg;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=za(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:cg},_d=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),l=Math.min(...a),u=Math.max(...a);return[l,u]}},nk=e=>e.referenceElements.dots,eo=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),T8=K([nk,st,$f],eo),rk=e=>e.referenceElements.areas,A8=K([rk,st,$f],eo),ik=e=>e.referenceElements.lines,M8=K([ik,st,$f],eo),ak=(e,t)=>{var n=za(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},L8=K(T8,st,ak),sk=(e,t)=>{var n=za(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},D8=K([A8,st],sk),ok=(e,t)=>{var n=za(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},I8=K(M8,st,ok),R8=K(L8,I8,D8,(e,t,n)=>_d(e,n,t)),z8=K([dn],B0),lk=(e,t,n,r,i,a,l)=>{var u=QR(t,e.allowDataOverflow);if(u!=null)return u;var d=a==="vertical"&&l==="xAxis"||a==="horizontal"&&l==="yAxis",m=d?_d(n,i,ww(r)):_d(i,ww(r));return JR(t,m,e.allowDataOverflow)},$8=K([dn,z8,k8,C8,R8,Oe,st],lk),B8=[0,1],ck=(e,t,n,r,i,a,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Da(t,a);return m&&u==null?DS(0,n.length):d==="category"?O8(r,e,m):i==="expand"?B8:l}},F0=K([dn,Oe,$0,Ff,If,st,$8],ck),uk=(e,t,n,r,i)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var u="scale".concat($l(a));return u in Ho?u:"point"}}},Gl=K([dn,Oe,UP,O0,st],uk);function F8(e){if(e!=null){if(e in Ho)return Ho[e]();var t="scale".concat($l(e));if(t in Ho)return Ho[t]()}}function U0(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=F8(t);if(i!=null){var a=i.domain(n).range(r);return jD(a),a}}}var dk=(e,t,n)=>{var r=B0(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&$s(e))return c8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&$s(e))return u8(e,t.tickCount,t.allowDecimals)}},H0=K([F0,Kl,Gl],dk),fk=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&$s(t)&&Array.isArray(n)&&n.length>0){var i=t[0],a=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,a),Math.max(l,u)]}return t},U8=K([dn,F0,H0,st],fk),H8=K(Ff,dn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(za(e.map(u=>u.value))).sort((u,d)=>u-d);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var l=r[a+1]-r[a];n=Math.min(n,l)}return n/i}}),hk=K(H8,Oe,TP,yt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Sn(e))return 0;var a=t==="vertical"?r.height:r.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var l=pr(n,e*a),u=e*a/2;return u-l-(u-l)/a*l}return 0}),Z8=(e,t)=>{var n=ci(e,t);return n==null||typeof n.padding!="string"?0:hk(e,"xAxis",t,n.padding)},W8=(e,t)=>{var n=ui(e,t);return n==null||typeof n.padding!="string"?0:hk(e,"yAxis",t,n.padding)},V8=K(ci,Z8,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),K8=K(ui,W8,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),q8=K([yt,V8,kf,Pf,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),G8=K([yt,Oe,K8,kf,Pf,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:l}=i;return a?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Yl=(e,t,n,r)=>{var i;switch(t){case"xAxis":return q8(e,n,r);case"yAxis":return G8(e,n,r);case"zAxis":return(i=R0(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return DP(e);case"radiusAxis":return IP(e,n);default:return}},mk=K([dn,Yl],Rf),to=K([dn,Gl,U8,mk],U0);K([ql,Uf,st],tk);function pk(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Hf=(e,t)=>t,Zf=(e,t,n)=>n,Y8=K(Nf,Hf,Zf,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(pk)),X8=K(Sf,Hf,Zf,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(pk)),gk=(e,t)=>({width:e.width,height:t.height}),Q8=(e,t)=>{var n=typeof t.width=="number"?t.width:Ul;return{width:n,height:e.height}},vk=K(yt,ci,gk),J8=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},ez=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},tz=K(oi,yt,Y8,Hf,Zf,(e,t,n,r,i)=>{var a={},l;return n.forEach(u=>{var d=gk(t,u);l==null&&(l=J8(t,r,e));var m=r==="top"&&!i||r==="bottom"&&i;a[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),a}),nz=K(si,yt,X8,Hf,Zf,(e,t,n,r,i)=>{var a={},l;return n.forEach(u=>{var d=Q8(t,u);l==null&&(l=ez(t,r,e));var m=r==="left"&&!i||r==="right"&&i;a[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),a}),rz=(e,t)=>{var n=ci(e,t);if(n!=null)return tz(e,n.orientation,n.mirror)},iz=K([yt,ci,rz,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),az=(e,t)=>{var n=ui(e,t);if(n!=null)return nz(e,n.orientation,n.mirror)},sz=K([yt,ui,az,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),yk=K(yt,ui,(e,t)=>{var n=typeof t.width=="number"?t.width:Ul;return{width:n,height:e.height}}),jw=(e,t,n)=>{switch(t){case"xAxis":return vk(e,n).width;case"yAxis":return yk(e,n).height;default:return}},xk=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:l}=n,u=Da(e,r),d=t.map(m=>m.value);if(l&&u&&a==="category"&&i&&Y2(d))return d}},Z0=K([Oe,Ff,dn,st],xk),bk=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,l=Da(e,r);if(l&&(i==="number"||a!=="auto"))return t.map(u=>u.value)}},W0=K([Oe,Ff,Kl,st],bk),Nw=K([Oe,w8,Gl,to,Z0,W0,Yl,H0,st],(e,t,n,r,i,a,l,u,d)=>{if(t==null)return null;var m=Da(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:a,duplicateDomain:i,isCategorical:m,niceTicks:u,range:l,realScaleType:n,scale:r}}),oz=(e,t,n,r,i,a,l,u,d)=>{if(!(t==null||r==null)){var m=Da(e,d),{type:h,ticks:f,tickCount:g}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,j=h==="category"&&r.bandwidth?r.bandwidth()/x:0;j=d==="angleAxis"&&a!=null&&a.length>=2?an(a[0]-a[1])*2*j:j;var w=f||i;if(w){var S=w.map((_,N)=>{var v=l?l.indexOf(_):_;return{index:N,coordinate:r(v)+j,value:_,offset:j}});return S.filter(_=>!jn(_.coordinate))}return m&&u?u.map((_,N)=>({coordinate:r(_)+j,value:_,index:N,offset:j})):r.ticks?r.ticks(g).map(_=>({coordinate:r(_)+j,value:_,offset:j})):r.domain().map((_,N)=>({coordinate:r(_)+j,value:l?l[_]:_,index:N,offset:j}))}},_k=K([Oe,Kl,Gl,to,H0,Yl,Z0,W0,st],oz),lz=(e,t,n,r,i,a,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Da(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(r==null?void 0:r.length)>=2?an(r[0]-r[1])*2*m:m,u&&a?a.map((h,f)=>({coordinate:n(h)+m,value:h,index:f,offset:m})):n.ticks?n.ticks(d).map(h=>({coordinate:n(h)+m,value:h,offset:m})):n.domain().map((h,f)=>({coordinate:n(h)+m,value:i?i[h]:h,index:f,offset:m}))}},Bs=K([Oe,Kl,to,Yl,Z0,W0,st],lz),Fs=K(dn,to,(e,t)=>{if(!(e==null||t==null))return bd(bd({},e),{},{scale:t})}),cz=K([dn,Gl,F0,mk],U0);K((e,t,n)=>R0(e,n),cz,(e,t)=>{if(!(e==null||t==null))return bd(bd({},e),{},{scale:t})});var uz=K([Oe,Nf,Sf],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),wk=e=>e.options.defaultTooltipEventType,jk=e=>e.options.validateTooltipEventTypes;function Nk(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function V0(e,t){var n=wk(e),r=jk(e);return Nk(t,n,r)}function dz(e){return ue(t=>V0(t,e))}var Sk=(e,t)=>{var n,r=Number(t);if(!(jn(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},fz=e=>e.tooltip.settings,wi={active:!1,index:null,dataKey:void 0,coordinate:void 0},hz={itemInteraction:{click:wi,hover:wi},axisInteraction:{click:wi,hover:wi},keyboardInteraction:wi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Pk=Cn({name:"tooltip",initialState:hz,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=qr(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:mz,removeTooltipEntrySettings:pz,setTooltipSettingsState:gz,setActiveMouseOverItemIndex:kk,mouseLeaveItem:vz,mouseLeaveChart:Ck,setActiveClickItemIndex:yz,setMouseOverAxisIndex:Ek,setMouseClickAxisIndex:xz,setSyncInteraction:dg,setKeyboardInteraction:fg}=Pk.actions,bz=Pk.reducer;function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(n),!0).forEach(function(r){_z(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _z(e,t,n){return(t=wz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wz(e){var t=jz(e,"string");return typeof t=="symbol"?t:t+""}function jz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nz(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Sz(e){return e.index!=null}var Ok=(e,t,n,r)=>{if(t==null)return wi;var i=Nz(e,t,n);if(i==null)return wi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Sz(i)){if(a)return Yc(Yc({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Yc(Yc({},wi),{},{coordinate:i.coordinate})},K0=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!Sn(r))return n;var i=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(i,Math.min(r,a)))},Tk=(e,t,n,r,i,a,l,u)=>{if(!(a==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,a);if(m!=null)return m;var h=i==null?void 0:i[Number(a)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},Ak=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.dataKey)===i})},Xl=e=>e.options.tooltipPayloadSearcher,no=e=>e.tooltip;function Pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pw(Object(n),!0).forEach(function(r){Pz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pz(e,t,n){return(t=kz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kz(e){var t=Cz(e,"string");return typeof t=="symbol"?t:t+""}function Cz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ez(e,t){return e??t}var Mk=(e,t,n,r,i,a,l)=>{if(!(t==null||a==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:h}=n,f=[];return e.reduce((g,x)=>{var j,{dataDefinedOnItem:w,settings:S}=x,_=Ez(w,u),N=Array.isArray(_)?gS(_,m,h):_,v=(j=S==null?void 0:S.dataKey)!==null&&j!==void 0?j:r,k=S==null?void 0:S.nameKey,O;if(r&&Array.isArray(N)&&!Array.isArray(N[0])&&l==="axis"?O=x3(N,r,i):O=a(N,t,d,k),Array.isArray(O))O.forEach(E=>{var I=kw(kw({},S),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});g.push(h_({tooltipEntrySettings:I,dataKey:E.dataKey,payload:E.payload,value:Gt(E.payload,E.dataKey),name:E.name}))});else{var A;g.push(h_({tooltipEntrySettings:S,dataKey:v,payload:O,value:Gt(O,v),name:(A=Gt(O,k))!==null&&A!==void 0?A:S==null?void 0:S.name}))}return g},f)}},q0=K([bt,Oe,UP,O0,dt],uk),Oz=K([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Tz=K([dt,Js],HP),Ql=K([Oz,bt,Tz],ZP),Az=K([Ql],e=>e.filter(Bf)),Mz=K([Ql],qP),ro=K([Mz,Vi],GP),Lz=K([Az,Vi,bt],$P),G0=K([ro,bt,Ql],YP),Dz=K([bt],B0),Iz=K([Ql],e=>e.filter(Bf)),Rz=K([Lz,Iz,If],QP),zz=K([Rz,Vi,dt],JP),$z=K([Ql],VP),Bz=K([ro,bt,$z,Uf,dt],ek),Fz=K([nk,dt,Js],eo),Uz=K([Fz,dt],ak),Hz=K([rk,dt,Js],eo),Zz=K([Hz,dt],sk),Wz=K([ik,dt,Js],eo),Vz=K([Wz,dt],ok),Kz=K([Uz,Vz,Zz],_d),qz=K([bt,Dz,zz,Bz,Kz,Oe,dt],lk),Lk=K([bt,Oe,ro,G0,If,dt,qz],ck),Gz=K([Lk,bt,q0],dk),Yz=K([bt,Lk,Gz,dt],fk),Dk=e=>{var t=dt(e),n=Js(e),r=!1;return Yl(e,t,n,r)},Ik=K([bt,Dk],Rf),Rk=K([bt,q0,Yz,Ik],U0),Xz=K([Oe,G0,bt,dt],xk),Qz=K([Oe,G0,bt,dt],bk),Jz=(e,t,n,r,i,a,l,u)=>{if(t){var{type:d}=t,m=Da(e,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=d==="category"&&r.bandwidth?r.bandwidth()/h:0;return f=u==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?an(i[0]-i[1])*2*f:f,m&&l?l.map((g,x)=>({coordinate:r(g)+f,value:g,index:x,offset:f})):r.domain().map((g,x)=>({coordinate:r(g)+f,value:a?a[g]:g,index:x,offset:f}))}}},di=K([Oe,bt,q0,Rk,Dk,Xz,Qz,dt],Jz),Y0=K([wk,jk,fz],(e,t,n)=>Nk(n.shared,e,t)),zk=e=>e.tooltip.settings.trigger,X0=e=>e.tooltip.settings.defaultIndex,Wf=K([no,Y0,zk,X0],Ok),Us=K([Wf,ro],K0),$k=K([di,Us],Sk),Bk=K([Wf],e=>{if(e)return e.dataKey}),Fk=K([no,Y0,zk,X0],Ak),e7=K([si,oi,Oe,yt,di,X0,Fk,Xl],Tk),t7=K([Wf,e7],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),n7=K([Wf],e=>e.active),r7=K([Fk,Us,Vi,zP,$k,Xl,Y0],Mk);K([r7],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ew(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cw(Object(n),!0).forEach(function(r){i7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i7(e,t,n){return(t=a7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a7(e){var t=s7(e,"string");return typeof t=="symbol"?t:t+""}function s7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o7=()=>ue(bt),l7=()=>{var e=o7(),t=ue(di),n=ue(Rk);return Gv(Ew(Ew({},e),{},{scale:n}),t)},c7=()=>ue(O0),Q0=(e,t)=>t,Uk=(e,t,n)=>n,J0=(e,t,n,r)=>r,u7=K(di,e=>yf(e,t=>t.coordinate)),ey=K([no,Q0,Uk,J0],Ok),Hk=K([ey,ro],K0),d7=(e,t,n)=>{if(t!=null){var r=no(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Zk=K([no,Q0,Uk,J0],Ak),wd=K([si,oi,Oe,yt,di,J0,Zk,Xl],Tk),f7=K([ey,wd],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),Wk=K(di,Hk,Sk),h7=K([Zk,Hk,Vi,zP,Wk,Xl,Q0],Mk),m7=K([ey],e=>({isActive:e.active,activeIndex:e.index})),p7=(e,t,n,r,i,a,l,u)=>{if(!(!e||!t||!r||!i||!a)){var d=LD(e.chartX,e.chartY,t,n,u);if(d){var m=ID(d,t),h=_D(m,l,a,r,i),f=DD(t,a,h,d);return{activeIndex:String(h),activeCoordinate:f}}}};function hg(){return hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hg.apply(null,arguments)}function Ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ow(Object(n),!0).forEach(function(r){g7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ow(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g7(e,t,n){return(t=v7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v7(e){var t=y7(e,"string");return typeof t=="symbol"?t:t+""}function y7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x7(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:a,layout:l,cursor:u,tooltipEventType:d,chartName:m}=e,h=t,f=n,g=r;if(!u||!h||m!=="ScatterChart"&&d!=="axis")return null;var x,j;if(m==="ScatterChart")x=h,j=FI;else if(m==="BarChart")x=UI(l,h,i,a),j=CS;else if(l==="radial"){var{cx:w,cy:S,radius:_,startAngle:N,endAngle:v}=ES(h);x={cx:w,cy:S,startAngle:N,endAngle:v,innerRadius:_,outerRadius:_},j=TS}else x={points:_5(l,h,i)},j=AI;var k=typeof u=="object"&&"className"in u?u.className:void 0,O=Xc(Xc(Xc(Xc({stroke:"#ccc",pointerEvents:"none"},i),x),Ot(u,!1)),{},{payload:f,payloadIndex:g,className:$e("recharts-tooltip-cursor",k)});return b.isValidElement(u)?b.cloneElement(u,O):b.createElement(j,O)}function b7(e){var t=l7(),n=_S(),r=e0(),i=c7();return b.createElement(x7,hg({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var Vk=b.createContext(null),_7=()=>b.useContext(Vk),Kk={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(d,m,h){this.fn=d,this.context=m,this.once=h||!1}function a(d,m,h,f,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,f||d,g),j=n?n+m:m;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],x]:d._events[j].push(x):(d._events[j]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new r:delete d._events[m]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],h,f;if(this._eventsCount===0)return m;for(f in h=this._events)t.call(h,f)&&m.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(h)):m},u.prototype.listeners=function(m){var h=n?n+m:m,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var g=0,x=f.length,j=new Array(x);g<x;g++)j[g]=f[g].fn;return j},u.prototype.listenerCount=function(m){var h=n?n+m:m,f=this._events[h];return f?f.fn?1:f.length:0},u.prototype.emit=function(m,h,f,g,x,j){var w=n?n+m:m;if(!this._events[w])return!1;var S=this._events[w],_=arguments.length,N,v;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,f),!0;case 4:return S.fn.call(S.context,h,f,g),!0;case 5:return S.fn.call(S.context,h,f,g,x),!0;case 6:return S.fn.call(S.context,h,f,g,x,j),!0}for(v=1,N=new Array(_-1);v<_;v++)N[v-1]=arguments[v];S.fn.apply(S.context,N)}else{var k=S.length,O;for(v=0;v<k;v++)switch(S[v].once&&this.removeListener(m,S[v].fn,void 0,!0),_){case 1:S[v].fn.call(S[v].context);break;case 2:S[v].fn.call(S[v].context,h);break;case 3:S[v].fn.call(S[v].context,h,f);break;case 4:S[v].fn.call(S[v].context,h,f,g);break;default:if(!N)for(O=1,N=new Array(_-1);O<_;O++)N[O-1]=arguments[O];S[v].fn.apply(S[v].context,N)}}return!0},u.prototype.on=function(m,h,f){return a(this,m,h,f,!1)},u.prototype.once=function(m,h,f){return a(this,m,h,f,!0)},u.prototype.removeListener=function(m,h,f,g){var x=n?n+m:m;if(!this._events[x])return this;if(!h)return l(this,x),this;var j=this._events[x];if(j.fn)j.fn===h&&(!g||j.once)&&(!f||j.context===f)&&l(this,x);else{for(var w=0,S=[],_=j.length;w<_;w++)(j[w].fn!==h||g&&!j[w].once||f&&j[w].context!==f)&&S.push(j[w]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var h;return m?(h=n?n+m:m,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(Kk);var w7=Kk.exports;const j7=Tr(w7);var El=new j7,mg="recharts.syncEvent.tooltip",Tw="recharts.syncEvent.brush";function N7(e,t){if(t){var n=Number.parseInt(t,10);if(!jn(n))return e==null?void 0:e[n]}}var S7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},qk=Cn({name:"options",initialState:S7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),P7=qk.reducer,{createEventEmitter:k7}=qk.actions;function C7(e){return e.tooltip.syncInteraction}var E7={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Gk=Cn({name:"chartData",initialState:E7,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:Aw,setDataStartEndIndexes:O7,setComputedData:EZ}=Gk.actions,T7=Gk.reducer,A7=["x","y"];function Mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mw(Object(n),!0).forEach(function(r){M7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M7(e,t,n){return(t=L7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L7(e){var t=D7(e,"string");return typeof t=="symbol"?t:t+""}function D7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I7(e,t){if(e==null)return{};var n,r,i=R7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function R7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Yk=()=>{};function z7(){var e=ue(T0),t=ue(A0),n=at(),r=ue(AP),i=ue(di),a=e0(),l=Xv(),u=ue(d=>d.rootProps.className);b.useEffect(()=>{if(e==null)return Yk;var d=(m,h,f)=>{if(t!==f&&e===m){if(r==="index"){var g;if(l&&h!==null&&h!==void 0&&(g=h.payload)!==null&&g!==void 0&&g.coordinate){var x=h.payload.coordinate,{x:j,y:w}=x,S=I7(x,A7),_=ea(ea(ea({},S),typeof j=="number"&&{x:Math.max(l.x,Math.min(j,l.x+l.width))}),typeof w=="number"&&{y:Math.max(l.y,Math.min(w,l.y+l.height))}),N=ea(ea({},h),{},{payload:ea(ea({},h.payload),{},{coordinate:_})});n(N)}else n(h);return}if(i!=null){var v;if(typeof r=="function"){var k={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},O=r(i,k);v=i[O]}else r==="value"&&(v=i.find(B=>String(B.value)===h.payload.label));var{coordinate:A}=h.payload;if(v==null||h.payload.active===!1||A==null||l==null){n(dg({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:E,y:I}=A,$=Math.min(E,l.x+l.width),D=Math.min(I,l.y+l.height),M={x:a==="horizontal"?v.coordinate:$,y:a==="horizontal"?D:v.coordinate},z=dg({active:h.payload.active,coordinate:M,dataKey:h.payload.dataKey,index:String(v.index),label:h.payload.label});n(z)}}};return El.on(mg,d),()=>{El.off(mg,d)}},[u,n,t,e,r,i,a,l])}function $7(){var e=ue(T0),t=ue(A0),n=at();b.useEffect(()=>{if(e==null)return Yk;var r=(i,a,l)=>{t!==l&&e===i&&n(O7(a))};return El.on(Tw,r),()=>{El.off(Tw,r)}},[n,t,e])}function B7(){var e=at();b.useEffect(()=>{e(k7())},[e]),z7(),$7()}function F7(e,t,n,r,i,a){var l=ue(g=>d7(g,e,t)),u=ue(A0),d=ue(T0),m=ue(AP),h=ue(C7),f=h==null?void 0:h.active;b.useEffect(()=>{if(!f&&d!=null&&u!=null){var g=dg({active:a,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});El.emit(mg,d,g,u)}},[f,n,l,i,r,u,d,m,a])}function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lw(Object(n),!0).forEach(function(r){U7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U7(e,t,n){return(t=H7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H7(e){var t=Z7(e,"string");return typeof t=="symbol"?t:t+""}function Z7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W7(e){return e.dataKey}function V7(e,t){return b.isValidElement(e)?b.cloneElement(e,t):typeof e=="function"?b.createElement(e,t):b.createElement(yI,t)}var Iw=[],K7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Gs.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function q7(e){var t=Jn(e,K7),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:a,content:l,filterNull:u,isAnimationActive:d,offset:m,payloadUniqBy:h,position:f,reverseDirection:g,useTranslate3d:x,wrapperStyle:j,cursor:w,shared:S,trigger:_,defaultIndex:N,portal:v,axisId:k}=t,O=at(),A=typeof N=="number"?String(N):N;b.useEffect(()=>{O(gz({shared:S,trigger:_,axisId:k,active:n,defaultIndex:A}))},[O,S,_,k,n,A]);var E=Xv(),I=jS(),$=dz(S),{activeIndex:D,isActive:M}=ue(Q=>m7(Q,$,_,A)),z=ue(Q=>h7(Q,$,_,A)),B=ue(Q=>Wk(Q,$,_,A)),C=ue(Q=>f7(Q,$,_,A)),U=z,Z=_7(),q=n??M,[R,Y]=WN([U,q]),G=$==="axis"?B:void 0;F7($,_,C,G,D,q);var re=v??Z;if(re==null)return null;var ne=U??Iw;q||(ne=Iw),u&&ne.length&&(ne=MN(U.filter(Q=>Q.value!=null&&(Q.hide!==!0||t.includeHidden)),h,W7));var H=ne.length>0,ee=b.createElement(SI,{allowEscapeViewBox:r,animationDuration:i,animationEasing:a,isAnimationActive:d,active:q,coordinate:C,hasPayload:H,offset:m,position:f,reverseDirection:g,useTranslate3d:x,viewBox:E,wrapperStyle:j,lastBoundingBox:R,innerRef:Y,hasPortalFromProps:!!v},V7(l,Dw(Dw({},t),{},{payload:ne,label:G,active:q,coordinate:C,accessibilityLayer:I})));return b.createElement(b.Fragment,null,Gd.createPortal(ee,re),q&&b.createElement(b7,{cursor:w,tooltipEventType:$,coordinate:C,payload:U,index:D}))}var Xk={},Qk={},Jk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:a}={}){let l,u=null;const d=a!=null&&a.includes("leading"),m=a==null||a.includes("trailing"),h=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},f=()=>{m&&h(),w()};let g=null;const x=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,f()},r)},j=()=>{g!==null&&(clearTimeout(g),g=null)},w=()=>{j(),l=void 0,u=null},S=()=>{h()},_=function(...N){if(i!=null&&i.aborted)return;l=this,u=N;const v=g==null;x(),d&&v&&h()};return _.schedule=x,_.cancel=w,_.flush=S,i==null||i.addEventListener("abort",w,{once:!0}),_}e.debounce=t})(Jk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jk;function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:u=!0,maxWait:d}=a,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let h,f=null;const g=t.debounce(function(...w){h=r.apply(this,w),f=null},i,{edges:m}),x=function(...w){return d!=null&&(f===null&&(f=Date.now()),Date.now()-f>=d)?(h=r.apply(this,w),f=Date.now(),g.cancel(),g.schedule(),h):(g.apply(this,w),h)},j=()=>(g.flush(),h);return x.cancel=g.cancel,x.flush=j,x}e.debounce=n})(Qk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qk;function n(r,i=0,a={}){const{leading:l=!0,trailing:u=!0}=a;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(Xk);var G7=Xk.throttle;const Y7=Tr(G7);var Jo=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function Rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rw(Object(n),!0).forEach(function(r){X7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X7(e,t,n){return(t=Q7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q7(e){var t=J7(e,"string");return typeof t=="symbol"?t:t+""}function J7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e$=b.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:h=0,id:f,className:g,onResize:x,style:j={}}=e,w=b.useRef(null),S=b.useRef();S.current=x,b.useImperativeHandle(t,()=>w.current);var[_,N]=b.useState({containerWidth:r.width,containerHeight:r.height}),v=b.useCallback((O,A)=>{N(E=>{var I=Math.round(O),$=Math.round(A);return E.containerWidth===I&&E.containerHeight===$?E:{containerWidth:I,containerHeight:$}})},[]);b.useEffect(()=>{var O=$=>{var D,{width:M,height:z}=$[0].contentRect;v(M,z),(D=S.current)===null||D===void 0||D.call(S,M,z)};h>0&&(O=Y7(O,h,{trailing:!0,leading:!1}));var A=new ResizeObserver(O),{width:E,height:I}=w.current.getBoundingClientRect();return v(E,I),A.observe(w.current),()=>{A.disconnect()}},[v,h]);var k=b.useMemo(()=>{var{containerWidth:O,containerHeight:A}=_;if(O<0||A<0)return null;Jo(da(i)||da(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),Jo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var E=da(i)?O:i,I=da(a)?A:a;return n&&n>0&&(E?I=E/n:I&&(E=I*n),d&&I>d&&(I=d)),Jo(E>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,I,i,a,l,u,n),b.Children.map(m,$=>b.cloneElement($,{width:E,height:I,style:Nm({width:E,height:I},$.props.style)}))},[n,m,a,d,u,l,_,i]);return b.createElement("div",{id:f?"".concat(f):void 0,className:$e("recharts-responsive-container",g),style:Nm(Nm({},j),{},{width:i,height:a,minWidth:l,minHeight:u,maxHeight:d}),ref:w},b.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),eC=e=>null;eC.displayName="Cell";function t$(e,t,n){return(t=n$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n$(e){var t=r$(e,"string");return typeof t=="symbol"?t:t+""}function r$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class i${constructor(t){t$(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function a$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zw(Object(n),!0).forEach(function(r){s$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s$(e,t,n){return(t=o$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o$(e){var t=l$(e,"string");return typeof t=="symbol"?t:t+""}function l$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c$={cacheSize:2e3,enableCache:!0},tC=a$({},c$),$w=new i$(tC.cacheSize),u$={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Bw="recharts_measurement_span";function d$(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(l,"|").concat(u)}var Fw=(e,t)=>{try{var n=document.getElementById(Bw);n||(n=document.createElement("span"),n.setAttribute("id",Bw),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,u$,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},el=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Gs.isSsr)return{width:0,height:0};if(!tC.enableCache)return Fw(t,n);var r=d$(t,n),i=$w.get(r);if(i)return i;var a=Fw(t,n);return $w.set(r,a),a},Uw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Hw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,f$=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,h$=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nC={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},m$=Object.keys(nC),cs="NaN";function p$(e,t){return e*nC[t]}class en{static parse(t){var n,[,r,i]=(n=h$.exec(t))!==null&&n!==void 0?n:[];return new en(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,jn(t)&&(this.unit=""),n!==""&&!f$.test(n)&&(this.num=NaN,this.unit=""),m$.includes(n)&&(this.num=p$(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new en(NaN,""):new en(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new en(NaN,""):new en(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new en(NaN,""):new en(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new en(NaN,""):new en(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return jn(this.num)}}function rC(e){if(e.includes(cs))return cs;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=(n=Uw.exec(t))!==null&&n!==void 0?n:[],l=en.parse(r??""),u=en.parse(a??""),d=i==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return cs;t=t.replace(Uw,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,h,f,g]=(m=Hw.exec(t))!==null&&m!==void 0?m:[],x=en.parse(h??""),j=en.parse(g??""),w=f==="+"?x.add(j):x.subtract(j);if(w.isNaN())return cs;t=t.replace(Hw,w.toString())}return t}var Zw=/\(([^()]*)\)/;function g$(e){for(var t=e,n;(n=Zw.exec(t))!=null;){var[,r]=n;t=t.replace(Zw,rC(r))}return t}function v$(e){var t=e.replace(/\s+/g,"");return t=g$(t),t=rC(t),t}function y$(e){try{return v$(e)}catch{return cs}}function Sm(e){var t=y$(e.slice(5,-1));return t===cs?"":t}var x$=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],b$=["dx","dy","angle","className","breakAll"];function pg(){return pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pg.apply(null,arguments)}function Ww(e,t){if(e==null)return{};var n,r,i=_$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iC=/[ \f\n\r\t\v\u2028\u2029]+/,aC=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];vt(t)||(n?i=t.toString().split(""):i=t.toString().split(iC));var a=i.map(u=>({word:u,width:el(u,r).width})),l=n?0:el("",r).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}},w$=(e,t,n,r,i)=>{var{maxLines:a,children:l,style:u,breakAll:d}=e,m=de(a),h=l,f=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce((z,B)=>{var{word:C,width:U}=B,Z=z[z.length-1];if(Z&&(r==null||i||Z.width+U+n<Number(r)))Z.words.push(C),Z.width+=U+n;else{var q={words:[C],width:U};z.push(q)}return z},[])},g=f(t),x=D=>D.reduce((M,z)=>M.width>z.width?M:z);if(!m||i)return g;var j=g.length>a||x(g).width>Number(r);if(!j)return g;for(var w="",S=D=>{var M=h.slice(0,D),z=aC({breakAll:d,style:u,children:M+w}).wordsWithComputedWidth,B=f(z),C=B.length>a||x(B).width>Number(r);return[C,B]},_=0,N=h.length-1,v=0,k;_<=N&&v<=h.length-1;){var O=Math.floor((_+N)/2),A=O-1,[E,I]=S(A),[$]=S(O);if(!E&&!$&&(_=O+1),E&&$&&(N=O-1),!E&&$){k=I;break}v++}return k||g},Vw=e=>{var t=vt(e)?[]:e.toString().split(iC);return[{words:t}]},j$=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:l}=e;if((t||n)&&!Gs.isSsr){var u,d,m=aC({breakAll:a,children:r,style:i});if(m){var{wordsWithComputedWidth:h,spaceWidth:f}=m;u=h,d=f}else return Vw(r);return w$({breakAll:a,children:r,maxLines:l,style:i},u,d,t,n)}return Vw(r)},Kw="#808080",ty=b.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:d="end",fill:m=Kw}=e,h=Ww(e,x$),f=b.useMemo(()=>j$({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:x,angle:j,className:w,breakAll:S}=h,_=Ww(h,b$);if(!Er(n)||!Er(r)||f.length===0)return null;var N=n+(de(g)?g:0),v=r+(de(x)?x:0),k;switch(d){case"start":k=Sm("calc(".concat(a,")"));break;case"middle":k=Sm("calc(".concat((f.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:k=Sm("calc(".concat(f.length-1," * -").concat(i,")"));break}var O=[];if(l){var A=f[0].width,{width:E}=h;O.push("scale(".concat(de(E)?E/A:1,")"))}return j&&O.push("rotate(".concat(j,", ").concat(N,", ").concat(v,")")),O.length&&(_.transform=O.join(" ")),b.createElement("text",pg({},Ot(_,!0),{ref:t,x:N,y:v,className:$e("recharts-text",w),textAnchor:u,fill:m.includes("url")?Kw:m}),f.map((I,$)=>{var D=I.words.join(S?"":" ");return b.createElement("tspan",{x:N,dy:$===0?k:i,key:"".concat(D,"-").concat($)},D)}))});ty.displayName="Text";var N$=["labelRef"];function S$(e,t){if(e==null)return{};var n,r,i=P$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qw(Object(n),!0).forEach(function(r){k$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k$(e,t,n){return(t=C$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C$(e){var t=E$(e,"string");return typeof t=="symbol"?t:t+""}function E$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $r(){return $r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$r.apply(null,arguments)}var sC=b.createContext(null),O$=e=>{var{x:t,y:n,width:r,height:i,children:a}=e,l=b.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return b.createElement(sC.Provider,{value:l},a)},oC=()=>{var e=b.useContext(sC),t=Xv();return e||t},T$=b.createContext(null),A$=()=>{var e=b.useContext(T$),t=ue(RP);return e||t},M$=e=>{var{value:t,formatter:n}=e,r=vt(e.children)?t:e.children;return typeof n=="function"?n(r):r},ny=e=>e!=null&&typeof e=="function",L$=(e,t)=>{var n=an(t-e),r=Math.min(Math.abs(t-e),360);return n*r},D$=(e,t,n,r,i)=>{var{offset:a,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:h,startAngle:f,endAngle:g,clockWise:x}=i,j=(m+h)/2,w=L$(f,g),S=w>=0?1:-1,_,N;switch(t){case"insideStart":_=f+S*a,N=x;break;case"insideEnd":_=g-S*a,N=!x;break;case"end":_=g+S*a,N=x;break;default:throw new Error("Unsupported position ".concat(t))}N=w<=0?N:!N;var v=Pt(u,d,j,_),k=Pt(u,d,j,_+(N?1:-1)*359),O="M".concat(v.x,",").concat(v.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(N?0:1,`,
    `).concat(k.x,",").concat(k.y),A=vt(e.id)?bl("recharts-radial-line-"):e.id;return b.createElement("text",$r({},r,{dominantBaseline:"central",className:$e("recharts-radial-bar-label",l)}),b.createElement("defs",null,b.createElement("path",{id:A,d:O})),b.createElement("textPath",{xlinkHref:"#".concat(A)},n))},I$=(e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(n==="outside"){var{x:h,y:f}=Pt(r,i,l+t,m);return{x:h,y:f,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+l)/2,{x,y:j}=Pt(r,i,g,m);return{x,y:j,textAnchor:"middle",verticalAnchor:"middle"}},lC=e=>"cx"in e&&de(e.cx),R$=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,a;n!=null&&!lC(n)&&(a=n);var{x:l,y:u,width:d,height:m}=t,h=m>=0?1:-1,f=h*r,g=h>0?"end":"start",x=h>0?"start":"end",j=d>=0?1:-1,w=j*r,S=j>0?"end":"start",_=j>0?"start":"end";if(i==="top"){var N={x:l+d/2,y:u-h*r,textAnchor:"middle",verticalAnchor:g};return Qe(Qe({},N),a?{height:Math.max(u-a.y,0),width:d}:{})}if(i==="bottom"){var v={x:l+d/2,y:u+m+f,textAnchor:"middle",verticalAnchor:x};return Qe(Qe({},v),a?{height:Math.max(a.y+a.height-(u+m),0),width:d}:{})}if(i==="left"){var k={x:l-w,y:u+m/2,textAnchor:S,verticalAnchor:"middle"};return Qe(Qe({},k),a?{width:Math.max(k.x-a.x,0),height:m}:{})}if(i==="right"){var O={x:l+d+w,y:u+m/2,textAnchor:_,verticalAnchor:"middle"};return Qe(Qe({},O),a?{width:Math.max(a.x+a.width-O.x,0),height:m}:{})}var A=a?{width:d,height:m}:{};return i==="insideLeft"?Qe({x:l+w,y:u+m/2,textAnchor:_,verticalAnchor:"middle"},A):i==="insideRight"?Qe({x:l+d-w,y:u+m/2,textAnchor:S,verticalAnchor:"middle"},A):i==="insideTop"?Qe({x:l+d/2,y:u+f,textAnchor:"middle",verticalAnchor:x},A):i==="insideBottom"?Qe({x:l+d/2,y:u+m-f,textAnchor:"middle",verticalAnchor:g},A):i==="insideTopLeft"?Qe({x:l+w,y:u+f,textAnchor:_,verticalAnchor:x},A):i==="insideTopRight"?Qe({x:l+d-w,y:u+f,textAnchor:S,verticalAnchor:x},A):i==="insideBottomLeft"?Qe({x:l+w,y:u+m-f,textAnchor:_,verticalAnchor:g},A):i==="insideBottomRight"?Qe({x:l+d-w,y:u+m-f,textAnchor:S,verticalAnchor:g},A):i&&typeof i=="object"&&(de(i.x)||da(i.x))&&(de(i.y)||da(i.y))?Qe({x:l+pr(i.x,d),y:u+pr(i.y,m),textAnchor:"end",verticalAnchor:"end"},A):Qe({x:l+d/2,y:u+m/2,textAnchor:"middle",verticalAnchor:"middle"},A)},z$={offset:5};function yi(e){var t=Jn(e,z$),{viewBox:n,position:r,value:i,children:a,content:l,className:u="",textBreakAll:d,labelRef:m}=t,h=A$(),f=oC(),g=r==="center"?f:h??f,x=n||g;if(!x||vt(i)&&vt(a)&&!b.isValidElement(l)&&typeof l!="function")return null;var j=Qe(Qe({},t),{},{viewBox:x});if(b.isValidElement(l)){var w=S$(j,N$);return b.cloneElement(l,w)}var S;if(typeof l=="function"){if(S=b.createElement(l,j),b.isValidElement(S))return S}else S=M$(t);var _=lC(x),N=Ot(t,!0);if(_&&(r==="insideStart"||r==="insideEnd"||r==="end"))return D$(t,r,S,N,x);var v=_?I$(x,t.offset,t.position):R$(t,x);return b.createElement(ty,$r({ref:m,className:$e("recharts-label",u)},N,v,{breakAll:d}),S)}yi.displayName="Label";var $$=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?b.createElement(yi,$r({key:"label-implicit"},r)):Er(e)?b.createElement(yi,$r({key:"label-implicit",value:e},r)):b.isValidElement(e)?e.type===yi?b.cloneElement(e,Qe({key:"label-implicit"},r)):b.createElement(yi,$r({key:"label-implicit",content:e},r)):ny(e)?b.createElement(yi,$r({key:"label-implicit",content:e},r)):e&&typeof e=="object"?b.createElement(yi,$r({},e,{key:"label-implicit"},r)):null};function B$(e){var{label:t}=e,n=oC();return $$(t,n)||null}var cC={},uC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(uC);var dC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(dC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uC,n=dC,r=gf;function i(a){if(r.isArrayLike(a))return t.last(n.toArray(a))}e.last=i})(cC);var F$=cC.last;const U$=Tr(F$);var H$=["valueAccessor"],Z$=["dataKey","clockWise","id","textBreakAll"];function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jd.apply(null,arguments)}function Gw(e,t){if(e==null)return{};var n,r,i=W$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var V$=e=>Array.isArray(e.value)?U$(e.value):e.value,fC=b.createContext(void 0),K$=fC.Provider,hC=b.createContext(void 0);hC.Provider;function q$(){return b.useContext(fC)}function G$(){return b.useContext(hC)}function mu(e){var{valueAccessor:t=V$}=e,n=Gw(e,H$),{dataKey:r,clockWise:i,id:a,textBreakAll:l}=n,u=Gw(n,Z$),d=q$(),m=G$(),h=d||m;return!h||!h.length?null:b.createElement($i,{className:"recharts-label-list"},h.map((f,g)=>{var x,j=vt(r)?t(f,g):Gt(f&&f.payload,r),w=vt(a)?{}:{id:"".concat(a,"-").concat(g)};return b.createElement(yi,jd({},Ot(f,!0),u,w,{fill:(x=n.fill)!==null&&x!==void 0?x:f.fill,parentViewBox:f.parentViewBox,value:j,textBreakAll:l,viewBox:f.viewBox,key:"label-".concat(g),index:g}))}))}mu.displayName="LabelList";function Y$(e){var{label:t}=e;return t?t===!0?b.createElement(mu,{key:"labelList-implicit"}):b.isValidElement(t)||ny(t)?b.createElement(mu,{key:"labelList-implicit",content:t}):typeof t=="object"?b.createElement(mu,jd({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var X$={radiusAxis:{},angleAxis:{}},Q$=Cn({name:"polarAxis",initialState:X$,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),J$=Q$.reducer,mC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${a}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(mC);var eB=mC.isPlainObject;const tB=Tr(eB);function Yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yw(Object(n),!0).forEach(function(r){nB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nB(e,t,n){return(t=rB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rB(e){var t=iB(e,"string");return typeof t=="symbol"?t:t+""}function iB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nd.apply(null,arguments)}var Qw=(e,t,n,r,i)=>{var a=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-a/2,",").concat(t+i),l+="L ".concat(e+n-a/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},aB={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sB=e=>{var t=Jn(e,aB),{x:n,y:r,upperWidth:i,lowerWidth:a,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:h,isUpdateAnimationActive:f}=t,g=b.useRef(),[x,j]=b.useState(-1),w=b.useRef(i),S=b.useRef(a),_=b.useRef(l),N=b.useRef(n),v=b.useRef(r),k=r0(e,"trapezoid-");if(b.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var C=g.current.getTotalLength();C&&j(C)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||l!==+l||i===0&&a===0||l===0)return null;var O=$e("recharts-trapezoid",u);if(!f)return b.createElement("g",null,b.createElement("path",Nd({},Ot(t,!0),{className:O,d:Qw(n,r,i,a,l)})));var A=w.current,E=S.current,I=_.current,$=N.current,D=v.current,M="0px ".concat(x===-1?1:x,"px"),z="".concat(x,"px 0px"),B=NS(["strokeDasharray"],m,d);return b.createElement(n0,{animationId:k,key:k,canBegin:x>0,duration:m,easing:d,isActive:f,begin:h},C=>{var U=Wt(A,i,C),Z=Wt(E,a,C),q=Wt(I,l,C),R=Wt($,n,C),Y=Wt(D,r,C);g.current&&(w.current=U,S.current=Z,_.current=q,N.current=R,v.current=Y);var G=C>0?{transition:B,strokeDasharray:z}:{strokeDasharray:M};return b.createElement("path",Nd({},Ot(t,!0),{className:O,d:Qw(R,Y,U,Z,q),ref:g,style:Xw(Xw({},G),t.style)}))})},oB=["option","shapeType","propTransformer","activeClassName","isActive"];function lB(e,t){if(e==null)return{};var n,r,i=cB(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cB(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jw(Object(n),!0).forEach(function(r){uB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uB(e,t,n){return(t=dB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dB(e){var t=fB(e,"string");return typeof t=="symbol"?t:t+""}function fB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hB(e,t){return Sd(Sd({},t),e)}function mB(e,t){return e==="symbols"}function e1(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return b.createElement(CS,n);case"trapezoid":return b.createElement(sB,n);case"sector":return b.createElement(TS,n);case"symbols":if(mB(t))return b.createElement(Ev,n);break;default:return null}}function pB(e){return b.isValidElement(e)?e.props:e}function gB(e){var{option:t,shapeType:n,propTransformer:r=hB,activeClassName:i="recharts-active-shape",isActive:a}=e,l=lB(e,oB),u;if(b.isValidElement(t))u=b.cloneElement(t,Sd(Sd({},l),pB(t)));else if(typeof t=="function")u=t(l);else if(tB(t)&&typeof t!="boolean"){var d=r(t,l);u=b.createElement(e1,{shapeType:n,elementProps:d})}else{var m=l;u=b.createElement(e1,{shapeType:n,elementProps:m})}return a?b.createElement($i,{className:i},u):u}var pC=(e,t)=>{var n=at();return(r,i)=>a=>{e==null||e(r,i,a),n(kk({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},gC=e=>{var t=at();return(n,r)=>i=>{e==null||e(n,r,i),t(vz())}},vC=(e,t)=>{var n=at();return(r,i)=>a=>{e==null||e(r,i,a),n(yz({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function vB(e){var{fn:t,args:n}=e,r=at(),i=Qn();return b.useEffect(()=>{if(!i){var a=t(n);return r(mz(a)),()=>{r(pz(a))}}},[t,n,r,i]),null}var yB=()=>{};function xB(e){var{legendPayload:t}=e,n=at(),r=Qn();return b.useEffect(()=>r?yB:(n(eI(t)),()=>{n(tI(t))}),[n,r,t]),null}var Pm,bB=()=>{var[e]=b.useState(()=>bl("uid-"));return e},_B=(Pm=$O.useId)!==null&&Pm!==void 0?Pm:bB;function wB(e,t){var n=_B();return t||(e?"".concat(e,"-").concat(n):n)}var jB=b.createContext(void 0),NB=e=>{var{id:t,type:n,children:r}=e,i=wB("recharts-".concat(n),t);return b.createElement(jB.Provider,{value:i},r(i))},SB={cartesianItems:[],polarItems:[]},yC=Cn({name:"graphicalItems",initialState:SB,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=qr(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=qr(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=qr(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:PB,replaceCartesianGraphicalItem:kB,removeCartesianGraphicalItem:CB,addPolarGraphicalItem:OZ,removePolarGraphicalItem:TZ}=yC.actions,EB=yC.reducer;function OB(e){var t=at(),n=b.useRef(null);return b.useEffect(()=>{n.current===null?t(PB(e)):n.current!==e&&t(kB({prev:n.current,next:e})),n.current=e},[t,e]),b.useEffect(()=>()=>{n.current&&(t(CB(n.current)),n.current=null)},[t]),null}function t1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t1(Object(n),!0).forEach(function(r){TB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TB(e,t,n){return(t=AB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AB(e){var t=MB(e,"string");return typeof t=="symbol"?t:t+""}function MB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LB={xAxis:{},yAxis:{},zAxis:{}},xC=Cn({name:"cartesianAxis",initialState:LB,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=n1(n1({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:DB,removeXAxis:IB,addYAxis:RB,removeYAxis:zB,addZAxis:AZ,removeZAxis:MZ,updateYAxisWidth:$B}=xC.actions,BB=xC.reducer,FB=K([yt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),UB=K([FB,si,oi],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),bC=()=>ue(UB),HB="Invariant failed";function ZB(e,t){throw new Error(HB)}var WB=["x","y"];function gg(){return gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gg.apply(null,arguments)}function r1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r1(Object(n),!0).forEach(function(r){VB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VB(e,t,n){return(t=KB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KB(e){var t=qB(e,"string");return typeof t=="symbol"?t:t+""}function qB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GB(e,t){if(e==null)return{};var n,r,i=YB(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function YB(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function XB(e,t){var{x:n,y:r}=e,i=GB(e,WB),a="".concat(n),l=parseInt(a,10),u="".concat(r),d=parseInt(u,10),m="".concat(t.height||i.height),h=parseInt(m,10),f="".concat(t.width||i.width),g=parseInt(f,10);return Do(Do(Do(Do(Do({},t),i),l?{x:l}:{}),d?{y:d}:{}),{},{height:h,width:g,name:t.name,radius:t.radius})}function ry(e){return b.createElement(gB,gg({shapeType:"rectangle",propTransformer:XB,activeClassName:"recharts-active-bar"},e))}var QB=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(de(t))return t;var a=de(r)||vt(r);return a?t(r,i):(a||ZB(),n)}},JB={},eF=Cn({name:"errorBars",initialState:JB,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),tF=eF.reducer,nF=["children"];function rF(e,t){if(e==null)return{};var n,r,i=iF(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var aF={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},sF=b.createContext(aF);function oF(e){var{children:t}=e,n=rF(e,nF);return b.createElement(sF.Provider,{value:n},t)}function _C(e,t){var n,r,i=ue(m=>ci(m,e)),a=ue(m=>ui(m,t)),l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:fn.allowDataOverflow,u=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:hn.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function lF(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=bC(),{needClipX:a,needClipY:l,needClip:u}=_C(t,n);if(!u)return null;var{x:d,y:m,width:h,height:f}=i;return b.createElement("clipPath",{id:"clipPath-".concat(r)},b.createElement("rect",{x:a?d:d-h/2,y:l?m:m-f/2,width:a?h:h*2,height:l?f:f*2}))}var cF=["onMouseEnter","onMouseLeave","onClick"],uF=["value","background","tooltipPosition"],dF=["id"],fF=["onMouseEnter","onClick","onMouseLeave"];function Bi(){return Bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bi.apply(null,arguments)}function i1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i1(Object(n),!0).forEach(function(r){hF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hF(e,t,n){return(t=mF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mF(e){var t=pF(e,"string");return typeof t=="symbol"?t:t+""}function pF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pd(e,t){if(e==null)return{};var n,r,i=gF(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var vF=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:r,value:xS(n,t),payload:e}]};function yF(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:a,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:xS(a,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function xF(e){var t=ue(Us),{data:n,dataKey:r,background:i,allOtherBarProps:a}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=a,m=Pd(a,cF),h=pC(l,r),f=gC(u),g=vC(d,r);if(!i||n==null)return null;var x=Ot(i,!1);return b.createElement(b.Fragment,null,n.map((j,w)=>{var{value:S,background:_,tooltipPosition:N}=j,v=Pd(j,uF);if(!_)return null;var k=h(j,w),O=f(j,w),A=g(j,w),E=Vt(Vt(Vt(Vt(Vt({option:i,isActive:String(w)===t},v),{},{fill:"#eee"},_),x),ff(m,j,w)),{},{onMouseEnter:k,onMouseLeave:O,onClick:A,dataKey:r,index:w,className:"recharts-bar-background-rectangle"});return b.createElement(ry,Bi({key:"background-bar-".concat(E.index)},E))}))}function bF(e){var{showLabels:t,children:n,rects:r}=e,i=r==null?void 0:r.map(a=>{var l={x:a.x,y:a.y,width:a.width,height:a.height};return Vt(Vt({},l),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:l,fill:a.fill})});return b.createElement(K$,{value:t?i:void 0},n)}function _F(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:a,dataKey:l}=e,u=ue(Us),d=ue(Bk),m=n&&String(a)===u&&(d==null||l===d),h=m?n:t;return b.createElement(ry,Bi({},r,i,{isActive:m,option:h,index:a,dataKey:l}))}function wF(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:a}=e;return b.createElement(ry,Bi({},n,r,{isActive:!1,option:t,index:i,dataKey:a}))}function jF(e){var{data:t,props:n}=e,r=qs(n),i=Pd(r,dF),{shape:a,dataKey:l,activeBar:u}=n,{onMouseEnter:d,onClick:m,onMouseLeave:h}=n,f=Pd(n,fF),g=pC(d,l),x=gC(h),j=vC(m,l);return t?b.createElement(b.Fragment,null,t.map((w,S)=>b.createElement($i,Bi({className:"recharts-bar-rectangle"},ff(f,w,S),{onMouseEnter:g(w,S),onMouseLeave:x(w,S),onClick:j(w,S),key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(S)}),u?b.createElement(_F,{shape:a,activeBar:u,baseProps:i,entry:w,index:S,dataKey:l}):b.createElement(wF,{shape:a,baseProps:i,entry:w,index:S,dataKey:l})))):null}function NF(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:a,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:h}=t,f=n.current,g=r0(t,"recharts-bar-"),[x,j]=b.useState(!1),w=!x,S=b.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),_=b.useCallback(()=>{typeof h=="function"&&h(),j(!0)},[h]);return b.createElement(bF,{showLabels:w,rects:r},b.createElement(n0,{animationId:g,begin:l,duration:u,isActive:a,easing:d,onAnimationEnd:S,onAnimationStart:_,key:g},N=>{var v=N===1?r:r==null?void 0:r.map((k,O)=>{var A=f&&f[O];if(A)return Vt(Vt({},k),{},{x:Wt(A.x,k.x,N),y:Wt(A.y,k.y,N),width:Wt(A.width,k.width,N),height:Wt(A.height,k.height,N)});if(i==="horizontal"){var E=Wt(0,k.height,N);return Vt(Vt({},k),{},{y:k.y+k.height-E,height:E})}var I=Wt(0,k.width,N);return Vt(Vt({},k),{},{width:I})});return N>0&&(n.current=v??null),v==null?null:b.createElement($i,null,b.createElement(jF,{props:t,data:v}))}),b.createElement(Y$,{label:t.label}),t.children)}function SF(e){var t=b.useRef(null);return b.createElement(NF,{previousRectanglesRef:t,props:e})}var wC=0,PF=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Gt(e,t)}};class kF extends b.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||n==null)return null;var h=$e("recharts-bar",i),f=m;return b.createElement($i,{className:h,id:m},u&&b.createElement("defs",null,b.createElement(lF,{clipPathId:f,xAxisId:a,yAxisId:l})),b.createElement($i,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(f,")"):void 0},b.createElement(xF,{data:n,dataKey:r,background:d,allOtherBarProps:this.props}),b.createElement(SF,this.props)))}}var CF={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Gs.isSsr,legendType:"rect",minPointSize:wC,xAxisId:0,yAxisId:0};function EF(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:h}=e,{needClip:f}=_C(t,n),g=e0(),x=Qn(),j=S3(e.children,eC),w=ue(N=>r9(N,t,n,x,e.id,j));if(g!=="vertical"&&g!=="horizontal")return null;var S,_=w==null?void 0:w[0];return _==null||_.height==null||_.width==null?S=0:S=g==="vertical"?_.height/2:_.width/2,b.createElement(oF,{xAxisId:t,yAxisId:n,data:w,dataPointFormatter:PF,errorBarOffset:S},b.createElement(kF,Bi({},e,{layout:g,needClip:f,data:w,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:h})))}function OF(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:h,displayedData:f,offset:g,cells:x,parentViewBox:j}=e,w=t==="horizontal"?u:l,S=h?w.scale.domain():null,_=OD({numericAxis:w});return f.map((N,v)=>{var k,O,A,E,I,$;h?k=ND(h[v],S):(k=Gt(N,n),Array.isArray(k)||(k=[_,k]));var D=QB(r,wC)(k[1],v);if(t==="horizontal"){var M,[z,B]=[u.scale(k[0]),u.scale(k[1])];O=u_({axis:l,ticks:d,bandSize:a,offset:i.offset,entry:N,index:v}),A=(M=B??z)!==null&&M!==void 0?M:void 0,E=i.size;var C=z-B;if(I=jn(C)?0:C,$={x:O,y:g.top,width:E,height:g.height},Math.abs(D)>0&&Math.abs(I)<Math.abs(D)){var U=an(I||D)*(Math.abs(D)-Math.abs(I));A-=U,I+=U}}else{var[Z,q]=[l.scale(k[0]),l.scale(k[1])];if(O=Z,A=u_({axis:u,ticks:m,bandSize:a,offset:i.offset,entry:N,index:v}),E=q-Z,I=i.size,$={x:g.left,y:A,width:g.width,height:I},Math.abs(D)>0&&Math.abs(E)<Math.abs(D)){var R=an(E||D)*(Math.abs(D)-Math.abs(E));E+=R}}if(O==null||A==null||E==null||I==null)return null;var Y=Vt(Vt({},N),{},{x:O,y:A,width:E,height:I,value:h?k:k[1],payload:N,background:$,tooltipPosition:{x:O+E/2,y:A+I/2},parentViewBox:j},x&&x[v]&&x[v].props);return Y}).filter(Boolean)}function TF(e){var t=Jn(e,CF),n=Qn();return b.createElement(NB,{id:t.id,type:"bar"},r=>b.createElement(b.Fragment,null,b.createElement(xB,{legendPayload:vF(t)}),b.createElement(vB,{fn:yF,args:t}),b.createElement(OB,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:ED(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),b.createElement(EF,Bi({},t,{id:r}))))}var vg=b.memo(TF);vg.displayName="Bar";function a1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a1(Object(n),!0).forEach(function(r){AF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AF(e,t,n){return(t=MF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MF(e){var t=LF(e,"string");return typeof t=="symbol"?t:t+""}function LF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DF=(e,t)=>t,IF=(e,t,n)=>n,RF=(e,t,n,r)=>r,zF=(e,t,n,r,i)=>i,Jl=K([z0,zF],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),$F=K([Jl],e=>e==null?void 0:e.maxBarSize),BF=(e,t,n,r,i,a)=>a,s1=(e,t,n)=>{var r=n??e;if(!vt(r))return pr(r,t,0)},FF=K([Oe,z0,DF,IF,RF],(e,t,n,r,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),UF=(e,t,n,r)=>{var i=Oe(e);return i==="horizontal"?ug(e,"yAxis",n,r):ug(e,"xAxis",t,r)},HF=(e,t,n)=>{var r=Oe(e);return r==="horizontal"?jw(e,"xAxis",t):jw(e,"yAxis",n)},ZF=(e,t,n)=>{var r={},i=e.filter(Bf),a=e.filter(m=>m.stackId==null),l=i.reduce((m,h)=>(m[h.stackId]||(m[h.stackId]=[]),m[h.stackId].push(h),m),r),u=Object.entries(l).map(m=>{var[h,f]=m,g=f.map(j=>j.dataKey),x=s1(t,n,f[0].barSize);return{stackId:h,dataKeys:g,barSize:x}}),d=a.map(m=>{var h=[m.dataKey].filter(g=>g!=null),f=s1(t,n,m.barSize);return{stackId:void 0,dataKeys:h,barSize:f}});return[...u,...d]},WF=K([FF,f8,HF],ZF),VF=(e,t,n,r,i)=>{var a,l,u=Jl(e,t,n,r,i);if(u!=null){var d=Oe(e),m=OP(e),{maxBarSize:h}=u,f=vt(h)?m:h,g,x;return d==="horizontal"?(g=Fs(e,"xAxis",t,r),x=Bs(e,"xAxis",t,r)):(g=Fs(e,"yAxis",n,r),x=Bs(e,"yAxis",n,r)),(a=(l=Gv(g,x,!0))!==null&&l!==void 0?l:f)!==null&&a!==void 0?a:0}},jC=(e,t,n,r)=>{var i=Oe(e),a,l;return i==="horizontal"?(a=Fs(e,"xAxis",t,r),l=Bs(e,"xAxis",t,r)):(a=Fs(e,"yAxis",n,r),l=Bs(e,"yAxis",n,r)),Gv(a,l)};function KF(e,t,n,r,i){var a=r.length;if(!(a<1)){var l=pr(e,n,0,!0),u,d=[];if(Sn(r[0].barSize)){var m=!1,h=n/a,f=r.reduce((_,N)=>_+(N.barSize||0),0);f+=(a-1)*l,f>=n&&(f-=(a-1)*l,l=0),f>=n&&h>0&&(m=!0,h*=.9,f=a*h);var g=(n-f)/2>>0,x={offset:g-l,size:0};u=r.reduce((_,N)=>{var v,k={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:x.offset+x.size+l,size:m?h:(v=N.barSize)!==null&&v!==void 0?v:0}},O=[..._,k];return x=O[O.length-1].position,O},d)}else{var j=pr(t,n,0,!0);n-2*j-(a-1)*l<=0&&(l=0);var w=(n-2*j-(a-1)*l)/a;w>1&&(w>>=0);var S=Sn(i)?Math.min(w,i):w;u=r.reduce((_,N,v)=>[..._,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:j+(w+l)*v+(w-S)/2,size:S}}],d)}return u}}var qF=(e,t,n,r,i,a,l)=>{var u=vt(l)?t:l,d=KF(n,r,i!==a?i:a,e,u);return i!==a&&d!=null&&(d=d.map(m=>Qc(Qc({},m),{},{position:Qc(Qc({},m.position),{},{offset:m.position.offset-i/2})}))),d},GF=K([WF,OP,d8,TP,VF,jC,$F],qF),YF=(e,t,n,r)=>Fs(e,"xAxis",t,r),XF=(e,t,n,r)=>Fs(e,"yAxis",n,r),QF=(e,t,n,r)=>Bs(e,"xAxis",t,r),JF=(e,t,n,r)=>Bs(e,"yAxis",n,r),e9=K([GF,Jl],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),t9=(e,t)=>{var n=I0(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:a}=i;if(a)return a.find(l=>l.key===n)}}}},n9=K([UF,Jl],t9),r9=K([yt,Yv,YF,XF,QF,JF,e9,Oe,k0,jC,n9,Jl,BF],(e,t,n,r,i,a,l,u,d,m,h,f,g)=>{var{chartData:x,dataStartIndex:j,dataEndIndex:w}=d;if(!(f==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||a==null||m==null)){var{data:S}=f,_;if(S!=null&&S.length>0?_=S:_=x==null?void 0:x.slice(j,w+1),_!=null)return OF({layout:u,barSettings:f,pos:l,parentViewBox:t,bandSize:m,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:h,displayedData:_,offset:e,cells:g})}}),i9=e=>{var{chartData:t}=e,n=at(),r=Qn();return b.useEffect(()=>r?()=>{}:(n(Aw(t)),()=>{n(Aw(void 0))}),[t,n,r]),null},o1={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},a9=Cn({name:"brush",initialState:o1,reducers:{setBrushSettings(e,t){return t.payload==null?o1:t.payload}}}),s9=a9.reducer;function o9(e,t,n){return(t=l9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l9(e){var t=c9(e,"string");return typeof t=="symbol"?t:t+""}function c9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class iy{static create(t){return new iy(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}o9(iy,"EPS",1e-4);function u9(e){return(e%180+180)%180}var d9=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=u9(i),l=a*Math.PI/180,u=Math.atan(r/n),d=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(d)},f9={dots:[],areas:[],lines:[]},h9=Cn({name:"referenceElements",initialState:f9,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=qr(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=qr(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=qr(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),m9=h9.reducer,p9=b.createContext(void 0),g9=e=>{var{children:t}=e,[n]=b.useState("".concat(bl("recharts"),"-clip")),r=bC();if(r==null)return null;var{x:i,y:a,width:l,height:u}=r;return b.createElement(p9.Provider,{value:n},b.createElement("defs",null,b.createElement("clipPath",{id:n},b.createElement("rect",{x:i,y:a,height:u,width:l}))),t)};function Hs(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function NC(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function v9(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return d9(r,n)}function y9(e,t,n){var r=n==="width",{x:i,y:a,width:l,height:u}=e;return t===1?{start:r?i:a,end:r?i+l:a+u}:{start:r?i+l:a+u,end:r?i:a}}function kd(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function x9(e,t){return NC(e,t+1)}function b9(e,t,n,r,i){for(var a=(r||[]).slice(),{start:l,end:u}=t,d=0,m=1,h=l,f=function(){var j=r==null?void 0:r[d];if(j===void 0)return{v:NC(r,m)};var w=d,S,_=()=>(S===void 0&&(S=n(j,w)),S),N=j.coordinate,v=d===0||kd(e,N,_,h,u);v||(d=0,h=l,m+=1),v&&(h=N+e*(_()/2+i),d+=m)},g;m<=a.length;)if(g=f(),g)return g.v;return[]}function l1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(n),!0).forEach(function(r){_9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _9(e,t,n){return(t=w9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w9(e){var t=j9(e,"string");return typeof t=="symbol"?t:t+""}function j9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N9(e,t,n,r,i){for(var a=(r||[]).slice(),l=a.length,{start:u}=t,{end:d}=t,m=function(g){var x=a[g],j,w=()=>(j===void 0&&(j=n(x,g)),j);if(g===l-1){var S=e*(x.coordinate+e*w()/2-d);a[g]=x=Dt(Dt({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else a[g]=x=Dt(Dt({},x),{},{tickCoord:x.coordinate});var _=kd(e,x.tickCoord,w,u,d);_&&(d=x.tickCoord-e*(w()/2+i),a[g]=Dt(Dt({},x),{},{isShow:!0}))},h=l-1;h>=0;h--)m(h);return a}function S9(e,t,n,r,i,a){var l=(r||[]).slice(),u=l.length,{start:d,end:m}=t;if(a){var h=r[u-1],f=n(h,u-1),g=e*(h.coordinate+e*f/2-m);l[u-1]=h=Dt(Dt({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate});var x=kd(e,h.tickCoord,()=>f,d,m);x&&(m=h.tickCoord-e*(f/2+i),l[u-1]=Dt(Dt({},h),{},{isShow:!0}))}for(var j=a?u-1:u,w=function(N){var v=l[N],k,O=()=>(k===void 0&&(k=n(v,N)),k);if(N===0){var A=e*(v.coordinate-e*O()/2-d);l[N]=v=Dt(Dt({},v),{},{tickCoord:A<0?v.coordinate-A*e:v.coordinate})}else l[N]=v=Dt(Dt({},v),{},{tickCoord:v.coordinate});var E=kd(e,v.tickCoord,O,d,m);E&&(d=v.tickCoord+e*(O()/2+i),l[N]=Dt(Dt({},v),{},{isShow:!0}))},S=0;S<j;S++)w(S);return l}function ay(e,t,n){var{tick:r,ticks:i,viewBox:a,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:h,angle:f}=e;if(!i||!i.length||!r)return[];if(de(d)||Gs.isSsr){var g;return(g=x9(i,de(d)?d:0))!==null&&g!==void 0?g:[]}var x=[],j=u==="top"||u==="bottom"?"width":"height",w=h&&j==="width"?el(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(v,k)=>{var O=typeof m=="function"?m(v.value,k):v.value;return j==="width"?v9(el(O,{fontSize:t,letterSpacing:n}),w,f):el(O,{fontSize:t,letterSpacing:n})[j]},_=i.length>=2?an(i[1].coordinate-i[0].coordinate):1,N=y9(a,_,j);return d==="equidistantPreserveStart"?b9(_,N,S,i,l):(d==="preserveStart"||d==="preserveStartEnd"?x=S9(_,N,S,i,l,d==="preserveStartEnd"):x=N9(_,N,S,i,l),x.filter(v=>v.isShow))}var P9=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,l=0;if(t){t.forEach(h=>{if(h){var f=h.getBoundingClientRect();f.width>l&&(l=f.width)}});var u=n?n.getBoundingClientRect().width:0,d=i+a,m=l+d+u+(n?r:0);return Math.round(m)}return 0},k9=["axisLine","width","height","className","hide","ticks"],C9=["viewBox"],E9=["viewBox"];function yg(e,t){if(e==null)return{};var n,r,i=O9(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function O9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ta(){return Ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ta.apply(null,arguments)}function c1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c1(Object(n),!0).forEach(function(r){T9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T9(e,t,n){return(t=A9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A9(e){var t=M9(e,"string");return typeof t=="symbol"?t:t+""}function M9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sy={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function L9(e){var{x:t,y:n,width:r,height:i,orientation:a,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=lt(lt(lt({},d),Ot(u,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!l||a==="bottom"&&l);m=lt(lt({},m),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var f=+(a==="left"&&!l||a==="right"&&l);m=lt(lt({},m),{},{x1:t+f*r,y1:n,x2:t+f*r,y2:n+i})}return b.createElement("line",Ta({},m,{className:$e("recharts-cartesian-axis-line",Ts(u,"className"))}))}function D9(e,t,n,r,i,a,l,u,d){var m,h,f,g,x,j,w=u?-1:1,S=e.tickSize||l,_=de(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":m=h=e.coordinate,g=n+ +!u*i,f=g-w*S,j=f-w*d,x=_;break;case"left":f=g=e.coordinate,h=t+ +!u*r,m=h-w*S,x=m-w*d,j=_;break;case"right":f=g=e.coordinate,h=t+ +u*r,m=h+w*S,x=m+w*d,j=_;break;default:m=h=e.coordinate,g=n+ +u*i,f=g+w*S,j=f+w*d,x=_;break}return{line:{x1:m,y1:f,x2:h,y2:g},tick:{x,y:j}}}function I9(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function R9(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function z9(e){var{option:t,tickProps:n,value:r}=e,i,a=$e(n.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(t))i=b.cloneElement(t,lt(lt({},n),{},{className:a}));else if(typeof t=="function")i=t(lt(lt({},n),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=$e(l,t==null?void 0:t.className)),i=b.createElement(ty,Ta({},n,{className:l}),r)}return i}function $9(e){var{ticks:t=[],tick:n,tickLine:r,stroke:i,tickFormatter:a,unit:l,padding:u,tickTextProps:d,orientation:m,mirror:h,x:f,y:g,width:x,height:j,tickSize:w,tickMargin:S,fontSize:_,letterSpacing:N,getTicksConfig:v,events:k}=e,O=ay(lt(lt({},v),{},{ticks:t}),_,N),A=I9(m,h),E=R9(m,h),I=qs(v),$=Ot(n,!1),D=lt(lt({},I),{},{fill:"none"},Ot(r,!1)),M=O.map((z,B)=>{var{line:C,tick:U}=D9(z,f,g,x,j,m,w,h,S),Z=lt(lt(lt(lt({textAnchor:A,verticalAnchor:E},I),{},{stroke:"none",fill:i},$),U),{},{index:B,payload:z,visibleTicksCount:O.length,tickFormatter:a,padding:u},d);return b.createElement($i,Ta({className:"recharts-cartesian-axis-tick",key:"tick-".concat(z.value,"-").concat(z.coordinate,"-").concat(z.tickCoord)},ff(k,z,B)),r&&b.createElement("line",Ta({},D,C,{className:$e("recharts-cartesian-axis-tick-line",Ts(r,"className"))})),n&&b.createElement(z9,{option:n,tickProps:Z,value:"".concat(typeof a=="function"?a(z.value,B):z.value).concat(l||"")}))});return M.length>0?b.createElement("g",{className:"recharts-cartesian-axis-ticks"},M):null}var B9=b.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:a,hide:l,ticks:u}=e,d=yg(e,k9),[m,h]=b.useState(""),[f,g]=b.useState(""),x=b.useRef([]);b.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var w;return P9({ticks:x.current,label:(w=e.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=b.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=Array.from(S);var _=S[0];if(_){var N=window.getComputedStyle(_),v=N.fontSize,k=N.letterSpacing;(v!==m||k!==f)&&(h(v),g(k))}}},[m,f]);return l||r!=null&&r<=0||i!=null&&i<=0?null:b.createElement($i,{className:$e("recharts-cartesian-axis",a),ref:j},b.createElement(L9,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:qs(e)}),b.createElement($9,{ticks:u,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:m,letterSpacing:f,getTicksConfig:e,events:d}),b.createElement(O$,{x:e.x,y:e.y,width:e.width,height:e.height},b.createElement(B$,{label:e.label}),e.children))}),F9=b.memo(B9,(e,t)=>{var{viewBox:n}=e,r=yg(e,C9),{viewBox:i}=t,a=yg(t,E9);return Hs(n,i)&&Hs(r,a)}),oy=b.forwardRef((e,t)=>{var n=Jn(e,sy);return b.createElement(F9,Ta({},n,{ref:t}))});oy.displayName="CartesianAxis";var U9=["x1","y1","x2","y2","key"],H9=["offset"],Z9=["xAxisId","yAxisId"],W9=["xAxisId","yAxisId"];function u1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u1(Object(n),!0).forEach(function(r){V9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V9(e,t,n){return(t=K9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K9(e){var t=q9(e,"string");return typeof t=="symbol"?t:t+""}function q9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ma(){return ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ma.apply(null,arguments)}function Cd(e,t){if(e==null)return{};var n,r,i=G9(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function G9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Y9=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:l,ry:u}=e;return b.createElement("rect",{x:r,y:i,ry:u,width:a,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function SC(e,t){var n;if(b.isValidElement(e))n=b.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:a,y2:l,key:u}=t,d=Cd(t,U9),m=qs(d),h=Cd(m,H9);n=b.createElement("line",ma({},h,{x1:r,y1:i,x2:a,y2:l,fill:"none",key:u}))}return n}function X9(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var a=Cd(e,Z9),l=i.map((u,d)=>{var m=Rt(Rt({},a),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(d),index:d});return SC(r,m)});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Q9(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var a=Cd(e,W9),l=i.map((u,d)=>{var m=Rt(Rt({},a),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(d),index:d});return SC(r,m)});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function J9(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:a,height:l,horizontalPoints:u,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var m=u.map(f=>Math.round(f+i-i)).sort((f,g)=>f-g);i!==m[0]&&m.unshift(0);var h=m.map((f,g)=>{var x=!m[g+1],j=x?i+l-f:m[g+1]-f;if(j<=0)return null;var w=g%t.length;return b.createElement("rect",{key:"react-".concat(g),y:f,x:r,height:j,width:a,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function eU(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:l,height:u,verticalPoints:d}=e;if(!t||!n||!n.length)return null;var m=d.map(f=>Math.round(f+i-i)).sort((f,g)=>f-g);i!==m[0]&&m.unshift(0);var h=m.map((f,g)=>{var x=!m[g+1],j=x?i+l-f:m[g+1]-f;if(j<=0)return null;var w=g%n.length;return b.createElement("rect",{key:"react-".concat(g),x:f,y:a,width:j,height:u,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var tU=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return vS(ay(Rt(Rt(Rt({},sy),n),{},{ticks:yS(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},nU=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return vS(ay(Rt(Rt(Rt({},sy),n),{},{ticks:yS(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},rU={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function PC(e){var t=Qv(),n=Jv(),r=_S(),i=Rt(Rt({},Jn(e,rU)),{},{x:de(e.x)?e.x:r.left,y:de(e.y)?e.y:r.top,width:de(e.width)?e.width:r.width,height:de(e.height)?e.height:r.height}),{xAxisId:a,yAxisId:l,x:u,y:d,width:m,height:h,syncWithTicks:f,horizontalValues:g,verticalValues:x}=i,j=Qn(),w=ue($=>Nw($,"xAxis",a,j)),S=ue($=>Nw($,"yAxis",l,j));if(!de(m)||m<=0||!de(h)||h<=0||!de(u)||u!==+u||!de(d)||d!==+d)return null;var _=i.verticalCoordinatesGenerator||tU,N=i.horizontalCoordinatesGenerator||nU,{horizontalPoints:v,verticalPoints:k}=i;if((!v||!v.length)&&typeof N=="function"){var O=g&&g.length,A=N({yAxis:S?Rt(Rt({},S),{},{ticks:O?g:S.ticks}):void 0,width:t,height:n,offset:r},O?!0:f);Jo(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(v=A)}if((!k||!k.length)&&typeof _=="function"){var E=x&&x.length,I=_({xAxis:w?Rt(Rt({},w),{},{ticks:E?x:w.ticks}):void 0,width:t,height:n,offset:r},E?!0:f);Jo(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(k=I)}return b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(Y9,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),b.createElement(J9,ma({},i,{horizontalPoints:v})),b.createElement(eU,ma({},i,{verticalPoints:k})),b.createElement(X9,ma({},i,{offset:r,horizontalPoints:v,xAxis:w,yAxis:S})),b.createElement(Q9,ma({},i,{offset:r,verticalPoints:k,xAxis:w,yAxis:S})))}PC.displayName="CartesianGrid";var iU=["dangerouslySetInnerHTML","ticks"],aU=["id"],sU=["domain"],oU=["domain"];function xg(){return xg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xg.apply(null,arguments)}function Ed(e,t){if(e==null)return{};var n,r,i=lU(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function cU(e){var t=at();return b.useEffect(()=>(t(DB(e)),()=>{t(IB(e))}),[e,t]),null}var uU=e=>{var{xAxisId:t,className:n}=e,r=ue(Yv),i=Qn(),a="xAxis",l=ue(x=>to(x,a,t,i)),u=ue(x=>_k(x,a,t,i)),d=ue(x=>vk(x,t)),m=ue(x=>iz(x,t)),h=ue(x=>BP(x,t));if(d==null||m==null||h==null)return null;var f=Ed(e,iU),g=Ed(h,aU);return b.createElement(oy,xg({},f,g,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:$e("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:u}))},dU={allowDataOverflow:fn.allowDataOverflow,allowDecimals:fn.allowDecimals,allowDuplicatedCategory:fn.allowDuplicatedCategory,height:fn.height,hide:!1,mirror:fn.mirror,orientation:fn.orientation,padding:fn.padding,reversed:fn.reversed,scale:fn.scale,tickCount:fn.tickCount,type:fn.type,xAxisId:0},fU=e=>{var t,n,r,i,a,l=Jn(e,dU);return b.createElement(b.Fragment,null,b.createElement(cU,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(i=l.minTickGap)!==null&&i!==void 0?i:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),b.createElement(uU,l))},hU=(e,t)=>{var{domain:n}=e,r=Ed(e,sU),{domain:i}=t,a=Ed(t,oU);return Hs(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Hs({domain:n},{domain:i}):!1},kC=b.memo(fU,hU);kC.displayName="XAxis";var mU=["dangerouslySetInnerHTML","ticks"],pU=["id"],gU=["domain"],vU=["domain"];function bg(){return bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bg.apply(null,arguments)}function Od(e,t){if(e==null)return{};var n,r,i=yU(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function xU(e){var t=at();return b.useEffect(()=>(t(RB(e)),()=>{t(zB(e))}),[e,t]),null}var bU=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,a=b.useRef(null),l=b.useRef(null),u=ue(Yv),d=Qn(),m=at(),h="yAxis",f=ue(N=>to(N,h,t,d)),g=ue(N=>yk(N,t)),x=ue(N=>sz(N,t)),j=ue(N=>_k(N,h,t,d)),w=ue(N=>FP(N,t));if(b.useLayoutEffect(()=>{if(!(r!=="auto"||!g||ny(i)||b.isValidElement(i)||w==null)){var N=a.current;if(N){var v=N.getCalculatedWidth();Math.round(g.width)!==Math.round(v)&&m($B({id:t,width:v}))}}},[j,g,m,i,t,r,w]),g==null||x==null||w==null)return null;var S=Od(e,mU),_=Od(w,pU);return b.createElement(oy,bg({},S,_,{ref:a,labelRef:l,scale:f,x:x.x,y:x.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:g.width,height:g.height,className:$e("recharts-".concat(h," ").concat(h),n),viewBox:u,ticks:j}))},_U={allowDataOverflow:hn.allowDataOverflow,allowDecimals:hn.allowDecimals,allowDuplicatedCategory:hn.allowDuplicatedCategory,hide:!1,mirror:hn.mirror,orientation:hn.orientation,padding:hn.padding,reversed:hn.reversed,scale:hn.scale,tickCount:hn.tickCount,type:hn.type,width:hn.width,yAxisId:0},wU=e=>{var t,n,r,i,a,l=Jn(e,_U);return b.createElement(b.Fragment,null,b.createElement(xU,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(i=l.minTickGap)!==null&&i!==void 0?i:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),b.createElement(bU,l))},jU=(e,t)=>{var{domain:n}=e,r=Od(e,gU),{domain:i}=t,a=Od(t,vU);return Hs(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Hs({domain:n},{domain:i}):!1},CC=b.memo(wU,jU);CC.displayName="YAxis";var NU={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ec=b;function SU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var PU=typeof Object.is=="function"?Object.is:SU,kU=ec.useSyncExternalStore,CU=ec.useRef,EU=ec.useEffect,OU=ec.useMemo,TU=ec.useDebugValue;NU.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=CU(null);if(a.current===null){var l={hasValue:!1,value:null};a.current=l}else l=a.current;a=OU(function(){function d(x){if(!m){if(m=!0,h=x,x=r(x),i!==void 0&&l.hasValue){var j=l.value;if(i(j,x))return f=j}return f=x}if(j=f,PU(h,x))return j;var w=r(x);return i!==void 0&&i(j,w)?(h=x,j):(h=x,f=w)}var m=!1,h,f,g=n===void 0?null:n;return[function(){return d(t())},g===null?void 0:function(){return d(g())}]},[t,n,r,i]);var u=kU(e,a[0],a[1]);return EU(function(){l.hasValue=!0,l.value=u},[u]),TU(u),u};function AU(e){e()}function MU(){let e=null,t=null;return{clear(){e=null,t=null},notify(){AU(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var d1={notify(){},get:()=>[]};function LU(e,t){let n,r=d1,i=0,a=!1;function l(w){h();const S=r.subscribe(w);let _=!1;return()=>{_||(_=!0,S(),f())}}function u(){r.notify()}function d(){j.onStateChange&&j.onStateChange()}function m(){return a}function h(){i++,n||(n=e.subscribe(d),r=MU())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=d1)}function g(){a||(a=!0,h())}function x(){a&&(a=!1,f())}const j={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:g,tryUnsubscribe:x,getListeners:()=>r};return j}var DU=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IU=DU(),RU=()=>typeof navigator<"u"&&navigator.product==="ReactNative",zU=RU(),$U=()=>IU||zU?b.useLayoutEffect:b.useEffect,BU=$U(),km=Symbol.for("react-redux-context"),Cm=typeof globalThis<"u"?globalThis:{};function FU(){if(!b.createContext)return{};const e=Cm[km]??(Cm[km]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var UU=FU();function HU(e){const{children:t,context:n,serverState:r,store:i}=e,a=b.useMemo(()=>{const d=LU(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=b.useMemo(()=>i.getState(),[i]);BU(()=>{const{subscription:d}=a;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[a,l]);const u=n||UU;return b.createElement(u.Provider,{value:a},t)}var ZU=HU,WU=(e,t)=>t,ly=K([WU,Oe,RP,dt,Ik,di,u7,yt],p7),cy=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},EC=qn("mouseClick"),OC=Fl();OC.startListening({actionCreator:EC,effect:(e,t)=>{var n=e.payload,r=ly(t.getState(),cy(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(xz({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var _g=qn("mouseMove"),TC=Fl();TC.startListening({actionCreator:_g,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=V0(r,r.tooltip.settings.shared),a=ly(r,cy(n));i==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(Ek({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(Ck()))}});var f1={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},AC=Cn({name:"rootProps",initialState:f1,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:f1.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),VU=AC.reducer,{updateOptions:KU}=AC.actions,qU=Cn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),GU=qU.reducer,MC=qn("keyDown"),LC=qn("focus"),uy=Fl();uy.startListening({actionCreator:MC,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=Number(K0(i,ro(n))),u=di(n);if(a==="Enter"){var d=wd(n,"axis","hover",String(i.index));t.dispatch(fg({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var m=uz(n),h=m==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,g=l+f*h;if(!(u==null||g>=u.length||g<0)){var x=wd(n,"axis","hover",String(g));t.dispatch(fg({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});uy.startListening({actionCreator:LC,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",l=wd(n,"axis","hover",String(a));t.dispatch(fg({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:l}))}}}});var In=qn("externalEvent"),DC=Fl();DC.startListening({actionCreator:In,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:t7(n),activeDataKey:Bk(n),activeIndex:Us(n),activeLabel:$k(n),activeTooltipIndex:Us(n),isTooltipActive:n7(n)};e.payload.handler(r,e.payload.reactEvent)}}});var YU=K([no],e=>e.tooltipItemPayloads),XU=K([YU,Xl,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var l=t(a,n);return l}}}),IC=qn("touchMove"),RC=Fl();RC.startListening({actionCreator:IC,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=V0(r,r.tooltip.settings.shared);if(i==="axis"){var a=ly(r,cy({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(Ek({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(zD),h=(l=d.getAttribute($D))!==null&&l!==void 0?l:void 0,f=XU(t.getState(),m,h);t.dispatch(kk({activeDataKey:h,activeIndex:m,activeCoordinate:f}))}}});var QU=KN({brush:s9,cartesianAxis:BB,chartData:T7,errorBars:tF,graphicalItems:EB,layout:oD,legend:nI,options:P7,polarAxis:J$,polarOptions:GU,referenceElements:m9,rootProps:VU,tooltip:bz}),JU=function(t){return AL({reducer:QU,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([OC.middleware,TC.middleware,uy.middleware,DC.middleware,RC.middleware]),devTools:Gs.devToolsEnabled})};function eH(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Qn(),a=b.useRef(null);if(i)return n;a.current==null&&(a.current=JU(t));var l=Fv;return b.createElement(ZU,{context:l,store:a.current},n)}function tH(e){var{layout:t,width:n,height:r,margin:i}=e,a=at(),l=Qn();return b.useEffect(()=>{l||(a(iD(t)),a(aD({width:n,height:r})),a(rD(i)))},[a,l,t,n,r,i]),null}function nH(e){var t=at();return b.useEffect(()=>{t(KU(e))},[t,e]),null}var rH=["children"];function iH(e,t){if(e==null)return{};var n,r,i=aH(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Td(){return Td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Td.apply(null,arguments)}var sH={width:"100%",height:"100%"},oH=b.forwardRef((e,t)=>{var n=Qv(),r=Jv(),i=jS();if(!sd(n)||!sd(r))return null;var{children:a,otherAttributes:l,title:u,desc:d}=e,m,h;return typeof l.tabIndex=="number"?m=l.tabIndex:m=i?0:void 0,typeof l.role=="string"?h=l.role:h=i?"application":void 0,b.createElement(Sv,Td({},l,{title:u,desc:d,role:h,tabIndex:m,width:n,height:r,style:sH,ref:t}),a)}),lH=e=>{var{children:t}=e,n=ue(kf);if(!n)return null;var{width:r,height:i,y:a,x:l}=n;return b.createElement(Sv,{width:r,height:i,x:l,y:a},t)},h1=b.forwardRef((e,t)=>{var{children:n}=e,r=iH(e,rH),i=Qn();return i?b.createElement(lH,null,n):b.createElement(oH,Td({ref:t},r),n)});function cH(){var e=at(),[t,n]=b.useState(null),r=ue(RD);return b.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Sn(a)&&a!==r&&e(sD(a))}},[t,e,r]),n}function m1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m1(Object(n),!0).forEach(function(r){dH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dH(e,t,n){return(t=fH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fH(e){var t=hH(e,"string");return typeof t=="symbol"?t:t+""}function hH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mH=b.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:h,onMouseMove:f,onMouseUp:g,onTouchEnd:x,onTouchMove:j,onTouchStart:w,style:S,width:_}=e,N=at(),[v,k]=b.useState(null),[O,A]=b.useState(null);B7();var E=cH(),I=b.useCallback(ne=>{E(ne),typeof t=="function"&&t(ne),k(ne),A(ne)},[E,t,k,A]),$=b.useCallback(ne=>{N(EC(ne)),N(In({handler:a,reactEvent:ne}))},[N,a]),D=b.useCallback(ne=>{N(_g(ne)),N(In({handler:m,reactEvent:ne}))},[N,m]),M=b.useCallback(ne=>{N(Ck()),N(In({handler:h,reactEvent:ne}))},[N,h]),z=b.useCallback(ne=>{N(_g(ne)),N(In({handler:f,reactEvent:ne}))},[N,f]),B=b.useCallback(()=>{N(LC())},[N]),C=b.useCallback(ne=>{N(MC(ne.key))},[N]),U=b.useCallback(ne=>{N(In({handler:l,reactEvent:ne}))},[N,l]),Z=b.useCallback(ne=>{N(In({handler:u,reactEvent:ne}))},[N,u]),q=b.useCallback(ne=>{N(In({handler:d,reactEvent:ne}))},[N,d]),R=b.useCallback(ne=>{N(In({handler:g,reactEvent:ne}))},[N,g]),Y=b.useCallback(ne=>{N(In({handler:w,reactEvent:ne}))},[N,w]),G=b.useCallback(ne=>{N(IC(ne)),N(In({handler:j,reactEvent:ne}))},[N,j]),re=b.useCallback(ne=>{N(In({handler:x,reactEvent:ne}))},[N,x]);return b.createElement(Vk.Provider,{value:v},b.createElement(J2.Provider,{value:O},b.createElement("div",{className:$e("recharts-wrapper",r),style:uH({position:"relative",cursor:"default",width:_,height:i},S),onClick:$,onContextMenu:U,onDoubleClick:Z,onFocus:B,onKeyDown:C,onMouseDown:q,onMouseEnter:D,onMouseLeave:M,onMouseMove:z,onMouseUp:R,onTouchEnd:re,onTouchMove:G,onTouchStart:Y,ref:I},n)))}),pH=["children","className","width","height","style","compact","title","desc"];function gH(e,t){if(e==null)return{};var n,r,i=vH(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var yH=b.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:a,style:l,compact:u,title:d,desc:m}=e,h=gH(e,pH),f=qs(h);return u?b.createElement(h1,{otherAttributes:f,title:d,desc:m},n):b.createElement(mH,{className:r,style:l,width:i,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},b.createElement(h1,{otherAttributes:f,title:d,desc:m,ref:t},b.createElement(g9,null,n)))}),xH=["width","height"];function wg(){return wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wg.apply(null,arguments)}function bH(e,t){if(e==null)return{};var n,r,i=_H(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _H(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var wH={top:5,right:5,bottom:5,left:5},jH={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:wH,reverseStackOrder:!1,syncMethod:"index"},NH=b.forwardRef(function(t,n){var r,i=Jn(t.categoricalChartProps,jH),{width:a,height:l}=i,u=bH(i,xH);if(!sd(a)||!sd(l))return null;var{chartName:d,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,categoricalChartProps:g}=t,x={chartName:d,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,eventEmitter:void 0};return b.createElement(eH,{preloadedState:{options:x},reduxStoreName:(r=g.id)!==null&&r!==void 0?r:d},b.createElement(i9,{chartData:g.data}),b.createElement(tH,{width:a,height:l,layout:i.layout,margin:i.margin}),b.createElement(nH,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),b.createElement(yH,wg({},u,{width:a,height:l,ref:n})))}),SH=["axis","item"],PH=b.forwardRef((e,t)=>b.createElement(NH,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:SH,tooltipPayloadSearcher:N7,categoricalChartProps:e,ref:t}));const kH=({patients:e})=>{const t=b.useMemo(()=>{const r=e.length,i=e.filter(u=>!!u.patient_categories.critical).length,a=e.filter(u=>!!u.patient_categories.elderly).length,l=e.filter(u=>!!u.patient_categories.pregnant).length;return[{group:"Critical",Yes:i,No:Math.max(r-i,0)},{group:"Elderly",Yes:a,No:Math.max(r-a,0)},{group:"Pregnant",Yes:l,No:Math.max(r-l,0)}]},[e]),n=e.length;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Patient Categories Overview"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total Patients: ",n]})]}),s.jsx("div",{className:"h-72",children:t.length===0?s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 text-sm",children:"No data"}):s.jsx(e$,{width:"100%",height:"100%",children:s.jsxs(PH,{data:t,margin:{top:10,right:20,left:0,bottom:0},children:[s.jsx(PC,{strokeDasharray:"3 3"}),s.jsx(kC,{dataKey:"group",tick:{fontSize:12}}),s.jsx(CC,{allowDecimals:!1,tick:{fontSize:12}}),s.jsx(q7,{}),s.jsx(Cf,{}),s.jsx(vg,{dataKey:"Yes",name:"Yes",radius:[4,4,0,0],fill:"#2563eb"}),s.jsx(vg,{dataKey:"No",name:"No",radius:[4,4,0,0],fill:"#cbd5e1"})]})})})]})},Dn=()=>{const{user:e}=Se(),[t,n]=b.useState([]),[r,i]=b.useState([]),[a,l]=b.useState(!0),[u,d]=b.useState(!1),[m,h]=b.useState(null),[f,g]=b.useState(null),[x,j]=b.useState(!1),w=async()=>{if(e!=null&&e.id)try{const{data:C,error:U}=await ai(e.id);U?console.error("Error fetching patient profile:",U):g(C)}catch(C){console.error("Error fetching patient profile:",C)}},S=async()=>{if(!f){alert("Patient profile not found. Please contact emergency services directly.");return}j(!0);try{const[{data:C},{data:U}]=await Promise.all([Ct(),un()]),Z=(C||[]).filter(Q=>Q.role==="doctor"),q=(f.assigned_doctor||"").toLowerCase(),R=Z.filter(Q=>(Q.full_name||"").toLowerCase().includes(q)),Y=(f.area_name||"").toLowerCase(),G=(U||[]).filter(Q=>(Q.area_name||"").toLowerCase()===Y);if(R.length===0&&G.length===0)throw new Error("No assigned doctor or nearby volunteers found");const re=` EMERGENCY - Immediate Assistance Needed

Patient: ${f.name}
MRN: ${f.medical_record_number}
Phone: ${f.phone_number||"N/A"}
Address: ${f.address}
Assigned Doctor: ${f.assigned_doctor||"N/A"}
Assigned VHV: ${f.assigned_vhv_name||"N/A"}
Area: ${f.area_name||"N/A"}

Flags:
- Critical: ${f.patient_categories.critical?"Yes":"No"}
- Elderly: ${f.patient_categories.elderly?"Yes":"No"}
- Pregnant: ${f.patient_categories.pregnant?"Yes":"No"}

Caregiver: ${f.caregivers_contact||"N/A"}

This is an urgent request for immediate medical assistance. Please respond as soon as possible.`,ne=R.map(Q=>Q.id),H=G.map(Q=>Q.user_id).filter(Boolean),ee=Array.from(new Set([...ne,...H]));await Promise.all(ee.map(Q=>mr({sender_id:e.id,recipient_id:Q,content:re,subject:" EMERGENCY - Immediate Assistance Needed",is_read:!1}))),alert(`Emergency message sent to ${ne.length} doctor(s) and ${H.length} volunteer(s).`)}catch(C){console.error("Error sending emergency message:",C),alert("Failed to send emergency message. Please call emergency services directly or try again.")}finally{j(!1)}};b.useEffect(()=>{_(),(e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer"?N():(e==null?void 0:e.role)==="patient"&&w()},[]);const _=async()=>{try{const{data:C,error:U}=await WM();U?console.error("Error fetching announcements:",U):n(C||[])}catch(C){console.error("Error fetching announcements:",C)}finally{l(!1)}},N=async()=>{try{const{data:C,error:U}=await Bt();U?console.error("Error fetching patients:",U):i(C||[])}catch(C){console.error("Error fetching patients:",C)}finally{l(!1)}},v=C=>{h(C),d(!0)},k=async C=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{const{error:U}=await qM(C);U?console.error("Error deleting announcement:",U):_()}catch(U){console.error("Error deleting announcement:",U)}},O=()=>{d(!1),h(null)},A=()=>{_()},E=()=>{switch(e==null?void 0:e.role){case"doctor":return"Welcome to your medical dashboard. Manage patient records and communications.";case"volunteer":return"Welcome to your volunteer dashboard. Help manage patient information and provide support.";case"patient":return"Welcome to your patient portal. View your medical information and communicate with your healthcare team.";default:return"Welcome to MedConnect Portal."}},I=()=>{const C=r.filter(R=>R.patient_categories.critical).length,U=r.filter(R=>R.patient_categories.elderly).length,Z=r.filter(R=>R.patient_categories.pregnant).length,q=r.length;return{critical:C,elderly:U,pregnant:Z,total:q}},D=(()=>{switch(e==null?void 0:e.role){case"doctor":case"volunteer":return[{icon:ko,title:"Patient Management",description:"View and manage patient profiles",action:"patients"},{icon:Di,title:"Messages",description:"Communicate with patients and colleagues",action:"messages"},{icon:Si,title:"Create Profile",description:"Add new patient information",action:"create-patient"},{icon:ys,title:"Task Management",description:"Create and manage tasks",action:"tasks"},{icon:Kr,title:"Daily Records",description:"View patient daily records and symptoms",action:"records"},{icon:Qd,title:"Geographic Map",description:"View location-based information",action:"map"}];case"patient":return[{icon:Si,title:"My Profile",description:"View your medical information",action:"profile"},{icon:Kr,title:"Daily Records",description:"Track your daily symptoms and vital signs",action:"records"},{icon:Di,title:"Messages",description:"Communicate with your healthcare team",action:"messages"},{icon:Zt,title:"Mental Assessment",description:"Complete your PHQ-9 assessment",action:"mental"},{icon:Zt,title:"Health Resources",description:"Access helpful health information",action:"resources"},{icon:Di,title:"Appointments",description:"View and request appointments",action:"appointments"}];default:return[]}})(),M=I(),z=C=>{switch(C){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},B=C=>{switch(C){case"urgent":return s.jsx(Ur,{className:"w-4 h-4"});case"high":return s.jsx(Ur,{className:"w-4 h-4"});default:return s.jsx(du,{className:"w-4 h-4"})}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Good ",new Date().getHours()<12?"morning":new Date().getHours()<17?"afternoon":"evening",", ",e==null?void 0:e.full_name]}),s.jsx("p",{className:"text-gray-600",children:E()})]}),(e==null?void 0:e.role)==="doctor"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(ko,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.total}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:s.jsx(Ur,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.critical}),s.jsx("p",{className:"text-sm text-gray-600",children:"Critical Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:s.jsx(ko,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.elderly}),s.jsx("p",{className:"text-sm text-gray-600",children:"Elderly Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-pink-100 p-3 rounded-lg",children:s.jsx(Zt,{className:"w-6 h-6 text-pink-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.pregnant}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pregnant Patients"})]})]})})]}),(e==null?void 0:e.role)==="doctor"&&s.jsx(kH,{patients:r}),(e==null?void 0:e.role)==="volunteer"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(ko,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.total}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:s.jsx(Ur,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.critical}),s.jsx("p",{className:"text-sm text-gray-600",children:"Critical Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:s.jsx(ko,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.elderly}),s.jsx("p",{className:"text-sm text-gray-600",children:"Elderly Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-pink-100 p-3 rounded-lg",children:s.jsx(Zt,{className:"w-6 h-6 text-pink-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.pregnant}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pregnant Patients"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(e==null?void 0:e.role)==="patient"&&s.jsx("div",{className:"md:col-span-2 lg:col-span-3 mb-4",children:s.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:s.jsx(Fu,{className:"w-8 h-8 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-red-800",children:"Emergency Assistance"}),s.jsx("p",{className:"text-red-700 text-sm",children:"Need immediate medical help? Click to send an urgent message to your healthcare team."}),s.jsx("p",{className:"text-red-600 text-xs mt-1",children:"For life-threatening emergencies, call emergency services immediately."})]})]}),s.jsx("button",{onClick:S,disabled:x||!f,className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 flex items-center space-x-2 font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 active:scale-95",children:x?s.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Fu,{className:"w-6 h-6"}),s.jsx("span",{children:"EMERGENCY"})]})})]})})}),D.map((C,U)=>{const Z=C.icon;return s.jsx("div",{onClick:()=>{const R={patients:"patients",messages:"messages","create-patient":"patients",tasks:"tasks",records:"records",map:"map",profile:"profile",resources:"dashboard",mental:"mental",appointments:"appointments"}[C.action]||"dashboard";try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:R}))}catch{}window.setAppView&&window.setAppView(R)},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all cursor-pointer group",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg group-hover:bg-blue-200 transition-colors",children:s.jsx(Z,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:C.title}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description})]})]})},U)})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(du,{className:"w-6 h-6 text-blue-600"}),s.jsx("span",{children:"Announcements"})]}),(e==null?void 0:e.role)==="doctor"&&s.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Yt,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Announcement"})]})]}),a?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"w-6 h-6 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t.length>0?s.jsx("div",{className:"space-y-4",children:t.slice(0,3).map(C=>{var U;return s.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-all",children:s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:C.title}),s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium border flex items-center space-x-1 ${z(C.priority)}`,children:[B(C.priority),s.jsx("span",{children:C.priority.charAt(0).toUpperCase()+C.priority.slice(1)})]})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:C.content}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[s.jsxs("span",{children:["By: ",(U=C.created_by_user)==null?void 0:U.full_name]}),s.jsx("span",{children:new Date(C.created_at).toLocaleDateString()})]})]}),(e==null?void 0:e.role)==="doctor"&&s.jsxs("div",{className:"flex space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>v(C),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Announcement",children:s.jsx(R2,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>k(C.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Announcement",children:s.jsx(Rl,{className:"w-4 h-4"})})]})]})},C.id)})}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(du,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No announcements to display."}),(e==null?void 0:e.role)==="doctor"&&s.jsx("p",{className:"text-sm mt-1",children:"Create your first announcement to keep everyone informed."})]})]})]}),u&&s.jsx(h3,{announcement:m,onClose:O,onSuccess:A})]})};function zC(e,t){const n=b.useRef(t);b.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function $C(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const CH=1;function EH(e){return Object.freeze({__version:CH,map:e})}function Vf(e,t){return Object.freeze({...e,...t})}const BC=b.createContext(null),FC=BC.Provider;function Kf(){const e=b.useContext(BC);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function UC(e){function t(n,r){const{instance:i,context:a}=e(n).current;return b.useImperativeHandle(r,()=>i),n.children==null?null:pu.createElement(FC,{value:a},n.children)}return b.forwardRef(t)}function OH(e){function t(n,r){const[i,a]=b.useState(!1),{instance:l}=e(n,a).current;b.useImperativeHandle(r,()=>l),b.useEffect(function(){i&&l.update()},[l,i,n.children]);const u=l._contentNode;return u?Gd.createPortal(n.children,u):null}return b.forwardRef(t)}function TH(e){function t(n,r){const{instance:i}=e(n).current;return b.useImperativeHandle(r,()=>i),null}return b.forwardRef(t)}function dy(e,t){const n=b.useRef();b.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function qf(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function AH(e,t){return function(r,i){const a=Kf(),l=e(qf(r,a),a);return zC(a.map,r.attribution),dy(l.current,r.eventHandlers),t(l.current,a,r,i),l}}var jg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(jO,function(n){var r="1.9.4";function i(o){var c,p,y,P;for(p=1,y=arguments.length;p<y;p++){P=arguments[p];for(c in P)o[c]=P[c]}return o}var a=Object.create||function(){function o(){}return function(c){return o.prototype=c,new o}}();function l(o,c){var p=Array.prototype.slice;if(o.bind)return o.bind.apply(o,p.call(arguments,1));var y=p.call(arguments,2);return function(){return o.apply(c,y.length?y.concat(p.call(arguments)):arguments)}}var u=0;function d(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function m(o,c,p){var y,P,T,F;return F=function(){y=!1,P&&(T.apply(p,P),P=!1)},T=function(){y?P=arguments:(o.apply(p,arguments),setTimeout(F,c),y=!0)},T}function h(o,c,p){var y=c[1],P=c[0],T=y-P;return o===y&&p?o:((o-P)%T+T)%T+P}function f(){return!1}function g(o,c){if(c===!1)return o;var p=Math.pow(10,c===void 0?6:c);return Math.round(o*p)/p}function x(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function j(o){return x(o).split(/\s+/)}function w(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?a(o.options):{});for(var p in c)o.options[p]=c[p];return o.options}function S(o,c,p){var y=[];for(var P in o)y.push(encodeURIComponent(p?P.toUpperCase():P)+"="+encodeURIComponent(o[P]));return(!c||c.indexOf("?")===-1?"?":"&")+y.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function N(o,c){return o.replace(_,function(p,y){var P=c[y];if(P===void 0)throw new Error("No value provided for variable "+p);return typeof P=="function"&&(P=P(c)),P})}var v=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function k(o,c){for(var p=0;p<o.length;p++)if(o[p]===c)return p;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var E=0;function I(o){var c=+new Date,p=Math.max(0,16-(c-E));return E=c+p,window.setTimeout(o,p)}var $=window.requestAnimationFrame||A("RequestAnimationFrame")||I,D=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function M(o,c,p){if(p&&$===I)o.call(c);else return $.call(window,l(o,c))}function z(o){o&&D.call(window,o)}var B={__proto__:null,extend:i,create:a,bind:l,get lastId(){return u},stamp:d,throttle:m,wrapNum:h,falseFn:f,formatNum:g,trim:x,splitWords:j,setOptions:w,getParamString:S,template:N,isArray:v,indexOf:k,emptyImageUrl:O,requestFn:$,cancelFn:D,requestAnimFrame:M,cancelAnimFrame:z};function C(){}C.extend=function(o){var c=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,y=a(p);y.constructor=c,c.prototype=y;for(var P in this)Object.prototype.hasOwnProperty.call(this,P)&&P!=="prototype"&&P!=="__super__"&&(c[P]=this[P]);return o.statics&&i(c,o.statics),o.includes&&(U(o.includes),i.apply(null,[y].concat(o.includes))),i(y,o),delete y.statics,delete y.includes,y.options&&(y.options=p.options?a(p.options):{},i(y.options,o.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,F=y._initHooks.length;T<F;T++)y._initHooks[T].call(this)}},c},C.include=function(o){var c=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},C.mergeOptions=function(o){return i(this.prototype.options,o),this},C.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),p=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function U(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=v(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(o,c,p){if(typeof o=="object")for(var y in o)this._on(y,o[y],c);else{o=j(o);for(var P=0,T=o.length;P<T;P++)this._on(o[P],c,p)}return this},off:function(o,c,p){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var y in o)this._off(y,o[y],c);else{o=j(o);for(var P=arguments.length===1,T=0,F=o.length;T<F;T++)P?this._off(o[T]):this._off(o[T],c,p)}return this},_on:function(o,c,p,y){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,p)===!1){p===this&&(p=void 0);var P={fn:c,ctx:p};y&&(P.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(P)}},_off:function(o,c,p){var y,P,T;if(this._events&&(y=this._events[o],!!y)){if(arguments.length===1){if(this._firingCount)for(P=0,T=y.length;P<T;P++)y[P].fn=f;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var F=this._listens(o,c,p);if(F!==!1){var W=y[F];this._firingCount&&(W.fn=f,this._events[o]=y=y.slice()),y.splice(F,1)}}},fire:function(o,c,p){if(!this.listens(o,p))return this;var y=i({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var P=this._events[o];if(P){this._firingCount=this._firingCount+1||1;for(var T=0,F=P.length;T<F;T++){var W=P[T],V=W.fn;W.once&&this.off(o,V,W.ctx),V.call(W.ctx||this,y)}this._firingCount--}}return p&&this._propagateEvent(y),this},listens:function(o,c,p,y){typeof o!="string"&&console.warn('"string" type argument expected');var P=c;typeof c!="function"&&(y=!!c,P=void 0,p=void 0);var T=this._events&&this._events[o];if(T&&T.length&&this._listens(o,P,p)!==!1)return!0;if(y){for(var F in this._eventParents)if(this._eventParents[F].listens(o,c,p,y))return!0}return!1},_listens:function(o,c,p){if(!this._events)return!1;var y=this._events[o]||[];if(!c)return!!y.length;p===this&&(p=void 0);for(var P=0,T=y.length;P<T;P++)if(y[P].fn===c&&y[P].ctx===p)return P;return!1},once:function(o,c,p){if(typeof o=="object")for(var y in o)this._on(y,o[y],c,!0);else{o=j(o);for(var P=0,T=o.length;P<T;P++)this._on(o[P],c,p,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[d(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[d(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var q=C.extend(Z);function R(o,c,p){this.x=p?Math.round(o):o,this.y=p?Math.round(c):c}var Y=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};R.prototype={clone:function(){return new R(this.x,this.y)},add:function(o){return this.clone()._add(G(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(G(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new R(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new R(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Y(this.x),this.y=Y(this.y),this},distanceTo:function(o){o=G(o);var c=o.x-this.x,p=o.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(o){return o=G(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=G(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function G(o,c,p){return o instanceof R?o:v(o)?new R(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new R(o.x,o.y):new R(o,c,p)}function re(o,c){if(o)for(var p=c?[o,c]:o,y=0,P=p.length;y<P;y++)this.extend(p[y])}re.prototype={extend:function(o){var c,p;if(!o)return this;if(o instanceof R||typeof o[0]=="number"||"x"in o)c=p=G(o);else if(o=ne(o),c=o.min,p=o.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(o){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,p;return typeof o[0]=="number"||o instanceof R?o=G(o):o=ne(o),o instanceof re?(c=o.min,p=o.max):c=p=o,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(o){o=ne(o);var c=this.min,p=this.max,y=o.min,P=o.max,T=P.x>=c.x&&y.x<=p.x,F=P.y>=c.y&&y.y<=p.y;return T&&F},overlaps:function(o){o=ne(o);var c=this.min,p=this.max,y=o.min,P=o.max,T=P.x>c.x&&y.x<p.x,F=P.y>c.y&&y.y<p.y;return T&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,p=this.max,y=Math.abs(c.x-p.x)*o,P=Math.abs(c.y-p.y)*o;return ne(G(c.x-y,c.y-P),G(p.x+y,p.y+P))},equals:function(o){return o?(o=ne(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function ne(o,c){return!o||o instanceof re?o:new re(o,c)}function H(o,c){if(o)for(var p=c?[o,c]:o,y=0,P=p.length;y<P;y++)this.extend(p[y])}H.prototype={extend:function(o){var c=this._southWest,p=this._northEast,y,P;if(o instanceof Q)y=o,P=o;else if(o instanceof H){if(y=o._southWest,P=o._northEast,!y||!P)return this}else return o?this.extend(ae(o)||ee(o)):this;return!c&&!p?(this._southWest=new Q(y.lat,y.lng),this._northEast=new Q(P.lat,P.lng)):(c.lat=Math.min(y.lat,c.lat),c.lng=Math.min(y.lng,c.lng),p.lat=Math.max(P.lat,p.lat),p.lng=Math.max(P.lng,p.lng)),this},pad:function(o){var c=this._southWest,p=this._northEast,y=Math.abs(c.lat-p.lat)*o,P=Math.abs(c.lng-p.lng)*o;return new H(new Q(c.lat-y,c.lng-P),new Q(p.lat+y,p.lng+P))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Q||"lat"in o?o=ae(o):o=ee(o);var c=this._southWest,p=this._northEast,y,P;return o instanceof H?(y=o.getSouthWest(),P=o.getNorthEast()):y=P=o,y.lat>=c.lat&&P.lat<=p.lat&&y.lng>=c.lng&&P.lng<=p.lng},intersects:function(o){o=ee(o);var c=this._southWest,p=this._northEast,y=o.getSouthWest(),P=o.getNorthEast(),T=P.lat>=c.lat&&y.lat<=p.lat,F=P.lng>=c.lng&&y.lng<=p.lng;return T&&F},overlaps:function(o){o=ee(o);var c=this._southWest,p=this._northEast,y=o.getSouthWest(),P=o.getNorthEast(),T=P.lat>c.lat&&y.lat<p.lat,F=P.lng>c.lng&&y.lng<p.lng;return T&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=ee(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(o,c){return o instanceof H?o:new H(o,c)}function Q(o,c,p){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,p!==void 0&&(this.alt=+p)}Q.prototype={equals:function(o,c){if(!o)return!1;o=ae(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+g(this.lat,o)+", "+g(this.lng,o)+")"},distanceTo:function(o){return Ft.distance(this,ae(o))},wrap:function(){return Ft.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,p=c/Math.cos(Math.PI/180*this.lat);return ee([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function ae(o,c,p){return o instanceof Q?o:v(o)&&typeof o[0]!="object"?o.length===3?new Q(o[0],o[1],o[2]):o.length===2?new Q(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Q(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new Q(o,c,p)}var Te={latLngToPoint:function(o,c){var p=this.projection.project(o),y=this.scale(c);return this.transformation._transform(p,y)},pointToLatLng:function(o,c){var p=this.scale(c),y=this.transformation.untransform(o,p);return this.projection.unproject(y)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(o),y=this.transformation.transform(c.min,p),P=this.transformation.transform(c.max,p);return new re(y,P)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?h(o.lng,this.wrapLng,!0):o.lng,p=this.wrapLat?h(o.lat,this.wrapLat,!0):o.lat,y=o.alt;return new Q(p,c,y)},wrapLatLngBounds:function(o){var c=o.getCenter(),p=this.wrapLatLng(c),y=c.lat-p.lat,P=c.lng-p.lng;if(y===0&&P===0)return o;var T=o.getSouthWest(),F=o.getNorthEast(),W=new Q(T.lat-y,T.lng-P),V=new Q(F.lat-y,F.lng-P);return new H(W,V)}},Ft=i({},Te,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var p=Math.PI/180,y=o.lat*p,P=c.lat*p,T=Math.sin((c.lat-o.lat)*p/2),F=Math.sin((c.lng-o.lng)*p/2),W=T*T+Math.cos(y)*Math.cos(P)*F*F,V=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*V}}),se=6378137,ge={R:se,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,p=this.MAX_LATITUDE,y=Math.max(Math.min(p,o.lat),-p),P=Math.sin(y*c);return new R(this.R*o.lng*c,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(o){var c=180/Math.PI;return new Q((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:function(){var o=se*Math.PI;return new re([-o,-o],[o,o])}()};function me(o,c,p,y){if(v(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=p,this._d=y}me.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new R((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function J(o,c,p,y){return new me(o,c,p,y)}var ft=i({},Ft,{code:"EPSG:3857",projection:ge,transformation:function(){var o=.5/(Math.PI*ge.R);return J(o,.5,-o,.5)}()}),Ae=i({},ft,{code:"EPSG:900913"});function Tt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function At(o,c){var p="",y,P,T,F,W,V;for(y=0,T=o.length;y<T;y++){for(W=o[y],P=0,F=W.length;P<F;P++)V=W[P],p+=(P?"L":"M")+V.x+" "+V.y;p+=c?ce.svg?"z":"x":""}return p||"M0 0"}var tr=document.documentElement.style,qi="ActiveXObject"in window,XC=qi&&!document.addEventListener,gy="msLaunchUri"in navigator&&!("documentMode"in document),Jf=vr("webkit"),vy=vr("android"),yy=vr("android 2")||vr("android 3"),QC=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),JC=vy&&vr("Google")&&QC<537&&!("AudioNode"in window),eh=!!window.opera,xy=!gy&&vr("chrome"),by=vr("gecko")&&!Jf&&!eh&&!qi,eE=!xy&&vr("safari"),_y=vr("phantom"),wy="OTransition"in tr,tE=navigator.platform.indexOf("Win")===0,jy=qi&&"transition"in tr,th="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!yy,Ny="MozPerspective"in tr,nE=!window.L_DISABLE_3D&&(jy||th||Ny)&&!wy&&!_y,ao=typeof orientation<"u"||vr("mobile"),rE=ao&&Jf,iE=ao&&th,Sy=!window.PointerEvent&&window.MSPointerEvent,Py=!!(window.PointerEvent||Sy),ky="ontouchstart"in window||!!window.TouchEvent,aE=!window.L_NO_TOUCH&&(ky||Py),sE=ao&&eh,oE=ao&&by,lE=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,cE=function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return o}(),uE=function(){return!!document.createElement("canvas").getContext}(),nh=!!(document.createElementNS&&Tt("svg").createSVGRect),dE=!!nh&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),fE=!nh&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),hE=navigator.platform.indexOf("Mac")===0,mE=navigator.platform.indexOf("Linux")===0;function vr(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var ce={ie:qi,ielt9:XC,edge:gy,webkit:Jf,android:vy,android23:yy,androidStock:JC,opera:eh,chrome:xy,gecko:by,safari:eE,phantom:_y,opera12:wy,win:tE,ie3d:jy,webkit3d:th,gecko3d:Ny,any3d:nE,mobile:ao,mobileWebkit:rE,mobileWebkit3d:iE,msPointer:Sy,pointer:Py,touch:aE,touchNative:ky,mobileOpera:sE,mobileGecko:oE,retina:lE,passiveEvents:cE,canvas:uE,svg:nh,vml:fE,inlineSvg:dE,mac:hE,linux:mE},Cy=ce.msPointer?"MSPointerDown":"pointerdown",Ey=ce.msPointer?"MSPointerMove":"pointermove",Oy=ce.msPointer?"MSPointerUp":"pointerup",Ty=ce.msPointer?"MSPointerCancel":"pointercancel",rh={touchstart:Cy,touchmove:Ey,touchend:Oy,touchcancel:Ty},Ay={touchstart:bE,touchmove:nc,touchend:nc,touchcancel:nc},$a={},My=!1;function pE(o,c,p){return c==="touchstart"&&xE(),Ay[c]?(p=Ay[c].bind(this,p),o.addEventListener(rh[c],p,!1),p):(console.warn("wrong event specified:",c),f)}function gE(o,c,p){if(!rh[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(rh[c],p,!1)}function vE(o){$a[o.pointerId]=o}function yE(o){$a[o.pointerId]&&($a[o.pointerId]=o)}function Ly(o){delete $a[o.pointerId]}function xE(){My||(document.addEventListener(Cy,vE,!0),document.addEventListener(Ey,yE,!0),document.addEventListener(Oy,Ly,!0),document.addEventListener(Ty,Ly,!0),My=!0)}function nc(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in $a)c.touches.push($a[p]);c.changedTouches=[c],o(c)}}function bE(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&_t(c),nc(o,c)}function _E(o){var c={},p,y;for(y in o)p=o[y],c[y]=p&&p.bind?p.bind(o):p;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var wE=200;function jE(o,c){o.addEventListener("dblclick",c);var p=0,y;function P(T){if(T.detail!==1){y=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var F=$y(T);if(!(F.some(function(V){return V instanceof HTMLLabelElement&&V.attributes.for})&&!F.some(function(V){return V instanceof HTMLInputElement||V instanceof HTMLSelectElement}))){var W=Date.now();W-p<=wE?(y++,y===2&&c(_E(T))):y=1,p=W}}}return o.addEventListener("click",P),{dblclick:c,simDblclick:P}}function NE(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var ih=ac(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),so=ac(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Dy=so==="webkitTransition"||so==="OTransition"?so+"End":"transitionend";function Iy(o){return typeof o=="string"?document.getElementById(o):o}function oo(o,c){var p=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(o,null);p=y?y[c]:null}return p==="auto"?null:p}function Pe(o,c,p){var y=document.createElement(o);return y.className=c||"",p&&p.appendChild(y),y}function We(o){var c=o.parentNode;c&&c.removeChild(o)}function rc(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Ba(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function Fa(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function ah(o,c){if(o.classList!==void 0)return o.classList.contains(c);var p=ic(o);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function ye(o,c){if(o.classList!==void 0)for(var p=j(c),y=0,P=p.length;y<P;y++)o.classList.add(p[y]);else if(!ah(o,c)){var T=ic(o);sh(o,(T?T+" ":"")+c)}}function Xe(o,c){o.classList!==void 0?o.classList.remove(c):sh(o,x((" "+ic(o)+" ").replace(" "+c+" "," ")))}function sh(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function ic(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function En(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&SE(o,c)}function SE(o,c){var p=!1,y="DXImageTransform.Microsoft.Alpha";try{p=o.filters.item(y)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):o.style.filter+=" progid:"+y+"(opacity="+c+")"}function ac(o){for(var c=document.documentElement.style,p=0;p<o.length;p++)if(o[p]in c)return o[p];return!1}function Gi(o,c,p){var y=c||new R(0,0);o.style[ih]=(ce.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(p?" scale("+p+")":"")}function et(o,c){o._leaflet_pos=c,ce.any3d?Gi(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function Yi(o){return o._leaflet_pos||new R(0,0)}var lo,co,oh;if("onselectstart"in document)lo=function(){ve(window,"selectstart",_t)},co=function(){De(window,"selectstart",_t)};else{var uo=ac(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);lo=function(){if(uo){var o=document.documentElement.style;oh=o[uo],o[uo]="none"}},co=function(){uo&&(document.documentElement.style[uo]=oh,oh=void 0)}}function lh(){ve(window,"dragstart",_t)}function ch(){De(window,"dragstart",_t)}var sc,uh;function dh(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(oc(),sc=o,uh=o.style.outlineStyle,o.style.outlineStyle="none",ve(window,"keydown",oc))}function oc(){sc&&(sc.style.outlineStyle=uh,sc=void 0,uh=void 0,De(window,"keydown",oc))}function Ry(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function fh(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var PE={__proto__:null,TRANSFORM:ih,TRANSITION:so,TRANSITION_END:Dy,get:Iy,getStyle:oo,create:Pe,remove:We,empty:rc,toFront:Ba,toBack:Fa,hasClass:ah,addClass:ye,removeClass:Xe,setClass:sh,getClass:ic,setOpacity:En,testProp:ac,setTransform:Gi,setPosition:et,getPosition:Yi,get disableTextSelection(){return lo},get enableTextSelection(){return co},disableImageDrag:lh,enableImageDrag:ch,preventOutline:dh,restoreOutline:oc,getSizedParentNode:Ry,getScale:fh};function ve(o,c,p,y){if(c&&typeof c=="object")for(var P in c)mh(o,P,c[P],p);else{c=j(c);for(var T=0,F=c.length;T<F;T++)mh(o,c[T],p,y)}return this}var yr="_leaflet_events";function De(o,c,p,y){if(arguments.length===1)zy(o),delete o[yr];else if(c&&typeof c=="object")for(var P in c)ph(o,P,c[P],p);else if(c=j(c),arguments.length===2)zy(o,function(W){return k(c,W)!==-1});else for(var T=0,F=c.length;T<F;T++)ph(o,c[T],p,y);return this}function zy(o,c){for(var p in o[yr]){var y=p.split(/\d/)[0];(!c||c(y))&&ph(o,y,null,null,p)}}var hh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function mh(o,c,p,y){var P=c+d(p)+(y?"_"+d(y):"");if(o[yr]&&o[yr][P])return this;var T=function(W){return p.call(y||o,W||window.event)},F=T;!ce.touchNative&&ce.pointer&&c.indexOf("touch")===0?T=pE(o,c,T):ce.touch&&c==="dblclick"?T=jE(o,T):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(hh[c]||c,T,ce.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(T=function(W){W=W||window.event,vh(o,W)&&F(W)},o.addEventListener(hh[c],T,!1)):o.addEventListener(c,F,!1):o.attachEvent("on"+c,T),o[yr]=o[yr]||{},o[yr][P]=T}function ph(o,c,p,y,P){P=P||c+d(p)+(y?"_"+d(y):"");var T=o[yr]&&o[yr][P];if(!T)return this;!ce.touchNative&&ce.pointer&&c.indexOf("touch")===0?gE(o,c,T):ce.touch&&c==="dblclick"?NE(o,T):"removeEventListener"in o?o.removeEventListener(hh[c]||c,T,!1):o.detachEvent("on"+c,T),o[yr][P]=null}function Xi(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function gh(o){return mh(o,"wheel",Xi),this}function fo(o){return ve(o,"mousedown touchstart dblclick contextmenu",Xi),o._leaflet_disable_click=!0,this}function _t(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Qi(o){return _t(o),Xi(o),this}function $y(o){if(o.composedPath)return o.composedPath();for(var c=[],p=o.target;p;)c.push(p),p=p.parentNode;return c}function By(o,c){if(!c)return new R(o.clientX,o.clientY);var p=fh(c),y=p.boundingClientRect;return new R((o.clientX-y.left)/p.x-c.clientLeft,(o.clientY-y.top)/p.y-c.clientTop)}var kE=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fy(o){return ce.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/kE:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function vh(o,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==o;)p=p.parentNode}catch{return!1}return p!==o}var CE={__proto__:null,on:ve,off:De,stopPropagation:Xi,disableScrollPropagation:gh,disableClickPropagation:fo,preventDefault:_t,stop:Qi,getPropagationPath:$y,getMousePosition:By,getWheelDelta:Fy,isExternalTarget:vh,addListener:ve,removeListener:De},Uy=q.extend({run:function(o,c,p,y){this.stop(),this._el=o,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=Yi(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var p=this._startPos.add(this._offset.multiplyBy(o));c&&p._round(),et(this._el,p),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),je=q.extend({options:{crs:ft,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=w(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ae(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=so&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ve(this._proxy,Dy,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(ae(o),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=i({animate:p.animate},p.zoom),p.pan=i({animate:p.animate,duration:p.duration},p.pan));var y=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,p.zoom):this._tryAnimatedPan(o,p.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,p){var y=this.getZoomScale(c),P=this.getSize().divideBy(2),T=o instanceof R?o:this.latLngToContainerPoint(o),F=T.subtract(P).multiplyBy(1-1/y),W=this.containerPointToLatLng(P.add(F));return this.setView(W,c,{zoom:p})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():ee(o);var p=G(c.paddingTopLeft||c.padding||[0,0]),y=G(c.paddingBottomRight||c.padding||[0,0]),P=this.getBoundsZoom(o,!1,p.add(y));if(P=typeof c.maxZoom=="number"?Math.min(c.maxZoom,P):P,P===1/0)return{center:o.getCenter(),zoom:P};var T=y.subtract(p).divideBy(2),F=this.project(o.getSouthWest(),P),W=this.project(o.getNorthEast(),P),V=this.unproject(F.add(W).divideBy(2).add(T),P);return{center:V,zoom:P}},fitBounds:function(o,c){if(o=ee(o),!o.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(o,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=G(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Uy,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){ye(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,p){if(p=p||{},p.animate===!1||!ce.any3d)return this.setView(o,c,p);this._stop();var y=this.project(this.getCenter()),P=this.project(o),T=this.getSize(),F=this._zoom;o=ae(o),c=c===void 0?F:c;var W=Math.max(T.x,T.y),V=W*this.getZoomScale(F,c),X=P.distanceTo(y)||1,ie=1.42,fe=ie*ie;function be(tt){var xc=tt?-1:1,gO=tt?V:W,vO=V*V-W*W+xc*fe*fe*X*X,yO=2*gO*fe*X,Ch=vO/yO,wx=Math.sqrt(Ch*Ch+1)-Ch,xO=wx<1e-9?-18:Math.log(wx);return xO}function Ut(tt){return(Math.exp(tt)-Math.exp(-tt))/2}function ht(tt){return(Math.exp(tt)+Math.exp(-tt))/2}function Tn(tt){return Ut(tt)/ht(tt)}var Jt=be(0);function Ka(tt){return W*(ht(Jt)/ht(Jt+ie*tt))}function fO(tt){return W*(ht(Jt)*Tn(Jt+ie*tt)-Ut(Jt))/fe}function hO(tt){return 1-Math.pow(1-tt,1.5)}var mO=Date.now(),bx=(be(1)-Jt)/ie,pO=p.duration?1e3*p.duration:1e3*bx*.8;function _x(){var tt=(Date.now()-mO)/pO,xc=hO(tt)*bx;tt<=1?(this._flyToFrame=M(_x,this),this._move(this.unproject(y.add(P.subtract(y).multiplyBy(fO(xc)/X)),F),this.getScaleZoom(W/Ka(xc),F),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),_x.call(this),this},flyToBounds:function(o,c){var p=this._getBoundsCenterZoom(o,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(o){return o=ee(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var p=this.getCenter(),y=this._limitCenter(p,this._zoom,ee(o));return p.equals(y)||this.panTo(y,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var p=G(c.paddingTopLeft||c.padding||[0,0]),y=G(c.paddingBottomRight||c.padding||[0,0]),P=this.project(this.getCenter()),T=this.project(o),F=this.getPixelBounds(),W=ne([F.min.add(p),F.max.subtract(y)]),V=W.getSize();if(!W.contains(T)){this._enforcingBounds=!0;var X=T.subtract(W.getCenter()),ie=W.extend(T).getSize().subtract(V);P.x+=X.x<0?-ie.x:ie.x,P.y+=X.y<0?-ie.y:ie.y,this.panTo(this.unproject(P),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),y=c.divideBy(2).round(),P=p.divideBy(2).round(),T=y.subtract(P);return!T.x&&!T.y?this:(o.animate&&o.pan?this.panBy(T):(o.pan&&this._rawPanBy(T),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=l(this._handleGeolocationResponse,this),p=l(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,o):navigator.geolocation.getCurrentPosition(c,p,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,p=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,p=o.coords.longitude,y=new Q(c,p),P=y.toBounds(o.coords.accuracy*2),T=this._locateOptions;if(T.setView){var F=this.getBoundsZoom(P);this.setView(y,T.maxZoom?Math.min(F,T.maxZoom):F)}var W={latlng:y,bounds:P,timestamp:o.timestamp};for(var V in o.coords)typeof o.coords[V]=="number"&&(W[V]=o.coords[V]);this.fire("locationfound",W)}},addHandler:function(o,c){if(!c)return this;var p=this[o]=new c(this);return this._handlers.push(p),this.options[o]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),We(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)We(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var p="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),y=Pe("div",p,c||this._mapPane);return o&&(this._panes[o]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),p=this.unproject(o.getTopRight());return new H(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,p){o=ee(o),p=G(p||[0,0]);var y=this.getZoom()||0,P=this.getMinZoom(),T=this.getMaxZoom(),F=o.getNorthWest(),W=o.getSouthEast(),V=this.getSize().subtract(p),X=ne(this.project(W,y),this.project(F,y)).getSize(),ie=ce.any3d?this.options.zoomSnap:1,fe=V.x/X.x,be=V.y/X.y,Ut=c?Math.max(fe,be):Math.min(fe,be);return y=this.getScaleZoom(Ut,y),ie&&(y=Math.round(y/(ie/100))*(ie/100),y=c?Math.ceil(y/ie)*ie:Math.floor(y/ie)*ie),Math.max(P,Math.min(T,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var p=this._getTopLeftPoint(o,c);return new re(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(o)/p.scale(c)},getScaleZoom:function(o,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var y=p.zoom(o*p.scale(c));return isNaN(y)?1/0:y},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ae(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(G(o),c)},layerPointToLatLng:function(o){var c=G(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(ae(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ae(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(ee(o))},distance:function(o,c){return this.options.crs.distance(ae(o),ae(c))},containerPointToLayerPoint:function(o){return G(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return G(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(G(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(o)))},mouseEventToContainerPoint:function(o){return By(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=Iy(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ve(c,"scroll",this._onScroll,this),this._containerId=d(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,ye(o,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=oo(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),et(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ye(o.markerPane,"leaflet-zoom-hide"),ye(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,p){et(this._mapPane,new R(0,0));var y=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var P=this._zoom!==c;this._moveStart(P,p)._move(o,c)._moveEnd(P),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,p,y){c===void 0&&(c=this._zoom);var P=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),y?p&&p.pinch&&this.fire("zoom",p):((P||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){et(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[d(this._container)]=this;var c=o?De:ve;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var p=[],y,P=c==="mouseout"||c==="mouseover",T=o.target||o.srcElement,F=!1;T;){if(y=this._targets[d(T)],y&&(c==="click"||c==="preclick")&&this._draggableMoved(y)){F=!0;break}if(y&&y.listens(c,!0)&&(P&&!vh(T,o)||(p.push(y),P))||T===this._container)break;T=T.parentNode}return!p.length&&!F&&!P&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var p=o.type;p==="mousedown"&&dh(c),this._fireDOMEvent(o,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,p){if(o.type==="click"){var y=i({},o);y.type="preclick",this._fireDOMEvent(y,y.type,p)}var P=this._findEventTargets(o,c);if(p){for(var T=[],F=0;F<p.length;F++)p[F].listens(c,!0)&&T.push(p[F]);P=T.concat(P)}if(P.length){c==="contextmenu"&&_t(o);var W=P[0],V={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var X=W.getLatLng&&(!W._radius||W._radius<=10);V.containerPoint=X?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(o),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=X?W.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(F=0;F<P.length;F++)if(P[F].fire(c,V,!0),V.originalEvent._stopped||P[F].options.bubblingMouseEvents===!1&&k(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return Yi(this._mapPane)||new R(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var p=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var p=this.getSize()._divideBy(2);return this.project(o,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,p){var y=this._getNewPixelOrigin(p,c);return this.project(o,c)._subtract(y)},_latLngBoundsToNewLayerBounds:function(o,c,p){var y=this._getNewPixelOrigin(p,c);return ne([this.project(o.getSouthWest(),c)._subtract(y),this.project(o.getNorthWest(),c)._subtract(y),this.project(o.getSouthEast(),c)._subtract(y),this.project(o.getNorthEast(),c)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,p){if(!p)return o;var y=this.project(o,c),P=this.getSize().divideBy(2),T=new re(y.subtract(P),y.add(P)),F=this._getBoundsOffset(T,p,c);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?o:this.unproject(y.add(F),c)},_limitOffset:function(o,c){if(!c)return o;var p=this.getPixelBounds(),y=new re(p.min.add(o),p.max.add(o));return o.add(this._getBoundsOffset(y,c))},_getBoundsOffset:function(o,c,p){var y=ne(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),P=y.min.subtract(o.min),T=y.max.subtract(o.max),F=this._rebound(P.x,-T.x),W=this._rebound(P.y,-T.y);return new R(F,W)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),p=this.getMaxZoom(),y=ce.any3d?this.options.zoomSnap:1;return y&&(o=Math.round(o/y)*y),Math.max(c,Math.min(p,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var p=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var o=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var p=ih,y=this._proxy.style[p];Gi(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),y===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){We(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();Gi(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(c),P=this._getCenterOffset(o)._divideBy(1-1/y);return p.animate!==!0&&!this.getSize().contains(P)?!1:(M(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,p,y){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,ye(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function EE(o,c){return new je(o,c)}var nr=C.extend({options:{position:"topright"},initialize:function(o){w(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),p=this.getPosition(),y=o._controlCorners[p];return ye(c,"leaflet-control"),p.indexOf("bottom")!==-1?y.insertBefore(c,y.firstChild):y.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(We(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),ho=function(o){return new nr(o)};je.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",p=this._controlContainer=Pe("div",c+"control-container",this._container);function y(P,T){var F=c+P+" "+c+T;o[P+T]=Pe("div",F,p)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)We(this._controlCorners[o]);We(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Hy=nr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,p,y){return p<y?-1:y<p?1:0}},initialize:function(o,c,p){w(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in o)this._addLayer(o[y],y);for(y in c)this._addLayer(c[y],y,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return nr.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(d(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){ye(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(ye(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Xe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=Pe("div",o),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),fo(c),gh(c);var y=this._section=Pe("section",o+"-list");p&&(this._map.on("click",this.collapse,this),ve(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var P=this._layersLink=Pe("a",o+"-toggle",c);P.href="#",P.title="Layers",P.setAttribute("role","button"),ve(P,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){_t(T),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Pe("div",o+"-base",y),this._separator=Pe("div",o+"-separator",y),this._overlaysList=Pe("div",o+"-overlays",y),c.appendChild(y)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&d(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,p){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(l(function(y,P){return this.options.sortFunction(y.layer,P.layer,y.name,P.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;rc(this._baseLayersList),rc(this._overlaysList),this._layerControlInputs=[];var o,c,p,y,P=0;for(p=0;p<this._layers.length;p++)y=this._layers[p],this._addItem(y),c=c||y.overlay,o=o||!y.overlay,P+=y.overlay?0:1;return this.options.hideSingleBase&&(o=o&&P>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(d(o.target)),p=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(o,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=p,y.firstChild},_addItem:function(o){var c=document.createElement("label"),p=this._map.hasLayer(o.layer),y;o.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=p):y=this._createRadioElement("leaflet-base-layers_"+d(this),p),this._layerControlInputs.push(y),y.layerId=d(o.layer),ve(y,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+o.name;var T=document.createElement("span");c.appendChild(T),T.appendChild(y),T.appendChild(P);var F=o.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,p,y=[],P=[];this._handlingClick=!0;for(var T=o.length-1;T>=0;T--)c=o[T],p=this._getLayer(c.layerId).layer,c.checked?y.push(p):c.checked||P.push(p);for(T=0;T<P.length;T++)this._map.hasLayer(P[T])&&this._map.removeLayer(P[T]);for(T=0;T<y.length;T++)this._map.hasLayer(y[T])||this._map.addLayer(y[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,p,y=this._map.getZoom(),P=o.length-1;P>=0;P--)c=o[P],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&y<p.options.minZoom||p.options.maxZoom!==void 0&&y>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ve(o,"click",_t),this.expand();var c=this;setTimeout(function(){De(o,"click",_t),c._preventClick=!1})}}),OE=function(o,c,p){return new Hy(o,c,p)},yh=nr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",p=Pe("div",c+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,p,y,P){var T=Pe("a",p,y);return T.innerHTML=o,T.href="#",T.title=c,T.setAttribute("role","button"),T.setAttribute("aria-label",c),fo(T),ve(T,"click",Qi),ve(T,"click",P,this),ve(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";Xe(this._zoomInButton,c),Xe(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(ye(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(ye(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});je.mergeOptions({zoomControl:!0}),je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new yh,this.addControl(this.zoomControl))});var TE=function(o){return new yh(o)},Zy=nr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",p=Pe("div",c),y=this.options;return this._addScales(y,c+"-line",p),o.on(y.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),p},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,p){o.metric&&(this._mScale=Pe("div",c,p)),o.imperial&&(this._iScale=Pe("div",c,p))},_update:function(){var o=this._map,c=o.getSize().y/2,p=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/o)},_updateImperial:function(o){var c=o*3.2808399,p,y,P;c>5280?(p=c/5280,y=this._getRoundNum(p),this._updateScale(this._iScale,y+" mi",y/p)):(P=this._getRoundNum(c),this._updateScale(this._iScale,P+" ft",P/c))},_updateScale:function(o,c,p){o.style.width=Math.round(this.options.maxWidth*p)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),p=o/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),AE=function(o){return new Zy(o)},ME='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',xh=nr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?ME+" ":"")+"Leaflet</a>"},initialize:function(o){w(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),fo(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),o.length&&p.push(o.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});je.mergeOptions({attributionControl:!0}),je.addInitHook(function(){this.options.attributionControl&&new xh().addTo(this)});var LE=function(o){return new xh(o)};nr.Layers=Hy,nr.Zoom=yh,nr.Scale=Zy,nr.Attribution=xh,ho.layers=OE,ho.zoom=TE,ho.scale=AE,ho.attribution=LE;var xr=C.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xr.addTo=function(o,c){return o.addHandler(c,this),this};var DE={Events:Z},Wy=ce.touch?"touchstart mousedown":"mousedown",fi=q.extend({options:{clickTolerance:3},initialize:function(o,c,p,y){w(this,y),this._element=o,this._dragStartTarget=c||o,this._preventOutline=p},enable:function(){this._enabled||(ve(this._dragStartTarget,Wy,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fi._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,Wy,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!ah(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){fi._dragging===this&&this.finishDrag();return}if(!(fi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(fi._dragging=this,this._preventOutline&&dh(this._element),lh(),lo(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,p=Ry(this._element);this._startPoint=new R(c.clientX,c.clientY),this._startPos=Yi(this._element),this._parentScale=fh(p);var y=o.type==="mousedown";ve(document,y?"mousemove":"touchmove",this._onMove,this),ve(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,p=new R(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,_t(o),this._moved||(this.fire("dragstart"),this._moved=!0,ye(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ye(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),et(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Xe(document.body,"leaflet-dragging"),this._lastTarget&&(Xe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),ch(),co();var c=this._moved&&this._moving;this._moving=!1,fi._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Vy(o,c,p){var y,P=[1,4,2,8],T,F,W,V,X,ie,fe,be;for(T=0,ie=o.length;T<ie;T++)o[T]._code=Ji(o[T],c);for(W=0;W<4;W++){for(fe=P[W],y=[],T=0,ie=o.length,F=ie-1;T<ie;F=T++)V=o[T],X=o[F],V._code&fe?X._code&fe||(be=lc(X,V,fe,c,p),be._code=Ji(be,c),y.push(be)):(X._code&fe&&(be=lc(X,V,fe,c,p),be._code=Ji(be,c),y.push(be)),y.push(V));o=y}return o}function Ky(o,c){var p,y,P,T,F,W,V,X,ie;if(!o||o.length===0)throw new Error("latlngs not passed");On(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var fe=ae([0,0]),be=ee(o),Ut=be.getNorthWest().distanceTo(be.getSouthWest())*be.getNorthEast().distanceTo(be.getNorthWest());Ut<1700&&(fe=bh(o));var ht=o.length,Tn=[];for(p=0;p<ht;p++){var Jt=ae(o[p]);Tn.push(c.project(ae([Jt.lat-fe.lat,Jt.lng-fe.lng])))}for(W=V=X=0,p=0,y=ht-1;p<ht;y=p++)P=Tn[p],T=Tn[y],F=P.y*T.x-T.y*P.x,V+=(P.x+T.x)*F,X+=(P.y+T.y)*F,W+=F*3;W===0?ie=Tn[0]:ie=[V/W,X/W];var Ka=c.unproject(G(ie));return ae([Ka.lat+fe.lat,Ka.lng+fe.lng])}function bh(o){for(var c=0,p=0,y=0,P=0;P<o.length;P++){var T=ae(o[P]);c+=T.lat,p+=T.lng,y++}return ae([c/y,p/y])}var IE={__proto__:null,clipPolygon:Vy,polygonCenter:Ky,centroid:bh};function qy(o,c){if(!c||!o.length)return o.slice();var p=c*c;return o=$E(o,p),o=zE(o,p),o}function Gy(o,c,p){return Math.sqrt(mo(o,c,p,!0))}function RE(o,c,p){return mo(o,c,p)}function zE(o,c){var p=o.length,y=typeof Uint8Array<"u"?Uint8Array:Array,P=new y(p);P[0]=P[p-1]=1,_h(o,P,c,0,p-1);var T,F=[];for(T=0;T<p;T++)P[T]&&F.push(o[T]);return F}function _h(o,c,p,y,P){var T=0,F,W,V;for(W=y+1;W<=P-1;W++)V=mo(o[W],o[y],o[P],!0),V>T&&(F=W,T=V);T>p&&(c[F]=1,_h(o,c,p,y,F),_h(o,c,p,F,P))}function $E(o,c){for(var p=[o[0]],y=1,P=0,T=o.length;y<T;y++)BE(o[y],o[P])>c&&(p.push(o[y]),P=y);return P<T-1&&p.push(o[T-1]),p}var Yy;function Xy(o,c,p,y,P){var T=y?Yy:Ji(o,p),F=Ji(c,p),W,V,X;for(Yy=F;;){if(!(T|F))return[o,c];if(T&F)return!1;W=T||F,V=lc(o,c,W,p,P),X=Ji(V,p),W===T?(o=V,T=X):(c=V,F=X)}}function lc(o,c,p,y,P){var T=c.x-o.x,F=c.y-o.y,W=y.min,V=y.max,X,ie;return p&8?(X=o.x+T*(V.y-o.y)/F,ie=V.y):p&4?(X=o.x+T*(W.y-o.y)/F,ie=W.y):p&2?(X=V.x,ie=o.y+F*(V.x-o.x)/T):p&1&&(X=W.x,ie=o.y+F*(W.x-o.x)/T),new R(X,ie,P)}function Ji(o,c){var p=0;return o.x<c.min.x?p|=1:o.x>c.max.x&&(p|=2),o.y<c.min.y?p|=4:o.y>c.max.y&&(p|=8),p}function BE(o,c){var p=c.x-o.x,y=c.y-o.y;return p*p+y*y}function mo(o,c,p,y){var P=c.x,T=c.y,F=p.x-P,W=p.y-T,V=F*F+W*W,X;return V>0&&(X=((o.x-P)*F+(o.y-T)*W)/V,X>1?(P=p.x,T=p.y):X>0&&(P+=F*X,T+=W*X)),F=o.x-P,W=o.y-T,y?F*F+W*W:new R(P,T)}function On(o){return!v(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Qy(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),On(o)}function Jy(o,c){var p,y,P,T,F,W,V,X;if(!o||o.length===0)throw new Error("latlngs not passed");On(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ie=ae([0,0]),fe=ee(o),be=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());be<1700&&(ie=bh(o));var Ut=o.length,ht=[];for(p=0;p<Ut;p++){var Tn=ae(o[p]);ht.push(c.project(ae([Tn.lat-ie.lat,Tn.lng-ie.lng])))}for(p=0,y=0;p<Ut-1;p++)y+=ht[p].distanceTo(ht[p+1])/2;if(y===0)X=ht[0];else for(p=0,T=0;p<Ut-1;p++)if(F=ht[p],W=ht[p+1],P=F.distanceTo(W),T+=P,T>y){V=(T-y)/P,X=[W.x-V*(W.x-F.x),W.y-V*(W.y-F.y)];break}var Jt=c.unproject(G(X));return ae([Jt.lat+ie.lat,Jt.lng+ie.lng])}var FE={__proto__:null,simplify:qy,pointToSegmentDistance:Gy,closestPointOnSegment:RE,clipSegment:Xy,_getEdgeIntersection:lc,_getBitCode:Ji,_sqClosestPointOnSegment:mo,isFlat:On,_flat:Qy,polylineCenter:Jy},wh={project:function(o){return new R(o.lng,o.lat)},unproject:function(o){return new Q(o.y,o.x)},bounds:new re([-180,-90],[180,90])},jh={R:6378137,R_MINOR:6356752314245179e-9,bounds:new re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,p=this.R,y=o.lat*c,P=this.R_MINOR/p,T=Math.sqrt(1-P*P),F=T*Math.sin(y),W=Math.tan(Math.PI/4-y/2)/Math.pow((1-F)/(1+F),T/2);return y=-p*Math.log(Math.max(W,1e-10)),new R(o.lng*c*p,y)},unproject:function(o){for(var c=180/Math.PI,p=this.R,y=this.R_MINOR/p,P=Math.sqrt(1-y*y),T=Math.exp(-o.y/p),F=Math.PI/2-2*Math.atan(T),W=0,V=.1,X;W<15&&Math.abs(V)>1e-7;W++)X=P*Math.sin(F),X=Math.pow((1-X)/(1+X),P/2),V=Math.PI/2-2*Math.atan(T*X)-F,F+=V;return new Q(F*c,o.x*c/p)}},UE={__proto__:null,LonLat:wh,Mercator:jh,SphericalMercator:ge},HE=i({},Ft,{code:"EPSG:3395",projection:jh,transformation:function(){var o=.5/(Math.PI*jh.R);return J(o,.5,-o,.5)}()}),ex=i({},Ft,{code:"EPSG:4326",projection:wh,transformation:J(1/180,1,-1/180,.5)}),ZE=i({},Te,{projection:wh,transformation:J(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var p=c.lng-o.lng,y=c.lat-o.lat;return Math.sqrt(p*p+y*y)},infinite:!0});Te.Earth=Ft,Te.EPSG3395=HE,Te.EPSG3857=ft,Te.EPSG900913=Ae,Te.EPSG4326=ex,Te.Simple=ZE;var rr=q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[d(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[d(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});je.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=d(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=d(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return d(o)in this._layers},eachLayer:function(o,c){for(var p in this._layers)o.call(c,this._layers[p]);return this},_addLayers:function(o){o=o?v(o)?o:[o]:[];for(var c=0,p=o.length;c<p;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[d(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=d(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,p=this._getZoomSpan();for(var y in this._zoomBoundLayers){var P=this._zoomBoundLayers[y].options;o=P.minZoom===void 0?o:Math.min(o,P.minZoom),c=P.maxZoom===void 0?c:Math.max(c,P.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ua=rr.extend({initialize:function(o,c){w(this,c),this._layers={};var p,y;if(o)for(p=0,y=o.length;p<y;p++)this.addLayer(o[p])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),p,y;for(p in this._layers)y=this._layers[p],y[o]&&y[o].apply(y,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var p in this._layers)o.call(c,this._layers[p]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return d(o)}}),WE=function(o,c){return new Ua(o,c)},Ar=Ua.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ua.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ua.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new H;for(var c in this._layers){var p=this._layers[c];o.extend(p.getBounds?p.getBounds():p.getLatLng())}return o}}),VE=function(o,c){return new Ar(o,c)},Ha=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){w(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var p=this._getIconUrl(o);if(!p){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(y,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(o,c){var p=this.options,y=p[c+"Size"];typeof y=="number"&&(y=[y,y]);var P=G(y),T=G(c==="shadow"&&p.shadowAnchor||p.iconAnchor||P&&P.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(p.className||""),T&&(o.style.marginLeft=-T.x+"px",o.style.marginTop=-T.y+"px"),P&&(o.style.width=P.x+"px",o.style.height=P.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return ce.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function KE(o){return new Ha(o)}var po=Ha.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof po.imagePath!="string"&&(po.imagePath=this._detectIconPath()),(this.options.imagePath||po.imagePath)+Ha.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(p,y,P){var T=y.exec(p);return T&&T[P]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Pe("div","leaflet-default-icon-path",document.body),c=oo(o,"background-image")||oo(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),tx=xr.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new fi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ye(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,p=c._map,y=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,T=Yi(c._icon),F=p.getPixelBounds(),W=p.getPixelOrigin(),V=ne(F.min._subtract(W).add(P),F.max._subtract(W).subtract(P));if(!V.contains(T)){var X=G((Math.max(V.max.x,T.x)-V.max.x)/(F.max.x-V.max.x)-(Math.min(V.min.x,T.x)-V.min.x)/(F.min.x-V.min.x),(Math.max(V.max.y,T.y)-V.max.y)/(F.max.y-V.max.y)-(Math.min(V.min.y,T.y)-V.min.y)/(F.min.y-V.min.y)).multiplyBy(y);p.panBy(X,{animate:!1}),this._draggable._newPos._add(X),this._draggable._startPos._add(X),et(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=M(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,p=c._shadow,y=Yi(c._icon),P=c._map.layerPointToLatLng(y);p&&et(p,y),c._latlng=P,o.latlng=P,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),cc=rr.extend({options:{icon:new po,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){w(this,c),this._latlng=ae(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=ae(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=o.icon.createIcon(this._icon),y=!1;p!==this._icon&&(this._icon&&this._removeIcon(),y=!0,o.title&&(p.title=o.title),p.tagName==="IMG"&&(p.alt=o.alt||"")),ye(p,c),o.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ve(p,"focus",this._panOnFocus,this);var P=o.icon.createShadow(this._shadow),T=!1;P!==this._shadow&&(this._removeShadow(),T=!0),P&&(ye(P,c),P.alt=""),this._shadow=P,o.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&T&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),We(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&We(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&et(this._icon,o),this._shadow&&et(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(ye(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),tx)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new tx(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&En(this._icon,o),this._shadow&&En(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,p=c.iconSize?G(c.iconSize):G(0,0),y=c.iconAnchor?G(c.iconAnchor):G(0,0);o.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:p.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function qE(o,c){return new cc(o,c)}var hi=rr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return w(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),uc=hi.extend({options:{fill:!0,radius:10},initialize:function(o,c){w(this,c),this._latlng=ae(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=ae(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return hi.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,p=this._clickTolerance(),y=[o+p,c+p];this._pxBounds=new re(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function GE(o,c){return new uc(o,c)}var Nh=uc.extend({initialize:function(o,c,p){if(typeof c=="number"&&(c=i({},p,{radius:c})),w(this,c),this._latlng=ae(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:hi.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,p=this._map,y=p.options.crs;if(y.distance===Ft.distance){var P=Math.PI/180,T=this._mRadius/Ft.R/P,F=p.project([c+T,o]),W=p.project([c-T,o]),V=F.add(W).divideBy(2),X=p.unproject(V).lat,ie=Math.acos((Math.cos(T*P)-Math.sin(c*P)*Math.sin(X*P))/(Math.cos(c*P)*Math.cos(X*P)))/P;(isNaN(ie)||ie===0)&&(ie=T/Math.cos(Math.PI/180*c)),this._point=V.subtract(p.getPixelOrigin()),this._radius=isNaN(ie)?0:V.x-p.project([X,o-ie]).x,this._radiusY=V.y-F.y}else{var fe=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(fe).x}this._updateBounds()}});function YE(o,c,p){return new Nh(o,c,p)}var Mr=hi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){w(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,p=null,y=mo,P,T,F=0,W=this._parts.length;F<W;F++)for(var V=this._parts[F],X=1,ie=V.length;X<ie;X++){P=V[X-1],T=V[X];var fe=y(o,P,T,!0);fe<c&&(c=fe,p=y(o,P,T))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Jy(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=ae(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new H,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return On(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],p=On(o),y=0,P=o.length;y<P;y++)p?(c[y]=ae(o[y]),this._bounds.extend(c[y])):c[y]=this._convertLatLngs(o[y]);return c},_project:function(){var o=new re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new R(o,o);this._rawPxBounds&&(this._pxBounds=new re([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,p){var y=o[0]instanceof Q,P=o.length,T,F;if(y){for(F=[],T=0;T<P;T++)F[T]=this._map.latLngToLayerPoint(o[T]),p.extend(F[T]);c.push(F)}else for(T=0;T<P;T++)this._projectLatlngs(o[T],c,p)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,y,P,T,F,W,V;for(p=0,P=0,T=this._rings.length;p<T;p++)for(V=this._rings[p],y=0,F=V.length;y<F-1;y++)W=Xy(V[y],V[y+1],o,y,!0),W&&(c[P]=c[P]||[],c[P].push(W[0]),(W[1]!==V[y+1]||y===F-2)&&(c[P].push(W[1]),P++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,p=0,y=o.length;p<y;p++)o[p]=qy(o[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var p,y,P,T,F,W,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(p=0,T=this._parts.length;p<T;p++)for(W=this._parts[p],y=0,F=W.length,P=F-1;y<F;P=y++)if(!(!c&&y===0)&&Gy(o,W[P],W[y])<=V)return!0;return!1}});function XE(o,c){return new Mr(o,c)}Mr._flat=Qy;var Za=Mr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ky(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=Mr.prototype._convertLatLngs.call(this,o),p=c.length;return p>=2&&c[0]instanceof Q&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(o){Mr.prototype._setLatLngs.call(this,o),On(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return On(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,p=new R(c,c);if(o=new re(o.min.subtract(p),o.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,P=this._rings.length,T;y<P;y++)T=Vy(this._rings[y],o,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,p,y,P,T,F,W,V,X;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(T=0,V=this._parts.length;T<V;T++)for(p=this._parts[T],F=0,X=p.length,W=X-1;F<X;W=F++)y=p[F],P=p[W],y.y>o.y!=P.y>o.y&&o.x<(P.x-y.x)*(o.y-y.y)/(P.y-y.y)+y.x&&(c=!c);return c||Mr.prototype._containsPoint.call(this,o,!0)}});function QE(o,c){return new Za(o,c)}var Lr=Ar.extend({initialize:function(o,c){w(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=v(o)?o:o.features,p,y,P;if(c){for(p=0,y=c.length;p<y;p++)P=c[p],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var T=this.options;if(T.filter&&!T.filter(o))return this;var F=dc(o,T);return F?(F.feature=mc(o),F.defaultOptions=F.options,this.resetStyle(F),T.onEachFeature&&T.onEachFeature(o,F),this.addLayer(F)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function dc(o,c){var p=o.type==="Feature"?o.geometry:o,y=p?p.coordinates:null,P=[],T=c&&c.pointToLayer,F=c&&c.coordsToLatLng||Sh,W,V,X,ie;if(!y&&!p)return null;switch(p.type){case"Point":return W=F(y),nx(T,o,W,c);case"MultiPoint":for(X=0,ie=y.length;X<ie;X++)W=F(y[X]),P.push(nx(T,o,W,c));return new Ar(P);case"LineString":case"MultiLineString":return V=fc(y,p.type==="LineString"?0:1,F),new Mr(V,c);case"Polygon":case"MultiPolygon":return V=fc(y,p.type==="Polygon"?1:2,F),new Za(V,c);case"GeometryCollection":for(X=0,ie=p.geometries.length;X<ie;X++){var fe=dc({geometry:p.geometries[X],type:"Feature",properties:o.properties},c);fe&&P.push(fe)}return new Ar(P);case"FeatureCollection":for(X=0,ie=p.features.length;X<ie;X++){var be=dc(p.features[X],c);be&&P.push(be)}return new Ar(P);default:throw new Error("Invalid GeoJSON object.")}}function nx(o,c,p,y){return o?o(c,p):new cc(p,y&&y.markersInheritOptions&&y)}function Sh(o){return new Q(o[1],o[0],o[2])}function fc(o,c,p){for(var y=[],P=0,T=o.length,F;P<T;P++)F=c?fc(o[P],c-1,p):(p||Sh)(o[P]),y.push(F);return y}function Ph(o,c){return o=ae(o),o.alt!==void 0?[g(o.lng,c),g(o.lat,c),g(o.alt,c)]:[g(o.lng,c),g(o.lat,c)]}function hc(o,c,p,y){for(var P=[],T=0,F=o.length;T<F;T++)P.push(c?hc(o[T],On(o[T])?0:c-1,p,y):Ph(o[T],y));return!c&&p&&P.length>0&&P.push(P[0].slice()),P}function Wa(o,c){return o.feature?i({},o.feature,{geometry:c}):mc(c)}function mc(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var kh={toGeoJSON:function(o){return Wa(this,{type:"Point",coordinates:Ph(this.getLatLng(),o)})}};cc.include(kh),Nh.include(kh),uc.include(kh),Mr.include({toGeoJSON:function(o){var c=!On(this._latlngs),p=hc(this._latlngs,c?1:0,!1,o);return Wa(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),Za.include({toGeoJSON:function(o){var c=!On(this._latlngs),p=c&&!On(this._latlngs[0]),y=hc(this._latlngs,p?2:c?1:0,!0,o);return c||(y=[y]),Wa(this,{type:(p?"Multi":"")+"Polygon",coordinates:y})}}),Ua.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(o).geometry.coordinates)}),Wa(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var p=c==="GeometryCollection",y=[];return this.eachLayer(function(P){if(P.toGeoJSON){var T=P.toGeoJSON(o);if(p)y.push(T.geometry);else{var F=mc(T);F.type==="FeatureCollection"?y.push.apply(y,F.features):y.push(F)}}}),p?Wa(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function rx(o,c){return new Lr(o,c)}var JE=rx,pc=rr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,p){this._url=o,this._bounds=ee(c),w(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ye(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){We(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Ba(this._image),this},bringToBack:function(){return this._map&&Fa(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=ee(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:Pe("img");if(ye(c,"leaflet-image-layer"),this._zoomAnimated&&ye(c,"leaflet-zoom-animated"),this.options.className&&ye(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=l(this.fire,this,"load"),c.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Gi(this._image,p,c)},_reset:function(){var o=this._image,c=new re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();et(o,c.min),o.style.width=p.x+"px",o.style.height=p.y+"px"},_updateOpacity:function(){En(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),eO=function(o,c,p){return new pc(o,c,p)},ix=pc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:Pe("video");if(ye(c,"leaflet-image-layer"),this._zoomAnimated&&ye(c,"leaflet-zoom-animated"),this.options.className&&ye(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=l(this.fire,this,"load"),o){for(var p=c.getElementsByTagName("source"),y=[],P=0;P<p.length;P++)y.push(p[P].src);this._url=p.length>0?y:[c.src];return}v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var F=Pe("source");F.src=this._url[T],c.appendChild(F)}}});function tO(o,c,p){return new ix(o,c,p)}var ax=pc.extend({_initImage:function(){var o=this._image=this._url;ye(o,"leaflet-image-layer"),this._zoomAnimated&&ye(o,"leaflet-zoom-animated"),this.options.className&&ye(o,this.options.className),o.onselectstart=f,o.onmousemove=f}});function nO(o,c,p){return new ax(o,c,p)}var br=rr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof Q||v(o))?(this._latlng=ae(o),w(this,c)):(w(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&En(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&En(this._container,1),this.bringToFront(),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(En(this._container,0),this._removeTimeout=setTimeout(l(We,void 0,this._container),200)):We(this._container),this.options.interactive&&(Xe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ae(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ba(this._container),this},bringToBack:function(){return this._map&&Fa(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof Ar){c=null;var p=this._source._layers;for(var y in p)if(p[y]._map){c=p[y];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=G(this.options.offset),p=this._getAnchor();this._zoomAnimated?et(this._container,o.add(p)):c=c.add(o).add(p);var y=this._containerBottom=-c.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=y+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});je.include({_initOverlay:function(o,c,p,y){var P=c;return P instanceof o||(P=new o(y).setContent(c)),p&&P.setLatLng(p),P}}),rr.include({_initOverlay:function(o,c,p,y){var P=p;return P instanceof o?(w(P,y),P._source=this):(P=c&&!y?c:new o(y,this),P.setContent(p)),P}});var gc=br.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,br.prototype.openOn.call(this,o)},onAdd:function(o){br.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hi||this._source.on("preclick",Xi))},onRemove:function(o){br.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hi||this._source.off("preclick",Xi))},getEvents:function(){var o=br.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=Pe("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Pe("div",o+"-content-wrapper",c);if(this._contentNode=Pe("div",o+"-content",p),fo(c),gh(this._contentNode),ve(c,"contextmenu",Xi),this._tipContainer=Pe("div",o+"-tip-container",c),this._tip=Pe("div",o+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=Pe("a",o+"-close-button",c);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',ve(y,"click",function(P){_t(P),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var p=o.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var y=o.offsetHeight,P=this.options.maxHeight,T="leaflet-popup-scrolled";P&&y>P?(c.height=P+"px",ye(o,T)):Xe(o,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),p=this._getAnchor();et(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(oo(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,y=this._containerWidth,P=new R(this._containerLeft,-p-this._containerBottom);P._add(Yi(this._container));var T=o.layerPointToContainerPoint(P),F=G(this.options.autoPanPadding),W=G(this.options.autoPanPaddingTopLeft||F),V=G(this.options.autoPanPaddingBottomRight||F),X=o.getSize(),ie=0,fe=0;T.x+y+V.x>X.x&&(ie=T.x+y-X.x+V.x),T.x-ie-W.x<0&&(ie=T.x-W.x),T.y+p+V.y>X.y&&(fe=T.y+p-X.y+V.y),T.y-fe-W.y<0&&(fe=T.y-W.y),(ie||fe)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([ie,fe]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),rO=function(o,c){return new gc(o,c)};je.mergeOptions({closePopupOnClick:!0}),je.include({openPopup:function(o,c,p){return this._initOverlay(gc,o,c,p).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),rr.include({bindPopup:function(o,c){return this._popup=this._initOverlay(gc,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Ar||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Qi(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof hi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var vc=br.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){br.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){br.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=br.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,p,y=this._map,P=this._container,T=y.latLngToContainerPoint(y.getCenter()),F=y.layerPointToContainerPoint(o),W=this.options.direction,V=P.offsetWidth,X=P.offsetHeight,ie=G(this.options.offset),fe=this._getAnchor();W==="top"?(c=V/2,p=X):W==="bottom"?(c=V/2,p=0):W==="center"?(c=V/2,p=X/2):W==="right"?(c=0,p=X/2):W==="left"?(c=V,p=X/2):F.x<T.x?(W="right",c=0,p=X/2):(W="left",c=V+(ie.x+fe.x)*2,p=X/2),o=o.subtract(G(c,p,!0)).add(ie).add(fe),Xe(P,"leaflet-tooltip-right"),Xe(P,"leaflet-tooltip-left"),Xe(P,"leaflet-tooltip-top"),Xe(P,"leaflet-tooltip-bottom"),ye(P,"leaflet-tooltip-"+W),et(P,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&En(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),iO=function(o,c){return new vc(o,c)};je.include({openTooltip:function(o,c,p){return this._initOverlay(vc,o,c,p).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),rr.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vc,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Ar||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(ve(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ve(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,p,y;this._tooltip.options.sticky&&o.originalEvent&&(p=this._map.mouseEventToContainerPoint(o.originalEvent),y=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(c)}});var sx=Ha.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),p=this.options;if(p.html instanceof Element?(rc(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var y=G(p.bgPos);c.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function aO(o){return new sx(o)}Ha.Default=po;var go=rr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){w(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),We(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ba(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Fa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof R?o:new R(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,p=-o(-1/0,1/0),y=0,P=c.length,T;y<P;y++)T=c[y].style.zIndex,c[y]!==this._container&&T&&(p=o(p,+T));isFinite(p)&&(this.options.zIndex=p+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){En(this._container,this.options.opacity);var o=+new Date,c=!1,p=!1;for(var y in this._tiles){var P=this._tiles[y];if(!(!P.current||!P.loaded)){var T=Math.min(1,(o-P.loaded)/200);En(P.el,T),T<1?c=!0:(P.active?p=!0:this._onOpaqueTile(P),P.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&(z(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===o?(this._levels[p].el.style.zIndex=c-Math.abs(o-p),this._onUpdateLevel(p)):(We(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var y=this._levels[o],P=this._map;return y||(y=this._levels[o]={},y.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=c,y.origin=P.project(P.unproject(P.getPixelOrigin()),o).round(),y.zoom=o,this._setZoomTransform(y,P.getCenter(),P.getZoom()),f(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var o,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var y=c.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)We(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,p,y){var P=Math.floor(o/2),T=Math.floor(c/2),F=p-1,W=new R(+P,+T);W.z=+F;var V=this._tileCoordsToKey(W),X=this._tiles[V];return X&&X.active?(X.retain=!0,!0):(X&&X.loaded&&(X.retain=!0),F>y?this._retainParent(P,T,F,y):!1)},_retainChildren:function(o,c,p,y){for(var P=2*o;P<2*o+2;P++)for(var T=2*c;T<2*c+2;T++){var F=new R(P,T);F.z=p+1;var W=this._tileCoordsToKey(F),V=this._tiles[W];if(V&&V.active){V.retain=!0;continue}else V&&V.loaded&&(V.retain=!0);p+1<y&&this._retainChildren(P,T,p+1,y)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,p,y){var P=Math.round(c);this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom?P=void 0:P=this._clampZoom(P);var T=this.options.updateWhenZooming&&P!==this._tileZoom;(!y||T)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(o),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],o,c)},_setZoomTransform:function(o,c,p){var y=this._map.getZoomScale(p,o.zoom),P=o.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(c,p)).round();ce.any3d?Gi(o.el,P,y):et(o.el,P)},_resetGrid:function(){var o=this._map,c=o.options.crs,p=this._tileSize=this.getTileSize(),y=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],y).x/p.x),Math.ceil(o.project([0,c.wrapLng[1]],y).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],y).y/p.x),Math.ceil(o.project([c.wrapLat[1],0],y).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),y=c.getZoomScale(p,this._tileZoom),P=c.project(o,this._tileZoom).floor(),T=c.getSize().divideBy(y*2);return new re(P.subtract(T),P.add(T))},_update:function(o){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(o),P=this._pxBoundsToTileRange(y),T=P.getCenter(),F=[],W=this.options.keepBuffer,V=new re(P.getBottomLeft().subtract([W,-W]),P.getTopRight().add([W,-W]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var X in this._tiles){var ie=this._tiles[X].coords;(ie.z!==this._tileZoom||!V.contains(new R(ie.x,ie.y)))&&(this._tiles[X].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(o,p);return}for(var fe=P.min.y;fe<=P.max.y;fe++)for(var be=P.min.x;be<=P.max.x;be++){var Ut=new R(be,fe);if(Ut.z=this._tileZoom,!!this._isValidTile(Ut)){var ht=this._tiles[this._tileCoordsToKey(Ut)];ht?ht.current=!0:F.push(Ut)}}if(F.sort(function(Jt,Ka){return Jt.distanceTo(T)-Ka.distanceTo(T)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tn=document.createDocumentFragment();for(be=0;be<F.length;be++)this._addTile(F[be],Tn);this._level.el.appendChild(Tn)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(o.x<p.min.x||o.x>p.max.x)||!c.wrapLat&&(o.y<p.min.y||o.y>p.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(o);return ee(this.options.bounds).overlaps(y)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,p=this.getTileSize(),y=o.scaleBy(p),P=y.add(p),T=c.unproject(y,o.z),F=c.unproject(P,o.z);return[T,F]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),p=new H(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),p=new R(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(o){var c=this._tiles[o];c&&(We(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){ye(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=f,o.onmousemove=f,ce.ielt9&&this.options.opacity<1&&En(o,this.options.opacity)},_addTile:function(o,c){var p=this._getTilePos(o),y=this._tileCoordsToKey(o),P=this.createTile(this._wrapCoords(o),l(this._tileReady,this,o));this._initTile(P),this.createTile.length<2&&M(l(this._tileReady,this,o,null,P)),et(P,p),this._tiles[y]={el:P,coords:o,current:!0},c.appendChild(P),this.fire("tileloadstart",{tile:P,coords:o})},_tileReady:function(o,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:o});var y=this._tileCoordsToKey(o);p=this._tiles[y],p&&(p.loaded=+new Date,this._map._fadeAnimated?(En(p.el,0),z(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(ye(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new R(this._wrapX?h(o.x,this._wrapX):o.x,this._wrapY?h(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new re(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function sO(o){return new go(o)}var Va=go.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=w(this,c),c.detectRetina&&ce.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var p=document.createElement("img");return ve(p,"load",l(this._tileOnLoad,this,c,p)),ve(p,"error",l(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(o),p},getTileUrl:function(o){var c={r:ce.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=p),c["-y"]=p}return N(this._url,i(c,this.options))},_tileOnLoad:function(o,c){ce.ielt9?setTimeout(l(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,p){var y=this.options.errorTileUrl;y&&c.getAttribute("src")!==y&&(c.src=y),o(p,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,y=this.options.zoomOffset;return p&&(o=c-o),o+y},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=f,c.onerror=f,!c.complete)){c.src=O;var p=this._tiles[o].coords;We(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",O),go.prototype._removeTile.call(this,o)},_tileReady:function(o,c,p){if(!(!this._map||p&&p.getAttribute("src")===O))return go.prototype._tileReady.call(this,o,c,p)}});function ox(o,c){return new Va(o,c)}var lx=Va.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var p=i({},this.defaultWmsParams);for(var y in c)y in this.options||(p[y]=c[y]);c=w(this,c);var P=c.detectRetina&&ce.retina?2:1,T=this.getTileSize();p.width=T.x*P,p.height=T.y*P,this.wmsParams=p},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Va.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),p=this._crs,y=ne(p.project(c[0]),p.project(c[1])),P=y.min,T=y.max,F=(this._wmsVersion>=1.3&&this._crs===ex?[P.y,P.x,T.y,T.x]:[P.x,P.y,T.x,T.y]).join(","),W=Va.prototype.getTileUrl.call(this,o);return W+S(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(o,c){return i(this.wmsParams,o),c||this.redraw(),this}});function oO(o,c){return new lx(o,c)}Va.WMS=lx,ox.wms=oO;var Dr=rr.extend({options:{padding:.1},initialize:function(o){w(this,o),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ye(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var p=this._map.getZoomScale(c,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,c),T=y.multiplyBy(-p).add(P).subtract(this._map._getNewPixelOrigin(o,c));ce.any3d?Gi(this._container,T,p):et(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new re(p,p.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cx=Dr.extend({options:{tolerance:0},getEvents:function(){var o=Dr.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Dr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ve(o,"mousemove",this._onMouseMove,this),ve(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ve(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,We(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Dr.prototype._update.call(this);var o=this._bounds,c=this._container,p=o.getSize(),y=ce.retina?2:1;et(c,o.min),c.width=y*p.x,c.height=y*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Dr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[d(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,p=c.next,y=c.prev;p?p.prev=y:this._drawLast=y,y?y.next=p:this._drawFirst=p,delete o._order,delete this._layers[d(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),p=[],y,P;for(P=0;P<c.length;P++){if(y=Number(c[P]),isNaN(y))return;p.push(y)}o.options._dashArray=p}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new re,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)o=y.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var p,y,P,T,F=o._parts,W=F.length,V=this._ctx;if(W){for(V.beginPath(),p=0;p<W;p++){for(y=0,P=F[p].length;y<P;y++)T=F[p][y],V[y?"lineTo":"moveTo"](T.x,T.y);c&&V.closePath()}this._fillStroke(V,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,p=this._ctx,y=Math.max(Math.round(o._radius),1),P=(Math.max(Math.round(o._radiusY),1)||y)/y;P!==1&&(p.save(),p.scale(1,P)),p.beginPath(),p.arc(c.x,c.y/P,y,0,Math.PI*2,!1),P!==1&&p.restore(),this._fillStroke(p,o)}},_fillStroke:function(o,c){var p=c.options;p.fill&&(o.globalAlpha=p.fillOpacity,o.fillStyle=p.fillColor||p.color,o.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=p.opacity,o.lineWidth=p.weight,o.strokeStyle=p.color,o.lineCap=p.lineCap,o.lineJoin=p.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),p,y,P=this._drawFirst;P;P=P.next)p=P.layer,p.options.interactive&&p._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(p))&&(y=p);this._fireEvent(y?[y]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(Xe(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var p,y,P=this._drawFirst;P;P=P.next)p=P.layer,p.options.interactive&&p._containsPoint(c)&&(y=p);y!==this._hoveredLayer&&(this._handleMouseOut(o),y&&(ye(this._container,"leaflet-interactive"),this._fireEvent([y],o,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,p){this._map._fireDOMEvent(c,p||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var p=c.next,y=c.prev;if(p)p.prev=y;else return;y?y.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var p=c.next,y=c.prev;if(y)y.next=p;else return;p?p.prev=y:y&&(this._drawLast=y),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function ux(o){return ce.canvas?new cx(o):null}var vo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),lO={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Dr.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=vo("shape");ye(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=vo("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;We(c),o.removeInteractiveTarget(c),delete this._layers[d(o)]},_updateStyle:function(o){var c=o._stroke,p=o._fill,y=o.options,P=o._container;P.stroked=!!y.stroke,P.filled=!!y.fill,y.stroke?(c||(c=o._stroke=vo("stroke")),P.appendChild(c),c.weight=y.weight+"px",c.color=y.color,c.opacity=y.opacity,y.dashArray?c.dashStyle=v(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=y.lineCap.replace("butt","flat"),c.joinstyle=y.lineJoin):c&&(P.removeChild(c),o._stroke=null),y.fill?(p||(p=o._fill=vo("fill")),P.appendChild(p),p.color=y.fillColor||y.color,p.opacity=y.fillOpacity):p&&(P.removeChild(p),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),p=Math.round(o._radius),y=Math.round(o._radiusY||p);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+y+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){Ba(o._container)},_bringToBack:function(o){Fa(o._container)}},yc=ce.vml?vo:Tt,yo=Dr.extend({_initContainer:function(){this._container=yc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){We(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Dr.prototype._update.call(this);var o=this._bounds,c=o.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),et(p,o.min),p.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=yc("path");o.options.className&&ye(c,o.options.className),o.options.interactive&&ye(c,"leaflet-interactive"),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){We(o._path),o.removeInteractiveTarget(o._path),delete this._layers[d(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,p=o.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,At(o._parts,c))},_updateCircle:function(o){var c=o._point,p=Math.max(Math.round(o._radius),1),y=Math.max(Math.round(o._radiusY),1)||p,P="a"+p+","+y+" 0 1,0 ",T=o._empty()?"M0 0":"M"+(c.x-p)+","+c.y+P+p*2+",0 "+P+-p*2+",0 ";this._setPath(o,T)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){Ba(o._path)},_bringToBack:function(o){Fa(o._path)}});ce.vml&&yo.include(lO);function dx(o){return ce.svg||ce.vml?new yo(o):null}je.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&ux(o)||dx(o)}});var fx=Za.extend({initialize:function(o,c){Za.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=ee(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function cO(o,c){return new fx(o,c)}yo.create=yc,yo.pointsToPath=At,Lr.geometryToLayer=dc,Lr.coordsToLatLng=Sh,Lr.coordsToLatLngs=fc,Lr.latLngToCoords=Ph,Lr.latLngsToCoords=hc,Lr.getFeature=Wa,Lr.asFeature=mc,je.mergeOptions({boxZoom:!0});var hx=xr.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ve(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){We(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),lo(),lh(),this._startPoint=this._map.mouseEventToContainerPoint(o),ve(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),ye(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new re(this._point,this._startPoint),p=c.getSize();et(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(We(this._box),Xe(this._container,"leaflet-crosshair")),co(),ch(),De(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var c=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});je.addInitHook("addHandler","boxZoom",hx),je.mergeOptions({doubleClickZoom:!0});var mx=xr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,p=c.getZoom(),y=c.options.zoomDelta,P=o.originalEvent.shiftKey?p-y:p+y;c.options.doubleClickZoom==="center"?c.setZoom(P):c.setZoomAround(o.containerPoint,P)}});je.addInitHook("addHandler","doubleClickZoom",mx),je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var px=xr.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new fi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}ye(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xe(this._map._container,"leaflet-grab"),Xe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=ee(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),p=this._initialWorldOffset,y=this._draggable._newPos.x,P=(y-c+p)%o+c-p,T=(y+c+p)%o-c-p,F=Math.abs(P+p)<Math.abs(T+p)?P:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(o){var c=this._map,p=c.options,y=!p.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),y)c.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,F=p.easeLinearity,W=P.multiplyBy(F/T),V=W.distanceTo([0,0]),X=Math.min(p.inertiaMaxSpeed,V),ie=W.multiplyBy(X/V),fe=X/(p.inertiaDeceleration*F),be=ie.multiplyBy(-fe/2).round();!be.x&&!be.y?c.fire("moveend"):(be=c._limitOffset(be,c.options.maxBounds),M(function(){c.panBy(be,{duration:fe,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});je.addInitHook("addHandler","dragging",px),je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gx=xr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ve(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,p=o.scrollTop||c.scrollTop,y=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(y,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},p=this.keyCodes,y,P;for(y=0,P=p.left.length;y<P;y++)c[p.left[y]]=[-1*o,0];for(y=0,P=p.right.length;y<P;y++)c[p.right[y]]=[o,0];for(y=0,P=p.down.length;y<P;y++)c[p.down[y]]=[0,o];for(y=0,P=p.up.length;y<P;y++)c[p.up[y]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},p=this.keyCodes,y,P;for(y=0,P=p.zoomIn.length;y<P;y++)c[p.zoomIn[y]]=o;for(y=0,P=p.zoomOut.length;y<P;y++)c[p.zoomOut[y]]=-o},_addHooks:function(){ve(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,p=this._map,y;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(y=this._panKeys[c],o.shiftKey&&(y=G(y).multiplyBy(3)),p.options.maxBounds&&(y=p._limitOffset(G(y),p.options.maxBounds)),p.options.worldCopyJump){var P=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(y)));p.panTo(P)}else p.panBy(y)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Qi(o)}}});je.addInitHook("addHandler","keyboard",gx),je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vx=xr.extend({addHooks:function(){ve(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=Fy(o),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var y=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),y),Qi(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),p=this._map.options.zoomSnap||0;o._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),P=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,T=p?Math.ceil(P/p)*p:P,F=o._limitZoom(c+(this._delta>0?T:-T))-c;this._delta=0,this._startTime=null,F&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+F):o.setZoomAround(this._lastMousePos,c+F))}});je.addInitHook("addHandler","scrollWheelZoom",vx);var uO=600;je.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var yx=xr.extend({addHooks:function(){ve(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new R(c.clientX,c.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ve(document,"touchend",_t),ve(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),uO),ve(document,"touchend touchcancel contextmenu",this._cancel,this),ve(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){De(document,"touchend",_t),De(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new R(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var p=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});je.addInitHook("addHandler","tapHold",yx),je.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var xx=xr.extend({addHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),ve(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xe(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(o.touches[0]),y=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(y)._divideBy(2))),this._startDist=p.distanceTo(y),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ve(document,"touchmove",this._onTouchMove,this),ve(document,"touchend touchcancel",this._onTouchEnd,this),_t(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(o.touches[0]),y=c.mouseEventToContainerPoint(o.touches[1]),P=p.distanceTo(y)/this._startDist;if(this._zoom=c.getScaleZoom(P,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&P<1||this._zoom>c.getMaxZoom()&&P>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,P===1)return}else{var T=p._add(y)._divideBy(2)._subtract(this._centerPoint);if(P===1&&T.x===0&&T.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var F=l(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(F,this,!0),_t(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});je.addInitHook("addHandler","touchZoom",xx),je.BoxZoom=hx,je.DoubleClickZoom=mx,je.Drag=px,je.Keyboard=gx,je.ScrollWheelZoom=vx,je.TapHold=yx,je.TouchZoom=xx,n.Bounds=re,n.Browser=ce,n.CRS=Te,n.Canvas=cx,n.Circle=Nh,n.CircleMarker=uc,n.Class=C,n.Control=nr,n.DivIcon=sx,n.DivOverlay=br,n.DomEvent=CE,n.DomUtil=PE,n.Draggable=fi,n.Evented=q,n.FeatureGroup=Ar,n.GeoJSON=Lr,n.GridLayer=go,n.Handler=xr,n.Icon=Ha,n.ImageOverlay=pc,n.LatLng=Q,n.LatLngBounds=H,n.Layer=rr,n.LayerGroup=Ua,n.LineUtil=FE,n.Map=je,n.Marker=cc,n.Mixin=DE,n.Path=hi,n.Point=R,n.PolyUtil=IE,n.Polygon=Za,n.Polyline=Mr,n.Popup=gc,n.PosAnimation=Uy,n.Projection=UE,n.Rectangle=fx,n.Renderer=Dr,n.SVG=yo,n.SVGOverlay=ax,n.TileLayer=Va,n.Tooltip=vc,n.Transformation=me,n.Util=B,n.VideoOverlay=ix,n.bind=l,n.bounds=ne,n.canvas=ux,n.circle=YE,n.circleMarker=GE,n.control=ho,n.divIcon=aO,n.extend=i,n.featureGroup=VE,n.geoJSON=rx,n.geoJson=JE,n.gridLayer=sO,n.icon=KE,n.imageOverlay=eO,n.latLng=ae,n.latLngBounds=ee,n.layerGroup=WE,n.map=EE,n.marker=qE,n.point=G,n.polygon=QE,n.polyline=XE,n.popup=rO,n.rectangle=cO,n.setOptions=w,n.stamp=d,n.svg=dx,n.svgOverlay=nO,n.tileLayer=ox,n.tooltip=iO,n.transformation=J,n.version=r,n.videoOverlay=tO;var dO=window.L;n.noConflict=function(){return window.L=dO,this},window.L=n})})(jg,jg.exports);var Ki=jg.exports;const tl=Tr(Ki);function io(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Gf(e,t){return t==null?function(r,i){const a=b.useRef();return a.current||(a.current=e(r,i)),a}:function(r,i){const a=b.useRef();a.current||(a.current=e(r,i));const l=b.useRef(r),{instance:u}=a.current;return b.useEffect(function(){l.current!==r&&(t(u,r,l.current),l.current=r)},[u,r,i]),a}}function HC(e,t){b.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function ZC(e){return function(n){const r=Kf(),i=e(qf(n,r),r);return zC(r.map,n.attribution),dy(i.current,n.eventHandlers),HC(i.current,r),i}}function MH(e,t){const n=b.useRef();b.useEffect(function(){if(t.pathOptions!==n.current){const i=t.pathOptions??{};e.instance.setStyle(i),n.current=i}},[e,t])}function LH(e){return function(n){const r=Kf(),i=e(qf(n,r),r);return dy(i.current,n.eventHandlers),HC(i.current,r),MH(i.current,n),i}}function DH(e,t){const n=Gf(e,t),r=ZC(n);return UC(r)}function IH(e,t){const n=Gf(e),r=AH(n,t);return OH(r)}function fy(e,t){const n=Gf(e,t),r=LH(n);return UC(r)}function RH(e,t){const n=Gf(e,t),r=ZC(n);return TH(r)}function zH(e,t,n){const{opacity:r,zIndex:i}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function hy(){return Kf().map}function my(e){const t=hy();return b.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const $H=fy(function({center:t,children:n,...r},i){const a=new Ki.Circle(t,r);return io(a,Vf(i,{overlayContainer:a}))},$C),WC=fy(function({center:t,children:n,...r},i){const a=new Ki.CircleMarker(t,r);return io(a,Vf(i,{overlayContainer:a}))},$C);function Ng(){return Ng=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ng.apply(this,arguments)}function BH({bounds:e,boundsOptions:t,center:n,children:r,className:i,id:a,placeholder:l,style:u,whenReady:d,zoom:m,...h},f){const[g]=b.useState({className:i,id:a,style:u}),[x,j]=b.useState(null);b.useImperativeHandle(f,()=>(x==null?void 0:x.map)??null,[x]);const w=b.useCallback(_=>{if(_!==null&&x===null){const N=new Ki.Map(_,h);n!=null&&m!=null?N.setView(n,m):e!=null&&N.fitBounds(e,t),d!=null&&N.whenReady(d),j(EH(N))}},[]);b.useEffect(()=>()=>{x==null||x.map.remove()},[x]);const S=x?pu.createElement(FC,{value:x},r):l??null;return pu.createElement("div",Ng({},g,{ref:w}),S)}const Yf=b.forwardRef(BH),us=DH(function({position:t,...n},r){const i=new Ki.Marker(t,n);return io(i,Vf(r,{overlayContainer:i}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),Ol=fy(function({positions:t,...n},r){const i=new Ki.Polygon(t,n);return io(i,Vf(r,{overlayContainer:i}))},function(t,n,r){n.positions!==r.positions&&t.setLatLngs(n.positions)}),sa=IH(function(t,n){const r=new Ki.Popup(t,n.overlayContainer);return io(r,n)},function(t,n,{position:r},i){b.useEffect(function(){const{instance:l}=t;function u(m){m.popup===l&&(l.update(),i(!0))}function d(m){m.popup===l&&i(!1)}return n.map.on({popupopen:u,popupclose:d}),n.overlayContainer==null?(r!=null&&l.setLatLng(r),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var h;n.map.off({popupopen:u,popupclose:d}),(h=n.overlayContainer)==null||h.unbindPopup(),n.map.removeLayer(l)}},[t,n,i,r])}),Xf=RH(function({url:t,...n},r){const i=new Ki.TileLayer(t,qf(n,r));return io(i,r)},function(t,n,r){zH(t,n,r);const{url:i}=n;i!=null&&i!==r.url&&t.setUrl(i)}),VC="dummyMapAreas",py=e=>{try{localStorage.setItem(VC,JSON.stringify(e))}catch(t){console.error("Failed saving areas to localStorage",t)}},Qf=()=>{try{const e=localStorage.getItem(VC);return e?JSON.parse(e):[...Bu]}catch(e){return console.error("Failed loading areas from localStorage",e),[...Bu]}},tc=async()=>({data:Qf().sort((t,n)=>t.name.localeCompare(n.name)),error:null}),FH=async e=>{const t=Qf(),n={...e,id:it(),created_at:he(),updated_at:he()};return t.push(n),py(t),{data:n,error:null}},UH=async(e,t)=>{const n=Qf(),r=n.findIndex(i=>i.id===e);return r===-1?{data:null,error:{message:"Area not found"}}:(n[r]={...n[r],...t,updated_at:he()},py(n),{data:n[r],error:null})},HH=async e=>{const t=Qf(),n=t.findIndex(i=>i.id===e);if(n===-1)return{error:{message:"Area not found"}};const[r]=t.splice(n,1);py(t);try{const i=await un();await Promise.all((i.data||[]).filter(a=>a.area_id===e||a.area_name===(r==null?void 0:r.name)).map(a=>Z2(a.id,{area_id:void 0,area_name:void 0})))}catch{}try{const i=await Bt();await Promise.all((i.data||[]).filter(a=>a.area_id===e||a.area_name===(r==null?void 0:r.name)).map(a=>Wu(a.id,{area_id:void 0,area_name:void 0})))}catch{}return{error:null}},ZH=async e=>{const[t,n]=await Promise.all([un(),Bt()]);return{volunteerCount:(t.data||[]).filter(r=>r.area_id===e).length,patientCount:(n.data||[]).filter(r=>r.area_id===e).length,error:null}},Em=new Map,WH=async e=>{if(!e||e.trim().length===0)return null;const t=e.toLowerCase().trim();if(Em.has(t))return Em.get(t);try{const n=encodeURIComponent(e),r=await fetch(`https://nominatim.openstreetmap.org/search?q=${n}&format=json&limit=1`,{headers:{"User-Agent":"HealthcareApp/1.0"}});if(!r.ok)return console.error("Geocoding API error:",r.statusText),null;const i=await r.json();if(!i||i.length===0)return console.warn("No geocoding results for address:",e),null;const a={lat:parseFloat(i[0].lat),lng:parseFloat(i[0].lon),display_name:i[0].display_name,confidence:parseFloat(i[0].importance||"0.5")};return Em.set(t,a),a}catch(n){return console.error("Error geocoding address:",n),null}},VH=(e,t)=>{const n=e[1],r=e[0];let i=!1;for(let a=0,l=t.length-1;a<t.length;l=a++){const u=t[a][1],d=t[a][0],m=t[l][1],h=t[l][0];d>r!=h>r&&n<(m-u)*(r-d)/(h-d)+u&&(i=!i)}return i},KC=(e,t,n)=>{const r=[e,t];for(const i of n)if(i.geometry&&i.geometry.coordinates&&i.geometry.coordinates.length>0){const a=i.geometry.coordinates[0];if(VH(r,a))return i}return null},KH=async(e,t,n)=>{if(typeof e!="number"||typeof t!="number")return{area:null,method:"none",confidence:"low"};const r=KC(e,t,n);return r?{area:r,method:"gps",confidence:"high"}:{area:null,method:"none",confidence:"low"}},qH=async(e,t)=>{const n=await WH(e);if(!n)return{area:null,method:"none",confidence:"low"};const r=KC(n.lat,n.lng,t);return r?{area:r,method:"address",confidence:n.confidence>.7?"high":n.confidence>.4?"medium":"low",geocodedLat:n.lat,geocodedLng:n.lng}:{area:null,method:"none",confidence:"low",geocodedLat:n.lat,geocodedLng:n.lng}},qC=async(e,t,n,r)=>{const i=await KH(e,t,r);if(i.area&&i.confidence==="high")return i;const a=await qH(n,r);return a.area?a:i.area?i:{area:null,method:"none",confidence:"low"}},GC=["Amnat Charoen","Ang Thong","Bangkok","Bueng Kan","Buri Ram","Chachoengsao","Chai Nat","Chaiyaphum","Chanthaburi","Chiang Mai","Chiang Rai","Chon Buri","Chumphon","Kalasin","Kamphaeng Phet","Kanchanaburi","Khon Kaen","Krabi","Lampang","Lamphun","Loei","Lop Buri","Mae Hong Son","Maha Sarakham","Mukdahan","Nakhon Nayok","Nakhon Pathom","Nakhon Phanom","Nakhon Ratchasima","Nakhon Sawan","Nakhon Si Thammarat","Nan","Narathiwat","Nong Bua Lam Phu","Nong Khai","Nonthaburi","Pathum Thani","Pattani","Phangnga","Phatthalung","Phayao","Phetchabun","Phetchaburi","Phichit","Phitsanulok","Phrae","Phuket","Prachin Buri","Prachuap Khiri Khan","Ranong","Ratchaburi","Rayong","Roi Et","Sa Kaeo","Sakon Nakhon","Samut Prakan","Samut Sakhon","Samut Songkhram","Saraburi","Satun","Sing Buri","Si Sa Ket","Songkhla","Sukhothai","Suphan Buri","Surat Thani","Surin","Tak","Trang","Trat","Ubon Ratchathani","Udon Thani","Uthai Thani","Uttaradit","Yala","Yasothon"],Ad={"Nakhon Pathom":{"Mueang Nakhon Pathom":["Phra Pathom Chedi","Tha Tamnak","Phra Prathon","Don Yai Hom"],"Kamphaeng Saen":["Suan Mon","Nong Krathum","Thung Kraphang Hom"],"Nakhon Chai Si":["Wat Samrong","Bang Kaeo Fa","Tha Na"],"Don Tum":["Don Tum","Lam Hoei","Bo Phlap"],"Bang Len":["Bang Len","Nang Buat","Rang Krathum"],Phutthamonthon:["Salaya","Bang Krathuek","Khun Kaeo"],"Sam Phran":["Krathum Lom","Tha Kham","Om Yai"]},Bangkok:{"Phasi Charoen":["Bang Wa","Khlong Khwang","Pak Khlong Phasi Charoen"],"Bang Kapi":["Hua Mak","Khlong Chan"],"Phra Nakhon":["Bowon Niwet","Talat Yot","Wat Sam Phraya"]},Nonthaburi:{"Mueang Nonthaburi":["Bang Kraso","Talat Khwan","Tha Sai"],"Bang Bua Thong":["Bang Phlap","Phimon Rat","Lahan"]},"Pathum Thani":{"Mueang Pathum Thani":["Bang Paruat","Bang Duea","Ban Klang"],Thanyaburi:["Rangsit","Bueng Yitho","Pracha Thipat"],"Lam Luk Ka":["Khu Khot","Lam Luk Ka","Bueng Kham Phroi"]}},GH=({patient:e,onClose:t})=>{var $;const{user:n}=Se(),[r,i]=b.useState(!1),[a,l]=b.useState({name:"",doe:"",gender:"male",address:"",province:"",district:"",subdistrict:"",addressLine:"",phone_number:"",caregivers_contact:"",caregiver_name:"",caregiver_phone:"",assigned_doctor:"",last_record_date:"",today_date:new Date().toISOString().split("T")[0],assigned_vhv_name:"",medical_record_number:"",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"",doctor_diagnosed:"",medications_history:"",food_allergies:"",medication_allergies:"",height:"",weight:"",bmi:"",temperature:"",pulse:"",blood_pressure:"",diabetes:"",mental_health_status:"",other_symptoms:"",pregnancy_details:"",smoker:!1,doctors_note:"",photo_url:"",lat:void 0,lng:void 0,patient_email:""}),[u,d]=b.useState([]),[m,h]=b.useState([]),[f,g]=b.useState({}),[x,j]=b.useState([]),[w,S]=b.useState(null),[_,N]=b.useState(!1);b.useEffect(()=>{var D,M,z;(async()=>{const{data:B}=await Ct(),C=(B||[]).filter(q=>q.role==="doctor").map(q=>({id:q.id,full_name:q.full_name}));d(C);const U=await un();h(U.data||[]);try{const q=await Bt(),R={};for(const Y of q.data||[]){const G=(Y.assigned_vhv_name||"").toLowerCase().trim();G&&(R[G]=(R[G]||0)+1)}g(R)}catch{}const Z=await tc();j(Z.data||[])})(),e&&l({name:e.name,doe:e.doe,gender:e.gender,address:e.address,province:e.address.split(",").map(B=>B.trim()).slice(-1)[0]||"",district:e.address.split(",").map(B=>B.trim()).slice(-2,-1)[0]||"",subdistrict:e.address.split(",").map(B=>B.trim()).slice(-3,-2)[0]||"",addressLine:e.address.split(",").slice(0,-3).join(", ").trim(),phone_number:e.phone_number||"",caregivers_contact:e.caregivers_contact,caregiver_name:((D=e.caregivers_contact.split("-")[0])==null?void 0:D.trim())||"",caregiver_phone:((M=e.caregivers_contact.split("-")[1])==null?void 0:M.trim())||"",assigned_doctor:e.assigned_doctor,last_record_date:e.last_record_date,today_date:e.today_date,assigned_vhv_name:e.assigned_vhv_name,medical_record_number:e.medical_record_number,patient_categories:e.patient_categories,personal_health_history:e.personal_health_history,doctor_diagnosed:e.doctor_diagnosed,medications_history:e.medications_history,food_allergies:e.food_allergies,medication_allergies:e.medication_allergies,height:e.height,weight:e.weight,bmi:e.bmi,temperature:e.temperature,pulse:e.pulse,blood_pressure:e.blood_pressure,diabetes:e.diabetes,mental_health_status:e.mental_health_status,other_symptoms:e.other_symptoms,pregnancy_details:e.pregnancy_details,smoker:e.smoker,doctors_note:e.doctors_note,lat:e.lat,lng:e.lng,patient_email:e.user_id&&((z=Li(e.user_id))==null?void 0:z.email)||""})},[e]),b.useEffect(()=>{const D=[a.addressLine,a.subdistrict,a.district,a.province].filter(Boolean).join(", ");if(a.lat&&a.lng||D.length>5){const M=setTimeout(async()=>{N(!0);const z=await qC(a.lat,a.lng,D,x);S(z),z.geocodedLat&&z.geocodedLng&&!a.lat&&!a.lng&&l(B=>({...B,lat:z.geocodedLat,lng:z.geocodedLng})),N(!1)},600);return()=>clearTimeout(M)}else S(null)},[a.lat,a.lng,a.addressLine,a.subdistrict,a.district,a.province,x]),b.useEffect(()=>{e||(async()=>{const D=await F2();l(M=>({...M,medical_record_number:D}))})()},[e]),b.useEffect(()=>{const D=parseFloat(a.height),M=parseFloat(a.weight);if(D>0&&M>0&&!Number.isNaN(D)&&!Number.isNaN(M)){const z=M/Math.pow(D/100,2);l(B=>({...B,bmi:z.toFixed(1)}))}},[a.height,a.weight]);const v=async D=>{var M,z;D.preventDefault(),i(!0);try{const B=[a.addressLine,a.subdistrict,a.district,a.province].filter(Boolean).join(", "),C=[a.caregiver_name,a.caregiver_phone].filter(Boolean).join(" - "),U={name:a.name,doe:a.doe,gender:a.gender,address:B||a.address,phone_number:a.phone_number,caregivers_contact:C||a.caregivers_contact,assigned_doctor:a.assigned_doctor,last_record_date:a.last_record_date,today_date:a.today_date,assigned_vhv_name:a.assigned_vhv_name,medical_record_number:a.medical_record_number,patient_categories:a.patient_categories,personal_health_history:a.personal_health_history,doctor_diagnosed:a.doctor_diagnosed,medications_history:a.medications_history,food_allergies:a.food_allergies,medication_allergies:a.medication_allergies,height:a.height,weight:a.weight,bmi:a.bmi,temperature:a.temperature,pulse:a.pulse,blood_pressure:a.blood_pressure,diabetes:a.diabetes,mental_health_status:a.mental_health_status,other_symptoms:a.other_symptoms,pregnancy_details:a.pregnancy_details,smoker:a.smoker,doctors_note:a.doctors_note,lat:a.lat,lng:a.lng,photo_url:a.photo_url,area_id:(M=w==null?void 0:w.area)==null?void 0:M.id,area_name:(z=w==null?void 0:w.area)==null?void 0:z.name};if(e){let Z={...U};if((!e.user_id||!Li(e.user_id))&&a.patient_email){const{data:R}=await Ab(a.patient_email,a.name);R!=null&&R.id&&(Z.user_id=R.id)}else if(e.user_id&&a.patient_email){const R=e.user_id?Li(e.user_id):void 0;if(R&&R.email.toLowerCase()!==a.patient_email.toLowerCase()){const{error:Y}=await fM(e.user_id,a.patient_email);Y&&console.error("Error updating user email:",Y)}}const{error:q}=await Wu(e.id,Z);if(q){console.error("Error updating patient:",q);return}}else{const{data:Z}=await Ab(a.patient_email,a.name),{error:q}=await DM({...U,created_by:(n==null?void 0:n.id)||"",user_id:(Z==null?void 0:Z.id)||""});if(q){console.error("Error creating patient:",q);return}}t()}catch(B){console.error("Error saving patient:",B)}finally{i(!1)}},k=D=>{const{name:M,value:z,type:B}=D.target;if(B==="checkbox"){const C=D.target;if(M.startsWith("patient_categories.")){const U=M.split(".")[1];l({...a,patient_categories:{...a.patient_categories,[U]:C.checked}})}else l({...a,[M]:C.checked})}else l(M==="province"?{...a,province:z,district:"",subdistrict:""}:M==="district"?{...a,district:z,subdistrict:""}:{...a,[M]:z})},O=!1,A=b.useMemo(()=>a.lat&&a.lng?[a.lat,a.lng]:[13.793,100.321],[a.lat,a.lng]),E=b.useMemo(()=>tl.divIcon({className:"patient-pin",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#a21caf;border:2px solid #fff;box-shadow:0 0 0 3px rgba(162,28,175,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),[]),I=()=>(my({click(D){l(M=>({...M,lat:D.latlng.lat,lng:D.latlng.lng}))}}),null);return s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(Xd,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Re,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Patient":"New Patient"})]})]})}),s.jsxs("form",{onSubmit:v,className:"p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),s.jsx("input",{type:"text",name:"name",required:!0,value:a.name,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Entry (DOE) *"}),s.jsx("input",{type:"date",name:"doe",required:!0,value:a.doe,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),s.jsxs("select",{name:"gender",required:!0,value:a.gender,onChange:k,disabled:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",children:[s.jsx("option",{value:"male",children:"Male"}),s.jsx("option",{value:"female",children:"Female"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Record Number (auto)"}),s.jsx("input",{type:"text",name:"medical_record_number",required:!0,value:a.medical_record_number,onChange:k,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province"}),s.jsxs("select",{name:"province",value:a.province,onChange:k,disabled:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[s.jsx("option",{value:"",children:"Select Province"}),GC.map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District / Amphoe"}),s.jsxs("select",{name:"district",value:a.district,onChange:k,disabled:!a.province,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[s.jsx("option",{value:"",children:"Select District"}),Object.keys(Ad[a.province]||{}).map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-District / Tambon"}),s.jsxs("select",{name:"subdistrict",value:a.subdistrict,onChange:k,disabled:!a.district,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[s.jsx("option",{value:"",children:"Select Sub-District"}),((($=Ad[a.province])==null?void 0:$[a.district])||[]).map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("input",{type:"text",name:"addressLine",placeholder:"House number, street, village",value:a.addressLine,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:D=>{var B;const M=(B=D.target.files)==null?void 0:B[0];if(!M)return;const z=new FileReader;z.onload=()=>l(C=>({...C,photo_url:String(z.result)})),z.readAsDataURL(M)},disabled:O}),s.jsx("span",{className:"text-sm text-gray-500",children:"or"}),s.jsx("input",{type:"text",name:"photo_url",placeholder:"Image URL",value:a.photo_url||"",onChange:k,readOnly:O,className:"flex-1 px-3 py-2 border rounded"})]}),a.photo_url&&s.jsx("img",{src:a.photo_url,alt:"preview",className:"mt-2 w-20 h-20 rounded-full object-cover"})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Email (for login)"}),s.jsx("input",{type:"email",name:"patient_email",value:a.patient_email,onChange:k,readOnly:O,required:!e,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caregiver's Name"}),s.jsx("input",{type:"text",name:"caregiver_name",value:a.caregiver_name,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caregiver's Contact Number"}),s.jsx("input",{type:"text",name:"caregiver_phone",value:a.caregiver_phone,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),s.jsx("input",{type:"text",name:"phone_number",value:a.phone_number,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Doctor *"}),s.jsxs("select",{name:"assigned_doctor",required:!0,value:a.assigned_doctor,onChange:k,disabled:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[s.jsx("option",{value:"",children:"Select"}),u.map(D=>s.jsx("option",{value:D.full_name,children:D.full_name},D.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned VHV"}),s.jsxs("select",{name:"assigned_vhv_name",value:a.assigned_vhv_name,onChange:k,disabled:!a.lat||!a.lng||!(w!=null&&w.area),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[s.jsx("option",{value:"",children:a.lat&&a.lng&&(w!=null&&w.area)?"Select":"Pin location on map first"}),(()=>{var C;const D=(C=w==null?void 0:w.area)==null?void 0:C.name,z=(m||[]).filter(U=>(U.area_name||"").toLowerCase()===(D||"").toLowerCase()).map(U=>{var Z;return{id:U.user_id||U.id,name:((Z=U.user)==null?void 0:Z.full_name)||U.name}}),B=new Set(z.map(U=>U.name));return a.assigned_vhv_name&&!B.has(a.assigned_vhv_name)&&z.unshift({id:"current",name:a.assigned_vhv_name}),z.map(U=>{const Z=U.name.toLowerCase(),q=f[Z]||0;return s.jsxs("option",{value:U.name,children:[U.name," (",q,")"]},U.id+U.name)})})()]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Today's Date"}),s.jsx("input",{type:"date",name:"today_date",value:a.today_date,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Record Date"}),s.jsx("input",{type:"date",name:"last_record_date",value:a.last_record_date,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Location"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Click on the map to set the patient's exact location."}),s.jsx("div",{className:"h-72 w-full border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs(Yf,{center:A,zoom:14,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(Xf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),s.jsx(I,{}),x.map(D=>{var B,C,U;if(!((C=(B=D.geometry)==null?void 0:B.coordinates)!=null&&C[0]))return null;const M=D.geometry.coordinates[0].map(Z=>[Z[0],Z[1]]),z=((U=w==null?void 0:w.area)==null?void 0:U.id)===D.id;return s.jsx(Ol,{positions:M,pathOptions:{color:D.color,fillColor:D.color,fillOpacity:z?.3:.1,weight:z?3:2}},D.id)}),typeof a.lat=="number"&&typeof a.lng=="number"&&s.jsx(us,{position:[a.lat,a.lng],icon:E})]})}),w&&s.jsx("div",{className:`mt-3 p-3 rounded border ${w.area?"bg-green-50 border-green-200 text-green-800":"bg-yellow-50 border-yellow-200 text-yellow-800"}`,children:w.area?s.jsxs(s.Fragment,{children:["Assigned Area: ",s.jsx("strong",{children:w.area.name}),s.jsxs("span",{className:"ml-2 text-xs opacity-70",children:[w.confidence," (",w.method,")"]})]}):s.jsx(s.Fragment,{children:"No matching area for this location"})}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700",children:"Latitude"}),s.jsx("input",{type:"number",step:"any",name:"lat",value:a.lat??"",onChange:k,className:"w-full px-3 py-2 border rounded"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700",children:"Longitude"}),s.jsx("input",{type:"number",step:"any",name:"lng",value:a.lng??"",onChange:k,className:"w-full px-3 py-2 border rounded"})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Medical Information"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Categories"}),s.jsxs("div",{className:"flex space-x-6",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"patient_categories.critical",checked:a.patient_categories.critical,onChange:k,disabled:O,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Critical"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"patient_categories.elderly",checked:a.patient_categories.elderly,onChange:k,disabled:O,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Elderly"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"patient_categories.pregnant",checked:a.patient_categories.pregnant,onChange:k,disabled:O,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Pregnant"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personal Health History"}),s.jsx("textarea",{name:"personal_health_history",rows:3,value:a.personal_health_history,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor Diagnosed"}),s.jsx("textarea",{name:"doctor_diagnosed",rows:3,value:a.doctor_diagnosed,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medications History"}),s.jsx("textarea",{name:"medications_history",rows:3,value:a.medications_history,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Food Allergies"}),s.jsx("input",{type:"text",name:"food_allergies",value:a.food_allergies,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medication Allergies"}),s.jsx("input",{type:"text",name:"medication_allergies",value:a.medication_allergies,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Height"}),s.jsx("input",{type:"text",name:"height",value:a.height,onChange:k,readOnly:O,placeholder:"e.g., 175 cm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight"}),s.jsx("input",{type:"text",name:"weight",value:a.weight,onChange:k,readOnly:O,placeholder:"e.g., 70 kg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BMI"}),s.jsx("input",{type:"text",name:"bmi",value:a.bmi,onChange:k,readOnly:!0,placeholder:"Auto-calculated",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),s.jsx("input",{type:"text",name:"temperature",value:a.temperature,onChange:k,readOnly:O,placeholder:"e.g., 98.6F",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pulse"}),s.jsx("input",{type:"text",name:"pulse",value:a.pulse,onChange:k,readOnly:O,placeholder:"e.g., 72 bpm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Pressure"}),s.jsx("input",{type:"text",name:"blood_pressure",value:a.blood_pressure,onChange:k,readOnly:O,placeholder:"e.g., 120/80 mmHg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diabetes"}),s.jsx("input",{type:"text",name:"diabetes",value:a.diabetes,onChange:k,readOnly:O,placeholder:"e.g., Type 2, HbA1c: 7.2%",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mental Health Status"}),s.jsx("div",{className:"flex flex-wrap gap-4",children:["Normal","Anxiety","Depression","Stress","Other"].map(D=>{const M=(a.mental_health_status||"").split(",").map(z=>z.trim()).includes(D);return s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:M,onChange:z=>{const B=new Set((a.mental_health_status||"").split(",").map(C=>C.trim()).filter(Boolean));z.target.checked?B.add(D):B.delete(D),l(C=>({...C,mental_health_status:Array.from(B).join(", ")}))},disabled:O,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),D]},D)})})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Any Other Symptoms"}),s.jsx("textarea",{name:"other_symptoms",rows:2,value:a.other_symptoms,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pregnancy Details"}),s.jsx("textarea",{name:"pregnancy_details",rows:3,value:a.pregnancy_details,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",placeholder:"Include gestational age, due date, complications, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Smoker"}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"smoker",checked:a.smoker===!0,onChange:()=>l(D=>({...D,smoker:!0})),disabled:O}),"Yes"]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"smoker",checked:a.smoker===!1,onChange:()=>l(D=>({...D,smoker:!1})),disabled:O}),"No"]})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor's Notes"}),s.jsx("textarea",{name:"doctors_note",rows:4,value:a.doctors_note,onChange:k,readOnly:O,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",placeholder:"Doctor's observations, recommendations, and notes..."})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(La,{className:"w-5 h-5"}),s.jsx("span",{children:e?"Update Patient":"Create Patient"})]})})]})]})]})})},YH=()=>{const{user:e}=Se(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[a,l]=b.useState(""),[u,d]=b.useState(!1),[m,h]=b.useState(null),[f,g]=b.useState(!1),[x,j]=b.useState(""),[w,S]=b.useState("");b.useEffect(()=>{_(),(async()=>{var U;if((e==null?void 0:e.role)!=="volunteer")return;const{data:B}=await un(),C=(B||[]).find(Z=>Z.user_id===e.id);C&&(j(((U=C.user)==null?void 0:U.full_name)||C.name),S(C.area_name||""))})()},[]);const _=async()=>{try{const{data:B,error:C}=await Bt();C?console.error("Error fetching patients:",C):n((B||[]).map(U=>({...U,created_by_user:U.created_by_user})))}catch(B){console.error("Error fetching patients:",B)}finally{i(!1)}},N=b.useMemo(()=>{const B=a.toLowerCase();let C=t;if((e==null?void 0:e.role)==="volunteer"&&w){const U=w.toLowerCase();C=C.filter(Z=>(Z.area_name||"").toLowerCase()===U)}return(e==null?void 0:e.role)==="volunteer"&&f&&x&&(C=C.filter(U=>(U.assigned_vhv_name||"").toLowerCase().includes(x.toLowerCase()))),C.filter(U=>{var Z,q;return U.name.toLowerCase().includes(B)||U.medical_record_number.toLowerCase().includes(B)||((Z=U.assigned_vhv_name)==null?void 0:Z.toLowerCase().includes(B))||((q=U.assigned_doctor)==null?void 0:q.toLowerCase().includes(B))||U.doctor_diagnosed.toLowerCase().includes(B)})},[t,a,e==null?void 0:e.role,f,x,w]),[v,k]=b.useState(1),O=10,A=Math.max(1,Math.ceil(N.length/O)),E=b.useMemo(()=>{const B=(v-1)*O;return N.slice(B,B+O)},[N,v]);b.useEffect(()=>{k(1)},[a]);const I=B=>{const C=[];return B.patient_categories.critical&&C.push("Critical"),B.patient_categories.elderly&&C.push("Elderly"),B.patient_categories.pregnant&&C.push("Pregnant"),C.length?C.join(", "):"Normal"},$=B=>{h(B),d(!0)},D=()=>{d(!1),h(null),_()};if(r)return s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})});if(u)return s.jsx(GH,{patient:m,onClose:D});const M=(e==null?void 0:e.role)==="doctor",z=(e==null?void 0:e.role)==="volunteer";return M||z?s.jsxs("div",{className:"py-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"relative w-full max-w-xl",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search",value:a,onChange:B=>l(B.target.value),className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"ml-3 flex items-center gap-3",children:[z&&s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:B=>g(B.target.checked)}),"Assigned to me"]}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer")&&s.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[s.jsx(Yt,{className:"w-4 h-4"}),s.jsx("span",{children:"create new patient"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-sky-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Patient ID"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Assigned VHV"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[E.map(B=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B.medical_record_number}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:B.name}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:I(B)}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B.assigned_vhv_name||"-"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>$(B),className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(z2,{className:"w-4 h-4"}),"View Detail"]}),s.jsxs("button",{onClick:()=>{localStorage.setItem("records_selected_patient",B.id);try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"records"}))}catch{}window.setAppView&&window.setAppView("records")},className:"text-green-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(Kr,{className:"w-4 h-4"}),"Records"]})]})})]},B.id)),E.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:5,children:"No patients found."})})]})]})}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Math.min(v*O,N.length)," of ",N.length," patients"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>k(B=>Math.max(1,B-1)),disabled:v===1,"aria-label":"Previous page",children:"<"}),s.jsx("button",{className:`px-3 py-1 rounded ${v===1?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>k(1),children:"1"}),A>2&&s.jsxs(s.Fragment,{children:[v>2&&s.jsx("span",{className:"px-1",children:""}),v>1&&v<A&&s.jsx("button",{className:"px-3 py-1 rounded bg-gray-200",children:v}),v<A-1&&s.jsx("span",{className:"px-1",children:""})]}),A>1&&s.jsx("button",{className:`px-3 py-1 rounded ${v===A?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>k(A),children:A}),s.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>k(B=>Math.min(A,B+1)),disabled:v===A,"aria-label":"Next page",children:">"})]})]})]})]}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Patient Management"}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer")&&s.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Yt,{className:"w-5 h-5"}),s.jsx("span",{children:"Add Patient"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search patients by name, MRN, or condition...",value:a,onChange:B=>l(B.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(B=>{var C,U;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all cursor-pointer",onClick:()=>$(B),children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Re,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:B.name}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["MRN: ",B.medical_record_number]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:B.doctor_diagnosed})]})]}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsxs("span",{children:["Gender: ",B.gender]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(Fu,{className:"w-4 h-4"}),s.jsx("span",{children:B.caregivers_contact})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Dr: ",B.assigned_doctor]})]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-3",children:["Created by: ",(C=B.created_by_user)==null?void 0:C.full_name," (",(U=B.created_by_user)==null?void 0:U.role,")"]}),(B.patient_categories.critical||B.patient_categories.elderly||B.patient_categories.pregnant)&&s.jsxs("div",{className:"flex space-x-1 mt-2",children:[B.patient_categories.critical&&s.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Critical"}),B.patient_categories.elderly&&s.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:"Elderly"}),B.patient_categories.pregnant&&s.jsx("span",{className:"px-2 py-1 bg-pink-100 text-pink-800 text-xs rounded-full",children:"Pregnant"})]})]})]},B.id)})}),N.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Re,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:a?"No patients found matching your search.":"No patients found."})]})]})},XH=()=>{var d,m;const{user:e}=Se(),[t,n]=b.useState(null),[r,i]=b.useState(!0),[a,l]=b.useState(null);b.useEffect(()=>{u()},[e]);const u=async()=>{if(e)try{const{data:h,error:f}=await ai(e.id);if(f&&f.code!=="PGRST116")console.error("Error fetching patient profile:",f);else if(n(h),h!=null&&h.assigned_vhv_name)try{const{data:g}=await un(),x=(g||[]).find(j=>typeof h.assigned_vhv_name=="string"&&(j.name||"").toLowerCase().includes((h.assigned_vhv_name||"").toLowerCase()));x&&l(x)}catch{}}catch(h){console.error("Error fetching patient profile:",h)}finally{i(!1)}};return r?s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t?s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Re,{className:"w-8 h-8 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),s.jsxs("p",{className:"text-gray-600",children:["Medical Record: ",t.medical_record_number]})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"Patient ID:"})," ",s.jsx("span",{className:"font-mono text-gray-900",children:t.id})]}),s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"User ID:"})," ",s.jsx("span",{className:"font-mono text-gray-900",children:t.user_id})]}),s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"MRN:"})," ",s.jsx("span",{className:"font-mono text-gray-900",children:t.medical_record_number})]})]}),(t.patient_categories.critical||t.patient_categories.elderly||t.patient_categories.pregnant)&&s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Patient Categories"}),s.jsxs("div",{className:"flex space-x-2",children:[t.patient_categories.critical&&s.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:"Critical"}),t.patient_categories.elderly&&s.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 text-sm rounded-full",children:"Elderly"}),t.patient_categories.pregnant&&s.jsx("span",{className:"px-3 py-1 bg-pink-100 text-pink-800 text-sm rounded-full",children:"Pregnant"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a&&s.jsx("div",{className:"lg:col-span-2 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Re,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-blue-800",children:"Assigned VHV"}),s.jsxs("div",{className:"font-semibold text-blue-900",children:[a.name," ",a.volunteer_code?`(${a.volunteer_code})`:""]}),s.jsxs("div",{className:"text-sm text-blue-800",children:[a.email||""," ",a.phone?`  ${a.phone}`:""]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>{try{localStorage.setItem("message:recipient",a.user_id)}catch{}try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"messages"}))}catch{}window.setAppView&&window.setAppView("messages")},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-flex items-center gap-2 text-sm",children:[s.jsx(Di,{className:"w-4 h-4"})," Message"]}),s.jsxs("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"map"}))}catch{}window.setAppView&&window.setAppView("map")},className:"px-3 py-2 border border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50 inline-flex items-center gap-2 text-sm",children:[s.jsx(Qd,{className:"w-4 h-4"})," Open Map"]})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(Re,{className:"w-5 h-5"}),s.jsx("span",{children:"Basic Information"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(gn,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Gender"}),s.jsx("p",{className:"text-gray-900 capitalize",children:t.gender})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Si,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Address"}),s.jsx("p",{className:"text-gray-900",children:t.address})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Fu,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Caregiver's Contact"}),s.jsx("p",{className:"text-gray-900",children:t.caregivers_contact})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Re,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Assigned Doctor"}),t.assigned_doctor?s.jsx("button",{onClick:()=>{try{localStorage.setItem("doctor:search",t.assigned_doctor)}catch{}try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"doctors"}))}catch{}window.setAppView&&window.setAppView("doctors")},className:"text-blue-700 hover:underline",children:t.assigned_doctor}):s.jsx("p",{className:"text-gray-900",children:"Not assigned"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Re,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Assigned VHV"}),s.jsx("p",{className:"text-gray-900",children:t.assigned_vhv_name||"Not assigned"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(Zt,{className:"w-5 h-5"}),s.jsx("span",{children:"Vital Signs"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Height / Weight / BMI"}),s.jsxs("p",{className:"text-gray-900",children:[t.height," / ",t.weight," / ",t.bmi]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Temperature"}),s.jsx("p",{className:"text-gray-900",children:t.temperature})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Pulse"}),s.jsx("p",{className:"text-gray-900",children:t.pulse})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Blood Pressure"}),s.jsx("p",{className:"text-gray-900",children:t.blood_pressure})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Diabetes Status"}),s.jsx("p",{className:"text-gray-900",children:t.diabetes||"None"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Smoker"}),s.jsx("p",{className:"text-gray-900",children:t.smoker?"Yes":"No"})]})]})]})]}),t.personal_health_history&&s.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-blue-800 flex items-center space-x-2 mb-3",children:[s.jsx(Si,{className:"w-5 h-5"}),s.jsx("span",{children:"Personal Health History"})]}),s.jsx("p",{className:"text-blue-700",children:t.personal_health_history})]}),t.doctor_diagnosed&&s.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-green-800 flex items-center space-x-2 mb-3",children:[s.jsx(Si,{className:"w-5 h-5"}),s.jsx("span",{children:"Doctor Diagnosed"})]}),s.jsx("p",{className:"text-green-700",children:t.doctor_diagnosed})]}),(t.food_allergies||t.medication_allergies)&&s.jsxs("div",{className:"mt-8 p-4 bg-red-50 rounded-lg border border-red-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-red-800 flex items-center space-x-2 mb-3",children:[s.jsx(Ur,{className:"w-5 h-5"}),s.jsx("span",{children:"Allergies"})]}),t.food_allergies&&s.jsxs("div",{className:"mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:"Food Allergies:"}),s.jsx("p",{className:"text-red-700",children:t.food_allergies})]}),t.medication_allergies&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:"Medication Allergies:"}),s.jsx("p",{className:"text-red-700",children:t.medication_allergies})]})]}),t.medications_history&&s.jsxs("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-purple-800 flex items-center space-x-2 mb-3",children:[s.jsx(Ks,{className:"w-5 h-5"}),s.jsx("span",{children:"Medications History"})]}),s.jsx("p",{className:"text-purple-700",children:t.medications_history})]}),t.mental_health_status&&s.jsxs("div",{className:"mt-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 flex items-center space-x-2 mb-3",children:[s.jsx(Zt,{className:"w-5 h-5"}),s.jsx("span",{children:"Mental Health Status"})]}),s.jsx("p",{className:"text-indigo-700",children:t.mental_health_status})]}),t.other_symptoms&&s.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-yellow-800 flex items-center space-x-2 mb-3",children:[s.jsx(Ur,{className:"w-5 h-5"}),s.jsx("span",{children:"Other Symptoms"})]}),s.jsx("p",{className:"text-yellow-700",children:t.other_symptoms})]}),t.pregnancy_details&&s.jsxs("div",{className:"mt-6 p-4 bg-pink-50 rounded-lg border border-pink-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-pink-800 flex items-center space-x-2 mb-3",children:[s.jsx(Zt,{className:"w-5 h-5"}),s.jsx("span",{children:"Pregnancy Details"})]}),s.jsx("p",{className:"text-pink-700",children:t.pregnancy_details})]}),t.doctors_note&&s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center space-x-2 mb-3",children:[s.jsx(Si,{className:"w-5 h-5"}),s.jsx("span",{children:"Doctor's Notes"})]}),s.jsx("p",{className:"text-gray-700",children:t.doctors_note})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 text-sm text-gray-500",children:[s.jsxs("p",{children:["Date of Entry: ",new Date(t.doe).toLocaleDateString()]}),s.jsxs("p",{children:["Last Record Date: ",t.last_record_date?new Date(t.last_record_date).toLocaleDateString():"N/A"]}),s.jsxs("p",{children:["Profile created by: ",(d=t.created_by_user)==null?void 0:d.full_name," (",(m=t.created_by_user)==null?void 0:m.role,")"]}),s.jsxs("p",{children:["Created: ",new Date(t.created_at).toLocaleDateString()]}),t.updated_at&&s.jsxs("p",{children:["Last updated: ",new Date(t.updated_at).toLocaleDateString()]})]})]})]})}):s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[s.jsx(Re,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Profile Found"}),s.jsx("p",{className:"text-gray-600",children:"Your medical profile hasn't been created yet. Please contact your healthcare provider to set up your profile."})]})})},QH=()=>{var q,R,Y,G,re,ne;const{user:e}=Se(),[t,n]=b.useState([]),[r,i]=b.useState([]),[a,l]=b.useState(null),[u,d]=b.useState(""),[m,h]=b.useState(!1),[f,g]=b.useState(""),[x,j]=b.useState(""),[w,S]=b.useState(!0),[_,N]=b.useState(""),[v,k]=b.useState(null),[O,A]=b.useState(null);b.useEffect(()=>{E(),I()},[e]),b.useEffect(()=>{try{const H=localStorage.getItem("message:recipient");if(H){h(!0),g(H);const ee=r.find(Q=>Q.id===H);ee&&N(ee.full_name),localStorage.removeItem("message:recipient")}}catch{}},[r]);const E=async()=>{if(e)try{const{data:H,error:ee}=await zM(e.id);ee?console.error("Error fetching messages:",ee):n(H||[])}catch(H){console.error("Error fetching messages:",H)}finally{S(!1)}},I=async()=>{try{const{data:H,error:ee}=await Ct(e==null?void 0:e.id);if(ee)console.error("Error fetching users:",ee);else{const Q=H||[],ae=(e==null?void 0:e.role)==="patient"?Q.filter(Te=>Te.role!=="patient"):Q;i(ae)}}catch(H){console.error("Error fetching users:",H)}},$=()=>{const H=new Map;return t.forEach(ee=>{const Q=ee.sender_id===(e==null?void 0:e.id)?ee.recipient_id:ee.sender_id,ae=ee.sender_id===(e==null?void 0:e.id)?ee.recipient:ee.sender;H.has(Q)||H.set(Q,{userId:Q,user:ae,lastMessage:ee,messages:[]}),H.get(Q).messages.push(ee)}),Array.from(H.values()).sort((ee,Q)=>new Date(Q.lastMessage.created_at).getTime()-new Date(ee.lastMessage.created_at).getTime())},D=H=>{var Q;const ee=(Q=H.target.files)==null?void 0:Q[0];if(ee){if(ee.size>5*1024*1024){alert("Image size must be less than 5MB");return}if(!ee.type.startsWith("image/")){alert("Please select an image file");return}k(ee);const ae=new FileReader;ae.onload=Te=>{var Ft;A((Ft=Te.target)==null?void 0:Ft.result)},ae.readAsDataURL(ee)}},M=()=>{k(null),A(null)},z=async()=>{if(!u.trim()&&!v)return;const H=m?f:a;if(!H)return;let ee,Q;v&&(ee=O,Q=v.name);try{const{data:ae,error:Te}=await mr({sender_id:(e==null?void 0:e.id)||"",recipient_id:H,subject:m?x:"Re: Conversation",content:u||(v?`[Image: ${v.name}]`:""),image_url:ee,image_name:Q,is_read:!1});Te?(console.error("Error sending message:",Te),alert("Failed to send message. Please try again.")):(d(""),M(),m&&(j(""),h(!1),g(""),N("")),await E())}catch(ae){console.error("Error sending message:",ae),alert("Failed to send message. Please try again.")}},B=async H=>{try{await $M(H,(e==null?void 0:e.id)||"")}catch(ee){console.error("Error marking message as read:",ee)}},C=$(),U=a?((q=C.find(H=>H.userId===a))==null?void 0:q.messages)||[]:[],Z=r.filter(H=>H.full_name.toLowerCase().includes(_.toLowerCase())||H.email.toLowerCase().includes(_.toLowerCase()));return w?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Messages"}),s.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Yt,{className:"w-5 h-5"}),s.jsx("span",{children:"New Message"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s.jsxs("div",{className:"flex h-[600px]",children:[s.jsxs("div",{className:"w-1/3 border-r border-gray-200",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsx("h3",{className:"font-semibold text-gray-900",children:"Conversations"})}),s.jsx("div",{className:"overflow-y-auto",style:{height:"calc(600px - 60px)"},children:C.map(H=>{var ee,Q;return s.jsx("div",{onClick:()=>{l(H.userId),h(!1),H.messages.filter(ae=>ae.recipient_id===(e==null?void 0:e.id)&&!ae.is_read).forEach(ae=>B(ae.id))},className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ${a===H.userId?"bg-blue-50":""}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:s.jsx(Re,{className:"w-5 h-5 text-gray-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-gray-900 truncate",children:(ee=H.user)==null?void 0:ee.full_name}),s.jsx("p",{className:"text-sm text-gray-600 capitalize",children:(Q=H.user)==null?void 0:Q.role}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:H.lastMessage.content})]}),H.messages.some(ae=>ae.recipient_id===(e==null?void 0:e.id)&&!ae.is_read)&&s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})},H.userId)})})]}),s.jsx("div",{className:"flex-1",children:m?s.jsxs("div",{className:"p-4 h-full flex flex-col",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"New Message"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recipient"}),s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search users...",value:_,onChange:H=>N(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),s.jsx("div",{className:"mt-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg",children:Z.map(H=>s.jsxs("div",{onClick:()=>{g(H.id),N(H.full_name)},className:`p-2 cursor-pointer hover:bg-gray-50 ${f===H.id?"bg-blue-50":""}`,children:[s.jsx("p",{className:"text-sm font-medium",children:H.full_name}),s.jsx("p",{className:"text-xs text-gray-600 capitalize",children:H.role})]},H.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),s.jsx("input",{type:"text",value:x,onChange:H=>j(H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Message subject..."})]})]}),s.jsxs("div",{className:"flex-1 mt-4 flex flex-col",children:[O&&s.jsxs("div",{className:"mb-4 relative inline-block",children:[s.jsx("img",{src:O,alt:"Preview",className:"max-w-xs max-h-32 rounded-lg border border-gray-300"}),s.jsx("button",{onClick:M,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:s.jsx(Os,{className:"w-3 h-3"})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:v==null?void 0:v.name})]}),s.jsx("textarea",{value:u,onChange:H=>d(H.target.value),placeholder:v?"Add a caption (optional)...":"Type your message...",className:"flex-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none"}),s.jsxs("div",{className:"flex justify-between items-center mt-4",children:[s.jsx("div",{className:"flex space-x-2",children:s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"}),s.jsxs("div",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all flex items-center space-x-1",children:[s.jsx(vM,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Image"})]})]})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:z,disabled:!u.trim()&&!v||!f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Uu,{className:"w-4 h-4"}),s.jsx("span",{children:"Send"})]})]})]})]})]}):a?s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsx("p",{className:"font-semibold text-gray-900",children:((R=U[0])==null?void 0:R.sender_id)===(e==null?void 0:e.id)?(G=(Y=U[0])==null?void 0:Y.recipient)==null?void 0:G.full_name:(ne=(re=U[0])==null?void 0:re.sender)==null?void 0:ne.full_name})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:U.sort((H,ee)=>new Date(H.created_at).getTime()-new Date(ee.created_at).getTime()).map(H=>s.jsx("div",{className:`flex ${H.sender_id===(e==null?void 0:e.id)?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${H.sender_id===(e==null?void 0:e.id)?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[H.image_url&&s.jsxs("div",{className:"mb-2",children:[s.jsx("img",{src:H.image_url,alt:H.image_name||"Shared image",className:"max-w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(H.image_url,"_blank")}),H.image_name&&s.jsx("p",{className:`text-xs mt-1 ${H.sender_id===(e==null?void 0:e.id)?"text-blue-200":"text-gray-500"}`,children:H.image_name})]}),H.content&&H.content!==`[Image: ${H.image_name}]`&&s.jsx("p",{className:"text-sm",children:H.content}),s.jsx("p",{className:`text-xs mt-1 ${H.sender_id===(e==null?void 0:e.id)?"text-blue-200":"text-gray-500"}`,children:new Date(H.created_at).toLocaleString()})]})},H.id))}),s.jsxs("div",{className:"p-4 border-t border-gray-200",children:[O&&s.jsxs("div",{className:"mb-3 relative inline-block",children:[s.jsx("img",{src:O,alt:"Preview",className:"max-w-xs max-h-24 rounded-lg border border-gray-300"}),s.jsx("button",{onClick:M,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:s.jsx(Os,{className:"w-3 h-3"})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:v==null?void 0:v.name})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("label",{className:"cursor-pointer self-end",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"}),s.jsx("div",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",children:s.jsx(_M,{className:"w-5 h-5"})})]}),s.jsx("textarea",{value:u,onChange:H=>d(H.target.value),placeholder:v?"Add a caption (optional)...":"Type your reply...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none",rows:2,onKeyPress:H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),z())}}),s.jsx("button",{onClick:z,disabled:!u.trim()&&!v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(Uu,{className:"w-5 h-5"})})]})]})]}):s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Di,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"Select a conversation to start messaging"})]})})})]})})]})},YC=({task:e,onClose:t,rolesFilter:n,forceAssignedToUserId:r,hideAssignedTo:i})=>{const{user:a}=Se(),[l,u]=b.useState(!1),[d,m]=b.useState([]),[h,f]=b.useState([]),[g,x]=b.useState([]),[j,w]=b.useState("general"),[S,_]=b.useState({title:"",description:"",priority:"medium",status:"pending",assigned_to:r||"",patient_id:"",due_date:""}),[N,v]=b.useState([]);b.useEffect(()=>{if(k(),A(),O(),e){const M=!!(e.patient_id&&e.due_date);w(M?"appointment":"general"),_({title:e.title,description:e.description,priority:e.priority,status:e.status,assigned_to:r||e.assigned_to,patient_id:e.patient_id||"",due_date:e.due_date||""}),e.form_fields&&Array.isArray(e.form_fields)&&v(e.form_fields.map(z=>{var B;return{...z,options:((B=z.options)==null?void 0:B.join(", "))||""}}))}},[e]);const k=async()=>{try{const{data:M,error:z}=await Ct();if(z)console.error("Error fetching users:",z);else{let B=(M||[]).filter(C=>C.role==="doctor"||C.role==="volunteer");n&&n.length&&(B=B.filter(C=>n.includes(C.role))),m(B)}}catch(M){console.error("Error fetching users:",M)}},O=async()=>{try{const{data:M,error:z}=await un();z||x(M||[])}catch(M){console.error("Error fetching volunteers:",M)}},A=async()=>{try{const{data:M,error:z}=await Bt();z?console.error("Error fetching patients:",z):f(M||[])}catch(M){console.error("Error fetching patients:",M)}},E=async M=>{if(M.preventDefault(),u(!0),j==="appointment"){if(!S.patient_id){alert("Please select a patient for the appointment."),u(!1);return}if(!S.due_date){alert("Please select a date for the appointment."),u(!1);return}}try{const z=N.map(B=>({id:B.id,label:B.label,type:B.type,required:!!B.required,options:B.options?B.options.split(",").map(C=>C.trim()).filter(Boolean):void 0}));if(e){const{error:B}=await Nr(e.id,{...S,form_fields:z});if(B){console.error("Error updating task:",B);return}}else{const B={...S,assigned_to:r||S.assigned_to,assigned_by:(a==null?void 0:a.id)||"",patient_id:j==="appointment"?S.patient_id:void 0,form_fields:z,form_responses:{}},{error:C}=await zl(B);if(C){console.error("Error creating task:",C);return}}t()}catch(z){console.error("Error saving task:",z)}finally{u(!1)}},I=M=>{const{name:z,value:B}=M.target;z==="assigned_to"&&r||_({...S,[z]:B})},$=M=>{w(M),M==="general"&&_({...S,patient_id:""})},D=(n==null?void 0:n.includes("volunteer"))&&!e;return s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(Xd,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(ys,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Task":"Create New Task"})]})]})}),s.jsxs("form",{onSubmit:E,className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[D&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Type *"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"taskType",value:"general",checked:j==="general",onChange:()=>$("general"),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"text-sm text-gray-700",children:"General Task"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"taskType",value:"appointment",checked:j==="appointment",onChange:()=>$("appointment"),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Appointment"})]})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j==="appointment"?`Appointments require a patient and date, and will appear in the volunteer's "Today's Appointments" tab.`:`General tasks will appear in the volunteer's "Today's To-Do" tab when due today.`})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title *"}),s.jsx("input",{type:"text",name:"title",required:!0,value:S.title,onChange:I,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter task title..."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),s.jsx("textarea",{name:"description",required:!0,rows:4,value:S.description,onChange:I,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Describe the task in detail..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),s.jsxs("select",{name:"priority",required:!0,value:S.priority,onChange:I,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),(!(n!=null&&n.includes("volunteer"))||!!e)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),s.jsxs("select",{name:"status",required:!0,value:S.status,onChange:I,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{className:j==="general"?"opacity-50":"",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j==="appointment"?"Patient *":"Related Patient (Optional)"}),s.jsxs("select",{name:"patient_id",value:S.patient_id,onChange:I,required:j==="appointment",disabled:j==="general",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"",children:"Select patient..."}),h.map(M=>s.jsxs("option",{value:M.id,children:[M.name," - ",M.medical_record_number]},M.id))]}),j==="general"&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"General tasks don't require a patient assignment"})]}),i?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned To"}),s.jsx("div",{className:"px-4 py-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-700",children:"You"})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign To *"}),s.jsxs("select",{name:"assigned_to",required:!0,value:S.assigned_to,onChange:I,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"",children:"Select user..."}),(()=>{let M=d;if(n!=null&&n.includes("volunteer")){let z="";if(S.patient_id){const B=h.find(C=>C.id===S.patient_id);z=((B==null?void 0:B.area_name)||"").toLowerCase()}if(z){const B=g.filter(C=>(C.area_name||"").toLowerCase()===z).map(C=>C.user_id);M=d.filter(C=>C.role==="volunteer"&&B.includes(C.id))}else M=d.filter(B=>B.role==="volunteer")}return M.map(z=>s.jsxs("option",{value:z.id,children:[z.full_name," (",z.role,")"]},z.id))})()]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j==="appointment"?"Appointment Date *":"Due Date (Optional)"}),s.jsx("input",{type:"date",name:"due_date",value:S.due_date,onChange:I,required:j==="appointment",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),j==="appointment"&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Appointment date is required and will appear in the volunteer's appointment schedule"})]}),(n==null?void 0:n.includes("volunteer"))&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Form Fields (for volunteer to fill)"}),s.jsxs("div",{className:"space-y-3",children:[N.map((M,z)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-center",children:[s.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Field label",value:M.label,onChange:B=>{const C=B.target.value;v(U=>U.map((Z,q)=>q===z?{...Z,label:C}:Z))}}),s.jsxs("select",{className:"px-3 py-2 border rounded",value:M.type,onChange:B=>{const C=B.target.value;v(U=>U.map((Z,q)=>q===z?{...Z,type:C}:Z))},children:[s.jsx("option",{value:"text",children:"Text"}),s.jsx("option",{value:"textarea",children:"Textarea"}),s.jsx("option",{value:"number",children:"Number"}),s.jsx("option",{value:"date",children:"Date"}),s.jsx("option",{value:"select",children:"Select"}),s.jsx("option",{value:"checkbox",children:"Checkbox"}),s.jsx("option",{value:"radio",children:"Radio"})]}),s.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Options (comma separated)",value:M.options||"",onChange:B=>{const C=B.target.value;v(U=>U.map((Z,q)=>q===z?{...Z,options:C}:Z))}}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!M.required,onChange:B=>{const C=B.target.checked;v(U=>U.map((Z,q)=>q===z?{...Z,required:C}:Z))}})," Required"]}),s.jsx("button",{type:"button",className:"text-red-600 text-sm",onClick:()=>v(B=>B.filter((C,U)=>U!==z)),children:"Remove"})]})]},M.id)),s.jsx("button",{type:"button",className:"px-3 py-2 border rounded text-sm",onClick:()=>v(M=>[...M,{id:"f-"+Math.random().toString(36).slice(2,9),label:"",type:"text",options:""}]),children:"+ Add Field"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"These fields will appear on the volunteer side when they open the task to complete it."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(La,{className:"w-5 h-5"}),s.jsx("span",{children:e?"Update Task":"Create Task"})]})})]})]})]})})},p1=({personalOnly:e=!1,title:t})=>{const{user:n}=Se(),[r,i]=b.useState([]),[a,l]=b.useState(!0),[u,d]=b.useState(""),[m,h]=b.useState("all"),[f,g]=b.useState("all"),[x,j]=b.useState(!1),[w,S]=b.useState(null);b.useEffect(()=>{_()},[]);const _=async()=>{try{const{data:D,error:M}=await Hr(n==null?void 0:n.id);if(M)console.error("Error fetching tasks:",M);else{let z=D||[];e&&(n!=null&&n.id)&&(z=z.filter(B=>B.assigned_to===n.id)),i(z)}}catch(D){console.error("Error fetching tasks:",D)}finally{l(!1)}},N=async(D,M)=>{try{const{error:z}=await Nr(D,{status:M});z?console.error("Error updating task:",z):_()}catch(z){console.error("Error updating task:",z)}},v=async D=>{if(window.confirm("Are you sure you want to delete this task?"))try{const{error:M}=await W2(D);M?console.error("Error deleting task:",M):_()}catch(M){console.error("Error deleting task:",M)}},k=D=>{S(D),j(!0)},O=()=>{j(!1),S(null),_()},A=r.filter(D=>{var C;const M=D.title.toLowerCase().includes(u.toLowerCase())||D.description.toLowerCase().includes(u.toLowerCase())||((C=D.assigned_to_user)==null?void 0:C.full_name.toLowerCase().includes(u.toLowerCase())),z=m==="all"||D.status===m,B=f==="all"||D.priority===f;return M&&z&&B}),E=D=>{switch(D){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=D=>{switch(D){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},$=D=>{switch(D){case"completed":return s.jsx(vs,{className:"w-4 h-4"});case"in_progress":return s.jsx(xl,{className:"w-4 h-4"});case"pending":return s.jsx(Ur,{className:"w-4 h-4"});default:return s.jsx(xl,{className:"w-4 h-4"})}};return a?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):x?s.jsx(YC,{task:w,onClose:O,forceAssignedToUserId:e?n==null?void 0:n.id:void 0,hideAssignedTo:e}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t||(e?"My Tasks":"Task Management")}),s.jsxs("button",{onClick:()=>j(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Yt,{className:"w-5 h-5"}),s.jsx("span",{children:e?"Add Task":"Create Task"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tasks...",value:u,onChange:D=>d(D.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:m,onChange:D=>h(D.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]}),s.jsxs("select",{value:f,onChange:D=>g(D.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Priority"}),s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:A.map(D=>{var M,z;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:D.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:D.description})]}),s.jsxs("div",{className:"flex space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>k(D),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Task",children:s.jsx(Hu,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>v(D.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Task",children:s.jsx(Rl,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${E(D.priority)}`,children:[D.priority.charAt(0).toUpperCase()+D.priority.slice(1)," Priority"]}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${I(D.status)}`,children:[$(D.status),s.jsx("span",{children:D.status.replace("_"," ").charAt(0).toUpperCase()+D.status.replace("_"," ").slice(1)})]})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Assigned to: ",(M=D.assigned_to_user)==null?void 0:M.full_name]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Created by: ",(z=D.assigned_by_user)==null?void 0:z.full_name]})]}),D.patient&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Patient: ",D.patient.name]})]}),D.due_date&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsxs("span",{children:["Due: ",new Date(D.due_date).toLocaleDateString()]})]})]}),D.status!=="completed"&&D.status!=="cancelled"&&s.jsxs("div",{className:"flex space-x-2",children:[D.status==="pending"&&s.jsx("button",{onClick:()=>N(D.id,"in_progress"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"Start Task"}),D.status==="in_progress"&&s.jsx("button",{onClick:()=>N(D.id,"completed"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:"Mark Complete"}),s.jsx("button",{onClick:()=>N(D.id,"cancelled"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Cancel"})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",children:[s.jsxs("p",{children:["Created: ",new Date(D.created_at).toLocaleDateString()]}),D.completed_at&&s.jsxs("p",{children:["Completed: ",new Date(D.completed_at).toLocaleDateString()]})]})]},D.id)})}),A.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(vs,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:u||m!=="all"||f!=="all"?"No tasks found matching your filters.":"No tasks found."})]})]})},Tl=({open:e,title:t,onClose:n,children:r})=>e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:n}),s.jsxs("div",{className:"relative bg-white w-[95vw] max-w-3xl max-h-[85vh] rounded-2xl shadow-xl border border-gray-200 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-200 bg-gray-50 shrink-0",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900",children:t}),s.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 px-2 py-1",children:""})]}),s.jsx("div",{className:"p-5 overflow-y-auto flex-1",children:r})]})]}):null,JH=e=>e?new Date(e).toLocaleDateString():"",Om=(e,t)=>{if(!e)return"";const n=new Date(e).toLocaleDateString();return t?`${n} ${t}`:n},eZ=()=>{const{user:e}=Se(),[t,n]=b.useState("appointments"),[r,i]=b.useState([]),[a,l]=b.useState(!0),[u,d]=b.useState([]),[m,h]=b.useState(()=>new Date().toISOString().slice(0,10)),[f,g]=b.useState(""),[x,j]=b.useState([]),[w,S]=b.useState(!1),[_,N]=b.useState({patientId:"",doctorId:"",date:new Date().toISOString().slice(0,10),time:"09:00",title:"Appointment",description:""}),[v,k]=b.useState(!1),[O,A]=b.useState(null),[E,I]=b.useState({patientId:"",doctorId:"",date:"",time:"09:00",title:"",description:""}),$=async()=>{l(!0);const[{data:R},{data:Y},{data:G}]=await Promise.all([Hr(),Ct(),Bt()]),re=(R||[]).filter(ne=>ne.assigned_to===(e==null?void 0:e.id));i(re),d((Y||[]).filter(ne=>ne.role==="doctor")),j(G||[]),l(!1)};b.useEffect(()=>{$()},[]);const D=b.useMemo(()=>r.filter(R=>!!R.patient_id),[r]),M=b.useMemo(()=>r.filter(R=>!R.patient_id),[r]),z=b.useMemo(()=>{const R=f.toLowerCase();return D.filter(Y=>{var G;return Y.status==="pending"&&((Y.title||"").toLowerCase().includes(R)||(((G=Y.patient)==null?void 0:G.name)||"").toLowerCase().includes(R))})},[D,f]),B=b.useMemo(()=>{const R=f.toLowerCase();return D.filter(Y=>{var G;return(Y.status==="in_progress"||Y.status==="completed")&&(m?Y.due_date===m:!0)&&((Y.title||"").toLowerCase().includes(R)||(((G=Y.patient)==null?void 0:G.name)||"").toLowerCase().includes(R))})},[D,m,f]),C=b.useMemo(()=>{const R=f.toLowerCase();return D.filter(Y=>{var G;return Y.status==="cancelled"&&((Y.title||"").toLowerCase().includes(R)||(((G=Y.patient)==null?void 0:G.name)||"").toLowerCase().includes(R))})},[D,f]),U=b.useMemo(()=>{const R=f.toLowerCase();return M.filter(Y=>(Y.title||"").toLowerCase().includes(R)||(Y.description||"").toLowerCase().includes(R))},[M,f]),Z=async R=>{await Nr(R.id,{status:"in_progress"}),$()},q=R=>{A(R),I({patientId:R.patient_id||"",doctorId:R.assigned_to,date:R.due_date||new Date().toISOString().slice(0,10),time:R.due_time||"09:00",title:R.title||"Appointment",description:R.description||""}),k(!0)};return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"inline-flex rounded-lg overflow-hidden border border-gray-200",children:[s.jsxs("button",{className:`px-4 py-2 text-sm inline-flex items-center gap-2 whitespace-nowrap ${t==="appointments"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>n("appointments"),children:[s.jsx(Cs,{className:"w-4 h-4"})," Appointments"]}),s.jsxs("button",{className:`px-4 py-2 text-sm border-l border-gray-200 inline-flex items-center gap-2 whitespace-nowrap ${t==="general"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>n("general"),children:[s.jsx(ys,{className:"w-4 h-4"})," General Tasks"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[t==="appointments"&&s.jsx("input",{type:"date",className:"px-3 py-2 border rounded",value:m,onChange:R=>h(R.target.value)}),s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-4 h-4 absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{className:"pl-7 pr-3 py-2 border rounded",placeholder:"Search...",value:f,onChange:R=>g(R.target.value)})]}),t==="appointments"&&s.jsxs("button",{className:"px-3 py-2 bg-blue-600 text-white rounded inline-flex items-center gap-1",onClick:()=>{N({patientId:"",doctorId:(e==null?void 0:e.id)||"",date:new Date().toISOString().slice(0,10),title:"Appointment",description:""}),S(!0)},children:[s.jsx(Yt,{className:"w-4 h-4"})," Create"]})]})]}),a?s.jsx("div",{className:"py-10 text-center",children:"Loading"}):t==="appointments"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden mb-6",children:[s.jsx("div",{className:"px-4 py-2 bg-red-50 border-b border-red-100 text-sm text-red-800",children:"Needs Approval"}),s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Patient"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Requested Date"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[z.map(R=>{var Y;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:((Y=R.patient)==null?void 0:Y.name)||""}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:R.title||"Appointment"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Om(R.due_date,R.due_time)}),s.jsxs("td",{className:"px-4 py-2 text-sm flex gap-2",children:[s.jsxs("button",{onClick:()=>Z(R),className:"px-3 py-1 bg-green-600 text-white rounded inline-flex items-center gap-1",children:[s.jsx(vs,{className:"w-4 h-4"}),"Approve"]}),s.jsxs("button",{onClick:()=>q(R),className:"px-3 py-1 bg-blue-600 text-white rounded inline-flex items-center gap-1",children:[s.jsx(Hu,{className:"w-4 h-4"}),"Edit"]}),s.jsxs("button",{onClick:()=>Nr(R.id,{status:"cancelled"}).then($),className:"px-3 py-1 bg-red-600 text-white rounded inline-flex items-center gap-1",children:[s.jsx(kp,{className:"w-4 h-4"}),"Cancel"]})]})]},R.id)}),z.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-4 py-4 text-center text-gray-500",children:"No pending requests."})})]})]})]}),s.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-2 bg-blue-50 border-b border-blue-100 text-sm text-blue-800",children:["Approved  ",m||"All Dates"]}),s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Patient"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[B.map(R=>{var Y;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:((Y=R.patient)==null?void 0:Y.name)||""}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:R.title||"Appointment"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Om(R.due_date,R.due_time)}),s.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:R.status.replace("_"," ")}),s.jsxs("td",{className:"px-4 py-2 text-sm flex gap-2",children:[s.jsxs("button",{onClick:()=>q(R),className:"px-3 py-1 bg-blue-600 text-white rounded inline-flex items-center gap-1",children:[s.jsx(Hu,{className:"w-4 h-4"}),"Edit"]}),s.jsxs("button",{onClick:()=>Nr(R.id,{status:"cancelled"}).then($),className:"px-3 py-1 bg-red-600 text-white rounded inline-flex items-center gap-1",children:[s.jsx(kp,{className:"w-4 h-4"}),"Cancel"]})]})]},R.id)}),B.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:"No approved appointments for this date."})})]})]})]}),s.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden mt-6",children:[s.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-100 text-sm text-gray-800",children:"Cancelled"}),s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Patient"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[C.map(R=>{var Y;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:((Y=R.patient)==null?void 0:Y.name)||""}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:R.title||"Appointment"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Om(R.due_date,R.due_time)})]},R.id)}),C.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-gray-500",children:"No cancelled appointments."})})]})]})]})]}):s.jsx("div",{className:"bg-white border rounded-xl overflow-hidden",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Due"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Priority"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Status"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[U.map(R=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:R.title}),s.jsx("td",{className:"px-4 py-2 text-sm",children:JH(R.due_date)}),s.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:R.priority}),s.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:R.status.replace("_"," ")})]},R.id)),U.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-gray-500",children:"No general tasks."})})]})]})}),s.jsx(Tl,{open:w,title:"Create Appointment",onClose:()=>S(!1),children:s.jsxs("form",{onSubmit:async R=>{R.preventDefault(),!(!_.patientId||!_.doctorId||!_.date)&&(await zl({title:_.title||"Appointment",description:_.description||"Doctor scheduled appointment",priority:"medium",status:"in_progress",assigned_to:_.doctorId,assigned_by:(e==null?void 0:e.id)||"",patient_id:_.patientId,due_date:_.date,due_time:_.time}),S(!1),$())},className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded",value:_.patientId,onChange:R=>N({..._,patientId:R.target.value}),required:!0,children:[s.jsx("option",{value:"",children:"Select patient"}),x.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded",value:_.doctorId,onChange:R=>N({..._,doctorId:R.target.value}),required:!0,children:[s.jsx("option",{value:"",children:"Select doctor"}),u.map(R=>s.jsx("option",{value:R.id,children:R.full_name},R.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:_.date,onChange:R=>N({..._,date:R.target.value}),required:!0}),s.jsx("input",{type:"time",className:"w-full px-3 py-2 border rounded",value:_.time,onChange:R=>N({..._,time:R.target.value}),required:!0})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:_.title,onChange:R=>N({..._,title:R.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border rounded",value:_.description,onChange:R=>N({..._,description:R.target.value})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 border rounded",onClick:()=>S(!1),children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Create"})]})]})}),s.jsx(Tl,{open:v,title:"Edit Appointment",onClose:()=>k(!1),children:s.jsxs("form",{onSubmit:async R=>{R.preventDefault(),O&&(await Nr(O.id,{title:E.title,description:E.description,assigned_to:E.doctorId,due_date:E.date,due_time:E.time,status:O.status==="pending"?"in_progress":O.status}),k(!1),$())},className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded",required:!0,value:E.doctorId,onChange:R=>I({...E,doctorId:R.target.value}),children:[s.jsx("option",{value:"",children:"Select doctor"}),u.map(R=>s.jsx("option",{value:R.id,children:R.full_name},R.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",required:!0,value:E.date,onChange:R=>I({...E,date:R.target.value})}),s.jsx("input",{type:"time",className:"w-full px-3 py-2 border rounded",required:!0,value:E.time,onChange:R=>I({...E,time:R.target.value})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:E.title,onChange:R=>I({...E,title:R.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border rounded",value:E.description,onChange:R=>I({...E,description:R.target.value})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 border rounded",onClick:()=>k(!1),children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save"})]})]})})]})},tZ=()=>{var D;const{user:e}=Se(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[a,l]=b.useState(""),[u,d]=b.useState("all"),[m,h]=b.useState("all"),[f,g]=b.useState(!1),[x,j]=b.useState(null),[w,S]=b.useState(null);b.useEffect(()=>{_()},[]);const _=async()=>{try{const{data:M}=await Hr(),z=(M||[]).filter(B=>{var C;return((C=B.assigned_to_user)==null?void 0:C.role)==="volunteer"});n(z)}finally{i(!1)}},N=async(M,z)=>{const{error:B}=await Nr(M,{status:z});B||_()},v=async M=>{if(!window.confirm("Delete this task?"))return;const{error:z}=await W2(M);z||_()},k=M=>{j(M),g(!0)},O=()=>{g(!1),j(null),_()},A=t.filter(M=>{var U;const z=M.title.toLowerCase().includes(a.toLowerCase())||M.description.toLowerCase().includes(a.toLowerCase())||((U=M.assigned_to_user)==null?void 0:U.full_name.toLowerCase().includes(a.toLowerCase())),B=u==="all"||M.status===u,C=m==="all"||M.priority===m;return z&&B&&C}),E=M=>{switch(M){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=M=>{switch(M){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},$=M=>{switch(M){case"completed":return s.jsx(vs,{className:"w-4 h-4"});case"in_progress":return s.jsx(xl,{className:"w-4 h-4"});case"pending":return s.jsx(Ur,{className:"w-4 h-4"});default:return s.jsx(xl,{className:"w-4 h-4"})}};return r?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):f?s.jsx(YC,{task:x,onClose:O,rolesFilter:["volunteer"]}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Volunteer Tasks"}),(e==null?void 0:e.role)==="doctor"&&s.jsxs("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Yt,{className:"w-5 h-5"}),s.jsx("span",{children:"Assign Task"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tasks...",value:a,onChange:M=>l(M.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:u,onChange:M=>d(M.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]}),s.jsxs("select",{value:m,onChange:M=>h(M.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Priority"}),s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:A.map(M=>{var z;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:M.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:M.description})]}),s.jsxs("div",{className:"flex space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>k(M),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Task",children:s.jsx(Hu,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>v(M.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Task",children:s.jsx(Rl,{className:"w-4 h-4"})}),(M.report||M.form_responses&&Object.keys(M.form_responses).length>0)&&s.jsx("button",{onClick:()=>S(M),className:"p-2 text-gray-500 hover:text-green-700 hover:bg-green-50 rounded-lg transition-all",title:"Review Submission",children:s.jsx(vs,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${E(M.priority)}`,children:[M.priority.charAt(0).toUpperCase()+M.priority.slice(1)," Priority"]}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${I(M.status)}`,children:[$(M.status),s.jsx("span",{children:M.status.replace("_"," ").charAt(0).toUpperCase()+M.status.replace("_"," ").slice(1)})]})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Volunteer: ",(z=M.assigned_to_user)==null?void 0:z.full_name]})]}),M.patient&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Patient: ",M.patient.name]})]}),M.due_date&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsxs("span",{children:["Due: ",new Date(M.due_date).toLocaleDateString()]})]}),M.report&&s.jsxs("div",{className:"text-gray-700 bg-gray-50 border border-gray-200 rounded p-3",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Volunteer Report"}),s.jsx("div",{children:M.report})]})]}),M.status!=="completed"&&M.status!=="cancelled"&&s.jsxs("div",{className:"flex space-x-2",children:[M.status==="pending"&&s.jsx("button",{onClick:()=>N(M.id,"in_progress"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"Start"}),M.status==="in_progress"&&s.jsx("button",{onClick:()=>N(M.id,"completed"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:"Mark Complete"}),s.jsx("button",{onClick:()=>N(M.id,"cancelled"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Cancel"})]})]},M.id)})}),A.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(vs,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No volunteer tasks found."})]}),s.jsx(Tl,{open:!!w,title:w?`Review Submission: ${w.title}`:"",onClose:()=>S(null),children:w?s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"text-gray-700",children:["Volunteer: ",s.jsx("span",{className:"font-medium",children:(D=w.assigned_to_user)==null?void 0:D.full_name})]}),w.patient&&s.jsxs("div",{className:"text-gray-700",children:["Patient: ",s.jsx("span",{className:"font-medium",children:w.patient.name})]}),w.due_date&&s.jsxs("div",{className:"text-gray-700",children:["Due: ",s.jsx("span",{className:"font-medium",children:new Date(w.due_date).toLocaleDateString()})]}),s.jsxs("div",{className:"text-gray-700",children:["Status: ",s.jsx("span",{className:"font-medium capitalize",children:w.status.replace("_"," ")})]})]}),w.report?s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Volunteer Report"}),s.jsx("div",{className:"whitespace-pre-wrap text-gray-800",children:w.report})]}):s.jsx("div",{className:"text-gray-500",children:"No written report provided."}),w.form_fields&&w.form_fields.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Form Responses"}),s.jsx("div",{className:"space-y-2",children:w.form_fields.map(M=>{const z=(w.form_responses||{})[M.id],B=Array.isArray(z)?z.join(", "):z??"";return s.jsxs("div",{className:"flex justify-between gap-4 border-b border-gray-100 pb-1",children:[s.jsx("div",{className:"text-gray-600",children:M.label}),s.jsx("div",{className:"text-gray-900 text-right break-words",children:String(B)||""})]},M.id)})})]})]}):null})]})},g1=e=>{if(!e)return!1;const t=new Date(e),n=new Date;return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()},nZ=()=>{const{user:e}=Se(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[a,l]=b.useState("appointments"),[u,d]=b.useState(null),[m,h]=b.useState(""),[f,g]=b.useState({});b.useEffect(()=>{x()},[]);const x=async()=>{const{data:C}=await Hr(e==null?void 0:e.id),U=(C||[]).filter(Z=>Z.assigned_to===(e==null?void 0:e.id));n(U),i(!1)},j=C=>C.status==="completed"&&!(C.report&&String(C.report).trim().length>0)?"in_progress":C.status,w=b.useMemo(()=>t.filter(C=>g1(C.due_date)&&!!C.patient),[t]),S=b.useMemo(()=>t.filter(C=>g1(C.due_date)&&!C.patient),[t]),_=C=>{if(!C)return!1;const U=new Date(C),Z=new Date;return U.setHours(0,0,0,0)>Z.setHours(0,0,0,0)},N=C=>{if(!C)return!1;const U=new Date(C),Z=new Date;return U.setHours(0,0,0,0)<Z.setHours(0,0,0,0)},v=b.useMemo(()=>t.filter(C=>!!C.patient&&_(C.due_date)&&j(C)!=="completed"&&C.status!=="cancelled"),[t]),k=b.useMemo(()=>t.filter(C=>!!C.patient&&N(C.due_date)&&j(C)!=="completed"&&C.status!=="cancelled"),[t]),O=b.useMemo(()=>t.filter(C=>!!C.patient&&C.status==="completed"&&!!(C.report&&String(C.report).trim().length>0)),[t]),A=b.useMemo(()=>t.filter(C=>!C.patient&&_(C.due_date)&&j(C)!=="completed"&&C.status!=="cancelled"),[t]),E=b.useMemo(()=>t.filter(C=>!C.patient&&N(C.due_date)&&j(C)!=="completed"&&C.status!=="cancelled"),[t]),I=b.useMemo(()=>t.filter(C=>!C.patient&&C.status==="completed"&&!!(C.report&&String(C.report).trim().length>0)),[t]),$=async C=>{await Nr(C.id,{status:"in_progress"}),x()},D=C=>{d(C),h(C.report||""),g(C.form_responses||{})},M=async()=>{u&&(await Nr(u.id,{status:"completed",report:m,form_responses:f}),d(null),h(""),g({}),x())},z=a==="appointments"?w:S,B=({title:C,items:U})=>s.jsxs("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:C}),U.length===0?s.jsx("div",{className:"text-gray-500 text-sm",children:"No items."}):s.jsx("div",{className:"space-y-3",children:U.map(Z=>s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:Z.title}),s.jsx("div",{className:"text-gray-600 mt-1",children:Z.description}),s.jsxs("div",{className:"text-gray-700 mt-2",children:["Due ",Z.due_date?new Date(Z.due_date).toLocaleDateString():""," ",Z.patient&&s.jsxs("span",{children:[" Patient: ",Z.patient.name]})]})]}),s.jsx("div",{className:"flex gap-2",children:j(Z)!=="completed"&&Z.status!=="cancelled"&&s.jsx("button",{onClick:()=>D(Z),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Open"})})]})},Z.id))})]});return r?s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Tasks"}),s.jsxs("div",{className:"inline-flex rounded-lg overflow-hidden border border-gray-200",children:[s.jsxs("button",{className:`px-4 py-2 text-sm flex items-center gap-2 ${a==="appointments"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>l("appointments"),children:[s.jsx(Cs,{className:"w-4 h-4"})," Todays Appointments"]}),s.jsxs("button",{className:`px-4 py-2 text-sm border-l border-gray-200 flex items-center gap-2 ${a==="todos"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>l("todos"),children:[s.jsx(wM,{className:"w-4 h-4"})," Todays ToDo"]})]})]}),z.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(Ur,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),"No tasks for today in this tab."]}):s.jsx("div",{className:"space-y-4",children:z.map(C=>s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-5 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:C.title}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-3",children:[s.jsx(gn,{className:"w-4 h-4"})," Due ",C.due_date?new Date(C.due_date).toLocaleDateString():"",C.patient&&s.jsxs("span",{children:[" Patient: ",C.patient.name]})]}),C.report&&s.jsxs("div",{className:"text-gray-700 bg-gray-50 border border-gray-200 rounded p-3 mt-3",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Submitted report"}),s.jsx("div",{children:C.report})]})]}),s.jsxs("div",{className:"flex gap-2",children:[j(C)==="pending"&&s.jsx("button",{onClick:()=>$(C),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Start"}),j(C)!=="completed"&&C.status!=="cancelled"&&s.jsx("button",{onClick:()=>D(C),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Open"})]})]})},C.id))}),a==="appointments"?s.jsxs(s.Fragment,{children:[s.jsx(B,{title:"Upcoming Appointments",items:v}),s.jsx(B,{title:"Overdue Appointments",items:k}),s.jsx(B,{title:"Finished Appointments",items:O})]}):s.jsxs(s.Fragment,{children:[s.jsx(B,{title:"Upcoming ToDo",items:A}),s.jsx(B,{title:"Overdue ToDo",items:E}),s.jsx(B,{title:"Finished ToDo",items:I})]}),s.jsx(Tl,{open:!!u,title:u?`Complete Task: ${u.title}`:"",onClose:()=>d(null),children:s.jsxs("div",{className:"space-y-4",children:[(u==null?void 0:u.form_fields)&&u.form_fields.length>0&&s.jsx("div",{className:"space-y-3",children:u.form_fields.map(C=>{const U=f[C.id]??"",Z=q=>g(R=>({...R,[C.id]:q}));switch(C.type){case"textarea":return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[C.label,C.required&&" *"]}),s.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-lg p-2",value:U,onChange:q=>Z(q.target.value)})]},C.id);case"number":case"date":case"text":return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[C.label,C.required&&" *"]}),s.jsx("input",{type:C.type,className:"w-full border border-gray-300 rounded-lg p-2",value:U,onChange:q=>Z(q.target.value)})]},C.id);case"select":return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[C.label,C.required&&" *"]}),s.jsxs("select",{className:"w-full border border-gray-300 rounded-lg p-2",value:U,onChange:q=>Z(q.target.value),children:[s.jsx("option",{value:"",children:"Select"}),(C.options||[]).map(q=>s.jsx("option",{value:q,children:q},q))]})]},C.id);case"checkbox":return s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-1",children:[C.label,C.required&&" *"]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:(C.options||[]).map(q=>{const R=Array.isArray(U)?U:[],Y=R.includes(q);return s.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:Y,onChange:G=>{const re=new Set(R);G.target.checked?re.add(q):re.delete(q),Z(Array.from(re))}})," ",q]},q)})})]},C.id);case"radio":return s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-1",children:[C.label,C.required&&" *"]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:(C.options||[]).map(q=>s.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:C.id,checked:U===q,onChange:()=>Z(q)})," ",q]},q))})]},C.id);default:return null}})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Report / Notes"}),s.jsx("textarea",{value:m,onChange:C=>h(C.target.value),rows:4,className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500",placeholder:"Write your visit notes, actions taken, observations, etc."})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-lg",onClick:()=>d(null),children:"Cancel"}),s.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg",onClick:M,children:"Submit & Complete"})]})]})})]})},Tm=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16"],rZ=({onClose:e,onAreaChanged:t})=>{const{user:n}=Se(),[r,i]=b.useState([]),[a,l]=b.useState(!0),[u,d]=b.useState(!1),[m,h]=b.useState([]);b.useState(null);const[f,g]=b.useState(!1),[x,j]=b.useState(""),[w,S]=b.useState(Tm[0]),[_,N]=b.useState(null),[v,k]=b.useState(null),O=b.useCallback(async()=>{l(!0);const{data:C,error:U}=await tc();!U&&C&&i(C),l(!1)},[]);b.useEffect(()=>{O()},[O]),b.useEffect(()=>{_?ZH(_.id).then(C=>{k(C)}):k(null)},[_]);const A=()=>{d(!0),h([])},E=()=>{m.length>=3?g(!0):(alert("Please draw at least 3 points to create an area"),d(!1),h([]))},I=()=>{d(!1),h([])},$=async()=>{if(!x.trim()){alert("Please enter a name for the area");return}if(m.length<3){alert("Area must have at least 3 points");return}const C={type:"Polygon",coordinates:[[...m.map(q=>[q[0],q[1]]),m[0]].map(q=>[q[0],q[1]])]},{data:U,error:Z}=await FH({name:x,color:w,geometry:C,created_by:(n==null?void 0:n.id)||""});if(Z){console.error("Error creating area:",Z),alert("Failed to create area: "+Z.message);return}g(!1),d(!1),h([]),j(""),S(Tm[0]),await O(),t&&t()},D=async C=>{if(!confirm("Are you sure you want to delete this area? Volunteers and patients will be unassigned."))return;const{error:U}=await HH(C);if(U){console.error("Error deleting area:",U),alert("Failed to delete area: "+U.message);return}N(null),await O(),t&&t()},M=async(C,U)=>{const{error:Z}=await UH(C,{color:U});if(Z){console.error("Error updating area color:",Z);return}await O(),t&&t()},z=()=>(my({click(C){u&&h(U=>[...U,[C.latlng.lat,C.latlng.lng]])}}),null),B=()=>{const C=hy();return b.useEffect(()=>{C.setView([13.793,100.321],13)},[C]),null};return a?s.jsx("div",{className:"py-10 text-center",children:"Loading areas..."}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Map Area Management"}),s.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:s.jsx(Os,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-4 flex items-center gap-3",children:u?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:E,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[s.jsx(La,{className:"w-4 h-4"}),"Finish Drawing"]}),s.jsxs("button",{onClick:I,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:[s.jsx(Os,{className:"w-4 h-4"}),"Cancel"]}),s.jsxs("span",{className:"text-sm text-gray-600",children:["Click on map to add points (",m.length," points)"]})]}):s.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(Yt,{className:"w-4 h-4"}),"Draw New Area"]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-3",children:s.jsx("div",{className:"h-[600px] w-full border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs(Yf,{center:[13.793,100.321],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(B,{}),s.jsx(Xf,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(z,{}),r.map(C=>{var Z,q;if(!((q=(Z=C.geometry)==null?void 0:Z.coordinates)!=null&&q[0]))return null;const U=C.geometry.coordinates[0].map(R=>[R[0],R[1]]);return s.jsx(Ol,{positions:U,pathOptions:{color:C.color,fillColor:C.color,fillOpacity:(_==null?void 0:_.id)===C.id?.4:.2,weight:(_==null?void 0:_.id)===C.id?3:2},eventHandlers:{click:()=>N(C)},children:s.jsx(sa,{children:s.jsxs("div",{className:"p-2",children:[s.jsx("div",{className:"font-semibold text-lg mb-2",children:C.name}),v&&(_==null?void 0:_.id)===C.id&&s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("div",{children:["Volunteers: ",v.volunteerCount]}),s.jsxs("div",{children:["Patients: ",v.patientCount]})]})]})})},`area-polygon-${C.id}`)}),u&&m.length>0&&s.jsxs(s.Fragment,{children:[m.length>=2&&s.jsx(Ol,{positions:m,pathOptions:{color:w,fillColor:w,fillOpacity:.3,weight:2,dashArray:"5, 5"}}),m.map((C,U)=>s.jsx(WC,{center:C,radius:8,pathOptions:{color:w,fillColor:w,fillOpacity:.8,weight:2}},`drawing-point-${U}`))]})]})})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Areas (",r.length,")"]}),s.jsxs("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:[r.map(C=>s.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-all ${(_==null?void 0:_.id)===C.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>N(C),children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:C.color}}),s.jsx("span",{className:"font-medium text-sm",children:C.name})]})}),(_==null?void 0:_.id)===C.id&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600",children:"Color:"}),s.jsx("input",{type:"color",value:C.color,onChange:U=>M(C.id,U.target.value),className:"w-8 h-6 rounded cursor-pointer"})]}),s.jsxs("button",{onClick:U=>{U.stopPropagation(),D(C.id)},className:"w-full inline-flex items-center justify-center gap-2 px-3 py-1.5 text-xs bg-red-50 text-red-700 rounded hover:bg-red-100",children:[s.jsx(Rl,{className:"w-3 h-3"}),"Delete Area"]})]})]},C.id)),r.length===0&&s.jsx("div",{className:"text-sm text-gray-500 text-center py-8",children:'No areas yet. Click "Draw New Area" to create one.'})]})]})})]})]})]}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Name Your Area"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area Name"}),s.jsx("input",{type:"text",value:x,onChange:C=>j(C.target.value),placeholder:"e.g., North District Zone 1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area Color"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:w,onChange:C=>S(C.target.value),className:"w-12 h-10 rounded cursor-pointer"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Tm.map(C=>s.jsx("button",{onClick:()=>S(C),className:`w-8 h-8 rounded ${w===C?"ring-2 ring-blue-500":""}`,style:{backgroundColor:C}},C))})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{g(!1),d(!1),h([])},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Area"})]})]})]})})]})},Io=[13.793,100.321];function Am(e,t){const n=m=>m*Math.PI/180,i=n(t[0]-e[0]),a=n(t[1]-e[1]),l=n(e[0]),u=n(t[0]),d=Math.sin(i/2)*Math.sin(i/2)+Math.cos(l)*Math.cos(u)*Math.sin(a/2)*Math.sin(a/2);return 2*6371*Math.asin(Math.sqrt(d))}const iZ=({onBack:e})=>{const{user:t}=Se(),[n,r]=b.useState("all"),[i,a]=b.useState(10),[l,u]=b.useState([]),[d,m]=b.useState(null),[h,f]=b.useState(null),[g,x]=b.useState(Io),[j,w]=b.useState([]),[S,_]=b.useState([]),[N,v]=b.useState([]),[k,O]=b.useState(""),[A,E]=b.useState(null),[I,$]=b.useState([]),[D,M]=b.useState(!0),[z,B]=b.useState(!1);b.useEffect(()=>{(async()=>{const{data:H}=await HM();u(H||[])})()},[]);const C=b.useCallback(async()=>{const{data:H}=await tc();$(H||[])},[]);b.useEffect(()=>{C()},[C]),b.useEffect(()=>{(async()=>{if((t==null?void 0:t.role)==="volunteer"){const[{data:H},ee]=await Promise.all([Bt(),un()]),Q=(ee.data||[]).find(me=>me.user_id===t.id),ae=((Q==null?void 0:Q.area_name)||"").toLowerCase();O((Q==null?void 0:Q.area_name)||""),E(Q!=null&&Q.lat&&(Q!=null&&Q.lng)?[Q.lat,Q.lng]:null);const Te=t.full_name,Ft=(H||[]).filter(me=>typeof me.assigned_vhv_name=="string"&&me.assigned_vhv_name.toLowerCase().includes(Te.toLowerCase()));w(Ft);const se=(H||[]).filter(me=>(me.area_name||"").toLowerCase()===ae);_(se);const ge=(ee.data||[]).filter(me=>(me.area_name||"").toLowerCase()===ae);v(ge)}else if((t==null?void 0:t.role)==="doctor"||(t==null?void 0:t.role)==="patient"){const[{data:H},ee]=await Promise.all([Bt(),un()]);_(H||[]),v(ee.data||[])}})()},[t]);const U=b.useMemo(()=>(l||[]).filter(H=>n==="patients"||n!=="all"&&n!=="patients"&&H.type!==n||H.type==="volunteer"?!1:Am(d||A||Io,[H.lat,H.lng])<=i),[l,n,i,d,A]),Z=b.useMemo(()=>{const H=d||A||Io;let ee=[];if((t==null?void 0:t.role)==="volunteer")ee=n==="patients"?j||[]:S||[];else if((t==null?void 0:t.role)==="doctor")ee=S||[];else return[];return ee.filter(Q=>typeof Q.lat=="number"&&typeof Q.lng=="number").filter(Q=>Am(H,[Q.lat,Q.lng])<=i)},[j,S,n,d,A,i,t]),q=b.useMemo(()=>{if(n==="patients")return[];if(n==="volunteer"||n==="all"){const H=d||A||Io;return(N||[]).filter(ee=>typeof ee.lat=="number"&&typeof ee.lng=="number").filter(ee=>Am(H,[ee.lat,ee.lng])<=i)}return[]},[N,n,d,A,i]),R=H=>H==="volunteer"?"#22c55e":H==="center"?"#0ea5e9":"#ef4444",Y=b.useMemo(()=>tl.divIcon({className:"custom-my-location-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;background:#2563eb;border:2px solid #fff;box-shadow:0 0 0 3px rgba(37,99,235,0.25);color:#fff;font-size:16px;line-height:1"></div>',iconSize:[28,28],iconAnchor:[14,14],popupAnchor:[0,-14]}),[]),G=()=>{if(f(null),!("geolocation"in navigator)){f("Geolocation not supported by this browser");return}navigator.geolocation.getCurrentPosition(H=>{const ee=[H.coords.latitude,H.coords.longitude];m(ee),x(ee)},H=>{f(H.message||"Unable to get current location")},{enableHighAccuracy:!0,timeout:1e4})},re=()=>{x(Io)},ne=({center:H})=>{const ee=hy();return b.useEffect(()=>{ee.setView(H)},[H]),null};return z?s.jsx(rZ,{onClose:()=>B(!1),onAreaChanged:C}):s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(Xd,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:s.jsx(Qd,{className:"w-6 h-6 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Nearby Care Network"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:n,onChange:H=>r(H.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"volunteer",children:"Volunteers"}),s.jsx("option",{value:"center",children:"Centers"}),s.jsx("option",{value:"hospital",children:"Hospitals"}),((t==null?void 0:t.role)==="volunteer"||(t==null?void 0:t.role)==="doctor")&&s.jsx("option",{value:"patients",children:(t==null?void 0:t.role)==="doctor"?"Patients":"My Patients"})]}),s.jsxs("select",{value:i,onChange:H=>a(parseInt(H.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[s.jsx("option",{value:5,children:"5 km"}),s.jsx("option",{value:10,children:"10 km"}),s.jsx("option",{value:20,children:"20 km"})]}),s.jsx("button",{onClick:G,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",children:"Use My Location"}),s.jsx("button",{onClick:re,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",children:"Reset"}),s.jsxs("button",{onClick:()=>M(!D),className:`px-3 py-2 text-sm rounded-lg border ${D?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 hover:bg-gray-50"}`,children:[D?"Hide":"Show"," Areas"]}),(t==null?void 0:t.role)==="doctor"&&s.jsxs("button",{onClick:()=>B(!0),className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 inline-flex items-center gap-2",children:[s.jsx(PM,{className:"w-4 h-4"}),"Manage Areas"]})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"h-[600px] w-full border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs(Yf,{center:g,zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(ne,{center:g}),s.jsx(Xf,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx($H,{center:g,radius:i*1e3,pathOptions:{color:"#0ea5e9",weight:1}}),D&&I.map(H=>{var Q,ae;if(!((ae=(Q=H.geometry)==null?void 0:Q.coordinates)!=null&&ae[0]))return null;const ee=H.geometry.coordinates[0].map(Te=>[Te[0],Te[1]]);return s.jsx(Ol,{positions:ee,pathOptions:{color:H.color,fillColor:H.color,fillOpacity:.15,weight:2},children:s.jsx(sa,{children:s.jsx("div",{className:"font-semibold",children:H.name})})},`area-${H.id}`)}),d&&s.jsx(us,{position:d,icon:Y,children:s.jsx(sa,{children:s.jsx("div",{className:"font-semibold",children:"You are here"})})}),!d&&A&&s.jsx(us,{position:A,icon:Y,children:s.jsx(sa,{children:s.jsx("div",{className:"font-semibold",children:"Your saved location"})})}),U.map(H=>s.jsx(WC,{center:[H.lat,H.lng],radius:10,pathOptions:{color:R(H.type),weight:2,fillOpacity:.6},children:s.jsx(sa,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-semibold",children:H.name}),s.jsx("div",{className:"text-xs text-gray-600 capitalize",children:H.type}),H.address&&s.jsx("div",{className:"text-xs text-gray-700",children:H.address}),H.phone&&s.jsxs("div",{className:"text-xs text-gray-700",children:[" ",H.phone]})]})})},H.id)),((t==null?void 0:t.role)==="volunteer"||(t==null?void 0:t.role)==="doctor")&&(n==="all"||n==="patients")&&Z.map(H=>s.jsx(us,{position:[H.lat,H.lng],icon:tl.divIcon({className:"custom-patient-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#a21caf;border:2px solid #fff;box-shadow:0 0 0 3px rgba(162,28,175,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),children:s.jsx(sa,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-semibold",children:H.name}),s.jsx("div",{className:"text-xs text-gray-600",children:"Patient"}),s.jsxs("div",{className:"text-xs text-gray-700",children:["MRN: ",H.medical_record_number]}),H.phone_number&&s.jsxs("div",{className:"text-xs text-gray-700",children:[" ",H.phone_number]})]})})},`pat-${H.id}`)),q.map(H=>s.jsx(us,{position:[H.lat,H.lng],icon:tl.divIcon({className:"custom-volunteer-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#22c55e;border:2px solid #fff;box-shadow:0 0 0 3px rgba(34,197,94,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),children:s.jsx(sa,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-semibold",children:H.name}),s.jsx("div",{className:"text-xs text-gray-600",children:"Volunteer"}),s.jsxs("div",{className:"text-xs text-gray-700",children:["Code: ",H.volunteer_code]}),H.email&&s.jsx("div",{className:"text-xs text-gray-700",children:H.email}),H.phone&&s.jsxs("div",{className:"text-xs text-gray-700",children:[" ",H.phone]})]})})},`vol-${H.id}`))]})}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"About this map"}),s.jsxs("div",{className:"text-blue-700 text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Center:"})," Salaya, Nakhon Pathom"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Filters:"})," ",n,"  ",i," km radius"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Legend:"})," ",s.jsx("span",{className:"text-green-700",children:"Volunteers"}),", ",s.jsx("span",{className:"text-sky-700",children:"Centers"}),", ",s.jsx("span",{className:"text-red-700",children:"Hospitals"})]}),h&&s.jsxs("p",{className:"text-red-700",children:["Location error: ",h]})]})]})]})]})})},aZ=({record:e,patientId:t,onClose:n})=>{const{user:r}=Se(),[i,a]=b.useState(!1),[l,u]=b.useState(null),[d,m]=b.useState([]),[h,f]=b.useState({patient_id:t||"",record_date:new Date().toISOString().split("T")[0],temperature:"",pulse:"",blood_pressure:"",weight:"",blood_sugar:"",oxygen_saturation:"",pain_level:0,fatigue_level:0,mood:"good",appetite:"good",sleep_quality:"good",symptoms_description:"",medications_taken:"",activities:"",notes:"",dr_instructions:"",custom_fields:[],custom_values:{}}),[g,x]=b.useState([]);b.useEffect(()=>{(r==null?void 0:r.role)==="patient"?j():((r==null?void 0:r.role)==="doctor"||(r==null?void 0:r.role)==="volunteer")&&w(),e&&(f({patient_id:e.patient_id,record_date:e.record_date,temperature:e.temperature||"",pulse:e.pulse||"",blood_pressure:e.blood_pressure||"",weight:e.weight||"",blood_sugar:e.blood_sugar||"",oxygen_saturation:e.oxygen_saturation||"",pain_level:e.pain_level||0,fatigue_level:e.fatigue_level||0,mood:e.mood||"good",appetite:e.appetite||"good",sleep_quality:e.sleep_quality||"good",symptoms_description:e.symptoms_description||"",medications_taken:e.medications_taken||"",activities:e.activities||"",notes:e.notes||"",dr_instructions:e.dr_instructions||"",custom_fields:e.custom_fields||[],custom_values:e.custom_values||{}}),x((e.custom_fields||[]).map(k=>({...k,options:(k.options||[]).join(", ")}))))},[e,r]);const j=async()=>{if(r)try{const{data:k,error:O}=await ai(r.id);!O&&k&&(u(k),f(A=>({...A,patient_id:k.id})))}catch(k){console.error("Error fetching patient profile:",k)}},w=async()=>{try{const{data:k,error:O}=await Bt();if(!O&&k){if((r==null?void 0:r.role)==="volunteer"){const A=(r.full_name||"").toLowerCase(),E=(k||[]).filter(I=>typeof I.assigned_vhv_name=="string"&&I.assigned_vhv_name.toLowerCase().includes(A));m(E)}else m(k);t&&f(A=>({...A,patient_id:t}))}}catch(k){console.error("Error fetching patients:",k)}},S=async k=>{k.preventDefault(),a(!0);try{const O=h.patient_id||t||(l==null?void 0:l.id);if(!O){alert("Please select a patient before saving the record."),a(!1);return}if(e){const{error:A}=await XM(e.id,{...h,custom_fields:g.map(E=>({id:E.id,label:E.label,type:E.type,options:(E.options||"").split(",").map(I=>I.trim()).filter(Boolean)}))});if(A){console.error("Error updating daily record:",A);return}}else{const{error:A}=await YM({...h,custom_fields:g.map(E=>({id:E.id,label:E.label,type:E.type,options:(E.options||"").split(",").map(I=>I.trim()).filter(Boolean)})),patient_id:O,recorded_by:(r==null?void 0:r.id)||""});if(A){console.error("Error creating daily record:",A);return}if((r==null?void 0:r.role)==="patient")try{const E=[],I=C=>{const U=(C||"").match(/-?\d+\.?\d*/);return U?parseFloat(U[0]):NaN},$=I(h.temperature);Number.isNaN($)||(/c/i.test(h.temperature)?$*9/5+32:$)>=100.4&&E.push(`High temperature: ${h.temperature}`);const D=I(h.pulse);!Number.isNaN(D)&&(D>=110||D<=50)&&E.push(`Abnormal pulse: ${h.pulse}`);const M=(h.blood_pressure||"").match(/(\d+)\D+(\d+)/);if(M){const C=parseInt(M[1],10),U=parseInt(M[2],10);(C>=140||U>=90)&&E.push(`High blood pressure: ${h.blood_pressure}`),(C<=90||U<=60)&&E.push(`Low blood pressure: ${h.blood_pressure}`)}const z=I(h.blood_sugar);!Number.isNaN(z)&&z>=200&&E.push(`High blood sugar: ${h.blood_sugar}`);const B=I(h.oxygen_saturation);if(!Number.isNaN(B)&&B>0&&B<92&&E.push(`Low SpO: ${h.oxygen_saturation}`),h.pain_level>=8&&E.push(`Severe pain level: ${h.pain_level}/10`),h.fatigue_level>=8&&E.push(`Severe fatigue: ${h.fatigue_level}/10`),E.length>0){const{data:C}=await Ct(),{data:U}=await un(),Z=l,q=((Z==null?void 0:Z.assigned_vhv_name)||"").toLowerCase(),R=(U||[]).find(re=>(re.name||"").toLowerCase().includes(q)),Y=((Z==null?void 0:Z.assigned_doctor)||"").toLowerCase(),G=(C||[]).filter(re=>re.role==="doctor"&&(re.full_name||"").toLowerCase().includes(Y));if(R!=null&&R.user_id){const re="Alert: Abnormal Daily Health Measurement",ne=`Patient: ${Z==null?void 0:Z.name}
MRN: ${Z==null?void 0:Z.medical_record_number}
Date: ${h.record_date}

Issues:
- ${E.join(`
- `)}

Action: Please review and schedule an appointment with ${(Z==null?void 0:Z.assigned_doctor)||"doctor"} as needed.`;await mr({sender_id:r.id,recipient_id:R.user_id,subject:re,content:ne});const H=B&&B<90||$&&!Number.isNaN($)&&(/c/i.test(h.temperature)?$>=40:$>=104)?"urgent":"high";if(await zl({title:"Schedule appointment for patient",description:`Auto-generated from daily record.

${E.join(`
`)}`,priority:H,status:"pending",assigned_to:R.user_id,assigned_by:r.id,patient_id:O,due_date:new Date().toISOString().slice(0,10)}),G.length>0){const ee=G[0];await mr({sender_id:r.id,recipient_id:ee.id,subject:"FYI: Abnormal Daily Record",content:`Patient ${Z==null?void 0:Z.name} submitted daily record with issues:
- ${E.join(`
- `)}
VHV has been asked to schedule an appointment.`})}}}}catch(E){console.warn("Alerting VHV failed:",E)}}n()}catch(O){console.error("Error saving daily record:",O)}finally{a(!1)}},_=k=>{const{name:O,value:A,type:E}=k.target;f(E==="range"||E==="number"?{...h,[O]:parseInt(A)||0}:{...h,[O]:A})},N=k=>k===0?"None":k<=3?"Mild":k<=6?"Moderate":k<=8?"Severe":"Extreme",v=k=>k===0?"text-green-600":k<=3?"text-yellow-600":k<=6?"text-orange-600":k<=8?"text-red-600":"text-red-800";return s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(Xd,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:s.jsx(Kr,{className:"w-6 h-6 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Daily Record":"New Daily Record"})]})]})}),s.jsxs("form",{onSubmit:S,className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 pb-2 border-b border-gray-200",children:"Basic Information"}),((r==null?void 0:r.role)==="doctor"||(r==null?void 0:r.role)==="volunteer")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Patient *"}),s.jsxs("select",{name:"patient_id",required:!0,value:h.patient_id,onChange:_,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"",children:"Choose a patient..."}),d.map(k=>s.jsx("option",{value:k.id,children:k.name},k.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Record Date *"}),s.jsx("input",{type:"date",name:"record_date",required:!0,value:h.record_date,onChange:_,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsx("h4",{className:"text-md font-semibold text-gray-800 mt-6",children:"Vital Signs"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),s.jsx("input",{type:"text",name:"temperature",value:h.temperature,onChange:_,placeholder:"e.g., 98.6F",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pulse"}),s.jsx("input",{type:"text",name:"pulse",value:h.pulse,onChange:_,placeholder:"e.g., 72 bpm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Pressure"}),s.jsx("input",{type:"text",name:"blood_pressure",value:h.blood_pressure,onChange:_,placeholder:"e.g., 120/80 mmHg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight"}),s.jsx("input",{type:"text",name:"weight",value:h.weight,onChange:_,placeholder:"e.g., 70 kg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Sugar"}),s.jsx("input",{type:"text",name:"blood_sugar",value:h.blood_sugar,onChange:_,placeholder:"e.g., 110 mg/dL",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Oxygen Saturation"}),s.jsx("input",{type:"text",name:"oxygen_saturation",value:h.oxygen_saturation,onChange:_,placeholder:"e.g., 98%",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 pb-2 border-b border-gray-200",children:"Symptoms & Well-being"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Pain Level: ",s.jsxs("span",{className:`font-semibold ${v(h.pain_level)}`,children:[h.pain_level," - ",N(h.pain_level)]})]}),s.jsx("input",{type:"range",name:"pain_level",min:"0",max:"10",value:h.pain_level,onChange:_,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"0 - No Pain"}),s.jsx("span",{children:"10 - Extreme Pain"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor Instructions"}),s.jsx("textarea",{name:"dr_instructions",rows:3,value:h.dr_instructions,onChange:_,readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:"Guidance for patient/volunteer (visible to them, not editable)",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all ${(r==null?void 0:r.role)!=="doctor"?"bg-gray-50":""}`})]}),(r==null?void 0:r.role)==="doctor"&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Fields"}),s.jsxs("div",{className:"space-y-3",children:[g.map((k,O)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-center",children:[s.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Label",value:k.label,onChange:A=>{const E=A.target.value;x(I=>I.map(($,D)=>D===O?{...$,label:E}:$))}}),s.jsxs("select",{className:"px-3 py-2 border rounded",value:k.type,onChange:A=>{const E=A.target.value;x(I=>I.map(($,D)=>D===O?{...$,type:E}:$))},children:[s.jsx("option",{value:"text",children:"Text"}),s.jsx("option",{value:"textarea",children:"Textarea"}),s.jsx("option",{value:"number",children:"Number"}),s.jsx("option",{value:"date",children:"Date"}),s.jsx("option",{value:"select",children:"Select"}),s.jsx("option",{value:"checkbox",children:"Checkbox"}),s.jsx("option",{value:"radio",children:"Radio"})]}),s.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Options (comma separated)",value:k.options||"",onChange:A=>{const E=A.target.value;x(I=>I.map(($,D)=>D===O?{...$,options:E}:$))}}),s.jsx("button",{type:"button",className:"text-red-600 text-sm",onClick:()=>x(A=>A.filter((E,I)=>I!==O)),children:"Remove"})]},k.id)),s.jsx("button",{type:"button",className:"px-3 py-2 border rounded text-sm",onClick:()=>x(k=>[...k,{id:"cf-"+Math.random().toString(36).slice(2,9),label:"",type:"text",options:""}]),children:"+ Add Field"})]})]}),(g.length>0||(h.custom_fields||[]).length>0)&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Values"}),s.jsx("div",{className:"space-y-3",children:(((r==null?void 0:r.role)==="doctor"?g:h.custom_fields)||[]).map(k=>{const O=k.id,A=h.custom_values[O]??"",E=I=>f($=>({...$,custom_values:{...$.custom_values||{},[O]:I}}));return k.type==="textarea"?s.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border rounded",value:A,onChange:I=>E(I.target.value),readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:k.label},O):k.type==="number"?s.jsx("input",{type:"number",className:"w-full px-3 py-2 border rounded",value:A,onChange:I=>E(I.target.value),readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:k.label},O):k.type==="date"?s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:A,onChange:I=>E(I.target.value),readOnly:(r==null?void 0:r.role)!=="doctor"},O):k.type==="select"?s.jsxs("select",{className:"w-full px-3 py-2 border rounded",value:A,onChange:I=>E(I.target.value),disabled:(r==null?void 0:r.role)!=="doctor",children:[s.jsx("option",{value:"",children:"Select"}),(k.options||"").split(",").map(I=>I.trim()).filter(Boolean).map(I=>s.jsx("option",{value:I,children:I},I))]},O):k.type==="checkbox"?s.jsx("div",{className:"flex flex-wrap gap-3",children:(k.options||"").split(",").map(I=>I.trim()).filter(Boolean).map(I=>{const $=Array.isArray(A)?A:[],D=$.includes(I);return s.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:D,disabled:(r==null?void 0:r.role)!=="doctor",onChange:M=>{const z=new Set($);M.target.checked?z.add(I):z.delete(I),E(Array.from(z))}})," ",I]},I)})},O):k.type==="radio"?s.jsx("div",{className:"flex flex-wrap gap-3",children:(k.options||"").split(",").map(I=>I.trim()).filter(Boolean).map(I=>s.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:O,value:I,checked:A===I,disabled:(r==null?void 0:r.role)!=="doctor",onChange:()=>E(I)})," ",I]},I))},O):s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:A,onChange:I=>E(I.target.value),readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:k.label},O)})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Fatigue Level: ",s.jsxs("span",{className:`font-semibold ${v(h.fatigue_level)}`,children:[h.fatigue_level," - ",N(h.fatigue_level)]})]}),s.jsx("input",{type:"range",name:"fatigue_level",min:"0",max:"10",value:h.fatigue_level,onChange:_,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"0 - No Fatigue"}),s.jsx("span",{children:"10 - Extreme Fatigue"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mood"}),s.jsxs("select",{name:"mood",value:h.mood,onChange:_,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"excellent",children:"Excellent"}),s.jsx("option",{value:"good",children:"Good"}),s.jsx("option",{value:"fair",children:"Fair"}),s.jsx("option",{value:"poor",children:"Poor"}),s.jsx("option",{value:"very_poor",children:"Very Poor"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appetite"}),s.jsxs("select",{name:"appetite",value:h.appetite,onChange:_,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"excellent",children:"Excellent"}),s.jsx("option",{value:"good",children:"Good"}),s.jsx("option",{value:"fair",children:"Fair"}),s.jsx("option",{value:"poor",children:"Poor"}),s.jsx("option",{value:"very_poor",children:"Very Poor"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sleep Quality"}),s.jsxs("select",{name:"sleep_quality",value:h.sleep_quality,onChange:_,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"excellent",children:"Excellent"}),s.jsx("option",{value:"good",children:"Good"}),s.jsx("option",{value:"fair",children:"Fair"}),s.jsx("option",{value:"poor",children:"Poor"}),s.jsx("option",{value:"very_poor",children:"Very Poor"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Symptoms Description"}),s.jsx("textarea",{name:"symptoms_description",rows:3,value:h.symptoms_description,onChange:_,placeholder:"Describe any symptoms you're experiencing...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medications Taken"}),s.jsx("textarea",{name:"medications_taken",rows:2,value:h.medications_taken,onChange:_,placeholder:"List medications taken today...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activities"}),s.jsx("textarea",{name:"activities",rows:2,value:h.activities,onChange:_,placeholder:"Describe your activities today...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),s.jsx("textarea",{name:"notes",rows:3,value:h.notes,onChange:_,placeholder:"Any additional notes or observations...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:n,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(La,{className:"w-5 h-5"}),s.jsx("span",{children:e?"Update Record":"Save Record"})]})})]})]})]})})},sZ=()=>{const{user:e}=Se(),[t,n]=b.useState([]),[r,i]=b.useState([]),[a,l]=b.useState(!0),[u,d]=b.useState(""),[m,h]=b.useState("all"),[f,g]=b.useState(!1),[x,j]=b.useState(null);b.useEffect(()=>{const E=localStorage.getItem("records_selected_patient");E&&(h(E),localStorage.removeItem("records_selected_patient")),w(),(e==null?void 0:e.role)!=="patient"&&S()},[e]);const w=async()=>{try{const{data:E,error:I}=await GM(void 0,(e==null?void 0:e.role)==="patient"?e.id:void 0);if(I)console.error("Error fetching daily records:",I);else{let $=E||[];if((e==null?void 0:e.role)==="volunteer"){const D=(e.full_name||"").toLowerCase();$=$.filter(M=>M.patient&&typeof M.patient.assigned_vhv_name=="string"&&M.patient.assigned_vhv_name.toLowerCase().includes(D))}n($)}}catch(E){console.error("Error fetching daily records:",E)}finally{l(!1)}},S=async()=>{try{const{data:E,error:I}=await Bt();if(I)console.error("Error fetching patients:",I);else if((e==null?void 0:e.role)==="volunteer"){const $=(e.full_name||"").toLowerCase(),D=(E||[]).filter(M=>typeof M.assigned_vhv_name=="string"&&M.assigned_vhv_name.toLowerCase().includes($));i(D)}else i(E||[])}catch(E){console.error("Error fetching patients:",E)}},_=E=>{j(E),g(!0)},N=async E=>{if(window.confirm("Are you sure you want to delete this daily record?"))try{const{error:I}=await QM(E);I?console.error("Error deleting record:",I):w()}catch(I){console.error("Error deleting record:",I)}},v=()=>{g(!1),j(null),w()},k=t.filter(E=>{var D,M,z;const I=((D=E.patient)==null?void 0:D.name.toLowerCase().includes(u.toLowerCase()))||((M=E.symptoms_description)==null?void 0:M.toLowerCase().includes(u.toLowerCase()))||((z=E.notes)==null?void 0:z.toLowerCase().includes(u.toLowerCase())),$=m==="all"||E.patient_id===m;return I&&$}),O=E=>{switch(E){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";case"poor":return"bg-orange-100 text-orange-800";case"very_poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=E=>!E||E===0?"text-green-600":E<=3?"text-yellow-600":E<=6?"text-orange-600":E<=8?"text-red-600":"text-red-800";return a?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin"})})}):f?s.jsx(aZ,{record:x,onClose:v}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Daily Records"}),s.jsxs("button",{onClick:()=>g(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Yt,{className:"w-5 h-5"}),s.jsx("span",{children:"Add Record"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search records...",value:u,onChange:E=>d(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(e==null?void 0:e.role)!=="patient"&&s.jsxs("select",{value:m,onChange:E=>h(E.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Patients"}),r.map(E=>s.jsxs("option",{value:E.id,children:[E.name," - ",E.medical_record_number]},E.id))]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:k.map(E=>{var I,$,D,M;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:s.jsx(Kr,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:(e==null?void 0:e.role)==="patient"?"My Record":(I=E.patient)==null?void 0:I.name}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsx("span",{children:new Date(E.record_date).toLocaleDateString()})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[((e==null?void 0:e.role)==="doctor"||E.recorded_by===(e==null?void 0:e.id))&&s.jsx("button",{onClick:()=>_(E),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit Record",children:s.jsx(R2,{className:"w-4 h-4"})}),((e==null?void 0:e.role)==="doctor"||E.recorded_by===(e==null?void 0:e.id))&&s.jsx("button",{onClick:()=>N(E.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Record",children:s.jsx(Rl,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Vital Signs"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[E.temperature&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Temp:"}),s.jsx("span",{className:"ml-1 font-medium",children:E.temperature})]}),E.pulse&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Pulse:"}),s.jsx("span",{className:"ml-1 font-medium",children:E.pulse})]}),E.blood_pressure&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"BP:"}),s.jsx("span",{className:"ml-1 font-medium",children:E.blood_pressure})]}),E.weight&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Weight:"}),s.jsx("span",{className:"ml-1 font-medium",children:E.weight})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Mood:"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(E.mood)}`,children:(($=E.mood)==null?void 0:$.replace("_"," ").charAt(0).toUpperCase())+((D=E.mood)==null?void 0:D.replace("_"," ").slice(1))})]}),E.pain_level!==void 0&&E.pain_level>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Pain Level:"}),s.jsxs("span",{className:`font-medium ${A(E.pain_level)}`,children:[E.pain_level,"/10"]})]}),E.fatigue_level!==void 0&&E.fatigue_level>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Fatigue:"}),s.jsxs("span",{className:`font-medium ${A(E.fatigue_level)}`,children:[E.fatigue_level,"/10"]})]}),E.symptoms_description&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Symptoms:"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:E.symptoms_description})]}),E.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Notes:"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:E.notes})]}),E.dr_instructions&&s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-sm font-semibold text-blue-900",children:"Doctor Instructions"}),s.jsx("div",{className:"text-sm text-blue-800 mt-1 whitespace-pre-wrap",children:E.dr_instructions})]}),Array.isArray(E.custom_fields)&&E.custom_fields.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-1",children:"Additional Information"}),s.jsx("div",{className:"space-y-1 text-sm",children:E.custom_fields.map(z=>{const B=E.custom_values?E.custom_values[z.id]:void 0,C=Array.isArray(B)?B.join(", "):B??"";return s.jsxs("div",{className:"flex justify-between gap-3",children:[s.jsx("span",{className:"text-gray-600",children:z.label}),s.jsx("span",{className:"text-gray-900 text-right break-words",children:String(C)||""})]},z.id)})})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-3 h-3"}),s.jsxs("span",{children:["Recorded by: ",(M=E.recorded_by_user)==null?void 0:M.full_name]})]}),s.jsxs("p",{className:"mt-1",children:["Created: ",new Date(E.created_at).toLocaleDateString()]})]})]},E.id)})}),k.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Kr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:u||m!=="all"?"No records found matching your filters.":"No daily records found."}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Start tracking daily symptoms and vital signs by creating your first record."})]})]})},oZ=()=>{const{user:e}=Se(),[t,n]=b.useState(!0),[r,i]=b.useState(null),[a,l]=b.useState([]),[u,d]=b.useState(!1),[m,h]=b.useState([]),[f,g]=b.useState({doctorId:"",date:"",time:"09:00",title:"",message:""}),[x,j]=b.useState(!1);b.useEffect(()=>{(async()=>{try{if(!(e!=null&&e.id))return;const[{data:v},{data:k}]=await Promise.all([ai(e.id),Ct()]),O=(v==null?void 0:v.id)||null;i(O);const A=(k||[]).filter($=>$.role==="doctor");h(A);const{data:E}=await Hr(),I=(E||[]).filter($=>$.patient_id===O);l(I)}finally{n(!1)}})()},[e]),b.useEffect(()=>{if(!r)return;const v=setInterval(async()=>{const{data:k}=await Hr(),O=(k||[]).filter(A=>A.patient_id===r);l(O)},8e3);return()=>clearInterval(v)},[r]);const w=b.useMemo(()=>{const v=new Date;return v.setHours(0,0,0,0),v.getTime()},[]),S=b.useMemo(()=>{const v=[],k=[],O=[],A=[],E=[];for(const $ of a){if(!$.due_date){E.push($);continue}const D=new Date($.due_date).getTime();$.status==="completed"?O.push($):$.status==="cancelled"?A.push($):D<w?v.push($):k.push($)}const I=($,D)=>{const M=$.due_date?new Date($.due_date).getTime():0,z=D.due_date?new Date(D.due_date).getTime():0;return M-z};return{overdue:v.sort(I),upcoming:k.sort(I),completed:O.sort(I),cancelled:A.sort(I),undated:E}},[a,w]),_=async v=>{if(!v||!window.confirm("Cancel this appointment?"))return;await Nr(v,{status:"cancelled"});const{data:k}=await Hr(),O=(k||[]).filter(A=>A.patient_id===r);l(O)},N=async v=>{if(v.preventDefault(),!(!r||!(e!=null&&e.id))&&!(!f.doctorId||!f.date)){j(!0);try{await zl({title:f.title||"Appointment Request",description:f.message||"Patient requested an appointment",priority:"medium",status:"pending",assigned_to:f.doctorId,assigned_by:e.id,patient_id:r,due_date:f.date,due_time:f.time}),await mr({sender_id:e.id,recipient_id:f.doctorId,subject:"Appointment Request",content:`Patient requests an appointment on ${f.date}.

Message: ${f.message||"(no additional message)"}
`}),d(!1),g({doctorId:"",date:"",time:"09:00",title:"",message:""});const{data:k}=await Hr(),O=(k||[]).filter(A=>A.patient_id===r);l(O),alert("Appointment request sent")}finally{j(!1)}}};return t?s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(Cs,{className:"w-6 h-6 text-blue-600"})," Appointments"]}),s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",onClick:()=>d(!0),children:[s.jsx(Yt,{className:"w-4 h-4"})," Request Appointment"]})]}),a.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(gn,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),"No appointments found."]}):s.jsxs("div",{className:"space-y-6",children:[S.overdue.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-red-700 mb-2",children:"Overdue"}),s.jsx("div",{className:"space-y-3",children:S.overdue.map(v=>s.jsx("div",{className:"bg-white border border-red-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:v.title||"Appointment"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:v.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[s.jsx(gn,{className:"w-4 h-4"})," ",v.due_date?new Date(v.due_date).toLocaleDateString():""," ",v.due_time?` ${v.due_time}`:"",v.assigned_to_user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",v.assigned_to_user.full_name]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-red-50 text-red-800 border-red-200 h-fit",children:"Overdue"}),s.jsx("button",{onClick:()=>_(v.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded",children:"Cancel"})]})]})},v.id))})]}),S.upcoming.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Upcoming"}),s.jsx("div",{className:"space-y-3",children:S.upcoming.map(v=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:v.title||"Appointment"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:v.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[s.jsx(gn,{className:"w-4 h-4"})," ",v.due_date?new Date(v.due_date).toLocaleDateString():""," ",v.due_time?` ${v.due_time}`:"",v.assigned_to_user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",v.assigned_to_user.full_name]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-blue-50 text-blue-800 border-blue-200 h-fit",children:v.status.replace("_"," ")}),s.jsx("button",{onClick:()=>_(v.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded",children:"Cancel"})]})]})},v.id))})]}),S.completed.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Completed"}),s.jsx("div",{className:"space-y-3",children:S.completed.map(v=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:v.title||"Appointment"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:v.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[s.jsx(gn,{className:"w-4 h-4"})," ",v.due_date?new Date(v.due_date).toLocaleDateString():""," ",v.due_time?` ${v.due_time}`:"",v.assigned_to_user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",v.assigned_to_user.full_name]})]})]}),s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-green-50 text-green-800 border-green-200 h-fit",children:"Completed"})]})},v.id))})]}),S.cancelled.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Cancelled"}),s.jsx("div",{className:"space-y-3",children:S.cancelled.map(v=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:v.title||"Appointment"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:v.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[s.jsx(gn,{className:"w-4 h-4"})," ",v.due_date?new Date(v.due_date).toLocaleDateString():""," ",v.due_time?` ${v.due_time}`:"",v.assigned_to_user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",v.assigned_to_user.full_name]})]})]}),s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-gray-50 text-gray-800 border-gray-200 h-fit",children:"Cancelled"})]})},v.id))})]}),S.undated.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Other"}),s.jsx("div",{className:"space-y-3",children:S.undated.map(v=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:v.title||"Appointment"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:v.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[s.jsx(gn,{className:"w-4 h-4"})," ",v.assigned_to_user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",v.assigned_to_user.full_name]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-blue-50 text-blue-800 border-blue-200 h-fit",children:v.status.replace("_"," ")}),s.jsx("button",{onClick:()=>_(v.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded",children:"Cancel"})]})]})},v.id))})]})]}),u&&s.jsxs("div",{className:"mt-8 bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[s.jsx(Di,{className:"w-5 h-5 text-blue-600"})," New Appointment Request"]}),s.jsxs("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor"}),s.jsxs("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:f.doctorId,onChange:v=>g({...f,doctorId:v.target.value}),required:!0,children:[s.jsx("option",{value:"",children:"Select doctor"}),m.map(v=>s.jsx("option",{value:v.id,children:v.full_name},v.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:f.date,onChange:v=>g({...f,date:v.target.value}),required:!0}),s.jsx("input",{type:"time",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:f.time,onChange:v=>g({...f,time:v.target.value}),required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:f.title,onChange:v=>g({...f,title:v.target.value}),placeholder:"e.g., Follow-up consultation",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (optional)"}),s.jsx("textarea",{rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:f.message,onChange:v=>g({...f,message:v.target.value}),placeholder:"Additional details"})]}),s.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-lg",onClick:()=>d(!1),children:"Cancel"}),s.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50",children:x?"Sending":"Send Request"})]})]})]})]})},lZ=()=>{const{user:e}=Se(),[t,n]=b.useState(!0),[r,i]=b.useState([]),[a,l]=b.useState([]),[u,d]=b.useState(!1),[m,h]=b.useState([]),[f,g]=b.useState({doctorId:"",date:"",time:"09:00",title:"",message:"",patientId:""}),x=((e==null?void 0:e.full_name)||"").toLowerCase(),j=async()=>{n(!0);const[{data:_},{data:N},{data:v}]=await Promise.all([Bt(),Ct(),Hr()]),k=(_||[]).filter(E=>typeof E.assigned_vhv_name=="string"&&E.assigned_vhv_name.toLowerCase().includes(x));i(k),h((N||[]).filter(E=>E.role==="doctor"));const O=new Set(k.map(E=>E.id)),A=(v||[]).filter(E=>E.patient_id&&O.has(E.patient_id));l(A),n(!1)};b.useEffect(()=>{j()},[]),b.useEffect(()=>{const _=setInterval(()=>{j()},8e3);return()=>clearInterval(_)},[]);const w=b.useMemo(()=>{const _=new Date;_.setHours(0,0,0,0);const N=_.getTime(),v=[],k=[];for(const A of a){if(!A.due_date)continue;new Date(A.due_date).getTime()<N&&A.status!=="completed"&&A.status!=="cancelled"?k.push(A):v.push(A)}const O=(A,E)=>new Date(A.due_date||"").getTime()-new Date(E.due_date||"").getTime();return{overdue:k.sort(O),upcoming:v.sort(O)}},[a]),S=async _=>{_.preventDefault(),!(!(e!=null&&e.id)||!f.patientId||!f.doctorId||!f.date)&&(await zl({title:f.title||"Appointment Request",description:f.message||"Volunteer requested an appointment",priority:"medium",status:"pending",assigned_to:f.doctorId,assigned_by:e.id,patient_id:f.patientId,due_date:f.date,due_time:f.time}),await mr({sender_id:e.id,recipient_id:f.doctorId,subject:"Appointment Request",content:`Volunteer requested appointment on ${f.date} for patient.

Message: ${f.message||"(none)"}`}),d(!1),g({doctorId:"",date:"",time:"09:00",title:"",message:"",patientId:""}),j(),alert("Appointment request sent"))};return t?s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(Cs,{className:"w-6 h-6 text-blue-600"})," Appointments"]}),s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",onClick:()=>d(!0),children:[s.jsx(Yt,{className:"w-4 h-4"})," Request Appointment"]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-6",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Upcoming"}),w.upcoming.length===0?s.jsx("div",{className:"text-gray-500 text-sm",children:"No upcoming appointments."}):s.jsx("div",{className:"space-y-2",children:w.upcoming.map(_=>s.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:_.title||"Appointment"}),s.jsxs("div",{className:"text-gray-700 flex items-center gap-2 mt-1",children:[s.jsx(gn,{className:"w-4 h-4"})," ",_.due_date?new Date(_.due_date).toLocaleDateString():""," ",_.due_time?` ${_.due_time}`:""," ",_.patient&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",_.patient.name]})]})]}),s.jsx("div",{className:"text-xs px-2 py-1 rounded-full border bg-blue-50 text-blue-800",children:_.status.replace("_"," ")})]},_.id))})]}),u&&s.jsx("div",{className:"mt-4 bg-white rounded-xl border border-gray-200 p-6",children:s.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded",required:!0,value:f.patientId,onChange:_=>g({...f,patientId:_.target.value}),children:[s.jsx("option",{value:"",children:"Select patient"}),r.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded",required:!0,value:f.doctorId,onChange:_=>g({...f,doctorId:_.target.value}),children:[s.jsx("option",{value:"",children:"Select doctor"}),m.map(_=>s.jsx("option",{value:_.id,children:_.full_name},_.id))]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",required:!0,value:f.title,onChange:_=>g({...f,title:_.target.value}),placeholder:"e.g., Home visit follow-up"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",required:!0,value:f.date,onChange:_=>g({...f,date:_.target.value})}),s.jsx("input",{type:"time",className:"w-full px-3 py-2 border rounded",required:!0,value:f.time,onChange:_=>g({...f,time:_.target.value})})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (optional)"}),s.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border rounded",value:f.message,onChange:_=>g({...f,message:_.target.value})})]}),s.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 border rounded",onClick:()=>d(!1),children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Send Request"})]})]})})]})},cZ=async()=>{const[{data:e},{data:t}]=await Promise.all([un(),tc()]),n=new Map((t||[]).map(i=>[i.id,i]));return{data:(e||[]).map(i=>({...i,area:i.area_id?n.get(i.area_id):void 0})),error:null}},uZ=async e=>{const{data:t,error:n}=await RM(e);return{data:t,error:n}},dZ=async(e,t)=>{const n={...t};delete n.area;const{data:r,error:i}=await Z2(e,n);return{data:r,error:i}},fZ=async()=>H2(),hZ=({record:e,onClose:t})=>{var z,B;const n=!!e,[r,i]=b.useState(!1),[a,l]=b.useState([]),[u,d]=b.useState(null),[m,h]=b.useState(!1),[f,g]=b.useState([]),[x,j]=b.useState([]),[w,S]=b.useState(""),_=(((z=e==null?void 0:e.user)==null?void 0:z.full_name)||(e==null?void 0:e.name)||"").trim(),N=((e==null?void 0:e.area_name)||"").toLowerCase(),[v,k]=b.useState({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",dob:(e==null?void 0:e.dob)||"",photo_url:(e==null?void 0:e.photo_url)||"",volunteer_code:(e==null?void 0:e.volunteer_code)||"",province:"",district:"",subdistrict:"",addressLine:"",lat:e==null?void 0:e.lat,lng:e==null?void 0:e.lng});b.useEffect(()=>{if((async()=>{const{data:C}=await tc();l(C||[])})(),e!=null&&e.address){const C=e.address.split(",").map(U=>U.trim()).filter(Boolean);k(U=>({...U,province:C.slice(-1)[0]||"",district:C.slice(-2,-1)[0]||"",subdistrict:C.slice(-3,-2)[0]||"",addressLine:C.slice(0,-3).join(", ")}))}e||fZ().then(C=>{k(U=>({...U,volunteer_code:C}))})},[e]),b.useEffect(()=>{(async()=>{if(!e)return;const{data:C}=await Bt(),U=C||[];if(j(U),_){const Z=U.filter(q=>typeof q.assigned_vhv_name=="string"&&q.assigned_vhv_name.toLowerCase().includes(_.toLowerCase()));g(Z)}else g([])})()},[e,_]),b.useEffect(()=>{const C=[v.addressLine,v.subdistrict,v.district,v.province].filter(Boolean).join(", ");if(v.lat&&v.lng||C.length>5){const U=setTimeout(async()=>{h(!0);const Z=await qC(v.lat,v.lng,C,a);d(Z),Z.geocodedLat&&Z.geocodedLng&&!v.lat&&!v.lng&&k(q=>({...q,lat:Z.geocodedLat,lng:Z.geocodedLng})),h(!1)},1e3);return()=>clearTimeout(U)}},[v.lat,v.lng,v.addressLine,v.subdistrict,v.district,v.province,a]);const O=async C=>{var U,Z;C.preventDefault(),i(!0);try{const q=[v.addressLine,v.subdistrict,v.district,v.province].filter(Boolean).join(", "),R={name:v.name,email:v.email,phone:v.phone,address:q,lat:v.lat,lng:v.lng,dob:v.dob,photo_url:v.photo_url,area_id:((U=u==null?void 0:u.area)==null?void 0:U.id)||null,area_name:((Z=u==null?void 0:u.area)==null?void 0:Z.name)||null};if(!v.lat||!v.lng){alert("Please click on the map to set the volunteer's exact location."),i(!1);return}if(!(u!=null&&u.area)){alert("Please place the volunteer inside a defined area created by a doctor."),i(!1);return}if(n&&e){R.volunteer_code=v.volunteer_code;const{error:Y}=await dZ(e.id,R);if(Y)throw Y}else{const{data:Y,error:G}=await BM(v.email,v.name);if(G)throw G;R.user_id=Y==null?void 0:Y.id,R.volunteer_code=v.volunteer_code;const{error:re}=await uZ(R);if(re)throw re}t()}catch(q){console.error("Error saving volunteer:",q),alert("Failed to save volunteer: "+q.message)}finally{i(!1)}},A=async()=>{const{data:C}=await Bt(),U=C||[];if(j(U),_){const Z=U.filter(q=>typeof q.assigned_vhv_name=="string"&&q.assigned_vhv_name.toLowerCase().includes(_.toLowerCase()));g(Z)}},E=async C=>{if(!e||!C)return;const U=(x||[]).find(q=>q.id===C);if(!(((U==null?void 0:U.area_name)||"").toLowerCase()===N||N==="")){alert("This patient is not in the same area as the volunteer.");return}await Wu(C,{assigned_vhv_name:_}),await A()},I=async C=>{C&&(await Wu(C,{assigned_vhv_name:""}),await A())},$=b.useMemo(()=>tl.divIcon({className:"vol-pin",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#22c55e;border:2px solid #fff;box-shadow:0 0 0 3px rgba(34,197,94,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13]}),[]),D=v.lat&&v.lng?[v.lat,v.lng]:[13.793,100.321],M=()=>(my({click(C){k(U=>({...U,lat:C.latlng.lat,lng:C.latlng.lng}))}}),null);return s.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:n?"Edit Volunteer":"Create Volunteer"}),n&&e&&s.jsxs("div",{className:"mt-1 text-xs text-gray-600 flex flex-wrap gap-2",children:[s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["Record ID: ",s.jsx("span",{className:"font-mono",children:e.id})]}),s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["User ID: ",s.jsx("span",{className:"font-mono",children:e.user_id})]}),e.volunteer_code&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["Volunteer ID: ",s.jsx("span",{className:"font-mono",children:e.volunteer_code})]})]})]}),s.jsxs("form",{onSubmit:O,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),s.jsx("input",{required:!0,className:"w-full px-4 py-3 border rounded-lg",value:v.name,onChange:C=>k(U=>({...U,name:C.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),s.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 border rounded-lg",value:v.email,onChange:C=>k(U=>({...U,email:C.target.value})),disabled:n})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded-lg",value:v.phone,onChange:C=>k(U=>({...U,phone:C.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),s.jsx("input",{type:"date",className:"w-full px-4 py-3 border rounded-lg",value:v.dob,onChange:C=>k(U=>({...U,dob:C.target.value}))})]}),n&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Volunteer ID"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded-lg bg-gray-50",value:v.volunteer_code,readOnly:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),s.jsx("input",{placeholder:"Image URL",className:"w-full px-4 py-3 border rounded-lg",value:v.photo_url,onChange:C=>k(U=>({...U,photo_url:C.target.value}))})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Address Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province"}),s.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:v.province,onChange:C=>k(U=>({...U,province:C.target.value,district:"",subdistrict:""})),children:[s.jsx("option",{value:"",children:"Select Province"}),GC.map(C=>s.jsx("option",{value:C,children:C},C))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District"}),s.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:v.district,onChange:C=>k(U=>({...U,district:C.target.value,subdistrict:""})),disabled:!v.province,children:[s.jsx("option",{value:"",children:"Select District"}),Object.keys(Ad[v.province]||{}).map(C=>s.jsx("option",{value:C,children:C},C))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-District"}),s.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:v.subdistrict,onChange:C=>k(U=>({...U,subdistrict:C.target.value})),disabled:!v.district,children:[s.jsx("option",{value:"",children:"Select Sub-District"}),(((B=Ad[v.province])==null?void 0:B[v.district])||[]).map(C=>s.jsx("option",{value:C,children:C},C))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded-lg",placeholder:"House number, street, village",value:v.addressLine,onChange:C=>k(U=>({...U,addressLine:C.target.value}))})]})]})]}),u&&s.jsx("div",{className:`p-4 rounded-lg border-2 ${u.area?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:s.jsx("div",{className:"flex items-start gap-3",children:u.area?s.jsxs(s.Fragment,{children:[s.jsx(xM,{className:"w-5 h-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-green-900",children:"Area Assigned"}),s.jsxs("div",{className:"text-sm text-green-700 mt-1",children:["This volunteer will be assigned to: ",s.jsx("strong",{children:u.area.name})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:u.area.color}}),s.jsxs("span",{className:"text-xs text-green-600",children:["Confidence: ",u.confidence," (",u.method,")"]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(gM,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-yellow-900",children:"No Area Match"}),s.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"This location is not within any defined area. The volunteer will be unassigned."})]})]})})}),m&&s.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"}),"Determining area assignment..."]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (click map to set)"}),s.jsx("div",{className:"h-80 w-full border rounded-lg overflow-hidden",children:s.jsxs(Yf,{center:D,zoom:14,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(Xf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),s.jsx(M,{}),a.map(C=>{var q,R,Y;if(!((R=(q=C.geometry)==null?void 0:q.coordinates)!=null&&R[0]))return null;const U=C.geometry.coordinates[0].map(G=>[G[0],G[1]]),Z=((Y=u==null?void 0:u.area)==null?void 0:Y.id)===C.id;return s.jsx(Ol,{positions:U,pathOptions:{color:C.color,fillColor:C.color,fillOpacity:Z?.3:.1,weight:Z?3:2}},C.id)}),v.lat&&v.lng&&s.jsx(us,{position:[v.lat,v.lng],icon:$})]})}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700",children:"Latitude"}),s.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded",value:v.lat??"",onChange:C=>k(U=>({...U,lat:parseFloat(C.target.value)}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700",children:"Longitude"}),s.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded",value:v.lng??"",onChange:C=>k(U=>({...U,lng:parseFloat(C.target.value)}))})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50",children:[r?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(La,{className:"w-5 h-5"}),r?"Saving...":"Save Volunteer"]})]})]}),n&&s.jsxs("div",{className:"mt-10",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Assigned Patients"}),s.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Patients assigned to ",_||"this volunteer","."]}),s.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsx("input",{placeholder:"Search patients by name or MRN",value:w,onChange:C=>S(C.target.value),className:"flex-1 px-3 py-2 border rounded"}),s.jsxs("select",{className:"flex-1 px-3 py-2 border rounded",onChange:C=>E(C.target.value),defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"Assign a patient"}),x.filter(C=>{const U=w.toLowerCase(),Z=(C.name||"").toLowerCase().includes(U)||(C.medical_record_number||"").toLowerCase().includes(U),q=typeof C.assigned_vhv_name=="string"&&C.assigned_vhv_name.toLowerCase().includes(_.toLowerCase()),R=(C.area_name||"").toLowerCase()===N||N==="";return Z&&!q&&R}).slice(0,20).map(C=>s.jsxs("option",{value:C.id,children:[C.name,"  ",C.medical_record_number]},C.id))]})]}),s.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Selecting a patient will immediately assign them to this volunteer. Only patients from the same area are listed."})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"MRN"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Name"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Area"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[f.map(C=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm",children:C.medical_record_number}),s.jsx("td",{className:"px-4 py-2 text-sm",children:C.name}),s.jsx("td",{className:"px-4 py-2 text-sm",children:C.area_name||"-"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:s.jsx("button",{onClick:()=>I(C.id),className:"px-3 py-1 text-red-700 bg-red-50 hover:bg-red-100 rounded",children:"Remove"})})]},C.id)),f.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:4,children:"No patients assigned."})})]})]})})]})]})},mZ=()=>{const{user:e}=Se(),t=(e==null?void 0:e.role)==="doctor",[n,r]=b.useState([]),[i,a]=b.useState(!0),[l,u]=b.useState({}),[d,m]=b.useState(""),[h,f]=b.useState(!1),[g,x]=b.useState(null),j=async()=>{a(!0);const[{data:S},{data:_}]=await Promise.all([cZ(),Bt()]);r(S||[]);const N={},v=_||[];(S||[]).forEach(k=>{var E;const O=(((E=k.user)==null?void 0:E.full_name)||k.name||"").toLowerCase(),A=v.filter(I=>typeof I.assigned_vhv_name=="string"&&I.assigned_vhv_name.toLowerCase().includes(O)).length;N[k.id]=A}),u(N),a(!1)};b.useEffect(()=>{j()},[]);const w=b.useMemo(()=>{const S=d.toLowerCase();return n.filter(_=>_.name.toLowerCase().includes(S)||(_.volunteer_code||"").toLowerCase().includes(S)||(_.email||"").toLowerCase().includes(S)||(_.phone||"").toLowerCase().includes(S)||(_.area_name||"").toLowerCase().includes(S))},[n,d]);return i?s.jsx("div",{className:"py-10 text-center",children:"Loading"}):h?s.jsx(hZ,{record:g,onClose:()=>{f(!1),x(null),j()}}):s.jsxs("div",{className:"py-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"relative w-full max-w-xl",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:d,onChange:S=>m(S.target.value),placeholder:"Search volunteers...",className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t&&s.jsxs("button",{onClick:()=>f(!0),className:"ml-3 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[s.jsx(Yt,{className:"w-4 h-4"}),"Create Volunteer"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-sky-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Volunteer ID"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Phone"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Area"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Assigned Patients"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[w.map(S=>{var _;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm",children:S.volunteer_code}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[S.photo_url?s.jsx("img",{src:S.photo_url,alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100"}),s.jsx("span",{children:S.name})]})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:S.email}),s.jsx("td",{className:"px-4 py-3 text-sm",children:S.phone||"-"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:S.area_name?s.jsxs("div",{className:"flex items-center gap-2",children:[((_=S.area)==null?void 0:_.color)&&s.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:S.area.color}}),s.jsx("span",{children:S.area_name})]}):s.jsx("span",{className:"text-gray-400 text-xs",children:"Not assigned"})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:l[S.id]??0}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("button",{onClick:()=>{x(S),f(!0)},className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(z2,{className:"w-4 h-4"}),"View Detail"]})})]},S.id)}),w.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No volunteers found"})})]})]})})})]})},pZ=()=>{const{user:e}=Se(),[t,n]=b.useState([]),[r,i]=b.useState(""),[a,l]=b.useState(!0),[u,d]=b.useState(!1),[m,h]=b.useState(null),[f,g]=b.useState(""),[x,j]=b.useState("");b.useEffect(()=>{(async()=>{const{data:$}=await Ct();n($||[]),l(!1)})()},[e==null?void 0:e.id]),b.useEffect(()=>{try{const $=localStorage.getItem("doctor:search");$&&(i($),localStorage.removeItem("doctor:search"))}catch{}},[]);const w=b.useMemo(()=>(t||[]).filter($=>$.role==="doctor").filter($=>{const D=r.toLowerCase(),M=($.doctor_code||"").toLowerCase();return($.full_name||"").toLowerCase().includes(D)||($.email||"").toLowerCase().includes(D)||M.includes(D)}),[t,r]),[S,_]=b.useState(1),N=10,v=Math.max(1,Math.ceil(w.length/N)),k=b.useMemo(()=>{const $=(S-1)*N;return w.slice($,$+N)},[w,S]),O=$=>{try{localStorage.setItem("message:recipient",$)}catch{}try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"messages"}))}catch{}window.setAppView&&window.setAppView("messages")},A=(e==null?void 0:e.role)==="doctor",E=()=>{h(null),g(""),j(""),d(!0)},I=$=>{h($),g($.full_name),j($.email),d(!0)};return a?s.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Zu,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Doctors"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative w-64",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:r,onChange:$=>i($.target.value),placeholder:"Search doctors...",className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),A&&s.jsxs("button",{onClick:E,className:"ml-3 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[s.jsx(Yt,{className:"w-4 h-4"}),"New Doctor"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-sky-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Doctor ID"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[k.map($=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm",children:$.doctor_code||$.id}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Zu,{className:"w-4 h-4 text-blue-600"})}),s.jsx("span",{className:"text-gray-900",children:$.full_name})]})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:$.email}),s.jsx("td",{className:"px-4 py-3 text-sm",children:new Date($.created_at).toLocaleDateString()}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>O($.id),className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(Di,{className:"w-4 h-4"}),"Message"]}),$.email&&s.jsxs("a",{href:`mailto:${$.email}`,className:"text-gray-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(NM,{className:"w-4 h-4"}),"Email"]}),A&&s.jsxs("button",{onClick:()=>I($),className:"text-gray-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(SM,{className:"w-4 h-4"}),"Edit"]}),A&&s.jsx("button",{onClick:async()=>{if(!window.confirm("Delete this doctor account? This cannot be undone."))return;await UM($.id);const{data:D}=await Ct();n(D||[])},className:"text-red-700 hover:underline inline-flex items-center gap-1",children:"Delete"})]})})]},$.id)),k.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:5,children:"No doctors found."})})]})]})}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Math.min(S*N,w.length)," of ",w.length," doctors"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>_($=>Math.max(1,$-1)),disabled:S===1,children:"<"}),s.jsx("button",{className:`px-3 py-1 rounded ${S===1?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>_(1),children:"1"}),v>2&&s.jsxs(s.Fragment,{children:[S>2&&s.jsx("span",{className:"px-1",children:""}),S>1&&S<v&&s.jsx("button",{className:"px-3 py-1 rounded bg-gray-200",children:S}),S<v-1&&s.jsx("span",{className:"px-1",children:""})]}),v>1&&s.jsx("button",{className:`px-3 py-1 rounded ${S===v?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>_(v),children:v}),s.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>_($=>Math.min(v,$+1)),disabled:S===v,children:">"})]})]})]}),s.jsx(Tl,{open:u,title:m?"Edit Doctor":"New Doctor",onClose:()=>d(!1),children:s.jsxs("div",{className:"space-y-4",children:[m&&s.jsxs("div",{className:"text-xs text-gray-600 flex flex-wrap gap-2",children:[m.doctor_code&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["Doctor ID: ",s.jsx("span",{className:"font-mono",children:m.doctor_code})]}),s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["User ID: ",s.jsx("span",{className:"font-mono",children:m.id})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),s.jsx("input",{value:f,onChange:$=>g($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:x,onChange:$=>j($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{id:"doctor-phone",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),s.jsx("input",{id:"doctor-dob",type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Picture URL"}),s.jsx("input",{id:"doctor-photo",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>d(!1),className:"px-3 py-2 border border-gray-300 rounded-lg",children:"Cancel"}),s.jsx("button",{onClick:async()=>{var B,C,U;const $=((B=document.getElementById("doctor-phone"))==null?void 0:B.value)||"",D=((C=document.getElementById("doctor-dob"))==null?void 0:C.value)||"",M=((U=document.getElementById("doctor-photo"))==null?void 0:U.value)||"";if(!x.trim()||!f.trim()){alert("Name and Email are required");return}if(m)await Ep(m.id,{full_name:f,email:x,phone:$,dob:D,photo_url:M});else{const q=(await FM(x,f)).data;q&&await Ep(q.id,{phone:$,dob:D,photo_url:M})}const{data:z}=await Ct();n(z||[]),d(!1)},className:"px-3 py-2 bg-blue-600 text-white rounded-lg",children:"Save"})]})]})})]})},gZ=()=>{const{user:e}=Se(),[t,n]=b.useState((e==null?void 0:e.full_name)||""),[r,i]=b.useState((e==null?void 0:e.photo_url)||""),[a,l]=b.useState(!1),[u,d]=b.useState((e==null?void 0:e.email)||""),[m,h]=b.useState(""),[f,g]=b.useState(""),[x,j]=b.useState(""),[w,S]=b.useState(""),[_,N]=b.useState(""),[v,k]=b.useState("");b.useEffect(()=>{n((e==null?void 0:e.full_name)||""),i((e==null?void 0:e.photo_url)||""),d((e==null?void 0:e.email)||"")},[e]);const O=E=>{if(!E)return;const I=new FileReader;I.onload=()=>i(String(I.result)),I.readAsDataURL(E)},A=async()=>{e&&(l(!0),await Ep(e.id,{full_name:t,photo_url:r,email:u,phone:x,gender:m,dob:f,address:w}),l(!1),alert("Profile updated"))};return s.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"My Profile"}),s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-100",children:r?s.jsx("img",{src:r,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:""})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Role"}),s.jsx("div",{className:"font-medium text-gray-900 capitalize",children:e==null?void 0:e.role}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["User ID: ",s.jsx("span",{className:"font-mono",children:e==null?void 0:e.id})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded",value:t,onChange:E=>n(E.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:E=>{var I;return O((I=E.target.files)==null?void 0:I[0])}}),s.jsx("span",{className:"text-sm text-gray-500",children:"or"}),s.jsx("input",{className:"w-full md:flex-1 px-3 py-2 border rounded",placeholder:"Image URL",value:r,onChange:E=>i(E.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded",type:"email",value:u,onChange:E=>d(E.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded",value:x,onChange:E=>j(E.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),s.jsxs("select",{className:"w-full px-4 py-3 border rounded",value:m,onChange:E=>h(E.target.value),children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"male",children:"Male"}),s.jsx("option",{value:"female",children:"Female"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded",type:"date",value:f,onChange:E=>g(E.target.value)})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded",value:w,onChange:E=>S(E.target.value)})]})]}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsx("button",{onClick:A,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded",children:a?"Saving":"Save Changes"})}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Password"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsx("input",{type:"password",className:"w-full px-4 py-3 border rounded",value:_,onChange:E=>N(E.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsx("input",{type:"password",className:"w-full px-4 py-3 border rounded",value:v,onChange:E=>k(E.target.value)})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx("button",{className:"px-4 py-2 border rounded",onClick:async()=>{if(!e)return;if(_.length<6)return alert("Password must be at least 6 characters");if(_!==v)return alert("Passwords do not match");const{error:E}=await Yd(e.id,_);if(E)return alert(E.message);N(""),k(""),alert("Password updated")},children:"Update Password"})})]})]})]})},vZ=()=>{const{user:e}=Se(),[t,n]=b.useState(!0),[r,i]=b.useState(!1),[a,l]=b.useState(""),[u,d]=b.useState(""),[m,h]=b.useState(""),[f,g]=b.useState([]),[x,j]=b.useState(null),[w,S]=b.useState(null),[_,N]=b.useState(""),[v,k]=b.useState("");b.useEffect(()=>{(async()=>{try{const{data:E}=await ai((e==null?void 0:e.id)||""),[{data:I},{data:$}]=await Promise.all([Ct(),un()]);if(E){const D=(I||[]).find(z=>z.role==="doctor"&&(z.full_name||"").toLowerCase().includes((E.assigned_doctor||"").toLowerCase()));D&&(j(D.id),N(D.full_name));const M=($||[]).find(z=>(z.name||"").toLowerCase().includes((E.assigned_vhv_name||"").toLowerCase()));M&&(S(M.user_id),k(M.name))}if(E){const{data:D}=await Vu(E.id);g(D||[])}}finally{n(!1)}})()},[e==null?void 0:e.id]);const O=b.useMemo(()=>a.trim().length>0&&(x||w),[a,x,w]),A=async()=>{if(O){i(!0);try{const E="Medication Request",I=`Patient requests medication refill/order.

Medication: ${a}
Quantity: ${u||"N/A"}
Notes: ${m||"N/A"}`,$=[x,w].filter(Boolean);await s3({patient_id:profile.id,requested_by:e.id,title:E,medication:a,dosage:"",quantity:u,notes:m,status:"pending"}),await Promise.all($.map(M=>mr({sender_id:e.id,recipient_id:M,subject:E,content:I,is_read:!1}))),l(""),d(""),h(""),alert("Request sent to your care team.");const{data:D}=await Vu(profile.id);g(D||[])}catch{alert("Failed to send request")}finally{i(!1)}}};return t?s.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):s.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"border-b border-gray-200 p-6 flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(Ks,{className:"w-6 h-6 text-purple-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Medication Request"})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medication Name"}),s.jsx("input",{value:a,onChange:E=>l(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"e.g., Metformin 500mg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),s.jsx("input",{value:u,onChange:E=>d(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"e.g., 30 tablets"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:m,onChange:E=>h(E.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Any additional information..."})]}),s.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("div",{className:"text-sm text-blue-800 mb-2 font-medium",children:"This request will be sent to:"}),s.jsxs("ul",{className:"text-sm text-blue-900 list-disc pl-5 space-y-1",children:[x?s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Zu,{className:"w-4 h-4"})," Dr. ",_]}):s.jsx("li",{children:"No doctor found from your profile."}),w?s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Re,{className:"w-4 h-4"})," ",v," (VHV)"]}):s.jsx("li",{children:"No VHV found from your profile."})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{disabled:!O||r,onClick:A,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 inline-flex items-center gap-2",children:[s.jsx(Uu,{className:"w-4 h-4"})," Submit Request"]})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mt-6",children:[s.jsx("div",{className:"p-4 text-gray-900 font-semibold",children:"My Medication Requests"}),s.jsx("div",{className:"p-4",children:f.length===0?s.jsx("div",{className:"text-gray-600 text-sm",children:"No requests yet."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Date"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Medication"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Quantity"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:f.map(E=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-3 py-2",children:new Date(E.created_at).toLocaleString()}),s.jsx("td",{className:"px-3 py-2",children:E.medication||"-"}),s.jsx("td",{className:"px-3 py-2",children:E.quantity||"-"}),s.jsx("td",{className:"px-3 py-2 capitalize",children:E.status.replace("_"," ")})]},E.id))})]})})})]})]})},Mm=["Little interest or pleasure in doing things","Feeling down, depressed, or hopeless","Trouble falling or staying asleep, or sleeping too much","Feeling tired or having little energy","Poor appetite or overeating","Feeling bad about yourself  or that you are a failure or have let yourself or your family down","Trouble concentrating on things, such as reading or watching television","Moving or speaking so slowly that other people could have noticed? Or the opposite  being so fidgety or restless that you have been moving around a lot more than usual","Thoughts that you would be better off dead, or thoughts of hurting yourself"];function yZ(e){return e>=20?"severe":e>=15?"moderately_severe":e>=10?"moderate":e>=5?"mild":"minimal"}const xZ=()=>{const{user:e}=Se(),[t,n]=b.useState(null),[r,i]=b.useState(Array(Mm.length).fill(0)),[a,l]=b.useState(""),[u,d]=b.useState(!0),[m,h]=b.useState(!1),[f,g]=b.useState([]);b.useEffect(()=>{(async()=>{const{data:_}=await ai((e==null?void 0:e.id)||"");if(n(_),_){const N=await Op(_.id);g(N.data||[])}d(!1)})()},[e==null?void 0:e.id]);const x=b.useMemo(()=>(r||[]).reduce((_,N)=>_+(Number.isFinite(N)?N:0),0),[r]),j=yZ(x),w=(_,N)=>{i(v=>v.map((k,O)=>O===_?N:k))},S=async()=>{if(t){h(!0);try{const _=new Date().toISOString();await JM({patient_id:t.id,recorded_by:e.id,date:_,answers:r,total_score:x,severity:j,notes:a});const[{data:N},{data:v}]=await Promise.all([Ct(),un()]),k=(t.assigned_doctor||"").toLowerCase(),O=(N||[]).filter(C=>C.role==="doctor"&&(C.full_name||"").toLowerCase().includes(k)),A=(t.assigned_vhv_name||"").toLowerCase(),I=(v||[]).filter(C=>(C.name||"").toLowerCase().includes(A)).map(C=>C.user_id).filter(Boolean),$=j==="moderately_severe"||j==="severe"?O.map(C=>C.id).filter(Boolean):[],D=[...I,...$],M="New Mental Health Assessment Submitted",z=`Patient: ${t.name}
MRN: ${t.medical_record_number}
Severity: ${j.replace("_"," ")}
Score: ${x}
Submitted at: ${new Date().toLocaleString()}

Notes: ${a||"N/A"}`;await Promise.all(D.map(C=>mr({sender_id:e.id,recipient_id:C,subject:M,content:z,is_read:!1}))),alert("Assessment submitted. Your care team has been notified.");const B=await Op(t.id);g(B.data||[]),l(""),i(Array(Mm.length).fill(0))}catch{alert("Failed to submit assessment")}finally{h(!1)}}};return u?s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t?s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"border-b border-gray-200 p-6 flex items-center gap-3",children:[s.jsx("div",{className:"bg-pink-100 p-2 rounded-lg",children:s.jsx(Zt,{className:"w-6 h-6 text-pink-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mental Health Assessment (PHQ-9)"})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm text-gray-700",children:"Answer each question for the last two weeks. 0 = Not at all, 1 = Several days, 2 = More than half the days, 3 = Nearly every day."}),s.jsx("div",{className:"space-y-5",children:Mm.map((_,N)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-center",children:[s.jsxs("div",{className:"md:col-span-3 text-gray-900",children:[N+1,". ",_]}),s.jsx("div",{className:"md:col-span-2 flex items-center gap-2",children:[0,1,2,3].map(v=>s.jsxs("label",{className:`px-3 py-2 rounded-lg border cursor-pointer ${r[N]===v?"bg-blue-600 text-white border-blue-600":"border-gray-300 text-gray-800 hover:bg-gray-50"}`,children:[s.jsx("input",{type:"radio",name:`q${N}`,value:v,checked:r[N]===v,onChange:()=>w(N,v),className:"hidden"}),v]},v))})]},N))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[s.jsx("div",{className:"text-sm text-blue-800",children:"Total Score"}),s.jsx("div",{className:"text-xl font-semibold text-blue-900",children:x})]}),s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded",children:[s.jsx("div",{className:"text-sm text-purple-800",children:"Severity"}),s.jsx("div",{className:"text-xl font-semibold text-purple-900 capitalize",children:j.replace("_"," ")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optional)"}),s.jsx("textarea",{value:a,onChange:_=>l(_.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Anything you'd like to share..."})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{disabled:m,onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-flex items-center gap-2",children:[s.jsx(Uu,{className:"w-4 h-4"})," Submit Assessment"]})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mt-6",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center gap-2 text-gray-900 font-semibold",children:[s.jsx(I2,{className:"w-5 h-5"})," Previous Assessments"]}),s.jsx("div",{className:"p-4",children:f.length===0?s.jsx("div",{className:"text-gray-600 text-sm",children:"No assessments yet."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Score"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Severity"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:f.map(_=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(_.date).toLocaleString()}),s.jsx("td",{className:"px-4 py-2 text-sm",children:_.total_score}),s.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:String(_.severity).replace("_"," ")})]},_.id))})]})})})]})]}):s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-700",children:"No patient profile found."})})},bZ=e=>e.replace("_"," "),_Z=()=>{const{user:e}=Se(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[a,l]=b.useState(""),[u,d]=b.useState(""),m=async()=>{i(!0);const{data:f}=await Op();n(f||[]),i(!1)};b.useEffect(()=>{m()},[]);const h=b.useMemo(()=>{const f=a.toLowerCase();return(t||[]).filter(g=>!u||String(g.severity)===u).filter(g=>{var S,_;const x=(((S=g.patient)==null?void 0:S.name)||"").toLowerCase(),j=(((_=g.patient)==null?void 0:_.medical_record_number)||"").toLowerCase(),w=(g.notes||"").toLowerCase();return x.includes(f)||j.includes(f)||w.includes(f)})},[t,a,u]);return r?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):(e==null?void 0:e.role)!=="doctor"?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-8 text-center text-gray-700",children:"Only doctors can view mental health assessments."})}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(I2,{className:"w-6 h-6 text-purple-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mental Health Assessments"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative w-64",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:a,onChange:f=>l(f.target.value),placeholder:"Search patients, MRN or notes...",className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:u,onChange:f=>d(f.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[s.jsx("option",{value:"",children:"All severities"}),s.jsx("option",{value:"minimal",children:"Minimal"}),s.jsx("option",{value:"mild",children:"Mild"}),s.jsx("option",{value:"moderate",children:"Moderate"}),s.jsx("option",{value:"moderately_severe",children:"Moderately severe"}),s.jsx("option",{value:"severe",children:"Severe"})]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-purple-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Patient"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"MRN"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Score"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Severity"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Notes"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[h.map(f=>{var g,x;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(f.date).toLocaleString()}),s.jsx("td",{className:"px-4 py-3 text-sm",children:((g=f.patient)==null?void 0:g.name)||"-"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:((x=f.patient)==null?void 0:x.medical_record_number)||"-"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:f.total_score}),s.jsx("td",{className:"px-4 py-3 text-sm capitalize",children:bZ(String(f.severity))}),s.jsx("td",{className:"px-4 py-3 text-sm truncate max-w-[320px]",children:f.notes||"-"})]},f.id)}),h.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:6,children:"No assessments found."})})]})]})})})]})};let pa=null,Ro={};const wZ=e=>{try{Ro=JSON.parse(localStorage.getItem("med:lastSent")||"{}")}catch{Ro={}}if(pa&&(clearInterval(pa),pa=null),!e)return;const t=async()=>{try{const{data:n}=await a3(e);if(!n||n.length===0)return;const{data:r}=await ai(e);for(const i of n){const a=`${i.medication.id}@${i.scheduledAt}`;if(Ro[a])continue;const l="Medication Reminder",u=`Time to take your medication.

Medication: ${i.medication.name}${i.medication.dosage?`
Dosage: ${i.medication.dosage}`:""}
Scheduled time: ${new Date(i.scheduledAt).toLocaleTimeString()}
Patient: ${(r==null?void 0:r.name)||""}`;await mr({sender_id:e,recipient_id:e,subject:l,content:u}),Ro[a]=new Date().toISOString()}localStorage.setItem("med:lastSent",JSON.stringify(Ro))}catch{}};pa=setInterval(t,60*1e3),t()},v1=()=>{pa&&clearInterval(pa),pa=null},jZ=()=>{const{user:e}=Se(),[t,n]=b.useState(null),[r,i]=b.useState([]),[a,l]=b.useState(!0),[u,d]=b.useState(!1),[m,h]=b.useState(null),[f,g]=b.useState({name:"",dosage:"",instructions:"",times:"09:00, 21:00",start_date:"",end_date:"",reminders_enabled:!0}),x=async()=>{l(!0);const{data:v}=await ai((e==null?void 0:e.id)||"");n(v);const{data:k}=await e3(v==null?void 0:v.id);i(k||[]),l(!1)};b.useEffect(()=>{x()},[e==null?void 0:e.id]);const j=()=>{h(null),g({name:"",dosage:"",instructions:"",times:"09:00, 21:00",start_date:"",end_date:"",reminders_enabled:!0}),d(!0)},w=v=>{h(v),g({name:v.name||"",dosage:v.dosage||"",instructions:v.instructions||"",times:(v.times||[]).join(", "),start_date:v.start_date||"",end_date:v.end_date||"",reminders_enabled:v.reminders_enabled!==!1}),d(!0)},S=v=>v.split(",").map(k=>k.trim()).filter(Boolean),_=async()=>{if(!(t!=null&&t.id)||!f.name.trim())return alert("Name is required");const v={patient_id:t.id,name:f.name,dosage:f.dosage,instructions:f.instructions,times:S(f.times),start_date:f.start_date||void 0,end_date:f.end_date||void 0,reminders_enabled:!!f.reminders_enabled};m?await t3(m.id,v):await V2(v),d(!1),h(null),x()},N=async(v,k)=>{const O=new Date,[A,E]=k.split(":").map(I=>parseInt(I,10)||0);O.setHours(A,E,0,0),await r3(v.id,v.patient_id,O.toISOString()),alert("Marked as taken")};return a?s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(Ks,{className:"w-6 h-6 text-purple-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Medications"})]}),s.jsxs("button",{onClick:j,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 inline-flex items-center gap-2",children:[s.jsx(Yt,{className:"w-4 h-4"})," Add"]})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:s.jsxs("div",{className:"divide-y divide-gray-100",children:[r.length===0&&s.jsx("div",{className:"p-6 text-gray-600",children:"No medications added."}),r.map(v=>s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900",children:[v.name," ",v.dosage&&s.jsxs("span",{className:"text-gray-600 font-normal",children:[" ",v.dosage]})]}),v.instructions&&s.jsx("div",{className:"text-sm text-gray-700",children:v.instructions}),s.jsxs("div",{className:"text-sm text-gray-700 flex items-center gap-2 mt-1",children:[s.jsx(xl,{className:"w-4 h-4"})," ",(v.times||[]).join(", ")]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Reminders: ",v.reminders_enabled!==!1?"On":"Off"," ",v.start_date&&`  from ${v.start_date}`," ",v.end_date&&`  until ${v.end_date}`]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>w(v),className:"px-3 py-2 border rounded",children:"Edit"}),s.jsx("button",{onClick:async()=>{confirm("Delete medication?")&&(await n3(v.id),x())},className:"px-3 py-2 border rounded text-red-700 border-red-300",children:"Delete"})]})]}),v.times&&v.times.length>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:v.times.map(k=>s.jsxs("button",{onClick:()=>N(v,k),className:"text-sm px-3 py-1 rounded border bg-purple-50 hover:bg-purple-100",children:["Mark ",k," taken"]},k))})]},v.id))]})}),u&&s.jsxs("div",{className:"mt-6 bg-white rounded-xl border border-gray-200 p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.name,onChange:v=>g({...f,name:v.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosage"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.dosage,onChange:v=>g({...f,dosage:v.target.value}),placeholder:"e.g., 500mg"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.instructions,onChange:v=>g({...f,instructions:v.target.value}),placeholder:"e.g., after meal"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Times (comma-separated HH:MM)"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.times,onChange:v=>g({...f,times:v.target.value}),placeholder:"09:00, 21:00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:f.start_date,onChange:v=>g({...f,start_date:v.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:f.end_date,onChange:v=>g({...f,end_date:v.target.value})})]}),s.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[s.jsx("input",{id:"rem-on",type:"checkbox",checked:f.reminders_enabled,onChange:v=>g({...f,reminders_enabled:v.target.checked})}),s.jsx("label",{htmlFor:"rem-on",className:"text-sm text-gray-700",children:"Enable reminders"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx("button",{onClick:()=>{d(!1),h(null)},className:"px-3 py-2 border rounded",children:"Cancel"}),s.jsxs("button",{onClick:_,className:"px-3 py-2 bg-purple-600 text-white rounded inline-flex items-center gap-2",children:[s.jsx(La,{className:"w-4 h-4"})," Save"]})]})]})]})},NZ=()=>{const{user:e}=Se(),[t,n]=b.useState(!0),[r,i]=b.useState([]),[a,l]=b.useState(""),[u,d]=b.useState(!1),[m,h]=b.useState(null),[f,g]=b.useState({name:"",dosage:"",instructions:"",times:"09:00, 21:00"}),x=async()=>{n(!0);const{data:v}=await Vu();i(v||[]),n(!1)};b.useEffect(()=>{x()},[]);const j=b.useMemo(()=>{const v=a.toLowerCase();return(r||[]).filter(k=>{var O;return(k.status==="pending"||k.status==="approved"||k.status==="declined")&&((((O=k.patient)==null?void 0:O.name)||"").toLowerCase().includes(v)||(k.medication||"").toLowerCase().includes(v)||(k.notes||"").toLowerCase().includes(v))})},[r,a]),w=v=>{h(v),g({name:v.medication||"",dosage:"",instructions:"",times:"09:00, 21:00"}),d(!0)},S=v=>v.split(",").map(k=>k.trim()).filter(Boolean),_=async()=>{var $,D,M;if(!m||!f.name.trim())return;await V2({patient_id:m.patient_id,name:f.name,dosage:f.dosage,instructions:f.instructions,times:S(f.times),reminders_enabled:!0,assigned_by:e.id}),await Mb(m.id,{status:"approved",resolved_by:e.id});const[{data:v},{data:k}]=await Promise.all([un(),Ct()]),O=((($=m.patient)==null?void 0:$.assigned_vhv_name)||"").toLowerCase(),A=(v||[]).find(z=>(z.name||"").toLowerCase().includes(O)),E="Prescription Created",I=`Prescription created for ${(D=m.patient)==null?void 0:D.name}.
Medication: ${f.name}
Dosage: ${f.dosage||"N/A"}
Times: ${S(f.times).join(", ")}
Instructions: ${f.instructions||""}`;await mr({sender_id:e.id,recipient_id:(M=m.patient)==null?void 0:M.user_id,subject:E,content:I}),A!=null&&A.user_id&&await mr({sender_id:e.id,recipient_id:A.user_id,subject:E,content:I}),d(!1),h(null),x()},N=async v=>{await Mb(v.id,{status:"declined",resolved_by:e.id}),x()};return t?s.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(Ks,{className:"w-6 h-6 text-purple-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Medication Requests"})]}),s.jsxs("div",{className:"relative w-64",children:[s.jsx(Kn,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:a,onChange:v=>l(v.target.value),placeholder:"Search...",className:"w-full pl-9 pr-3 py-2 border rounded"})]})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s.jsx("thead",{className:"bg-purple-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Patient"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Medication"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Quantity"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Notes"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[j.map(v=>{var k;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:new Date(v.created_at).toLocaleString()}),s.jsx("td",{className:"px-4 py-3",children:((k=v.patient)==null?void 0:k.name)||"-"}),s.jsx("td",{className:"px-4 py-3",children:v.medication||"-"}),s.jsx("td",{className:"px-4 py-3",children:v.quantity||"-"}),s.jsx("td",{className:"px-4 py-3 truncate max-w-[280px]",children:v.notes||"-"}),s.jsx("td",{className:"px-4 py-3 capitalize",children:v.status.replace("_"," ")}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"px-3 py-1 border rounded inline-flex items-center gap-1",onClick:()=>w(v),children:[s.jsx(yM,{className:"w-4 h-4"})," Prescribe"]}),s.jsxs("button",{className:"px-3 py-1 border rounded text-red-700 border-red-300 inline-flex items-center gap-1",onClick:()=>N(v),children:[s.jsx(kp,{className:"w-4 h-4"})," Decline"]})]})})]},v.id)}),j.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:7,children:"No requests"})})]})]})})}),u&&s.jsxs("div",{className:"mt-6 bg-white border border-gray-200 rounded-xl p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medication"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.name,onChange:v=>g({...f,name:v.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosage"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.dosage,onChange:v=>g({...f,dosage:v.target.value})})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.instructions,onChange:v=>g({...f,instructions:v.target.value})})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Times (comma separated HH:MM)"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.times,onChange:v=>g({...f,times:v.target.value}),placeholder:"09:00, 21:00"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx("button",{onClick:()=>{d(!1),h(null)},className:"px-3 py-2 border rounded",children:"Cancel"}),s.jsxs("button",{onClick:_,className:"px-3 py-2 bg-purple-600 text-white rounded inline-flex items-center gap-2",children:[s.jsx(Yt,{className:"w-4 h-4"})," Prescribe"]})]})]})]})},SZ=()=>{const{user:e}=Se(),[t,n]=b.useState(!0),[r,i]=b.useState([]),[a,l]=b.useState(""),u=async()=>{n(!0);const[{data:m},{data:h}]=await Promise.all([Vu(),Bt()]),f=((e==null?void 0:e.full_name)||"").toLowerCase(),g=(h||[]).filter(w=>(w.assigned_vhv_name||"").toLowerCase().includes(f)),x=new Set(g.map(w=>w.id)),j=(m||[]).filter(w=>x.has(w.patient_id));i(j),n(!1)};b.useEffect(()=>{u()},[]);const d=b.useMemo(()=>{const m=a.toLowerCase();return(r||[]).filter(h=>{var f;return(((f=h.patient)==null?void 0:f.name)||"").toLowerCase().includes(m)||(h.medication||"").toLowerCase().includes(m)||(h.notes||"").toLowerCase().includes(m)})},[r,a]);return t?s.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(Ks,{className:"w-6 h-6 text-purple-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Medication Requests"})]}),s.jsxs("div",{className:"relative w-64",children:[s.jsx(Kn,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:a,onChange:m=>l(m.target.value),placeholder:"Search...",className:"w-full pl-9 pr-3 py-2 border rounded"})]})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s.jsx("thead",{className:"bg-purple-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Patient"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Medication"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Quantity"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Status"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[d.map(m=>{var h;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:new Date(m.created_at).toLocaleString()}),s.jsx("td",{className:"px-4 py-3",children:((h=m.patient)==null?void 0:h.name)||"-"}),s.jsx("td",{className:"px-4 py-3",children:m.medication||"-"}),s.jsx("td",{className:"px-4 py-3",children:m.quantity||"-"}),s.jsx("td",{className:"px-4 py-3 capitalize",children:m.status.replace("_"," ")})]},m.id)}),d.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:5,children:"No requests"})})]})]})})})]})};function PZ(){const{user:e,loading:t}=Se(),[n,r]=b.useState("dashboard"),[i,a]=b.useState(!1);if(b.useEffect(()=>{sM(),window.setAppView=d=>r(d);const u=d=>{const m=d==null?void 0:d.detail;typeof m=="string"&&r(m)};return window.addEventListener("codex:setView",u),()=>window.removeEventListener("codex:setView",u)},[]),b.useEffect(()=>((e==null?void 0:e.role)==="patient"?wZ(e.id):v1(),()=>v1()),[e==null?void 0:e.id,e==null?void 0:e.role]),t)return s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})});if(!e)return s.jsx(u3,{});const l=()=>{switch(n){case"dashboard":return s.jsx(Dn,{});case"patients":return e.role==="doctor"||e.role==="volunteer"?s.jsx(YH,{}):s.jsx(Dn,{});case"profile":return e.role==="patient"?s.jsx(XH,{}):s.jsx(Dn,{});case"messages":return s.jsx(QH,{});case"tasks":return e.role==="volunteer"?s.jsx(nZ,{}):e.role==="doctor"?s.jsx(eZ,{}):s.jsx(p1,{personalOnly:!0,title:"My Tasks"});case"volunteer-tasks":return e.role==="doctor"?s.jsx(tZ,{}):s.jsx(p1,{});case"volunteers":return e.role==="doctor"?s.jsx(mZ,{}):s.jsx(Dn,{});case"doctors":return e.role==="volunteer"||e.role==="patient"||e.role==="doctor"?s.jsx(pZ,{}):s.jsx(Dn,{});case"map":return s.jsx(iZ,{onBack:()=>r("dashboard")});case"records":return s.jsx(sZ,{});case"appointments":return e.role==="patient"?s.jsx(oZ,{}):e.role==="volunteer"?s.jsx(lZ,{}):s.jsx(Dn,{});case"medication":return e.role==="patient"?s.jsx(vZ,{}):s.jsx(Dn,{});case"mental":return e.role==="patient"?s.jsx(xZ,{}):s.jsx(Dn,{});case"mental-assessments":return e.role==="doctor"?s.jsx(_Z,{}):s.jsx(Dn,{});case"medications":return e.role==="patient"?s.jsx(jZ,{}):s.jsx(Dn,{});case"med-requests":return e.role==="doctor"?s.jsx(NZ,{}):e.role==="volunteer"?s.jsx(SZ,{}):s.jsx(Dn,{});case"user-profile":return s.jsx(gZ,{});default:return s.jsx(Dn,{})}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(f3,{currentView:n,onViewChange:r,mobileOpen:i,setMobileOpen:a}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[s.jsx(d3,{currentView:n,onViewChange:r,onMenuClick:()=>a(!0)}),s.jsx("main",{className:"p-4 md:p-6 max-w-7xl w-full mx-auto",children:l()})]})]})}function kZ(){return s.jsx(hM,{children:s.jsx(PZ,{})})}O2(document.getElementById("root")).render(s.jsx(b.StrictMode,{children:s.jsx(kZ,{})}));
