var bO=Object.defineProperty;var _O=(e,t,n)=>t in e?bO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ch=(e,t,n)=>_O(e,typeof t!="symbol"?t+"":t,n);function wO(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var jO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var y1={exports:{}},Md={},x1={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ol=Symbol.for("react.element"),NO=Symbol.for("react.portal"),SO=Symbol.for("react.fragment"),PO=Symbol.for("react.strict_mode"),kO=Symbol.for("react.profiler"),CO=Symbol.for("react.provider"),EO=Symbol.for("react.context"),OO=Symbol.for("react.forward_ref"),TO=Symbol.for("react.suspense"),AO=Symbol.for("react.memo"),MO=Symbol.for("react.lazy"),jx=Symbol.iterator;function LO(e){return e===null||typeof e!="object"?null:(e=jx&&e[jx]||e["@@iterator"],typeof e=="function"?e:null)}var b1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_1=Object.assign,w1={};function Us(e,t,n){this.props=e,this.context=t,this.refs=w1,this.updater=n||b1}Us.prototype.isReactComponent={};Us.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Us.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j1(){}j1.prototype=Us.prototype;function Ng(e,t,n){this.props=e,this.context=t,this.refs=w1,this.updater=n||b1}var Sg=Ng.prototype=new j1;Sg.constructor=Ng;_1(Sg,Us.prototype);Sg.isPureReactComponent=!0;var Nx=Array.isArray,N1=Object.prototype.hasOwnProperty,Pg={current:null},S1={key:!0,ref:!0,__self:!0,__source:!0};function P1(e,t,n){var r,i={},a=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)N1.call(t,r)&&!S1.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var d=Array(u),m=0;m<u;m++)d[m]=arguments[m+2];i.children=d}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Ol,type:e,key:a,ref:l,props:i,_owner:Pg.current}}function DO(e,t){return{$$typeof:Ol,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ol}function IO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Sx=/\/+/g;function Eh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?IO(""+e.key):t.toString(36)}function Jc(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ol:case NO:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+Eh(l,0):r,Nx(i)?(n="",e!=null&&(n=e.replace(Sx,"$&/")+"/"),Jc(i,t,n,"",function(m){return m})):i!=null&&(kg(i)&&(i=DO(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Sx,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",Nx(e))for(var u=0;u<e.length;u++){a=e[u];var d=r+Eh(a,u);l+=Jc(a,t,n,d,i)}else if(d=LO(e),typeof d=="function")for(e=d.call(e),u=0;!(a=e.next()).done;)a=a.value,d=r+Eh(a,u++),l+=Jc(a,t,n,d,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function xc(e,t,n){if(e==null)return e;var r=[],i=0;return Jc(e,r,"","",function(a){return t.call(n,a,i++)}),r}function RO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Yt={current:null},eu={transition:null},zO={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:eu,ReactCurrentOwner:Pg};function k1(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:xc,forEach:function(e,t,n){xc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xc(e,function(){t++}),t},toArray:function(e){return xc(e,function(t){return t})||[]},only:function(e){if(!kg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=Us;_e.Fragment=SO;_e.Profiler=kO;_e.PureComponent=Ng;_e.StrictMode=PO;_e.Suspense=TO;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zO;_e.act=k1;_e.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_1({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Pg.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)N1.call(t,d)&&!S1.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var m=0;m<d;m++)u[m]=arguments[m+2];r.children=u}return{$$typeof:Ol,type:e.type,key:i,ref:a,props:r,_owner:l}};_e.createContext=function(e){return e={$$typeof:EO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:CO,_context:e},e.Consumer=e};_e.createElement=P1;_e.createFactory=function(e){var t=P1.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:OO,render:e}};_e.isValidElement=kg;_e.lazy=function(e){return{$$typeof:MO,_payload:{_status:-1,_result:e},_init:RO}};_e.memo=function(e,t){return{$$typeof:AO,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=eu.transition;eu.transition={};try{e()}finally{eu.transition=t}};_e.unstable_act=k1;_e.useCallback=function(e,t){return Yt.current.useCallback(e,t)};_e.useContext=function(e){return Yt.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return Yt.current.useDeferredValue(e)};_e.useEffect=function(e,t){return Yt.current.useEffect(e,t)};_e.useId=function(){return Yt.current.useId()};_e.useImperativeHandle=function(e,t,n){return Yt.current.useImperativeHandle(e,t,n)};_e.useInsertionEffect=function(e,t){return Yt.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return Yt.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return Yt.current.useMemo(e,t)};_e.useReducer=function(e,t,n){return Yt.current.useReducer(e,t,n)};_e.useRef=function(e){return Yt.current.useRef(e)};_e.useState=function(e){return Yt.current.useState(e)};_e.useSyncExternalStore=function(e,t,n){return Yt.current.useSyncExternalStore(e,t,n)};_e.useTransition=function(){return Yt.current.useTransition()};_e.version="18.3.1";x1.exports=_e;var x=x1.exports;const pu=Tr(x),$O=wO({__proto__:null,default:pu},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BO=x,FO=Symbol.for("react.element"),UO=Symbol.for("react.fragment"),HO=Object.prototype.hasOwnProperty,ZO=BO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WO={key:!0,ref:!0,__self:!0,__source:!0};function C1(e,t,n){var r,i={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)HO.call(t,r)&&!WO.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:FO,type:e,key:a,ref:l,props:i,_owner:ZO.current}}Md.Fragment=UO;Md.jsx=C1;Md.jsxs=C1;y1.exports=Md;var s=y1.exports,E1={exports:{}},Pn={},O1={exports:{}},T1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,G){var Y=z.length;z.push(G);e:for(;0<Y;){var re=Y-1>>>1,ne=z[re];if(0<i(ne,G))z[re]=G,z[Y]=ne,Y=re;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],Y=z.pop();if(Y!==G){z[0]=Y;e:for(var re=0,ne=z.length,H=ne>>>1;re<H;){var X=2*(re+1)-1,te=z[X],ae=X+1,Te=z[ae];if(0>i(te,Y))ae<ne&&0>i(Te,te)?(z[re]=Te,z[ae]=Y,re=ae):(z[re]=te,z[X]=Y,re=X);else if(ae<ne&&0>i(Te,Y))z[re]=Te,z[ae]=Y,re=ae;else break e}}return G}function i(z,G){var Y=z.sortIndex-G.sortIndex;return Y!==0?Y:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],h=1,f=null,g=3,y=!1,j=!1,w=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var G=n(m);G!==null;){if(G.callback===null)r(m);else if(G.startTime<=z)r(m),G.sortIndex=G.expirationTime,t(d,G);else break;G=n(m)}}function k(z){if(w=!1,_(z),!j)if(n(d)!==null)j=!0,Z(C);else{var G=n(m);G!==null&&K(k,G.startTime-z)}}function C(z,G){j=!1,w&&(w=!1,b(I),I=-1),y=!0;var Y=g;try{for(_(G),f=n(d);f!==null&&(!(f.expirationTime>G)||z&&!M());){var re=f.callback;if(typeof re=="function"){f.callback=null,g=f.priorityLevel;var ne=re(f.expirationTime<=G);G=e.unstable_now(),typeof ne=="function"?f.callback=ne:f===n(d)&&r(d),_(G)}else r(d);f=n(d)}if(f!==null)var H=!0;else{var X=n(m);X!==null&&K(k,X.startTime-G),H=!1}return H}finally{f=null,g=Y,y=!1}}var A=!1,O=null,I=-1,B=5,D=-1;function M(){return!(e.unstable_now()-D<B)}function $(){if(O!==null){var z=e.unstable_now();D=z;var G=!0;try{G=O(!0,z)}finally{G?R():(A=!1,O=null)}}else A=!1}var R;if(typeof N=="function")R=function(){N($)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,U=E.port2;E.port1.onmessage=$,R=function(){U.postMessage(null)}}else R=function(){P($,0)};function Z(z){O=z,A||(A=!0,R())}function K(z,G){I=P(function(){z(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){j||y||(j=!0,Z(C))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(z){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var Y=g;g=G;try{return z()}finally{g=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=g;g=z;try{return G()}finally{g=Y}},e.unstable_scheduleCallback=function(z,G,Y){var re=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?re+Y:re):Y=re,z){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,z={id:h++,callback:G,priorityLevel:z,startTime:Y,expirationTime:ne,sortIndex:-1},Y>re?(z.sortIndex=Y,t(m,z),n(d)===null&&z===n(m)&&(w?(b(I),I=-1):w=!0,K(k,Y-re))):(z.sortIndex=ne,t(d,z),j||y||(j=!0,Z(C))),z},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(z){var G=g;return function(){var Y=g;g=G;try{return z.apply(this,arguments)}finally{g=Y}}}})(T1);O1.exports=T1;var VO=O1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KO=x,wn=VO;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A1=new Set,el={};function Oa(e,t){xs(e,t),xs(e+"Capture",t)}function xs(e,t){for(el[e]=t,e=0;e<t.length;e++)A1.add(t[e])}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mm=Object.prototype.hasOwnProperty,qO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Px={},kx={};function GO(e){return Mm.call(kx,e)?!0:Mm.call(Px,e)?!1:qO.test(e)?kx[e]=!0:(Px[e]=!0,!1)}function YO(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XO(e,t,n,r){if(t===null||typeof t>"u"||YO(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xt(e,t,n,r,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new Xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new Xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new Xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new Xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new Xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new Xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new Xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new Xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new Xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cg=/[\-:]([a-z])/g;function Eg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cg,Eg);Et[t]=new Xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cg,Eg);Et[t]=new Xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cg,Eg);Et[t]=new Xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new Xt(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new Xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Og(e,t,n,r){var i=Et.hasOwnProperty(t)?Et[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XO(t,n,i,r)&&(n=null),r||i===null?GO(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ri=KO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bc=Symbol.for("react.element"),Ga=Symbol.for("react.portal"),Ya=Symbol.for("react.fragment"),Tg=Symbol.for("react.strict_mode"),Lm=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),L1=Symbol.for("react.context"),Ag=Symbol.for("react.forward_ref"),Dm=Symbol.for("react.suspense"),Im=Symbol.for("react.suspense_list"),Mg=Symbol.for("react.memo"),mi=Symbol.for("react.lazy"),D1=Symbol.for("react.offscreen"),Cx=Symbol.iterator;function vo(e){return e===null||typeof e!="object"?null:(e=Cx&&e[Cx]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,Oh;function Do(e){if(Oh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Oh=t&&t[1]||""}return`
`+Oh+e}var Th=!1;function Ah(e,t){if(!e||Th)return"";Th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var r=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){r=m}e.call(t.prototype)}else{try{throw Error()}catch(m){r=m}e()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),a=r.stack.split(`
`),l=i.length-1,u=a.length-1;1<=l&&0<=u&&i[l]!==a[u];)u--;for(;1<=l&&0<=u;l--,u--)if(i[l]!==a[u]){if(l!==1||u!==1)do if(l--,u--,0>u||i[l]!==a[u]){var d=`
`+i[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=u);break}}}finally{Th=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Do(e):""}function QO(e){switch(e.tag){case 5:return Do(e.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 2:case 15:return e=Ah(e.type,!1),e;case 11:return e=Ah(e.type.render,!1),e;case 1:return e=Ah(e.type,!0),e;default:return""}}function Rm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ya:return"Fragment";case Ga:return"Portal";case Lm:return"Profiler";case Tg:return"StrictMode";case Dm:return"Suspense";case Im:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case L1:return(e.displayName||"Context")+".Consumer";case M1:return(e._context.displayName||"Context")+".Provider";case Ag:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mg:return t=e.displayName||null,t!==null?t:Rm(e.type)||"Memo";case mi:t=e._payload,e=e._init;try{return Rm(e(t))}catch{}}return null}function JO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rm(t);case 8:return t===Tg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Li(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function I1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eT(e){var t=I1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _c(e){e._valueTracker||(e._valueTracker=eT(e))}function R1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=I1(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zm(e,t){var n=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ex(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Li(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function z1(e,t){t=t.checked,t!=null&&Og(e,"checked",t,!1)}function $m(e,t){z1(e,t);var n=Li(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bm(e,t.type,n):t.hasOwnProperty("defaultValue")&&Bm(e,t.type,Li(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ox(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Bm(e,t,n){(t!=="number"||gu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Io=Array.isArray;function us(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Li(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Fm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ee(92));if(Io(n)){if(1<n.length)throw Error(ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Li(n)}}function $1(e,t){var n=Li(t.value),r=Li(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ax(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function B1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Um(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?B1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wc,F1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wc=wc||document.createElement("div"),wc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tT=["Webkit","ms","Moz","O"];Object.keys(Fo).forEach(function(e){tT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fo[t]=Fo[e]})});function U1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Fo.hasOwnProperty(e)&&Fo[e]?(""+t).trim():t+"px"}function H1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=U1(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var nT=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hm(e,t){if(t){if(nT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function Zm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wm=null;function Lg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vm=null,ds=null,fs=null;function Mx(e){if(e=Ml(e)){if(typeof Vm!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=zd(t),Vm(e.stateNode,e.type,t))}}function Z1(e){ds?fs?fs.push(e):fs=[e]:ds=e}function W1(){if(ds){var e=ds,t=fs;if(fs=ds=null,Mx(e),t)for(e=0;e<t.length;e++)Mx(t[e])}}function V1(e,t){return e(t)}function K1(){}var Mh=!1;function q1(e,t,n){if(Mh)return e(t,n);Mh=!0;try{return V1(e,t,n)}finally{Mh=!1,(ds!==null||fs!==null)&&(K1(),W1())}}function nl(e,t){var n=e.stateNode;if(n===null)return null;var r=zd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ee(231,t,typeof n));return n}var Km=!1;if(Gr)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){Km=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{Km=!1}function rT(e,t,n,r,i,a,l,u,d){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(h){this.onError(h)}}var Uo=!1,vu=null,yu=!1,qm=null,iT={onError:function(e){Uo=!0,vu=e}};function aT(e,t,n,r,i,a,l,u,d){Uo=!1,vu=null,rT.apply(iT,arguments)}function sT(e,t,n,r,i,a,l,u,d){if(aT.apply(this,arguments),Uo){if(Uo){var m=vu;Uo=!1,vu=null}else throw Error(ee(198));yu||(yu=!0,qm=m)}}function Ta(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function G1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lx(e){if(Ta(e)!==e)throw Error(ee(188))}function oT(e){var t=e.alternate;if(!t){if(t=Ta(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Lx(i),e;if(a===r)return Lx(i),t;a=a.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=a;else{for(var l=!1,u=i.child;u;){if(u===n){l=!0,n=i,r=a;break}if(u===r){l=!0,r=i,n=a;break}u=u.sibling}if(!l){for(u=a.child;u;){if(u===n){l=!0,n=a,r=i;break}if(u===r){l=!0,r=a,n=i;break}u=u.sibling}if(!l)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?e:t}function Y1(e){return e=oT(e),e!==null?X1(e):null}function X1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=X1(e);if(t!==null)return t;e=e.sibling}return null}var Q1=wn.unstable_scheduleCallback,Dx=wn.unstable_cancelCallback,lT=wn.unstable_shouldYield,cT=wn.unstable_requestPaint,Je=wn.unstable_now,uT=wn.unstable_getCurrentPriorityLevel,Dg=wn.unstable_ImmediatePriority,J1=wn.unstable_UserBlockingPriority,xu=wn.unstable_NormalPriority,dT=wn.unstable_LowPriority,ej=wn.unstable_IdlePriority,Ld=null,Pr=null;function fT(e){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot(Ld,e,void 0,(e.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:pT,hT=Math.log,mT=Math.LN2;function pT(e){return e>>>=0,e===0?32:31-(hT(e)/mT|0)|0}var jc=64,Nc=4194304;function Ro(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var u=l&~i;u!==0?r=Ro(u):(a&=l,a!==0&&(r=Ro(a)))}else l=n&~i,l!==0?r=Ro(l):a!==0&&(r=Ro(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-dr(t),i=1<<n,r|=e[n],t&=~i;return r}function gT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vT(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-dr(a),u=1<<l,d=i[l];d===-1?(!(u&n)||u&r)&&(i[l]=gT(u,t)):d<=t&&(e.expiredLanes|=u),a&=~u}}function Gm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tj(){var e=jc;return jc<<=1,!(jc&4194240)&&(jc=64),e}function Lh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Tl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dr(t),e[t]=n}function yT(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-dr(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Ig(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ee=0;function nj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var rj,Rg,ij,aj,sj,Ym=!1,Sc=[],Ni=null,Si=null,Pi=null,rl=new Map,il=new Map,yi=[],xT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ix(e,t){switch(e){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":rl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(t.pointerId)}}function xo(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ml(t),t!==null&&Rg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function bT(e,t,n,r,i){switch(t){case"focusin":return Ni=xo(Ni,e,t,n,r,i),!0;case"dragenter":return Si=xo(Si,e,t,n,r,i),!0;case"mouseover":return Pi=xo(Pi,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return rl.set(a,xo(rl.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,il.set(a,xo(il.get(a)||null,e,t,n,r,i)),!0}return!1}function oj(e){var t=ia(e.target);if(t!==null){var n=Ta(t);if(n!==null){if(t=n.tag,t===13){if(t=G1(n),t!==null){e.blockedOn=t,sj(e.priority,function(){ij(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Wm=r,n.target.dispatchEvent(r),Wm=null}else return t=Ml(n),t!==null&&Rg(t),e.blockedOn=n,!1;t.shift()}return!0}function Rx(e,t,n){tu(e)&&n.delete(t)}function _T(){Ym=!1,Ni!==null&&tu(Ni)&&(Ni=null),Si!==null&&tu(Si)&&(Si=null),Pi!==null&&tu(Pi)&&(Pi=null),rl.forEach(Rx),il.forEach(Rx)}function bo(e,t){e.blockedOn===t&&(e.blockedOn=null,Ym||(Ym=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,_T)))}function al(e){function t(i){return bo(i,e)}if(0<Sc.length){bo(Sc[0],e);for(var n=1;n<Sc.length;n++){var r=Sc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ni!==null&&bo(Ni,e),Si!==null&&bo(Si,e),Pi!==null&&bo(Pi,e),rl.forEach(t),il.forEach(t),n=0;n<yi.length;n++)r=yi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<yi.length&&(n=yi[0],n.blockedOn===null);)oj(n),n.blockedOn===null&&yi.shift()}var hs=ri.ReactCurrentBatchConfig,_u=!0;function wT(e,t,n,r){var i=Ee,a=hs.transition;hs.transition=null;try{Ee=1,zg(e,t,n,r)}finally{Ee=i,hs.transition=a}}function jT(e,t,n,r){var i=Ee,a=hs.transition;hs.transition=null;try{Ee=4,zg(e,t,n,r)}finally{Ee=i,hs.transition=a}}function zg(e,t,n,r){if(_u){var i=Xm(e,t,n,r);if(i===null)Zh(e,t,r,wu,n),Ix(e,r);else if(bT(i,e,t,n,r))r.stopPropagation();else if(Ix(e,r),t&4&&-1<xT.indexOf(e)){for(;i!==null;){var a=Ml(i);if(a!==null&&rj(a),a=Xm(e,t,n,r),a===null&&Zh(e,t,r,wu,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Zh(e,t,r,null,n)}}var wu=null;function Xm(e,t,n,r){if(wu=null,e=Lg(r),e=ia(e),e!==null)if(t=Ta(e),t===null)e=null;else if(n=t.tag,n===13){if(e=G1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wu=e,null}function lj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uT()){case Dg:return 1;case J1:return 4;case xu:case dT:return 16;case ej:return 536870912;default:return 16}default:return 16}}var wi=null,$g=null,nu=null;function cj(){if(nu)return nu;var e,t=$g,n=t.length,r,i="value"in wi?wi.value:wi.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[a-r];r++);return nu=i.slice(e,1<r?1-r:void 0)}function ru(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pc(){return!0}function zx(){return!1}function kn(e){function t(n,r,i,a,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Pc:zx,this.isPropagationStopped=zx,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pc)},persist:function(){},isPersistent:Pc}),t}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bg=kn(Hs),Al=qe({},Hs,{view:0,detail:0}),NT=kn(Al),Dh,Ih,_o,Dd=qe({},Al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_o&&(_o&&e.type==="mousemove"?(Dh=e.screenX-_o.screenX,Ih=e.screenY-_o.screenY):Ih=Dh=0,_o=e),Dh)},movementY:function(e){return"movementY"in e?e.movementY:Ih}}),$x=kn(Dd),ST=qe({},Dd,{dataTransfer:0}),PT=kn(ST),kT=qe({},Al,{relatedTarget:0}),Rh=kn(kT),CT=qe({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),ET=kn(CT),OT=qe({},Hs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),TT=kn(OT),AT=qe({},Hs,{data:0}),Bx=kn(AT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DT[e])?!!t[e]:!1}function Fg(){return IT}var RT=qe({},Al,{key:function(e){if(e.key){var t=MT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ru(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?LT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fg,charCode:function(e){return e.type==="keypress"?ru(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ru(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zT=kn(RT),$T=qe({},Dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fx=kn($T),BT=qe({},Al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fg}),FT=kn(BT),UT=qe({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),HT=kn(UT),ZT=qe({},Dd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WT=kn(ZT),VT=[9,13,27,32],Ug=Gr&&"CompositionEvent"in window,Ho=null;Gr&&"documentMode"in document&&(Ho=document.documentMode);var KT=Gr&&"TextEvent"in window&&!Ho,uj=Gr&&(!Ug||Ho&&8<Ho&&11>=Ho),Ux=" ",Hx=!1;function dj(e,t){switch(e){case"keyup":return VT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xa=!1;function qT(e,t){switch(e){case"compositionend":return fj(t);case"keypress":return t.which!==32?null:(Hx=!0,Ux);case"textInput":return e=t.data,e===Ux&&Hx?null:e;default:return null}}function GT(e,t){if(Xa)return e==="compositionend"||!Ug&&dj(e,t)?(e=cj(),nu=$g=wi=null,Xa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uj&&t.locale!=="ko"?null:t.data;default:return null}}var YT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!YT[e.type]:t==="textarea"}function hj(e,t,n,r){Z1(r),t=ju(t,"onChange"),0<t.length&&(n=new Bg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Zo=null,sl=null;function XT(e){Nj(e,0)}function Id(e){var t=es(e);if(R1(t))return e}function QT(e,t){if(e==="change")return t}var mj=!1;if(Gr){var zh;if(Gr){var $h="oninput"in document;if(!$h){var Wx=document.createElement("div");Wx.setAttribute("oninput","return;"),$h=typeof Wx.oninput=="function"}zh=$h}else zh=!1;mj=zh&&(!document.documentMode||9<document.documentMode)}function Vx(){Zo&&(Zo.detachEvent("onpropertychange",pj),sl=Zo=null)}function pj(e){if(e.propertyName==="value"&&Id(sl)){var t=[];hj(t,sl,e,Lg(e)),q1(XT,t)}}function JT(e,t,n){e==="focusin"?(Vx(),Zo=t,sl=n,Zo.attachEvent("onpropertychange",pj)):e==="focusout"&&Vx()}function eA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Id(sl)}function tA(e,t){if(e==="click")return Id(t)}function nA(e,t){if(e==="input"||e==="change")return Id(t)}function rA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hr=typeof Object.is=="function"?Object.is:rA;function ol(e,t){if(hr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Mm.call(t,i)||!hr(e[i],t[i]))return!1}return!0}function Kx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qx(e,t){var n=Kx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kx(n)}}function gj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vj(){for(var e=window,t=gu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gu(e.document)}return t}function Hg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function iA(e){var t=vj(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&gj(n.ownerDocument.documentElement,n)){if(r!==null&&Hg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=qx(n,a);var l=qx(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var aA=Gr&&"documentMode"in document&&11>=document.documentMode,Qa=null,Qm=null,Wo=null,Jm=!1;function Gx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jm||Qa==null||Qa!==gu(r)||(r=Qa,"selectionStart"in r&&Hg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wo&&ol(Wo,r)||(Wo=r,r=ju(Qm,"onSelect"),0<r.length&&(t=new Bg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qa)))}function kc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ja={animationend:kc("Animation","AnimationEnd"),animationiteration:kc("Animation","AnimationIteration"),animationstart:kc("Animation","AnimationStart"),transitionend:kc("Transition","TransitionEnd")},Bh={},yj={};Gr&&(yj=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function Rd(e){if(Bh[e])return Bh[e];if(!Ja[e])return e;var t=Ja[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in yj)return Bh[e]=t[n];return e}var xj=Rd("animationend"),bj=Rd("animationiteration"),_j=Rd("animationstart"),wj=Rd("transitionend"),jj=new Map,Yx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zi(e,t){jj.set(e,t),Oa(t,[e])}for(var Fh=0;Fh<Yx.length;Fh++){var Uh=Yx[Fh],sA=Uh.toLowerCase(),oA=Uh[0].toUpperCase()+Uh.slice(1);zi(sA,"on"+oA)}zi(xj,"onAnimationEnd");zi(bj,"onAnimationIteration");zi(_j,"onAnimationStart");zi("dblclick","onDoubleClick");zi("focusin","onFocus");zi("focusout","onBlur");zi(wj,"onTransitionEnd");xs("onMouseEnter",["mouseout","mouseover"]);xs("onMouseLeave",["mouseout","mouseover"]);xs("onPointerEnter",["pointerout","pointerover"]);xs("onPointerLeave",["pointerout","pointerover"]);Oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lA=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function Xx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,sT(r,t,void 0,e),e.currentTarget=null}function Nj(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var l=r.length-1;0<=l;l--){var u=r[l],d=u.instance,m=u.currentTarget;if(u=u.listener,d!==a&&i.isPropagationStopped())break e;Xx(i,u,m),a=d}else for(l=0;l<r.length;l++){if(u=r[l],d=u.instance,m=u.currentTarget,u=u.listener,d!==a&&i.isPropagationStopped())break e;Xx(i,u,m),a=d}}}if(yu)throw e=qm,yu=!1,qm=null,e}function Be(e,t){var n=t[ip];n===void 0&&(n=t[ip]=new Set);var r=e+"__bubble";n.has(r)||(Sj(t,e,2,!1),n.add(r))}function Hh(e,t,n){var r=0;t&&(r|=4),Sj(n,e,r,t)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function ll(e){if(!e[Cc]){e[Cc]=!0,A1.forEach(function(n){n!=="selectionchange"&&(lA.has(n)||Hh(n,!1,e),Hh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cc]||(t[Cc]=!0,Hh("selectionchange",!1,t))}}function Sj(e,t,n,r){switch(lj(t)){case 1:var i=wT;break;case 4:i=jT;break;default:i=zg}n=i.bind(null,t,n,e),i=void 0,!Km||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Zh(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;u!==null;){if(l=ia(u),l===null)return;if(d=l.tag,d===5||d===6){r=a=l;continue e}u=u.parentNode}}r=r.return}q1(function(){var m=a,h=Lg(n),f=[];e:{var g=jj.get(e);if(g!==void 0){var y=Bg,j=e;switch(e){case"keypress":if(ru(n)===0)break e;case"keydown":case"keyup":y=zT;break;case"focusin":j="focus",y=Rh;break;case"focusout":j="blur",y=Rh;break;case"beforeblur":case"afterblur":y=Rh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=$x;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=PT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=FT;break;case xj:case bj:case _j:y=ET;break;case wj:y=HT;break;case"scroll":y=NT;break;case"wheel":y=WT;break;case"copy":case"cut":case"paste":y=TT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Fx}var w=(t&4)!==0,P=!w&&e==="scroll",b=w?g!==null?g+"Capture":null:g;w=[];for(var N=m,_;N!==null;){_=N;var k=_.stateNode;if(_.tag===5&&k!==null&&(_=k,b!==null&&(k=nl(N,b),k!=null&&w.push(cl(N,k,_)))),P)break;N=N.return}0<w.length&&(g=new y(g,j,null,n,h),f.push({event:g,listeners:w}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",g&&n!==Wm&&(j=n.relatedTarget||n.fromElement)&&(ia(j)||j[Yr]))break e;if((y||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,y?(j=n.relatedTarget||n.toElement,y=m,j=j?ia(j):null,j!==null&&(P=Ta(j),j!==P||j.tag!==5&&j.tag!==6)&&(j=null)):(y=null,j=m),y!==j)){if(w=$x,k="onMouseLeave",b="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(w=Fx,k="onPointerLeave",b="onPointerEnter",N="pointer"),P=y==null?g:es(y),_=j==null?g:es(j),g=new w(k,N+"leave",y,n,h),g.target=P,g.relatedTarget=_,k=null,ia(h)===m&&(w=new w(b,N+"enter",j,n,h),w.target=_,w.relatedTarget=P,k=w),P=k,y&&j)t:{for(w=y,b=j,N=0,_=w;_;_=Va(_))N++;for(_=0,k=b;k;k=Va(k))_++;for(;0<N-_;)w=Va(w),N--;for(;0<_-N;)b=Va(b),_--;for(;N--;){if(w===b||b!==null&&w===b.alternate)break t;w=Va(w),b=Va(b)}w=null}else w=null;y!==null&&Qx(f,g,y,w,!1),j!==null&&P!==null&&Qx(f,P,j,w,!0)}}e:{if(g=m?es(m):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var C=QT;else if(Zx(g))if(mj)C=nA;else{C=eA;var A=JT}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(C=tA);if(C&&(C=C(e,m))){hj(f,C,n,h);break e}A&&A(e,g,m),e==="focusout"&&(A=g._wrapperState)&&A.controlled&&g.type==="number"&&Bm(g,"number",g.value)}switch(A=m?es(m):window,e){case"focusin":(Zx(A)||A.contentEditable==="true")&&(Qa=A,Qm=m,Wo=null);break;case"focusout":Wo=Qm=Qa=null;break;case"mousedown":Jm=!0;break;case"contextmenu":case"mouseup":case"dragend":Jm=!1,Gx(f,n,h);break;case"selectionchange":if(aA)break;case"keydown":case"keyup":Gx(f,n,h)}var O;if(Ug)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Xa?dj(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(uj&&n.locale!=="ko"&&(Xa||I!=="onCompositionStart"?I==="onCompositionEnd"&&Xa&&(O=cj()):(wi=h,$g="value"in wi?wi.value:wi.textContent,Xa=!0)),A=ju(m,I),0<A.length&&(I=new Bx(I,e,null,n,h),f.push({event:I,listeners:A}),O?I.data=O:(O=fj(n),O!==null&&(I.data=O)))),(O=KT?qT(e,n):GT(e,n))&&(m=ju(m,"onBeforeInput"),0<m.length&&(h=new Bx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:m}),h.data=O))}Nj(f,t)})}function cl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ju(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=nl(e,n),a!=null&&r.unshift(cl(e,a,i)),a=nl(e,t),a!=null&&r.push(cl(e,a,i))),e=e.return}return r}function Va(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qx(e,t,n,r,i){for(var a=t._reactName,l=[];n!==null&&n!==r;){var u=n,d=u.alternate,m=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&m!==null&&(u=m,i?(d=nl(n,a),d!=null&&l.unshift(cl(n,d,u))):i||(d=nl(n,a),d!=null&&l.push(cl(n,d,u)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var cA=/\r\n?/g,uA=/\u0000|\uFFFD/g;function Jx(e){return(typeof e=="string"?e:""+e).replace(cA,`
`).replace(uA,"")}function Ec(e,t,n){if(t=Jx(t),Jx(e)!==t&&n)throw Error(ee(425))}function Nu(){}var ep=null,tp=null;function np(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rp=typeof setTimeout=="function"?setTimeout:void 0,dA=typeof clearTimeout=="function"?clearTimeout:void 0,eb=typeof Promise=="function"?Promise:void 0,fA=typeof queueMicrotask=="function"?queueMicrotask:typeof eb<"u"?function(e){return eb.resolve(null).then(e).catch(hA)}:rp;function hA(e){setTimeout(function(){throw e})}function Wh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),al(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);al(t)}function ki(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),jr="__reactFiber$"+Zs,ul="__reactProps$"+Zs,Yr="__reactContainer$"+Zs,ip="__reactEvents$"+Zs,mA="__reactListeners$"+Zs,pA="__reactHandles$"+Zs;function ia(e){var t=e[jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yr]||n[jr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tb(e);e!==null;){if(n=e[jr])return n;e=tb(e)}return t}e=n,n=e.parentNode}return null}function Ml(e){return e=e[jr]||e[Yr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function es(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function zd(e){return e[ul]||null}var ap=[],ts=-1;function $i(e){return{current:e}}function Ue(e){0>ts||(e.current=ap[ts],ap[ts]=null,ts--)}function ze(e,t){ts++,ap[ts]=e.current,e.current=t}var Di={},$t=$i(Di),sn=$i(!1),ba=Di;function bs(e,t){var n=e.type.contextTypes;if(!n)return Di;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function on(e){return e=e.childContextTypes,e!=null}function Su(){Ue(sn),Ue($t)}function nb(e,t,n){if($t.current!==Di)throw Error(ee(168));ze($t,t),ze(sn,n)}function Pj(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ee(108,JO(e)||"Unknown",i));return qe({},n,r)}function Pu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Di,ba=$t.current,ze($t,e),ze(sn,sn.current),!0}function rb(e,t,n){var r=e.stateNode;if(!r)throw Error(ee(169));n?(e=Pj(e,t,ba),r.__reactInternalMemoizedMergedChildContext=e,Ue(sn),Ue($t),ze($t,e)):Ue(sn),ze(sn,n)}var Rr=null,$d=!1,Vh=!1;function kj(e){Rr===null?Rr=[e]:Rr.push(e)}function gA(e){$d=!0,kj(e)}function Bi(){if(!Vh&&Rr!==null){Vh=!0;var e=0,t=Ee;try{var n=Rr;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Rr=null,$d=!1}catch(i){throw Rr!==null&&(Rr=Rr.slice(e+1)),Q1(Dg,Bi),i}finally{Ee=t,Vh=!1}}return null}var ns=[],rs=0,ku=null,Cu=0,Rn=[],zn=0,_a=null,Br=1,Fr="";function Qi(e,t){ns[rs++]=Cu,ns[rs++]=ku,ku=e,Cu=t}function Cj(e,t,n){Rn[zn++]=Br,Rn[zn++]=Fr,Rn[zn++]=_a,_a=e;var r=Br;e=Fr;var i=32-dr(r)-1;r&=~(1<<i),n+=1;var a=32-dr(t)+i;if(30<a){var l=i-i%5;a=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Br=1<<32-dr(t)+i|n<<i|r,Fr=a+e}else Br=1<<a|n<<i|r,Fr=e}function Zg(e){e.return!==null&&(Qi(e,1),Cj(e,1,0))}function Wg(e){for(;e===ku;)ku=ns[--rs],ns[rs]=null,Cu=ns[--rs],ns[rs]=null;for(;e===_a;)_a=Rn[--zn],Rn[zn]=null,Fr=Rn[--zn],Rn[zn]=null,Br=Rn[--zn],Rn[zn]=null}var bn=null,yn=null,He=!1,or=null;function Ej(e,t){var n=Un(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ib(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bn=e,yn=ki(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bn=e,yn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_a!==null?{id:Br,overflow:Fr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Un(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,bn=e,yn=null,!0):!1;default:return!1}}function sp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function op(e){if(He){var t=yn;if(t){var n=t;if(!ib(e,t)){if(sp(e))throw Error(ee(418));t=ki(n.nextSibling);var r=bn;t&&ib(e,t)?Ej(r,n):(e.flags=e.flags&-4097|2,He=!1,bn=e)}}else{if(sp(e))throw Error(ee(418));e.flags=e.flags&-4097|2,He=!1,bn=e}}}function ab(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bn=e}function Oc(e){if(e!==bn)return!1;if(!He)return ab(e),He=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!np(e.type,e.memoizedProps)),t&&(t=yn)){if(sp(e))throw Oj(),Error(ee(418));for(;t;)Ej(e,t),t=ki(t.nextSibling)}if(ab(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yn=ki(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yn=null}}else yn=bn?ki(e.stateNode.nextSibling):null;return!0}function Oj(){for(var e=yn;e;)e=ki(e.nextSibling)}function _s(){yn=bn=null,He=!1}function Vg(e){or===null?or=[e]:or.push(e)}var vA=ri.ReactCurrentBatchConfig;function wo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var u=i.refs;l===null?delete u[a]:u[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,e))}return e}function Tc(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sb(e){var t=e._init;return t(e._payload)}function Tj(e){function t(b,N){if(e){var _=b.deletions;_===null?(b.deletions=[N],b.flags|=16):_.push(N)}}function n(b,N){if(!e)return null;for(;N!==null;)t(b,N),N=N.sibling;return null}function r(b,N){for(b=new Map;N!==null;)N.key!==null?b.set(N.key,N):b.set(N.index,N),N=N.sibling;return b}function i(b,N){return b=Ti(b,N),b.index=0,b.sibling=null,b}function a(b,N,_){return b.index=_,e?(_=b.alternate,_!==null?(_=_.index,_<N?(b.flags|=2,N):_):(b.flags|=2,N)):(b.flags|=1048576,N)}function l(b){return e&&b.alternate===null&&(b.flags|=2),b}function u(b,N,_,k){return N===null||N.tag!==6?(N=Jh(_,b.mode,k),N.return=b,N):(N=i(N,_),N.return=b,N)}function d(b,N,_,k){var C=_.type;return C===Ya?h(b,N,_.props.children,k,_.key):N!==null&&(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===mi&&sb(C)===N.type)?(k=i(N,_.props),k.ref=wo(b,N,_),k.return=b,k):(k=uu(_.type,_.key,_.props,null,b.mode,k),k.ref=wo(b,N,_),k.return=b,k)}function m(b,N,_,k){return N===null||N.tag!==4||N.stateNode.containerInfo!==_.containerInfo||N.stateNode.implementation!==_.implementation?(N=em(_,b.mode,k),N.return=b,N):(N=i(N,_.children||[]),N.return=b,N)}function h(b,N,_,k,C){return N===null||N.tag!==7?(N=ma(_,b.mode,k,C),N.return=b,N):(N=i(N,_),N.return=b,N)}function f(b,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Jh(""+N,b.mode,_),N.return=b,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case bc:return _=uu(N.type,N.key,N.props,null,b.mode,_),_.ref=wo(b,null,N),_.return=b,_;case Ga:return N=em(N,b.mode,_),N.return=b,N;case mi:var k=N._init;return f(b,k(N._payload),_)}if(Io(N)||vo(N))return N=ma(N,b.mode,_,null),N.return=b,N;Tc(b,N)}return null}function g(b,N,_,k){var C=N!==null?N.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:u(b,N,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bc:return _.key===C?d(b,N,_,k):null;case Ga:return _.key===C?m(b,N,_,k):null;case mi:return C=_._init,g(b,N,C(_._payload),k)}if(Io(_)||vo(_))return C!==null?null:h(b,N,_,k,null);Tc(b,_)}return null}function y(b,N,_,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(_)||null,u(N,b,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case bc:return b=b.get(k.key===null?_:k.key)||null,d(N,b,k,C);case Ga:return b=b.get(k.key===null?_:k.key)||null,m(N,b,k,C);case mi:var A=k._init;return y(b,N,_,A(k._payload),C)}if(Io(k)||vo(k))return b=b.get(_)||null,h(N,b,k,C,null);Tc(N,k)}return null}function j(b,N,_,k){for(var C=null,A=null,O=N,I=N=0,B=null;O!==null&&I<_.length;I++){O.index>I?(B=O,O=null):B=O.sibling;var D=g(b,O,_[I],k);if(D===null){O===null&&(O=B);break}e&&O&&D.alternate===null&&t(b,O),N=a(D,N,I),A===null?C=D:A.sibling=D,A=D,O=B}if(I===_.length)return n(b,O),He&&Qi(b,I),C;if(O===null){for(;I<_.length;I++)O=f(b,_[I],k),O!==null&&(N=a(O,N,I),A===null?C=O:A.sibling=O,A=O);return He&&Qi(b,I),C}for(O=r(b,O);I<_.length;I++)B=y(O,b,I,_[I],k),B!==null&&(e&&B.alternate!==null&&O.delete(B.key===null?I:B.key),N=a(B,N,I),A===null?C=B:A.sibling=B,A=B);return e&&O.forEach(function(M){return t(b,M)}),He&&Qi(b,I),C}function w(b,N,_,k){var C=vo(_);if(typeof C!="function")throw Error(ee(150));if(_=C.call(_),_==null)throw Error(ee(151));for(var A=C=null,O=N,I=N=0,B=null,D=_.next();O!==null&&!D.done;I++,D=_.next()){O.index>I?(B=O,O=null):B=O.sibling;var M=g(b,O,D.value,k);if(M===null){O===null&&(O=B);break}e&&O&&M.alternate===null&&t(b,O),N=a(M,N,I),A===null?C=M:A.sibling=M,A=M,O=B}if(D.done)return n(b,O),He&&Qi(b,I),C;if(O===null){for(;!D.done;I++,D=_.next())D=f(b,D.value,k),D!==null&&(N=a(D,N,I),A===null?C=D:A.sibling=D,A=D);return He&&Qi(b,I),C}for(O=r(b,O);!D.done;I++,D=_.next())D=y(O,b,I,D.value,k),D!==null&&(e&&D.alternate!==null&&O.delete(D.key===null?I:D.key),N=a(D,N,I),A===null?C=D:A.sibling=D,A=D);return e&&O.forEach(function($){return t(b,$)}),He&&Qi(b,I),C}function P(b,N,_,k){if(typeof _=="object"&&_!==null&&_.type===Ya&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case bc:e:{for(var C=_.key,A=N;A!==null;){if(A.key===C){if(C=_.type,C===Ya){if(A.tag===7){n(b,A.sibling),N=i(A,_.props.children),N.return=b,b=N;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===mi&&sb(C)===A.type){n(b,A.sibling),N=i(A,_.props),N.ref=wo(b,A,_),N.return=b,b=N;break e}n(b,A);break}else t(b,A);A=A.sibling}_.type===Ya?(N=ma(_.props.children,b.mode,k,_.key),N.return=b,b=N):(k=uu(_.type,_.key,_.props,null,b.mode,k),k.ref=wo(b,N,_),k.return=b,b=k)}return l(b);case Ga:e:{for(A=_.key;N!==null;){if(N.key===A)if(N.tag===4&&N.stateNode.containerInfo===_.containerInfo&&N.stateNode.implementation===_.implementation){n(b,N.sibling),N=i(N,_.children||[]),N.return=b,b=N;break e}else{n(b,N);break}else t(b,N);N=N.sibling}N=em(_,b.mode,k),N.return=b,b=N}return l(b);case mi:return A=_._init,P(b,N,A(_._payload),k)}if(Io(_))return j(b,N,_,k);if(vo(_))return w(b,N,_,k);Tc(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,N!==null&&N.tag===6?(n(b,N.sibling),N=i(N,_),N.return=b,b=N):(n(b,N),N=Jh(_,b.mode,k),N.return=b,b=N),l(b)):n(b,N)}return P}var ws=Tj(!0),Aj=Tj(!1),Eu=$i(null),Ou=null,is=null,Kg=null;function qg(){Kg=is=Ou=null}function Gg(e){var t=Eu.current;Ue(Eu),e._currentValue=t}function lp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ms(e,t){Ou=e,Kg=is=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(nn=!0),e.firstContext=null)}function Wn(e){var t=e._currentValue;if(Kg!==e)if(e={context:e,memoizedValue:t,next:null},is===null){if(Ou===null)throw Error(ee(308));is=e,Ou.dependencies={lanes:0,firstContext:e}}else is=is.next=e;return t}var aa=null;function Yg(e){aa===null?aa=[e]:aa.push(e)}function Mj(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Yg(t)):(n.next=i.next,i.next=n),t.interleaved=n,Xr(e,r)}function Xr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var pi=!1;function Xg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ci(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Xr(e,n)}return i=r.interleaved,i===null?(t.next=t,Yg(r)):(t.next=i.next,i.next=t),r.interleaved=t,Xr(e,n)}function iu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ig(e,n)}}function ob(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Tu(e,t,n,r){var i=e.updateQueue;pi=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,m=d.next;d.next=null,l===null?a=m:l.next=m,l=d;var h=e.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==l&&(u===null?h.firstBaseUpdate=m:u.next=m,h.lastBaseUpdate=d))}if(a!==null){var f=i.baseState;l=0,h=m=d=null,u=a;do{var g=u.lane,y=u.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:y,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var j=e,w=u;switch(g=t,y=n,w.tag){case 1:if(j=w.payload,typeof j=="function"){f=j.call(y,f,g);break e}f=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=w.payload,g=typeof j=="function"?j.call(y,f,g):j,g==null)break e;f=qe({},f,g);break e;case 2:pi=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[u]:g.push(u))}else y={eventTime:y,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(m=h=y,d=f):h=h.next=y,l|=g;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;g=u,u=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(d=f),i.baseState=d,i.firstBaseUpdate=m,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);ja|=l,e.lanes=l,e.memoizedState=f}}function lb(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var Ll={},kr=$i(Ll),dl=$i(Ll),fl=$i(Ll);function sa(e){if(e===Ll)throw Error(ee(174));return e}function Qg(e,t){switch(ze(fl,t),ze(dl,e),ze(kr,Ll),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Um(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Um(t,e)}Ue(kr),ze(kr,t)}function js(){Ue(kr),Ue(dl),Ue(fl)}function Dj(e){sa(fl.current);var t=sa(kr.current),n=Um(t,e.type);t!==n&&(ze(dl,e),ze(kr,n))}function Jg(e){dl.current===e&&(Ue(kr),Ue(dl))}var Ve=$i(0);function Au(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Kh=[];function ev(){for(var e=0;e<Kh.length;e++)Kh[e]._workInProgressVersionPrimary=null;Kh.length=0}var au=ri.ReactCurrentDispatcher,qh=ri.ReactCurrentBatchConfig,wa=0,Ke=null,ot=null,pt=null,Mu=!1,Vo=!1,hl=0,yA=0;function Mt(){throw Error(ee(321))}function tv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hr(e[n],t[n]))return!1;return!0}function nv(e,t,n,r,i,a){if(wa=a,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,au.current=e===null||e.memoizedState===null?wA:jA,e=n(r,i),Vo){a=0;do{if(Vo=!1,hl=0,25<=a)throw Error(ee(301));a+=1,pt=ot=null,t.updateQueue=null,au.current=NA,e=n(r,i)}while(Vo)}if(au.current=Lu,t=ot!==null&&ot.next!==null,wa=0,pt=ot=Ke=null,Mu=!1,t)throw Error(ee(300));return e}function rv(){var e=hl!==0;return hl=0,e}function wr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ke.memoizedState=pt=e:pt=pt.next=e,pt}function Vn(){if(ot===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=pt===null?Ke.memoizedState:pt.next;if(t!==null)pt=t,ot=e;else{if(e===null)throw Error(ee(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},pt===null?Ke.memoizedState=pt=e:pt=pt.next=e}return pt}function ml(e,t){return typeof t=="function"?t(e):t}function Gh(e){var t=Vn(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=ot,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var u=l=null,d=null,m=a;do{var h=m.lane;if((wa&h)===h)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:e(r,m.action);else{var f={lane:h,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(u=d=f,l=r):d=d.next=f,Ke.lanes|=h,ja|=h}m=m.next}while(m!==null&&m!==a);d===null?l=r:d.next=u,hr(r,t.memoizedState)||(nn=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Ke.lanes|=a,ja|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Yh(e){var t=Vn(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);hr(a,t.memoizedState)||(nn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ij(){}function Rj(e,t){var n=Ke,r=Vn(),i=t(),a=!hr(r.memoizedState,i);if(a&&(r.memoizedState=i,nn=!0),r=r.queue,iv(Bj.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,pl(9,$j.bind(null,n,r,i,t),void 0,null),gt===null)throw Error(ee(349));wa&30||zj(n,t,i)}return i}function zj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $j(e,t,n,r){t.value=n,t.getSnapshot=r,Fj(t)&&Uj(e)}function Bj(e,t,n){return n(function(){Fj(t)&&Uj(e)})}function Fj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hr(e,n)}catch{return!0}}function Uj(e){var t=Xr(e,1);t!==null&&fr(t,e,1,-1)}function cb(e){var t=wr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:e},t.queue=e,e=e.dispatch=_A.bind(null,Ke,e),[t.memoizedState,e]}function pl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hj(){return Vn().memoizedState}function su(e,t,n,r){var i=wr();Ke.flags|=e,i.memoizedState=pl(1|t,n,void 0,r===void 0?null:r)}function Bd(e,t,n,r){var i=Vn();r=r===void 0?null:r;var a=void 0;if(ot!==null){var l=ot.memoizedState;if(a=l.destroy,r!==null&&tv(r,l.deps)){i.memoizedState=pl(t,n,a,r);return}}Ke.flags|=e,i.memoizedState=pl(1|t,n,a,r)}function ub(e,t){return su(8390656,8,e,t)}function iv(e,t){return Bd(2048,8,e,t)}function Zj(e,t){return Bd(4,2,e,t)}function Wj(e,t){return Bd(4,4,e,t)}function Vj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kj(e,t,n){return n=n!=null?n.concat([e]):null,Bd(4,4,Vj.bind(null,t,e),n)}function av(){}function qj(e,t){var n=Vn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Gj(e,t){var n=Vn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yj(e,t,n){return wa&21?(hr(n,t)||(n=tj(),Ke.lanes|=n,ja|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,nn=!0),e.memoizedState=n)}function xA(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=qh.transition;qh.transition={};try{e(!1),t()}finally{Ee=n,qh.transition=r}}function Xj(){return Vn().memoizedState}function bA(e,t,n){var r=Oi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qj(e))Jj(t,n);else if(n=Mj(e,t,n,r),n!==null){var i=Kt();fr(n,e,r,i),e2(n,t,r)}}function _A(e,t,n){var r=Oi(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qj(e))Jj(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,u=a(l,n);if(i.hasEagerState=!0,i.eagerState=u,hr(u,l)){var d=t.interleaved;d===null?(i.next=i,Yg(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}n=Mj(e,t,i,r),n!==null&&(i=Kt(),fr(n,e,r,i),e2(n,t,r))}}function Qj(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function Jj(e,t){Vo=Mu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function e2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ig(e,n)}}var Lu={readContext:Wn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},wA={readContext:Wn,useCallback:function(e,t){return wr().memoizedState=[e,t===void 0?null:t],e},useContext:Wn,useEffect:ub,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,su(4194308,4,Vj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return su(4194308,4,e,t)},useInsertionEffect:function(e,t){return su(4,2,e,t)},useMemo:function(e,t){var n=wr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=bA.bind(null,Ke,e),[r.memoizedState,e]},useRef:function(e){var t=wr();return e={current:e},t.memoizedState=e},useState:cb,useDebugValue:av,useDeferredValue:function(e){return wr().memoizedState=e},useTransition:function(){var e=cb(!1),t=e[0];return e=xA.bind(null,e[1]),wr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ke,i=wr();if(He){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=t(),gt===null)throw Error(ee(349));wa&30||zj(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ub(Bj.bind(null,r,a,e),[e]),r.flags|=2048,pl(9,$j.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=wr(),t=gt.identifierPrefix;if(He){var n=Fr,r=Br;n=(r&~(1<<32-dr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yA++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jA={readContext:Wn,useCallback:qj,useContext:Wn,useEffect:iv,useImperativeHandle:Kj,useInsertionEffect:Zj,useLayoutEffect:Wj,useMemo:Gj,useReducer:Gh,useRef:Hj,useState:function(){return Gh(ml)},useDebugValue:av,useDeferredValue:function(e){var t=Vn();return Yj(t,ot.memoizedState,e)},useTransition:function(){var e=Gh(ml)[0],t=Vn().memoizedState;return[e,t]},useMutableSource:Ij,useSyncExternalStore:Rj,useId:Xj,unstable_isNewReconciler:!1},NA={readContext:Wn,useCallback:qj,useContext:Wn,useEffect:iv,useImperativeHandle:Kj,useInsertionEffect:Zj,useLayoutEffect:Wj,useMemo:Gj,useReducer:Yh,useRef:Hj,useState:function(){return Yh(ml)},useDebugValue:av,useDeferredValue:function(e){var t=Vn();return ot===null?t.memoizedState=e:Yj(t,ot.memoizedState,e)},useTransition:function(){var e=Yh(ml)[0],t=Vn().memoizedState;return[e,t]},useMutableSource:Ij,useSyncExternalStore:Rj,useId:Xj,unstable_isNewReconciler:!1};function ar(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function cp(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fd={isMounted:function(e){return(e=e._reactInternals)?Ta(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kt(),i=Oi(e),a=Vr(r,i);a.payload=t,n!=null&&(a.callback=n),t=Ci(e,a,i),t!==null&&(fr(t,e,i,r),iu(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kt(),i=Oi(e),a=Vr(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Ci(e,a,i),t!==null&&(fr(t,e,i,r),iu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kt(),r=Oi(e),i=Vr(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ci(e,i,r),t!==null&&(fr(t,e,r,n),iu(t,e,r))}};function db(e,t,n,r,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,l):t.prototype&&t.prototype.isPureReactComponent?!ol(n,r)||!ol(i,a):!0}function t2(e,t,n){var r=!1,i=Di,a=t.contextType;return typeof a=="object"&&a!==null?a=Wn(a):(i=on(t)?ba:$t.current,r=t.contextTypes,a=(r=r!=null)?bs(e,i):Di),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function fb(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fd.enqueueReplaceState(t,t.state,null)}function up(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Xg(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Wn(a):(a=on(t)?ba:$t.current,i.context=bs(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(cp(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Fd.enqueueReplaceState(i,i.state,null),Tu(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ns(e,t){try{var n="",r=t;do n+=QO(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Xh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function dp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var SA=typeof WeakMap=="function"?WeakMap:Map;function n2(e,t,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Iu||(Iu=!0,_p=r),dp(e,t)},n}function r2(e,t,n){n=Vr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){dp(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){dp(e,t),typeof r!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function hb(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new SA;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=$A.bind(null,e,t,n),t.then(e,e))}function mb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pb(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vr(-1,1),t.tag=2,Ci(n,t,1))),n.lanes|=1),e)}var PA=ri.ReactCurrentOwner,nn=!1;function Ht(e,t,n,r){t.child=e===null?Aj(t,null,n,r):ws(t,e.child,n,r)}function gb(e,t,n,r,i){n=n.render;var a=t.ref;return ms(t,i),r=nv(e,t,n,r,a,i),n=rv(),e!==null&&!nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qr(e,t,i)):(He&&n&&Zg(t),t.flags|=1,Ht(e,t,r,i),t.child)}function vb(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!hv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,i2(e,t,a,r,i)):(e=uu(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:ol,n(l,r)&&e.ref===t.ref)return Qr(e,t,i)}return t.flags|=1,e=Ti(a,r),e.ref=t.ref,e.return=t,t.child=e}function i2(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(ol(a,r)&&e.ref===t.ref)if(nn=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(nn=!0);else return t.lanes=e.lanes,Qr(e,t,i)}return fp(e,t,n,r,i)}function a2(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(ss,hn),hn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(ss,hn),hn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ze(ss,hn),hn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,ze(ss,hn),hn|=r;return Ht(e,t,i,n),t.child}function s2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fp(e,t,n,r,i){var a=on(n)?ba:$t.current;return a=bs(t,a),ms(t,i),n=nv(e,t,n,r,a,i),r=rv(),e!==null&&!nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qr(e,t,i)):(He&&r&&Zg(t),t.flags|=1,Ht(e,t,n,i),t.child)}function yb(e,t,n,r,i){if(on(n)){var a=!0;Pu(t)}else a=!1;if(ms(t,i),t.stateNode===null)ou(e,t),t2(t,n,r),up(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var d=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=Wn(m):(m=on(n)?ba:$t.current,m=bs(t,m));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||d!==m)&&fb(t,l,r,m),pi=!1;var g=t.memoizedState;l.state=g,Tu(t,r,l,i),d=t.memoizedState,u!==r||g!==d||sn.current||pi?(typeof h=="function"&&(cp(t,n,h,r),d=t.memoizedState),(u=pi||db(t,n,u,r,g,d,m))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),l.props=r,l.state=d,l.context=m,r=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Lj(e,t),u=t.memoizedProps,m=t.type===t.elementType?u:ar(t.type,u),l.props=m,f=t.pendingProps,g=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Wn(d):(d=on(n)?ba:$t.current,d=bs(t,d));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==f||g!==d)&&fb(t,l,r,d),pi=!1,g=t.memoizedState,l.state=g,Tu(t,r,l,i);var j=t.memoizedState;u!==f||g!==j||sn.current||pi?(typeof y=="function"&&(cp(t,n,y,r),j=t.memoizedState),(m=pi||db(t,n,m,r,g,j,d)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,j,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,j,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),l.props=r,l.state=j,l.context=d,r=m):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return hp(e,t,n,r,a,i)}function hp(e,t,n,r,i,a){s2(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&rb(t,n,!1),Qr(e,t,a);r=t.stateNode,PA.current=t;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=ws(t,e.child,null,a),t.child=ws(t,null,u,a)):Ht(e,t,u,a),t.memoizedState=r.state,i&&rb(t,n,!0),t.child}function o2(e){var t=e.stateNode;t.pendingContext?nb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nb(e,t.context,!1),Qg(e,t.containerInfo)}function xb(e,t,n,r,i){return _s(),Vg(i),t.flags|=256,Ht(e,t,n,r),t.child}var mp={dehydrated:null,treeContext:null,retryLane:0};function pp(e){return{baseLanes:e,cachePool:null,transitions:null}}function l2(e,t,n){var r=t.pendingProps,i=Ve.current,a=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ze(Ve,i&1),e===null)return op(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Zd(l,r,0,null),e=ma(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=pp(n),t.memoizedState=mp,e):sv(t,l));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return kA(e,t,l,r,u,i,n);if(a){a=r.fallback,l=t.mode,i=e.child,u=i.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Ti(i,d),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?a=Ti(u,a):(a=ma(a,l,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=e.child.memoizedState,l=l===null?pp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=mp,r}return a=e.child,e=a.sibling,r=Ti(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function sv(e,t){return t=Zd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ac(e,t,n,r){return r!==null&&Vg(r),ws(t,e.child,null,n),e=sv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kA(e,t,n,r,i,a,l){if(n)return t.flags&256?(t.flags&=-257,r=Xh(Error(ee(422))),Ac(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Zd({mode:"visible",children:r.children},i,0,null),a=ma(a,i,l,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&ws(t,e.child,null,l),t.child.memoizedState=pp(l),t.memoizedState=mp,a);if(!(t.mode&1))return Ac(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,a=Error(ee(419)),r=Xh(a,r,void 0),Ac(e,t,l,r)}if(u=(l&e.childLanes)!==0,nn||u){if(r=gt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Xr(e,i),fr(r,e,i,-1))}return fv(),r=Xh(Error(ee(421))),Ac(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=BA.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,yn=ki(i.nextSibling),bn=t,He=!0,or=null,e!==null&&(Rn[zn++]=Br,Rn[zn++]=Fr,Rn[zn++]=_a,Br=e.id,Fr=e.overflow,_a=t),t=sv(t,r.children),t.flags|=4096,t)}function bb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),lp(e.return,t,n)}function Qh(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function c2(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Ht(e,t,r.children,n),r=Ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bb(e,n,t);else if(e.tag===19)bb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze(Ve,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Au(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qh(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Au(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qh(t,!0,n,null,a);break;case"together":Qh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ou(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ja|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,n=Ti(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ti(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function CA(e,t,n){switch(t.tag){case 3:o2(t),_s();break;case 5:Dj(t);break;case 1:on(t.type)&&Pu(t);break;case 4:Qg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ze(Eu,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze(Ve,Ve.current&1),t.flags|=128,null):n&t.child.childLanes?l2(e,t,n):(ze(Ve,Ve.current&1),e=Qr(e,t,n),e!==null?e.sibling:null);ze(Ve,Ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return c2(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(Ve,Ve.current),r)break;return null;case 22:case 23:return t.lanes=0,a2(e,t,n)}return Qr(e,t,n)}var u2,gp,d2,f2;u2=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gp=function(){};d2=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,sa(kr.current);var a=null;switch(n){case"input":i=zm(e,i),r=zm(e,r),a=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),a=[];break;case"textarea":i=Fm(e,i),r=Fm(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Nu)}Hm(n,r);var l;n=null;for(m in i)if(!r.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var u=i[m];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(el.hasOwnProperty(m)?a||(a=[]):(a=a||[]).push(m,null));for(m in r){var d=r[m];if(u=i!=null?i[m]:void 0,r.hasOwnProperty(m)&&d!==u&&(d!=null||u!=null))if(m==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(a||(a=[]),a.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(a=a||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(el.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&Be("scroll",e),a||u===d||(a=[])):(a=a||[]).push(m,d))}n&&(a=a||[]).push("style",n);var m=a;(t.updateQueue=m)&&(t.flags|=4)}};f2=function(e,t,n,r){n!==r&&(t.flags|=4)};function jo(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function EA(e,t,n){var r=t.pendingProps;switch(Wg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(t),null;case 1:return on(t.type)&&Su(),Lt(t),null;case 3:return r=t.stateNode,js(),Ue(sn),Ue($t),ev(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Oc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,or!==null&&(Np(or),or=null))),gp(e,t),Lt(t),null;case 5:Jg(t);var i=sa(fl.current);if(n=t.type,e!==null&&t.stateNode!=null)d2(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ee(166));return Lt(t),null}if(e=sa(kr.current),Oc(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[jr]=t,r[ul]=a,e=(t.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<zo.length;i++)Be(zo[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Ex(r,a),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Be("invalid",r);break;case"textarea":Tx(r,a),Be("invalid",r)}Hm(n,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];l==="children"?typeof u=="string"?r.textContent!==u&&(a.suppressHydrationWarning!==!0&&Ec(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&Ec(r.textContent,u,e),i=["children",""+u]):el.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Be("scroll",r)}switch(n){case"input":_c(r),Ox(r,a,!0);break;case"textarea":_c(r),Ax(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Nu)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=B1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[jr]=t,e[ul]=r,u2(e,t,!1,!1),t.stateNode=e;e:{switch(l=Zm(n,r),n){case"dialog":Be("cancel",e),Be("close",e),i=r;break;case"iframe":case"object":case"embed":Be("load",e),i=r;break;case"video":case"audio":for(i=0;i<zo.length;i++)Be(zo[i],e);i=r;break;case"source":Be("error",e),i=r;break;case"img":case"image":case"link":Be("error",e),Be("load",e),i=r;break;case"details":Be("toggle",e),i=r;break;case"input":Ex(e,r),i=zm(e,r),Be("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Be("invalid",e);break;case"textarea":Tx(e,r),i=Fm(e,r),Be("invalid",e);break;default:i=r}Hm(n,i),u=i;for(a in u)if(u.hasOwnProperty(a)){var d=u[a];a==="style"?H1(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&F1(e,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&tl(e,d):typeof d=="number"&&tl(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(el.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Be("scroll",e):d!=null&&Og(e,a,d,l))}switch(n){case"input":_c(e),Ox(e,r,!1);break;case"textarea":_c(e),Ax(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Li(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?us(e,!!r.multiple,a,!1):r.defaultValue!=null&&us(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Nu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Lt(t),null;case 6:if(e&&t.stateNode!=null)f2(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ee(166));if(n=sa(fl.current),sa(kr.current),Oc(t)){if(r=t.stateNode,n=t.memoizedProps,r[jr]=t,(a=r.nodeValue!==n)&&(e=bn,e!==null))switch(e.tag){case 3:Ec(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ec(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jr]=t,t.stateNode=r}return Lt(t),null;case 13:if(Ue(Ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(He&&yn!==null&&t.mode&1&&!(t.flags&128))Oj(),_s(),t.flags|=98560,a=!1;else if(a=Oc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ee(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ee(317));a[jr]=t}else _s(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Lt(t),a=!1}else or!==null&&(Np(or),or=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ve.current&1?ct===0&&(ct=3):fv())),t.updateQueue!==null&&(t.flags|=4),Lt(t),null);case 4:return js(),gp(e,t),e===null&&ll(t.stateNode.containerInfo),Lt(t),null;case 10:return Gg(t.type._context),Lt(t),null;case 17:return on(t.type)&&Su(),Lt(t),null;case 19:if(Ue(Ve),a=t.memoizedState,a===null)return Lt(t),null;if(r=(t.flags&128)!==0,l=a.rendering,l===null)if(r)jo(a,!1);else{if(ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Au(e),l!==null){for(t.flags|=128,jo(a,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze(Ve,Ve.current&1|2),t.child}e=e.sibling}a.tail!==null&&Je()>Ss&&(t.flags|=128,r=!0,jo(a,!1),t.lanes=4194304)}else{if(!r)if(e=Au(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),jo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!He)return Lt(t),null}else 2*Je()-a.renderingStartTime>Ss&&n!==1073741824&&(t.flags|=128,r=!0,jo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=Ve.current,ze(Ve,r?n&1|2:n&1),t):(Lt(t),null);case 22:case 23:return dv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?hn&1073741824&&(Lt(t),t.subtreeFlags&6&&(t.flags|=8192)):Lt(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function OA(e,t){switch(Wg(t),t.tag){case 1:return on(t.type)&&Su(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return js(),Ue(sn),Ue($t),ev(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Jg(t),null;case 13:if(Ue(Ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));_s()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Ve),null;case 4:return js(),null;case 10:return Gg(t.type._context),null;case 22:case 23:return dv(),null;case 24:return null;default:return null}}var Mc=!1,It=!1,TA=typeof WeakSet=="function"?WeakSet:Set,oe=null;function as(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(e,t,r)}else n.current=null}function vp(e,t,n){try{n()}catch(r){Ge(e,t,r)}}var _b=!1;function AA(e,t){if(ep=_u,e=vj(),Hg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,u=-1,d=-1,m=0,h=0,f=e,g=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(u=l+i),f!==a||r!==0&&f.nodeType!==3||(d=l+r),f.nodeType===3&&(l+=f.nodeValue.length),(y=f.firstChild)!==null;)g=f,f=y;for(;;){if(f===e)break t;if(g===n&&++m===i&&(u=l),g===a&&++h===r&&(d=l),(y=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=y}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(tp={focusedElem:e,selectionRange:n},_u=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var w=j.memoizedProps,P=j.memoizedState,b=t.stateNode,N=b.getSnapshotBeforeUpdate(t.elementType===t.type?w:ar(t.type,w),P);b.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(k){Ge(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return j=_b,_b=!1,j}function Ko(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&vp(t,n,a)}i=i.next}while(i!==r)}}function Ud(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function yp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function h2(e){var t=e.alternate;t!==null&&(e.alternate=null,h2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jr],delete t[ul],delete t[ip],delete t[mA],delete t[pA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function m2(e){return e.tag===5||e.tag===3||e.tag===4}function wb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||m2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nu));else if(r!==4&&(e=e.child,e!==null))for(xp(e,t,n),e=e.sibling;e!==null;)xp(e,t,n),e=e.sibling}function bp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(bp(e,t,n),e=e.sibling;e!==null;)bp(e,t,n),e=e.sibling}var jt=null,sr=!1;function hi(e,t,n){for(n=n.child;n!==null;)p2(e,t,n),n=n.sibling}function p2(e,t,n){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount(Ld,n)}catch{}switch(n.tag){case 5:It||as(n,t);case 6:var r=jt,i=sr;jt=null,hi(e,t,n),jt=r,sr=i,jt!==null&&(sr?(e=jt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(sr?(e=jt,n=n.stateNode,e.nodeType===8?Wh(e.parentNode,n):e.nodeType===1&&Wh(e,n),al(e)):Wh(jt,n.stateNode));break;case 4:r=jt,i=sr,jt=n.stateNode.containerInfo,sr=!0,hi(e,t,n),jt=r,sr=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&vp(n,t,l),i=i.next}while(i!==r)}hi(e,t,n);break;case 1:if(!It&&(as(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ge(n,t,u)}hi(e,t,n);break;case 21:hi(e,t,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,hi(e,t,n),It=r):hi(e,t,n);break;default:hi(e,t,n)}}function jb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new TA),t.forEach(function(r){var i=FA.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ir(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:jt=u.stateNode,sr=!1;break e;case 3:jt=u.stateNode.containerInfo,sr=!0;break e;case 4:jt=u.stateNode.containerInfo,sr=!0;break e}u=u.return}if(jt===null)throw Error(ee(160));p2(a,l,i),jt=null,sr=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(m){Ge(i,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)g2(t,e),t=t.sibling}function g2(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ir(t,e),_r(e),r&4){try{Ko(3,e,e.return),Ud(3,e)}catch(w){Ge(e,e.return,w)}try{Ko(5,e,e.return)}catch(w){Ge(e,e.return,w)}}break;case 1:ir(t,e),_r(e),r&512&&n!==null&&as(n,n.return);break;case 5:if(ir(t,e),_r(e),r&512&&n!==null&&as(n,n.return),e.flags&32){var i=e.stateNode;try{tl(i,"")}catch(w){Ge(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&z1(i,a),Zm(u,l);var m=Zm(u,a);for(l=0;l<d.length;l+=2){var h=d[l],f=d[l+1];h==="style"?H1(i,f):h==="dangerouslySetInnerHTML"?F1(i,f):h==="children"?tl(i,f):Og(i,h,f,m)}switch(u){case"input":$m(i,a);break;case"textarea":$1(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?us(i,!!a.multiple,y,!1):g!==!!a.multiple&&(a.defaultValue!=null?us(i,!!a.multiple,a.defaultValue,!0):us(i,!!a.multiple,a.multiple?[]:"",!1))}i[ul]=a}catch(w){Ge(e,e.return,w)}}break;case 6:if(ir(t,e),_r(e),r&4){if(e.stateNode===null)throw Error(ee(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(w){Ge(e,e.return,w)}}break;case 3:if(ir(t,e),_r(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{al(t.containerInfo)}catch(w){Ge(e,e.return,w)}break;case 4:ir(t,e),_r(e);break;case 13:ir(t,e),_r(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(cv=Je())),r&4&&jb(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(It=(m=It)||h,ir(t,e),It=m):ir(t,e),_r(e),r&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!h&&e.mode&1)for(oe=e,h=e.child;h!==null;){for(f=oe=h;oe!==null;){switch(g=oe,y=g.child,g.tag){case 0:case 11:case 14:case 15:Ko(4,g,g.return);break;case 1:as(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(w){Ge(r,n,w)}}break;case 5:as(g,g.return);break;case 22:if(g.memoizedState!==null){Sb(f);continue}}y!==null?(y.return=g,oe=y):Sb(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,m?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=f.stateNode,d=f.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=U1("display",l))}catch(w){Ge(e,e.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=m?"":f.memoizedProps}catch(w){Ge(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ir(t,e),_r(e),r&4&&jb(e);break;case 21:break;default:ir(t,e),_r(e)}}function _r(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(m2(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(tl(i,""),r.flags&=-33);var a=wb(e);bp(e,a,i);break;case 3:case 4:var l=r.stateNode.containerInfo,u=wb(e);xp(e,u,l);break;default:throw Error(ee(161))}}catch(d){Ge(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function MA(e,t,n){oe=e,v2(e)}function v2(e,t,n){for(var r=(e.mode&1)!==0;oe!==null;){var i=oe,a=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Mc;if(!l){var u=i.alternate,d=u!==null&&u.memoizedState!==null||It;u=Mc;var m=It;if(Mc=l,(It=d)&&!m)for(oe=i;oe!==null;)l=oe,d=l.child,l.tag===22&&l.memoizedState!==null?Pb(i):d!==null?(d.return=l,oe=d):Pb(i);for(;a!==null;)oe=a,v2(a),a=a.sibling;oe=i,Mc=u,It=m}Nb(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,oe=a):Nb(e)}}function Nb(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:It||Ud(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ar(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&lb(t,a,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}lb(t,l,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var h=m.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&al(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}It||t.flags&512&&yp(t)}catch(g){Ge(t,t.return,g)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Sb(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Pb(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ud(4,t)}catch(d){Ge(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){Ge(t,i,d)}}var a=t.return;try{yp(t)}catch(d){Ge(t,a,d)}break;case 5:var l=t.return;try{yp(t)}catch(d){Ge(t,l,d)}}}catch(d){Ge(t,t.return,d)}if(t===e){oe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,oe=u;break}oe=t.return}}var LA=Math.ceil,Du=ri.ReactCurrentDispatcher,ov=ri.ReactCurrentOwner,Zn=ri.ReactCurrentBatchConfig,Ne=0,gt=null,nt=null,kt=0,hn=0,ss=$i(0),ct=0,gl=null,ja=0,Hd=0,lv=0,qo=null,en=null,cv=0,Ss=1/0,Ir=null,Iu=!1,_p=null,Ei=null,Lc=!1,ji=null,Ru=0,Go=0,wp=null,lu=-1,cu=0;function Kt(){return Ne&6?Je():lu!==-1?lu:lu=Je()}function Oi(e){return e.mode&1?Ne&2&&kt!==0?kt&-kt:vA.transition!==null?(cu===0&&(cu=tj()),cu):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:lj(e.type)),e):1}function fr(e,t,n,r){if(50<Go)throw Go=0,wp=null,Error(ee(185));Tl(e,n,r),(!(Ne&2)||e!==gt)&&(e===gt&&(!(Ne&2)&&(Hd|=n),ct===4&&xi(e,kt)),ln(e,r),n===1&&Ne===0&&!(t.mode&1)&&(Ss=Je()+500,$d&&Bi()))}function ln(e,t){var n=e.callbackNode;vT(e,t);var r=bu(e,e===gt?kt:0);if(r===0)n!==null&&Dx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Dx(n),t===1)e.tag===0?gA(kb.bind(null,e)):kj(kb.bind(null,e)),fA(function(){!(Ne&6)&&Bi()}),n=null;else{switch(nj(r)){case 1:n=Dg;break;case 4:n=J1;break;case 16:n=xu;break;case 536870912:n=ej;break;default:n=xu}n=S2(n,y2.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function y2(e,t){if(lu=-1,cu=0,Ne&6)throw Error(ee(327));var n=e.callbackNode;if(ps()&&e.callbackNode!==n)return null;var r=bu(e,e===gt?kt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=zu(e,r);else{t=r;var i=Ne;Ne|=2;var a=b2();(gt!==e||kt!==t)&&(Ir=null,Ss=Je()+500,ha(e,t));do try{RA();break}catch(u){x2(e,u)}while(!0);qg(),Du.current=a,Ne=i,nt!==null?t=0:(gt=null,kt=0,t=ct)}if(t!==0){if(t===2&&(i=Gm(e),i!==0&&(r=i,t=jp(e,i))),t===1)throw n=gl,ha(e,0),xi(e,r),ln(e,Je()),n;if(t===6)xi(e,r);else{if(i=e.current.alternate,!(r&30)&&!DA(i)&&(t=zu(e,r),t===2&&(a=Gm(e),a!==0&&(r=a,t=jp(e,a))),t===1))throw n=gl,ha(e,0),xi(e,r),ln(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ee(345));case 2:Ji(e,en,Ir);break;case 3:if(xi(e,r),(r&130023424)===r&&(t=cv+500-Je(),10<t)){if(bu(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Kt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=rp(Ji.bind(null,e,en,Ir),t);break}Ji(e,en,Ir);break;case 4:if(xi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-dr(r);a=1<<l,l=t[l],l>i&&(i=l),r&=~a}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LA(r/1960))-r,10<r){e.timeoutHandle=rp(Ji.bind(null,e,en,Ir),r);break}Ji(e,en,Ir);break;case 5:Ji(e,en,Ir);break;default:throw Error(ee(329))}}}return ln(e,Je()),e.callbackNode===n?y2.bind(null,e):null}function jp(e,t){var n=qo;return e.current.memoizedState.isDehydrated&&(ha(e,t).flags|=256),e=zu(e,t),e!==2&&(t=en,en=n,t!==null&&Np(t)),e}function Np(e){en===null?en=e:en.push.apply(en,e)}function DA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!hr(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xi(e,t){for(t&=~lv,t&=~Hd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dr(t),r=1<<n;e[n]=-1,t&=~r}}function kb(e){if(Ne&6)throw Error(ee(327));ps();var t=bu(e,0);if(!(t&1))return ln(e,Je()),null;var n=zu(e,t);if(e.tag!==0&&n===2){var r=Gm(e);r!==0&&(t=r,n=jp(e,r))}if(n===1)throw n=gl,ha(e,0),xi(e,t),ln(e,Je()),n;if(n===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ji(e,en,Ir),ln(e,Je()),null}function uv(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(Ss=Je()+500,$d&&Bi())}}function Na(e){ji!==null&&ji.tag===0&&!(Ne&6)&&ps();var t=Ne;Ne|=1;var n=Zn.transition,r=Ee;try{if(Zn.transition=null,Ee=1,e)return e()}finally{Ee=r,Zn.transition=n,Ne=t,!(Ne&6)&&Bi()}}function dv(){hn=ss.current,Ue(ss)}function ha(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,dA(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(Wg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Su();break;case 3:js(),Ue(sn),Ue($t),ev();break;case 5:Jg(r);break;case 4:js();break;case 13:Ue(Ve);break;case 19:Ue(Ve);break;case 10:Gg(r.type._context);break;case 22:case 23:dv()}n=n.return}if(gt=e,nt=e=Ti(e.current,null),kt=hn=t,ct=0,gl=null,lv=Hd=ja=0,en=qo=null,aa!==null){for(t=0;t<aa.length;t++)if(n=aa[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var l=a.next;a.next=i,r.next=l}n.pending=r}aa=null}return e}function x2(e,t){do{var n=nt;try{if(qg(),au.current=Lu,Mu){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Mu=!1}if(wa=0,pt=ot=Ke=null,Vo=!1,hl=0,ov.current=null,n===null||n.return===null){ct=1,gl=t,nt=null;break}e:{var a=e,l=n.return,u=n,d=t;if(t=kt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,h=u,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=mb(l);if(y!==null){y.flags&=-257,pb(y,l,u,a,t),y.mode&1&&hb(a,m,t),t=y,d=m;var j=t.updateQueue;if(j===null){var w=new Set;w.add(d),t.updateQueue=w}else j.add(d);break e}else{if(!(t&1)){hb(a,m,t),fv();break e}d=Error(ee(426))}}else if(He&&u.mode&1){var P=mb(l);if(P!==null){!(P.flags&65536)&&(P.flags|=256),pb(P,l,u,a,t),Vg(Ns(d,u));break e}}a=d=Ns(d,u),ct!==4&&(ct=2),qo===null?qo=[a]:qo.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var b=n2(a,d,t);ob(a,b);break e;case 1:u=d;var N=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof N.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ei===null||!Ei.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t;var k=r2(a,u,t);ob(a,k);break e}}a=a.return}while(a!==null)}w2(n)}catch(C){t=C,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function b2(){var e=Du.current;return Du.current=Lu,e===null?Lu:e}function fv(){(ct===0||ct===3||ct===2)&&(ct=4),gt===null||!(ja&268435455)&&!(Hd&268435455)||xi(gt,kt)}function zu(e,t){var n=Ne;Ne|=2;var r=b2();(gt!==e||kt!==t)&&(Ir=null,ha(e,t));do try{IA();break}catch(i){x2(e,i)}while(!0);if(qg(),Ne=n,Du.current=r,nt!==null)throw Error(ee(261));return gt=null,kt=0,ct}function IA(){for(;nt!==null;)_2(nt)}function RA(){for(;nt!==null&&!lT();)_2(nt)}function _2(e){var t=N2(e.alternate,e,hn);e.memoizedProps=e.pendingProps,t===null?w2(e):nt=t,ov.current=null}function w2(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=OA(n,t),n!==null){n.flags&=32767,nt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ct=6,nt=null;return}}else if(n=EA(n,t,hn),n!==null){nt=n;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);ct===0&&(ct=5)}function Ji(e,t,n){var r=Ee,i=Zn.transition;try{Zn.transition=null,Ee=1,zA(e,t,n,r)}finally{Zn.transition=i,Ee=r}return null}function zA(e,t,n,r){do ps();while(ji!==null);if(Ne&6)throw Error(ee(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(yT(e,a),e===gt&&(nt=gt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lc||(Lc=!0,S2(xu,function(){return ps(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Zn.transition,Zn.transition=null;var l=Ee;Ee=1;var u=Ne;Ne|=4,ov.current=null,AA(e,n),g2(n,e),iA(tp),_u=!!ep,tp=ep=null,e.current=n,MA(n),cT(),Ne=u,Ee=l,Zn.transition=a}else e.current=n;if(Lc&&(Lc=!1,ji=e,Ru=i),a=e.pendingLanes,a===0&&(Ei=null),fT(n.stateNode),ln(e,Je()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Iu)throw Iu=!1,e=_p,_p=null,e;return Ru&1&&e.tag!==0&&ps(),a=e.pendingLanes,a&1?e===wp?Go++:(Go=0,wp=e):Go=0,Bi(),null}function ps(){if(ji!==null){var e=nj(Ru),t=Zn.transition,n=Ee;try{if(Zn.transition=null,Ee=16>e?16:e,ji===null)var r=!1;else{if(e=ji,ji=null,Ru=0,Ne&6)throw Error(ee(331));var i=Ne;for(Ne|=4,oe=e.current;oe!==null;){var a=oe,l=a.child;if(oe.flags&16){var u=a.deletions;if(u!==null){for(var d=0;d<u.length;d++){var m=u[d];for(oe=m;oe!==null;){var h=oe;switch(h.tag){case 0:case 11:case 15:Ko(8,h,a)}var f=h.child;if(f!==null)f.return=h,oe=f;else for(;oe!==null;){h=oe;var g=h.sibling,y=h.return;if(h2(h),h===m){oe=null;break}if(g!==null){g.return=y,oe=g;break}oe=y}}}var j=a.alternate;if(j!==null){var w=j.child;if(w!==null){j.child=null;do{var P=w.sibling;w.sibling=null,w=P}while(w!==null)}}oe=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,oe=l;else e:for(;oe!==null;){if(a=oe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ko(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,oe=b;break e}oe=a.return}}var N=e.current;for(oe=N;oe!==null;){l=oe;var _=l.child;if(l.subtreeFlags&2064&&_!==null)_.return=l,oe=_;else e:for(l=N;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ud(9,u)}}catch(C){Ge(u,u.return,C)}if(u===l){oe=null;break e}var k=u.sibling;if(k!==null){k.return=u.return,oe=k;break e}oe=u.return}}if(Ne=i,Bi(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot(Ld,e)}catch{}r=!0}return r}finally{Ee=n,Zn.transition=t}}return!1}function Cb(e,t,n){t=Ns(n,t),t=n2(e,t,1),e=Ci(e,t,1),t=Kt(),e!==null&&(Tl(e,1,t),ln(e,t))}function Ge(e,t,n){if(e.tag===3)Cb(e,e,n);else for(;t!==null;){if(t.tag===3){Cb(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ei===null||!Ei.has(r))){e=Ns(n,e),e=r2(t,e,1),t=Ci(t,e,1),e=Kt(),t!==null&&(Tl(t,1,e),ln(t,e));break}}t=t.return}}function $A(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Kt(),e.pingedLanes|=e.suspendedLanes&n,gt===e&&(kt&n)===n&&(ct===4||ct===3&&(kt&130023424)===kt&&500>Je()-cv?ha(e,0):lv|=n),ln(e,t)}function j2(e,t){t===0&&(e.mode&1?(t=Nc,Nc<<=1,!(Nc&130023424)&&(Nc=4194304)):t=1);var n=Kt();e=Xr(e,t),e!==null&&(Tl(e,t,n),ln(e,n))}function BA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),j2(e,n)}function FA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(t),j2(e,n)}var N2;N2=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||sn.current)nn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return nn=!1,CA(e,t,n);nn=!!(e.flags&131072)}else nn=!1,He&&t.flags&1048576&&Cj(t,Cu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ou(e,t),e=t.pendingProps;var i=bs(t,$t.current);ms(t,n),i=nv(null,t,r,e,i,n);var a=rv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,on(r)?(a=!0,Pu(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xg(t),i.updater=Fd,t.stateNode=i,i._reactInternals=t,up(t,r,e,n),t=hp(null,t,r,!0,a,n)):(t.tag=0,He&&a&&Zg(t),Ht(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ou(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=HA(r),e=ar(r,e),i){case 0:t=fp(null,t,r,e,n);break e;case 1:t=yb(null,t,r,e,n);break e;case 11:t=gb(null,t,r,e,n);break e;case 14:t=vb(null,t,r,ar(r.type,e),n);break e}throw Error(ee(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),fp(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),yb(e,t,r,i,n);case 3:e:{if(o2(t),e===null)throw Error(ee(387));r=t.pendingProps,a=t.memoizedState,i=a.element,Lj(e,t),Tu(t,r,null,n);var l=t.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Ns(Error(ee(423)),t),t=xb(e,t,r,n,i);break e}else if(r!==i){i=Ns(Error(ee(424)),t),t=xb(e,t,r,n,i);break e}else for(yn=ki(t.stateNode.containerInfo.firstChild),bn=t,He=!0,or=null,n=Aj(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_s(),r===i){t=Qr(e,t,n);break e}Ht(e,t,r,n)}t=t.child}return t;case 5:return Dj(t),e===null&&op(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,np(r,i)?l=null:a!==null&&np(r,a)&&(t.flags|=32),s2(e,t),Ht(e,t,l,n),t.child;case 6:return e===null&&op(t),null;case 13:return l2(e,t,n);case 4:return Qg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ws(t,null,r,n):Ht(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),gb(e,t,r,i,n);case 7:return Ht(e,t,t.pendingProps,n),t.child;case 8:return Ht(e,t,t.pendingProps.children,n),t.child;case 12:return Ht(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,ze(Eu,r._currentValue),r._currentValue=l,a!==null)if(hr(a.value,l)){if(a.children===i.children&&!sn.current){t=Qr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){l=a.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=Vr(-1,n&-n),d.tag=2;var m=a.updateQueue;if(m!==null){m=m.shared;var h=m.pending;h===null?d.next=d:(d.next=h.next,h.next=d),m.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),lp(a.return,n,t),u.lanes|=n;break}d=d.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(ee(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),lp(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Ht(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ms(t,n),i=Wn(i),r=r(i),t.flags|=1,Ht(e,t,r,n),t.child;case 14:return r=t.type,i=ar(r,t.pendingProps),i=ar(r.type,i),vb(e,t,r,i,n);case 15:return i2(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),ou(e,t),t.tag=1,on(r)?(e=!0,Pu(t)):e=!1,ms(t,n),t2(t,r,i),up(t,r,i,n),hp(null,t,r,!0,e,n);case 19:return c2(e,t,n);case 22:return a2(e,t,n)}throw Error(ee(156,t.tag))};function S2(e,t){return Q1(e,t)}function UA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(e,t,n,r){return new UA(e,t,n,r)}function hv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HA(e){if(typeof e=="function")return hv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ag)return 11;if(e===Mg)return 14}return 2}function Ti(e,t){var n=e.alternate;return n===null?(n=Un(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function uu(e,t,n,r,i,a){var l=2;if(r=e,typeof e=="function")hv(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Ya:return ma(n.children,i,a,t);case Tg:l=8,i|=8;break;case Lm:return e=Un(12,n,t,i|2),e.elementType=Lm,e.lanes=a,e;case Dm:return e=Un(13,n,t,i),e.elementType=Dm,e.lanes=a,e;case Im:return e=Un(19,n,t,i),e.elementType=Im,e.lanes=a,e;case D1:return Zd(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M1:l=10;break e;case L1:l=9;break e;case Ag:l=11;break e;case Mg:l=14;break e;case mi:l=16,r=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=Un(l,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function ma(e,t,n,r){return e=Un(7,e,r,t),e.lanes=n,e}function Zd(e,t,n,r){return e=Un(22,e,r,t),e.elementType=D1,e.lanes=n,e.stateNode={isHidden:!1},e}function Jh(e,t,n){return e=Un(6,e,null,t),e.lanes=n,e}function em(e,t,n){return t=Un(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZA(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lh(0),this.expirationTimes=Lh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function mv(e,t,n,r,i,a,l,u,d){return e=new ZA(e,t,n,u,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Un(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xg(a),e}function WA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ga,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function P2(e){if(!e)return Di;e=e._reactInternals;e:{if(Ta(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(on(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var n=e.type;if(on(n))return Pj(e,n,t)}return t}function k2(e,t,n,r,i,a,l,u,d){return e=mv(n,r,!0,e,i,a,l,u,d),e.context=P2(null),n=e.current,r=Kt(),i=Oi(n),a=Vr(r,i),a.callback=t??null,Ci(n,a,i),e.current.lanes=i,Tl(e,i,r),ln(e,r),e}function Wd(e,t,n,r){var i=t.current,a=Kt(),l=Oi(i);return n=P2(n),t.context===null?t.context=n:t.pendingContext=n,t=Vr(a,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ci(i,t,l),e!==null&&(fr(e,i,l,a),iu(e,i,l)),l}function $u(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Eb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pv(e,t){Eb(e,t),(e=e.alternate)&&Eb(e,t)}function VA(){return null}var C2=typeof reportError=="function"?reportError:function(e){console.error(e)};function gv(e){this._internalRoot=e}Vd.prototype.render=gv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));Wd(e,t,null,null)};Vd.prototype.unmount=gv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Na(function(){Wd(null,e,null,null)}),t[Yr]=null}};function Vd(e){this._internalRoot=e}Vd.prototype.unstable_scheduleHydration=function(e){if(e){var t=aj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yi.length&&t!==0&&t<yi[n].priority;n++);yi.splice(n,0,e),n===0&&oj(e)}};function vv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ob(){}function KA(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var m=$u(l);a.call(m)}}var l=k2(t,r,e,0,null,!1,!1,"",Ob);return e._reactRootContainer=l,e[Yr]=l.current,ll(e.nodeType===8?e.parentNode:e),Na(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var m=$u(d);u.call(m)}}var d=mv(e,0,!1,null,null,!1,!1,"",Ob);return e._reactRootContainer=d,e[Yr]=d.current,ll(e.nodeType===8?e.parentNode:e),Na(function(){Wd(t,d,n,r)}),d}function qd(e,t,n,r,i){var a=n._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var u=i;i=function(){var d=$u(l);u.call(d)}}Wd(t,l,e,i)}else l=KA(n,t,e,i,r);return $u(l)}rj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ro(t.pendingLanes);n!==0&&(Ig(t,n|1),ln(t,Je()),!(Ne&6)&&(Ss=Je()+500,Bi()))}break;case 13:Na(function(){var r=Xr(e,1);if(r!==null){var i=Kt();fr(r,e,1,i)}}),pv(e,1)}};Rg=function(e){if(e.tag===13){var t=Xr(e,134217728);if(t!==null){var n=Kt();fr(t,e,134217728,n)}pv(e,134217728)}};ij=function(e){if(e.tag===13){var t=Oi(e),n=Xr(e,t);if(n!==null){var r=Kt();fr(n,e,t,r)}pv(e,t)}};aj=function(){return Ee};sj=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};Vm=function(e,t,n){switch(t){case"input":if($m(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=zd(r);if(!i)throw Error(ee(90));R1(r),$m(r,i)}}}break;case"textarea":$1(e,n);break;case"select":t=n.value,t!=null&&us(e,!!n.multiple,t,!1)}};V1=uv;K1=Na;var qA={usingClientEntryPoint:!1,Events:[Ml,es,zd,Z1,W1,uv]},No={findFiberByHostInstance:ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GA={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Y1(e),e===null?null:e.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||VA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{Ld=Dc.inject(GA),Pr=Dc}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qA;Pn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vv(t))throw Error(ee(200));return WA(e,t,null,n)};Pn.createRoot=function(e,t){if(!vv(e))throw Error(ee(299));var n=!1,r="",i=C2;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=mv(e,1,!1,null,null,n,!1,r,i),e[Yr]=t.current,ll(e.nodeType===8?e.parentNode:e),new gv(t)};Pn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=Y1(t),e=e===null?null:e.stateNode,e};Pn.flushSync=function(e){return Na(e)};Pn.hydrate=function(e,t,n){if(!Kd(t))throw Error(ee(200));return qd(null,e,t,!0,n)};Pn.hydrateRoot=function(e,t,n){if(!vv(e))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",l=C2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=k2(t,null,e,1,n??null,i,!1,a,l),e[Yr]=t.current,ll(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Vd(t)};Pn.render=function(e,t,n){if(!Kd(t))throw Error(ee(200));return qd(null,e,t,!1,n)};Pn.unmountComponentAtNode=function(e){if(!Kd(e))throw Error(ee(40));return e._reactRootContainer?(Na(function(){qd(null,null,e,!1,function(){e._reactRootContainer=null,e[Yr]=null})}),!0):!1};Pn.unstable_batchedUpdates=uv;Pn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kd(n))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return qd(e,t,n,!1,r)};Pn.version="18.3.1-next-f1338f8080-20240426";function E2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E2)}catch(e){console.error(e)}}E2(),E1.exports=Pn;var Gd=E1.exports,O2,Tb=Gd;O2=Tb.createRoot,Tb.hydrateRoot;const YA=[],XA=[],QA=[],JA=[],tm=new Date().toISOString().slice(0,10),nm=e=>{const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().slice(0,10)};function it(){return crypto.randomUUID()}function he(){return new Date().toISOString()}const Sp=[{id:"550e8400-e29b-41d4-a716-446655440001",email:"dr.smith@hospital.com",password:"password321",full_name:"Dr. Sarah Smith",role:"doctor",created_at:"2024-01-15T08:00:00Z"},{id:"550e8400-e29b-41d4-a716-446655440002",email:"john.doe@email.com",password:"password321",full_name:"John Doe",role:"patient",created_at:"2024-01-16T09:30:00Z"},{id:"550e8400-e29b-41d4-a716-446655440003",email:"volunteer@hospital.com",password:"password321",full_name:"Maria Garcia",role:"volunteer",created_at:"2024-01-17T10:15:00Z"},{id:"550e8400-e29b-41d4-a716-446655440004",email:"jane.wilson@email.com",password:"password321",full_name:"Jane Wilson",role:"patient",created_at:"2024-01-18T11:00:00Z"},{id:"550e8400-e29b-41d4-a716-446655440005",email:"dr.johnson@hospital.com",password:"password321",full_name:"Dr. Michael Johnson",role:"doctor",created_at:"2024-01-19T07:45:00Z"}],Bu=[{id:"area-default-salaya",name:"Mahidol University Salaya",color:"#F97316",geometry:{type:"Polygon",coordinates:[[[13.807,100.3198],[13.8068,100.3278],[13.8002,100.3318],[13.7915,100.3306],[13.787,100.323],[13.79,100.316],[13.797,100.3135]]]},created_by:"550e8400-e29b-41d4-a716-446655440001",created_at:"2024-01-20T08:00:00Z",updated_at:"2024-01-20T08:00:00Z"}],eM=[{id:"patient-3",user_id:"user-6",name:"Robert Chen",doe:"2024-01-10",gender:"male",address:"789 Pine Street, Springfield, IL 62703",caregivers_contact:"Linda Chen - (555) 456-7890",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-24",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-009876",lat:13.804,lng:100.326,phone_number:"+66 80 777 8899",patient_categories:{critical:!0,elderly:!0,pregnant:!1},personal_health_history:"History of heart disease, stroke in 2019, diabetes since 2015",doctor_diagnosed:"Congestive Heart Failure, Type 2 Diabetes, Hypertension",medications_history:"Metoprolol 50mg daily, Lisinopril 20mg daily, Insulin glargine",food_allergies:"Dairy products",medication_allergies:"Sulfa drugs",height:"168 cm",weight:"85 kg",bmi:"30.1",temperature:"99.2F",pulse:"88 bpm",blood_pressure:"145/92 mmHg",diabetes:"Type 2 - HbA1c: 8.1%",mental_health_status:"Mild depression, receiving counseling",other_symptoms:"Shortness of breath, swelling in legs",pregnancy_details:"N/A",smoker:!0,doctors_note:"Critical patient requiring close monitoring. Heart failure symptoms worsening.",created_by:"user-1",created_at:"2024-01-15T11:20:00Z",updated_at:"2024-01-26T14:30:00Z"},{id:"patient-11",user_id:"user-14",name:"Olivia Brown",doe:"2025-08-15",gender:"female",address:"22 Meadow Ln, Springfield, IL 62701",caregivers_contact:"Mark Brown - (555) 777-8899",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2025-09-25",today_date:"2025-09-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-202509-01",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2025-09-20",personal_health_history:"Uncomplicated pregnancy and delivery",doctor_diagnosed:"Postpartum recovery",medications_history:"Prenatal vitamins",food_allergies:"None known",medication_allergies:"None known",height:"165 cm",weight:"68 kg",bmi:"25.0",temperature:"98.6F",pulse:"76 bpm",blood_pressure:"118/76 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Mild fatigue",pregnancy_details:"Delivered a healthy baby",smoker:!1,doctors_note:"Routine postpartum follow-up in 6 weeks",created_by:"user-5",created_at:"2025-09-21T10:00:00Z",updated_at:"2025-09-26T09:00:00Z"},{id:"patient-12",user_id:"user-15",name:"Ava Nguyen",doe:"2025-08-28",gender:"female",address:"90 Hillcrest Rd, Springfield, IL 62702",caregivers_contact:"Tom Nguyen - (555) 222-3344",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2025-09-24",today_date:"2025-09-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-202509-02",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2025-08-30",personal_health_history:"Gestational diabetes, controlled",doctor_diagnosed:"Postpartum monitoring",medications_history:"Insulin during pregnancy",food_allergies:"None",medication_allergies:"None",height:"162 cm",weight:"67 kg",bmi:"25.5",temperature:"98.4F",pulse:"74 bpm",blood_pressure:"120/78 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"None",pregnancy_details:"Delivered a healthy baby",smoker:!1,doctors_note:"Blood sugar normalized postpartum",created_by:"user-5",created_at:"2025-09-01T11:00:00Z",updated_at:"2025-09-26T08:30:00Z"},{id:"patient-9",user_id:"user-12",name:"Sofia Martinez",doe:"2024-01-18",gender:"female",address:"12 River Park, Springfield, IL 62701",caregivers_contact:"Daniel Martinez - (555) 111-2233",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-889900",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2024-01-20",personal_health_history:"Healthy pregnancy, normal delivery",doctor_diagnosed:"Postpartum recovery",medications_history:"Prenatal vitamins, iron supplements",food_allergies:"None known",medication_allergies:"None known",height:"164 cm",weight:"66 kg",bmi:"24.5",temperature:"98.6F",pulse:"76 bpm",blood_pressure:"120/78 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Mild fatigue",pregnancy_details:"Delivered a healthy baby boy",smoker:!1,doctors_note:"Recovering well postpartum. Routine follow-up in 6 weeks.",created_by:"user-5",created_at:"2024-01-20T12:30:00Z",updated_at:"2024-01-26T09:30:00Z"},{id:"patient-10",user_id:"user-13",name:"Hannah Lee",doe:"2023-12-28",gender:"female",address:"98 Lake View, Springfield, IL 62702",caregivers_contact:"Eric Lee - (555) 333-4455",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-991122",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2023-12-30",personal_health_history:"Gestational hypertension in late pregnancy",doctor_diagnosed:"Postpartum monitoring",medications_history:"Labetalol during pregnancy",food_allergies:"None known",medication_allergies:"None known",height:"168 cm",weight:"70 kg",bmi:"24.8",temperature:"98.4F",pulse:"74 bpm",blood_pressure:"124/80 mmHg",diabetes:"None",mental_health_status:"Some anxiety, improving",other_symptoms:"Occasional headaches",pregnancy_details:"Delivered a healthy baby girl",smoker:!1,doctors_note:"BP stable postpartum. Continue monitoring.",created_by:"user-5",created_at:"2024-01-01T11:20:00Z",updated_at:"2024-01-26T10:10:00Z"},{id:"patient-4",user_id:"user-7",name:"Emily Rodriguez",doe:"2024-01-12",gender:"female",address:"321 Oak Drive, Springfield, IL 62704",caregivers_contact:"Carlos Rodriguez - (555) 234-5678",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-112233",lat:13.786,lng:100.317,phone_number:"+66 80 222 3344",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-04-02",personal_health_history:"Second pregnancy, first child born healthy in 2020",doctor_diagnosed:"Pregnancy - 32 weeks, Mild Anemia",medications_history:"Prenatal vitamins, Iron supplements",food_allergies:"None known",medication_allergies:"None known",height:"162 cm",weight:"72 kg",bmi:"27.4",temperature:"98.2F",pulse:"82 bpm",blood_pressure:"125/78 mmHg",diabetes:"None",mental_health_status:"Good, excited about pregnancy",other_symptoms:"Mild fatigue, occasional heartburn",pregnancy_details:"32 weeks gestation, estimated due date: April 2, 2024. Baby developing normally, mild anemia being treated.",smoker:!1,doctors_note:"Pregnancy progressing well. Monitor iron levels and continue supplements.",created_by:"user-5",created_at:"2024-01-16T09:45:00Z",updated_at:"2024-01-26T10:15:00Z"},{id:"patient-5",user_id:"user-8",name:"Michael Thompson",doe:"2024-01-08",gender:"male",address:"654 Maple Avenue, Springfield, IL 62705",caregivers_contact:"Sarah Thompson - (555) 345-6789",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-445566",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"Generally healthy, occasional sports injuries",doctor_diagnosed:"Acute Bronchitis, Seasonal Allergies",medications_history:"Albuterol inhaler as needed, Claritin during allergy season",food_allergies:"None known",medication_allergies:"None known",height:"180 cm",weight:"75 kg",bmi:"23.1",temperature:"98.8F",pulse:"68 bpm",blood_pressure:"118/72 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Persistent cough, mild congestion",pregnancy_details:"N/A",smoker:!1,doctors_note:"Recovering from bronchitis. Should improve with current treatment.",created_by:"user-1",created_at:"2024-01-12T13:30:00Z",updated_at:"2024-01-26T16:20:00Z"},{id:"patient-6",user_id:"user-9",name:"Margaret Foster",doe:"2024-01-05",gender:"female",address:"987 Cedar Lane, Springfield, IL 62706",caregivers_contact:"David Foster - (555) 567-8901",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-778899",patient_categories:{critical:!1,elderly:!0,pregnant:!1},personal_health_history:"Osteoporosis, mild cognitive decline, history of falls",doctor_diagnosed:"Osteoporosis, Mild Dementia, Hypertension",medications_history:"Alendronate weekly, Amlodipine 5mg daily, Donepezil 10mg daily",food_allergies:"None known",medication_allergies:"Aspirin",height:"155 cm",weight:"58 kg",bmi:"24.1",temperature:"98.4F",pulse:"76 bpm",blood_pressure:"138/82 mmHg",diabetes:"None",mental_health_status:"Mild anxiety, some confusion",other_symptoms:"Occasional dizziness, memory issues",pregnancy_details:"N/A",smoker:!1,doctors_note:"Stable condition. Family support is excellent. Continue current medications.",created_by:"user-5",created_at:"2024-01-10T08:15:00Z",updated_at:"2024-01-26T11:45:00Z"},{id:"patient-7",user_id:"user-10",name:"James Patterson",doe:"2024-01-14",gender:"male",address:"147 Birch Street, Springfield, IL 62707",caregivers_contact:"Helen Patterson - (555) 678-9012",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-334455",patient_categories:{critical:!0,elderly:!0,pregnant:!1},personal_health_history:"COPD, former heavy smoker, multiple hospitalizations",doctor_diagnosed:"Chronic Obstructive Pulmonary Disease (COPD), Chronic Kidney Disease",medications_history:"Tiotropium inhaler daily, Prednisone 10mg daily, Furosemide 40mg daily",food_allergies:"None known",medication_allergies:"Penicillin, Codeine",height:"175 cm",weight:"62 kg",bmi:"20.2",temperature:"99.4F",pulse:"92 bpm",blood_pressure:"152/88 mmHg",diabetes:"None",mental_health_status:"Moderate depression due to chronic illness",other_symptoms:"Severe shortness of breath, chronic fatigue, frequent coughing",pregnancy_details:"N/A",smoker:!1,doctors_note:"Critical patient with advanced COPD. Requires frequent monitoring and possible hospitalization.",created_by:"user-1",created_at:"2024-01-18T15:20:00Z",updated_at:"2024-01-26T17:10:00Z"},{id:"patient-8",user_id:"user-11",name:"Lisa Wang",doe:"2024-01-20",gender:"female",address:"258 Elm Court, Springfield, IL 62708",caregivers_contact:"Kevin Wang - (555) 789-0123",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-556677",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-05-20",personal_health_history:"First pregnancy, generally healthy",doctor_diagnosed:"Pregnancy - 24 weeks, Gestational Hypertension",medications_history:"Prenatal vitamins, Labetalol 200mg twice daily",food_allergies:"Shellfish",medication_allergies:"None known",height:"158 cm",weight:"65 kg",bmi:"26.0",temperature:"98.6F",pulse:"85 bpm",blood_pressure:"142/85 mmHg",diabetes:"None",mental_health_status:"Some anxiety about pregnancy complications",other_symptoms:"Mild headaches, swelling in hands and feet",pregnancy_details:"24 weeks gestation, estimated due date: May 20, 2024. Developing gestational hypertension, requires close monitoring.",smoker:!1,doctors_note:"Monitor blood pressure closely. May need to consider early delivery if hypertension worsens.",created_by:"user-5",created_at:"2024-01-22T12:30:00Z",updated_at:"2024-01-26T13:45:00Z"}],tM=[{id:"patient-1",user_id:"user-2",name:"John Doe",doe:"2024-01-15",gender:"male",address:"123 Main Street, Springfield, IL 62701",caregivers_contact:"Mary Doe - (555) 123-4567",assigned_doctor:"Dr. Sarah Smith - (111) 123-4567",last_record_date:"2024-01-20",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia - (111) 123-4567",medical_record_number:"MRN-001234",lat:13.7992,lng:100.3195,phone_number:"+66 80 111 2233",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"Family history of cardiovascular disease. Previous surgery for appendectomy in 2010.",doctor_diagnosed:"Hypertension, Type 2 Diabetes Mellitus",medications_history:"Lisinopril 10mg daily since 2020, Metformin 500mg twice daily since 2021",food_allergies:"Shellfish, Nuts",medication_allergies:"Penicillin",height:"175 cm",weight:"80 kg",bmi:"26.1",temperature:"98.6F",pulse:"72 bpm",blood_pressure:"130/85 mmHg",diabetes:"Type 2 - HbA1c: 7.2%",mental_health_status:"Stable, no current concerns",other_symptoms:"Occasional headaches, mild fatigue",pregnancy_details:"N/A",smoker:!1,doctors_note:"Patient shows good compliance with medication. Blood pressure slightly elevated, recommend lifestyle modifications and regular monitoring.",created_by:"user-1",created_at:"2024-01-20T14:30:00Z",updated_at:"2024-01-25T16:45:00Z"},{id:"patient-2",user_id:"user-4",name:"Jane Wilson",doe:"2024-01-18",gender:"female",address:"456 Oak Avenue, Springfield, IL 62702",caregivers_contact:"Robert Wilson - (555) 987-6543",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-005678",lat:13.7901,lng:100.3282,phone_number:"+66 80 444 5566",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-03-15",personal_health_history:"No significant past medical history. First pregnancy.",doctor_diagnosed:"Gestational Diabetes, Pregnancy - 28 weeks",medications_history:"Prenatal vitamins, Insulin as needed for glucose control",food_allergies:"None known",medication_allergies:"None known",height:"165 cm",weight:"68 kg",bmi:"25.0",temperature:"98.4F",pulse:"78 bpm",blood_pressure:"118/75 mmHg",diabetes:"Gestational - Fasting glucose: 95 mg/dL",mental_health_status:"Mild anxiety related to pregnancy, receiving counseling",other_symptoms:"Morning sickness (resolved), mild back pain",pregnancy_details:"28 weeks gestation, estimated due date: March 15, 2024. Regular prenatal checkups, baby developing normally.",smoker:!1,doctors_note:"Pregnancy progressing well. Gestational diabetes well controlled with diet and occasional insulin. Continue regular monitoring.",created_by:"user-3",created_at:"2024-01-21T10:15:00Z",updated_at:"2024-01-26T09:20:00Z"},{name:"Zach",doe:"2025-09-25",gender:"male",address:"Bangkok",caregivers_contact:"111",assigned_doctor:"Strange",last_record_date:"2025-09-25",today_date:"2025-09-25",assigned_vhv_name:"Ironman",medical_record_number:"12345",patient_categories:{critical:!1,elderly:!0,pregnant:!1},personal_health_history:"Good Healthy",doctor_diagnosed:"Lack of sleep",medications_history:"Sleeping pills",food_allergies:"prawns",medication_allergies:"none",height:"170cm",weight:"70kg",bmi:"22.9",temperature:"98.6",pulse:"72",blood_pressure:"120/80",diabetes:"Type2",mental_health_status:"Sound Mind",other_symptoms:"Dream walking",pregnancy_details:"",smoker:!1,doctors_note:"Good To Go",created_by:"user-1",user_id:"user-1",id:"id-uqy6ynvpa",created_at:"2025-09-24T18:14:30.861Z",updated_at:"2025-09-24T18:16:35.460Z"},...eM],nM=[{id:"task-1",title:"Follow-up Blood Pressure Check",description:"Schedule and conduct follow-up blood pressure monitoring for patient John Doe. Check medication compliance and adjust dosage if necessary.",priority:"high",status:"pending",assigned_to:"user-3",assigned_by:"user-1",patient_id:"patient-1",due_date:"2024-01-28",created_at:"2024-01-25T10:30:00Z",updated_at:"2024-01-25T10:30:00Z"},{id:"task-v1",title:"Home Visit - John Doe",description:"Check blood pressure, confirm medications, record vitals.",priority:"high",status:"pending",assigned_to:"user-3",assigned_by:"user-1",patient_id:"patient-1",due_date:tm,created_at:he(),updated_at:he()},{id:"task-v2",title:"Follow-up Call - Jane Wilson",description:"Call to review glucose logs and confirm prenatal visit.",priority:"medium",status:"pending",assigned_to:"user-3",assigned_by:"user-5",patient_id:"patient-2",due_date:tm,created_at:he(),updated_at:he()},{id:"task-v3",title:"Supply Check - Outreach Kits",description:"Verify stock of glucose strips and BP cuffs for field work.",priority:"low",status:"pending",assigned_to:"user-3",assigned_by:"user-1",due_date:tm,created_at:he(),updated_at:he()},{id:"task-2",title:"Prenatal Care Coordination",description:"Coordinate prenatal care appointments and ensure all necessary tests are scheduled for Jane Wilson. Monitor gestational diabetes management.",priority:"urgent",status:"in_progress",assigned_to:"user-3",assigned_by:"user-5",patient_id:"patient-2",due_date:"2024-01-27",created_at:"2024-01-24T14:15:00Z",updated_at:"2024-01-26T09:45:00Z"},{id:"task-3",title:"Medication Inventory Check",description:"Review and update medication inventory. Ensure adequate stock of diabetes medications and blood pressure medications.",priority:"medium",status:"completed",assigned_to:"user-3",assigned_by:"user-1",due_date:"2024-01-26",created_at:"2024-01-23T08:00:00Z",updated_at:"2024-01-26T16:30:00Z",completed_at:"2024-01-26T16:30:00Z"},{id:"task-4",title:"Patient Education Session",description:"Conduct diabetes management education session for newly diagnosed patients. Prepare educational materials and schedule group session.",priority:"medium",status:"pending",assigned_to:"user-1",assigned_by:"user-5",due_date:"2024-01-30",created_at:"2024-01-25T11:00:00Z",updated_at:"2024-01-25T11:00:00Z"},{id:"appt-jd-1",title:"Clinic Visit - BP Review",description:"Follow-up on blood pressure and medication adherence.",priority:"medium",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:nm(3),created_at:he(),updated_at:he()},{id:"appt-jd-2",title:"Lab Results Discussion",description:"Discuss recent lab results and adjust care plan as needed.",priority:"low",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:nm(10),created_at:he(),updated_at:he()},{id:"appt-jd-overdue",title:"Missed Appointment - Check-in",description:"Reschedule missed appointment and check symptoms.",priority:"high",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:nm(-2),created_at:he(),updated_at:he()}],rM=[{id:"msg-1",sender_id:"user-1",recipient_id:"user-2",subject:"Follow-up Appointment",content:"Hi John, I wanted to follow up on your recent blood pressure readings. Please schedule an appointment for next week.",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-25T09:30:00Z"},{id:"msg-2",sender_id:"user-2",recipient_id:"user-1",subject:"Re: Follow-up Appointment",content:"Thank you Dr. Smith. I will call the office today to schedule the appointment.",image_url:void 0,image_name:void 0,is_read:!0,created_at:"2024-01-25T14:15:00Z"},{id:"msg-3",sender_id:"user-3",recipient_id:"user-4",subject:"Medication Reminder",content:"Hi Jane, this is a friendly reminder to take your evening insulin. Let me know if you have any questions!",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-26T19:00:00Z"},{id:"msg-4",sender_id:"user-5",recipient_id:"user-2",subject:"Lab Results Available",content:"Your recent lab results are now available. Overall looking good, but we should discuss a few items at your next visit.",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-26T11:30:00Z"}],iM=[{id:"ann-1",title:"New Health Guidelines",content:"Please note the updated health and safety guidelines for patient care. All staff should review the new protocols for infection control and patient interaction.",priority:"high",created_by:"user-1",created_at:"2024-01-25T08:00:00Z",updated_at:"2024-01-25T08:00:00Z"},{id:"ann-2",title:"Medication Inventory Update",content:"The medication inventory has been updated. Please check the new stock levels and report any shortages immediately.",priority:"medium",created_by:"user-5",created_at:"2024-01-24T14:30:00Z",updated_at:"2024-01-24T14:30:00Z"},{id:"ann-3",title:"Emergency Contact Information",content:"Updated emergency contact information has been distributed. Please ensure all patients have current emergency contacts on file.",priority:"urgent",created_by:"user-1",created_at:"2024-01-26T10:15:00Z",updated_at:"2024-01-26T10:15:00Z"}],aM=[{id:"record-1",patient_id:"patient-1",recorded_by:"user-2",record_date:"2024-01-26",temperature:"98.6F",pulse:"75 bpm",blood_pressure:"128/82 mmHg",weight:"79.5 kg",blood_sugar:"110 mg/dL",pain_level:3,fatigue_level:4,mood:"good",appetite:"good",sleep_quality:"fair",symptoms_description:"Mild headache in the morning, feeling better now",medications_taken:"Lisinopril 10mg, Metformin 500mg",activities:"Light walking for 30 minutes",notes:"Feeling overall better than yesterday",created_at:"2024-01-26T08:30:00Z",updated_at:"2024-01-26T08:30:00Z"},{id:"record-2",patient_id:"patient-2",recorded_by:"user-4",record_date:"2024-01-26",temperature:"98.4F",pulse:"80 bpm",blood_pressure:"115/70 mmHg",weight:"68.2 kg",blood_sugar:"92 mg/dL",pain_level:2,fatigue_level:3,mood:"excellent",appetite:"excellent",sleep_quality:"good",symptoms_description:"Baby is very active today, no morning sickness",medications_taken:"Prenatal vitamins",activities:"Prenatal yoga, light housework",notes:"Feeling great, baby movements are strong",created_at:"2024-01-26T09:15:00Z",updated_at:"2024-01-26T09:15:00Z"},{id:"record-3",patient_id:"patient-1",recorded_by:"user-2",record_date:"2024-01-25",temperature:"99.1F",pulse:"78 bpm",blood_pressure:"132/85 mmHg",weight:"80 kg",blood_sugar:"125 mg/dL",pain_level:5,fatigue_level:6,mood:"fair",appetite:"poor",sleep_quality:"poor",symptoms_description:"Persistent headache, feeling tired",medications_taken:"Lisinopril 10mg, Metformin 500mg, Tylenol for headache",activities:"Mostly resting",notes:"Not feeling well today, headache is bothering me",created_at:"2024-01-25T19:00:00Z",updated_at:"2024-01-25T19:00:00Z"}],T2=[{id:"loc-v-1",type:"volunteer",name:"Maria Garcia (Volunteer)",lat:13.8005,lng:100.3231,address:"Near Salaya Market",user_id:"user-3"},{id:"loc-c-1",type:"center",name:"Community Health Center - Salaya",lat:13.7963,lng:100.3127,address:"Salaya Rd",phone:"+66 2 555 0101"},{id:"loc-c-2",type:"center",name:"Phutthamonthon Health Center",lat:13.8048,lng:100.3342,address:"Phutthamonthon",phone:"+66 2 555 0202"},{id:"loc-h-1",type:"hospital",name:"Nakhon Pathom Hospital (Annex)",lat:13.7769,lng:100.3186,address:"Near Salaya",phone:"+66 2 555 0303"}],A2=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),sM=()=>{var t;const e="medical_portal_session";try{const n=localStorage.getItem(e);if(n){const r=JSON.parse(n);if((t=r==null?void 0:r.user)!=null&&t.id&&!A2(r.user.id))return console.warn("Detected invalid user ID format in session. Clearing..."),localStorage.removeItem(e),!0}}catch(n){console.error("Error validating session:",n)}return!1},oa="medical_portal_session",M2="dummyUsers",oM=e=>{try{localStorage.setItem(M2,JSON.stringify(e))}catch(t){console.error("Error saving users to localStorage:",t)}},L2=()=>{try{const e=localStorage.getItem(M2);return e?JSON.parse(e):[...Sp]}catch(e){return console.error("Error loading users from localStorage:",e),[...Sp]}};let xn=L2();const yv=()=>{xn=L2()},lM=async(e,t,n,r)=>{if(xn.find(u=>u.email===e))return{data:null,error:{message:"User already exists with this email"}};const a={id:it(),email:e,password:t,full_name:n,role:r,created_at:he()};xn.push(a),oM(xn);const l={user:a,token:it(),expires_at:new Date(Date.now()+24*60*60*1e3).toISOString()};return localStorage.setItem(oa,JSON.stringify(l)),{data:{user:a,session:l},error:null}},cM=async(e,t)=>{yv();const n=xn.find(i=>i.email===e&&i.password===t);if(!n)return{data:null,error:{message:"Invalid email or password"}};const r={user:n,token:it(),expires_at:new Date(Date.now()+24*60*60*1e3).toISOString()};return localStorage.setItem(oa,JSON.stringify(r)),{data:{user:n,session:r},error:null}},uM=async()=>(localStorage.removeItem(oa),{error:null}),dM=()=>{const e=localStorage.getItem(oa);if(!e)return null;try{const t=JSON.parse(e);return new Date(t.expires_at)<new Date?(localStorage.removeItem(oa),null):A2(t.user.id)?t:(console.warn("Invalid user ID format detected. Clearing session. Please log in again."),localStorage.removeItem(oa),null)}catch{return localStorage.removeItem(oa),null}},Ai=e=>(yv(),xn.find(t=>t.id===e)),Yd=async(e,t)=>{const n=xn.findIndex(r=>r.id===e);if(n===-1)return{error:{message:"User not found"}};xn[n].password=t||"";try{localStorage.setItem("dummyUsers",JSON.stringify(xn))}catch{}return{error:null}},fM=async(e,t)=>{yv();const n=xn.findIndex(i=>i.id===e);if(n===-1)return{error:{message:"User not found"}};if(xn.find((i,a)=>a!==n&&i.email.toLowerCase()===t.toLowerCase()))return{error:{message:"Email already in use"}};xn[n].email=t;try{localStorage.setItem("dummyUsers",JSON.stringify(xn))}catch{}return{error:null}},D2=x.createContext(void 0),Se=()=>{const e=x.useContext(D2);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},hM=({children:e})=>{const[t,n]=x.useState(null),[r,i]=x.useState(null),[a,l]=x.useState(!0);x.useEffect(()=>{const f=dM();f&&(i(f),n(f.user)),l(!1)},[]);const h={user:t,session:r,loading:a,signUp:async(f,g,y,j)=>{const{data:w,error:P}=await lM(f,g,y,j);return w&&!P&&(i(w.session),n(w.user)),{data:w,error:P}},signIn:async(f,g)=>{const{data:y,error:j}=await cM(f,g);return y&&!j&&(i(y.session),n(y.user)),{data:y,error:j}},signOut:async()=>{const{error:f}=await uM();return f||(i(null),n(null)),{error:f}}};return s.jsx(D2.Provider,{value:h,children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(e,t)=>{const n=x.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:u="",children:d,...m},h)=>x.createElement("svg",{ref:h,...mM,width:i,height:i,stroke:r,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${pM(e)}`,u].join(" "),...m},[...t.map(([f,g])=>x.createElement(f,g)),...Array.isArray(d)?d:[d]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=pe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=pe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=pe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=pe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=pe("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=pe("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=pe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=pe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=pe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=pe("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=pe("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=pe("UserSearch",[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=pe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),we=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t)),console.log(` Data saved to LOCALSTORAGE with key: ${e}`,t.length||Object.keys(t).length),console.log(" This data is stored in your BROWSER, not in actual files")}catch(n){console.error("Error saving to localStorage:",n)}},Yn=(e,t)=>{try{const n=localStorage.getItem(e),r=n?JSON.parse(n):t;return console.log(` Data loaded from LOCALSTORAGE with key: ${e}`,r.length||Object.keys(r).length),console.log(" This data comes from your BROWSER storage, not actual files"),r}catch(n){return console.error("Error loading from localStorage:",n),t}};let Ye=Yn("dummyPatientProfiles",[...tM]),Bn=Yn("dummyMessages",[...rM]),xe=Yn("dummyUsers",[...Sp]),St=Yn("dummyTasks",[...nM]),lr=Yn("dummyAnnouncements",[...iM]),zt=Yn("dummyDailyRecords",[...aM]),qa=Yn("dummyLocations",[...T2]),tn=Yn("dummyVolunteers",[]),kp=Yn("dummyMentalAssessments",[...YA]),Fn=Yn("dummyMedications",[...XA]),fu=Yn("dummyMedicationIntakes",[...QA]),bi=Yn("dummyMedicationRequests",[...JA]);try{const e=[];for(const t of Ye)if(!xe.find(r=>r.id===t.user_id)){const r={id:t.user_id||it(),email:`patient+${(t.user_id||"").toLowerCase()||Math.random().toString(36).slice(2)}@example.local`,password:"",full_name:t.name||"Patient",role:"patient",created_at:he()};xe.push(r),e.push(r)}e.length>0&&(we("dummyUsers",xe),console.log(`Seeded ${e.length} user(s) from patient profiles`))}catch(e){console.warn("Unable to seed users from patient profiles",e)}try{const e=new Map((xe||[]).map(f=>[f.id,f])),t=(xe||[]).filter(f=>f.role==="doctor"),n=t[0];for(const f of t)if(!f.doctor_code){const g=t.indexOf(f);f.doctor_code=`DR-${String(g+1).padStart(6,"0")}`}we("dummyUsers",xe);const r=(Bu||[])[0],i=r?(()=>{const f=r.geometry.coordinates[0]||[],g=f.reduce((j,w)=>j+((w==null?void 0:w[0])||0),0)/(f.length||1),y=f.reduce((j,w)=>j+((w==null?void 0:w[1])||0),0)/(f.length||1);return{lat:g,lng:y}})():{lat:13.793,lng:100.321};let a=!1;Ye=(Ye||[]).filter(f=>!!f&&!!f.name).map(f=>{const g={...f},y=t.map(b=>(b.full_name||"").toLowerCase()),j=(g.assigned_doctor||"").toLowerCase();!y.find(b=>j.includes(b))&&n&&(g.assigned_doctor=n.full_name,a=!0);const P="Maria Garcia";if((typeof g.assigned_vhv_name!="string"||g.assigned_vhv_name.length===0||/(ironman|unknown|n\/a)/i.test(g.assigned_vhv_name))&&(g.assigned_vhv_name=P,a=!0),!g.medical_record_number||!/^MRN-/.test(g.medical_record_number)){const b=Math.floor(1e5+Math.random()*899999);g.medical_record_number=`MRN-${String(b).padStart(6,"0")}`,a=!0}if(typeof g.lat!="number"||typeof g.lng!="number"){const b=()=>(Math.random()-.5)*.01;g.lat=i.lat+b(),g.lng=i.lng+b(),a=!0}if(!g.area_name&&r&&(g.area_name=r.name,a=!0),!g.user_id||!e.get(g.user_id)){const b=it();g.user_id=b,xe.push({id:b,email:`patient+${b.slice(0,6)}@example.local`,password:"",full_name:g.name,role:"patient",created_at:he()}),we("dummyUsers",xe),a=!0}return g}),a&&we("dummyPatientProfiles",Ye),(tn||[]).length;const l=(Bn||[]).length;Bn=(Bn||[]).filter(f=>e.has(f.sender_id)&&e.has(f.recipient_id)),Bn.length!==l&&we("dummyMessages",Bn);const u=new Set((Ye||[]).map(f=>f.id)),d=(St||[]).length;St=(St||[]).filter(f=>e.has(f.assigned_to)&&e.has(f.assigned_by)&&(!f.patient_id||u.has(f.patient_id))),St.length!==d&&we("dummyTasks",St);const m=(zt||[]).length;zt=(zt||[]).filter(f=>u.has(f.patient_id)&&e.has(f.recorded_by)),zt.length!==m&&we("dummyDailyRecords",zt);const h=(qa||[]).length;qa=(qa||[]).filter(f=>!f.user_id||e.has(f.user_id)),qa.length!==h&&we("dummyLocations",qa)}catch(e){console.warn("Normalization pass skipped:",e)}const CM=e=>{if(!e)return 0;const t=(e.match(/(\d+)/)||[])[1];return t?parseInt(t,10):0},EM=e=>`MRN-${String(e).padStart(6,"0")}`,F2=async()=>{await new Promise(t=>setTimeout(t,50));const e=Ye.reduce((t,n)=>Math.max(t,CM(n.medical_record_number)),0);return EM(e+1)},OM=e=>{if(!e)return 0;const t=(e.match(/(\d+)/)||[])[1];return t?parseInt(t,10):0},U2=e=>`VHV-${String(e).padStart(6,"0")}`,H2=async()=>{await new Promise(t=>setTimeout(t,20));const e=tn.reduce((t,n)=>Math.max(t,OM(n.volunteer_code)),0);return U2(e+1)},TM=e=>{if(!e)return 0;const t=(e.match(/(\d+)/)||[])[1];return t?parseInt(t,10):0},AM=e=>`DR-${String(e).padStart(6,"0")}`,MM=async()=>{await new Promise(t=>setTimeout(t,20));const e=xe.filter(t=>t.role==="doctor").reduce((t,n)=>Math.max(t,TM(n.doctor_code)),0);return AM(e+1)},Bt=async()=>(await new Promise(e=>setTimeout(e,500)),{data:Ye.map(e=>({...e,created_by_user:xe.find(t=>t.id===e.created_by)})),error:null}),LM=async e=>{await new Promise(n=>setTimeout(n,200));const t=Ye.find(n=>(n.medical_record_number||"").toLowerCase()===(e||"").toLowerCase());return t?{data:t,error:null}:{data:null,error:{message:"No patient with that ID"}}},ii=async e=>{await new Promise(n=>setTimeout(n,300));const t=Ye.find(n=>n.user_id===e);return t?{data:{...t,created_by_user:xe.find(n=>n.id===t.created_by)},error:null}:{data:null,error:{code:"PGRST116",message:"No profile found"}}},DM=async e=>{await new Promise(r=>setTimeout(r,400));let t=e.medical_record_number;t||(t=await F2());const n={...e,medical_record_number:t,id:it(),created_at:he(),updated_at:he()};return Ye.push(n),we("dummyPatientProfiles",Ye),{data:n,error:null}},Wu=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=Ye.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Profile not found"}}:(Ye[n]={...Ye[n],...t,updated_at:he()},we("dummyPatientProfiles",Ye),{data:Ye[n],error:null})},cn=async()=>{if(await new Promise(t=>setTimeout(t,200)),(tn||[]).length===0){const t=(xe||[]).filter(n=>n.role==="volunteer").map((n,r)=>{const i=(T2||[]).find(d=>d.user_id===n.id),a=(Bu||[])[0],l=a?(()=>{const d=a.geometry.coordinates[0]||[],m=d.reduce((f,g)=>f+((g==null?void 0:g[0])||0),0)/(d.length||1),h=d.reduce((f,g)=>f+((g==null?void 0:g[1])||0),0)/(d.length||1);return{lat:m,lng:h}})():void 0,u={id:it(),user_id:n.id,volunteer_code:U2(r+1),name:n.full_name,email:n.email,phone:void 0,address:i==null?void 0:i.address,lat:i==null?void 0:i.lat,lng:i==null?void 0:i.lng,created_at:he(),updated_at:he()};return(n.email||"").toLowerCase()==="volunteer@hospital.com"&&a&&(u.area_id=a.id,u.area_name=a.name,(!u.lat||!u.lng)&&(u.lat=l==null?void 0:l.lat,u.lng=l==null?void 0:l.lng)),u});t.length>0&&(tn=t,we("dummyVolunteers",tn))}return{data:tn.map(t=>({...t,user:xe.find(n=>n.id===t.user_id)})),error:null}},IM=async e=>{await new Promise(n=>setTimeout(n,150));const t=tn.find(n=>(n.volunteer_code||"").toLowerCase()===e.toLowerCase());return{data:t||null,error:t?null:{message:"Not found"}}},RM=async e=>{await new Promise(r=>setTimeout(r,200));const t=e.volunteer_code||await H2(),n={...e,volunteer_code:t,id:it(),created_at:he(),updated_at:he()};return tn.push(n),we("dummyVolunteers",tn),{data:n,error:null}},Z2=async(e,t)=>{await new Promise(r=>setTimeout(r,200));const n=tn.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Volunteer not found"}}:(tn[n]={...tn[n],...t,updated_at:he()},we("dummyVolunteers",tn),{data:tn[n],error:null})},zM=async e=>(await new Promise(n=>setTimeout(n,400)),{data:Bn.filter(n=>n.sender_id===e||n.recipient_id===e).map(n=>({...n,sender:xe.find(r=>r.id===n.sender_id),recipient:xe.find(r=>r.id===n.recipient_id)})).sort((n,r)=>new Date(r.created_at).getTime()-new Date(n.created_at).getTime()),error:null}),mr=async e=>{await new Promise(n=>setTimeout(n,300));const t={...e,id:it(),created_at:he()};return Bn.push(t),we("dummyMessages",Bn),console.log(" Message saved to BROWSER LOCALSTORAGE:",t),console.log(" Total messages in BROWSER storage:",Bn.length),console.log("  NOTE: Data is NOT saved to actual files, only in browser localStorage"),{data:t,error:null}},$M=async(e,t)=>{await new Promise(r=>setTimeout(r,200));const n=Bn.findIndex(r=>r.id===e&&r.recipient_id===t);return n!==-1&&(Bn[n].is_read=!0,we("dummyMessages",Bn)),{error:null}},Ct=async e=>(await new Promise(n=>setTimeout(n,300)),{data:e?xe.filter(n=>n.id!==e):xe,error:null}),Ab=async(e,t)=>{if(await new Promise(i=>setTimeout(i,150)),!e)return{data:null,error:{message:"Email is required"}};const n=xe.find(i=>i.email.toLowerCase()===e.toLowerCase());if(n)return{data:n,error:null};const r={id:it(),email:e,password:"",full_name:t||e.split("@")[0],role:"patient",created_at:he()};return xe.push(r),we("dummyUsers",xe),{data:r,error:null}},BM=async(e,t)=>{if(await new Promise(i=>setTimeout(i,150)),!e)return{data:null,error:{message:"Email is required"}};const n=xe.find(i=>i.email.toLowerCase()===e.toLowerCase());if(n)return{data:n,error:null};const r={id:it(),email:e,password:"",full_name:t||e.split("@")[0],role:"volunteer",created_at:he()};return xe.push(r),we("dummyUsers",xe),{data:r,error:null}},FM=async(e,t)=>{if(await new Promise(a=>setTimeout(a,150)),!e)return{data:null,error:{message:"Email is required"}};const n=xe.find(a=>a.email.toLowerCase()===e.toLowerCase());if(n)return{data:n,error:null};const r=await MM(),i={id:it(),email:e,password:"",full_name:t||e.split("@")[0],role:"doctor",created_at:he(),doctor_code:r};return xe.push(i),we("dummyUsers",xe),{data:i,error:null}},Cp=async(e,t)=>{await new Promise(r=>setTimeout(r,150));const n=xe.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"User not found"}}:(xe[n]={...xe[n],...t},we("dummyUsers",xe),{data:xe[n],error:null})},UM=async e=>{await new Promise(r=>setTimeout(r,120));const t=xe.findIndex(r=>r.id===e);if(t===-1)return{data:null,error:{message:"User not found"}};const[n]=xe.splice(t,1);return we("dummyUsers",xe),{data:n,error:null}},HM=async()=>(await new Promise(e=>setTimeout(e,200)),{data:qa,error:null}),ZM=async e=>{await new Promise(n=>setTimeout(n,120));const t=(xe||[]).find(n=>n.role==="doctor"&&(n.doctor_code||"").toLowerCase()===(e||"").toLowerCase());return{data:t||null,error:t?null:{message:"Not found"}}},Hr=async e=>{await new Promise(n=>setTimeout(n,400));let t=St.map(n=>({...n,assigned_to_user:xe.find(r=>r.id===n.assigned_to),assigned_by_user:xe.find(r=>r.id===n.assigned_by),patient:n.patient_id?Ye.find(r=>r.id===n.patient_id):void 0}));return e&&(t=t.filter(n=>n.assigned_to===e||n.assigned_by===e)),{data:t.sort((n,r)=>new Date(r.created_at).getTime()-new Date(n.created_at).getTime()),error:null}},Rl=async e=>{await new Promise(n=>setTimeout(n,400));const t={...e,id:it(),created_at:he(),updated_at:he()};return St.push(t),we("dummyTasks",St),{data:t,error:null}},Nr=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=St.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Task not found"}}:(t.status==="completed"&&St[n].status!=="completed"&&(t.completed_at=he()),St[n]={...St[n],...t,updated_at:he()},we("dummyTasks",St),{data:St[n],error:null})},W2=async e=>{await new Promise(n=>setTimeout(n,300));const t=St.findIndex(n=>n.id===e);return t===-1?{data:null,error:{message:"Task not found"}}:(St.splice(t,1),we("dummyTasks",St),{data:null,error:null})},WM=async()=>(await new Promise(t=>setTimeout(t,300)),{data:lr.map(t=>({...t,created_by_user:xe.find(n=>n.id===t.created_by)})).sort((t,n)=>new Date(n.created_at).getTime()-new Date(t.created_at).getTime()),error:null}),VM=async e=>{await new Promise(n=>setTimeout(n,400));const t={...e,id:it(),created_at:he(),updated_at:he()};return lr.push(t),we("dummyAnnouncements",lr),{data:t,error:null}},KM=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=lr.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Announcement not found"}}:(lr[n]={...lr[n],...t,updated_at:he()},we("dummyAnnouncements",lr),{data:lr[n],error:null})},qM=async e=>{await new Promise(n=>setTimeout(n,300));const t=lr.findIndex(n=>n.id===e);return t===-1?{data:null,error:{message:"Announcement not found"}}:(lr.splice(t,1),we("dummyAnnouncements",lr),{data:null,error:null})},GM=async(e,t)=>{await new Promise(r=>setTimeout(r,400));let n=zt.map(r=>({...r,patient:Ye.find(i=>i.id===r.patient_id),recorded_by_user:xe.find(i=>i.id===r.recorded_by)}));if(t){const r=Ye.find(i=>i.user_id===t);r&&(n=n.filter(i=>i.patient_id===r.id))}return{data:n.sort((r,i)=>new Date(i.record_date).getTime()-new Date(r.record_date).getTime()),error:null}},YM=async e=>{await new Promise(n=>setTimeout(n,400));const t={...e,id:it(),created_at:he(),updated_at:he()};return zt.push(t),we("dummyDailyRecords",zt),{data:t,error:null}},XM=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=zt.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Daily record not found"}}:(zt[n]={...zt[n],...t,updated_at:he()},we("dummyDailyRecords",zt),{data:zt[n],error:null})},QM=async e=>{await new Promise(n=>setTimeout(n,300));const t=zt.findIndex(n=>n.id===e);return t===-1?{data:null,error:{message:"Daily record not found"}}:(zt.splice(t,1),we("dummyDailyRecords",zt),{data:null,error:null})},Ep=async(e,t)=>{await new Promise(r=>setTimeout(r,200));let n=kp.map(r=>({...r,patient:Ye.find(i=>i.id===r.patient_id),recorded_by_user:xe.find(i=>i.id===r.recorded_by)}));return e&&(n=n.filter(r=>r.patient_id===e)),{data:n.sort((r,i)=>new Date(i.date).getTime()-new Date(r.date).getTime()),error:null}},JM=async e=>{await new Promise(n=>setTimeout(n,200));const t={...e,id:it(),created_at:he()};return kp.push(t),we("dummyMentalAssessments",kp),{data:t,error:null}},e3=async e=>{await new Promise(n=>setTimeout(n,100));let t=[...Fn];return e&&(t=t.filter(n=>n.patient_id===e)),{data:t,error:null}},V2=async e=>{await new Promise(n=>setTimeout(n,100));const t={...e,id:it(),created_at:he(),updated_at:he()};return Fn.push(t),we("dummyMedications",Fn),{data:t,error:null}},t3=async(e,t)=>{await new Promise(r=>setTimeout(r,100));const n=Fn.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Medication not found"}}:(Fn[n]={...Fn[n],...t,updated_at:he()},we("dummyMedications",Fn),{data:Fn[n],error:null})},n3=async e=>{await new Promise(n=>setTimeout(n,100));const t=Fn.findIndex(n=>n.id===e);return t!==-1&&(Fn.splice(t,1),we("dummyMedications",Fn)),{data:null,error:null}},r3=async(e,t,n)=>{await new Promise(i=>setTimeout(i,100));const r=fu.find(i=>i.medication_id===e&&i.scheduled_at===n);return r?(r.status="taken",r.taken_at=he()):fu.push({id:it(),medication_id:e,patient_id:t,scheduled_at:n,taken_at:he(),status:"taken"}),we("dummyMedicationIntakes",fu),{data:!0,error:null}},i3=e=>{const[t,n]=(e||"00:00").split(":").map(i=>parseInt(i,10)||0),r=new Date;return r.setHours(t,n,0,0),r},a3=async e=>{await new Promise(u=>setTimeout(u,50));const t=Ye.find(u=>u.user_id===e);if(!t)return{data:[],error:null};const n=new Date,r=n.toISOString().slice(0,10),i=Fn.filter(u=>u.patient_id===t.id&&u.reminders_enabled!==!1).filter(u=>(!u.start_date||u.start_date<=r)&&(!u.end_date||u.end_date>=r)),a=[],l=5;for(const u of i)for(const d of u.times||[]){const m=i3(d);if(Math.abs((n.getTime()-m.getTime())/6e4)<=l){const f=new Date(m.getTime()).toISOString();fu.find(y=>y.medication_id===u.id&&y.scheduled_at===f&&y.status==="taken")||a.push({medication:u,scheduledAt:f})}}return{data:a,error:null}},Vu=async e=>{await new Promise(n=>setTimeout(n,120));let t=(bi||[]).map(n=>({...n,patient:(Ye||[]).find(r=>r.id===n.patient_id)}));return e&&(t=t.filter(n=>n.patient_id===e)),{data:t.sort((n,r)=>new Date(r.created_at).getTime()-new Date(n.created_at).getTime()),error:null}},s3=async e=>{await new Promise(n=>setTimeout(n,120));const t={...e,status:e.status||"pending",id:it(),created_at:he(),updated_at:he()};return bi.push(t),we("dummyMedicationRequests",bi),{data:t,error:null}},Mb=async(e,t)=>{await new Promise(r=>setTimeout(r,120));const n=bi.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Request not found"}}:(bi[n]={...bi[n],...t,updated_at:he()},we("dummyMedicationRequests",bi),{data:bi[n],error:null})},o3=()=>{const{signIn:e}=Se(),[t,n]=x.useState("identify"),[r,i]=x.useState(""),[a,l]=x.useState(""),[u,d]=x.useState(null),[m,h]=x.useState(!1),[f,g]=x.useState(""),[y,j]=x.useState(""),[w,P]=x.useState(!1),[b,N]=x.useState(""),_=async A=>{A.preventDefault(),N(""),P(!0);try{let O="",I=null;const B=r.trim();if(!B)throw new Error("Please enter patient ID or email");if(B.includes("@")){const{data:$}=await Ct(),R=($||[]).find(E=>E.role==="patient"&&E.email.toLowerCase()===B.toLowerCase());if(!R)throw new Error("No patient account with this email");I=R.id,O=R.email}else{const{data:$}=await LM(B);if(!$)throw new Error("Patient ID not found");if($.user_id){const R=Ai($.user_id);R&&R.role==="patient"&&(I=R.id,O=R.email)}if(!I)throw new Error("This patient has no account yet. Ask your care team to add an email for login.")}d(I),l(O);const D=I?Ai(I):void 0,M=!!(D&&D.password&&D.password.length>0);h(M),n(M?"password":"set-password")}catch(O){N(O.message||"Unable to identify patient")}finally{P(!1)}},k=async A=>{if(A.preventDefault(),N(""),f.length<6)return N("Password must be at least 6 characters");if(f!==y)return N("Passwords do not match");if(!u)return N("Missing user account");P(!0);try{const{error:O}=await Yd(u,f);if(O)throw new Error(O.message);const I=await e(a,f);I!=null&&I.error&&N(I.error.message)}catch(O){N(O.message||"Unable to set password")}finally{P(!1)}},C=async A=>{A.preventDefault(),N(""),P(!0);try{const{error:O}=await e(a,f);O&&N(O.message)}catch{N("Login failed")}finally{P(!1)}};return s.jsxs("div",{className:"w-full",children:[t==="identify"&&s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(B2,{className:"w-8 h-8 inline text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Patient Access"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Patient ID (MRN) or Email"})]}),s.jsx("input",{type:"text",value:r,onChange:A=>i(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"MRN-001234 or you@example.com"}),b&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:b}),s.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Sa,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&s.jsxs("form",{onSubmit:C,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:a,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{type:"password",value:f,onChange:A=>g(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),b&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:b}),s.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Sa,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&s.jsxs("form",{onSubmit:k,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(ks,{className:"w-8 h-8 inline text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",a]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsx("input",{type:"password",value:f,onChange:A=>g(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsx("input",{type:"password",value:y,onChange:A=>j(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),b&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:b}),s.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(ks,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},l3=()=>{const{signIn:e}=Se(),[t,n]=x.useState("identify"),[r,i]=x.useState(""),[a,l]=x.useState(""),[u,d]=x.useState(null),[m,h]=x.useState(""),[f,g]=x.useState(""),[y,j]=x.useState(!1),[w,P]=x.useState(""),b=async k=>{k.preventDefault(),P(""),j(!0);try{let C=null,A="";const O=r.trim();if(!O)throw new Error("Enter Volunteer ID or Email");if(O.includes("@")){const{data:D}=await Ct(),M=(D||[]).find($=>$.role==="volunteer"&&$.email.toLowerCase()===O.toLowerCase());if(!M)throw new Error("Volunteer email not found");C=M.id,A=M.email}else{const{data:D}=await IM(O);if(!D)throw new Error("Volunteer ID not found");C=D.user_id;const M=C?Ai(C):void 0;if(!M)throw new Error("No user linked to this volunteer");A=M.email}d(C),l(A);const I=C?Ai(C):void 0,B=!!(I&&I.password&&I.password.length>0);n(B?"password":"set-password")}catch(C){P(C.message||"Unable to identify")}finally{j(!1)}},N=async k=>{if(k.preventDefault(),P(""),m.length<6)return P("Password must be at least 6 characters");if(m!==f)return P("Passwords do not match");if(!u)return P("Missing user account");j(!0);try{const{error:C}=await Yd(u,m);if(C)throw new Error(C.message);const A=await e(a,m);A!=null&&A.error&&P(A.error.message)}catch(C){P(C.message||"Unable to set password")}finally{j(!1)}},_=async k=>{k.preventDefault(),P(""),j(!0);try{const{error:C}=await e(a,m);C&&P(C.message)}finally{j(!1)}};return s.jsxs("div",{className:"w-full",children:[t==="identify"&&s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(B2,{className:"w-8 h-8 inline text-emerald-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Volunteer Access"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Volunteer ID or Email"})]}),s.jsx("input",{type:"text",value:r,onChange:k=>i(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"VHV-000123 or you@example.com"}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:y,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[y?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Sa,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:a,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{type:"password",value:m,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:y,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[y?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Sa,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&s.jsxs("form",{onSubmit:N,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(ks,{className:"w-8 h-8 inline text-emerald-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",a]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsx("input",{type:"password",value:m,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsx("input",{type:"password",value:f,onChange:k=>g(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:y,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[y?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(ks,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},c3=()=>{const{signIn:e}=Se(),[t,n]=x.useState("identify"),[r,i]=x.useState(""),[a,l]=x.useState(""),[u,d]=x.useState(null),[m,h]=x.useState(""),[f,g]=x.useState(""),[y,j]=x.useState(!1),[w,P]=x.useState(""),b=async k=>{k.preventDefault(),P(""),j(!0);try{let C=null,A="";const O=r.trim();if(!O)throw new Error("Enter Doctor ID or Email");if(O.includes("@")){const{data:D}=await Ct(),M=(D||[]).find($=>$.role==="doctor"&&($.email||"").toLowerCase()===O.toLowerCase());if(!M)throw new Error("Doctor email not found");C=M.id,A=M.email}else{const{data:D}=await ZM(O);if(!D)throw new Error("Doctor ID not found");C=D.id,A=D.email}d(C),l(A);const I=C?Ai(C):void 0,B=!!(I&&I.password&&I.password.length>0);n(B?"password":"set-password")}catch(C){P(C.message||"Unable to identify")}finally{j(!1)}},N=async k=>{if(k.preventDefault(),P(""),m.length<6)return P("Password must be at least 6 characters");if(m!==f)return P("Passwords do not match");if(!u)return P("Missing user account");j(!0);try{const{error:C}=await Yd(u,m);if(C)throw new Error(C.message);const A=await e(a,m);A!=null&&A.error&&P(A.error.message)}catch(C){P(C.message||"Unable to set password")}finally{j(!1)}},_=async k=>{k.preventDefault(),P(""),j(!0);try{const{error:C}=await e(a,m);C&&P(C.message)}finally{j(!1)}};return s.jsxs("div",{className:"w-full",children:[t==="identify"&&s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(Zu,{className:"w-8 h-8 inline text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Doctor Access"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Doctor ID or Email"})]}),s.jsx("input",{type:"text",value:r,onChange:k=>i(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"DR-000123 or you@example.com"}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[y?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Sa,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:a,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{type:"password",value:m,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[y?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Sa,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&s.jsxs("form",{onSubmit:N,className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(ks,{className:"w-8 h-8 inline text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",a]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsx("input",{type:"password",value:m,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsx("input",{type:"password",value:f,onChange:k=>g(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),w&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),s.jsxs("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[y?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(ks,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},u3=()=>{const[e,t]=x.useState("patient"),[n,r]=x.useState(!0),[i,a]=x.useState(""),[l,u]=x.useState(""),[d,m]=x.useState(""),[h,f]=x.useState("patient"),[g,y]=x.useState(!1),[j,w]=x.useState(""),{signIn:P,signUp:b}=Se(),N=async _=>{_.preventDefault(),w(""),y(!0);try{if(n){const{error:k}=await P(i,l);k&&w(k.message)}else{const{error:k}=await b(i,l,d,h);k&&w(k.message)}}catch{w("An unexpected error occurred")}finally{y(!1)}};return e==="patient"?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"flex justify-center mb-3",children:s.jsx("img",{src:"/logo.png",alt:"Health Bride",className:"h-12"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Health Bride Patient Portal"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Access with your MRN or email"})]}),s.jsx(o3,{}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{onClick:()=>t("staff"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Staff login"}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsx("button",{onClick:()=>t("volunteer"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Volunteer login"})]})})]})}):e==="volunteer"?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"flex justify-center mb-3",children:s.jsx("img",{src:"/logo.png",alt:"Health Bride",className:"h-12"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Health Bride Volunteer Portal"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Access with Volunteer ID or email"})]}),s.jsx(l3,{}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{onClick:()=>t("staff"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Staff login"}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsx("button",{onClick:()=>t("patient"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Patient login"})]})})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("img",{src:"/logo.png",alt:"Health Bride",className:"h-12"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Health Bride Portal"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),s.jsx("div",{className:"mb-6",children:s.jsx(c3,{})}),s.jsxs("form",{onSubmit:N,className:"space-y-6 hidden",children:[!n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",required:!0,value:d,onChange:_=>m(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{value:h,onChange:_=>f(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"patient",children:"Patient"}),s.jsx("option",{value:"doctor",children:"Doctor"}),s.jsx("option",{value:"volunteer",children:"Volunteer"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",required:!0,value:i,onChange:_=>a(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{type:"password",required:!0,value:l,onChange:_=>u(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your password"})]}),j&&s.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:j}),s.jsx("button",{type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[n?s.jsx(Sa,{className:"w-5 h-5"}):s.jsx(kM,{className:"w-5 h-5"}),s.jsx("span",{children:n?"Sign In":"Sign Up"})]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{onClick:()=>t("patient"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Patient login"}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsx("button",{onClick:()=>t("volunteer"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Volunteer login"})]})})]})})},d3=({onMenuClick:e,onViewChange:t})=>{var d,m;const{user:n,signOut:r}=Se(),[i,a]=x.useState(void 0);x.useEffect(()=>{let h=!0;return(async()=>{if(n){if(n.photo_url){a(n.photo_url);return}if(n.role==="patient"){const{data:g}=await ii(n.id);h&&a(g==null?void 0:g.photo_url)}}})(),()=>{h=!1}},[n]);const l=async()=>{await r()},u=h=>{switch(h){case"doctor":return"bg-green-100 text-green-800";case"volunteer":return"bg-purple-100 text-purple-800";case"patient":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s.jsx("nav",{className:"bg-white shadow-md border-b border-gray-200 sticky top-0 z-20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100",onClick:e,"aria-label":"Open menu",children:s.jsx($2,{className:"w-5 h-5"})})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t("user-profile"),className:"w-9 h-9 rounded-full overflow-hidden border border-gray-200 bg-gray-50 flex items-center justify-center hover:ring-2 hover:ring-blue-500",title:"My Profile",children:i?s.jsx("img",{src:i,className:"w-full h-full object-cover"}):s.jsx(Re,{className:"w-5 h-5 text-gray-500"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:n==null?void 0:n.full_name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u((n==null?void 0:n.role)||"")}`,children:((d=n==null?void 0:n.role)==null?void 0:d.charAt(0).toUpperCase())+((m=n==null?void 0:n.role)==null?void 0:m.slice(1))})]}),s.jsx("button",{onClick:l,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",title:"Sign Out",children:s.jsx(jM,{className:"w-5 h-5"})})]})]})})})},f3=({currentView:e,onViewChange:t,mobileOpen:n,setMobileOpen:r})=>{const{user:i}=Se(),[a,l]=x.useState(!1);x.useEffect(()=>{const f=localStorage.getItem("sidebar-collapsed");f&&l(f==="1")},[]);const u=()=>{const f=!a;l(f),localStorage.setItem("sidebar-collapsed",f?"1":"0")},d=()=>{const f=[{key:"dashboard",label:"Dashboard",icon:Re},{key:"messages",label:"Messages",icon:Dl},{key:"tasks",label:"My Tasks",icon:Yo},{key:"records",label:"Daily Records",icon:pa},{key:"map",label:"Map",icon:xv}];if((i==null?void 0:i.role)==="doctor"||(i==null?void 0:i.role)==="volunteer"){if(f.splice(1,0,{key:"patients",label:"Patients",icon:os}),(i==null?void 0:i.role)==="doctor"&&(f.splice(2,0,{key:"volunteers",label:"Volunteers",icon:Yo}),f.splice(3,0,{key:"doctors",label:"Doctors",icon:mn}),f.splice(5,0,{key:"med-requests",label:"Medication Requests",icon:mn})),(i==null?void 0:i.role)==="volunteer"){const g=f.findIndex(y=>y.key==="tasks");f.splice(g+1,0,{key:"appointments",label:"Appointments",icon:Ps}),f.splice(2,0,{key:"doctors",label:"Doctors",icon:mn}),f.splice(6,0,{key:"med-requests",label:"Medication Requests",icon:mn})}}else if((i==null?void 0:i.role)==="patient"){f.splice(1,0,{key:"profile",label:"My Profile",icon:os}),f.splice(2,0,{key:"doctors",label:"Doctors",icon:mn}),f.splice(3,0,{key:"medication",label:"Medication Request",icon:Ws}),f.splice(4,0,{key:"medications",label:"My Medications",icon:mn}),f.splice(4,0,{key:"mental",label:"Mental Assessment",icon:pa});const g=f.findIndex(y=>y.key==="tasks");g!==-1&&(f[g]={key:"appointments",label:"Appointments",icon:Ps})}return(i==null?void 0:i.role)==="doctor"&&(f.splice(3,0,{key:"volunteer-tasks",label:"Volunteer Tasks",icon:Yo}),f.splice(4,0,{key:"mental-assessments",label:"Mental Assessments",icon:pa})),f},m=()=>s.jsx("ul",{className:"mt-4 space-y-1",children:d().map(f=>{const g=f.icon,y=e===f.key;return s.jsx("li",{children:s.jsxs("button",{onClick:()=>{t(f.key),r&&r(!1)},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${y?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[s.jsx(g,{className:"w-5 h-5 shrink-0"}),!a&&s.jsx("span",{className:"text-sm font-medium truncate",children:f.label})]})},f.key)})}),h=s.jsxs("div",{className:`h-full flex flex-col ${a?"items-center":""}`,children:[s.jsx("div",{className:`flex items-center ${a?"justify-center":"justify-start"} h-16 px-3 border-b border-gray-200`,children:a?s.jsx("img",{src:"/logo.png",alt:"logo",className:"h-8 object-contain"}):s.jsx("img",{src:"/logo.png",alt:"logo",className:"h-9 object-contain"})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:s.jsx(m,{})}),s.jsx("div",{className:"p-2 border-t border-gray-200",children:s.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg px-3 py-2",children:[a?s.jsx($2,{className:"w-4 h-4"}):s.jsx(bM,{className:"w-4 h-4"}),!a&&s.jsx("span",{className:"text-sm",children:"Collapse"})]})})]});return s.jsxs(s.Fragment,{children:[s.jsx("aside",{className:`hidden md:flex md:flex-col bg-white border-r border-gray-200 h-screen sticky top-0 z-30 transition-[width] duration-200 ${a?"w-20":"w-64"}`,children:h}),s.jsxs("div",{className:`md:hidden ${n?"fixed inset-0 z-40":"hidden"}`,children:[s.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>r&&r(!1)}),s.jsxs("aside",{className:"absolute left-0 top-0 h-full w-72 bg-white border-r border-gray-200 shadow-xl",children:[s.jsxs("div",{className:"h-16 flex items-center justify-between px-3 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:s.jsx(mn,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-lg font-bold text-gray-900",children:"HealthBridge"})]}),s.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100",onClick:()=>r&&r(!1),children:s.jsx(Cs,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"h-[calc(100%-4rem)] overflow-y-auto px-2",children:s.jsx(m,{})})]})]})]})},h3=({announcement:e,onClose:t,onSuccess:n})=>{const{user:r}=Se(),[i,a]=x.useState(!1),[l,u]=x.useState({title:(e==null?void 0:e.title)||"",content:(e==null?void 0:e.content)||"",priority:(e==null?void 0:e.priority)||"medium"}),d=async h=>{h.preventDefault(),a(!0);try{if(e){const{error:f}=await KM(e.id,l);if(f){console.error("Error updating announcement:",f);return}}else{const{error:f}=await VM({...l,created_by:(r==null?void 0:r.id)||""});if(f){console.error("Error creating announcement:",f);return}}n(),t()}catch(f){console.error("Error saving announcement:",f)}finally{a(!1)}},m=h=>{const{name:f,value:g}=h.target;u({...l,[f]:g})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(du,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Edit Announcement":"Create New Announcement"})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(Cs,{className:"w-5 h-5"})})]})}),s.jsxs("form",{onSubmit:d,className:"p-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),s.jsx("input",{type:"text",name:"title",required:!0,value:l.title,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter announcement title..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),s.jsxs("select",{name:"priority",required:!0,value:l.priority,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),s.jsx("textarea",{name:"content",required:!0,rows:6,value:l.content,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter announcement content..."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Aa,{className:"w-5 h-5"}),s.jsxs("span",{children:[e?"Update":"Create"," Announcement"]})]})})]})]})]})})};function K2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=K2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function $e(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=K2(e))&&(r&&(r+=" "),r+=t);return r}var Qd={},q2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(q2);var bv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(bv);var _v={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(_v);var Jd={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let a=0,l="",u="",d=!1;for(n.charCodeAt(0)===46&&(r.push(""),a++);a<i;){const m=n[a];u?m==="\\"&&a+1<i?(a++,l+=n[a]):m===u?u="":l+=m:d?m==='"'||m==="'"?u=m:m==="]"?(d=!1,r.push(l),l=""):l+=m:m==="["?(d=!0,l&&(r.push(l),l="")):m==="."?l&&(r.push(l),l=""):l+=m,a++}return l&&r.push(l),r}e.toPath=t})(Jd);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q2,n=bv,r=_v,i=Jd;function a(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const h=u[d];return h===void 0?n.isDeepKey(d)?a(u,i.toPath(d),m):m:h}case"number":case"symbol":{typeof d=="number"&&(d=r.toKey(d));const h=u[d];return h===void 0?m:h}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const h=u[d];return h===void 0?m:h}}}function l(u,d,m){if(d.length===0)return m;let h=u;for(let f=0;f<d.length;f++){if(h==null||t.isUnsafeProperty(d[f]))return m;h=h[d[f]]}return h===void 0?m:h}e.get=a})(Qd);var m3=Qd.get;const Es=Tr(m3);var G2={exports:{}},Le={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv=Symbol.for("react.transitional.element"),jv=Symbol.for("react.portal"),ef=Symbol.for("react.fragment"),tf=Symbol.for("react.strict_mode"),nf=Symbol.for("react.profiler"),rf=Symbol.for("react.consumer"),af=Symbol.for("react.context"),sf=Symbol.for("react.forward_ref"),of=Symbol.for("react.suspense"),lf=Symbol.for("react.suspense_list"),cf=Symbol.for("react.memo"),uf=Symbol.for("react.lazy"),p3=Symbol.for("react.view_transition"),g3=Symbol.for("react.client.reference");function Xn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wv:switch(e=e.type,e){case ef:case nf:case tf:case of:case lf:case p3:return e;default:switch(e=e&&e.$$typeof,e){case af:case sf:case uf:case cf:return e;case rf:return e;default:return t}}case jv:return t}}}Le.ContextConsumer=rf;Le.ContextProvider=af;Le.Element=wv;Le.ForwardRef=sf;Le.Fragment=ef;Le.Lazy=uf;Le.Memo=cf;Le.Portal=jv;Le.Profiler=nf;Le.StrictMode=tf;Le.Suspense=of;Le.SuspenseList=lf;Le.isContextConsumer=function(e){return Xn(e)===rf};Le.isContextProvider=function(e){return Xn(e)===af};Le.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wv};Le.isForwardRef=function(e){return Xn(e)===sf};Le.isFragment=function(e){return Xn(e)===ef};Le.isLazy=function(e){return Xn(e)===uf};Le.isMemo=function(e){return Xn(e)===cf};Le.isPortal=function(e){return Xn(e)===jv};Le.isProfiler=function(e){return Xn(e)===nf};Le.isStrictMode=function(e){return Xn(e)===tf};Le.isSuspense=function(e){return Xn(e)===of};Le.isSuspenseList=function(e){return Xn(e)===lf};Le.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ef||e===nf||e===tf||e===of||e===lf||typeof e=="object"&&e!==null&&(e.$$typeof===uf||e.$$typeof===cf||e.$$typeof===af||e.$$typeof===rf||e.$$typeof===sf||e.$$typeof===g3||e.getModuleId!==void 0)};Le.typeOf=Xn;G2.exports=Le;var v3=G2.exports,rn=e=>e===0?0:e>0?1:-1,jn=e=>typeof e=="number"&&e!=+e,la=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,de=e=>(typeof e=="number"||e instanceof Number)&&!jn(e),Er=e=>de(e)||typeof e=="string",y3=0,yl=e=>{var t=++y3;return"".concat(e||"").concat(t)},pr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!de(t)&&typeof t!="string")return r;var a;if(la(t)){if(n==null)return r;var l=t.indexOf("%");a=n*parseFloat(t.slice(0,l))/100}else a=+t;return jn(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},Y2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Zt(e,t,n){return de(e)&&de(t)?e+n*(t-e):t}function x3(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Es(r,t))===n)}var vt=e=>e===null||typeof e>"u",zl=e=>vt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),b3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Nv(e){if(typeof e!="string")return!1;var t=b3;return t.includes(e)}var _3=["viewBox","children"],Lb=["points","pathLength"],rm={svg:_3,polygon:Lb,polyline:Lb},w3=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(x.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Nv(i)&&(r[i]=a=>n[i](n,a))}),r},j3=(e,t,n)=>r=>(e(t,n,r),null),df=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];Nv(i)&&typeof a=="function"&&(r||(r={}),r[i]=j3(a,t,n))}),r},N3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function X2(e){if(typeof e!="string")return!1;var t=N3;return t.includes(e)}function Vs(e){var t=Object.entries(e).filter(n=>{var[r]=n;return X2(r)});return Object.fromEntries(t)}var Db=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Ib=null,im=null,Q2=e=>{if(e===Ib&&Array.isArray(im))return im;var t=[];return x.Children.forEach(e,n=>{vt(n)||(v3.isFragment(n)?t=t.concat(Q2(n.props.children)):t.push(n))}),im=t,Ib=e,t};function S3(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>Db(i)):r=[Db(t)],Q2(e).forEach(i=>{var a=Es(i,"type.displayName")||Es(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}var P3=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(i=r&&(rm==null?void 0:rm[r]))!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&a.includes(t)||X2(t)),d=!!n&&Nv(t);return l||u||d},Ot=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(x.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(a=>{var l;P3((l=r)===null||l===void 0?void 0:l[a],a,t,n)&&(i[a]=r[a])}),i},k3=["children","width","height","viewBox","className","style","title","desc"];function Op(){return Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Op.apply(null,arguments)}function C3(e,t){if(e==null)return{};var n,r,i=E3(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function E3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Sv=x.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:a,className:l,style:u,title:d,desc:m}=e,h=C3(e,k3),f=a||{width:r,height:i,x:0,y:0},g=$e("recharts-surface",l);return x.createElement("svg",Op({},Ot(h,!0,"svg"),{className:g,width:r,height:i,style:u,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),x.createElement("title",null,d),x.createElement("desc",null,m),n)}),O3=["children","className"];function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tp.apply(null,arguments)}function T3(e,t){if(e==null)return{};var n,r,i=A3(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Ii=x.forwardRef((e,t)=>{var{children:n,className:r}=e,i=T3(e,O3),a=$e("recharts-layer",r);return x.createElement("g",Tp({className:a},Ot(i,!0),{ref:t}),n)}),J2=x.createContext(null),M3=()=>x.useContext(J2);function Ie(e){return function(){return e}}const eN=Math.cos,Ku=Math.sin,gr=Math.sqrt,qu=Math.PI,ff=2*qu,Ap=Math.PI,Mp=2*Ap,ea=1e-6,L3=Mp-ea;function tN(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function D3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tN;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class I3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tN:D3(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+l}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,u=this._y1,d=r-t,m=i-n,h=l-t,f=u-n,g=h*h+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>ea)if(!(Math.abs(f*d-m*h)>ea)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=r-l,j=i-u,w=d*d+m*m,P=y*y+j*j,b=Math.sqrt(w),N=Math.sqrt(g),_=a*Math.tan((Ap-Math.acos((w+g-P)/(2*b*N)))/2),k=_/N,C=_/b;Math.abs(k-1)>ea&&this._append`L${t+k*h},${n+k*f}`,this._append`A${a},${a},0,0,${+(f*y>h*j)},${this._x1=t+C*d},${this._y1=n+C*m}`}}arc(t,n,r,i,a,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),d=r*Math.sin(i),m=t+u,h=n+d,f=1^l,g=l?i-a:a-i;this._x1===null?this._append`M${m},${h}`:(Math.abs(this._x1-m)>ea||Math.abs(this._y1-h)>ea)&&this._append`L${m},${h}`,r&&(g<0&&(g=g%Mp+Mp),g>L3?this._append`A${r},${r},0,1,${f},${t-u},${n-d}A${r},${r},0,1,${f},${this._x1=m},${this._y1=h}`:g>ea&&this._append`A${r},${r},0,${+(g>=Ap)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Pv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new I3(t)}function kv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nN(e){this._context=e}nN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function hf(e){return new nN(e)}function rN(e){return e[0]}function iN(e){return e[1]}function aN(e,t){var n=Ie(!0),r=null,i=hf,a=null,l=Pv(u);e=typeof e=="function"?e:e===void 0?rN:Ie(e),t=typeof t=="function"?t:t===void 0?iN:Ie(t);function u(d){var m,h=(d=kv(d)).length,f,g=!1,y;for(r==null&&(a=i(y=l())),m=0;m<=h;++m)!(m<h&&n(f=d[m],m,d))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+e(f,m,d),+t(f,m,d));if(y)return a=null,y+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Ie(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Ie(+d),u):t},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:Ie(!!d),u):n},u.curve=function(d){return arguments.length?(i=d,r!=null&&(a=i(r)),u):i},u.context=function(d){return arguments.length?(d==null?r=a=null:a=i(r=d),u):r},u}function Rc(e,t,n){var r=null,i=Ie(!0),a=null,l=hf,u=null,d=Pv(m);e=typeof e=="function"?e:e===void 0?rN:Ie(+e),t=typeof t=="function"?t:Ie(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?iN:Ie(+n);function m(f){var g,y,j,w=(f=kv(f)).length,P,b=!1,N,_=new Array(w),k=new Array(w);for(a==null&&(u=l(N=d())),g=0;g<=w;++g){if(!(g<w&&i(P=f[g],g,f))===b)if(b=!b)y=g,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),j=g-1;j>=y;--j)u.point(_[j],k[j]);u.lineEnd(),u.areaEnd()}b&&(_[g]=+e(P,g,f),k[g]=+t(P,g,f),u.point(r?+r(P,g,f):_[g],n?+n(P,g,f):k[g]))}if(N)return u=null,N+""||null}function h(){return aN().defined(i).curve(l).context(a)}return m.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ie(+f),r=null,m):e},m.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ie(+f),m):e},m.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ie(+f),m):r},m.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ie(+f),n=null,m):t},m.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ie(+f),m):t},m.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ie(+f),m):n},m.lineX0=m.lineY0=function(){return h().x(e).y(t)},m.lineY1=function(){return h().x(e).y(n)},m.lineX1=function(){return h().x(r).y(t)},m.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ie(!!f),m):i},m.curve=function(f){return arguments.length?(l=f,a!=null&&(u=l(a)),m):l},m.context=function(f){return arguments.length?(f==null?a=u=null:u=l(a=f),m):a},m}class sN{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function R3(e){return new sN(e,!0)}function z3(e){return new sN(e,!1)}const Cv={draw(e,t){const n=gr(t/qu);e.moveTo(n,0),e.arc(0,0,n,0,ff)}},$3={draw(e,t){const n=gr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},oN=gr(1/3),B3=oN*2,F3={draw(e,t){const n=gr(t/B3),r=n*oN;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},U3={draw(e,t){const n=gr(t),r=-n/2;e.rect(r,r,n,n)}},H3=.8908130915292852,lN=Ku(qu/10)/Ku(7*qu/10),Z3=Ku(ff/10)*lN,W3=-eN(ff/10)*lN,V3={draw(e,t){const n=gr(t*H3),r=Z3*n,i=W3*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const l=ff*a/5,u=eN(l),d=Ku(l);e.lineTo(d*n,-u*n),e.lineTo(u*r-d*i,d*r+u*i)}e.closePath()}},am=gr(3),K3={draw(e,t){const n=-gr(t/(am*3));e.moveTo(0,n*2),e.lineTo(-am*n,-n),e.lineTo(am*n,-n),e.closePath()}},An=-.5,Mn=gr(3)/2,Lp=1/gr(12),q3=(Lp/2+1)*3,G3={draw(e,t){const n=gr(t/q3),r=n/2,i=n*Lp,a=r,l=n*Lp+n,u=-a,d=l;e.moveTo(r,i),e.lineTo(a,l),e.lineTo(u,d),e.lineTo(An*r-Mn*i,Mn*r+An*i),e.lineTo(An*a-Mn*l,Mn*a+An*l),e.lineTo(An*u-Mn*d,Mn*u+An*d),e.lineTo(An*r+Mn*i,An*i-Mn*r),e.lineTo(An*a+Mn*l,An*l-Mn*a),e.lineTo(An*u+Mn*d,An*d-Mn*u),e.closePath()}};function Y3(e,t){let n=null,r=Pv(i);e=typeof e=="function"?e:Ie(e||Cv),t=typeof t=="function"?t:Ie(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Ie(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Ie(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Gu(){}function Yu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function cN(e){this._context=e}cN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function X3(e){return new cN(e)}function uN(e){this._context=e}uN.prototype={areaStart:Gu,areaEnd:Gu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Yu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Q3(e){return new uN(e)}function dN(e){this._context=e}dN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Yu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function J3(e){return new dN(e)}function fN(e){this._context=e}fN.prototype={areaStart:Gu,areaEnd:Gu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function e4(e){return new fN(e)}function Rb(e){return e<0?-1:1}function zb(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(a*i+l*r)/(r+i);return(Rb(a)+Rb(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(u))||0}function $b(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function sm(e,t,n){var r=e._x0,i=e._y0,a=e._x1,l=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,l-u*n,a,l)}function Xu(e){this._context=e}Xu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sm(this,this._t0,$b(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,sm(this,$b(this,n=zb(this,e,t)),n);break;default:sm(this,this._t0,n=zb(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function hN(e){this._context=new mN(e)}(hN.prototype=Object.create(Xu.prototype)).point=function(e,t){Xu.prototype.point.call(this,t,e)};function mN(e){this._context=e}mN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function t4(e){return new Xu(e)}function n4(e){return new hN(e)}function pN(e){this._context=e}pN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Bb(e),i=Bb(t),a=0,l=1;l<n;++a,++l)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Bb(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),l=new Array(n);for(i[0]=0,a[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function r4(e){return new pN(e)}function mf(e,t){this._context=e,this._t=t}mf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function i4(e){return new mf(e,.5)}function a4(e){return new mf(e,0)}function s4(e){return new mf(e,1)}function Os(e,t){if((l=e.length)>1)for(var n=1,r,i,a=e[t[0]],l,u=a.length;n<l;++n)for(i=a,a=e[t[n]],r=0;r<u;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Dp(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function o4(e,t){return e[t]}function l4(e){const t=[];return t.key=e,t}function c4(){var e=Ie([]),t=Dp,n=Os,r=o4;function i(a){var l=Array.from(e.apply(this,arguments),l4),u,d=l.length,m=-1,h;for(const f of a)for(u=0,++m;u<d;++u)(l[u][m]=[0,+r(f,l[u].key,m,a)]).data=f;for(u=0,h=kv(t(l));u<d;++u)l[h[u]].index=u;return n(l,h),l}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Ie(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Ie(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?Dp:typeof a=="function"?a:Ie(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??Os,i):n},i}function u4(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,l;i<a;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}Os(e,t)}}function d4(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}Os(e,t)}}function f4(e,t){if(!(!((l=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,l;r<a;++r){for(var u=0,d=0,m=0;u<l;++u){for(var h=e[t[u]],f=h[r][1]||0,g=h[r-1][1]||0,y=(f-g)/2,j=0;j<u;++j){var w=e[t[j]],P=w[r][1]||0,b=w[r-1][1]||0;y+=P-b}d+=f,m+=y*f}i[r-1][1]+=i[r-1][0]=n,d&&(n-=m/d)}i[r-1][1]+=i[r-1][0]=n,Os(e,t)}}var h4=["type","size","sizeType"];function Ip(){return Ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ip.apply(null,arguments)}function Fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ub(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fb(Object(n),!0).forEach(function(r){m4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m4(e,t,n){return(t=p4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p4(e){var t=g4(e,"string");return typeof t=="symbol"?t:t+""}function g4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v4(e,t){if(e==null)return{};var n,r,i=y4(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var gN={symbolCircle:Cv,symbolCross:$3,symbolDiamond:F3,symbolSquare:U3,symbolStar:V3,symbolTriangle:K3,symbolWye:G3},x4=Math.PI/180,b4=e=>{var t="symbol".concat(zl(e));return gN[t]||Cv},_4=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*x4;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},w4=(e,t)=>{gN["symbol".concat(zl(e))]=t},Ev=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=v4(e,h4),a=Ub(Ub({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var g=b4(l),y=Y3().type(g).size(_4(n,r,l));return y()},{className:d,cx:m,cy:h}=a,f=Ot(a,!0);return m===+m&&h===+h&&n===+n?x.createElement("path",Ip({},f,{className:$e("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(h,")"),d:u()})):null};Ev.registerSymbol=w4;function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rp.apply(null,arguments)}function Hb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function j4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hb(Object(n),!0).forEach(function(r){Ov(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ov(e,t,n){return(t=N4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N4(e){var t=S4(e,"string");return typeof t=="symbol"?t:t+""}function S4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ln=32;class Tv extends x.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Ln/2,a=Ln/6,l=Ln/3,u=t.inactive?r:t.color,d=n??t.type;if(d==="none")return null;if(d==="plainline")return x.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Ln,y2:i,className:"recharts-legend-icon"});if(d==="line")return x.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Ln,"M").concat(2*l,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(d==="rect")return x.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Ln/8,"h").concat(Ln,"v").concat(Ln*3/4,"h").concat(-Ln,"z"),className:"recharts-legend-icon"});if(x.isValidElement(t.legendIcon)){var m=j4({},t);return delete m.legendIcon,x.cloneElement(t.legendIcon,m)}return x.createElement(Ev,{fill:u,cx:i,cy:i,size:Ln,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:l}=this.props,u={x:0,y:0,width:Ln,height:Ln},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,f)=>{var g=h.formatter||i,y=$e({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:h.inactive});if(h.type==="none")return null;var j=h.inactive?a:h.color,w=g?g(h.value,h,f):h.value;return x.createElement("li",Rp({className:y,style:d,key:"legend-item-".concat(f)},df(this.props,h,f)),x.createElement(Sv,{width:n,height:n,viewBox:u,style:m,"aria-label":"".concat(w," legend icon")},this.renderIcon(h,l)),x.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},w))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return x.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Ov(Tv,"displayName","Legend");Ov(Tv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var vN={},yN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let a=0;a<n.length;a++){const l=n[a],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(yN);var Av={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Av);var xN={},pf={},bN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(bN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bN;function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(pf);var _N={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(_N);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pf,n=_N;function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(xN);var wN={},jN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qd;function n(r){return function(i){return t.get(i,r)}}e.property=n})(jN);var NN={},om={},lm={},Mv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Mv);var Lv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Lv);var Dv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Dv);var Zb;function P4(){return Zb||(Zb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iv(),n=Mv,r=Lv,i=Dv;function a(f,g,y){return typeof y!="function"?t.isMatch(f,g):l(f,g,function j(w,P,b,N,_,k){const C=y(w,P,b,N,_,k);return C!==void 0?!!C:l(w,P,j,k)},new Map)}function l(f,g,y,j){if(g===f)return!0;switch(typeof g){case"object":return u(f,g,y,j);case"function":return Object.keys(g).length>0?l(f,{...g},y,j):i.eq(f,g);default:return n.isObject(f)?typeof g=="string"?g==="":!0:i.eq(f,g)}}function u(f,g,y,j){if(g==null)return!0;if(Array.isArray(g))return m(f,g,y,j);if(g instanceof Map)return d(f,g,y,j);if(g instanceof Set)return h(f,g,y,j);const w=Object.keys(g);if(f==null)return w.length===0;if(w.length===0)return!0;if(j&&j.has(g))return j.get(g)===f;j&&j.set(g,f);try{for(let P=0;P<w.length;P++){const b=w[P];if(!r.isPrimitive(f)&&!(b in f)||g[b]===void 0&&f[b]!==void 0||g[b]===null&&f[b]!==null||!y(f[b],g[b],b,f,g,j))return!1}return!0}finally{j&&j.delete(g)}}function d(f,g,y,j){if(g.size===0)return!0;if(!(f instanceof Map))return!1;for(const[w,P]of g.entries()){const b=f.get(w);if(y(b,P,w,f,g,j)===!1)return!1}return!0}function m(f,g,y,j){if(g.length===0)return!0;if(!Array.isArray(f))return!1;const w=new Set;for(let P=0;P<g.length;P++){const b=g[P];let N=!1;for(let _=0;_<f.length;_++){if(w.has(_))continue;const k=f[_];let C=!1;if(y(k,b,P,f,g,j)&&(C=!0),C){w.add(_),N=!0;break}}if(!N)return!1}return!0}function h(f,g,y,j){return g.size===0?!0:f instanceof Set?m([...f],[...g],y,j):!1}e.isMatchWith=a,e.isSetMatch=h}(lm)),lm}var Wb;function Iv(){return Wb||(Wb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P4();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n}(om)),om}var SN={},Rv={},PN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(PN);var zv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(zv);var $v={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",h="[object Array]",f="[object Function]",g="[object ArrayBuffer]",y="[object Object]",j="[object Error]",w="[object DataView]",P="[object Uint8Array]",b="[object Uint8ClampedArray]",N="[object Uint16Array]",_="[object Uint32Array]",k="[object BigUint64Array]",C="[object Int8Array]",A="[object Int16Array]",O="[object Int32Array]",I="[object BigInt64Array]",B="[object Float32Array]",D="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=g,e.arrayTag=h,e.bigInt64ArrayTag=I,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=w,e.dateTag=u,e.errorTag=j,e.float32ArrayTag=B,e.float64ArrayTag=D,e.functionTag=f,e.int16ArrayTag=A,e.int32ArrayTag=O,e.int8ArrayTag=C,e.mapTag=d,e.numberTag=r,e.objectTag=y,e.regexpTag=t,e.setTag=m,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=N,e.uint32ArrayTag=_,e.uint8ArrayTag=P,e.uint8ClampedArrayTag=b})($v);var kN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(kN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PN,n=zv,r=$v,i=Lv,a=kN;function l(h,f){return u(h,void 0,h,new Map,f)}function u(h,f,g,y=new Map,j=void 0){const w=j==null?void 0:j(h,f,g,y);if(w!==void 0)return w;if(i.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const P=new Array(h.length);y.set(h,P);for(let b=0;b<h.length;b++)P[b]=u(h[b],b,g,y,j);return Object.hasOwn(h,"index")&&(P.index=h.index),Object.hasOwn(h,"input")&&(P.input=h.input),P}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const P=new RegExp(h.source,h.flags);return P.lastIndex=h.lastIndex,P}if(h instanceof Map){const P=new Map;y.set(h,P);for(const[b,N]of h)P.set(b,u(N,b,g,y,j));return P}if(h instanceof Set){const P=new Set;y.set(h,P);for(const b of h)P.add(u(b,void 0,g,y,j));return P}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const P=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,P);for(let b=0;b<h.length;b++)P[b]=u(h[b],b,g,y,j);return P}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const P=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,P),d(P,h,g,y,j),P}if(typeof File<"u"&&h instanceof File){const P=new File([h],h.name,{type:h.type});return y.set(h,P),d(P,h,g,y,j),P}if(h instanceof Blob){const P=new Blob([h],{type:h.type});return y.set(h,P),d(P,h,g,y,j),P}if(h instanceof Error){const P=new h.constructor;return y.set(h,P),P.message=h.message,P.name=h.name,P.stack=h.stack,P.cause=h.cause,d(P,h,g,y,j),P}if(typeof h=="object"&&m(h)){const P=Object.create(Object.getPrototypeOf(h));return y.set(h,P),d(P,h,g,y,j),P}return h}function d(h,f,g=h,y,j){const w=[...Object.keys(f),...t.getSymbols(f)];for(let P=0;P<w.length;P++){const b=w[P],N=Object.getOwnPropertyDescriptor(h,b);(N==null||N.writable)&&(h[b]=u(f[b],b,g,y,j))}}function m(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Rv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rv;function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(SN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iv(),n=SN;function r(i){return i=n.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=r})(NN);var CN={},EN={},ON={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rv,n=$v;function r(i,a){return t.cloneDeepWith(i,(l,u,d,m)=>{const h=a==null?void 0:a(l,u,d,m);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(f,i),f}case n.argumentsTag:{const f={};return t.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}e.cloneDeepWith=r})(ON);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ON;function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(EN);var TN={},Bv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Bv);var AN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zv;function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(AN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bv,n=Bv,r=AN,i=Jd;function a(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=i.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let h=0;h<d.length;h++){const f=d[h];if((m==null||!Object.hasOwn(m,f))&&!((Array.isArray(m)||r.isArguments(m))&&n.isIndex(f)&&f<m.length))return!1;m=m[f]}return!0}e.has=a})(TN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iv(),n=_v,r=EN,i=Qd,a=TN;function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return d=r.cloneDeep(d),function(m){const h=i.get(m,u);return h===void 0?a.has(m,u):d===void 0?h===void 0:t.isMatch(h,d)}}e.matchesProperty=l})(CN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Av,n=jN,r=NN,i=CN;function a(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=a})(wN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yN,n=Av,r=xN,i=wN;function a(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=a})(vN);var k4=vN.uniqBy;const Vb=Tr(k4);function MN(e,t,n){return t===!0?Vb(e,n):typeof t=="function"?Vb(e,t):e}var LN={exports:{}},DN={},IN={exports:{}},RN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ts=x;function C4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var E4=typeof Object.is=="function"?Object.is:C4,O4=Ts.useState,T4=Ts.useEffect,A4=Ts.useLayoutEffect,M4=Ts.useDebugValue;function L4(e,t){var n=t(),r=O4({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return A4(function(){i.value=n,i.getSnapshot=t,cm(i)&&a({inst:i})},[e,n,t]),T4(function(){return cm(i)&&a({inst:i}),e(function(){cm(i)&&a({inst:i})})},[e]),M4(n),n}function cm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!E4(e,n)}catch{return!0}}function D4(e,t){return t()}var I4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?D4:L4;RN.useSyncExternalStore=Ts.useSyncExternalStore!==void 0?Ts.useSyncExternalStore:I4;IN.exports=RN;var R4=IN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gf=x,z4=R4;function $4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var B4=typeof Object.is=="function"?Object.is:$4,F4=z4.useSyncExternalStore,U4=gf.useRef,H4=gf.useEffect,Z4=gf.useMemo,W4=gf.useDebugValue;DN.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=U4(null);if(a.current===null){var l={hasValue:!1,value:null};a.current=l}else l=a.current;a=Z4(function(){function d(y){if(!m){if(m=!0,h=y,y=r(y),i!==void 0&&l.hasValue){var j=l.value;if(i(j,y))return f=j}return f=y}if(j=f,B4(h,y))return j;var w=r(y);return i!==void 0&&i(j,w)?(h=y,j):(h=y,f=w)}var m=!1,h,f,g=n===void 0?null:n;return[function(){return d(t())},g===null?void 0:function(){return d(g())}]},[t,n,r,i]);var u=F4(e,a[0],a[1]);return H4(function(){l.hasValue=!0,l.value=u},[u]),W4(u),u};LN.exports=DN;var V4=LN.exports,Fv=x.createContext(null),K4=e=>e,at=()=>{var e=x.useContext(Fv);return e?e.store.dispatch:K4},hu=()=>{},q4=()=>hu,G4=(e,t)=>e===t;function ue(e){var t=x.useContext(Fv);return V4.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:q4,t?t.store.getState:hu,t?t.store.getState:hu,t?e:hu,G4)}function Y4(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function X4(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Q4(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Kb=e=>Array.isArray(e)?e:[e];function J4(e){const t=Array.isArray(e[0])?e[0]:e;return Q4(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function eL(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var tL=class{constructor(e){this.value=e}deref(){return this.value}},nL=typeof WeakRef<"u"?WeakRef:tL,rL=0,qb=1;function zc(){return{s:rL,v:void 0,o:null,p:null}}function zN(e,t={}){let n=zc();const{resultEqualityCheck:r}=t;let i,a=0;function l(){var f;let u=n;const{length:d}=arguments;for(let g=0,y=d;g<y;g++){const j=arguments[g];if(typeof j=="function"||typeof j=="object"&&j!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const P=w.get(j);P===void 0?(u=zc(),w.set(j,u)):u=P}else{let w=u.p;w===null&&(u.p=w=new Map);const P=w.get(j);P===void 0?(u=zc(),w.set(j,u)):u=P}}const m=u;let h;if(u.s===qb)h=u.v;else if(h=e.apply(null,arguments),a++,r){const g=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;g!=null&&r(g,h)&&(h=g,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new nL(h):h}return m.s=qb,m.v=h,h}return l.clearCache=()=>{n=zc(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function iL(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let a=0,l=0,u,d={},m=i.pop();typeof m=="object"&&(d=m,m=i.pop()),Y4(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const h={...n,...d},{memoize:f,memoizeOptions:g=[],argsMemoize:y=zN,argsMemoizeOptions:j=[],devModeChecks:w={}}=h,P=Kb(g),b=Kb(j),N=J4(i),_=f(function(){return a++,m.apply(null,arguments)},...P),k=y(function(){l++;const A=eL(N,arguments);return u=_.apply(null,A),u},...b);return Object.assign(k,{resultFunc:m,memoizedResultFunc:_,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var q=iL(zN),aL=Object.assign((e,t=q)=>{X4(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(a=>e[a]);return t(r,(...a)=>a.reduce((l,u,d)=>(l[n[d]]=u,l),{}))},{withTypes:()=>aL}),$N={},BN={},FN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?u-l:l-u}return 0};e.compareValues=n})(FN);var UN={},Uv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Uv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uv,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||l!=null&&Object.hasOwn(l,a)}e.isKey=i})(UN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FN,n=UN,r=Jd;function i(a,l,u,d){if(a==null)return[];u=d?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(y=>String(y));const m=(y,j)=>{let w=y;for(let P=0;P<j.length&&w!=null;++P)w=w[j[P]];return w},h=(y,j)=>j==null||y==null?j:typeof y=="object"&&"key"in y?Object.hasOwn(j,y.key)?j[y.key]:m(j,y.path):typeof y=="function"?y(j):Array.isArray(y)?m(j,y):typeof j=="object"?j[y]:j,f=l.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:r.toPath(y)}));return a.map(y=>({original:y,criteria:f.map(j=>h(j,y))})).slice().sort((y,j)=>{for(let w=0;w<f.length;w++){const P=t.compareValues(y.criteria[w],j.criteria[w],u[w]);if(P!==0)return P}return 0}).map(y=>y.original)}e.orderBy=i})(BN);var HN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],a=Math.floor(r),l=(u,d)=>{for(let m=0;m<u.length;m++){const h=u[m];Array.isArray(h)&&d<a?l(h,d+1):i.push(h)}};return l(n,0),i}e.flatten=t})(HN);var Hv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bv,n=pf,r=Mv,i=Dv;function a(l,u,d){return r.isObject(d)&&(typeof u=="number"&&n.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?i.eq(d[u],l):!1}e.isIterateeCall=a})(Hv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BN,n=HN,r=Hv;function i(a,...l){const u=l.length;return u>1&&r.isIterateeCall(a,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(a,n.flatten(l),["asc"])}e.sortBy=i})($N);var sL=$N.sortBy;const vf=Tr(sL);var ZN=e=>e.legend.settings,oL=e=>e.legend.size,lL=e=>e.legend.payload,cL=q([lL,ZN],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?vf(r,n):r});function uL(){return ue(cL)}var $c=1;function WN(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=x.useState({height:0,left:0,top:0,width:0}),r=x.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-t.height)>$c||Math.abs(l.left-t.left)>$c||Math.abs(l.top-t.top)>$c||Math.abs(l.width-t.width)>$c)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function wt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dL=typeof Symbol=="function"&&Symbol.observable||"@@observable",Gb=dL,um=()=>Math.random().toString(36).substring(7).split("").join("."),fL={INIT:`@@redux/INIT${um()}`,REPLACE:`@@redux/REPLACE${um()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${um()}`},Qu=fL;function Zv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function VN(e,t,n){if(typeof e!="function")throw new Error(wt(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(wt(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(wt(1));return n(VN)(e,t)}let r=e,i=t,a=new Map,l=a,u=0,d=!1;function m(){l===a&&(l=new Map,a.forEach((P,b)=>{l.set(b,P)}))}function h(){if(d)throw new Error(wt(3));return i}function f(P){if(typeof P!="function")throw new Error(wt(4));if(d)throw new Error(wt(5));let b=!0;m();const N=u++;return l.set(N,P),function(){if(b){if(d)throw new Error(wt(6));b=!1,m(),l.delete(N),a=null}}}function g(P){if(!Zv(P))throw new Error(wt(7));if(typeof P.type>"u")throw new Error(wt(8));if(typeof P.type!="string")throw new Error(wt(17));if(d)throw new Error(wt(9));try{d=!0,i=r(i,P)}finally{d=!1}return(a=l).forEach(N=>{N()}),P}function y(P){if(typeof P!="function")throw new Error(wt(10));r=P,g({type:Qu.REPLACE})}function j(){const P=f;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(wt(11));function N(){const k=b;k.next&&k.next(h())}return N(),{unsubscribe:P(N)}},[Gb](){return this}}}return g({type:Qu.INIT}),{dispatch:g,subscribe:f,getState:h,replaceReducer:y,[Gb]:j}}function hL(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Qu.INIT})>"u")throw new Error(wt(12));if(typeof n(void 0,{type:Qu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(wt(13))})}function KN(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const l=t[a];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{hL(n)}catch(a){i=a}return function(l={},u){if(i)throw i;let d=!1;const m={};for(let h=0;h<r.length;h++){const f=r[h],g=n[f],y=l[f],j=g(y,u);if(typeof j>"u")throw u&&u.type,new Error(wt(14));m[f]=j,d=d||j!==y}return d=d||r.length!==Object.keys(l).length,d?m:l}}function Ju(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function mL(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(wt(15))};const l={getState:i.getState,dispatch:(d,...m)=>a(d,...m)},u=e.map(d=>d(l));return a=Ju(...u)(i.dispatch),{...i,dispatch:a}}}function qN(e){return Zv(e)&&"type"in e&&typeof e.type=="string"}var GN=Symbol.for("immer-nothing"),Yb=Symbol.for("immer-draftable"),Nn=Symbol.for("immer-state");function cr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var As=Object.getPrototypeOf;function Pa(e){return!!e&&!!e[Nn]}function Jr(e){var t;return e?YN(e)||Array.isArray(e)||!!e[Yb]||!!((t=e.constructor)!=null&&t[Yb])||$l(e)||xf(e):!1}var pL=Object.prototype.constructor.toString();function YN(e){if(!e||typeof e!="object")return!1;const t=As(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===pL}function ed(e,t){yf(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function yf(e){const t=e[Nn];return t?t.type_:Array.isArray(e)?1:$l(e)?2:xf(e)?3:0}function zp(e,t){return yf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XN(e,t,n){const r=yf(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function gL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function $l(e){return e instanceof Map}function xf(e){return e instanceof Set}function ta(e){return e.copy_||e.base_}function $p(e,t){if($l(e))return new Map(e);if(xf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=YN(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Nn];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(As(e),r)}else{const r=As(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Wv(e,t=!1){return bf(e)||Pa(e)||!Jr(e)||(yf(e)>1&&Object.defineProperties(e,{set:{value:Bc},add:{value:Bc},clear:{value:Bc},delete:{value:Bc}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Wv(n,!0))),e}function Bc(){cr(2)}function bf(e){return Object.isFrozen(e)}var vL={};function ka(e){const t=vL[e];return t||cr(0,e),t}var xl;function QN(){return xl}function yL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Xb(e,t){t&&(ka("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Bp(e){Fp(e),e.drafts_.forEach(xL),e.drafts_=null}function Fp(e){e===xl&&(xl=e.parent_)}function Qb(e){return xl=yL(xl,e)}function xL(e){const t=e[Nn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Jb(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Nn].modified_&&(Bp(t),cr(4)),Jr(e)&&(e=td(t,e),t.parent_||nd(t,e)),t.patches_&&ka("Patches").generateReplacementPatches_(n[Nn].base_,e,t.patches_,t.inversePatches_)):e=td(t,n,[]),Bp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==GN?e:void 0}function td(e,t,n){if(bf(t))return t;const r=t[Nn];if(!r)return ed(t,(i,a)=>e_(e,r,t,i,a,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return nd(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,l=!1;r.type_===3&&(a=new Set(i),i.clear(),l=!0),ed(a,(u,d)=>e_(e,r,i,u,d,n,l)),nd(e,i,!1),n&&e.patches_&&ka("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function e_(e,t,n,r,i,a,l){if(Pa(i)){const u=a&&t&&t.type_!==3&&!zp(t.assigned_,r)?a.concat(r):void 0,d=td(e,i,u);if(XN(n,r,d),Pa(d))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Jr(i)&&!bf(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;td(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&($l(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&nd(e,i)}}function nd(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Wv(t,n)}function bL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:QN(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=Vv;n&&(i=[r],a=bl);const{revoke:l,proxy:u}=Proxy.revocable(i,a);return r.draft_=u,r.revoke_=l,u}var Vv={get(e,t){if(t===Nn)return e;const n=ta(e);if(!zp(n,t))return _L(e,n,t);const r=n[t];return e.finalized_||!Jr(r)?r:r===dm(e.base_,t)?(fm(e),e.copy_[t]=Hp(r,e)):r},has(e,t){return t in ta(e)},ownKeys(e){return Reflect.ownKeys(ta(e))},set(e,t,n){const r=JN(ta(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=dm(ta(e),t),a=i==null?void 0:i[Nn];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(gL(n,i)&&(n!==void 0||zp(e.base_,t)))return!0;fm(e),Up(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return dm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,fm(e),Up(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ta(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){cr(11)},getPrototypeOf(e){return As(e.base_)},setPrototypeOf(){cr(12)}},bl={};ed(Vv,(e,t)=>{bl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});bl.deleteProperty=function(e,t){return bl.set.call(this,e,t,void 0)};bl.set=function(e,t,n){return Vv.set.call(this,e[0],t,n,e[0])};function dm(e,t){const n=e[Nn];return(n?ta(n):e)[t]}function _L(e,t,n){var i;const r=JN(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function JN(e,t){if(!(t in e))return;let n=As(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=As(n)}}function Up(e){e.modified_||(e.modified_=!0,e.parent_&&Up(e.parent_))}function fm(e){e.copy_||(e.copy_=$p(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var wL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const l=this;return function(d=a,...m){return l.produce(d,h=>n.call(this,h,...m))}}typeof n!="function"&&cr(6),r!==void 0&&typeof r!="function"&&cr(7);let i;if(Jr(t)){const a=Qb(this),l=Hp(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?Bp(a):Fp(a)}return Xb(a,r),Jb(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===GN&&(i=void 0),this.autoFreeze_&&Wv(i,!0),r){const a=[],l=[];ka("Patches").generateReplacementPatches_(t,i,a,l),r(a,l)}return i}else cr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Jr(e)||cr(8),Pa(e)&&(e=Kr(e));const t=Qb(this),n=Hp(e,void 0);return n[Nn].isManual_=!0,Fp(t),n}finishDraft(e,t){const n=e&&e[Nn];(!n||!n.isManual_)&&cr(9);const{scope_:r}=n;return Xb(r,t),Jb(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=ka("Patches").applyPatches_;return Pa(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Hp(e,t){const n=$l(e)?ka("MapSet").proxyMap_(e,t):xf(e)?ka("MapSet").proxySet_(e,t):bL(e,t);return(t?t.scope_:QN()).drafts_.push(n),n}function Kr(e){return Pa(e)||cr(10,e),eS(e)}function eS(e){if(!Jr(e)||bf(e))return e;const t=e[Nn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$p(e,t.scope_.immer_.useStrictShallowCopy_)}else n=$p(e,!0);return ed(n,(r,i)=>{XN(n,r,eS(i))}),t&&(t.finalized_=!1),n}var jL=new wL,tS=jL.produce;function nS(e){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,e):i(a)}var NL=nS(),SL=nS,PL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ju:Ju.apply(null,arguments)};function qn(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(_n(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>qN(r)&&r.type===e,n}var rS=class $o extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,$o.prototype)}static get[Symbol.species](){return $o}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new $o(...t[0].concat(this)):new $o(...t.concat(this))}};function t_(e){return Jr(e)?tS(e,()=>{}):e}function Fc(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function kL(e){return typeof e=="boolean"}var CL=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let l=new rS;return n&&(kL(n)?l.push(NL):l.push(SL(n.extraArgument))),l},EL="RTK_autoBatch",n_=e=>t=>{setTimeout(t,e)},OL=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,a=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:n_(10):e.type==="callback"?e.queueNotification:n_(e.timeout),m=()=>{l=!1,a&&(a=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const f=()=>i&&h(),g=r.subscribe(f);return u.add(h),()=>{g(),u.delete(h)}},dispatch(h){var f;try{return i=!((f=h==null?void 0:h.meta)!=null&&f[EL]),a=!i,a&&(l||(l=!0,d(m))),r.dispatch(h)}finally{i=!0}}})},TL=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new rS(e);return r&&i.push(OL(typeof r=="object"?r:void 0)),i};function AL(e){const t=CL(),{reducer:n=void 0,middleware:r,devTools:i=!0,duplicateMiddlewareCheck:a=!0,preloadedState:l=void 0,enhancers:u=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(Zv(n))d=KN(n);else throw new Error(_n(1));let m;typeof r=="function"?m=r(t):m=t();let h=Ju;i&&(h=PL({trace:!1,...typeof i=="object"&&i}));const f=mL(...m),g=TL(f);let y=typeof u=="function"?u(g):g();const j=h(...y);return VN(d,l,j)}function iS(e){const t={},n=[];let r;const i={addCase(a,l){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(_n(28));if(u in t)throw new Error(_n(29));return t[u]=l,i},addAsyncThunk(a,l){return l.pending&&(t[a.pending.type]=l.pending),l.rejected&&(t[a.rejected.type]=l.rejected),l.fulfilled&&(t[a.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:a.settled,reducer:l.settled}),i},addMatcher(a,l){return n.push({matcher:a,reducer:l}),i},addDefaultCase(a){return r=a,i}};return e(i),[t,n,r]}function ML(e){return typeof e=="function"}function LL(e,t){let[n,r,i]=iS(t),a;if(ML(e))a=()=>t_(e());else{const u=t_(e);a=()=>u}function l(u=a(),d){let m=[n[d.type],...r.filter(({matcher:h})=>h(d)).map(({reducer:h})=>h)];return m.filter(h=>!!h).length===0&&(m=[i]),m.reduce((h,f)=>{if(f)if(Pa(h)){const y=f(h,d);return y===void 0?h:y}else{if(Jr(h))return tS(h,g=>f(g,d));{const g=f(h,d);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},u)}return l.getInitialState=a,l}var DL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",IL=(e=21)=>{let t="",n=e;for(;n--;)t+=DL[Math.random()*64|0];return t},RL=Symbol.for("rtk-slice-createasyncthunk");function zL(e,t){return`${e}/${t}`}function $L({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[RL];return function(i){const{name:a,reducerPath:l=a}=i;if(!a)throw new Error(_n(11));typeof process<"u";const u=(typeof i.reducers=="function"?i.reducers(FL()):i.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(k,C){const A=typeof k=="string"?k:k.type;if(!A)throw new Error(_n(12));if(A in m.sliceCaseReducersByType)throw new Error(_n(13));return m.sliceCaseReducersByType[A]=C,h},addMatcher(k,C){return m.sliceMatchers.push({matcher:k,reducer:C}),h},exposeAction(k,C){return m.actionCreators[k]=C,h},exposeCaseReducer(k,C){return m.sliceCaseReducersByName[k]=C,h}};d.forEach(k=>{const C=u[k],A={reducerName:k,type:zL(a,k),createNotation:typeof i.reducers=="function"};HL(C)?WL(A,C,h,t):UL(A,C,h)});function f(){const[k={},C=[],A=void 0]=typeof i.extraReducers=="function"?iS(i.extraReducers):[i.extraReducers],O={...k,...m.sliceCaseReducersByType};return LL(i.initialState,I=>{for(let B in O)I.addCase(B,O[B]);for(let B of m.sliceMatchers)I.addMatcher(B.matcher,B.reducer);for(let B of C)I.addMatcher(B.matcher,B.reducer);A&&I.addDefaultCase(A)})}const g=k=>k,y=new Map,j=new WeakMap;let w;function P(k,C){return w||(w=f()),w(k,C)}function b(){return w||(w=f()),w.getInitialState()}function N(k,C=!1){function A(I){let B=I[k];return typeof B>"u"&&C&&(B=Fc(j,A,b)),B}function O(I=g){const B=Fc(y,C,()=>new WeakMap);return Fc(B,I,()=>{const D={};for(const[M,$]of Object.entries(i.selectors??{}))D[M]=BL($,I,()=>Fc(j,I,b),C);return D})}return{reducerPath:k,getSelectors:O,get selectors(){return O(A)},selectSlice:A}}const _={name:a,reducer:P,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:b,...N(l),injectInto(k,{reducerPath:C,...A}={}){const O=C??l;return k.inject({reducerPath:O,reducer:P},A),{..._,...N(O,!0)}}};return _}}function BL(e,t,n,r){function i(a,...l){let u=t(a);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var Cn=$L();function FL(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function UL({type:e,reducerName:t,createNotation:n},r,i){let a,l;if("reducer"in r){if(n&&!ZL(r))throw new Error(_n(17));a=r.reducer,l=r.prepare}else a=r;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,l?qn(e,l):qn(e))}function HL(e){return e._reducerDefinitionType==="asyncThunk"}function ZL(e){return e._reducerDefinitionType==="reducerWithPrepare"}function WL({type:e,reducerName:t},n,r,i){if(!i)throw new Error(_n(18));const{payloadCreator:a,fulfilled:l,pending:u,rejected:d,settled:m,options:h}=n,f=i(e,a,h);r.exposeAction(t,f),l&&r.addCase(f.fulfilled,l),u&&r.addCase(f.pending,u),d&&r.addCase(f.rejected,d),m&&r.addMatcher(f.settled,m),r.exposeCaseReducer(t,{fulfilled:l||Uc,pending:u||Uc,rejected:d||Uc,settled:m||Uc})}function Uc(){}var VL="task",aS="listener",sS="completed",Kv="cancelled",KL=`task-${Kv}`,qL=`task-${sS}`,Zp=`${aS}-${Kv}`,GL=`${aS}-${sS}`,_f=class{constructor(e){Ch(this,"name","TaskAbortError");Ch(this,"message");this.code=e,this.message=`${VL} ${Kv} (reason: ${e})`}},qv=(e,t)=>{if(typeof e!="function")throw new TypeError(_n(32))},rd=()=>{},oS=(e,t=rd)=>(e.catch(t),e),lS=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ga=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},va=e=>{if(e.aborted){const{reason:t}=e;throw new _f(t)}};function cS(e,t){let n=rd;return new Promise((r,i)=>{const a=()=>i(new _f(e.reason));if(e.aborted){a();return}n=lS(e,a),t.finally(()=>n()).then(r,i)}).finally(()=>{n=rd})}var YL=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof _f?"cancelled":"rejected",error:n}}finally{t==null||t()}},id=e=>t=>oS(cS(e,t).then(n=>(va(e),n))),uS=e=>{const t=id(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:vs}=Object,r_={},wf="listenerMiddleware",XL=(e,t)=>{const n=r=>lS(e,()=>ga(r,e.reason));return(r,i)=>{qv(r);const a=new AbortController;n(a);const l=YL(async()=>{va(e),va(a.signal);const u=await r({pause:id(a.signal),delay:uS(a.signal),signal:a.signal});return va(a.signal),u},()=>ga(a,qL));return i!=null&&i.autoJoin&&t.push(l.catch(rd)),{result:id(e)(l),cancel(){ga(a,KL)}}}},QL=(e,t)=>{const n=async(r,i)=>{va(t);let a=()=>{};const u=[new Promise((d,m)=>{let h=e({predicate:r,effect:(f,g)=>{g.unsubscribe(),d([f,g.getState(),g.getOriginalState()])}});a=()=>{h(),m()}})];i!=null&&u.push(new Promise(d=>setTimeout(d,i,null)));try{const d=await cS(t,Promise.race(u));return va(t),d}finally{a()}};return(r,i)=>oS(n(r,i))},dS=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=qn(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(_n(21));return qv(a),{predicate:i,type:t,effect:a}},fS=vs(e=>{const{type:t,predicate:n,effect:r}=dS(e);return{id:IL(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(_n(22))}}},{withTypes:()=>fS}),i_=(e,t)=>{const{type:n,effect:r,predicate:i}=dS(t);return Array.from(e.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},Wp=e=>{e.pending.forEach(t=>{ga(t,Zp)})},JL=e=>()=>{e.forEach(Wp),e.clear()},a_=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},hS=vs(qn(`${wf}/add`),{withTypes:()=>hS}),eD=qn(`${wf}/removeAll`),mS=vs(qn(`${wf}/remove`),{withTypes:()=>mS}),tD=(...e)=>{console.error(`${wf}/error`,...e)},Bl=(e={})=>{const t=new Map,{extra:n,onError:r=tD}=e;qv(r);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),f=>{h.unsubscribe(),f!=null&&f.cancelActive&&Wp(h)}),a=h=>{const f=i_(t,h)??fS(h);return i(f)};vs(a,{withTypes:()=>a});const l=h=>{const f=i_(t,h);return f&&(f.unsubscribe(),h.cancelActive&&Wp(f)),!!f};vs(l,{withTypes:()=>l});const u=async(h,f,g,y)=>{const j=new AbortController,w=QL(a,j.signal),P=[];try{h.pending.add(j),await Promise.resolve(h.effect(f,vs({},g,{getOriginalState:y,condition:(b,N)=>w(b,N).then(Boolean),take:w,delay:uS(j.signal),pause:id(j.signal),extra:n,signal:j.signal,fork:XL(j.signal,P),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((b,N,_)=>{b!==j&&(ga(b,Zp),_.delete(b))})},cancel:()=>{ga(j,Zp),h.pending.delete(j)},throwIfCancelled:()=>{va(j.signal)}})))}catch(b){b instanceof _f||a_(r,b,{raisedBy:"effect"})}finally{await Promise.all(P),ga(j,GL),h.pending.delete(j)}},d=JL(t);return{middleware:h=>f=>g=>{if(!qN(g))return f(g);if(hS.match(g))return a(g.payload);if(eD.match(g)){d();return}if(mS.match(g))return l(g.payload);let y=h.getState();const j=()=>{if(y===r_)throw new Error(_n(23));return y};let w;try{if(w=f(g),t.size>0){const P=h.getState(),b=Array.from(t.values());for(const N of b){let _=!1;try{_=N.predicate(g,P,y)}catch(k){_=!1,a_(r,k,{raisedBy:"predicate"})}_&&u(N,g,h,j)}}}finally{y=r_}return w},startListening:a,stopListening:l,clearListeners:d}};function _n(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nD={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},pS=Cn({name:"chartLayout",initialState:nD,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,a;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:rD,setLayout:iD,setChartSize:aD,setScale:sD}=pS.actions,oD=pS.reducer;function s_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function o_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s_(Object(n),!0).forEach(function(r){lD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lD(e,t,n){return(t=cD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cD(e){var t=uD(e,"string");return typeof t=="symbol"?t:t+""}function uD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ad=Math.PI/180,dD=e=>e*180/Math.PI,Pt=(e,t,n,r)=>({x:e+Math.cos(-ad*r)*n,y:t+Math.sin(-ad*r)*n}),fD=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},hD=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)},mD=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,l=hD({x:n,y:r},{x:i,y:a});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,d=Math.acos(u);return r>a&&(d=2*Math.PI-d),{radius:l,angle:dD(d),angleInRadian:d}},pD=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-a*360,endAngle:n-a*360}},gD=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360),l=Math.min(i,a);return e+l*360},vD=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:a}=mD({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:d,endAngle:m}=pD(t),h=a,f;if(d<=m){for(;h>m;)h-=360;for(;h<d;)h+=360;f=h>=d&&h<=m}else{for(;h>d;)h-=360;for(;h<m;)h+=360;f=h>=m&&h<=d}return f?o_(o_({},t),{},{radius:i,angle:gD(h,t)}):null};function gS(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function l_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l_(Object(n),!0).forEach(function(r){yD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yD(e,t,n){return(t=xD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xD(e){var t=bD(e,"string");return typeof t=="symbol"?t:t+""}function bD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qt(e,t,n){return vt(e)||vt(t)?n:Er(t)?Es(e,t,n):typeof t=="function"?t(e):n}var _D=(e,t,n,r,i)=>{var a,l=-1,u=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?n[d-1].coordinate:n[u-1].coordinate,h=n[d].coordinate,f=d>=u-1?n[0].coordinate:n[d+1].coordinate,g=void 0;if(rn(h-m)!==rn(f-h)){var y=[];if(rn(f-h)===rn(i[1]-i[0])){g=f;var j=h+i[1]-i[0];y[0]=Math.min(j,(j+m)/2),y[1]=Math.max(j,(j+m)/2)}else{g=m;var w=f+i[1]-i[0];y[0]=Math.min(h,(w+h)/2),y[1]=Math.max(h,(w+h)/2)}var P=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(e>P[0]&&e<=P[1]||e>=y[0]&&e<=y[1]){({index:l}=n[d]);break}}else{var b=Math.min(m,f),N=Math.max(m,f);if(e>(b+h)/2&&e<=(N+h)/2){({index:l}=n[d]);break}}}else if(t){for(var _=0;_<u;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:l}=t[_]);break}}return l},wD=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&a!=="center"&&de(e[a]))return $n($n({},e),{},{[a]:e[a]+(r||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&l!=="middle"&&de(e[l]))return $n($n({},e),{},{[l]:e[l]+(i||0)})}return e},Ma=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",vS=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,a,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(a=!0),u.coordinate));return i||l.push(t),a||l.push(n),l},yS=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:l,realScaleType:u,isCategorical:d,categoricalDomain:m,tickCount:h,ticks:f,niceTicks:g,axisType:y}=e;if(!l)return null;var j=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,w=i==="category"&&l.bandwidth?l.bandwidth()/j:0;if(w=y==="angleAxis"&&a&&a.length>=2?rn(a[0]-a[1])*2*w:w,f||g){var P=(f||g||[]).map((b,N)=>{var _=r?r.indexOf(b):b;return{coordinate:l(_)+w,value:b,offset:w,index:N}});return P.filter(b=>!jn(b.coordinate))}return d&&m?m.map((b,N)=>({coordinate:l(b)+w,value:b,index:N,offset:w})):l.ticks&&!n&&h!=null?l.ticks(h).map((b,N)=>({coordinate:l(b)+w,value:b,offset:w,index:N})):l.domain().map((b,N)=>({coordinate:l(b)+w,value:r?r[b]:b,index:N,offset:w}))},c_=1e-4,jD=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-c_,a=Math.max(r[0],r[1])+c_,l=e(t[0]),u=e(t[n-1]);(l<i||l>a||u<i||u>a)&&e.domain([t[0],t[n-1]])}},ND=(e,t)=>{if(!t||t.length!==2||!de(t[0])||!de(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!de(e[0])||e[0]<n)&&(i[0]=n),(!de(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},SD=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,l=0;l<t;++l){var u=jn(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=a,e[l][n][1]=a+u,a=e[l][n][1])}},PD=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var l=jn(e[a][n][1])?e[a][n][0]:e[a][n][1];l>=0?(e[a][n][0]=i,e[a][n][1]=i+l,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},kD={sign:SD,expand:u4,none:Os,silhouette:d4,wiggle:f4,positive:PD},CD=(e,t,n)=>{var r=kD[n],i=c4().keys(t).value((a,l)=>+qt(a,l,0)).order(Dp).offset(r);return i(e)};function ED(e){return e==null?void 0:String(e)}var u_=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:a,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=qt(a,t.dataKey,t.scale.domain()[l]);return vt(u)?null:t.scale(u)-i/2+r},OD=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},TD=e=>{var t=e.flat(2).filter(de);return[Math.min(...t),Math.max(...t)]},AD=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],MD=(e,t,n)=>{if(e!=null)return AD(Object.keys(e).reduce((r,i)=>{var a=e[i],{stackedData:l}=a,u=l.reduce((d,m)=>{var h=gS(m,t,n),f=TD(h);return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},d_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,f_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Gv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=vf(t,h=>h.coordinate),a=1/0,l=1,u=i.length;l<u;l++){var d=i[l],m=i[l-1];a=Math.min((d.coordinate||0)-(m.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function h_(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return $n($n({},t),{},{dataKey:n,payload:r,value:i,name:a})}function xS(e,t){if(e)return String(e);if(typeof t=="string")return t}function LD(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var a=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return a?{x:e,y:t}:null}return r?vD({x:e,y:t},r):null}var DD=(e,t,n,r)=>{var i=t.find(m=>m&&m.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var a=i.coordinate,{radius:l}=r;return $n($n($n({},r),Pt(r.cx,r.cy,l,a)),{},{angle:a,radius:l})}var u=i.coordinate,{angle:d}=r;return $n($n($n({},r),Pt(r.cx,r.cy,u,d)),{},{angle:d,radius:u})}return{x:0,y:0}},ID=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,ai=e=>e.layout.width,si=e=>e.layout.height,RD=e=>e.layout.scale,bS=e=>e.layout.margin,jf=q(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Nf=q(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),zD="data-recharts-item-index",$D="data-recharts-item-data-key",Fl=60;function m_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m_(Object(n),!0).forEach(function(r){BD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BD(e,t,n){return(t=FD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FD(e){var t=UD(e,"string");return typeof t=="symbol"?t:t+""}function UD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HD=e=>e.brush.height;function ZD(e){var t=Nf(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Fl;return n+i}return n},0)}function WD(e){var t=Nf(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Fl;return n+i}return n},0)}function VD(e){var t=jf(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function KD(e){var t=jf(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var yt=q([ai,si,bS,HD,ZD,WD,VD,KD,ZN,oL],(e,t,n,r,i,a,l,u,d,m)=>{var h={left:(n.left||0)+i,right:(n.right||0)+a},f={top:(n.top||0)+l,bottom:(n.bottom||0)+u},g=Hc(Hc({},f),h),y=g.bottom;g.bottom+=r,g=wD(g,d,m);var j=e-g.left-g.right,w=t-g.top-g.bottom;return Hc(Hc({brushBottom:y},g),{},{width:Math.max(j,0),height:Math.max(w,0)})}),qD=q(yt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Yv=q(ai,si,(e,t)=>({x:0,y:0,width:e,height:t})),GD=x.createContext(null),Qn=()=>x.useContext(GD)!=null,Sf=e=>e.brush,Pf=q([Sf,yt,bS],(e,t,n)=>({height:e.height,x:de(e.x)?e.x:t.left,y:de(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:de(e.width)?e.width:t.width})),Xv=()=>{var e,t=Qn(),n=ue(qD),r=ue(Pf),i=(e=ue(Sf))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},YD={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},_S=()=>{var e;return(e=ue(yt))!==null&&e!==void 0?e:YD},Qv=()=>ue(ai),Jv=()=>ue(si),XD=()=>ue(e=>e.layout.margin),Oe=e=>e.layout.layoutType,e0=()=>ue(Oe),QD={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},wS=Cn({name:"legend",initialState:QD,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Kr(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:p_,setLegendSettings:JD,addLegendPayload:eI,removeLegendPayload:tI}=wS.actions,nI=wS.reducer,rI=["contextPayload"];function Vp(){return Vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vp.apply(null,arguments)}function g_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ms(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g_(Object(n),!0).forEach(function(r){t0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t0(e,t,n){return(t=iI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iI(e){var t=aI(e,"string");return typeof t=="symbol"?t:t+""}function aI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sI(e,t){if(e==null)return{};var n,r,i=oI(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function oI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function lI(e){return e.value}function cI(e){var{contextPayload:t}=e,n=sI(e,rI),r=MN(t,e.payloadUniqBy,lI),i=Ms(Ms({},n),{},{payload:r});return x.isValidElement(e.content)?x.cloneElement(e.content,i):typeof e.content=="function"?x.createElement(e.content,i):x.createElement(Tv,i)}function uI(e,t,n,r,i,a){var{layout:l,align:u,verticalAlign:d}=t,m,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?m={left:((r||0)-a.width)/2}:m=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?h={top:((i||0)-a.height)/2}:h=d==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Ms(Ms({},m),h)}function dI(e){var t=at();return x.useEffect(()=>{t(JD(e))},[t,e]),null}function fI(e){var t=at();return x.useEffect(()=>(t(p_(e)),()=>{t(p_({width:0,height:0}))}),[t,e]),null}function hI(e){var t=uL(),n=M3(),r=XD(),{width:i,height:a,wrapperStyle:l,portal:u}=e,[d,m]=WN([t]),h=Qv(),f=Jv();if(h==null||f==null)return null;var g=h-(r.left||0)-(r.right||0),y=kf.getWidthOrHeight(e.layout,a,i,g),j=u?l:Ms(Ms({position:"absolute",width:(y==null?void 0:y.width)||i||"auto",height:(y==null?void 0:y.height)||a||"auto"},uI(l,e,r,h,f,d)),l),w=u??n;if(w==null)return null;var P=x.createElement("div",{className:"recharts-legend-wrapper",style:j,ref:m},x.createElement(dI,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),x.createElement(fI,{width:d.width,height:d.height}),x.createElement(cI,Vp({},e,y,{margin:r,chartWidth:h,chartHeight:f,contextPayload:t})));return Gd.createPortal(P,w)}class kf extends x.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&de(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return x.createElement(hI,this.props)}}t0(kf,"displayName","Legend");t0(kf,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kp.apply(null,arguments)}function v_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v_(Object(n),!0).forEach(function(r){mI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mI(e,t,n){return(t=pI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pI(e){var t=gI(e,"string");return typeof t=="symbol"?t:t+""}function gI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vI(e){return Array.isArray(e)&&Er(e[0])&&Er(e[1])?e.join(" ~ "):e}var yI=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:h,labelFormatter:f,accessibilityLayer:g=!1}=e,y=()=>{if(a&&a.length){var C={padding:0,margin:0},A=(u?vf(a,u):a).map((O,I)=>{if(O.type==="none")return null;var B=O.formatter||l||vI,{value:D,name:M}=O,$=D,R=M;if(B){var E=B(D,M,O,I,a);if(Array.isArray(E))[$,R]=E;else if(E!=null)$=E;else return null}var U=hm({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},r);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:U},Er(R)?x.createElement("span",{className:"recharts-tooltip-item-name"},R):null,Er(R)?x.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,x.createElement("span",{className:"recharts-tooltip-item-value"},$),x.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:C},A)}return null},j=hm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=hm({margin:0},i),P=!vt(h),b=P?h:"",N=$e("recharts-default-tooltip",d),_=$e("recharts-tooltip-label",m);P&&f&&a!==void 0&&a!==null&&(b=f(h,a));var k=g?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",Kp({className:N,style:j},k),x.createElement("p",{className:_,style:w},x.isValidElement(b)?b:"".concat(b)),y())},So="recharts-tooltip-wrapper",xI={visibility:"hidden"};function bI(e){var{coordinate:t,translateX:n,translateY:r}=e;return $e(So,{["".concat(So,"-right")]:de(n)&&t&&de(t.x)&&n>=t.x,["".concat(So,"-left")]:de(n)&&t&&de(t.x)&&n<t.x,["".concat(So,"-bottom")]:de(r)&&t&&de(t.y)&&r>=t.y,["".concat(So,"-top")]:de(r)&&t&&de(t.y)&&r<t.y})}function y_(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(a&&de(a[r]))return a[r];var h=n[r]-u-(i>0?i:0),f=n[r]+i;if(t[r])return l[r]?h:f;var g=d[r];if(g==null)return 0;if(l[r]){var y=h,j=g;return y<j?Math.max(f,g):Math.max(h,g)}if(m==null)return 0;var w=f+u,P=g+m;return w>P?Math.max(h,g):Math.max(f,g)}function _I(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function wI(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,h,f;return l.height>0&&l.width>0&&n?(h=y_({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),f=y_({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=_I({translateX:h,translateY:f,useTranslate3d:u})):m=xI,{cssProperties:m,cssClasses:bI({translateX:h,translateY:f,coordinate:n})}}function x_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x_(Object(n),!0).forEach(function(r){qp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qp(e,t,n){return(t=jI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jI(e){var t=NI(e,"string");return typeof t=="symbol"?t:t+""}function NI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class SI extends x.PureComponent{constructor(){super(...arguments),qp(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),qp(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:h,reverseDirection:f,useTranslate3d:g,viewBox:y,wrapperStyle:j,lastBoundingBox:w,innerRef:P,hasPortalFromProps:b}=this.props,{cssClasses:N,cssProperties:_}=wI({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:m,position:h,reverseDirection:f,tooltipBox:{height:w.height,width:w.width},useTranslate3d:g,viewBox:y}),k=b?{}:Zc(Zc({transition:d&&t?"transform ".concat(r,"ms ").concat(i):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),C=Zc(Zc({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},j);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:C,ref:P},a)}}var PI=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ks={devToolsEnabled:!1,isSsr:PI()},jS=()=>ue(e=>e.rootProps.accessibilityLayer);function Sn(e){return Number.isFinite(e)}function sd(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gp.apply(null,arguments)}function b_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function __(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b_(Object(n),!0).forEach(function(r){kI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kI(e,t,n){return(t=CI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CI(e){var t=EI(e,"string");return typeof t=="symbol"?t:t+""}function EI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w_={curveBasisClosed:Q3,curveBasisOpen:J3,curveBasis:X3,curveBumpX:R3,curveBumpY:z3,curveLinearClosed:e4,curveLinear:hf,curveMonotoneX:t4,curveMonotoneY:n4,curveNatural:r4,curveStep:i4,curveStepAfter:s4,curveStepBefore:a4},Wc=e=>Sn(e.x)&&Sn(e.y),Po=e=>e.x,ko=e=>e.y,OI=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(zl(e));return(n==="curveMonotone"||n==="curveBump")&&t?w_["".concat(n).concat(t==="vertical"?"Y":"X")]:w_[n]||hf},TI=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=e,l=OI(t,i),u=a?n.filter(Wc):n,d;if(Array.isArray(r)){var m=a?r.filter(f=>Wc(f)):r,h=u.map((f,g)=>__(__({},f),{},{base:m[g]}));return i==="vertical"?d=Rc().y(ko).x1(Po).x0(f=>f.base.x):d=Rc().x(Po).y1(ko).y0(f=>f.base.y),d.defined(Wc).curve(l),d(h)}return i==="vertical"&&de(r)?d=Rc().y(ko).x1(Po).x0(r):de(r)?d=Rc().x(Po).y1(ko).y0(r):d=aN().x(Po).y(ko),d.defined(Wc).curve(l),d(u)},AI=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var a=n&&n.length?TI(e):r;return x.createElement("path",Gp({},Vs(e),w3(e),{className:$e("recharts-curve",t),d:a===null?void 0:a,ref:i}))},MI=["x","y","top","left","width","height","className"];function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yp.apply(null,arguments)}function j_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j_(Object(n),!0).forEach(function(r){DI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DI(e,t,n){return(t=II(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function II(e){var t=RI(e,"string");return typeof t=="symbol"?t:t+""}function RI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zI(e,t){if(e==null)return{};var n,r,i=$I(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $I(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var BI=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),FI=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:a=0,height:l=0,className:u}=e,d=zI(e,MI),m=LI({x:t,y:n,top:r,left:i,width:a,height:l},d);return!de(t)||!de(n)||!de(a)||!de(l)||!de(r)||!de(i)?null:x.createElement("path",Yp({},Ot(m,!0),{className:$e("recharts-cross",u),d:BI(t,n,a,l,r,i)}))};function UI(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function N_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function HI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N_(Object(n),!0).forEach(function(r){ZI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZI(e,t,n){return(t=WI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WI(e){var t=VI(e,"string");return typeof t=="symbol"?t:t+""}function VI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jn(e,t){var n=HI({},e),r=t,i=Object.keys(t),a=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return a}function KI(){}function S_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function P_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(n),!0).forEach(function(r){qI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qI(e,t,n){return(t=GI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GI(e){var t=YI(e,"string");return typeof t=="symbol"?t:t+""}function YI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XI=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),NS=(e,t,n)=>e.map(r=>"".concat(XI(r)," ").concat(t,"ms ").concat(n)).join(","),QI=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),_l=(e,t)=>Object.keys(t).reduce((n,r)=>P_(P_({},n),{},{[r]:e(r,t[r])}),{});function k_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k_(Object(n),!0).forEach(function(r){JI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JI(e,t,n){return(t=e5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e5(e){var t=t5(e,"string");return typeof t=="symbol"?t:t+""}function t5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var od=(e,t,n)=>e+(t-e)*n,Xp=e=>{var{from:t,to:n}=e;return t!==n},SS=(e,t,n)=>{var r=_l((i,a)=>{if(Xp(a)){var[l,u]=e(a.from,a.to,a.velocity);return Nt(Nt({},a),{},{from:l,velocity:u})}return a},t);return n<1?_l((i,a)=>Xp(a)?Nt(Nt({},a),{},{velocity:od(a.velocity,r[i].velocity,n),from:od(a.from,r[i].from,n)}):a,t):SS(e,r,n-1)};function n5(e,t,n,r,i,a){var l,u=r.reduce((g,y)=>Nt(Nt({},g),{},{[y]:{from:e[y],velocity:0,to:t[y]}}),{}),d=()=>_l((g,y)=>y.from,u),m=()=>!Object.values(u).filter(Xp).length,h=null,f=g=>{l||(l=g);var y=g-l,j=y/n.dt;u=SS(n,u,j),i(Nt(Nt(Nt({},e),t),d())),l=g,m()||(h=a.setTimeout(f))};return()=>(h=a.setTimeout(f),()=>{h()})}function r5(e,t,n,r,i,a,l){var u=null,d=i.reduce((f,g)=>Nt(Nt({},f),{},{[g]:[e[g],t[g]]}),{}),m,h=f=>{m||(m=f);var g=(f-m)/r,y=_l((w,P)=>od(...P,n(g)),d);if(a(Nt(Nt(Nt({},e),t),y)),g<1)u=l.setTimeout(h);else{var j=_l((w,P)=>od(...P,n(1)),d);a(Nt(Nt(Nt({},e),t),j))}};return()=>(u=l.setTimeout(h),()=>{u()})}const i5=(e,t,n,r,i,a)=>{var l=QI(e,t);return n.isStepper===!0?n5(e,t,n,l,i,a):r5(e,t,n,r,l,i,a)};var ld=1e-4,PS=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],kS=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),C_=(e,t)=>n=>{var r=PS(e,t);return kS(r,n)},a5=(e,t)=>n=>{var r=PS(e,t),i=[...r.map((a,l)=>a*l).slice(1),0];return kS(i,n)},E_=function(){for(var t,n,r,i,a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var d=l[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,r,n,i]=d[1].split(")")[0].split(",").map(j=>parseFloat(j)))}}else l.length===4&&([t,r,n,i]=l);var m=C_(t,n),h=C_(r,i),f=a5(t,n),g=j=>j>1?1:j<0?0:j,y=j=>{for(var w=j>1?1:j,P=w,b=0;b<8;++b){var N=m(P)-w,_=f(P);if(Math.abs(N-w)<ld||_<ld)return h(P);P=g(P-N/_)}return h(P)};return y.isStepper=!1,y},s5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,a=(l,u,d)=>{var m=-(l-u)*n,h=d*r,f=d+(m-h)*i/1e3,g=d*i/1e3+l;return Math.abs(g-u)<ld&&Math.abs(f)<ld?[u,0]:[g,f]};return a.isStepper=!0,a.dt=i,a},o5=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return E_(e);case"spring":return s5();default:if(e.split("(")[0]==="cubic-bezier")return E_(e)}return typeof e=="function"?e:null};function l5(e){var t,n=()=>null,r=!1,i=null,a=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){i=e.setTimeout(a.bind(null,m),d);return}a(d),i=e.setTimeout(a.bind(null,m));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),a(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class c5{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}function u5(){return l5(new c5)}var d5=x.createContext(u5);function f5(e,t){var n=x.useContext(d5);return x.useMemo(()=>t??n(e),[e,t,n])}var h5={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},O_={t:0},mm={t:1};function n0(e){var t=Jn(e,h5),{isActive:n,canBegin:r,duration:i,easing:a,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,h=f5(t.animationId,t.animationManager),[f,g]=x.useState(n?O_:mm),y=x.useRef(null);return x.useEffect(()=>{n||g(mm)},[n]),x.useEffect(()=>{if(!n||!r)return KI;var j=i5(O_,mm,o5(a),i,g,h.getTimeoutController()),w=()=>{y.current=j()};return h.start([d,l,w,i,u]),()=>{h.stop(),y.current&&y.current(),u()}},[n,r,i,a,l,d,u,h]),m(f.t)}function r0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=x.useRef(yl(t)),r=x.useRef(e);return r.current!==e&&(n.current=yl(t),r.current=e),n.current}function T_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function A_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T_(Object(n),!0).forEach(function(r){m5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m5(e,t,n){return(t=p5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p5(e){var t=g5(e,"string");return typeof t=="symbol"?t:t+""}function g5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cd.apply(null,arguments)}var M_=(e,t,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,d=r>=0&&n>=0||r<0&&n<0?1:0,m;if(a>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,g=4;f<g;f++)h[f]=i[f]>a?a:i[f];m="M".concat(e,",").concat(t+l*h[0]),h[0]>0&&(m+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(e+u*h[0],",").concat(t)),m+="L ".concat(e+n-u*h[1],",").concat(t),h[1]>0&&(m+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(t+l*h[1])),m+="L ".concat(e+n,",").concat(t+r-l*h[2]),h[2]>0&&(m+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(e+n-u*h[2],",").concat(t+r)),m+="L ".concat(e+u*h[3],",").concat(t+r),h[3]>0&&(m+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+r-l*h[3])),m+="Z"}else if(a>0&&i===+i&&i>0){var y=Math.min(a,i);m="M ".concat(e,",").concat(t+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e+u*y,",").concat(t,`
            L `).concat(e+n-u*y,",").concat(t,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e+n,",").concat(t+l*y,`
            L `).concat(e+n,",").concat(t+r-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e+n-u*y,",").concat(t+r,`
            L `).concat(e+u*y,",").concat(t+r,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e,",").concat(t+r-l*y," Z")}else m="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return m},v5={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CS=e=>{var t=Jn(e,v5),n=x.useRef(null),[r,i]=x.useState(-1);x.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&i(E)}catch{}},[]);var{x:a,y:l,width:u,height:d,radius:m,className:h}=t,{animationEasing:f,animationDuration:g,animationBegin:y,isAnimationActive:j,isUpdateAnimationActive:w}=t,P=x.useRef(u),b=x.useRef(d),N=x.useRef(a),_=x.useRef(l),k=x.useMemo(()=>({x:a,y:l,width:u,height:d,radius:m}),[a,l,u,d,m]),C=r0(k,"rectangle-");if(a!==+a||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var A=$e("recharts-rectangle",h);if(!w)return x.createElement("path",cd({},Ot(t,!0),{className:A,d:M_(a,l,u,d,m)}));var O=P.current,I=b.current,B=N.current,D=_.current,M="0px ".concat(r===-1?1:r,"px"),$="".concat(r,"px 0px"),R=NS(["strokeDasharray"],g,typeof f=="string"?f:void 0);return x.createElement(n0,{animationId:C,key:C,canBegin:r>0,duration:g,easing:f,isActive:w,begin:y},E=>{var U=Zt(O,u,E),Z=Zt(I,d,E),K=Zt(B,a,E),z=Zt(D,l,E);n.current&&(P.current=U,b.current=Z,N.current=K,_.current=z);var G;return j?E>0?G={transition:R,strokeDasharray:$}:G={strokeDasharray:M}:G={strokeDasharray:$},x.createElement("path",cd({},Ot(t,!0),{className:A,d:M_(K,z,U,Z,m),ref:n,style:A_(A_({},G),t.style)}))})};function ES(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e,l=Pt(t,n,r,i),u=Pt(t,n,r,a);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function Qp(){return Qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qp.apply(null,arguments)}var y5=(e,t)=>{var n=rn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Vc=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+r,h=Math.asin(u/m)/ad,f=d?i:i+a*h,g=Pt(t,n,m,f),y=Pt(t,n,r,f),j=d?i-a*h:i,w=Pt(t,n,m*Math.cos(h*ad),j);return{center:g,circleTangency:y,lineTangency:w,theta:h}},OS=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:l}=e,u=y5(a,l),d=a+u,m=Pt(t,n,i,a),h=Pt(t,n,i,d),f="M ".concat(m.x,",").concat(m.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var g=Pt(t,n,r,a),y=Pt(t,n,r,d);f+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else f+="L ".concat(t,",").concat(n," Z");return f},x5=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,h=rn(m-d),{circleTangency:f,lineTangency:g,theta:y}=Vc({cx:t,cy:n,radius:i,angle:d,sign:h,cornerRadius:a,cornerIsExternal:u}),{circleTangency:j,lineTangency:w,theta:P}=Vc({cx:t,cy:n,radius:i,angle:m,sign:-h,cornerRadius:a,cornerIsExternal:u}),b=u?Math.abs(d-m):Math.abs(d-m)-y-P;if(b<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):OS({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:d,endAngle:m});var N="M ".concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(r>0){var{circleTangency:_,lineTangency:k,theta:C}=Vc({cx:t,cy:n,radius:r,angle:d,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:A,lineTangency:O,theta:I}=Vc({cx:t,cy:n,radius:r,angle:m,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),B=u?Math.abs(d-m):Math.abs(d-m)-C-I;if(B<0&&a===0)return"".concat(N,"L").concat(t,",").concat(n,"Z");N+="L".concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(B>180),",").concat(+(h>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,"Z")}else N+="L".concat(t,",").concat(n,"Z");return N},b5={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},TS=e=>{var t=Jn(e,b5),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:h,className:f}=t;if(a<i||m===h)return null;var g=$e("recharts-sector",f),y=a-i,j=pr(l,y,0,!0),w;return j>0&&Math.abs(m-h)<360?w=x5({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(j,y/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:h}):w=OS({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:m,endAngle:h}),x.createElement("path",Qp({},Ot(t,!0),{className:g,d:w}))};function _5(e,t,n){var r,i,a,l;if(e==="horizontal")r=t.x,a=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:d,innerRadius:m,outerRadius:h,angle:f}=t,g=Pt(u,d,m,f),y=Pt(u,d,h,f);r=g.x,i=g.y,a=y.x,l=y.y}else return ES(t);return[{x:r,y:i},{x:a,y:l}]}var AS={},MS={},LS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uv;function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(LS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LS;function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(MS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hv,n=MS;function r(i,a,l){l&&typeof l!="number"&&t.isIterateeCall(i,a,l)&&(a=l=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),l=l===void 0?i<a?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((a-i)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=i,i+=l;return d}e.range=r})(AS);var w5=AS.range;const DS=Tr(w5);function Mi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function j5(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i0(e){let t,n,r;e.length!==2?(t=Mi,n=(u,d)=>Mi(e(u),d),r=(u,d)=>e(u)-d):(t=e===Mi||e===j5?e:N5,n=e,r=e);function i(u,d,m=0,h=u.length){if(m<h){if(t(d,d)!==0)return h;do{const f=m+h>>>1;n(u[f],d)<0?m=f+1:h=f}while(m<h)}return m}function a(u,d,m=0,h=u.length){if(m<h){if(t(d,d)!==0)return h;do{const f=m+h>>>1;n(u[f],d)<=0?m=f+1:h=f}while(m<h)}return m}function l(u,d,m=0,h=u.length){const f=i(u,d,m,h-1);return f>m&&r(u[f-1],d)>-r(u[f],d)?f-1:f}return{left:i,center:l,right:a}}function N5(){return 0}function IS(e){return e===null?NaN:+e}function*S5(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const P5=i0(Mi),Ul=P5.right;i0(IS).center;class L_ extends Map{constructor(t,n=E5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(D_(this,t))}has(t){return super.has(D_(this,t))}set(t,n){return super.set(k5(this,t),n)}delete(t){return super.delete(C5(this,t))}}function D_({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function k5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function C5({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function E5(e){return e!==null&&typeof e=="object"?e.valueOf():e}function O5(e=Mi){if(e===Mi)return RS;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function RS(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const T5=Math.sqrt(50),A5=Math.sqrt(10),M5=Math.sqrt(2);function ud(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),l=a>=T5?10:a>=A5?5:a>=M5?2:1;let u,d,m;return i<0?(m=Math.pow(10,-i)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,i)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=n&&n<2?ud(e,t,n*2):[u,d,m]}function Jp(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,l]=r?ud(t,e,n):ud(e,t,n);if(!(a>=i))return[];const u=a-i+1,d=new Array(u);if(r)if(l<0)for(let m=0;m<u;++m)d[m]=(a-m)/-l;else for(let m=0;m<u;++m)d[m]=(a-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(i+m)/-l;else for(let m=0;m<u;++m)d[m]=(i+m)*l;return d}function eg(e,t,n){return t=+t,e=+e,n=+n,ud(e,t,n)[2]}function tg(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?eg(t,e,n):eg(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function I_(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function R_(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function zS(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?RS:O5(i);r>n;){if(r-n>600){const d=r-n+1,m=t-n+1,h=Math.log(d),f=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*f*(d-f)/d)*(m-d/2<0?-1:1),y=Math.max(n,Math.floor(t-m*f/d+g)),j=Math.min(r,Math.floor(t+(d-m)*f/d+g));zS(e,t,y,j,i)}const a=e[t];let l=n,u=r;for(Co(e,n,t),i(e[r],a)>0&&Co(e,n,r);l<u;){for(Co(e,l,u),++l,--u;i(e[l],a)<0;)++l;for(;i(e[u],a)>0;)--u}i(e[n],a)===0?Co(e,n,u):(++u,Co(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Co(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function L5(e,t,n){if(e=Float64Array.from(S5(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return R_(e);if(t>=1)return I_(e);var r,i=(r-1)*t,a=Math.floor(i),l=I_(zS(e,a).subarray(0,a+1)),u=R_(e.subarray(a+1));return l+(u-l)*(i-a)}}function D5(e,t,n=IS){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),l=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return l+(u-l)*(i-a)}}function I5(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function er(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function oi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ng=Symbol("implicit");function a0(){var e=new L_,t=[],n=[],r=ng;function i(a){let l=e.get(a);if(l===void 0){if(r!==ng)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new L_;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return a0(t,n).unknown(r)},er.apply(i,arguments),i}function s0(){var e=a0().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,l,u=!1,d=0,m=0,h=.5;delete e.unknown;function f(){var g=t().length,y=i<r,j=y?i:r,w=y?r:i;a=(w-j)/Math.max(1,g-d+m*2),u&&(a=Math.floor(a)),j+=(w-j-a*(g-d))*h,l=a*(1-d),u&&(j=Math.round(j),l=Math.round(l));var P=I5(g).map(function(b){return j+a*b});return n(y?P.reverse():P)}return e.domain=function(g){return arguments.length?(t(g),f()):t()},e.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,u=!0,f()},e.bandwidth=function(){return l},e.step=function(){return a},e.round=function(g){return arguments.length?(u=!!g,f()):u},e.padding=function(g){return arguments.length?(d=Math.min(1,m=+g),f()):d},e.paddingInner=function(g){return arguments.length?(d=Math.min(1,g),f()):d},e.paddingOuter=function(g){return arguments.length?(m=+g,f()):m},e.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),f()):h},e.copy=function(){return s0(t(),[r,i]).round(u).paddingInner(d).paddingOuter(m).align(h)},er.apply(f(),arguments)}function $S(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return $S(t())},e}function R5(){return $S(s0.apply(null,arguments).paddingInner(1))}function o0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function BS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Hl(){}var wl=.7,dd=1/wl,ys="\\s*([+-]?\\d+)\\s*",jl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",z5=/^#([0-9a-f]{3,8})$/,$5=new RegExp(`^rgb\\(${ys},${ys},${ys}\\)$`),B5=new RegExp(`^rgb\\(${Cr},${Cr},${Cr}\\)$`),F5=new RegExp(`^rgba\\(${ys},${ys},${ys},${jl}\\)$`),U5=new RegExp(`^rgba\\(${Cr},${Cr},${Cr},${jl}\\)$`),H5=new RegExp(`^hsl\\(${jl},${Cr},${Cr}\\)$`),Z5=new RegExp(`^hsla\\(${jl},${Cr},${Cr},${jl}\\)$`),z_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o0(Hl,Nl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$_,formatHex:$_,formatHex8:W5,formatHsl:V5,formatRgb:B_,toString:B_});function $_(){return this.rgb().formatHex()}function W5(){return this.rgb().formatHex8()}function V5(){return FS(this).formatHsl()}function B_(){return this.rgb().formatRgb()}function Nl(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=z5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?F_(t):n===3?new an(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Kc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Kc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$5.exec(e))?new an(t[1],t[2],t[3],1):(t=B5.exec(e))?new an(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=F5.exec(e))?Kc(t[1],t[2],t[3],t[4]):(t=U5.exec(e))?Kc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=H5.exec(e))?Z_(t[1],t[2]/100,t[3]/100,1):(t=Z5.exec(e))?Z_(t[1],t[2]/100,t[3]/100,t[4]):z_.hasOwnProperty(e)?F_(z_[e]):e==="transparent"?new an(NaN,NaN,NaN,0):null}function F_(e){return new an(e>>16&255,e>>8&255,e&255,1)}function Kc(e,t,n,r){return r<=0&&(e=t=n=NaN),new an(e,t,n,r)}function K5(e){return e instanceof Hl||(e=Nl(e)),e?(e=e.rgb(),new an(e.r,e.g,e.b,e.opacity)):new an}function rg(e,t,n,r){return arguments.length===1?K5(e):new an(e,t,n,r??1)}function an(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}o0(an,rg,BS(Hl,{brighter(e){return e=e==null?dd:Math.pow(dd,e),new an(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wl:Math.pow(wl,e),new an(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new an(ya(this.r),ya(this.g),ya(this.b),fd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:U_,formatHex:U_,formatHex8:q5,formatRgb:H_,toString:H_}));function U_(){return`#${ca(this.r)}${ca(this.g)}${ca(this.b)}`}function q5(){return`#${ca(this.r)}${ca(this.g)}${ca(this.b)}${ca((isNaN(this.opacity)?1:this.opacity)*255)}`}function H_(){const e=fd(this.opacity);return`${e===1?"rgb(":"rgba("}${ya(this.r)}, ${ya(this.g)}, ${ya(this.b)}${e===1?")":`, ${e})`}`}function fd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ya(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ca(e){return e=ya(e),(e<16?"0":"")+e.toString(16)}function Z_(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ur(e,t,n,r)}function FS(e){if(e instanceof ur)return new ur(e.h,e.s,e.l,e.opacity);if(e instanceof Hl||(e=Nl(e)),!e)return new ur;if(e instanceof ur)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,u=a-i,d=(a+i)/2;return u?(t===a?l=(n-r)/u+(n<r)*6:n===a?l=(r-t)/u+2:l=(t-n)/u+4,u/=d<.5?a+i:2-a-i,l*=60):u=d>0&&d<1?0:l,new ur(l,u,d,e.opacity)}function G5(e,t,n,r){return arguments.length===1?FS(e):new ur(e,t,n,r??1)}function ur(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}o0(ur,G5,BS(Hl,{brighter(e){return e=e==null?dd:Math.pow(dd,e),new ur(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wl:Math.pow(wl,e),new ur(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new an(pm(e>=240?e-240:e+120,i,r),pm(e,i,r),pm(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ur(W_(this.h),qc(this.s),qc(this.l),fd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fd(this.opacity);return`${e===1?"hsl(":"hsla("}${W_(this.h)}, ${qc(this.s)*100}%, ${qc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function W_(e){return e=(e||0)%360,e<0?e+360:e}function qc(e){return Math.max(0,Math.min(1,e||0))}function pm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const l0=e=>()=>e;function Y5(e,t){return function(n){return e+n*t}}function X5(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Q5(e){return(e=+e)==1?US:function(t,n){return n-t?X5(t,n,e):l0(isNaN(t)?n:t)}}function US(e,t){var n=t-e;return n?Y5(e,n):l0(isNaN(e)?t:e)}const V_=function e(t){var n=Q5(t);function r(i,a){var l=n((i=rg(i)).r,(a=rg(a)).r),u=n(i.g,a.g),d=n(i.b,a.b),m=US(i.opacity,a.opacity);return function(h){return i.r=l(h),i.g=u(h),i.b=d(h),i.opacity=m(h),i+""}}return r.gamma=e,r}(1);function J5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function e6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function t6(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=qs(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(u){for(l=0;l<r;++l)a[l]=i[l](u);return a}}function n6(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function hd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function r6(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=qs(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var ig=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gm=new RegExp(ig.source,"g");function i6(e){return function(){return e}}function a6(e){return function(t){return e(t)+""}}function s6(e,t){var n=ig.lastIndex=gm.lastIndex=0,r,i,a,l=-1,u=[],d=[];for(e=e+"",t=t+"";(r=ig.exec(e))&&(i=gm.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[l]?u[l]+=a:u[++l]=a),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,d.push({i:l,x:hd(r,i)})),n=gm.lastIndex;return n<t.length&&(a=t.slice(n),u[l]?u[l]+=a:u[++l]=a),u.length<2?d[0]?a6(d[0].x):i6(t):(t=d.length,function(m){for(var h=0,f;h<t;++h)u[(f=d[h]).i]=f.x(m);return u.join("")})}function qs(e,t){var n=typeof t,r;return t==null||n==="boolean"?l0(t):(n==="number"?hd:n==="string"?(r=Nl(t))?(t=r,V_):s6:t instanceof Nl?V_:t instanceof Date?n6:e6(t)?J5:Array.isArray(t)?t6:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?r6:hd)(e,t)}function c0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function o6(e,t){t===void 0&&(t=e,e=qs);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return a[u](l-u)}}function l6(e){return function(){return e}}function md(e){return+e}var K_=[0,1];function Vt(e){return e}function ag(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:l6(isNaN(t)?NaN:.5)}function c6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function u6(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=ag(i,r),a=n(l,a)):(r=ag(r,i),a=n(a,l)),function(u){return a(r(u))}}function d6(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=ag(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(u){var d=Ul(e,u,1,r)-1;return a[d](i[d](u))}}function Zl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Cf(){var e=K_,t=K_,n=qs,r,i,a,l=Vt,u,d,m;function h(){var g=Math.min(e.length,t.length);return l!==Vt&&(l=c6(e[0],e[g-1])),u=g>2?d6:u6,d=m=null,f}function f(g){return g==null||isNaN(g=+g)?a:(d||(d=u(e.map(r),t,n)))(r(l(g)))}return f.invert=function(g){return l(i((m||(m=u(t,e.map(r),hd)))(g)))},f.domain=function(g){return arguments.length?(e=Array.from(g,md),h()):e.slice()},f.range=function(g){return arguments.length?(t=Array.from(g),h()):t.slice()},f.rangeRound=function(g){return t=Array.from(g),n=c0,h()},f.clamp=function(g){return arguments.length?(l=g?!0:Vt,h()):l!==Vt},f.interpolate=function(g){return arguments.length?(n=g,h()):n},f.unknown=function(g){return arguments.length?(a=g,f):a},function(g,y){return r=g,i=y,h()}}function u0(){return Cf()(Vt,Vt)}function f6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ls(e){return e=pd(Math.abs(e)),e?e[1]:NaN}function h6(e,t){return function(n,r){for(var i=n.length,a=[],l=0,u=e[0],d=0;i>0&&u>0&&(d+u+1>r&&(u=Math.max(1,r-d)),a.push(n.substring(i-=u,i+u)),!((d+=u+1)>r));)u=e[l=(l+1)%e.length];return a.reverse().join(t)}}function m6(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var p6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sl(e){if(!(t=p6.exec(e)))throw new Error("invalid format: "+e);var t;return new d0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sl.prototype=d0.prototype;function d0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}d0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function g6(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var HS;function v6(e,t){var n=pd(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(HS=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+pd(e,Math.max(0,t+a-1))[0]}function q_(e,t){var n=pd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const G_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:f6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>q_(e*100,t),r:q_,s:v6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Y_(e){return e}var X_=Array.prototype.map,Q_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function y6(e){var t=e.grouping===void 0||e.thousands===void 0?Y_:h6(X_.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Y_:m6(X_.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(f){f=Sl(f);var g=f.fill,y=f.align,j=f.sign,w=f.symbol,P=f.zero,b=f.width,N=f.comma,_=f.precision,k=f.trim,C=f.type;C==="n"?(N=!0,C="g"):G_[C]||(_===void 0&&(_=12),k=!0,C="g"),(P||g==="0"&&y==="=")&&(P=!0,g="0",y="=");var A=w==="$"?n:w==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",O=w==="$"?r:/[%p]/.test(C)?l:"",I=G_[C],B=/[defgprs%]/.test(C);_=_===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function D(M){var $=A,R=O,E,U,Z;if(C==="c")R=I(M)+R,M="";else{M=+M;var K=M<0||1/M<0;if(M=isNaN(M)?d:I(Math.abs(M),_),k&&(M=g6(M)),K&&+M==0&&j!=="+"&&(K=!1),$=(K?j==="("?j:u:j==="-"||j==="("?"":j)+$,R=(C==="s"?Q_[8+HS/3]:"")+R+(K&&j==="("?")":""),B){for(E=-1,U=M.length;++E<U;)if(Z=M.charCodeAt(E),48>Z||Z>57){R=(Z===46?i+M.slice(E+1):M.slice(E))+R,M=M.slice(0,E);break}}}N&&!P&&(M=t(M,1/0));var z=$.length+M.length+R.length,G=z<b?new Array(b-z+1).join(g):"";switch(N&&P&&(M=t(G+M,G.length?b-R.length:1/0),G=""),y){case"<":M=$+M+R+G;break;case"=":M=$+G+M+R;break;case"^":M=G.slice(0,z=G.length>>1)+$+M+R+G.slice(z);break;default:M=G+$+M+R;break}return a(M)}return D.toString=function(){return f+""},D}function h(f,g){var y=m((f=Sl(f),f.type="f",f)),j=Math.max(-8,Math.min(8,Math.floor(Ls(g)/3)))*3,w=Math.pow(10,-j),P=Q_[8+j/3];return function(b){return y(w*b)+P}}return{format:m,formatPrefix:h}}var Gc,f0,ZS;x6({thousands:",",grouping:[3],currency:["$",""]});function x6(e){return Gc=y6(e),f0=Gc.format,ZS=Gc.formatPrefix,Gc}function b6(e){return Math.max(0,-Ls(Math.abs(e)))}function _6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ls(t)/3)))*3-Ls(Math.abs(e)))}function w6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ls(t)-Ls(e))+1}function WS(e,t,n,r){var i=tg(e,t,n),a;switch(r=Sl(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=_6(i,l))&&(r.precision=a),ZS(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=w6(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=b6(i))&&(r.precision=a-(r.type==="%")*2);break}}return f0(r)}function Fi(e){var t=e.domain;return e.ticks=function(n){var r=t();return Jp(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return WS(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],u=r[a],d,m,h=10;for(u<l&&(m=l,l=u,u=m,m=i,i=a,a=m);h-- >0;){if(m=eg(l,u,n),m===d)return r[i]=l,r[a]=u,t(r);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function VS(){var e=u0();return e.copy=function(){return Zl(e,VS())},er.apply(e,arguments),Fi(e)}function KS(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,md),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return KS(e).unknown(t)},e=arguments.length?Array.from(e,md):[0,1],Fi(n)}function qS(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],l;return a<i&&(l=n,n=r,r=l,l=i,i=a,a=l),e[n]=t.floor(i),e[r]=t.ceil(a),e}function J_(e){return Math.log(e)}function ew(e){return Math.exp(e)}function j6(e){return-Math.log(-e)}function N6(e){return-Math.exp(-e)}function S6(e){return isFinite(e)?+("1e"+e):e<0?0:e}function P6(e){return e===10?S6:e===Math.E?Math.exp:t=>Math.pow(e,t)}function k6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function tw(e){return(t,n)=>-e(-t,n)}function h0(e){const t=e(J_,ew),n=t.domain;let r=10,i,a;function l(){return i=k6(r),a=P6(r),n()[0]<0?(i=tw(i),a=tw(a),e(j6,N6)):e(J_,ew),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const d=n();let m=d[0],h=d[d.length-1];const f=h<m;f&&([m,h]=[h,m]);let g=i(m),y=i(h),j,w;const P=u==null?10:+u;let b=[];if(!(r%1)&&y-g<P){if(g=Math.floor(g),y=Math.ceil(y),m>0){for(;g<=y;++g)for(j=1;j<r;++j)if(w=g<0?j/a(-g):j*a(g),!(w<m)){if(w>h)break;b.push(w)}}else for(;g<=y;++g)for(j=r-1;j>=1;--j)if(w=g>0?j/a(-g):j*a(g),!(w<m)){if(w>h)break;b.push(w)}b.length*2<P&&(b=Jp(m,h,P))}else b=Jp(g,y,Math.min(y-g,P)).map(a);return f?b.reverse():b},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=Sl(d)).precision==null&&(d.trim=!0),d=f0(d)),u===1/0)return d;const m=Math.max(1,r*u/t.ticks().length);return h=>{let f=h/a(Math.round(i(h)));return f*r<r-.5&&(f*=r),f<=m?d(h):""}},t.nice=()=>n(qS(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),t}function GS(){const e=h0(Cf()).domain([1,10]);return e.copy=()=>Zl(e,GS()).base(e.base()),er.apply(e,arguments),e}function nw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function rw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function m0(e){var t=1,n=e(nw(t),rw(t));return n.constant=function(r){return arguments.length?e(nw(t=+r),rw(t)):t},Fi(n)}function YS(){var e=m0(Cf());return e.copy=function(){return Zl(e,YS()).constant(e.constant())},er.apply(e,arguments)}function iw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function C6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function E6(e){return e<0?-e*e:e*e}function p0(e){var t=e(Vt,Vt),n=1;function r(){return n===1?e(Vt,Vt):n===.5?e(C6,E6):e(iw(n),iw(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Fi(t)}function g0(){var e=p0(Cf());return e.copy=function(){return Zl(e,g0()).exponent(e.exponent())},er.apply(e,arguments),e}function O6(){return g0.apply(null,arguments).exponent(.5)}function aw(e){return Math.sign(e)*e*e}function T6(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function XS(){var e=u0(),t=[0,1],n=!1,r;function i(a){var l=T6(e(a));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(a){return e.invert(aw(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,md)).map(aw)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return XS(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},er.apply(i,arguments),Fi(i)}function QS(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=D5(e,l/u);return a}function a(l){return l==null||isNaN(l=+l)?r:t[Ul(n,l)]}return a.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Mi),i()},a.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},a.unknown=function(l){return arguments.length?(r=l,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return QS().domain(e).range(t).unknown(r)},er.apply(a,arguments)}function JS(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function l(d){return d!=null&&d<=d?i[Ul(r,d,0,n)]:a}function u(){var d=-1;for(r=new Array(n);++d<n;)r[d]=((d+1)*t-(d-n)*e)/(n+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(n=(i=Array.from(d)).length-1,u()):i.slice()},l.invertExtent=function(d){var m=i.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,r[0]]:m>=n?[r[n-1],t]:[r[m-1],r[m]]},l.unknown=function(d){return arguments.length&&(a=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return JS().domain([e,t]).range(i).unknown(a)},er.apply(Fi(l),arguments)}function eP(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Ul(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var l=t.indexOf(a);return[e[l-1],e[l]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return eP().domain(e).range(t).unknown(n)},er.apply(i,arguments)}const vm=new Date,ym=new Date;function ut(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const l=i(a),u=i.ceil(a);return a-l<u-a?l:u},i.offset=(a,l)=>(t(a=new Date(+a),l==null?1:Math.floor(l)),a),i.range=(a,l,u)=>{const d=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<l)||!(u>0))return d;let m;do d.push(m=new Date(+a)),t(a,u),e(a);while(m<a&&a<l);return d},i.filter=a=>ut(l=>{if(l>=l)for(;e(l),!a(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!a(l););else for(;--u>=0;)for(;t(l,1),!a(l););}),n&&(i.count=(a,l)=>(vm.setTime(+a),ym.setTime(+l),e(vm),e(ym),Math.floor(n(vm,ym))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?l=>r(l)%a===0:l=>i.count(0,l)%a===0):i)),i}const gd=ut(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ut(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gd);gd.range;const Zr=1e3,Hn=Zr*60,Wr=Hn*60,ei=Wr*24,v0=ei*7,sw=ei*30,xm=ei*365,ua=ut(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zr)},(e,t)=>(t-e)/Zr,e=>e.getUTCSeconds());ua.range;const y0=ut(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zr)},(e,t)=>{e.setTime(+e+t*Hn)},(e,t)=>(t-e)/Hn,e=>e.getMinutes());y0.range;const x0=ut(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Hn)},(e,t)=>(t-e)/Hn,e=>e.getUTCMinutes());x0.range;const b0=ut(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zr-e.getMinutes()*Hn)},(e,t)=>{e.setTime(+e+t*Wr)},(e,t)=>(t-e)/Wr,e=>e.getHours());b0.range;const _0=ut(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Wr)},(e,t)=>(t-e)/Wr,e=>e.getUTCHours());_0.range;const Wl=ut(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Hn)/ei,e=>e.getDate()-1);Wl.range;const Ef=ut(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ei,e=>e.getUTCDate()-1);Ef.range;const tP=ut(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ei,e=>Math.floor(e/ei));tP.range;function La(e){return ut(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Hn)/v0)}const Of=La(0),vd=La(1),A6=La(2),M6=La(3),Ds=La(4),L6=La(5),D6=La(6);Of.range;vd.range;A6.range;M6.range;Ds.range;L6.range;D6.range;function Da(e){return ut(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/v0)}const Tf=Da(0),yd=Da(1),I6=Da(2),R6=Da(3),Is=Da(4),z6=Da(5),$6=Da(6);Tf.range;yd.range;I6.range;R6.range;Is.range;z6.range;$6.range;const w0=ut(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());w0.range;const j0=ut(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());j0.range;const ti=ut(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ti.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ut(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ti.range;const ni=ut(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ni.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ut(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ni.range;function nP(e,t,n,r,i,a){const l=[[ua,1,Zr],[ua,5,5*Zr],[ua,15,15*Zr],[ua,30,30*Zr],[a,1,Hn],[a,5,5*Hn],[a,15,15*Hn],[a,30,30*Hn],[i,1,Wr],[i,3,3*Wr],[i,6,6*Wr],[i,12,12*Wr],[r,1,ei],[r,2,2*ei],[n,1,v0],[t,1,sw],[t,3,3*sw],[e,1,xm]];function u(m,h,f){const g=h<m;g&&([m,h]=[h,m]);const y=f&&typeof f.range=="function"?f:d(m,h,f),j=y?y.range(m,+h+1):[];return g?j.reverse():j}function d(m,h,f){const g=Math.abs(h-m)/f,y=i0(([,,P])=>P).right(l,g);if(y===l.length)return e.every(tg(m/xm,h/xm,f));if(y===0)return gd.every(Math.max(tg(m,h,f),1));const[j,w]=l[g/l[y-1][2]<l[y][2]/g?y-1:y];return j.every(w)}return[u,d]}const[B6,F6]=nP(ni,j0,Tf,tP,_0,x0),[U6,H6]=nP(ti,w0,Of,Wl,b0,y0);function bm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function _m(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Eo(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Z6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=Oo(i),h=To(i),f=Oo(a),g=To(a),y=Oo(l),j=To(l),w=Oo(u),P=To(u),b=Oo(d),N=To(d),_={a:K,A:z,b:G,B:Y,c:null,d:fw,e:fw,f:hR,g:jR,G:SR,H:uR,I:dR,j:fR,L:rP,m:mR,M:pR,p:re,q:ne,Q:pw,s:gw,S:gR,u:vR,U:yR,V:xR,w:bR,W:_R,x:null,X:null,y:wR,Y:NR,Z:PR,"%":mw},k={a:H,A:X,b:te,B:ae,c:null,d:hw,e:hw,f:OR,g:BR,G:UR,H:kR,I:CR,j:ER,L:aP,m:TR,M:AR,p:Te,q:Ft,Q:pw,s:gw,S:MR,u:LR,U:DR,V:IR,w:RR,W:zR,x:null,X:null,y:$R,Y:FR,Z:HR,"%":mw},C={a:D,A:M,b:$,B:R,c:E,d:uw,e:uw,f:sR,g:cw,G:lw,H:dw,I:dw,j:nR,L:aR,m:tR,M:rR,p:B,q:eR,Q:lR,s:cR,S:iR,u:G6,U:Y6,V:X6,w:q6,W:Q6,x:U,X:Z,y:cw,Y:lw,Z:J6,"%":oR};_.x=A(n,_),_.X=A(r,_),_.c=A(t,_),k.x=A(n,k),k.X=A(r,k),k.c=A(t,k);function A(se,ge){return function(me){var J=[],ft=-1,Ae=0,Tt=se.length,At,tr,Wi;for(me instanceof Date||(me=new Date(+me));++ft<Tt;)se.charCodeAt(ft)===37&&(J.push(se.slice(Ae,ft)),(tr=ow[At=se.charAt(++ft)])!=null?At=se.charAt(++ft):tr=At==="e"?" ":"0",(Wi=ge[At])&&(At=Wi(me,tr)),J.push(At),Ae=ft+1);return J.push(se.slice(Ae,ft)),J.join("")}}function O(se,ge){return function(me){var J=Eo(1900,void 0,1),ft=I(J,se,me+="",0),Ae,Tt;if(ft!=me.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(ge&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(Ae=_m(Eo(J.y,0,1)),Tt=Ae.getUTCDay(),Ae=Tt>4||Tt===0?yd.ceil(Ae):yd(Ae),Ae=Ef.offset(Ae,(J.V-1)*7),J.y=Ae.getUTCFullYear(),J.m=Ae.getUTCMonth(),J.d=Ae.getUTCDate()+(J.w+6)%7):(Ae=bm(Eo(J.y,0,1)),Tt=Ae.getDay(),Ae=Tt>4||Tt===0?vd.ceil(Ae):vd(Ae),Ae=Wl.offset(Ae,(J.V-1)*7),J.y=Ae.getFullYear(),J.m=Ae.getMonth(),J.d=Ae.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),Tt="Z"in J?_m(Eo(J.y,0,1)).getUTCDay():bm(Eo(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(Tt+5)%7:J.w+J.U*7-(Tt+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,_m(J)):bm(J)}}function I(se,ge,me,J){for(var ft=0,Ae=ge.length,Tt=me.length,At,tr;ft<Ae;){if(J>=Tt)return-1;if(At=ge.charCodeAt(ft++),At===37){if(At=ge.charAt(ft++),tr=C[At in ow?ge.charAt(ft++):At],!tr||(J=tr(se,me,J))<0)return-1}else if(At!=me.charCodeAt(J++))return-1}return J}function B(se,ge,me){var J=m.exec(ge.slice(me));return J?(se.p=h.get(J[0].toLowerCase()),me+J[0].length):-1}function D(se,ge,me){var J=y.exec(ge.slice(me));return J?(se.w=j.get(J[0].toLowerCase()),me+J[0].length):-1}function M(se,ge,me){var J=f.exec(ge.slice(me));return J?(se.w=g.get(J[0].toLowerCase()),me+J[0].length):-1}function $(se,ge,me){var J=b.exec(ge.slice(me));return J?(se.m=N.get(J[0].toLowerCase()),me+J[0].length):-1}function R(se,ge,me){var J=w.exec(ge.slice(me));return J?(se.m=P.get(J[0].toLowerCase()),me+J[0].length):-1}function E(se,ge,me){return I(se,t,ge,me)}function U(se,ge,me){return I(se,n,ge,me)}function Z(se,ge,me){return I(se,r,ge,me)}function K(se){return l[se.getDay()]}function z(se){return a[se.getDay()]}function G(se){return d[se.getMonth()]}function Y(se){return u[se.getMonth()]}function re(se){return i[+(se.getHours()>=12)]}function ne(se){return 1+~~(se.getMonth()/3)}function H(se){return l[se.getUTCDay()]}function X(se){return a[se.getUTCDay()]}function te(se){return d[se.getUTCMonth()]}function ae(se){return u[se.getUTCMonth()]}function Te(se){return i[+(se.getUTCHours()>=12)]}function Ft(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var ge=A(se+="",_);return ge.toString=function(){return se},ge},parse:function(se){var ge=O(se+="",!1);return ge.toString=function(){return se},ge},utcFormat:function(se){var ge=A(se+="",k);return ge.toString=function(){return se},ge},utcParse:function(se){var ge=O(se+="",!0);return ge.toString=function(){return se},ge}}}var ow={"-":"",_:" ",0:"0"},xt=/^\s*\d+/,W6=/^%/,V6=/[\\^$*+?|[\]().{}]/g;function ke(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function K6(e){return e.replace(V6,"\\$&")}function Oo(e){return new RegExp("^(?:"+e.map(K6).join("|")+")","i")}function To(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function q6(e,t,n){var r=xt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function G6(e,t,n){var r=xt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Y6(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function X6(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Q6(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function lw(e,t,n){var r=xt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function cw(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function J6(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function eR(e,t,n){var r=xt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function tR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function uw(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function nR(e,t,n){var r=xt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function dw(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function iR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function aR(e,t,n){var r=xt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function sR(e,t,n){var r=xt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function oR(e,t,n){var r=W6.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function lR(e,t,n){var r=xt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function cR(e,t,n){var r=xt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function fw(e,t){return ke(e.getDate(),t,2)}function uR(e,t){return ke(e.getHours(),t,2)}function dR(e,t){return ke(e.getHours()%12||12,t,2)}function fR(e,t){return ke(1+Wl.count(ti(e),e),t,3)}function rP(e,t){return ke(e.getMilliseconds(),t,3)}function hR(e,t){return rP(e,t)+"000"}function mR(e,t){return ke(e.getMonth()+1,t,2)}function pR(e,t){return ke(e.getMinutes(),t,2)}function gR(e,t){return ke(e.getSeconds(),t,2)}function vR(e){var t=e.getDay();return t===0?7:t}function yR(e,t){return ke(Of.count(ti(e)-1,e),t,2)}function iP(e){var t=e.getDay();return t>=4||t===0?Ds(e):Ds.ceil(e)}function xR(e,t){return e=iP(e),ke(Ds.count(ti(e),e)+(ti(e).getDay()===4),t,2)}function bR(e){return e.getDay()}function _R(e,t){return ke(vd.count(ti(e)-1,e),t,2)}function wR(e,t){return ke(e.getFullYear()%100,t,2)}function jR(e,t){return e=iP(e),ke(e.getFullYear()%100,t,2)}function NR(e,t){return ke(e.getFullYear()%1e4,t,4)}function SR(e,t){var n=e.getDay();return e=n>=4||n===0?Ds(e):Ds.ceil(e),ke(e.getFullYear()%1e4,t,4)}function PR(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ke(t/60|0,"0",2)+ke(t%60,"0",2)}function hw(e,t){return ke(e.getUTCDate(),t,2)}function kR(e,t){return ke(e.getUTCHours(),t,2)}function CR(e,t){return ke(e.getUTCHours()%12||12,t,2)}function ER(e,t){return ke(1+Ef.count(ni(e),e),t,3)}function aP(e,t){return ke(e.getUTCMilliseconds(),t,3)}function OR(e,t){return aP(e,t)+"000"}function TR(e,t){return ke(e.getUTCMonth()+1,t,2)}function AR(e,t){return ke(e.getUTCMinutes(),t,2)}function MR(e,t){return ke(e.getUTCSeconds(),t,2)}function LR(e){var t=e.getUTCDay();return t===0?7:t}function DR(e,t){return ke(Tf.count(ni(e)-1,e),t,2)}function sP(e){var t=e.getUTCDay();return t>=4||t===0?Is(e):Is.ceil(e)}function IR(e,t){return e=sP(e),ke(Is.count(ni(e),e)+(ni(e).getUTCDay()===4),t,2)}function RR(e){return e.getUTCDay()}function zR(e,t){return ke(yd.count(ni(e)-1,e),t,2)}function $R(e,t){return ke(e.getUTCFullYear()%100,t,2)}function BR(e,t){return e=sP(e),ke(e.getUTCFullYear()%100,t,2)}function FR(e,t){return ke(e.getUTCFullYear()%1e4,t,4)}function UR(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Is(e):Is.ceil(e),ke(e.getUTCFullYear()%1e4,t,4)}function HR(){return"+0000"}function mw(){return"%"}function pw(e){return+e}function gw(e){return Math.floor(+e/1e3)}var Ka,oP,lP;ZR({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ZR(e){return Ka=Z6(e),oP=Ka.format,Ka.parse,lP=Ka.utcFormat,Ka.utcParse,Ka}function WR(e){return new Date(e)}function VR(e){return e instanceof Date?+e:+new Date(+e)}function N0(e,t,n,r,i,a,l,u,d,m){var h=u0(),f=h.invert,g=h.domain,y=m(".%L"),j=m(":%S"),w=m("%I:%M"),P=m("%I %p"),b=m("%a %d"),N=m("%b %d"),_=m("%B"),k=m("%Y");function C(A){return(d(A)<A?y:u(A)<A?j:l(A)<A?w:a(A)<A?P:r(A)<A?i(A)<A?b:N:n(A)<A?_:k)(A)}return h.invert=function(A){return new Date(f(A))},h.domain=function(A){return arguments.length?g(Array.from(A,VR)):g().map(WR)},h.ticks=function(A){var O=g();return e(O[0],O[O.length-1],A??10)},h.tickFormat=function(A,O){return O==null?C:m(O)},h.nice=function(A){var O=g();return(!A||typeof A.range!="function")&&(A=t(O[0],O[O.length-1],A??10)),A?g(qS(O,A)):h},h.copy=function(){return Zl(h,N0(e,t,n,r,i,a,l,u,d,m))},h}function KR(){return er.apply(N0(U6,H6,ti,w0,Of,Wl,b0,y0,ua,oP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qR(){return er.apply(N0(B6,F6,ni,j0,Tf,Ef,_0,x0,ua,lP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Af(){var e=0,t=1,n,r,i,a,l=Vt,u=!1,d;function m(f){return f==null||isNaN(f=+f)?d:l(i===0?.5:(f=(a(f)-n)*i,u?Math.max(0,Math.min(1,f)):f))}m.domain=function(f){return arguments.length?([e,t]=f,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),m):[e,t]},m.clamp=function(f){return arguments.length?(u=!!f,m):u},m.interpolator=function(f){return arguments.length?(l=f,m):l};function h(f){return function(g){var y,j;return arguments.length?([y,j]=g,l=f(y,j),m):[l(0),l(1)]}}return m.range=h(qs),m.rangeRound=h(c0),m.unknown=function(f){return arguments.length?(d=f,m):d},function(f){return a=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),m}}function Ui(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function cP(){var e=Fi(Af()(Vt));return e.copy=function(){return Ui(e,cP())},oi.apply(e,arguments)}function uP(){var e=h0(Af()).domain([1,10]);return e.copy=function(){return Ui(e,uP()).base(e.base())},oi.apply(e,arguments)}function dP(){var e=m0(Af());return e.copy=function(){return Ui(e,dP()).constant(e.constant())},oi.apply(e,arguments)}function S0(){var e=p0(Af());return e.copy=function(){return Ui(e,S0()).exponent(e.exponent())},oi.apply(e,arguments)}function GR(){return S0.apply(null,arguments).exponent(.5)}function fP(){var e=[],t=Vt;function n(r){if(r!=null&&!isNaN(r=+r))return t((Ul(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Mi),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>L5(e,a/r))},n.copy=function(){return fP(t).domain(e)},oi.apply(n,arguments)}function Mf(){var e=0,t=.5,n=1,r=1,i,a,l,u,d,m=Vt,h,f=!1,g;function y(w){return isNaN(w=+w)?g:(w=.5+((w=+h(w))-a)*(r*w<r*a?u:d),m(f?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([e,t,n]=w,i=h(e=+e),a=h(t=+t),l=h(n=+n),u=i===a?0:.5/(a-i),d=a===l?0:.5/(l-a),r=a<i?-1:1,y):[e,t,n]},y.clamp=function(w){return arguments.length?(f=!!w,y):f},y.interpolator=function(w){return arguments.length?(m=w,y):m};function j(w){return function(P){var b,N,_;return arguments.length?([b,N,_]=P,m=o6(w,[b,N,_]),y):[m(0),m(.5),m(1)]}}return y.range=j(qs),y.rangeRound=j(c0),y.unknown=function(w){return arguments.length?(g=w,y):g},function(w){return h=w,i=w(e),a=w(t),l=w(n),u=i===a?0:.5/(a-i),d=a===l?0:.5/(l-a),r=a<i?-1:1,y}}function hP(){var e=Fi(Mf()(Vt));return e.copy=function(){return Ui(e,hP())},oi.apply(e,arguments)}function mP(){var e=h0(Mf()).domain([.1,1,10]);return e.copy=function(){return Ui(e,mP()).base(e.base())},oi.apply(e,arguments)}function pP(){var e=m0(Mf());return e.copy=function(){return Ui(e,pP()).constant(e.constant())},oi.apply(e,arguments)}function P0(){var e=p0(Mf());return e.copy=function(){return Ui(e,P0()).exponent(e.exponent())},oi.apply(e,arguments)}function YR(){return P0.apply(null,arguments).exponent(.5)}const Bo=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:s0,scaleDiverging:hP,scaleDivergingLog:mP,scaleDivergingPow:P0,scaleDivergingSqrt:YR,scaleDivergingSymlog:pP,scaleIdentity:KS,scaleImplicit:ng,scaleLinear:VS,scaleLog:GS,scaleOrdinal:a0,scalePoint:R5,scalePow:g0,scaleQuantile:QS,scaleQuantize:JS,scaleRadial:XS,scaleSequential:cP,scaleSequentialLog:uP,scaleSequentialPow:S0,scaleSequentialQuantile:fP,scaleSequentialSqrt:GR,scaleSequentialSymlog:dP,scaleSqrt:O6,scaleSymlog:YS,scaleThreshold:eP,scaleTime:KR,scaleUtc:qR,tickFormat:WS},Symbol.toStringTag,{value:"Module"}));var Hi=e=>e.chartData,XR=q([Hi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),k0=(e,t,n,r)=>r?XR(e):Hi(e);function Rs(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Sn(t)&&Sn(n))return!0}return!1}function vw(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function QR(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,a;if(Sn(n))i=n;else if(typeof n=="function")return;if(Sn(r))a=r;else if(typeof r=="function")return;var l=[i,a];if(Rs(l))return l}}function JR(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Rs(r))return vw(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(de(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&d_.test(i)){var d=d_.exec(i);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(a==="auto")t!=null&&(u=Math.max(...t));else if(de(a))u=a;else if(typeof a=="function")try{t!=null&&(u=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&f_.test(a)){var h=f_.exec(a);if(h==null||t==null)u=void 0;else{var f=+h[1];u=t[1]+f}}else u=t==null?void 0:t[1];var g=[l,u];if(Rs(g))return t==null?g:vw(g,t,n)}}}var Gs=1e9,e8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},E0,Ze=!0,Gn="[DecimalError] ",xa=Gn+"Invalid argument: ",C0=Gn+"Exponent out of range: ",Ys=Math.floor,na=Math.pow,t8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vn,mt=1e7,Fe=7,gP=9007199254740991,xd=Ys(gP/Fe),le={};le.absoluteValue=le.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};le.comparedTo=le.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};le.decimalPlaces=le.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Fe;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};le.dividedBy=le.div=function(e){return qr(this,new this.constructor(e))};le.dividedToIntegerBy=le.idiv=function(e){var t=this,n=t.constructor;return Me(qr(t,new n(e),0,1),n.precision)};le.equals=le.eq=function(e){return!this.cmp(e)};le.exponent=function(){return rt(this)};le.greaterThan=le.gt=function(e){return this.cmp(e)>0};le.greaterThanOrEqualTo=le.gte=function(e){return this.cmp(e)>=0};le.isInteger=le.isint=function(){return this.e>this.d.length-2};le.isNegative=le.isneg=function(){return this.s<0};le.isPositive=le.ispos=function(){return this.s>0};le.isZero=function(){return this.s===0};le.lessThan=le.lt=function(e){return this.cmp(e)<0};le.lessThanOrEqualTo=le.lte=function(e){return this.cmp(e)<1};le.logarithm=le.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(vn))throw Error(Gn+"NaN");if(n.s<1)throw Error(Gn+(n.s?"NaN":"-Infinity"));return n.eq(vn)?new r(0):(Ze=!1,t=qr(Pl(n,a),Pl(e,a),a),Ze=!0,Me(t,i))};le.minus=le.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?xP(t,e):vP(t,(e.s=-e.s,e))};le.modulo=le.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Gn+"NaN");return n.s?(Ze=!1,t=qr(n,e,0,1).times(e),Ze=!0,n.minus(t)):Me(new r(n),i)};le.naturalExponential=le.exp=function(){return yP(this)};le.naturalLogarithm=le.ln=function(){return Pl(this)};le.negated=le.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};le.plus=le.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?vP(t,e):xP(t,(e.s=-e.s,e))};le.precision=le.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(xa+e);if(t=rt(i)+1,r=i.d.length-1,n=r*Fe+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};le.squareRoot=le.sqrt=function(){var e,t,n,r,i,a,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Gn+"NaN")}for(e=rt(u),Ze=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=Sr(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Ys((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new d(t)):r=new d(i.toString()),n=d.precision,i=l=n+3;;)if(a=r,r=a.plus(qr(u,a,l+2)).times(.5),Sr(a.d).slice(0,l)===(t=Sr(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(Me(a,n+1,0),a.times(a).eq(u)){r=a;break}}else if(t!="9999")break;l+=4}return Ze=!0,Me(r,n)};le.times=le.mul=function(e){var t,n,r,i,a,l,u,d,m,h=this,f=h.constructor,g=h.d,y=(e=new f(e)).d;if(!h.s||!e.s)return new f(0);for(e.s*=h.s,n=h.e+e.e,d=g.length,m=y.length,d<m&&(a=g,g=y,y=a,l=d,d=m,m=l),a=[],l=d+m,r=l;r--;)a.push(0);for(r=m;--r>=0;){for(t=0,i=d+r;i>r;)u=a[i]+y[r]*g[i-r-1]+t,a[i--]=u%mt|0,t=u/mt|0;a[i]=(a[i]+t)%mt|0}for(;!a[--l];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,Ze?Me(e,f.precision):e};le.toDecimalPlaces=le.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Or(e,0,Gs),t===void 0?t=r.rounding:Or(t,0,8),Me(n,e+rt(n)+1,t))};le.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Ca(r,!0):(Or(e,0,Gs),t===void 0?t=i.rounding:Or(t,0,8),r=Me(new i(r),e+1,t),n=Ca(r,!0,e+1)),n};le.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?Ca(i):(Or(e,0,Gs),t===void 0?t=a.rounding:Or(t,0,8),r=Me(new a(i),e+rt(i)+1,t),n=Ca(r.abs(),!1,e+rt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};le.toInteger=le.toint=function(){var e=this,t=e.constructor;return Me(new t(e),rt(e)+1,t.rounding)};le.toNumber=function(){return+this};le.toPower=le.pow=function(e){var t,n,r,i,a,l,u=this,d=u.constructor,m=12,h=+(e=new d(e));if(!e.s)return new d(vn);if(u=new d(u),!u.s){if(e.s<1)throw Error(Gn+"Infinity");return u}if(u.eq(vn))return u;if(r=d.precision,e.eq(vn))return Me(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,a=u.s,l){if((n=h<0?-h:h)<=gP){for(i=new d(vn),t=Math.ceil(r/Fe+4),Ze=!1;n%2&&(i=i.times(u),xw(i.d,t)),n=Ys(n/2),n!==0;)u=u.times(u),xw(u.d,t);return Ze=!0,e.s<0?new d(vn).div(i):Me(i,r)}}else if(a<0)throw Error(Gn+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,Ze=!1,i=e.times(Pl(u,r+m)),Ze=!0,i=yP(i),i.s=a,i};le.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=rt(i),r=Ca(i,n<=a.toExpNeg||n>=a.toExpPos)):(Or(e,1,Gs),t===void 0?t=a.rounding:Or(t,0,8),i=Me(new a(i),e,t),n=rt(i),r=Ca(i,e<=n||n<=a.toExpNeg,e)),r};le.toSignificantDigits=le.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Or(e,1,Gs),t===void 0?t=r.rounding:Or(t,0,8)),Me(new r(n),e,t)};le.toString=le.valueOf=le.val=le.toJSON=le[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=rt(e),n=e.constructor;return Ca(e,t<=n.toExpNeg||t>=n.toExpPos)};function vP(e,t){var n,r,i,a,l,u,d,m,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Ze?Me(t,f):t;if(d=e.d,m=t.d,l=e.e,i=t.e,d=d.slice(),a=l-i,a){for(a<0?(r=d,a=-a,u=m.length):(r=m,i=l,u=d.length),l=Math.ceil(f/Fe),u=l>u?l+1:u+1,a>u&&(a=u,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(u=d.length,a=m.length,u-a<0&&(a=u,r=m,m=d,d=r),n=0;a;)n=(d[--a]=d[a]+m[a]+n)/mt|0,d[a]%=mt;for(n&&(d.unshift(n),++i),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=i,Ze?Me(t,f):t}function Or(e,t,n){if(e!==~~e||e<t||e>n)throw Error(xa+e)}function Sr(e){var t,n,r,i=e.length-1,a="",l=e[0];if(i>0){for(a+=l,t=1;t<i;t++)r=e[t]+"",n=Fe-r.length,n&&(a+=gi(n)),a+=r;l=e[t],r=l+"",n=Fe-r.length,n&&(a+=gi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var qr=function(){function e(r,i){var a,l=0,u=r.length;for(r=r.slice();u--;)a=r[u]*i+l,r[u]=a%mt|0,l=a/mt|0;return l&&r.unshift(l),r}function t(r,i,a,l){var u,d;if(a!=l)d=a>l?1:-1;else for(u=d=0;u<a;u++)if(r[u]!=i[u]){d=r[u]>i[u]?1:-1;break}return d}function n(r,i,a){for(var l=0;a--;)r[a]-=l,l=r[a]<i[a]?1:0,r[a]=l*mt+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,l){var u,d,m,h,f,g,y,j,w,P,b,N,_,k,C,A,O,I,B=r.constructor,D=r.s==i.s?1:-1,M=r.d,$=i.d;if(!r.s)return new B(r);if(!i.s)throw Error(Gn+"Division by zero");for(d=r.e-i.e,O=$.length,C=M.length,y=new B(D),j=y.d=[],m=0;$[m]==(M[m]||0);)++m;if($[m]>(M[m]||0)&&--d,a==null?N=a=B.precision:l?N=a+(rt(r)-rt(i))+1:N=a,N<0)return new B(0);if(N=N/Fe+2|0,m=0,O==1)for(h=0,$=$[0],N++;(m<C||h)&&N--;m++)_=h*mt+(M[m]||0),j[m]=_/$|0,h=_%$|0;else{for(h=mt/($[0]+1)|0,h>1&&($=e($,h),M=e(M,h),O=$.length,C=M.length),k=O,w=M.slice(0,O),P=w.length;P<O;)w[P++]=0;I=$.slice(),I.unshift(0),A=$[0],$[1]>=mt/2&&++A;do h=0,u=t($,w,O,P),u<0?(b=w[0],O!=P&&(b=b*mt+(w[1]||0)),h=b/A|0,h>1?(h>=mt&&(h=mt-1),f=e($,h),g=f.length,P=w.length,u=t(f,w,g,P),u==1&&(h--,n(f,O<g?I:$,g))):(h==0&&(u=h=1),f=$.slice()),g=f.length,g<P&&f.unshift(0),n(w,f,P),u==-1&&(P=w.length,u=t($,w,O,P),u<1&&(h++,n(w,O<P?I:$,P))),P=w.length):u===0&&(h++,w=[0]),j[m++]=h,u&&w[0]?w[P++]=M[k]||0:(w=[M[k]],P=1);while((k++<C||w[0]!==void 0)&&N--)}return j[0]||j.shift(),y.e=d,Me(y,l?a+rt(y)+1:a)}}();function yP(e,t){var n,r,i,a,l,u,d=0,m=0,h=e.constructor,f=h.precision;if(rt(e)>16)throw Error(C0+rt(e));if(!e.s)return new h(vn);for(t==null?(Ze=!1,u=f):u=t,l=new h(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(r=Math.log(na(2,m))/Math.LN10*2+5|0,u+=r,n=i=a=new h(vn),h.precision=u;;){if(i=Me(i.times(e),u),n=n.times(++d),l=a.plus(qr(i,n,u)),Sr(l.d).slice(0,u)===Sr(a.d).slice(0,u)){for(;m--;)a=Me(a.times(a),u);return h.precision=f,t==null?(Ze=!0,Me(a,f)):a}a=l}}function rt(e){for(var t=e.e*Fe,n=e.d[0];n>=10;n/=10)t++;return t}function wm(e,t,n){if(t>e.LN10.sd())throw Ze=!0,n&&(e.precision=n),Error(Gn+"LN10 precision limit exceeded");return Me(new e(e.LN10),t)}function gi(e){for(var t="";e--;)t+="0";return t}function Pl(e,t){var n,r,i,a,l,u,d,m,h,f=1,g=10,y=e,j=y.d,w=y.constructor,P=w.precision;if(y.s<1)throw Error(Gn+(y.s?"NaN":"-Infinity"));if(y.eq(vn))return new w(0);if(t==null?(Ze=!1,m=P):m=t,y.eq(10))return t==null&&(Ze=!0),wm(w,m);if(m+=g,w.precision=m,n=Sr(j),r=n.charAt(0),a=rt(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(e),n=Sr(y.d),r=n.charAt(0),f++;a=rt(y),r>1?(y=new w("0."+n),a++):y=new w(r+"."+n.slice(1))}else return d=wm(w,m+2,P).times(a+""),y=Pl(new w(r+"."+n.slice(1)),m-g).plus(d),w.precision=P,t==null?(Ze=!0,Me(y,P)):y;for(u=l=y=qr(y.minus(vn),y.plus(vn),m),h=Me(y.times(y),m),i=3;;){if(l=Me(l.times(h),m),d=u.plus(qr(l,new w(i),m)),Sr(d.d).slice(0,m)===Sr(u.d).slice(0,m))return u=u.times(2),a!==0&&(u=u.plus(wm(w,m+2,P).times(a+""))),u=qr(u,new w(f),m),w.precision=P,t==null?(Ze=!0,Me(u,P)):u;u=d,i+=2}}function yw(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Ys(n/Fe),e.d=[],r=(n+1)%Fe,n<0&&(r+=Fe),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Fe;r<i;)e.d.push(+t.slice(r,r+=Fe));t=t.slice(r),r=Fe-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Ze&&(e.e>xd||e.e<-xd))throw Error(C0+n)}else e.s=0,e.e=0,e.d=[0];return e}function Me(e,t,n){var r,i,a,l,u,d,m,h,f=e.d;for(l=1,a=f[0];a>=10;a/=10)l++;if(r=t-l,r<0)r+=Fe,i=t,m=f[h=0];else{if(h=Math.ceil((r+1)/Fe),a=f.length,h>=a)return e;for(m=a=f[h],l=1;a>=10;a/=10)l++;r%=Fe,i=r-Fe+l}if(n!==void 0&&(a=na(10,l-i-1),u=m/a%10|0,d=t<0||f[h+1]!==void 0||m%a,d=n<4?(u||d)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||d||n==6&&(r>0?i>0?m/na(10,l-i):0:f[h-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return d?(a=rt(e),f.length=1,t=t-a-1,f[0]=na(10,(Fe-t%Fe)%Fe),e.e=Ys(-t/Fe)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=h,a=1,h--):(f.length=h+1,a=na(10,Fe-r),f[h]=i>0?(m/na(10,l-i)%na(10,i)|0)*a:0),d)for(;;)if(h==0){(f[0]+=a)==mt&&(f[0]=1,++e.e);break}else{if(f[h]+=a,f[h]!=mt)break;f[h--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(Ze&&(e.e>xd||e.e<-xd))throw Error(C0+rt(e));return e}function xP(e,t){var n,r,i,a,l,u,d,m,h,f,g=e.constructor,y=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),Ze?Me(t,y):t;if(d=e.d,f=t.d,r=t.e,m=e.e,d=d.slice(),l=m-r,l){for(h=l<0,h?(n=d,l=-l,u=f.length):(n=f,r=m,u=d.length),i=Math.max(Math.ceil(y/Fe),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=d.length,u=f.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(d[i]!=f[i]){h=d[i]<f[i];break}l=0}for(h&&(n=d,d=f,f=n,t.s=-t.s),u=d.length,i=f.length-u;i>0;--i)d[u++]=0;for(i=f.length;i>l;){if(d[--i]<f[i]){for(a=i;a&&d[--a]===0;)d[a]=mt-1;--d[a],d[i]+=mt}d[i]-=f[i]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(t.d=d,t.e=r,Ze?Me(t,y):t):new g(0)}function Ca(e,t,n){var r,i=rt(e),a=Sr(e.d),l=a.length;return t?(n&&(r=n-l)>0?a=a.charAt(0)+"."+a.slice(1)+gi(r):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+gi(-i-1)+a,n&&(r=n-l)>0&&(a+=gi(r))):i>=l?(a+=gi(i+1-l),n&&(r=n-i-1)>0&&(a=a+"."+gi(r))):((r=i+1)<l&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(a+="."),a+=gi(r))),e.s<0?"-"+a:a}function xw(e,t){if(e.length>t)return e.length=t,!0}function bP(e){var t,n,r;function i(a){var l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,a instanceof i){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(xa+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return yw(l,a.toString())}else if(typeof a!="string")throw Error(xa+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,t8.test(a))yw(l,a);else throw Error(xa+a)}if(i.prototype=le,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=bP,i.config=i.set=n8,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function n8(e){if(!e||typeof e!="object")throw Error(Gn+"Object expected");var t,n,r,i=["precision",1,Gs,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Ys(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(xa+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(xa+n+": "+r);return this}var E0=bP(e8);vn=new E0(1);const Ce=E0;var r8=e=>e,_P={"@@functional/placeholder":!0},wP=e=>e===_P,bw=e=>function t(){return arguments.length===0||arguments.length===1&&wP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},jP=(e,t)=>e===1?t:bw(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(l=>l!==_P).length;return a>=e?t(...r):jP(e-a,bw(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=r.map(h=>wP(h)?u.shift():h);return t(...m,...u)}))}),Lf=e=>jP(e.length,e),sg=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},i8=Lf((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),a8=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return r8;var i=n.reverse(),a=i[0],l=i.slice(1);return function(){return l.reduce((u,d)=>d(u),a(...arguments))}},og=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),NP=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t&&i.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=i,n=e(...i)),n}};function SP(e){var t;return e===0?t=1:t=Math.floor(new Ce(e).abs().log(10).toNumber())+1,t}function PP(e,t,n){for(var r=new Ce(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}Lf((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Lf((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Lf((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var kP=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},CP=(e,t,n)=>{if(e.lte(0))return new Ce(0);var r=SP(e.toNumber()),i=new Ce(10).pow(r),a=e.div(i),l=r!==1?.05:.1,u=new Ce(Math.ceil(a.div(l).toNumber())).add(n).mul(l),d=u.mul(i);return t?new Ce(d.toNumber()):new Ce(Math.ceil(d.toNumber()))},s8=(e,t,n)=>{var r=new Ce(1),i=new Ce(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new Ce(10).pow(SP(e)-1),i=new Ce(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Ce(Math.floor(e)))}else e===0?i=new Ce(Math.floor((t-1)/2)):n||(i=new Ce(Math.floor(e)));var l=Math.floor((t-1)/2),u=a8(i8(d=>i.add(new Ce(d-l).mul(r)).toNumber()),sg);return u(0,t)},EP=function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new Ce(0),tickMin:new Ce(0),tickMax:new Ce(0)};var l=CP(new Ce(n).sub(t).div(r-1),i,a),u;t<=0&&n>=0?u=new Ce(0):(u=new Ce(t).add(n).div(2),u=u.sub(new Ce(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new Ce(n).sub(u).div(l).toNumber()),h=d+m+1;return h>r?EP(t,n,r,i,a+1):(h<r&&(m=n>0?m+(r-h):m,d=n>0?d:d+(r-h)),{step:l,tickMin:u.sub(new Ce(d).mul(l)),tickMax:u.add(new Ce(m).mul(l))})};function o8(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[l,u]=kP([t,n]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...sg(0,r-1).map(()=>1/0)]:[...sg(0,r-1).map(()=>-1/0),u];return t>n?og(d):d}if(l===u)return s8(l,r,i);var{step:m,tickMin:h,tickMax:f}=EP(l,u,a,i,0),g=PP(h,f.add(new Ce(.1).mul(m)),m);return t>n?og(g):g}function l8(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=kP([n,r]);if(a===-1/0||l===1/0)return[n,r];if(a===l)return[a];var u=Math.max(t,2),d=CP(new Ce(l).sub(a).div(u-1),i,0),m=[...PP(new Ce(a),new Ce(l),d),l];return i===!1&&(m=m.map(h=>Math.round(h))),n>r?og(m):m}var c8=NP(o8),u8=NP(l8),OP=e=>e.rootProps.maxBarSize,d8=e=>e.rootProps.barGap,TP=e=>e.rootProps.barCategoryGap,f8=e=>e.rootProps.barSize,Df=e=>e.rootProps.stackOffset,O0=e=>e.options.chartName,T0=e=>e.rootProps.syncId,AP=e=>e.rootProps.syncMethod,A0=e=>e.options.eventEmitter,zr={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},pn={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},If=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},h8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:zr.angleAxisId,includeHidden:!1,name:void 0,reversed:zr.reversed,scale:zr.scale,tick:zr.tick,tickCount:void 0,ticks:void 0,type:zr.type,unit:void 0},m8={allowDataOverflow:pn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:pn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:pn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:pn.scale,tick:pn.tick,tickCount:pn.tickCount,ticks:void 0,type:pn.type,unit:void 0},p8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:zr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zr.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zr.scale,tick:zr.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},g8={allowDataOverflow:pn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:pn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:pn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:pn.scale,tick:pn.tick,tickCount:pn.tickCount,ticks:void 0,type:"category",unit:void 0},M0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?p8:h8,L0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?g8:m8,Rf=e=>e.polarOptions,D0=q([ai,si,yt],fD),MP=q([Rf,D0],(e,t)=>{if(e!=null)return pr(e.innerRadius,t,0)}),LP=q([Rf,D0],(e,t)=>{if(e!=null)return pr(e.outerRadius,t,t*.8)}),v8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},DP=q([Rf],v8);q([M0,DP],If);var IP=q([D0,MP,LP],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});q([L0,IP],If);var RP=q([Oe,Rf,MP,LP,ai,si],(e,t,n,r,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:pr(l,i,i/2),cy:pr(u,a,a/2),innerRadius:n,outerRadius:r,startAngle:d,endAngle:m,clockWise:!1}}}),st=(e,t)=>t,zf=(e,t,n)=>n;function I0(e){return e==null?void 0:e.id}var dt=e=>{var t=Oe(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Xs=e=>e.tooltip.settings.axisId,bt=e=>{var t=dt(e),n=Xs(e);return Vl(e,t,n)},zP=q([bt],e=>e==null?void 0:e.dataKey);function $P(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=n,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:r;if(!(m==null||m.length===0)){var h=I0(u);m.forEach((f,g)=>{var y=a==null||i?g:String(qt(f,a,null)),j=qt(f,u.dataKey,0),w;l.has(y)?w=l.get(y):w={},Object.assign(w,{[h]:j}),l.set(y,w)})}}),Array.from(l.values())}function $f(e){return e.stackId!=null&&e.dataKey!=null}function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_w(Object(n),!0).forEach(function(r){y8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y8(e,t,n){return(t=x8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x8(e){var t=b8(e,"string");return typeof t=="symbol"?t:t+""}function b8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lg=[0,"auto"],dn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},BP=(e,t)=>e.cartesianAxis.xAxis[t],li=(e,t)=>{var n=BP(e,t);return n??dn},fn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:lg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Fl},FP=(e,t)=>e.cartesianAxis.yAxis[t],ci=(e,t)=>{var n=FP(e,t);return n??fn},_8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},R0=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??_8},un=(e,t,n)=>{switch(t){case"xAxis":return li(e,n);case"yAxis":return ci(e,n);case"zAxis":return R0(e,n);case"angleAxis":return M0(e,n);case"radiusAxis":return L0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},w8=(e,t,n)=>{switch(t){case"xAxis":return li(e,n);case"yAxis":return ci(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Vl=(e,t,n)=>{switch(t){case"xAxis":return li(e,n);case"yAxis":return ci(e,n);case"angleAxis":return M0(e,n);case"radiusAxis":return L0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},UP=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function HP(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var z0=e=>e.graphicalItems.cartesianItems,j8=q([st,zf],HP),ZP=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),Kl=q([z0,un,j8],ZP),WP=q([Kl],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter($f)),VP=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),KP=q([Kl],VP),qP=e=>e.map(t=>t.data).filter(Boolean).flat(1),N8=q([Kl],qP),GP=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},$0=q([N8,k0],GP),YP=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:qt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:qt(i,r)}))):e.map(r=>({value:r})),Bf=q([$0,un,Kl],YP);function XP(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ia(e){return e.filter(t=>Er(t)||t instanceof Date).map(Number).filter(t=>jn(t)===!1)}function S8(e,t,n){return!n||typeof t!="number"||jn(t)?[]:n.length?Ia(n.flatMap(r=>{var i=qt(e,r.dataKey),a,l;if(Array.isArray(i)?[a,l]=i:a=l=i,!(!Sn(a)||!Sn(l)))return[t-a,t+l]})):[]}var P8=q([WP,k0,bt],$P),QP=(e,t,n)=>{var r={},i=t.reduce((a,l)=>(l.stackId==null||(a[l.stackId]==null&&(a[l.stackId]=[]),a[l.stackId].push(l)),a),r);return Object.fromEntries(Object.entries(i).map(a=>{var[l,u]=a,d=u.map(I0);return[l,{stackedData:CD(e,d,n),graphicalItems:u}]}))},cg=q([P8,WP,Df],QP),JP=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var a=MD(e,r,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},k8=q([cg,Hi,st],JP),ek=(e,t,n,r,i)=>n.length>0?e.flatMap(a=>n.flatMap(l=>{var u,d,m=(u=r[l.id])===null||u===void 0?void 0:u.filter(f=>XP(i,f)),h=qt(a,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey);return{value:h,errorDomain:S8(a,h,m)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:qt(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),Ff=e=>e.errorBars,tk=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>XP(n,r));q([KP,Ff,st],tk);var C8=q([$0,un,KP,Ff,st],ek);function E8(e){var{value:t}=e;if(Er(t)||t instanceof Date)return t}var ww=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Ia(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},O8=(e,t,n)=>{var r=e.map(E8).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&Y2(r))?DS(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},B0=e=>{var t;if(e==null||!("domain"in e))return lg;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Ia(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:lg},_d=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),l=Math.min(...a),u=Math.max(...a);return[l,u]}},nk=e=>e.referenceElements.dots,Qs=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),T8=q([nk,st,zf],Qs),rk=e=>e.referenceElements.areas,A8=q([rk,st,zf],Qs),ik=e=>e.referenceElements.lines,M8=q([ik,st,zf],Qs),ak=(e,t)=>{var n=Ia(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},L8=q(T8,st,ak),sk=(e,t)=>{var n=Ia(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},D8=q([A8,st],sk),ok=(e,t)=>{var n=Ia(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},I8=q(M8,st,ok),R8=q(L8,I8,D8,(e,t,n)=>_d(e,n,t)),z8=q([un],B0),lk=(e,t,n,r,i,a,l)=>{var u=QR(t,e.allowDataOverflow);if(u!=null)return u;var d=a==="vertical"&&l==="xAxis"||a==="horizontal"&&l==="yAxis",m=d?_d(n,i,ww(r)):_d(i,ww(r));return JR(t,m,e.allowDataOverflow)},$8=q([un,z8,k8,C8,R8,Oe,st],lk),B8=[0,1],ck=(e,t,n,r,i,a,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Ma(t,a);return m&&u==null?DS(0,n.length):d==="category"?O8(r,e,m):i==="expand"?B8:l}},F0=q([un,Oe,$0,Bf,Df,st,$8],ck),uk=(e,t,n,r,i)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var u="scale".concat(zl(a));return u in Bo?u:"point"}}},ql=q([un,Oe,UP,O0,st],uk);function F8(e){if(e!=null){if(e in Bo)return Bo[e]();var t="scale".concat(zl(e));if(t in Bo)return Bo[t]()}}function U0(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=F8(t);if(i!=null){var a=i.domain(n).range(r);return jD(a),a}}}var dk=(e,t,n)=>{var r=B0(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Rs(e))return c8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Rs(e))return u8(e,t.tickCount,t.allowDecimals)}},H0=q([F0,Vl,ql],dk),fk=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Rs(t)&&Array.isArray(n)&&n.length>0){var i=t[0],a=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,a),Math.max(l,u)]}return t},U8=q([un,F0,H0,st],fk),H8=q(Bf,un,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Ia(e.map(u=>u.value))).sort((u,d)=>u-d);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var l=r[a+1]-r[a];n=Math.min(n,l)}return n/i}}),hk=q(H8,Oe,TP,yt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Sn(e))return 0;var a=t==="vertical"?r.height:r.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var l=pr(n,e*a),u=e*a/2;return u-l-(u-l)/a*l}return 0}),Z8=(e,t)=>{var n=li(e,t);return n==null||typeof n.padding!="string"?0:hk(e,"xAxis",t,n.padding)},W8=(e,t)=>{var n=ci(e,t);return n==null||typeof n.padding!="string"?0:hk(e,"yAxis",t,n.padding)},V8=q(li,Z8,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),K8=q(ci,W8,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),q8=q([yt,V8,Pf,Sf,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),G8=q([yt,Oe,K8,Pf,Sf,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:l}=i;return a?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Gl=(e,t,n,r)=>{var i;switch(t){case"xAxis":return q8(e,n,r);case"yAxis":return G8(e,n,r);case"zAxis":return(i=R0(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return DP(e);case"radiusAxis":return IP(e,n);default:return}},mk=q([un,Gl],If),Js=q([un,ql,U8,mk],U0);q([Kl,Ff,st],tk);function pk(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Uf=(e,t)=>t,Hf=(e,t,n)=>n,Y8=q(jf,Uf,Hf,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(pk)),X8=q(Nf,Uf,Hf,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(pk)),gk=(e,t)=>({width:e.width,height:t.height}),Q8=(e,t)=>{var n=typeof t.width=="number"?t.width:Fl;return{width:n,height:e.height}},vk=q(yt,li,gk),J8=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},ez=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},tz=q(si,yt,Y8,Uf,Hf,(e,t,n,r,i)=>{var a={},l;return n.forEach(u=>{var d=gk(t,u);l==null&&(l=J8(t,r,e));var m=r==="top"&&!i||r==="bottom"&&i;a[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),a}),nz=q(ai,yt,X8,Uf,Hf,(e,t,n,r,i)=>{var a={},l;return n.forEach(u=>{var d=Q8(t,u);l==null&&(l=ez(t,r,e));var m=r==="left"&&!i||r==="right"&&i;a[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),a}),rz=(e,t)=>{var n=li(e,t);if(n!=null)return tz(e,n.orientation,n.mirror)},iz=q([yt,li,rz,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),az=(e,t)=>{var n=ci(e,t);if(n!=null)return nz(e,n.orientation,n.mirror)},sz=q([yt,ci,az,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),yk=q(yt,ci,(e,t)=>{var n=typeof t.width=="number"?t.width:Fl;return{width:n,height:e.height}}),jw=(e,t,n)=>{switch(t){case"xAxis":return vk(e,n).width;case"yAxis":return yk(e,n).height;default:return}},xk=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:l}=n,u=Ma(e,r),d=t.map(m=>m.value);if(l&&u&&a==="category"&&i&&Y2(d))return d}},Z0=q([Oe,Bf,un,st],xk),bk=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,l=Ma(e,r);if(l&&(i==="number"||a!=="auto"))return t.map(u=>u.value)}},W0=q([Oe,Bf,Vl,st],bk),Nw=q([Oe,w8,ql,Js,Z0,W0,Gl,H0,st],(e,t,n,r,i,a,l,u,d)=>{if(t==null)return null;var m=Ma(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:a,duplicateDomain:i,isCategorical:m,niceTicks:u,range:l,realScaleType:n,scale:r}}),oz=(e,t,n,r,i,a,l,u,d)=>{if(!(t==null||r==null)){var m=Ma(e,d),{type:h,ticks:f,tickCount:g}=t,y=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,j=h==="category"&&r.bandwidth?r.bandwidth()/y:0;j=d==="angleAxis"&&a!=null&&a.length>=2?rn(a[0]-a[1])*2*j:j;var w=f||i;if(w){var P=w.map((b,N)=>{var _=l?l.indexOf(b):b;return{index:N,coordinate:r(_)+j,value:b,offset:j}});return P.filter(b=>!jn(b.coordinate))}return m&&u?u.map((b,N)=>({coordinate:r(b)+j,value:b,index:N,offset:j})):r.ticks?r.ticks(g).map(b=>({coordinate:r(b)+j,value:b,offset:j})):r.domain().map((b,N)=>({coordinate:r(b)+j,value:l?l[b]:b,index:N,offset:j}))}},_k=q([Oe,Vl,ql,Js,H0,Gl,Z0,W0,st],oz),lz=(e,t,n,r,i,a,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Ma(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(r==null?void 0:r.length)>=2?rn(r[0]-r[1])*2*m:m,u&&a?a.map((h,f)=>({coordinate:n(h)+m,value:h,index:f,offset:m})):n.ticks?n.ticks(d).map(h=>({coordinate:n(h)+m,value:h,offset:m})):n.domain().map((h,f)=>({coordinate:n(h)+m,value:i?i[h]:h,index:f,offset:m}))}},zs=q([Oe,Vl,Js,Gl,Z0,W0,st],lz),$s=q(un,Js,(e,t)=>{if(!(e==null||t==null))return bd(bd({},e),{},{scale:t})}),cz=q([un,ql,F0,mk],U0);q((e,t,n)=>R0(e,n),cz,(e,t)=>{if(!(e==null||t==null))return bd(bd({},e),{},{scale:t})});var uz=q([Oe,jf,Nf],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),wk=e=>e.options.defaultTooltipEventType,jk=e=>e.options.validateTooltipEventTypes;function Nk(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function V0(e,t){var n=wk(e),r=jk(e);return Nk(t,n,r)}function dz(e){return ue(t=>V0(t,e))}var Sk=(e,t)=>{var n,r=Number(t);if(!(jn(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},fz=e=>e.tooltip.settings,_i={active:!1,index:null,dataKey:void 0,coordinate:void 0},hz={itemInteraction:{click:_i,hover:_i},axisInteraction:{click:_i,hover:_i},keyboardInteraction:_i,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Pk=Cn({name:"tooltip",initialState:hz,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Kr(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:mz,removeTooltipEntrySettings:pz,setTooltipSettingsState:gz,setActiveMouseOverItemIndex:kk,mouseLeaveItem:vz,mouseLeaveChart:Ck,setActiveClickItemIndex:yz,setMouseOverAxisIndex:Ek,setMouseClickAxisIndex:xz,setSyncInteraction:ug,setKeyboardInteraction:dg}=Pk.actions,bz=Pk.reducer;function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(n),!0).forEach(function(r){_z(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _z(e,t,n){return(t=wz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wz(e){var t=jz(e,"string");return typeof t=="symbol"?t:t+""}function jz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nz(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Sz(e){return e.index!=null}var Ok=(e,t,n,r)=>{if(t==null)return _i;var i=Nz(e,t,n);if(i==null)return _i;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Sz(i)){if(a)return Yc(Yc({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Yc(Yc({},_i),{},{coordinate:i.coordinate})},K0=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!Sn(r))return n;var i=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(i,Math.min(r,a)))},Tk=(e,t,n,r,i,a,l,u)=>{if(!(a==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,a);if(m!=null)return m;var h=i==null?void 0:i[Number(a)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},Ak=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.dataKey)===i})},Yl=e=>e.options.tooltipPayloadSearcher,eo=e=>e.tooltip;function Pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pw(Object(n),!0).forEach(function(r){Pz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pz(e,t,n){return(t=kz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kz(e){var t=Cz(e,"string");return typeof t=="symbol"?t:t+""}function Cz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ez(e,t){return e??t}var Mk=(e,t,n,r,i,a,l)=>{if(!(t==null||a==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:h}=n,f=[];return e.reduce((g,y)=>{var j,{dataDefinedOnItem:w,settings:P}=y,b=Ez(w,u),N=Array.isArray(b)?gS(b,m,h):b,_=(j=P==null?void 0:P.dataKey)!==null&&j!==void 0?j:r,k=P==null?void 0:P.nameKey,C;if(r&&Array.isArray(N)&&!Array.isArray(N[0])&&l==="axis"?C=x3(N,r,i):C=a(N,t,d,k),Array.isArray(C))C.forEach(O=>{var I=kw(kw({},P),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});g.push(h_({tooltipEntrySettings:I,dataKey:O.dataKey,payload:O.payload,value:qt(O.payload,O.dataKey),name:O.name}))});else{var A;g.push(h_({tooltipEntrySettings:P,dataKey:_,payload:C,value:qt(C,_),name:(A=qt(C,k))!==null&&A!==void 0?A:P==null?void 0:P.name}))}return g},f)}},q0=q([bt,Oe,UP,O0,dt],uk),Oz=q([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Tz=q([dt,Xs],HP),Xl=q([Oz,bt,Tz],ZP),Az=q([Xl],e=>e.filter($f)),Mz=q([Xl],qP),to=q([Mz,Hi],GP),Lz=q([Az,Hi,bt],$P),G0=q([to,bt,Xl],YP),Dz=q([bt],B0),Iz=q([Xl],e=>e.filter($f)),Rz=q([Lz,Iz,Df],QP),zz=q([Rz,Hi,dt],JP),$z=q([Xl],VP),Bz=q([to,bt,$z,Ff,dt],ek),Fz=q([nk,dt,Xs],Qs),Uz=q([Fz,dt],ak),Hz=q([rk,dt,Xs],Qs),Zz=q([Hz,dt],sk),Wz=q([ik,dt,Xs],Qs),Vz=q([Wz,dt],ok),Kz=q([Uz,Vz,Zz],_d),qz=q([bt,Dz,zz,Bz,Kz,Oe,dt],lk),Lk=q([bt,Oe,to,G0,Df,dt,qz],ck),Gz=q([Lk,bt,q0],dk),Yz=q([bt,Lk,Gz,dt],fk),Dk=e=>{var t=dt(e),n=Xs(e),r=!1;return Gl(e,t,n,r)},Ik=q([bt,Dk],If),Rk=q([bt,q0,Yz,Ik],U0),Xz=q([Oe,G0,bt,dt],xk),Qz=q([Oe,G0,bt,dt],bk),Jz=(e,t,n,r,i,a,l,u)=>{if(t){var{type:d}=t,m=Ma(e,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=d==="category"&&r.bandwidth?r.bandwidth()/h:0;return f=u==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?rn(i[0]-i[1])*2*f:f,m&&l?l.map((g,y)=>({coordinate:r(g)+f,value:g,index:y,offset:f})):r.domain().map((g,y)=>({coordinate:r(g)+f,value:a?a[g]:g,index:y,offset:f}))}}},ui=q([Oe,bt,q0,Rk,Dk,Xz,Qz,dt],Jz),Y0=q([wk,jk,fz],(e,t,n)=>Nk(n.shared,e,t)),zk=e=>e.tooltip.settings.trigger,X0=e=>e.tooltip.settings.defaultIndex,Zf=q([eo,Y0,zk,X0],Ok),Bs=q([Zf,to],K0),$k=q([ui,Bs],Sk),Bk=q([Zf],e=>{if(e)return e.dataKey}),Fk=q([eo,Y0,zk,X0],Ak),e7=q([ai,si,Oe,yt,ui,X0,Fk,Yl],Tk),t7=q([Zf,e7],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),n7=q([Zf],e=>e.active),r7=q([Fk,Bs,Hi,zP,$k,Yl,Y0],Mk);q([r7],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ew(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cw(Object(n),!0).forEach(function(r){i7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i7(e,t,n){return(t=a7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a7(e){var t=s7(e,"string");return typeof t=="symbol"?t:t+""}function s7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o7=()=>ue(bt),l7=()=>{var e=o7(),t=ue(ui),n=ue(Rk);return Gv(Ew(Ew({},e),{},{scale:n}),t)},c7=()=>ue(O0),Q0=(e,t)=>t,Uk=(e,t,n)=>n,J0=(e,t,n,r)=>r,u7=q(ui,e=>vf(e,t=>t.coordinate)),ey=q([eo,Q0,Uk,J0],Ok),Hk=q([ey,to],K0),d7=(e,t,n)=>{if(t!=null){var r=eo(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Zk=q([eo,Q0,Uk,J0],Ak),wd=q([ai,si,Oe,yt,ui,J0,Zk,Yl],Tk),f7=q([ey,wd],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),Wk=q(ui,Hk,Sk),h7=q([Zk,Hk,Hi,zP,Wk,Yl,Q0],Mk),m7=q([ey],e=>({isActive:e.active,activeIndex:e.index})),p7=(e,t,n,r,i,a,l,u)=>{if(!(!e||!t||!r||!i||!a)){var d=LD(e.chartX,e.chartY,t,n,u);if(d){var m=ID(d,t),h=_D(m,l,a,r,i),f=DD(t,a,h,d);return{activeIndex:String(h),activeCoordinate:f}}}};function fg(){return fg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fg.apply(null,arguments)}function Ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ow(Object(n),!0).forEach(function(r){g7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ow(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g7(e,t,n){return(t=v7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v7(e){var t=y7(e,"string");return typeof t=="symbol"?t:t+""}function y7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x7(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:a,layout:l,cursor:u,tooltipEventType:d,chartName:m}=e,h=t,f=n,g=r;if(!u||!h||m!=="ScatterChart"&&d!=="axis")return null;var y,j;if(m==="ScatterChart")y=h,j=FI;else if(m==="BarChart")y=UI(l,h,i,a),j=CS;else if(l==="radial"){var{cx:w,cy:P,radius:b,startAngle:N,endAngle:_}=ES(h);y={cx:w,cy:P,startAngle:N,endAngle:_,innerRadius:b,outerRadius:b},j=TS}else y={points:_5(l,h,i)},j=AI;var k=typeof u=="object"&&"className"in u?u.className:void 0,C=Xc(Xc(Xc(Xc({stroke:"#ccc",pointerEvents:"none"},i),y),Ot(u,!1)),{},{payload:f,payloadIndex:g,className:$e("recharts-tooltip-cursor",k)});return x.isValidElement(u)?x.cloneElement(u,C):x.createElement(j,C)}function b7(e){var t=l7(),n=_S(),r=e0(),i=c7();return x.createElement(x7,fg({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var Vk=x.createContext(null),_7=()=>x.useContext(Vk),Kk={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(d,m,h){this.fn=d,this.context=m,this.once=h||!1}function a(d,m,h,f,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new i(h,f||d,g),j=n?n+m:m;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],y]:d._events[j].push(y):(d._events[j]=y,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new r:delete d._events[m]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],h,f;if(this._eventsCount===0)return m;for(f in h=this._events)t.call(h,f)&&m.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(h)):m},u.prototype.listeners=function(m){var h=n?n+m:m,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var g=0,y=f.length,j=new Array(y);g<y;g++)j[g]=f[g].fn;return j},u.prototype.listenerCount=function(m){var h=n?n+m:m,f=this._events[h];return f?f.fn?1:f.length:0},u.prototype.emit=function(m,h,f,g,y,j){var w=n?n+m:m;if(!this._events[w])return!1;var P=this._events[w],b=arguments.length,N,_;if(P.fn){switch(P.once&&this.removeListener(m,P.fn,void 0,!0),b){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,h),!0;case 3:return P.fn.call(P.context,h,f),!0;case 4:return P.fn.call(P.context,h,f,g),!0;case 5:return P.fn.call(P.context,h,f,g,y),!0;case 6:return P.fn.call(P.context,h,f,g,y,j),!0}for(_=1,N=new Array(b-1);_<b;_++)N[_-1]=arguments[_];P.fn.apply(P.context,N)}else{var k=P.length,C;for(_=0;_<k;_++)switch(P[_].once&&this.removeListener(m,P[_].fn,void 0,!0),b){case 1:P[_].fn.call(P[_].context);break;case 2:P[_].fn.call(P[_].context,h);break;case 3:P[_].fn.call(P[_].context,h,f);break;case 4:P[_].fn.call(P[_].context,h,f,g);break;default:if(!N)for(C=1,N=new Array(b-1);C<b;C++)N[C-1]=arguments[C];P[_].fn.apply(P[_].context,N)}}return!0},u.prototype.on=function(m,h,f){return a(this,m,h,f,!1)},u.prototype.once=function(m,h,f){return a(this,m,h,f,!0)},u.prototype.removeListener=function(m,h,f,g){var y=n?n+m:m;if(!this._events[y])return this;if(!h)return l(this,y),this;var j=this._events[y];if(j.fn)j.fn===h&&(!g||j.once)&&(!f||j.context===f)&&l(this,y);else{for(var w=0,P=[],b=j.length;w<b;w++)(j[w].fn!==h||g&&!j[w].once||f&&j[w].context!==f)&&P.push(j[w]);P.length?this._events[y]=P.length===1?P[0]:P:l(this,y)}return this},u.prototype.removeAllListeners=function(m){var h;return m?(h=n?n+m:m,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(Kk);var w7=Kk.exports;const j7=Tr(w7);var kl=new j7,hg="recharts.syncEvent.tooltip",Tw="recharts.syncEvent.brush";function N7(e,t){if(t){var n=Number.parseInt(t,10);if(!jn(n))return e==null?void 0:e[n]}}var S7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},qk=Cn({name:"options",initialState:S7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),P7=qk.reducer,{createEventEmitter:k7}=qk.actions;function C7(e){return e.tooltip.syncInteraction}var E7={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Gk=Cn({name:"chartData",initialState:E7,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:Aw,setDataStartEndIndexes:O7,setComputedData:EZ}=Gk.actions,T7=Gk.reducer,A7=["x","y"];function Mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mw(Object(n),!0).forEach(function(r){M7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M7(e,t,n){return(t=L7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L7(e){var t=D7(e,"string");return typeof t=="symbol"?t:t+""}function D7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I7(e,t){if(e==null)return{};var n,r,i=R7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function R7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Yk=()=>{};function z7(){var e=ue(T0),t=ue(A0),n=at(),r=ue(AP),i=ue(ui),a=e0(),l=Xv(),u=ue(d=>d.rootProps.className);x.useEffect(()=>{if(e==null)return Yk;var d=(m,h,f)=>{if(t!==f&&e===m){if(r==="index"){var g;if(l&&h!==null&&h!==void 0&&(g=h.payload)!==null&&g!==void 0&&g.coordinate){var y=h.payload.coordinate,{x:j,y:w}=y,P=I7(y,A7),b=Xi(Xi(Xi({},P),typeof j=="number"&&{x:Math.max(l.x,Math.min(j,l.x+l.width))}),typeof w=="number"&&{y:Math.max(l.y,Math.min(w,l.y+l.height))}),N=Xi(Xi({},h),{},{payload:Xi(Xi({},h.payload),{},{coordinate:b})});n(N)}else n(h);return}if(i!=null){var _;if(typeof r=="function"){var k={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},C=r(i,k);_=i[C]}else r==="value"&&(_=i.find(R=>String(R.value)===h.payload.label));var{coordinate:A}=h.payload;if(_==null||h.payload.active===!1||A==null||l==null){n(ug({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:O,y:I}=A,B=Math.min(O,l.x+l.width),D=Math.min(I,l.y+l.height),M={x:a==="horizontal"?_.coordinate:B,y:a==="horizontal"?D:_.coordinate},$=ug({active:h.payload.active,coordinate:M,dataKey:h.payload.dataKey,index:String(_.index),label:h.payload.label});n($)}}};return kl.on(hg,d),()=>{kl.off(hg,d)}},[u,n,t,e,r,i,a,l])}function $7(){var e=ue(T0),t=ue(A0),n=at();x.useEffect(()=>{if(e==null)return Yk;var r=(i,a,l)=>{t!==l&&e===i&&n(O7(a))};return kl.on(Tw,r),()=>{kl.off(Tw,r)}},[n,t,e])}function B7(){var e=at();x.useEffect(()=>{e(k7())},[e]),z7(),$7()}function F7(e,t,n,r,i,a){var l=ue(g=>d7(g,e,t)),u=ue(A0),d=ue(T0),m=ue(AP),h=ue(C7),f=h==null?void 0:h.active;x.useEffect(()=>{if(!f&&d!=null&&u!=null){var g=ug({active:a,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});kl.emit(hg,d,g,u)}},[f,n,l,i,r,u,d,m,a])}function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lw(Object(n),!0).forEach(function(r){U7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U7(e,t,n){return(t=H7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H7(e){var t=Z7(e,"string");return typeof t=="symbol"?t:t+""}function Z7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W7(e){return e.dataKey}function V7(e,t){return x.isValidElement(e)?x.cloneElement(e,t):typeof e=="function"?x.createElement(e,t):x.createElement(yI,t)}var Iw=[],K7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ks.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function q7(e){var t=Jn(e,K7),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:a,content:l,filterNull:u,isAnimationActive:d,offset:m,payloadUniqBy:h,position:f,reverseDirection:g,useTranslate3d:y,wrapperStyle:j,cursor:w,shared:P,trigger:b,defaultIndex:N,portal:_,axisId:k}=t,C=at(),A=typeof N=="number"?String(N):N;x.useEffect(()=>{C(gz({shared:P,trigger:b,axisId:k,active:n,defaultIndex:A}))},[C,P,b,k,n,A]);var O=Xv(),I=jS(),B=dz(P),{activeIndex:D,isActive:M}=ue(te=>m7(te,B,b,A)),$=ue(te=>h7(te,B,b,A)),R=ue(te=>Wk(te,B,b,A)),E=ue(te=>f7(te,B,b,A)),U=$,Z=_7(),K=n??M,[z,G]=WN([U,K]),Y=B==="axis"?R:void 0;F7(B,b,E,Y,D,K);var re=_??Z;if(re==null)return null;var ne=U??Iw;K||(ne=Iw),u&&ne.length&&(ne=MN(U.filter(te=>te.value!=null&&(te.hide!==!0||t.includeHidden)),h,W7));var H=ne.length>0,X=x.createElement(SI,{allowEscapeViewBox:r,animationDuration:i,animationEasing:a,isAnimationActive:d,active:K,coordinate:E,hasPayload:H,offset:m,position:f,reverseDirection:g,useTranslate3d:y,viewBox:O,wrapperStyle:j,lastBoundingBox:z,innerRef:G,hasPortalFromProps:!!_},V7(l,Dw(Dw({},t),{},{payload:ne,label:Y,active:K,coordinate:E,accessibilityLayer:I})));return x.createElement(x.Fragment,null,Gd.createPortal(X,re),K&&x.createElement(b7,{cursor:w,tooltipEventType:B,coordinate:E,payload:U,index:D}))}var Xk={},Qk={},Jk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:a}={}){let l,u=null;const d=a!=null&&a.includes("leading"),m=a==null||a.includes("trailing"),h=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},f=()=>{m&&h(),w()};let g=null;const y=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,f()},r)},j=()=>{g!==null&&(clearTimeout(g),g=null)},w=()=>{j(),l=void 0,u=null},P=()=>{h()},b=function(...N){if(i!=null&&i.aborted)return;l=this,u=N;const _=g==null;y(),d&&_&&h()};return b.schedule=y,b.cancel=w,b.flush=P,i==null||i.addEventListener("abort",w,{once:!0}),b}e.debounce=t})(Jk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jk;function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:u=!0,maxWait:d}=a,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let h,f=null;const g=t.debounce(function(...w){h=r.apply(this,w),f=null},i,{edges:m}),y=function(...w){return d!=null&&(f===null&&(f=Date.now()),Date.now()-f>=d)?(h=r.apply(this,w),f=Date.now(),g.cancel(),g.schedule(),h):(g.apply(this,w),h)},j=()=>(g.flush(),h);return y.cancel=g.cancel,y.flush=j,y}e.debounce=n})(Qk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qk;function n(r,i=0,a={}){const{leading:l=!0,trailing:u=!0}=a;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(Xk);var G7=Xk.throttle;const Y7=Tr(G7);var Xo=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function Rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rw(Object(n),!0).forEach(function(r){X7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X7(e,t,n){return(t=Q7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q7(e){var t=J7(e,"string");return typeof t=="symbol"?t:t+""}function J7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e$=x.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:h=0,id:f,className:g,onResize:y,style:j={}}=e,w=x.useRef(null),P=x.useRef();P.current=y,x.useImperativeHandle(t,()=>w.current);var[b,N]=x.useState({containerWidth:r.width,containerHeight:r.height}),_=x.useCallback((C,A)=>{N(O=>{var I=Math.round(C),B=Math.round(A);return O.containerWidth===I&&O.containerHeight===B?O:{containerWidth:I,containerHeight:B}})},[]);x.useEffect(()=>{var C=B=>{var D,{width:M,height:$}=B[0].contentRect;_(M,$),(D=P.current)===null||D===void 0||D.call(P,M,$)};h>0&&(C=Y7(C,h,{trailing:!0,leading:!1}));var A=new ResizeObserver(C),{width:O,height:I}=w.current.getBoundingClientRect();return _(O,I),A.observe(w.current),()=>{A.disconnect()}},[_,h]);var k=x.useMemo(()=>{var{containerWidth:C,containerHeight:A}=b;if(C<0||A<0)return null;Xo(la(i)||la(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),Xo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var O=la(i)?C:i,I=la(a)?A:a;return n&&n>0&&(O?I=O/n:I&&(O=I*n),d&&I>d&&(I=d)),Xo(O>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,I,i,a,l,u,n),x.Children.map(m,B=>x.cloneElement(B,{width:O,height:I,style:jm({width:O,height:I},B.props.style)}))},[n,m,a,d,u,l,b,i]);return x.createElement("div",{id:f?"".concat(f):void 0,className:$e("recharts-responsive-container",g),style:jm(jm({},j),{},{width:i,height:a,minWidth:l,minHeight:u,maxHeight:d}),ref:w},x.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),eC=e=>null;eC.displayName="Cell";function t$(e,t,n){return(t=n$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n$(e){var t=r$(e,"string");return typeof t=="symbol"?t:t+""}function r$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class i${constructor(t){t$(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function a$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zw(Object(n),!0).forEach(function(r){s$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s$(e,t,n){return(t=o$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o$(e){var t=l$(e,"string");return typeof t=="symbol"?t:t+""}function l$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c$={cacheSize:2e3,enableCache:!0},tC=a$({},c$),$w=new i$(tC.cacheSize),u$={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Bw="recharts_measurement_span";function d$(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(l,"|").concat(u)}var Fw=(e,t)=>{try{var n=document.getElementById(Bw);n||(n=document.createElement("span"),n.setAttribute("id",Bw),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,u$,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Qo=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ks.isSsr)return{width:0,height:0};if(!tC.enableCache)return Fw(t,n);var r=d$(t,n),i=$w.get(r);if(i)return i;var a=Fw(t,n);return $w.set(r,a),a},Uw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Hw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,f$=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,h$=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nC={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},m$=Object.keys(nC),ls="NaN";function p$(e,t){return e*nC[t]}class Jt{static parse(t){var n,[,r,i]=(n=h$.exec(t))!==null&&n!==void 0?n:[];return new Jt(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,jn(t)&&(this.unit=""),n!==""&&!f$.test(n)&&(this.num=NaN,this.unit=""),m$.includes(n)&&(this.num=p$(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Jt(NaN,""):new Jt(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Jt(NaN,""):new Jt(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Jt(NaN,""):new Jt(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Jt(NaN,""):new Jt(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return jn(this.num)}}function rC(e){if(e.includes(ls))return ls;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=(n=Uw.exec(t))!==null&&n!==void 0?n:[],l=Jt.parse(r??""),u=Jt.parse(a??""),d=i==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return ls;t=t.replace(Uw,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,h,f,g]=(m=Hw.exec(t))!==null&&m!==void 0?m:[],y=Jt.parse(h??""),j=Jt.parse(g??""),w=f==="+"?y.add(j):y.subtract(j);if(w.isNaN())return ls;t=t.replace(Hw,w.toString())}return t}var Zw=/\(([^()]*)\)/;function g$(e){for(var t=e,n;(n=Zw.exec(t))!=null;){var[,r]=n;t=t.replace(Zw,rC(r))}return t}function v$(e){var t=e.replace(/\s+/g,"");return t=g$(t),t=rC(t),t}function y$(e){try{return v$(e)}catch{return ls}}function Nm(e){var t=y$(e.slice(5,-1));return t===ls?"":t}var x$=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],b$=["dx","dy","angle","className","breakAll"];function mg(){return mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mg.apply(null,arguments)}function Ww(e,t){if(e==null)return{};var n,r,i=_$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iC=/[ \f\n\r\t\v\u2028\u2029]+/,aC=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];vt(t)||(n?i=t.toString().split(""):i=t.toString().split(iC));var a=i.map(u=>({word:u,width:Qo(u,r).width})),l=n?0:Qo("",r).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}},w$=(e,t,n,r,i)=>{var{maxLines:a,children:l,style:u,breakAll:d}=e,m=de(a),h=l,f=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce(($,R)=>{var{word:E,width:U}=R,Z=$[$.length-1];if(Z&&(r==null||i||Z.width+U+n<Number(r)))Z.words.push(E),Z.width+=U+n;else{var K={words:[E],width:U};$.push(K)}return $},[])},g=f(t),y=D=>D.reduce((M,$)=>M.width>$.width?M:$);if(!m||i)return g;var j=g.length>a||y(g).width>Number(r);if(!j)return g;for(var w="",P=D=>{var M=h.slice(0,D),$=aC({breakAll:d,style:u,children:M+w}).wordsWithComputedWidth,R=f($),E=R.length>a||y(R).width>Number(r);return[E,R]},b=0,N=h.length-1,_=0,k;b<=N&&_<=h.length-1;){var C=Math.floor((b+N)/2),A=C-1,[O,I]=P(A),[B]=P(C);if(!O&&!B&&(b=C+1),O&&B&&(N=C-1),!O&&B){k=I;break}_++}return k||g},Vw=e=>{var t=vt(e)?[]:e.toString().split(iC);return[{words:t}]},j$=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:l}=e;if((t||n)&&!Ks.isSsr){var u,d,m=aC({breakAll:a,children:r,style:i});if(m){var{wordsWithComputedWidth:h,spaceWidth:f}=m;u=h,d=f}else return Vw(r);return w$({breakAll:a,children:r,maxLines:l,style:i},u,d,t,n)}return Vw(r)},Kw="#808080",ty=x.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:d="end",fill:m=Kw}=e,h=Ww(e,x$),f=x.useMemo(()=>j$({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:y,angle:j,className:w,breakAll:P}=h,b=Ww(h,b$);if(!Er(n)||!Er(r)||f.length===0)return null;var N=n+(de(g)?g:0),_=r+(de(y)?y:0),k;switch(d){case"start":k=Nm("calc(".concat(a,")"));break;case"middle":k=Nm("calc(".concat((f.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:k=Nm("calc(".concat(f.length-1," * -").concat(i,")"));break}var C=[];if(l){var A=f[0].width,{width:O}=h;C.push("scale(".concat(de(O)?O/A:1,")"))}return j&&C.push("rotate(".concat(j,", ").concat(N,", ").concat(_,")")),C.length&&(b.transform=C.join(" ")),x.createElement("text",mg({},Ot(b,!0),{ref:t,x:N,y:_,className:$e("recharts-text",w),textAnchor:u,fill:m.includes("url")?Kw:m}),f.map((I,B)=>{var D=I.words.join(P?"":" ");return x.createElement("tspan",{x:N,dy:B===0?k:i,key:"".concat(D,"-").concat(B)},D)}))});ty.displayName="Text";var N$=["labelRef"];function S$(e,t){if(e==null)return{};var n,r,i=P$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qw(Object(n),!0).forEach(function(r){k$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k$(e,t,n){return(t=C$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C$(e){var t=E$(e,"string");return typeof t=="symbol"?t:t+""}function E$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $r(){return $r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$r.apply(null,arguments)}var sC=x.createContext(null),O$=e=>{var{x:t,y:n,width:r,height:i,children:a}=e,l=x.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return x.createElement(sC.Provider,{value:l},a)},oC=()=>{var e=x.useContext(sC),t=Xv();return e||t},T$=x.createContext(null),A$=()=>{var e=x.useContext(T$),t=ue(RP);return e||t},M$=e=>{var{value:t,formatter:n}=e,r=vt(e.children)?t:e.children;return typeof n=="function"?n(r):r},ny=e=>e!=null&&typeof e=="function",L$=(e,t)=>{var n=rn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},D$=(e,t,n,r,i)=>{var{offset:a,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:h,startAngle:f,endAngle:g,clockWise:y}=i,j=(m+h)/2,w=L$(f,g),P=w>=0?1:-1,b,N;switch(t){case"insideStart":b=f+P*a,N=y;break;case"insideEnd":b=g-P*a,N=!y;break;case"end":b=g+P*a,N=y;break;default:throw new Error("Unsupported position ".concat(t))}N=w<=0?N:!N;var _=Pt(u,d,j,b),k=Pt(u,d,j,b+(N?1:-1)*359),C="M".concat(_.x,",").concat(_.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(N?0:1,`,
    `).concat(k.x,",").concat(k.y),A=vt(e.id)?yl("recharts-radial-line-"):e.id;return x.createElement("text",$r({},r,{dominantBaseline:"central",className:$e("recharts-radial-bar-label",l)}),x.createElement("defs",null,x.createElement("path",{id:A,d:C})),x.createElement("textPath",{xlinkHref:"#".concat(A)},n))},I$=(e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(n==="outside"){var{x:h,y:f}=Pt(r,i,l+t,m);return{x:h,y:f,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+l)/2,{x:y,y:j}=Pt(r,i,g,m);return{x:y,y:j,textAnchor:"middle",verticalAnchor:"middle"}},lC=e=>"cx"in e&&de(e.cx),R$=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,a;n!=null&&!lC(n)&&(a=n);var{x:l,y:u,width:d,height:m}=t,h=m>=0?1:-1,f=h*r,g=h>0?"end":"start",y=h>0?"start":"end",j=d>=0?1:-1,w=j*r,P=j>0?"end":"start",b=j>0?"start":"end";if(i==="top"){var N={x:l+d/2,y:u-h*r,textAnchor:"middle",verticalAnchor:g};return Qe(Qe({},N),a?{height:Math.max(u-a.y,0),width:d}:{})}if(i==="bottom"){var _={x:l+d/2,y:u+m+f,textAnchor:"middle",verticalAnchor:y};return Qe(Qe({},_),a?{height:Math.max(a.y+a.height-(u+m),0),width:d}:{})}if(i==="left"){var k={x:l-w,y:u+m/2,textAnchor:P,verticalAnchor:"middle"};return Qe(Qe({},k),a?{width:Math.max(k.x-a.x,0),height:m}:{})}if(i==="right"){var C={x:l+d+w,y:u+m/2,textAnchor:b,verticalAnchor:"middle"};return Qe(Qe({},C),a?{width:Math.max(a.x+a.width-C.x,0),height:m}:{})}var A=a?{width:d,height:m}:{};return i==="insideLeft"?Qe({x:l+w,y:u+m/2,textAnchor:b,verticalAnchor:"middle"},A):i==="insideRight"?Qe({x:l+d-w,y:u+m/2,textAnchor:P,verticalAnchor:"middle"},A):i==="insideTop"?Qe({x:l+d/2,y:u+f,textAnchor:"middle",verticalAnchor:y},A):i==="insideBottom"?Qe({x:l+d/2,y:u+m-f,textAnchor:"middle",verticalAnchor:g},A):i==="insideTopLeft"?Qe({x:l+w,y:u+f,textAnchor:b,verticalAnchor:y},A):i==="insideTopRight"?Qe({x:l+d-w,y:u+f,textAnchor:P,verticalAnchor:y},A):i==="insideBottomLeft"?Qe({x:l+w,y:u+m-f,textAnchor:b,verticalAnchor:g},A):i==="insideBottomRight"?Qe({x:l+d-w,y:u+m-f,textAnchor:P,verticalAnchor:g},A):i&&typeof i=="object"&&(de(i.x)||la(i.x))&&(de(i.y)||la(i.y))?Qe({x:l+pr(i.x,d),y:u+pr(i.y,m),textAnchor:"end",verticalAnchor:"end"},A):Qe({x:l+d/2,y:u+m/2,textAnchor:"middle",verticalAnchor:"middle"},A)},z$={offset:5};function vi(e){var t=Jn(e,z$),{viewBox:n,position:r,value:i,children:a,content:l,className:u="",textBreakAll:d,labelRef:m}=t,h=A$(),f=oC(),g=r==="center"?f:h??f,y=n||g;if(!y||vt(i)&&vt(a)&&!x.isValidElement(l)&&typeof l!="function")return null;var j=Qe(Qe({},t),{},{viewBox:y});if(x.isValidElement(l)){var w=S$(j,N$);return x.cloneElement(l,w)}var P;if(typeof l=="function"){if(P=x.createElement(l,j),x.isValidElement(P))return P}else P=M$(t);var b=lC(y),N=Ot(t,!0);if(b&&(r==="insideStart"||r==="insideEnd"||r==="end"))return D$(t,r,P,N,y);var _=b?I$(y,t.offset,t.position):R$(t,y);return x.createElement(ty,$r({ref:m,className:$e("recharts-label",u)},N,_,{breakAll:d}),P)}vi.displayName="Label";var $$=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?x.createElement(vi,$r({key:"label-implicit"},r)):Er(e)?x.createElement(vi,$r({key:"label-implicit",value:e},r)):x.isValidElement(e)?e.type===vi?x.cloneElement(e,Qe({key:"label-implicit"},r)):x.createElement(vi,$r({key:"label-implicit",content:e},r)):ny(e)?x.createElement(vi,$r({key:"label-implicit",content:e},r)):e&&typeof e=="object"?x.createElement(vi,$r({},e,{key:"label-implicit"},r)):null};function B$(e){var{label:t}=e,n=oC();return $$(t,n)||null}var cC={},uC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(uC);var dC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(dC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uC,n=dC,r=pf;function i(a){if(r.isArrayLike(a))return t.last(n.toArray(a))}e.last=i})(cC);var F$=cC.last;const U$=Tr(F$);var H$=["valueAccessor"],Z$=["dataKey","clockWise","id","textBreakAll"];function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jd.apply(null,arguments)}function Gw(e,t){if(e==null)return{};var n,r,i=W$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var V$=e=>Array.isArray(e.value)?U$(e.value):e.value,fC=x.createContext(void 0),K$=fC.Provider,hC=x.createContext(void 0);hC.Provider;function q$(){return x.useContext(fC)}function G$(){return x.useContext(hC)}function mu(e){var{valueAccessor:t=V$}=e,n=Gw(e,H$),{dataKey:r,clockWise:i,id:a,textBreakAll:l}=n,u=Gw(n,Z$),d=q$(),m=G$(),h=d||m;return!h||!h.length?null:x.createElement(Ii,{className:"recharts-label-list"},h.map((f,g)=>{var y,j=vt(r)?t(f,g):qt(f&&f.payload,r),w=vt(a)?{}:{id:"".concat(a,"-").concat(g)};return x.createElement(vi,jd({},Ot(f,!0),u,w,{fill:(y=n.fill)!==null&&y!==void 0?y:f.fill,parentViewBox:f.parentViewBox,value:j,textBreakAll:l,viewBox:f.viewBox,key:"label-".concat(g),index:g}))}))}mu.displayName="LabelList";function Y$(e){var{label:t}=e;return t?t===!0?x.createElement(mu,{key:"labelList-implicit"}):x.isValidElement(t)||ny(t)?x.createElement(mu,{key:"labelList-implicit",content:t}):typeof t=="object"?x.createElement(mu,jd({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var X$={radiusAxis:{},angleAxis:{}},Q$=Cn({name:"polarAxis",initialState:X$,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),J$=Q$.reducer,mC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${a}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(mC);var eB=mC.isPlainObject;const tB=Tr(eB);function Yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yw(Object(n),!0).forEach(function(r){nB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nB(e,t,n){return(t=rB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rB(e){var t=iB(e,"string");return typeof t=="symbol"?t:t+""}function iB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nd.apply(null,arguments)}var Qw=(e,t,n,r,i)=>{var a=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-a/2,",").concat(t+i),l+="L ".concat(e+n-a/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},aB={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sB=e=>{var t=Jn(e,aB),{x:n,y:r,upperWidth:i,lowerWidth:a,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:h,isUpdateAnimationActive:f}=t,g=x.useRef(),[y,j]=x.useState(-1),w=x.useRef(i),P=x.useRef(a),b=x.useRef(l),N=x.useRef(n),_=x.useRef(r),k=r0(e,"trapezoid-");if(x.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var E=g.current.getTotalLength();E&&j(E)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||l!==+l||i===0&&a===0||l===0)return null;var C=$e("recharts-trapezoid",u);if(!f)return x.createElement("g",null,x.createElement("path",Nd({},Ot(t,!0),{className:C,d:Qw(n,r,i,a,l)})));var A=w.current,O=P.current,I=b.current,B=N.current,D=_.current,M="0px ".concat(y===-1?1:y,"px"),$="".concat(y,"px 0px"),R=NS(["strokeDasharray"],m,d);return x.createElement(n0,{animationId:k,key:k,canBegin:y>0,duration:m,easing:d,isActive:f,begin:h},E=>{var U=Zt(A,i,E),Z=Zt(O,a,E),K=Zt(I,l,E),z=Zt(B,n,E),G=Zt(D,r,E);g.current&&(w.current=U,P.current=Z,b.current=K,N.current=z,_.current=G);var Y=E>0?{transition:R,strokeDasharray:$}:{strokeDasharray:M};return x.createElement("path",Nd({},Ot(t,!0),{className:C,d:Qw(z,G,U,Z,K),ref:g,style:Xw(Xw({},Y),t.style)}))})},oB=["option","shapeType","propTransformer","activeClassName","isActive"];function lB(e,t){if(e==null)return{};var n,r,i=cB(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cB(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jw(Object(n),!0).forEach(function(r){uB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uB(e,t,n){return(t=dB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dB(e){var t=fB(e,"string");return typeof t=="symbol"?t:t+""}function fB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hB(e,t){return Sd(Sd({},t),e)}function mB(e,t){return e==="symbols"}function e1(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return x.createElement(CS,n);case"trapezoid":return x.createElement(sB,n);case"sector":return x.createElement(TS,n);case"symbols":if(mB(t))return x.createElement(Ev,n);break;default:return null}}function pB(e){return x.isValidElement(e)?e.props:e}function gB(e){var{option:t,shapeType:n,propTransformer:r=hB,activeClassName:i="recharts-active-shape",isActive:a}=e,l=lB(e,oB),u;if(x.isValidElement(t))u=x.cloneElement(t,Sd(Sd({},l),pB(t)));else if(typeof t=="function")u=t(l);else if(tB(t)&&typeof t!="boolean"){var d=r(t,l);u=x.createElement(e1,{shapeType:n,elementProps:d})}else{var m=l;u=x.createElement(e1,{shapeType:n,elementProps:m})}return a?x.createElement(Ii,{className:i},u):u}var pC=(e,t)=>{var n=at();return(r,i)=>a=>{e==null||e(r,i,a),n(kk({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},gC=e=>{var t=at();return(n,r)=>i=>{e==null||e(n,r,i),t(vz())}},vC=(e,t)=>{var n=at();return(r,i)=>a=>{e==null||e(r,i,a),n(yz({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function vB(e){var{fn:t,args:n}=e,r=at(),i=Qn();return x.useEffect(()=>{if(!i){var a=t(n);return r(mz(a)),()=>{r(pz(a))}}},[t,n,r,i]),null}var yB=()=>{};function xB(e){var{legendPayload:t}=e,n=at(),r=Qn();return x.useEffect(()=>r?yB:(n(eI(t)),()=>{n(tI(t))}),[n,r,t]),null}var Sm,bB=()=>{var[e]=x.useState(()=>yl("uid-"));return e},_B=(Sm=$O.useId)!==null&&Sm!==void 0?Sm:bB;function wB(e,t){var n=_B();return t||(e?"".concat(e,"-").concat(n):n)}var jB=x.createContext(void 0),NB=e=>{var{id:t,type:n,children:r}=e,i=wB("recharts-".concat(n),t);return x.createElement(jB.Provider,{value:i},r(i))},SB={cartesianItems:[],polarItems:[]},yC=Cn({name:"graphicalItems",initialState:SB,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Kr(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Kr(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Kr(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:PB,replaceCartesianGraphicalItem:kB,removeCartesianGraphicalItem:CB,addPolarGraphicalItem:OZ,removePolarGraphicalItem:TZ}=yC.actions,EB=yC.reducer;function OB(e){var t=at(),n=x.useRef(null);return x.useEffect(()=>{n.current===null?t(PB(e)):n.current!==e&&t(kB({prev:n.current,next:e})),n.current=e},[t,e]),x.useEffect(()=>()=>{n.current&&(t(CB(n.current)),n.current=null)},[t]),null}function t1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t1(Object(n),!0).forEach(function(r){TB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TB(e,t,n){return(t=AB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AB(e){var t=MB(e,"string");return typeof t=="symbol"?t:t+""}function MB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LB={xAxis:{},yAxis:{},zAxis:{}},xC=Cn({name:"cartesianAxis",initialState:LB,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=n1(n1({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:DB,removeXAxis:IB,addYAxis:RB,removeYAxis:zB,addZAxis:AZ,removeZAxis:MZ,updateYAxisWidth:$B}=xC.actions,BB=xC.reducer,FB=q([yt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),UB=q([FB,ai,si],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),bC=()=>ue(UB),HB="Invariant failed";function ZB(e,t){throw new Error(HB)}var WB=["x","y"];function pg(){return pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pg.apply(null,arguments)}function r1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r1(Object(n),!0).forEach(function(r){VB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VB(e,t,n){return(t=KB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KB(e){var t=qB(e,"string");return typeof t=="symbol"?t:t+""}function qB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GB(e,t){if(e==null)return{};var n,r,i=YB(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function YB(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function XB(e,t){var{x:n,y:r}=e,i=GB(e,WB),a="".concat(n),l=parseInt(a,10),u="".concat(r),d=parseInt(u,10),m="".concat(t.height||i.height),h=parseInt(m,10),f="".concat(t.width||i.width),g=parseInt(f,10);return Ao(Ao(Ao(Ao(Ao({},t),i),l?{x:l}:{}),d?{y:d}:{}),{},{height:h,width:g,name:t.name,radius:t.radius})}function ry(e){return x.createElement(gB,pg({shapeType:"rectangle",propTransformer:XB,activeClassName:"recharts-active-bar"},e))}var QB=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(de(t))return t;var a=de(r)||vt(r);return a?t(r,i):(a||ZB(),n)}},JB={},eF=Cn({name:"errorBars",initialState:JB,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),tF=eF.reducer,nF=["children"];function rF(e,t){if(e==null)return{};var n,r,i=iF(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var aF={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},sF=x.createContext(aF);function oF(e){var{children:t}=e,n=rF(e,nF);return x.createElement(sF.Provider,{value:n},t)}function _C(e,t){var n,r,i=ue(m=>li(m,e)),a=ue(m=>ci(m,t)),l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:dn.allowDataOverflow,u=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:fn.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function lF(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=bC(),{needClipX:a,needClipY:l,needClip:u}=_C(t,n);if(!u)return null;var{x:d,y:m,width:h,height:f}=i;return x.createElement("clipPath",{id:"clipPath-".concat(r)},x.createElement("rect",{x:a?d:d-h/2,y:l?m:m-f/2,width:a?h:h*2,height:l?f:f*2}))}var cF=["onMouseEnter","onMouseLeave","onClick"],uF=["value","background","tooltipPosition"],dF=["id"],fF=["onMouseEnter","onClick","onMouseLeave"];function Ri(){return Ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ri.apply(null,arguments)}function i1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i1(Object(n),!0).forEach(function(r){hF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hF(e,t,n){return(t=mF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mF(e){var t=pF(e,"string");return typeof t=="symbol"?t:t+""}function pF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pd(e,t){if(e==null)return{};var n,r,i=gF(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var vF=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:r,value:xS(n,t),payload:e}]};function yF(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:a,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:xS(a,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function xF(e){var t=ue(Bs),{data:n,dataKey:r,background:i,allOtherBarProps:a}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=a,m=Pd(a,cF),h=pC(l,r),f=gC(u),g=vC(d,r);if(!i||n==null)return null;var y=Ot(i,!1);return x.createElement(x.Fragment,null,n.map((j,w)=>{var{value:P,background:b,tooltipPosition:N}=j,_=Pd(j,uF);if(!b)return null;var k=h(j,w),C=f(j,w),A=g(j,w),O=Wt(Wt(Wt(Wt(Wt({option:i,isActive:String(w)===t},_),{},{fill:"#eee"},b),y),df(m,j,w)),{},{onMouseEnter:k,onMouseLeave:C,onClick:A,dataKey:r,index:w,className:"recharts-bar-background-rectangle"});return x.createElement(ry,Ri({key:"background-bar-".concat(O.index)},O))}))}function bF(e){var{showLabels:t,children:n,rects:r}=e,i=r==null?void 0:r.map(a=>{var l={x:a.x,y:a.y,width:a.width,height:a.height};return Wt(Wt({},l),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:l,fill:a.fill})});return x.createElement(K$,{value:t?i:void 0},n)}function _F(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:a,dataKey:l}=e,u=ue(Bs),d=ue(Bk),m=n&&String(a)===u&&(d==null||l===d),h=m?n:t;return x.createElement(ry,Ri({},r,i,{isActive:m,option:h,index:a,dataKey:l}))}function wF(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:a}=e;return x.createElement(ry,Ri({},n,r,{isActive:!1,option:t,index:i,dataKey:a}))}function jF(e){var{data:t,props:n}=e,r=Vs(n),i=Pd(r,dF),{shape:a,dataKey:l,activeBar:u}=n,{onMouseEnter:d,onClick:m,onMouseLeave:h}=n,f=Pd(n,fF),g=pC(d,l),y=gC(h),j=vC(m,l);return t?x.createElement(x.Fragment,null,t.map((w,P)=>x.createElement(Ii,Ri({className:"recharts-bar-rectangle"},df(f,w,P),{onMouseEnter:g(w,P),onMouseLeave:y(w,P),onClick:j(w,P),key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(P)}),u?x.createElement(_F,{shape:a,activeBar:u,baseProps:i,entry:w,index:P,dataKey:l}):x.createElement(wF,{shape:a,baseProps:i,entry:w,index:P,dataKey:l})))):null}function NF(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:a,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:h}=t,f=n.current,g=r0(t,"recharts-bar-"),[y,j]=x.useState(!1),w=!y,P=x.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),b=x.useCallback(()=>{typeof h=="function"&&h(),j(!0)},[h]);return x.createElement(bF,{showLabels:w,rects:r},x.createElement(n0,{animationId:g,begin:l,duration:u,isActive:a,easing:d,onAnimationEnd:P,onAnimationStart:b,key:g},N=>{var _=N===1?r:r==null?void 0:r.map((k,C)=>{var A=f&&f[C];if(A)return Wt(Wt({},k),{},{x:Zt(A.x,k.x,N),y:Zt(A.y,k.y,N),width:Zt(A.width,k.width,N),height:Zt(A.height,k.height,N)});if(i==="horizontal"){var O=Zt(0,k.height,N);return Wt(Wt({},k),{},{y:k.y+k.height-O,height:O})}var I=Zt(0,k.width,N);return Wt(Wt({},k),{},{width:I})});return N>0&&(n.current=_??null),_==null?null:x.createElement(Ii,null,x.createElement(jF,{props:t,data:_}))}),x.createElement(Y$,{label:t.label}),t.children)}function SF(e){var t=x.useRef(null);return x.createElement(NF,{previousRectanglesRef:t,props:e})}var wC=0,PF=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:qt(e,t)}};class kF extends x.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||n==null)return null;var h=$e("recharts-bar",i),f=m;return x.createElement(Ii,{className:h,id:m},u&&x.createElement("defs",null,x.createElement(lF,{clipPathId:f,xAxisId:a,yAxisId:l})),x.createElement(Ii,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(f,")"):void 0},x.createElement(xF,{data:n,dataKey:r,background:d,allOtherBarProps:this.props}),x.createElement(SF,this.props)))}}var CF={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ks.isSsr,legendType:"rect",minPointSize:wC,xAxisId:0,yAxisId:0};function EF(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:h}=e,{needClip:f}=_C(t,n),g=e0(),y=Qn(),j=S3(e.children,eC),w=ue(N=>r9(N,t,n,y,e.id,j));if(g!=="vertical"&&g!=="horizontal")return null;var P,b=w==null?void 0:w[0];return b==null||b.height==null||b.width==null?P=0:P=g==="vertical"?b.height/2:b.width/2,x.createElement(oF,{xAxisId:t,yAxisId:n,data:w,dataPointFormatter:PF,errorBarOffset:P},x.createElement(kF,Ri({},e,{layout:g,needClip:f,data:w,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:h})))}function OF(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:h,displayedData:f,offset:g,cells:y,parentViewBox:j}=e,w=t==="horizontal"?u:l,P=h?w.scale.domain():null,b=OD({numericAxis:w});return f.map((N,_)=>{var k,C,A,O,I,B;h?k=ND(h[_],P):(k=qt(N,n),Array.isArray(k)||(k=[b,k]));var D=QB(r,wC)(k[1],_);if(t==="horizontal"){var M,[$,R]=[u.scale(k[0]),u.scale(k[1])];C=u_({axis:l,ticks:d,bandSize:a,offset:i.offset,entry:N,index:_}),A=(M=R??$)!==null&&M!==void 0?M:void 0,O=i.size;var E=$-R;if(I=jn(E)?0:E,B={x:C,y:g.top,width:O,height:g.height},Math.abs(D)>0&&Math.abs(I)<Math.abs(D)){var U=rn(I||D)*(Math.abs(D)-Math.abs(I));A-=U,I+=U}}else{var[Z,K]=[l.scale(k[0]),l.scale(k[1])];if(C=Z,A=u_({axis:u,ticks:m,bandSize:a,offset:i.offset,entry:N,index:_}),O=K-Z,I=i.size,B={x:g.left,y:A,width:g.width,height:I},Math.abs(D)>0&&Math.abs(O)<Math.abs(D)){var z=rn(O||D)*(Math.abs(D)-Math.abs(O));O+=z}}if(C==null||A==null||O==null||I==null)return null;var G=Wt(Wt({},N),{},{x:C,y:A,width:O,height:I,value:h?k:k[1],payload:N,background:B,tooltipPosition:{x:C+O/2,y:A+I/2},parentViewBox:j},y&&y[_]&&y[_].props);return G}).filter(Boolean)}function TF(e){var t=Jn(e,CF),n=Qn();return x.createElement(NB,{id:t.id,type:"bar"},r=>x.createElement(x.Fragment,null,x.createElement(xB,{legendPayload:vF(t)}),x.createElement(vB,{fn:yF,args:t}),x.createElement(OB,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:ED(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),x.createElement(EF,Ri({},t,{id:r}))))}var gg=x.memo(TF);gg.displayName="Bar";function a1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a1(Object(n),!0).forEach(function(r){AF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AF(e,t,n){return(t=MF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MF(e){var t=LF(e,"string");return typeof t=="symbol"?t:t+""}function LF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DF=(e,t)=>t,IF=(e,t,n)=>n,RF=(e,t,n,r)=>r,zF=(e,t,n,r,i)=>i,Ql=q([z0,zF],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),$F=q([Ql],e=>e==null?void 0:e.maxBarSize),BF=(e,t,n,r,i,a)=>a,s1=(e,t,n)=>{var r=n??e;if(!vt(r))return pr(r,t,0)},FF=q([Oe,z0,DF,IF,RF],(e,t,n,r,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),UF=(e,t,n,r)=>{var i=Oe(e);return i==="horizontal"?cg(e,"yAxis",n,r):cg(e,"xAxis",t,r)},HF=(e,t,n)=>{var r=Oe(e);return r==="horizontal"?jw(e,"xAxis",t):jw(e,"yAxis",n)},ZF=(e,t,n)=>{var r={},i=e.filter($f),a=e.filter(m=>m.stackId==null),l=i.reduce((m,h)=>(m[h.stackId]||(m[h.stackId]=[]),m[h.stackId].push(h),m),r),u=Object.entries(l).map(m=>{var[h,f]=m,g=f.map(j=>j.dataKey),y=s1(t,n,f[0].barSize);return{stackId:h,dataKeys:g,barSize:y}}),d=a.map(m=>{var h=[m.dataKey].filter(g=>g!=null),f=s1(t,n,m.barSize);return{stackId:void 0,dataKeys:h,barSize:f}});return[...u,...d]},WF=q([FF,f8,HF],ZF),VF=(e,t,n,r,i)=>{var a,l,u=Ql(e,t,n,r,i);if(u!=null){var d=Oe(e),m=OP(e),{maxBarSize:h}=u,f=vt(h)?m:h,g,y;return d==="horizontal"?(g=$s(e,"xAxis",t,r),y=zs(e,"xAxis",t,r)):(g=$s(e,"yAxis",n,r),y=zs(e,"yAxis",n,r)),(a=(l=Gv(g,y,!0))!==null&&l!==void 0?l:f)!==null&&a!==void 0?a:0}},jC=(e,t,n,r)=>{var i=Oe(e),a,l;return i==="horizontal"?(a=$s(e,"xAxis",t,r),l=zs(e,"xAxis",t,r)):(a=$s(e,"yAxis",n,r),l=zs(e,"yAxis",n,r)),Gv(a,l)};function KF(e,t,n,r,i){var a=r.length;if(!(a<1)){var l=pr(e,n,0,!0),u,d=[];if(Sn(r[0].barSize)){var m=!1,h=n/a,f=r.reduce((b,N)=>b+(N.barSize||0),0);f+=(a-1)*l,f>=n&&(f-=(a-1)*l,l=0),f>=n&&h>0&&(m=!0,h*=.9,f=a*h);var g=(n-f)/2>>0,y={offset:g-l,size:0};u=r.reduce((b,N)=>{var _,k={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:y.offset+y.size+l,size:m?h:(_=N.barSize)!==null&&_!==void 0?_:0}},C=[...b,k];return y=C[C.length-1].position,C},d)}else{var j=pr(t,n,0,!0);n-2*j-(a-1)*l<=0&&(l=0);var w=(n-2*j-(a-1)*l)/a;w>1&&(w>>=0);var P=Sn(i)?Math.min(w,i):w;u=r.reduce((b,N,_)=>[...b,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:j+(w+l)*_+(w-P)/2,size:P}}],d)}return u}}var qF=(e,t,n,r,i,a,l)=>{var u=vt(l)?t:l,d=KF(n,r,i!==a?i:a,e,u);return i!==a&&d!=null&&(d=d.map(m=>Qc(Qc({},m),{},{position:Qc(Qc({},m.position),{},{offset:m.position.offset-i/2})}))),d},GF=q([WF,OP,d8,TP,VF,jC,$F],qF),YF=(e,t,n,r)=>$s(e,"xAxis",t,r),XF=(e,t,n,r)=>$s(e,"yAxis",n,r),QF=(e,t,n,r)=>zs(e,"xAxis",t,r),JF=(e,t,n,r)=>zs(e,"yAxis",n,r),e9=q([GF,Ql],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),t9=(e,t)=>{var n=I0(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:a}=i;if(a)return a.find(l=>l.key===n)}}}},n9=q([UF,Ql],t9),r9=q([yt,Yv,YF,XF,QF,JF,e9,Oe,k0,jC,n9,Ql,BF],(e,t,n,r,i,a,l,u,d,m,h,f,g)=>{var{chartData:y,dataStartIndex:j,dataEndIndex:w}=d;if(!(f==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||a==null||m==null)){var{data:P}=f,b;if(P!=null&&P.length>0?b=P:b=y==null?void 0:y.slice(j,w+1),b!=null)return OF({layout:u,barSettings:f,pos:l,parentViewBox:t,bandSize:m,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:h,displayedData:b,offset:e,cells:g})}}),i9=e=>{var{chartData:t}=e,n=at(),r=Qn();return x.useEffect(()=>r?()=>{}:(n(Aw(t)),()=>{n(Aw(void 0))}),[t,n,r]),null},o1={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},a9=Cn({name:"brush",initialState:o1,reducers:{setBrushSettings(e,t){return t.payload==null?o1:t.payload}}}),s9=a9.reducer;function o9(e,t,n){return(t=l9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l9(e){var t=c9(e,"string");return typeof t=="symbol"?t:t+""}function c9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class iy{static create(t){return new iy(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}o9(iy,"EPS",1e-4);function u9(e){return(e%180+180)%180}var d9=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=u9(i),l=a*Math.PI/180,u=Math.atan(r/n),d=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(d)},f9={dots:[],areas:[],lines:[]},h9=Cn({name:"referenceElements",initialState:f9,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Kr(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Kr(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Kr(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),m9=h9.reducer,p9=x.createContext(void 0),g9=e=>{var{children:t}=e,[n]=x.useState("".concat(yl("recharts"),"-clip")),r=bC();if(r==null)return null;var{x:i,y:a,width:l,height:u}=r;return x.createElement(p9.Provider,{value:n},x.createElement("defs",null,x.createElement("clipPath",{id:n},x.createElement("rect",{x:i,y:a,height:u,width:l}))),t)};function Fs(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function NC(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function v9(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return d9(r,n)}function y9(e,t,n){var r=n==="width",{x:i,y:a,width:l,height:u}=e;return t===1?{start:r?i:a,end:r?i+l:a+u}:{start:r?i+l:a+u,end:r?i:a}}function kd(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function x9(e,t){return NC(e,t+1)}function b9(e,t,n,r,i){for(var a=(r||[]).slice(),{start:l,end:u}=t,d=0,m=1,h=l,f=function(){var j=r==null?void 0:r[d];if(j===void 0)return{v:NC(r,m)};var w=d,P,b=()=>(P===void 0&&(P=n(j,w)),P),N=j.coordinate,_=d===0||kd(e,N,b,h,u);_||(d=0,h=l,m+=1),_&&(h=N+e*(b()/2+i),d+=m)},g;m<=a.length;)if(g=f(),g)return g.v;return[]}function l1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(n),!0).forEach(function(r){_9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _9(e,t,n){return(t=w9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w9(e){var t=j9(e,"string");return typeof t=="symbol"?t:t+""}function j9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N9(e,t,n,r,i){for(var a=(r||[]).slice(),l=a.length,{start:u}=t,{end:d}=t,m=function(g){var y=a[g],j,w=()=>(j===void 0&&(j=n(y,g)),j);if(g===l-1){var P=e*(y.coordinate+e*w()/2-d);a[g]=y=Dt(Dt({},y),{},{tickCoord:P>0?y.coordinate-P*e:y.coordinate})}else a[g]=y=Dt(Dt({},y),{},{tickCoord:y.coordinate});var b=kd(e,y.tickCoord,w,u,d);b&&(d=y.tickCoord-e*(w()/2+i),a[g]=Dt(Dt({},y),{},{isShow:!0}))},h=l-1;h>=0;h--)m(h);return a}function S9(e,t,n,r,i,a){var l=(r||[]).slice(),u=l.length,{start:d,end:m}=t;if(a){var h=r[u-1],f=n(h,u-1),g=e*(h.coordinate+e*f/2-m);l[u-1]=h=Dt(Dt({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate});var y=kd(e,h.tickCoord,()=>f,d,m);y&&(m=h.tickCoord-e*(f/2+i),l[u-1]=Dt(Dt({},h),{},{isShow:!0}))}for(var j=a?u-1:u,w=function(N){var _=l[N],k,C=()=>(k===void 0&&(k=n(_,N)),k);if(N===0){var A=e*(_.coordinate-e*C()/2-d);l[N]=_=Dt(Dt({},_),{},{tickCoord:A<0?_.coordinate-A*e:_.coordinate})}else l[N]=_=Dt(Dt({},_),{},{tickCoord:_.coordinate});var O=kd(e,_.tickCoord,C,d,m);O&&(d=_.tickCoord+e*(C()/2+i),l[N]=Dt(Dt({},_),{},{isShow:!0}))},P=0;P<j;P++)w(P);return l}function ay(e,t,n){var{tick:r,ticks:i,viewBox:a,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:h,angle:f}=e;if(!i||!i.length||!r)return[];if(de(d)||Ks.isSsr){var g;return(g=x9(i,de(d)?d:0))!==null&&g!==void 0?g:[]}var y=[],j=u==="top"||u==="bottom"?"width":"height",w=h&&j==="width"?Qo(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},P=(_,k)=>{var C=typeof m=="function"?m(_.value,k):_.value;return j==="width"?v9(Qo(C,{fontSize:t,letterSpacing:n}),w,f):Qo(C,{fontSize:t,letterSpacing:n})[j]},b=i.length>=2?rn(i[1].coordinate-i[0].coordinate):1,N=y9(a,b,j);return d==="equidistantPreserveStart"?b9(b,N,P,i,l):(d==="preserveStart"||d==="preserveStartEnd"?y=S9(b,N,P,i,l,d==="preserveStartEnd"):y=N9(b,N,P,i,l),y.filter(_=>_.isShow))}var P9=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,l=0;if(t){t.forEach(h=>{if(h){var f=h.getBoundingClientRect();f.width>l&&(l=f.width)}});var u=n?n.getBoundingClientRect().width:0,d=i+a,m=l+d+u+(n?r:0);return Math.round(m)}return 0},k9=["axisLine","width","height","className","hide","ticks"],C9=["viewBox"],E9=["viewBox"];function vg(e,t){if(e==null)return{};var n,r,i=O9(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function O9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ea.apply(null,arguments)}function c1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c1(Object(n),!0).forEach(function(r){T9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T9(e,t,n){return(t=A9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A9(e){var t=M9(e,"string");return typeof t=="symbol"?t:t+""}function M9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sy={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function L9(e){var{x:t,y:n,width:r,height:i,orientation:a,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=lt(lt(lt({},d),Ot(u,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!l||a==="bottom"&&l);m=lt(lt({},m),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var f=+(a==="left"&&!l||a==="right"&&l);m=lt(lt({},m),{},{x1:t+f*r,y1:n,x2:t+f*r,y2:n+i})}return x.createElement("line",Ea({},m,{className:$e("recharts-cartesian-axis-line",Es(u,"className"))}))}function D9(e,t,n,r,i,a,l,u,d){var m,h,f,g,y,j,w=u?-1:1,P=e.tickSize||l,b=de(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":m=h=e.coordinate,g=n+ +!u*i,f=g-w*P,j=f-w*d,y=b;break;case"left":f=g=e.coordinate,h=t+ +!u*r,m=h-w*P,y=m-w*d,j=b;break;case"right":f=g=e.coordinate,h=t+ +u*r,m=h+w*P,y=m+w*d,j=b;break;default:m=h=e.coordinate,g=n+ +u*i,f=g+w*P,j=f+w*d,y=b;break}return{line:{x1:m,y1:f,x2:h,y2:g},tick:{x:y,y:j}}}function I9(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function R9(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function z9(e){var{option:t,tickProps:n,value:r}=e,i,a=$e(n.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(t))i=x.cloneElement(t,lt(lt({},n),{},{className:a}));else if(typeof t=="function")i=t(lt(lt({},n),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=$e(l,t==null?void 0:t.className)),i=x.createElement(ty,Ea({},n,{className:l}),r)}return i}function $9(e){var{ticks:t=[],tick:n,tickLine:r,stroke:i,tickFormatter:a,unit:l,padding:u,tickTextProps:d,orientation:m,mirror:h,x:f,y:g,width:y,height:j,tickSize:w,tickMargin:P,fontSize:b,letterSpacing:N,getTicksConfig:_,events:k}=e,C=ay(lt(lt({},_),{},{ticks:t}),b,N),A=I9(m,h),O=R9(m,h),I=Vs(_),B=Ot(n,!1),D=lt(lt({},I),{},{fill:"none"},Ot(r,!1)),M=C.map(($,R)=>{var{line:E,tick:U}=D9($,f,g,y,j,m,w,h,P),Z=lt(lt(lt(lt({textAnchor:A,verticalAnchor:O},I),{},{stroke:"none",fill:i},B),U),{},{index:R,payload:$,visibleTicksCount:C.length,tickFormatter:a,padding:u},d);return x.createElement(Ii,Ea({className:"recharts-cartesian-axis-tick",key:"tick-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},df(k,$,R)),r&&x.createElement("line",Ea({},D,E,{className:$e("recharts-cartesian-axis-tick-line",Es(r,"className"))})),n&&x.createElement(z9,{option:n,tickProps:Z,value:"".concat(typeof a=="function"?a($.value,R):$.value).concat(l||"")}))});return M.length>0?x.createElement("g",{className:"recharts-cartesian-axis-ticks"},M):null}var B9=x.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:a,hide:l,ticks:u}=e,d=vg(e,k9),[m,h]=x.useState(""),[f,g]=x.useState(""),y=x.useRef([]);x.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var w;return P9({ticks:y.current,label:(w=e.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=x.useCallback(w=>{if(w){var P=w.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=Array.from(P);var b=P[0];if(b){var N=window.getComputedStyle(b),_=N.fontSize,k=N.letterSpacing;(_!==m||k!==f)&&(h(_),g(k))}}},[m,f]);return l||r!=null&&r<=0||i!=null&&i<=0?null:x.createElement(Ii,{className:$e("recharts-cartesian-axis",a),ref:j},x.createElement(L9,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Vs(e)}),x.createElement($9,{ticks:u,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:m,letterSpacing:f,getTicksConfig:e,events:d}),x.createElement(O$,{x:e.x,y:e.y,width:e.width,height:e.height},x.createElement(B$,{label:e.label}),e.children))}),F9=x.memo(B9,(e,t)=>{var{viewBox:n}=e,r=vg(e,C9),{viewBox:i}=t,a=vg(t,E9);return Fs(n,i)&&Fs(r,a)}),oy=x.forwardRef((e,t)=>{var n=Jn(e,sy);return x.createElement(F9,Ea({},n,{ref:t}))});oy.displayName="CartesianAxis";var U9=["x1","y1","x2","y2","key"],H9=["offset"],Z9=["xAxisId","yAxisId"],W9=["xAxisId","yAxisId"];function u1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u1(Object(n),!0).forEach(function(r){V9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V9(e,t,n){return(t=K9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K9(e){var t=q9(e,"string");return typeof t=="symbol"?t:t+""}function q9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function da(){return da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},da.apply(null,arguments)}function Cd(e,t){if(e==null)return{};var n,r,i=G9(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function G9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Y9=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:l,ry:u}=e;return x.createElement("rect",{x:r,y:i,ry:u,width:a,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function SC(e,t){var n;if(x.isValidElement(e))n=x.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:a,y2:l,key:u}=t,d=Cd(t,U9),m=Vs(d),h=Cd(m,H9);n=x.createElement("line",da({},h,{x1:r,y1:i,x2:a,y2:l,fill:"none",key:u}))}return n}function X9(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var a=Cd(e,Z9),l=i.map((u,d)=>{var m=Rt(Rt({},a),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(d),index:d});return SC(r,m)});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Q9(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var a=Cd(e,W9),l=i.map((u,d)=>{var m=Rt(Rt({},a),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(d),index:d});return SC(r,m)});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function J9(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:a,height:l,horizontalPoints:u,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var m=u.map(f=>Math.round(f+i-i)).sort((f,g)=>f-g);i!==m[0]&&m.unshift(0);var h=m.map((f,g)=>{var y=!m[g+1],j=y?i+l-f:m[g+1]-f;if(j<=0)return null;var w=g%t.length;return x.createElement("rect",{key:"react-".concat(g),y:f,x:r,height:j,width:a,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function eU(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:l,height:u,verticalPoints:d}=e;if(!t||!n||!n.length)return null;var m=d.map(f=>Math.round(f+i-i)).sort((f,g)=>f-g);i!==m[0]&&m.unshift(0);var h=m.map((f,g)=>{var y=!m[g+1],j=y?i+l-f:m[g+1]-f;if(j<=0)return null;var w=g%n.length;return x.createElement("rect",{key:"react-".concat(g),x:f,y:a,width:j,height:u,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var tU=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return vS(ay(Rt(Rt(Rt({},sy),n),{},{ticks:yS(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},nU=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return vS(ay(Rt(Rt(Rt({},sy),n),{},{ticks:yS(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},rU={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function PC(e){var t=Qv(),n=Jv(),r=_S(),i=Rt(Rt({},Jn(e,rU)),{},{x:de(e.x)?e.x:r.left,y:de(e.y)?e.y:r.top,width:de(e.width)?e.width:r.width,height:de(e.height)?e.height:r.height}),{xAxisId:a,yAxisId:l,x:u,y:d,width:m,height:h,syncWithTicks:f,horizontalValues:g,verticalValues:y}=i,j=Qn(),w=ue(B=>Nw(B,"xAxis",a,j)),P=ue(B=>Nw(B,"yAxis",l,j));if(!de(m)||m<=0||!de(h)||h<=0||!de(u)||u!==+u||!de(d)||d!==+d)return null;var b=i.verticalCoordinatesGenerator||tU,N=i.horizontalCoordinatesGenerator||nU,{horizontalPoints:_,verticalPoints:k}=i;if((!_||!_.length)&&typeof N=="function"){var C=g&&g.length,A=N({yAxis:P?Rt(Rt({},P),{},{ticks:C?g:P.ticks}):void 0,width:t,height:n,offset:r},C?!0:f);Xo(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(_=A)}if((!k||!k.length)&&typeof b=="function"){var O=y&&y.length,I=b({xAxis:w?Rt(Rt({},w),{},{ticks:O?y:w.ticks}):void 0,width:t,height:n,offset:r},O?!0:f);Xo(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(k=I)}return x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(Y9,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),x.createElement(J9,da({},i,{horizontalPoints:_})),x.createElement(eU,da({},i,{verticalPoints:k})),x.createElement(X9,da({},i,{offset:r,horizontalPoints:_,xAxis:w,yAxis:P})),x.createElement(Q9,da({},i,{offset:r,verticalPoints:k,xAxis:w,yAxis:P})))}PC.displayName="CartesianGrid";var iU=["dangerouslySetInnerHTML","ticks"],aU=["id"],sU=["domain"],oU=["domain"];function yg(){return yg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yg.apply(null,arguments)}function Ed(e,t){if(e==null)return{};var n,r,i=lU(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function cU(e){var t=at();return x.useEffect(()=>(t(DB(e)),()=>{t(IB(e))}),[e,t]),null}var uU=e=>{var{xAxisId:t,className:n}=e,r=ue(Yv),i=Qn(),a="xAxis",l=ue(y=>Js(y,a,t,i)),u=ue(y=>_k(y,a,t,i)),d=ue(y=>vk(y,t)),m=ue(y=>iz(y,t)),h=ue(y=>BP(y,t));if(d==null||m==null||h==null)return null;var f=Ed(e,iU),g=Ed(h,aU);return x.createElement(oy,yg({},f,g,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:$e("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:u}))},dU={allowDataOverflow:dn.allowDataOverflow,allowDecimals:dn.allowDecimals,allowDuplicatedCategory:dn.allowDuplicatedCategory,height:dn.height,hide:!1,mirror:dn.mirror,orientation:dn.orientation,padding:dn.padding,reversed:dn.reversed,scale:dn.scale,tickCount:dn.tickCount,type:dn.type,xAxisId:0},fU=e=>{var t,n,r,i,a,l=Jn(e,dU);return x.createElement(x.Fragment,null,x.createElement(cU,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(i=l.minTickGap)!==null&&i!==void 0?i:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),x.createElement(uU,l))},hU=(e,t)=>{var{domain:n}=e,r=Ed(e,sU),{domain:i}=t,a=Ed(t,oU);return Fs(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Fs({domain:n},{domain:i}):!1},kC=x.memo(fU,hU);kC.displayName="XAxis";var mU=["dangerouslySetInnerHTML","ticks"],pU=["id"],gU=["domain"],vU=["domain"];function xg(){return xg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xg.apply(null,arguments)}function Od(e,t){if(e==null)return{};var n,r,i=yU(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function xU(e){var t=at();return x.useEffect(()=>(t(RB(e)),()=>{t(zB(e))}),[e,t]),null}var bU=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,a=x.useRef(null),l=x.useRef(null),u=ue(Yv),d=Qn(),m=at(),h="yAxis",f=ue(N=>Js(N,h,t,d)),g=ue(N=>yk(N,t)),y=ue(N=>sz(N,t)),j=ue(N=>_k(N,h,t,d)),w=ue(N=>FP(N,t));if(x.useLayoutEffect(()=>{if(!(r!=="auto"||!g||ny(i)||x.isValidElement(i)||w==null)){var N=a.current;if(N){var _=N.getCalculatedWidth();Math.round(g.width)!==Math.round(_)&&m($B({id:t,width:_}))}}},[j,g,m,i,t,r,w]),g==null||y==null||w==null)return null;var P=Od(e,mU),b=Od(w,pU);return x.createElement(oy,xg({},P,b,{ref:a,labelRef:l,scale:f,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:g.width,height:g.height,className:$e("recharts-".concat(h," ").concat(h),n),viewBox:u,ticks:j}))},_U={allowDataOverflow:fn.allowDataOverflow,allowDecimals:fn.allowDecimals,allowDuplicatedCategory:fn.allowDuplicatedCategory,hide:!1,mirror:fn.mirror,orientation:fn.orientation,padding:fn.padding,reversed:fn.reversed,scale:fn.scale,tickCount:fn.tickCount,type:fn.type,width:fn.width,yAxisId:0},wU=e=>{var t,n,r,i,a,l=Jn(e,_U);return x.createElement(x.Fragment,null,x.createElement(xU,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(i=l.minTickGap)!==null&&i!==void 0?i:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),x.createElement(bU,l))},jU=(e,t)=>{var{domain:n}=e,r=Od(e,gU),{domain:i}=t,a=Od(t,vU);return Fs(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Fs({domain:n},{domain:i}):!1},CC=x.memo(wU,jU);CC.displayName="YAxis";var NU={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jl=x;function SU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var PU=typeof Object.is=="function"?Object.is:SU,kU=Jl.useSyncExternalStore,CU=Jl.useRef,EU=Jl.useEffect,OU=Jl.useMemo,TU=Jl.useDebugValue;NU.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=CU(null);if(a.current===null){var l={hasValue:!1,value:null};a.current=l}else l=a.current;a=OU(function(){function d(y){if(!m){if(m=!0,h=y,y=r(y),i!==void 0&&l.hasValue){var j=l.value;if(i(j,y))return f=j}return f=y}if(j=f,PU(h,y))return j;var w=r(y);return i!==void 0&&i(j,w)?(h=y,j):(h=y,f=w)}var m=!1,h,f,g=n===void 0?null:n;return[function(){return d(t())},g===null?void 0:function(){return d(g())}]},[t,n,r,i]);var u=kU(e,a[0],a[1]);return EU(function(){l.hasValue=!0,l.value=u},[u]),TU(u),u};function AU(e){e()}function MU(){let e=null,t=null;return{clear(){e=null,t=null},notify(){AU(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var d1={notify(){},get:()=>[]};function LU(e,t){let n,r=d1,i=0,a=!1;function l(w){h();const P=r.subscribe(w);let b=!1;return()=>{b||(b=!0,P(),f())}}function u(){r.notify()}function d(){j.onStateChange&&j.onStateChange()}function m(){return a}function h(){i++,n||(n=e.subscribe(d),r=MU())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=d1)}function g(){a||(a=!0,h())}function y(){a&&(a=!1,f())}const j={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:g,tryUnsubscribe:y,getListeners:()=>r};return j}var DU=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IU=DU(),RU=()=>typeof navigator<"u"&&navigator.product==="ReactNative",zU=RU(),$U=()=>IU||zU?x.useLayoutEffect:x.useEffect,BU=$U(),Pm=Symbol.for("react-redux-context"),km=typeof globalThis<"u"?globalThis:{};function FU(){if(!x.createContext)return{};const e=km[Pm]??(km[Pm]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var UU=FU();function HU(e){const{children:t,context:n,serverState:r,store:i}=e,a=x.useMemo(()=>{const d=LU(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=x.useMemo(()=>i.getState(),[i]);BU(()=>{const{subscription:d}=a;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[a,l]);const u=n||UU;return x.createElement(u.Provider,{value:a},t)}var ZU=HU,WU=(e,t)=>t,ly=q([WU,Oe,RP,dt,Ik,ui,u7,yt],p7),cy=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},EC=qn("mouseClick"),OC=Bl();OC.startListening({actionCreator:EC,effect:(e,t)=>{var n=e.payload,r=ly(t.getState(),cy(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(xz({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var bg=qn("mouseMove"),TC=Bl();TC.startListening({actionCreator:bg,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=V0(r,r.tooltip.settings.shared),a=ly(r,cy(n));i==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(Ek({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(Ck()))}});var f1={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},AC=Cn({name:"rootProps",initialState:f1,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:f1.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),VU=AC.reducer,{updateOptions:KU}=AC.actions,qU=Cn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),GU=qU.reducer,MC=qn("keyDown"),LC=qn("focus"),uy=Bl();uy.startListening({actionCreator:MC,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=Number(K0(i,to(n))),u=ui(n);if(a==="Enter"){var d=wd(n,"axis","hover",String(i.index));t.dispatch(dg({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var m=uz(n),h=m==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,g=l+f*h;if(!(u==null||g>=u.length||g<0)){var y=wd(n,"axis","hover",String(g));t.dispatch(dg({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:y}))}}}}});uy.startListening({actionCreator:LC,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",l=wd(n,"axis","hover",String(a));t.dispatch(dg({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:l}))}}}});var In=qn("externalEvent"),DC=Bl();DC.startListening({actionCreator:In,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:t7(n),activeDataKey:Bk(n),activeIndex:Bs(n),activeLabel:$k(n),activeTooltipIndex:Bs(n),isTooltipActive:n7(n)};e.payload.handler(r,e.payload.reactEvent)}}});var YU=q([eo],e=>e.tooltipItemPayloads),XU=q([YU,Yl,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var l=t(a,n);return l}}}),IC=qn("touchMove"),RC=Bl();RC.startListening({actionCreator:IC,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=V0(r,r.tooltip.settings.shared);if(i==="axis"){var a=ly(r,cy({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(Ek({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(zD),h=(l=d.getAttribute($D))!==null&&l!==void 0?l:void 0,f=XU(t.getState(),m,h);t.dispatch(kk({activeDataKey:h,activeIndex:m,activeCoordinate:f}))}}});var QU=KN({brush:s9,cartesianAxis:BB,chartData:T7,errorBars:tF,graphicalItems:EB,layout:oD,legend:nI,options:P7,polarAxis:J$,polarOptions:GU,referenceElements:m9,rootProps:VU,tooltip:bz}),JU=function(t){return AL({reducer:QU,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([OC.middleware,TC.middleware,uy.middleware,DC.middleware,RC.middleware]),devTools:Ks.devToolsEnabled})};function eH(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Qn(),a=x.useRef(null);if(i)return n;a.current==null&&(a.current=JU(t));var l=Fv;return x.createElement(ZU,{context:l,store:a.current},n)}function tH(e){var{layout:t,width:n,height:r,margin:i}=e,a=at(),l=Qn();return x.useEffect(()=>{l||(a(iD(t)),a(aD({width:n,height:r})),a(rD(i)))},[a,l,t,n,r,i]),null}function nH(e){var t=at();return x.useEffect(()=>{t(KU(e))},[t,e]),null}var rH=["children"];function iH(e,t){if(e==null)return{};var n,r,i=aH(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Td(){return Td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Td.apply(null,arguments)}var sH={width:"100%",height:"100%"},oH=x.forwardRef((e,t)=>{var n=Qv(),r=Jv(),i=jS();if(!sd(n)||!sd(r))return null;var{children:a,otherAttributes:l,title:u,desc:d}=e,m,h;return typeof l.tabIndex=="number"?m=l.tabIndex:m=i?0:void 0,typeof l.role=="string"?h=l.role:h=i?"application":void 0,x.createElement(Sv,Td({},l,{title:u,desc:d,role:h,tabIndex:m,width:n,height:r,style:sH,ref:t}),a)}),lH=e=>{var{children:t}=e,n=ue(Pf);if(!n)return null;var{width:r,height:i,y:a,x:l}=n;return x.createElement(Sv,{width:r,height:i,x:l,y:a},t)},h1=x.forwardRef((e,t)=>{var{children:n}=e,r=iH(e,rH),i=Qn();return i?x.createElement(lH,null,n):x.createElement(oH,Td({ref:t},r),n)});function cH(){var e=at(),[t,n]=x.useState(null),r=ue(RD);return x.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Sn(a)&&a!==r&&e(sD(a))}},[t,e,r]),n}function m1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m1(Object(n),!0).forEach(function(r){dH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dH(e,t,n){return(t=fH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fH(e){var t=hH(e,"string");return typeof t=="symbol"?t:t+""}function hH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mH=x.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:h,onMouseMove:f,onMouseUp:g,onTouchEnd:y,onTouchMove:j,onTouchStart:w,style:P,width:b}=e,N=at(),[_,k]=x.useState(null),[C,A]=x.useState(null);B7();var O=cH(),I=x.useCallback(ne=>{O(ne),typeof t=="function"&&t(ne),k(ne),A(ne)},[O,t,k,A]),B=x.useCallback(ne=>{N(EC(ne)),N(In({handler:a,reactEvent:ne}))},[N,a]),D=x.useCallback(ne=>{N(bg(ne)),N(In({handler:m,reactEvent:ne}))},[N,m]),M=x.useCallback(ne=>{N(Ck()),N(In({handler:h,reactEvent:ne}))},[N,h]),$=x.useCallback(ne=>{N(bg(ne)),N(In({handler:f,reactEvent:ne}))},[N,f]),R=x.useCallback(()=>{N(LC())},[N]),E=x.useCallback(ne=>{N(MC(ne.key))},[N]),U=x.useCallback(ne=>{N(In({handler:l,reactEvent:ne}))},[N,l]),Z=x.useCallback(ne=>{N(In({handler:u,reactEvent:ne}))},[N,u]),K=x.useCallback(ne=>{N(In({handler:d,reactEvent:ne}))},[N,d]),z=x.useCallback(ne=>{N(In({handler:g,reactEvent:ne}))},[N,g]),G=x.useCallback(ne=>{N(In({handler:w,reactEvent:ne}))},[N,w]),Y=x.useCallback(ne=>{N(IC(ne)),N(In({handler:j,reactEvent:ne}))},[N,j]),re=x.useCallback(ne=>{N(In({handler:y,reactEvent:ne}))},[N,y]);return x.createElement(Vk.Provider,{value:_},x.createElement(J2.Provider,{value:C},x.createElement("div",{className:$e("recharts-wrapper",r),style:uH({position:"relative",cursor:"default",width:b,height:i},P),onClick:B,onContextMenu:U,onDoubleClick:Z,onFocus:R,onKeyDown:E,onMouseDown:K,onMouseEnter:D,onMouseLeave:M,onMouseMove:$,onMouseUp:z,onTouchEnd:re,onTouchMove:Y,onTouchStart:G,ref:I},n)))}),pH=["children","className","width","height","style","compact","title","desc"];function gH(e,t){if(e==null)return{};var n,r,i=vH(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var yH=x.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:a,style:l,compact:u,title:d,desc:m}=e,h=gH(e,pH),f=Vs(h);return u?x.createElement(h1,{otherAttributes:f,title:d,desc:m},n):x.createElement(mH,{className:r,style:l,width:i,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},x.createElement(h1,{otherAttributes:f,title:d,desc:m,ref:t},x.createElement(g9,null,n)))}),xH=["width","height"];function _g(){return _g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_g.apply(null,arguments)}function bH(e,t){if(e==null)return{};var n,r,i=_H(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _H(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var wH={top:5,right:5,bottom:5,left:5},jH={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:wH,reverseStackOrder:!1,syncMethod:"index"},NH=x.forwardRef(function(t,n){var r,i=Jn(t.categoricalChartProps,jH),{width:a,height:l}=i,u=bH(i,xH);if(!sd(a)||!sd(l))return null;var{chartName:d,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,categoricalChartProps:g}=t,y={chartName:d,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,eventEmitter:void 0};return x.createElement(eH,{preloadedState:{options:y},reduxStoreName:(r=g.id)!==null&&r!==void 0?r:d},x.createElement(i9,{chartData:g.data}),x.createElement(tH,{width:a,height:l,layout:i.layout,margin:i.margin}),x.createElement(nH,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),x.createElement(yH,_g({},u,{width:a,height:l,ref:n})))}),SH=["axis","item"],PH=x.forwardRef((e,t)=>x.createElement(NH,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:SH,tooltipPayloadSearcher:N7,categoricalChartProps:e,ref:t}));const kH=({patients:e})=>{const t=x.useMemo(()=>{const r=e.length,i=e.filter(u=>!!u.patient_categories.critical).length,a=e.filter(u=>!!u.patient_categories.elderly).length,l=e.filter(u=>!!u.patient_categories.pregnant).length;return[{group:"Critical",Yes:i,No:Math.max(r-i,0)},{group:"Elderly",Yes:a,No:Math.max(r-a,0)},{group:"Pregnant",Yes:l,No:Math.max(r-l,0)}]},[e]),n=e.length;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Patient Categories Overview"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total Patients: ",n]})]}),s.jsx("div",{className:"h-72",children:t.length===0?s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 text-sm",children:"No data"}):s.jsx(e$,{width:"100%",height:"100%",children:s.jsxs(PH,{data:t,margin:{top:10,right:20,left:0,bottom:0},children:[s.jsx(PC,{strokeDasharray:"3 3"}),s.jsx(kC,{dataKey:"group",tick:{fontSize:12}}),s.jsx(CC,{allowDecimals:!1,tick:{fontSize:12}}),s.jsx(q7,{}),s.jsx(kf,{}),s.jsx(gg,{dataKey:"Yes",name:"Yes",radius:[4,4,0,0],fill:"#2563eb"}),s.jsx(gg,{dataKey:"No",name:"No",radius:[4,4,0,0],fill:"#cbd5e1"})]})})})]})},Dn=()=>{const{user:e}=Se(),[t,n]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState(!0),[u,d]=x.useState(!1),[m,h]=x.useState(null),[f,g]=x.useState(null),[y,j]=x.useState(!1),w=async()=>{if(e!=null&&e.id)try{const{data:R,error:E}=await ii(e.id);E&&E.code!=="PGRST116"?console.error("Error fetching patient profile:",E):g(R)}catch(R){console.error("Error fetching patient profile:",R)}},P=async()=>{if(!f){alert("Patient profile not found. Please contact emergency services directly.");return}j(!0);try{const[{data:R},{data:E}]=await Promise.all([Ct(),cn()]),U=(R||[]).filter(X=>X.role==="doctor"),Z=(f.assigned_doctor||"").toLowerCase(),K=U.filter(X=>(X.full_name||"").toLowerCase().includes(Z)),z=(f.area_name||"").toLowerCase(),G=(E||[]).filter(X=>(X.area_name||"").toLowerCase()===z);if(K.length===0&&G.length===0)throw new Error("No assigned doctor or nearby volunteers found");const Y=` EMERGENCY - Immediate Assistance Needed

Patient: ${f.name}
MRN: ${f.medical_record_number}
Phone: ${f.phone_number||"N/A"}
Address: ${f.address}
Assigned Doctor: ${f.assigned_doctor||"N/A"}
Assigned VHV: ${f.assigned_vhv_name||"N/A"}
Area: ${f.area_name||"N/A"}

Flags:
- Critical: ${f.patient_categories.critical?"Yes":"No"}
- Elderly: ${f.patient_categories.elderly?"Yes":"No"}
- Pregnant: ${f.patient_categories.pregnant?"Yes":"No"}

Caregiver: ${f.caregivers_contact||"N/A"}

This is an urgent request for immediate medical assistance. Please respond as soon as possible.`,re=K.map(X=>X.id),ne=G.map(X=>X.user_id).filter(Boolean),H=Array.from(new Set([...re,...ne]));await Promise.all(H.map(X=>mr({sender_id:e.id,recipient_id:X,content:Y,subject:" EMERGENCY - Immediate Assistance Needed",is_read:!1}))),alert(`Emergency message sent to ${re.length} doctor(s) and ${ne.length} volunteer(s).`)}catch(R){console.error("Error sending emergency message:",R),alert("Failed to send emergency message. Please call emergency services directly or try again.")}finally{j(!1)}};x.useEffect(()=>{b(),(e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer"?N():(e==null?void 0:e.role)==="patient"&&w()},[]);const b=async()=>{try{const{data:R,error:E}=await WM();E?console.error("Error fetching announcements:",E):n(R||[])}catch(R){console.error("Error fetching announcements:",R)}finally{l(!1)}},N=async()=>{try{const{data:R,error:E}=await Bt();E?console.error("Error fetching patients:",E):i(R||[])}catch(R){console.error("Error fetching patients:",R)}finally{l(!1)}},_=R=>{h(R),d(!0)},k=async R=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{const{error:E}=await qM(R);E?console.error("Error deleting announcement:",E):b()}catch(E){console.error("Error deleting announcement:",E)}},C=()=>{d(!1),h(null)},A=()=>{b()},O=()=>{switch(e==null?void 0:e.role){case"doctor":return"Welcome to your medical dashboard. Manage patient records and communications.";case"volunteer":return"Welcome to your volunteer dashboard. Help manage patient information and provide support.";case"patient":return"Welcome to your patient portal. View your medical information and communicate with your healthcare team.";default:return"Welcome to MedConnect Portal."}},I=()=>{const R=r.filter(K=>K.patient_categories.critical).length,E=r.filter(K=>K.patient_categories.elderly).length,U=r.filter(K=>K.patient_categories.pregnant).length,Z=r.length;return{critical:R,elderly:E,pregnant:U,total:Z}},B=[],D=I(),M=R=>{switch(R){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},$=R=>{switch(R){case"urgent":return s.jsx(Ur,{className:"w-4 h-4"});case"high":return s.jsx(Ur,{className:"w-4 h-4"});default:return s.jsx(du,{className:"w-4 h-4"})}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Good ",new Date().getHours()<12?"morning":new Date().getHours()<17?"afternoon":"evening",", ",e==null?void 0:e.full_name]}),s.jsx("p",{className:"text-gray-600",children:O()})]}),(e==null?void 0:e.role)==="doctor"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Ic,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.total}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:s.jsx(Ur,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.critical}),s.jsx("p",{className:"text-sm text-gray-600",children:"Critical Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:s.jsx(Ic,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.elderly}),s.jsx("p",{className:"text-sm text-gray-600",children:"Elderly Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-pink-100 p-3 rounded-lg",children:s.jsx(mn,{className:"w-6 h-6 text-pink-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.pregnant}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pregnant Patients"})]})]})})]}),(e==null?void 0:e.role)==="doctor"&&s.jsx(kH,{patients:r}),(e==null?void 0:e.role)==="volunteer"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Ic,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.total}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:s.jsx(Ur,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.critical}),s.jsx("p",{className:"text-sm text-gray-600",children:"Critical Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:s.jsx(Ic,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.elderly}),s.jsx("p",{className:"text-sm text-gray-600",children:"Elderly Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-pink-100 p-3 rounded-lg",children:s.jsx(mn,{className:"w-6 h-6 text-pink-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.pregnant}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pregnant Patients"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(e==null?void 0:e.role)==="patient"&&s.jsx("div",{className:"md:col-span-2 lg:col-span-3 mb-4",children:s.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:s.jsx(Fu,{className:"w-8 h-8 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-red-800",children:"Emergency Assistance"}),s.jsx("p",{className:"text-red-700 text-sm",children:"Need immediate medical help? Click to send an urgent message to your healthcare team."}),s.jsx("p",{className:"text-red-600 text-xs mt-1",children:"For life-threatening emergencies, call emergency services immediately."})]})]}),s.jsx("button",{onClick:P,disabled:y||!f,className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 flex items-center space-x-2 font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 active:scale-95",children:y?s.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Fu,{className:"w-6 h-6"}),s.jsx("span",{children:"EMERGENCY"})]})})]})})}),B.map((R,E)=>{const U=R.icon;return s.jsx("div",{onClick:()=>{const K={patients:"patients",messages:"messages","create-patient":"patients",tasks:"tasks",records:"records",map:"map",profile:"profile",resources:"dashboard",mental:"mental",appointments:"appointments"}[R.action]||"dashboard";try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:K}))}catch{}window.setAppView&&window.setAppView(K)},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all cursor-pointer group",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg group-hover:bg-blue-200 transition-colors",children:s.jsx(U,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:R.title}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:R.description})]})]})},E)})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(du,{className:"w-6 h-6 text-blue-600"}),s.jsx("span",{children:"Announcements"})]}),(e==null?void 0:e.role)==="doctor"&&s.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Gt,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Announcement"})]})]}),a?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"w-6 h-6 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t.length>0?s.jsx("div",{className:"space-y-4",children:t.slice(0,3).map(R=>{var E;return s.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-all",children:s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:R.title}),s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium border flex items-center space-x-1 ${M(R.priority)}`,children:[$(R.priority),s.jsx("span",{children:R.priority.charAt(0).toUpperCase()+R.priority.slice(1)})]})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:R.content}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[s.jsxs("span",{children:["By: ",(E=R.created_by_user)==null?void 0:E.full_name]}),s.jsx("span",{children:new Date(R.created_at).toLocaleDateString()})]})]}),(e==null?void 0:e.role)==="doctor"&&s.jsxs("div",{className:"flex space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>_(R),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Announcement",children:s.jsx(R2,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>k(R.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Announcement",children:s.jsx(Il,{className:"w-4 h-4"})})]})]})},R.id)})}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(du,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No announcements to display."}),(e==null?void 0:e.role)==="doctor"&&s.jsx("p",{className:"text-sm mt-1",children:"Create your first announcement to keep everyone informed."})]})]})]}),u&&s.jsx(h3,{announcement:m,onClose:C,onSuccess:A})]})};function zC(e,t){const n=x.useRef(t);x.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function $C(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const CH=1;function EH(e){return Object.freeze({__version:CH,map:e})}function Wf(e,t){return Object.freeze({...e,...t})}const BC=x.createContext(null),FC=BC.Provider;function Vf(){const e=x.useContext(BC);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function UC(e){function t(n,r){const{instance:i,context:a}=e(n).current;return x.useImperativeHandle(r,()=>i),n.children==null?null:pu.createElement(FC,{value:a},n.children)}return x.forwardRef(t)}function OH(e){function t(n,r){const[i,a]=x.useState(!1),{instance:l}=e(n,a).current;x.useImperativeHandle(r,()=>l),x.useEffect(function(){i&&l.update()},[l,i,n.children]);const u=l._contentNode;return u?Gd.createPortal(n.children,u):null}return x.forwardRef(t)}function TH(e){function t(n,r){const{instance:i}=e(n).current;return x.useImperativeHandle(r,()=>i),null}return x.forwardRef(t)}function dy(e,t){const n=x.useRef();x.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Kf(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function AH(e,t){return function(r,i){const a=Vf(),l=e(Kf(r,a),a);return zC(a.map,r.attribution),dy(l.current,r.eventHandlers),t(l.current,a,r,i),l}}var wg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(jO,function(n){var r="1.9.4";function i(o){var c,p,v,S;for(p=1,v=arguments.length;p<v;p++){S=arguments[p];for(c in S)o[c]=S[c]}return o}var a=Object.create||function(){function o(){}return function(c){return o.prototype=c,new o}}();function l(o,c){var p=Array.prototype.slice;if(o.bind)return o.bind.apply(o,p.call(arguments,1));var v=p.call(arguments,2);return function(){return o.apply(c,v.length?v.concat(p.call(arguments)):arguments)}}var u=0;function d(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function m(o,c,p){var v,S,T,F;return F=function(){v=!1,S&&(T.apply(p,S),S=!1)},T=function(){v?S=arguments:(o.apply(p,arguments),setTimeout(F,c),v=!0)},T}function h(o,c,p){var v=c[1],S=c[0],T=v-S;return o===v&&p?o:((o-S)%T+T)%T+S}function f(){return!1}function g(o,c){if(c===!1)return o;var p=Math.pow(10,c===void 0?6:c);return Math.round(o*p)/p}function y(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function j(o){return y(o).split(/\s+/)}function w(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?a(o.options):{});for(var p in c)o.options[p]=c[p];return o.options}function P(o,c,p){var v=[];for(var S in o)v.push(encodeURIComponent(p?S.toUpperCase():S)+"="+encodeURIComponent(o[S]));return(!c||c.indexOf("?")===-1?"?":"&")+v.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function N(o,c){return o.replace(b,function(p,v){var S=c[v];if(S===void 0)throw new Error("No value provided for variable "+p);return typeof S=="function"&&(S=S(c)),S})}var _=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function k(o,c){for(var p=0;p<o.length;p++)if(o[p]===c)return p;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var O=0;function I(o){var c=+new Date,p=Math.max(0,16-(c-O));return O=c+p,window.setTimeout(o,p)}var B=window.requestAnimationFrame||A("RequestAnimationFrame")||I,D=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function M(o,c,p){if(p&&B===I)o.call(c);else return B.call(window,l(o,c))}function $(o){o&&D.call(window,o)}var R={__proto__:null,extend:i,create:a,bind:l,get lastId(){return u},stamp:d,throttle:m,wrapNum:h,falseFn:f,formatNum:g,trim:y,splitWords:j,setOptions:w,getParamString:P,template:N,isArray:_,indexOf:k,emptyImageUrl:C,requestFn:B,cancelFn:D,requestAnimFrame:M,cancelAnimFrame:$};function E(){}E.extend=function(o){var c=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,v=a(p);v.constructor=c,c.prototype=v;for(var S in this)Object.prototype.hasOwnProperty.call(this,S)&&S!=="prototype"&&S!=="__super__"&&(c[S]=this[S]);return o.statics&&i(c,o.statics),o.includes&&(U(o.includes),i.apply(null,[v].concat(o.includes))),i(v,o),delete v.statics,delete v.includes,v.options&&(v.options=p.options?a(p.options):{},i(v.options,o.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,F=v._initHooks.length;T<F;T++)v._initHooks[T].call(this)}},c},E.include=function(o){var c=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},E.mergeOptions=function(o){return i(this.prototype.options,o),this},E.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),p=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function U(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=_(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(o,c,p){if(typeof o=="object")for(var v in o)this._on(v,o[v],c);else{o=j(o);for(var S=0,T=o.length;S<T;S++)this._on(o[S],c,p)}return this},off:function(o,c,p){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var v in o)this._off(v,o[v],c);else{o=j(o);for(var S=arguments.length===1,T=0,F=o.length;T<F;T++)S?this._off(o[T]):this._off(o[T],c,p)}return this},_on:function(o,c,p,v){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,p)===!1){p===this&&(p=void 0);var S={fn:c,ctx:p};v&&(S.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(S)}},_off:function(o,c,p){var v,S,T;if(this._events&&(v=this._events[o],!!v)){if(arguments.length===1){if(this._firingCount)for(S=0,T=v.length;S<T;S++)v[S].fn=f;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var F=this._listens(o,c,p);if(F!==!1){var W=v[F];this._firingCount&&(W.fn=f,this._events[o]=v=v.slice()),v.splice(F,1)}}},fire:function(o,c,p){if(!this.listens(o,p))return this;var v=i({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var S=this._events[o];if(S){this._firingCount=this._firingCount+1||1;for(var T=0,F=S.length;T<F;T++){var W=S[T],V=W.fn;W.once&&this.off(o,V,W.ctx),V.call(W.ctx||this,v)}this._firingCount--}}return p&&this._propagateEvent(v),this},listens:function(o,c,p,v){typeof o!="string"&&console.warn('"string" type argument expected');var S=c;typeof c!="function"&&(v=!!c,S=void 0,p=void 0);var T=this._events&&this._events[o];if(T&&T.length&&this._listens(o,S,p)!==!1)return!0;if(v){for(var F in this._eventParents)if(this._eventParents[F].listens(o,c,p,v))return!0}return!1},_listens:function(o,c,p){if(!this._events)return!1;var v=this._events[o]||[];if(!c)return!!v.length;p===this&&(p=void 0);for(var S=0,T=v.length;S<T;S++)if(v[S].fn===c&&v[S].ctx===p)return S;return!1},once:function(o,c,p){if(typeof o=="object")for(var v in o)this._on(v,o[v],c,!0);else{o=j(o);for(var S=0,T=o.length;S<T;S++)this._on(o[S],c,p,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[d(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[d(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var K=E.extend(Z);function z(o,c,p){this.x=p?Math.round(o):o,this.y=p?Math.round(c):c}var G=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(o){return this.clone()._add(Y(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(Y(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new z(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new z(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=G(this.x),this.y=G(this.y),this},distanceTo:function(o){o=Y(o);var c=o.x-this.x,p=o.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(o){return o=Y(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=Y(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function Y(o,c,p){return o instanceof z?o:_(o)?new z(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new z(o.x,o.y):new z(o,c,p)}function re(o,c){if(o)for(var p=c?[o,c]:o,v=0,S=p.length;v<S;v++)this.extend(p[v])}re.prototype={extend:function(o){var c,p;if(!o)return this;if(o instanceof z||typeof o[0]=="number"||"x"in o)c=p=Y(o);else if(o=ne(o),c=o.min,p=o.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(o){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,p;return typeof o[0]=="number"||o instanceof z?o=Y(o):o=ne(o),o instanceof re?(c=o.min,p=o.max):c=p=o,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(o){o=ne(o);var c=this.min,p=this.max,v=o.min,S=o.max,T=S.x>=c.x&&v.x<=p.x,F=S.y>=c.y&&v.y<=p.y;return T&&F},overlaps:function(o){o=ne(o);var c=this.min,p=this.max,v=o.min,S=o.max,T=S.x>c.x&&v.x<p.x,F=S.y>c.y&&v.y<p.y;return T&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,p=this.max,v=Math.abs(c.x-p.x)*o,S=Math.abs(c.y-p.y)*o;return ne(Y(c.x-v,c.y-S),Y(p.x+v,p.y+S))},equals:function(o){return o?(o=ne(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function ne(o,c){return!o||o instanceof re?o:new re(o,c)}function H(o,c){if(o)for(var p=c?[o,c]:o,v=0,S=p.length;v<S;v++)this.extend(p[v])}H.prototype={extend:function(o){var c=this._southWest,p=this._northEast,v,S;if(o instanceof te)v=o,S=o;else if(o instanceof H){if(v=o._southWest,S=o._northEast,!v||!S)return this}else return o?this.extend(ae(o)||X(o)):this;return!c&&!p?(this._southWest=new te(v.lat,v.lng),this._northEast=new te(S.lat,S.lng)):(c.lat=Math.min(v.lat,c.lat),c.lng=Math.min(v.lng,c.lng),p.lat=Math.max(S.lat,p.lat),p.lng=Math.max(S.lng,p.lng)),this},pad:function(o){var c=this._southWest,p=this._northEast,v=Math.abs(c.lat-p.lat)*o,S=Math.abs(c.lng-p.lng)*o;return new H(new te(c.lat-v,c.lng-S),new te(p.lat+v,p.lng+S))},getCenter:function(){return new te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new te(this.getNorth(),this.getWest())},getSouthEast:function(){return new te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof te||"lat"in o?o=ae(o):o=X(o);var c=this._southWest,p=this._northEast,v,S;return o instanceof H?(v=o.getSouthWest(),S=o.getNorthEast()):v=S=o,v.lat>=c.lat&&S.lat<=p.lat&&v.lng>=c.lng&&S.lng<=p.lng},intersects:function(o){o=X(o);var c=this._southWest,p=this._northEast,v=o.getSouthWest(),S=o.getNorthEast(),T=S.lat>=c.lat&&v.lat<=p.lat,F=S.lng>=c.lng&&v.lng<=p.lng;return T&&F},overlaps:function(o){o=X(o);var c=this._southWest,p=this._northEast,v=o.getSouthWest(),S=o.getNorthEast(),T=S.lat>c.lat&&v.lat<p.lat,F=S.lng>c.lng&&v.lng<p.lng;return T&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=X(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function X(o,c){return o instanceof H?o:new H(o,c)}function te(o,c,p){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,p!==void 0&&(this.alt=+p)}te.prototype={equals:function(o,c){if(!o)return!1;o=ae(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+g(this.lat,o)+", "+g(this.lng,o)+")"},distanceTo:function(o){return Ft.distance(this,ae(o))},wrap:function(){return Ft.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,p=c/Math.cos(Math.PI/180*this.lat);return X([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new te(this.lat,this.lng,this.alt)}};function ae(o,c,p){return o instanceof te?o:_(o)&&typeof o[0]!="object"?o.length===3?new te(o[0],o[1],o[2]):o.length===2?new te(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new te(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new te(o,c,p)}var Te={latLngToPoint:function(o,c){var p=this.projection.project(o),v=this.scale(c);return this.transformation._transform(p,v)},pointToLatLng:function(o,c){var p=this.scale(c),v=this.transformation.untransform(o,p);return this.projection.unproject(v)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(o),v=this.transformation.transform(c.min,p),S=this.transformation.transform(c.max,p);return new re(v,S)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?h(o.lng,this.wrapLng,!0):o.lng,p=this.wrapLat?h(o.lat,this.wrapLat,!0):o.lat,v=o.alt;return new te(p,c,v)},wrapLatLngBounds:function(o){var c=o.getCenter(),p=this.wrapLatLng(c),v=c.lat-p.lat,S=c.lng-p.lng;if(v===0&&S===0)return o;var T=o.getSouthWest(),F=o.getNorthEast(),W=new te(T.lat-v,T.lng-S),V=new te(F.lat-v,F.lng-S);return new H(W,V)}},Ft=i({},Te,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var p=Math.PI/180,v=o.lat*p,S=c.lat*p,T=Math.sin((c.lat-o.lat)*p/2),F=Math.sin((c.lng-o.lng)*p/2),W=T*T+Math.cos(v)*Math.cos(S)*F*F,V=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*V}}),se=6378137,ge={R:se,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,p=this.MAX_LATITUDE,v=Math.max(Math.min(p,o.lat),-p),S=Math.sin(v*c);return new z(this.R*o.lng*c,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(o){var c=180/Math.PI;return new te((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:function(){var o=se*Math.PI;return new re([-o,-o],[o,o])}()};function me(o,c,p,v){if(_(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=p,this._d=v}me.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new z((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function J(o,c,p,v){return new me(o,c,p,v)}var ft=i({},Ft,{code:"EPSG:3857",projection:ge,transformation:function(){var o=.5/(Math.PI*ge.R);return J(o,.5,-o,.5)}()}),Ae=i({},ft,{code:"EPSG:900913"});function Tt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function At(o,c){var p="",v,S,T,F,W,V;for(v=0,T=o.length;v<T;v++){for(W=o[v],S=0,F=W.length;S<F;S++)V=W[S],p+=(S?"L":"M")+V.x+" "+V.y;p+=c?ce.svg?"z":"x":""}return p||"M0 0"}var tr=document.documentElement.style,Wi="ActiveXObject"in window,XC=Wi&&!document.addEventListener,gy="msLaunchUri"in navigator&&!("documentMode"in document),Qf=vr("webkit"),vy=vr("android"),yy=vr("android 2")||vr("android 3"),QC=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),JC=vy&&vr("Google")&&QC<537&&!("AudioNode"in window),Jf=!!window.opera,xy=!gy&&vr("chrome"),by=vr("gecko")&&!Qf&&!Jf&&!Wi,eE=!xy&&vr("safari"),_y=vr("phantom"),wy="OTransition"in tr,tE=navigator.platform.indexOf("Win")===0,jy=Wi&&"transition"in tr,eh="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!yy,Ny="MozPerspective"in tr,nE=!window.L_DISABLE_3D&&(jy||eh||Ny)&&!wy&&!_y,ro=typeof orientation<"u"||vr("mobile"),rE=ro&&Qf,iE=ro&&eh,Sy=!window.PointerEvent&&window.MSPointerEvent,Py=!!(window.PointerEvent||Sy),ky="ontouchstart"in window||!!window.TouchEvent,aE=!window.L_NO_TOUCH&&(ky||Py),sE=ro&&Jf,oE=ro&&by,lE=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,cE=function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return o}(),uE=function(){return!!document.createElement("canvas").getContext}(),th=!!(document.createElementNS&&Tt("svg").createSVGRect),dE=!!th&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),fE=!th&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),hE=navigator.platform.indexOf("Mac")===0,mE=navigator.platform.indexOf("Linux")===0;function vr(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var ce={ie:Wi,ielt9:XC,edge:gy,webkit:Qf,android:vy,android23:yy,androidStock:JC,opera:Jf,chrome:xy,gecko:by,safari:eE,phantom:_y,opera12:wy,win:tE,ie3d:jy,webkit3d:eh,gecko3d:Ny,any3d:nE,mobile:ro,mobileWebkit:rE,mobileWebkit3d:iE,msPointer:Sy,pointer:Py,touch:aE,touchNative:ky,mobileOpera:sE,mobileGecko:oE,retina:lE,passiveEvents:cE,canvas:uE,svg:th,vml:fE,inlineSvg:dE,mac:hE,linux:mE},Cy=ce.msPointer?"MSPointerDown":"pointerdown",Ey=ce.msPointer?"MSPointerMove":"pointermove",Oy=ce.msPointer?"MSPointerUp":"pointerup",Ty=ce.msPointer?"MSPointerCancel":"pointercancel",nh={touchstart:Cy,touchmove:Ey,touchend:Oy,touchcancel:Ty},Ay={touchstart:bE,touchmove:tc,touchend:tc,touchcancel:tc},Ra={},My=!1;function pE(o,c,p){return c==="touchstart"&&xE(),Ay[c]?(p=Ay[c].bind(this,p),o.addEventListener(nh[c],p,!1),p):(console.warn("wrong event specified:",c),f)}function gE(o,c,p){if(!nh[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(nh[c],p,!1)}function vE(o){Ra[o.pointerId]=o}function yE(o){Ra[o.pointerId]&&(Ra[o.pointerId]=o)}function Ly(o){delete Ra[o.pointerId]}function xE(){My||(document.addEventListener(Cy,vE,!0),document.addEventListener(Ey,yE,!0),document.addEventListener(Oy,Ly,!0),document.addEventListener(Ty,Ly,!0),My=!0)}function tc(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in Ra)c.touches.push(Ra[p]);c.changedTouches=[c],o(c)}}function bE(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&_t(c),tc(o,c)}function _E(o){var c={},p,v;for(v in o)p=o[v],c[v]=p&&p.bind?p.bind(o):p;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var wE=200;function jE(o,c){o.addEventListener("dblclick",c);var p=0,v;function S(T){if(T.detail!==1){v=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var F=$y(T);if(!(F.some(function(V){return V instanceof HTMLLabelElement&&V.attributes.for})&&!F.some(function(V){return V instanceof HTMLInputElement||V instanceof HTMLSelectElement}))){var W=Date.now();W-p<=wE?(v++,v===2&&c(_E(T))):v=1,p=W}}}return o.addEventListener("click",S),{dblclick:c,simDblclick:S}}function NE(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var rh=ic(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),io=ic(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Dy=io==="webkitTransition"||io==="OTransition"?io+"End":"transitionend";function Iy(o){return typeof o=="string"?document.getElementById(o):o}function ao(o,c){var p=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(o,null);p=v?v[c]:null}return p==="auto"?null:p}function Pe(o,c,p){var v=document.createElement(o);return v.className=c||"",p&&p.appendChild(v),v}function We(o){var c=o.parentNode;c&&c.removeChild(o)}function nc(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function za(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function $a(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function ih(o,c){if(o.classList!==void 0)return o.classList.contains(c);var p=rc(o);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function ye(o,c){if(o.classList!==void 0)for(var p=j(c),v=0,S=p.length;v<S;v++)o.classList.add(p[v]);else if(!ih(o,c)){var T=rc(o);ah(o,(T?T+" ":"")+c)}}function Xe(o,c){o.classList!==void 0?o.classList.remove(c):ah(o,y((" "+rc(o)+" ").replace(" "+c+" "," ")))}function ah(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function rc(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function En(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&SE(o,c)}function SE(o,c){var p=!1,v="DXImageTransform.Microsoft.Alpha";try{p=o.filters.item(v)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):o.style.filter+=" progid:"+v+"(opacity="+c+")"}function ic(o){for(var c=document.documentElement.style,p=0;p<o.length;p++)if(o[p]in c)return o[p];return!1}function Vi(o,c,p){var v=c||new z(0,0);o.style[rh]=(ce.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(p?" scale("+p+")":"")}function et(o,c){o._leaflet_pos=c,ce.any3d?Vi(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function Ki(o){return o._leaflet_pos||new z(0,0)}var so,oo,sh;if("onselectstart"in document)so=function(){ve(window,"selectstart",_t)},oo=function(){De(window,"selectstart",_t)};else{var lo=ic(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);so=function(){if(lo){var o=document.documentElement.style;sh=o[lo],o[lo]="none"}},oo=function(){lo&&(document.documentElement.style[lo]=sh,sh=void 0)}}function oh(){ve(window,"dragstart",_t)}function lh(){De(window,"dragstart",_t)}var ac,ch;function uh(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(sc(),ac=o,ch=o.style.outlineStyle,o.style.outlineStyle="none",ve(window,"keydown",sc))}function sc(){ac&&(ac.style.outlineStyle=ch,ac=void 0,ch=void 0,De(window,"keydown",sc))}function Ry(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function dh(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var PE={__proto__:null,TRANSFORM:rh,TRANSITION:io,TRANSITION_END:Dy,get:Iy,getStyle:ao,create:Pe,remove:We,empty:nc,toFront:za,toBack:$a,hasClass:ih,addClass:ye,removeClass:Xe,setClass:ah,getClass:rc,setOpacity:En,testProp:ic,setTransform:Vi,setPosition:et,getPosition:Ki,get disableTextSelection(){return so},get enableTextSelection(){return oo},disableImageDrag:oh,enableImageDrag:lh,preventOutline:uh,restoreOutline:sc,getSizedParentNode:Ry,getScale:dh};function ve(o,c,p,v){if(c&&typeof c=="object")for(var S in c)hh(o,S,c[S],p);else{c=j(c);for(var T=0,F=c.length;T<F;T++)hh(o,c[T],p,v)}return this}var yr="_leaflet_events";function De(o,c,p,v){if(arguments.length===1)zy(o),delete o[yr];else if(c&&typeof c=="object")for(var S in c)mh(o,S,c[S],p);else if(c=j(c),arguments.length===2)zy(o,function(W){return k(c,W)!==-1});else for(var T=0,F=c.length;T<F;T++)mh(o,c[T],p,v);return this}function zy(o,c){for(var p in o[yr]){var v=p.split(/\d/)[0];(!c||c(v))&&mh(o,v,null,null,p)}}var fh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hh(o,c,p,v){var S=c+d(p)+(v?"_"+d(v):"");if(o[yr]&&o[yr][S])return this;var T=function(W){return p.call(v||o,W||window.event)},F=T;!ce.touchNative&&ce.pointer&&c.indexOf("touch")===0?T=pE(o,c,T):ce.touch&&c==="dblclick"?T=jE(o,T):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(fh[c]||c,T,ce.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(T=function(W){W=W||window.event,gh(o,W)&&F(W)},o.addEventListener(fh[c],T,!1)):o.addEventListener(c,F,!1):o.attachEvent("on"+c,T),o[yr]=o[yr]||{},o[yr][S]=T}function mh(o,c,p,v,S){S=S||c+d(p)+(v?"_"+d(v):"");var T=o[yr]&&o[yr][S];if(!T)return this;!ce.touchNative&&ce.pointer&&c.indexOf("touch")===0?gE(o,c,T):ce.touch&&c==="dblclick"?NE(o,T):"removeEventListener"in o?o.removeEventListener(fh[c]||c,T,!1):o.detachEvent("on"+c,T),o[yr][S]=null}function qi(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function ph(o){return hh(o,"wheel",qi),this}function co(o){return ve(o,"mousedown touchstart dblclick contextmenu",qi),o._leaflet_disable_click=!0,this}function _t(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Gi(o){return _t(o),qi(o),this}function $y(o){if(o.composedPath)return o.composedPath();for(var c=[],p=o.target;p;)c.push(p),p=p.parentNode;return c}function By(o,c){if(!c)return new z(o.clientX,o.clientY);var p=dh(c),v=p.boundingClientRect;return new z((o.clientX-v.left)/p.x-c.clientLeft,(o.clientY-v.top)/p.y-c.clientTop)}var kE=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fy(o){return ce.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/kE:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function gh(o,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==o;)p=p.parentNode}catch{return!1}return p!==o}var CE={__proto__:null,on:ve,off:De,stopPropagation:qi,disableScrollPropagation:ph,disableClickPropagation:co,preventDefault:_t,stop:Gi,getPropagationPath:$y,getMousePosition:By,getWheelDelta:Fy,isExternalTarget:gh,addListener:ve,removeListener:De},Uy=K.extend({run:function(o,c,p,v){this.stop(),this._el=o,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=Ki(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var p=this._startPos.add(this._offset.multiplyBy(o));c&&p._round(),et(this._el,p),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),je=K.extend({options:{crs:ft,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=w(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ae(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=io&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ve(this._proxy,Dy,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(ae(o),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=i({animate:p.animate},p.zoom),p.pan=i({animate:p.animate,duration:p.duration},p.pan));var v=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,p.zoom):this._tryAnimatedPan(o,p.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,p){var v=this.getZoomScale(c),S=this.getSize().divideBy(2),T=o instanceof z?o:this.latLngToContainerPoint(o),F=T.subtract(S).multiplyBy(1-1/v),W=this.containerPointToLatLng(S.add(F));return this.setView(W,c,{zoom:p})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():X(o);var p=Y(c.paddingTopLeft||c.padding||[0,0]),v=Y(c.paddingBottomRight||c.padding||[0,0]),S=this.getBoundsZoom(o,!1,p.add(v));if(S=typeof c.maxZoom=="number"?Math.min(c.maxZoom,S):S,S===1/0)return{center:o.getCenter(),zoom:S};var T=v.subtract(p).divideBy(2),F=this.project(o.getSouthWest(),S),W=this.project(o.getNorthEast(),S),V=this.unproject(F.add(W).divideBy(2).add(T),S);return{center:V,zoom:S}},fitBounds:function(o,c){if(o=X(o),!o.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(o,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=Y(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Uy,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){ye(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,p){if(p=p||{},p.animate===!1||!ce.any3d)return this.setView(o,c,p);this._stop();var v=this.project(this.getCenter()),S=this.project(o),T=this.getSize(),F=this._zoom;o=ae(o),c=c===void 0?F:c;var W=Math.max(T.x,T.y),V=W*this.getZoomScale(F,c),Q=S.distanceTo(v)||1,ie=1.42,fe=ie*ie;function be(tt){var yc=tt?-1:1,gO=tt?V:W,vO=V*V-W*W+yc*fe*fe*Q*Q,yO=2*gO*fe*Q,kh=vO/yO,wx=Math.sqrt(kh*kh+1)-kh,xO=wx<1e-9?-18:Math.log(wx);return xO}function Ut(tt){return(Math.exp(tt)-Math.exp(-tt))/2}function ht(tt){return(Math.exp(tt)+Math.exp(-tt))/2}function Tn(tt){return Ut(tt)/ht(tt)}var Qt=be(0);function Wa(tt){return W*(ht(Qt)/ht(Qt+ie*tt))}function fO(tt){return W*(ht(Qt)*Tn(Qt+ie*tt)-Ut(Qt))/fe}function hO(tt){return 1-Math.pow(1-tt,1.5)}var mO=Date.now(),bx=(be(1)-Qt)/ie,pO=p.duration?1e3*p.duration:1e3*bx*.8;function _x(){var tt=(Date.now()-mO)/pO,yc=hO(tt)*bx;tt<=1?(this._flyToFrame=M(_x,this),this._move(this.unproject(v.add(S.subtract(v).multiplyBy(fO(yc)/Q)),F),this.getScaleZoom(W/Wa(yc),F),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),_x.call(this),this},flyToBounds:function(o,c){var p=this._getBoundsCenterZoom(o,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(o){return o=X(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var p=this.getCenter(),v=this._limitCenter(p,this._zoom,X(o));return p.equals(v)||this.panTo(v,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var p=Y(c.paddingTopLeft||c.padding||[0,0]),v=Y(c.paddingBottomRight||c.padding||[0,0]),S=this.project(this.getCenter()),T=this.project(o),F=this.getPixelBounds(),W=ne([F.min.add(p),F.max.subtract(v)]),V=W.getSize();if(!W.contains(T)){this._enforcingBounds=!0;var Q=T.subtract(W.getCenter()),ie=W.extend(T).getSize().subtract(V);S.x+=Q.x<0?-ie.x:ie.x,S.y+=Q.y<0?-ie.y:ie.y,this.panTo(this.unproject(S),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),v=c.divideBy(2).round(),S=p.divideBy(2).round(),T=v.subtract(S);return!T.x&&!T.y?this:(o.animate&&o.pan?this.panBy(T):(o.pan&&this._rawPanBy(T),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=l(this._handleGeolocationResponse,this),p=l(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,o):navigator.geolocation.getCurrentPosition(c,p,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,p=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,p=o.coords.longitude,v=new te(c,p),S=v.toBounds(o.coords.accuracy*2),T=this._locateOptions;if(T.setView){var F=this.getBoundsZoom(S);this.setView(v,T.maxZoom?Math.min(F,T.maxZoom):F)}var W={latlng:v,bounds:S,timestamp:o.timestamp};for(var V in o.coords)typeof o.coords[V]=="number"&&(W[V]=o.coords[V]);this.fire("locationfound",W)}},addHandler:function(o,c){if(!c)return this;var p=this[o]=new c(this);return this._handlers.push(p),this.options[o]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),We(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)We(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var p="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),v=Pe("div",p,c||this._mapPane);return o&&(this._panes[o]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),p=this.unproject(o.getTopRight());return new H(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,p){o=X(o),p=Y(p||[0,0]);var v=this.getZoom()||0,S=this.getMinZoom(),T=this.getMaxZoom(),F=o.getNorthWest(),W=o.getSouthEast(),V=this.getSize().subtract(p),Q=ne(this.project(W,v),this.project(F,v)).getSize(),ie=ce.any3d?this.options.zoomSnap:1,fe=V.x/Q.x,be=V.y/Q.y,Ut=c?Math.max(fe,be):Math.min(fe,be);return v=this.getScaleZoom(Ut,v),ie&&(v=Math.round(v/(ie/100))*(ie/100),v=c?Math.ceil(v/ie)*ie:Math.floor(v/ie)*ie),Math.max(S,Math.min(T,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var p=this._getTopLeftPoint(o,c);return new re(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(o)/p.scale(c)},getScaleZoom:function(o,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var v=p.zoom(o*p.scale(c));return isNaN(v)?1/0:v},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ae(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Y(o),c)},layerPointToLatLng:function(o){var c=Y(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(ae(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ae(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(X(o))},distance:function(o,c){return this.options.crs.distance(ae(o),ae(c))},containerPointToLayerPoint:function(o){return Y(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return Y(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(Y(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(o)))},mouseEventToContainerPoint:function(o){return By(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=Iy(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ve(c,"scroll",this._onScroll,this),this._containerId=d(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,ye(o,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=ao(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),et(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ye(o.markerPane,"leaflet-zoom-hide"),ye(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,p){et(this._mapPane,new z(0,0));var v=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var S=this._zoom!==c;this._moveStart(S,p)._move(o,c)._moveEnd(S),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,p,v){c===void 0&&(c=this._zoom);var S=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),v?p&&p.pinch&&this.fire("zoom",p):((S||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){et(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[d(this._container)]=this;var c=o?De:ve;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var p=[],v,S=c==="mouseout"||c==="mouseover",T=o.target||o.srcElement,F=!1;T;){if(v=this._targets[d(T)],v&&(c==="click"||c==="preclick")&&this._draggableMoved(v)){F=!0;break}if(v&&v.listens(c,!0)&&(S&&!gh(T,o)||(p.push(v),S))||T===this._container)break;T=T.parentNode}return!p.length&&!F&&!S&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var p=o.type;p==="mousedown"&&uh(c),this._fireDOMEvent(o,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,p){if(o.type==="click"){var v=i({},o);v.type="preclick",this._fireDOMEvent(v,v.type,p)}var S=this._findEventTargets(o,c);if(p){for(var T=[],F=0;F<p.length;F++)p[F].listens(c,!0)&&T.push(p[F]);S=T.concat(S)}if(S.length){c==="contextmenu"&&_t(o);var W=S[0],V={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);V.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(o),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=Q?W.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(F=0;F<S.length;F++)if(S[F].fire(c,V,!0),V.originalEvent._stopped||S[F].options.bubblingMouseEvents===!1&&k(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return Ki(this._mapPane)||new z(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var p=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var p=this.getSize()._divideBy(2);return this.project(o,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,p){var v=this._getNewPixelOrigin(p,c);return this.project(o,c)._subtract(v)},_latLngBoundsToNewLayerBounds:function(o,c,p){var v=this._getNewPixelOrigin(p,c);return ne([this.project(o.getSouthWest(),c)._subtract(v),this.project(o.getNorthWest(),c)._subtract(v),this.project(o.getSouthEast(),c)._subtract(v),this.project(o.getNorthEast(),c)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,p){if(!p)return o;var v=this.project(o,c),S=this.getSize().divideBy(2),T=new re(v.subtract(S),v.add(S)),F=this._getBoundsOffset(T,p,c);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?o:this.unproject(v.add(F),c)},_limitOffset:function(o,c){if(!c)return o;var p=this.getPixelBounds(),v=new re(p.min.add(o),p.max.add(o));return o.add(this._getBoundsOffset(v,c))},_getBoundsOffset:function(o,c,p){var v=ne(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),S=v.min.subtract(o.min),T=v.max.subtract(o.max),F=this._rebound(S.x,-T.x),W=this._rebound(S.y,-T.y);return new z(F,W)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),p=this.getMaxZoom(),v=ce.any3d?this.options.zoomSnap:1;return v&&(o=Math.round(o/v)*v),Math.max(c,Math.min(p,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var p=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var o=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var p=rh,v=this._proxy.style[p];Vi(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),v===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){We(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();Vi(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(c),S=this._getCenterOffset(o)._divideBy(1-1/v);return p.animate!==!0&&!this.getSize().contains(S)?!1:(M(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,p,v){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,ye(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function EE(o,c){return new je(o,c)}var nr=E.extend({options:{position:"topright"},initialize:function(o){w(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),p=this.getPosition(),v=o._controlCorners[p];return ye(c,"leaflet-control"),p.indexOf("bottom")!==-1?v.insertBefore(c,v.firstChild):v.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(We(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),uo=function(o){return new nr(o)};je.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",p=this._controlContainer=Pe("div",c+"control-container",this._container);function v(S,T){var F=c+S+" "+c+T;o[S+T]=Pe("div",F,p)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)We(this._controlCorners[o]);We(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Hy=nr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,p,v){return p<v?-1:v<p?1:0}},initialize:function(o,c,p){w(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in o)this._addLayer(o[v],v);for(v in c)this._addLayer(c[v],v,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return nr.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(d(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){ye(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(ye(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Xe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=Pe("div",o),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),co(c),ph(c);var v=this._section=Pe("section",o+"-list");p&&(this._map.on("click",this.collapse,this),ve(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=Pe("a",o+"-toggle",c);S.href="#",S.title="Layers",S.setAttribute("role","button"),ve(S,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){_t(T),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Pe("div",o+"-base",v),this._separator=Pe("div",o+"-separator",v),this._overlaysList=Pe("div",o+"-overlays",v),c.appendChild(v)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&d(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,p){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(l(function(v,S){return this.options.sortFunction(v.layer,S.layer,v.name,S.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;nc(this._baseLayersList),nc(this._overlaysList),this._layerControlInputs=[];var o,c,p,v,S=0;for(p=0;p<this._layers.length;p++)v=this._layers[p],this._addItem(v),c=c||v.overlay,o=o||!v.overlay,S+=v.overlay?0:1;return this.options.hideSingleBase&&(o=o&&S>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(d(o.target)),p=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(o,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=p,v.firstChild},_addItem:function(o){var c=document.createElement("label"),p=this._map.hasLayer(o.layer),v;o.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=p):v=this._createRadioElement("leaflet-base-layers_"+d(this),p),this._layerControlInputs.push(v),v.layerId=d(o.layer),ve(v,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+o.name;var T=document.createElement("span");c.appendChild(T),T.appendChild(v),T.appendChild(S);var F=o.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,p,v=[],S=[];this._handlingClick=!0;for(var T=o.length-1;T>=0;T--)c=o[T],p=this._getLayer(c.layerId).layer,c.checked?v.push(p):c.checked||S.push(p);for(T=0;T<S.length;T++)this._map.hasLayer(S[T])&&this._map.removeLayer(S[T]);for(T=0;T<v.length;T++)this._map.hasLayer(v[T])||this._map.addLayer(v[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,p,v=this._map.getZoom(),S=o.length-1;S>=0;S--)c=o[S],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&v<p.options.minZoom||p.options.maxZoom!==void 0&&v>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ve(o,"click",_t),this.expand();var c=this;setTimeout(function(){De(o,"click",_t),c._preventClick=!1})}}),OE=function(o,c,p){return new Hy(o,c,p)},vh=nr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",p=Pe("div",c+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,p,v,S){var T=Pe("a",p,v);return T.innerHTML=o,T.href="#",T.title=c,T.setAttribute("role","button"),T.setAttribute("aria-label",c),co(T),ve(T,"click",Gi),ve(T,"click",S,this),ve(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";Xe(this._zoomInButton,c),Xe(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(ye(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(ye(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});je.mergeOptions({zoomControl:!0}),je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new vh,this.addControl(this.zoomControl))});var TE=function(o){return new vh(o)},Zy=nr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",p=Pe("div",c),v=this.options;return this._addScales(v,c+"-line",p),o.on(v.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),p},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,p){o.metric&&(this._mScale=Pe("div",c,p)),o.imperial&&(this._iScale=Pe("div",c,p))},_update:function(){var o=this._map,c=o.getSize().y/2,p=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/o)},_updateImperial:function(o){var c=o*3.2808399,p,v,S;c>5280?(p=c/5280,v=this._getRoundNum(p),this._updateScale(this._iScale,v+" mi",v/p)):(S=this._getRoundNum(c),this._updateScale(this._iScale,S+" ft",S/c))},_updateScale:function(o,c,p){o.style.width=Math.round(this.options.maxWidth*p)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),p=o/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),AE=function(o){return new Zy(o)},ME='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',yh=nr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?ME+" ":"")+"Leaflet</a>"},initialize:function(o){w(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),co(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),o.length&&p.push(o.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});je.mergeOptions({attributionControl:!0}),je.addInitHook(function(){this.options.attributionControl&&new yh().addTo(this)});var LE=function(o){return new yh(o)};nr.Layers=Hy,nr.Zoom=vh,nr.Scale=Zy,nr.Attribution=yh,uo.layers=OE,uo.zoom=TE,uo.scale=AE,uo.attribution=LE;var xr=E.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xr.addTo=function(o,c){return o.addHandler(c,this),this};var DE={Events:Z},Wy=ce.touch?"touchstart mousedown":"mousedown",di=K.extend({options:{clickTolerance:3},initialize:function(o,c,p,v){w(this,v),this._element=o,this._dragStartTarget=c||o,this._preventOutline=p},enable:function(){this._enabled||(ve(this._dragStartTarget,Wy,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(di._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,Wy,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!ih(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){di._dragging===this&&this.finishDrag();return}if(!(di._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(di._dragging=this,this._preventOutline&&uh(this._element),oh(),so(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,p=Ry(this._element);this._startPoint=new z(c.clientX,c.clientY),this._startPos=Ki(this._element),this._parentScale=dh(p);var v=o.type==="mousedown";ve(document,v?"mousemove":"touchmove",this._onMove,this),ve(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,p=new z(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,_t(o),this._moved||(this.fire("dragstart"),this._moved=!0,ye(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ye(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),et(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Xe(document.body,"leaflet-dragging"),this._lastTarget&&(Xe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),lh(),oo();var c=this._moved&&this._moving;this._moving=!1,di._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Vy(o,c,p){var v,S=[1,4,2,8],T,F,W,V,Q,ie,fe,be;for(T=0,ie=o.length;T<ie;T++)o[T]._code=Yi(o[T],c);for(W=0;W<4;W++){for(fe=S[W],v=[],T=0,ie=o.length,F=ie-1;T<ie;F=T++)V=o[T],Q=o[F],V._code&fe?Q._code&fe||(be=oc(Q,V,fe,c,p),be._code=Yi(be,c),v.push(be)):(Q._code&fe&&(be=oc(Q,V,fe,c,p),be._code=Yi(be,c),v.push(be)),v.push(V));o=v}return o}function Ky(o,c){var p,v,S,T,F,W,V,Q,ie;if(!o||o.length===0)throw new Error("latlngs not passed");On(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var fe=ae([0,0]),be=X(o),Ut=be.getNorthWest().distanceTo(be.getSouthWest())*be.getNorthEast().distanceTo(be.getNorthWest());Ut<1700&&(fe=xh(o));var ht=o.length,Tn=[];for(p=0;p<ht;p++){var Qt=ae(o[p]);Tn.push(c.project(ae([Qt.lat-fe.lat,Qt.lng-fe.lng])))}for(W=V=Q=0,p=0,v=ht-1;p<ht;v=p++)S=Tn[p],T=Tn[v],F=S.y*T.x-T.y*S.x,V+=(S.x+T.x)*F,Q+=(S.y+T.y)*F,W+=F*3;W===0?ie=Tn[0]:ie=[V/W,Q/W];var Wa=c.unproject(Y(ie));return ae([Wa.lat+fe.lat,Wa.lng+fe.lng])}function xh(o){for(var c=0,p=0,v=0,S=0;S<o.length;S++){var T=ae(o[S]);c+=T.lat,p+=T.lng,v++}return ae([c/v,p/v])}var IE={__proto__:null,clipPolygon:Vy,polygonCenter:Ky,centroid:xh};function qy(o,c){if(!c||!o.length)return o.slice();var p=c*c;return o=$E(o,p),o=zE(o,p),o}function Gy(o,c,p){return Math.sqrt(fo(o,c,p,!0))}function RE(o,c,p){return fo(o,c,p)}function zE(o,c){var p=o.length,v=typeof Uint8Array<"u"?Uint8Array:Array,S=new v(p);S[0]=S[p-1]=1,bh(o,S,c,0,p-1);var T,F=[];for(T=0;T<p;T++)S[T]&&F.push(o[T]);return F}function bh(o,c,p,v,S){var T=0,F,W,V;for(W=v+1;W<=S-1;W++)V=fo(o[W],o[v],o[S],!0),V>T&&(F=W,T=V);T>p&&(c[F]=1,bh(o,c,p,v,F),bh(o,c,p,F,S))}function $E(o,c){for(var p=[o[0]],v=1,S=0,T=o.length;v<T;v++)BE(o[v],o[S])>c&&(p.push(o[v]),S=v);return S<T-1&&p.push(o[T-1]),p}var Yy;function Xy(o,c,p,v,S){var T=v?Yy:Yi(o,p),F=Yi(c,p),W,V,Q;for(Yy=F;;){if(!(T|F))return[o,c];if(T&F)return!1;W=T||F,V=oc(o,c,W,p,S),Q=Yi(V,p),W===T?(o=V,T=Q):(c=V,F=Q)}}function oc(o,c,p,v,S){var T=c.x-o.x,F=c.y-o.y,W=v.min,V=v.max,Q,ie;return p&8?(Q=o.x+T*(V.y-o.y)/F,ie=V.y):p&4?(Q=o.x+T*(W.y-o.y)/F,ie=W.y):p&2?(Q=V.x,ie=o.y+F*(V.x-o.x)/T):p&1&&(Q=W.x,ie=o.y+F*(W.x-o.x)/T),new z(Q,ie,S)}function Yi(o,c){var p=0;return o.x<c.min.x?p|=1:o.x>c.max.x&&(p|=2),o.y<c.min.y?p|=4:o.y>c.max.y&&(p|=8),p}function BE(o,c){var p=c.x-o.x,v=c.y-o.y;return p*p+v*v}function fo(o,c,p,v){var S=c.x,T=c.y,F=p.x-S,W=p.y-T,V=F*F+W*W,Q;return V>0&&(Q=((o.x-S)*F+(o.y-T)*W)/V,Q>1?(S=p.x,T=p.y):Q>0&&(S+=F*Q,T+=W*Q)),F=o.x-S,W=o.y-T,v?F*F+W*W:new z(S,T)}function On(o){return!_(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Qy(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),On(o)}function Jy(o,c){var p,v,S,T,F,W,V,Q;if(!o||o.length===0)throw new Error("latlngs not passed");On(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ie=ae([0,0]),fe=X(o),be=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());be<1700&&(ie=xh(o));var Ut=o.length,ht=[];for(p=0;p<Ut;p++){var Tn=ae(o[p]);ht.push(c.project(ae([Tn.lat-ie.lat,Tn.lng-ie.lng])))}for(p=0,v=0;p<Ut-1;p++)v+=ht[p].distanceTo(ht[p+1])/2;if(v===0)Q=ht[0];else for(p=0,T=0;p<Ut-1;p++)if(F=ht[p],W=ht[p+1],S=F.distanceTo(W),T+=S,T>v){V=(T-v)/S,Q=[W.x-V*(W.x-F.x),W.y-V*(W.y-F.y)];break}var Qt=c.unproject(Y(Q));return ae([Qt.lat+ie.lat,Qt.lng+ie.lng])}var FE={__proto__:null,simplify:qy,pointToSegmentDistance:Gy,closestPointOnSegment:RE,clipSegment:Xy,_getEdgeIntersection:oc,_getBitCode:Yi,_sqClosestPointOnSegment:fo,isFlat:On,_flat:Qy,polylineCenter:Jy},_h={project:function(o){return new z(o.lng,o.lat)},unproject:function(o){return new te(o.y,o.x)},bounds:new re([-180,-90],[180,90])},wh={R:6378137,R_MINOR:6356752314245179e-9,bounds:new re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,p=this.R,v=o.lat*c,S=this.R_MINOR/p,T=Math.sqrt(1-S*S),F=T*Math.sin(v),W=Math.tan(Math.PI/4-v/2)/Math.pow((1-F)/(1+F),T/2);return v=-p*Math.log(Math.max(W,1e-10)),new z(o.lng*c*p,v)},unproject:function(o){for(var c=180/Math.PI,p=this.R,v=this.R_MINOR/p,S=Math.sqrt(1-v*v),T=Math.exp(-o.y/p),F=Math.PI/2-2*Math.atan(T),W=0,V=.1,Q;W<15&&Math.abs(V)>1e-7;W++)Q=S*Math.sin(F),Q=Math.pow((1-Q)/(1+Q),S/2),V=Math.PI/2-2*Math.atan(T*Q)-F,F+=V;return new te(F*c,o.x*c/p)}},UE={__proto__:null,LonLat:_h,Mercator:wh,SphericalMercator:ge},HE=i({},Ft,{code:"EPSG:3395",projection:wh,transformation:function(){var o=.5/(Math.PI*wh.R);return J(o,.5,-o,.5)}()}),ex=i({},Ft,{code:"EPSG:4326",projection:_h,transformation:J(1/180,1,-1/180,.5)}),ZE=i({},Te,{projection:_h,transformation:J(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var p=c.lng-o.lng,v=c.lat-o.lat;return Math.sqrt(p*p+v*v)},infinite:!0});Te.Earth=Ft,Te.EPSG3395=HE,Te.EPSG3857=ft,Te.EPSG900913=Ae,Te.EPSG4326=ex,Te.Simple=ZE;var rr=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[d(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[d(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});je.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=d(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=d(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return d(o)in this._layers},eachLayer:function(o,c){for(var p in this._layers)o.call(c,this._layers[p]);return this},_addLayers:function(o){o=o?_(o)?o:[o]:[];for(var c=0,p=o.length;c<p;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[d(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=d(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,p=this._getZoomSpan();for(var v in this._zoomBoundLayers){var S=this._zoomBoundLayers[v].options;o=S.minZoom===void 0?o:Math.min(o,S.minZoom),c=S.maxZoom===void 0?c:Math.max(c,S.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ba=rr.extend({initialize:function(o,c){w(this,c),this._layers={};var p,v;if(o)for(p=0,v=o.length;p<v;p++)this.addLayer(o[p])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),p,v;for(p in this._layers)v=this._layers[p],v[o]&&v[o].apply(v,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var p in this._layers)o.call(c,this._layers[p]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return d(o)}}),WE=function(o,c){return new Ba(o,c)},Ar=Ba.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ba.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ba.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new H;for(var c in this._layers){var p=this._layers[c];o.extend(p.getBounds?p.getBounds():p.getLatLng())}return o}}),VE=function(o,c){return new Ar(o,c)},Fa=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){w(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var p=this._getIconUrl(o);if(!p){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(v,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(o,c){var p=this.options,v=p[c+"Size"];typeof v=="number"&&(v=[v,v]);var S=Y(v),T=Y(c==="shadow"&&p.shadowAnchor||p.iconAnchor||S&&S.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(p.className||""),T&&(o.style.marginLeft=-T.x+"px",o.style.marginTop=-T.y+"px"),S&&(o.style.width=S.x+"px",o.style.height=S.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return ce.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function KE(o){return new Fa(o)}var ho=Fa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof ho.imagePath!="string"&&(ho.imagePath=this._detectIconPath()),(this.options.imagePath||ho.imagePath)+Fa.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(p,v,S){var T=v.exec(p);return T&&T[S]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Pe("div","leaflet-default-icon-path",document.body),c=ao(o,"background-image")||ao(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),tx=xr.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new di(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ye(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,p=c._map,v=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,T=Ki(c._icon),F=p.getPixelBounds(),W=p.getPixelOrigin(),V=ne(F.min._subtract(W).add(S),F.max._subtract(W).subtract(S));if(!V.contains(T)){var Q=Y((Math.max(V.max.x,T.x)-V.max.x)/(F.max.x-V.max.x)-(Math.min(V.min.x,T.x)-V.min.x)/(F.min.x-V.min.x),(Math.max(V.max.y,T.y)-V.max.y)/(F.max.y-V.max.y)-(Math.min(V.min.y,T.y)-V.min.y)/(F.min.y-V.min.y)).multiplyBy(v);p.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),et(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=M(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,p=c._shadow,v=Ki(c._icon),S=c._map.layerPointToLatLng(v);p&&et(p,v),c._latlng=S,o.latlng=S,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),lc=rr.extend({options:{icon:new ho,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){w(this,c),this._latlng=ae(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=ae(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=o.icon.createIcon(this._icon),v=!1;p!==this._icon&&(this._icon&&this._removeIcon(),v=!0,o.title&&(p.title=o.title),p.tagName==="IMG"&&(p.alt=o.alt||"")),ye(p,c),o.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ve(p,"focus",this._panOnFocus,this);var S=o.icon.createShadow(this._shadow),T=!1;S!==this._shadow&&(this._removeShadow(),T=!0),S&&(ye(S,c),S.alt=""),this._shadow=S,o.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&T&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),We(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&We(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&et(this._icon,o),this._shadow&&et(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(ye(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),tx)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new tx(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&En(this._icon,o),this._shadow&&En(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,p=c.iconSize?Y(c.iconSize):Y(0,0),v=c.iconAnchor?Y(c.iconAnchor):Y(0,0);o.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:p.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function qE(o,c){return new lc(o,c)}var fi=rr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return w(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),cc=fi.extend({options:{fill:!0,radius:10},initialize:function(o,c){w(this,c),this._latlng=ae(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=ae(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return fi.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,p=this._clickTolerance(),v=[o+p,c+p];this._pxBounds=new re(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function GE(o,c){return new cc(o,c)}var jh=cc.extend({initialize:function(o,c,p){if(typeof c=="number"&&(c=i({},p,{radius:c})),w(this,c),this._latlng=ae(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:fi.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,p=this._map,v=p.options.crs;if(v.distance===Ft.distance){var S=Math.PI/180,T=this._mRadius/Ft.R/S,F=p.project([c+T,o]),W=p.project([c-T,o]),V=F.add(W).divideBy(2),Q=p.unproject(V).lat,ie=Math.acos((Math.cos(T*S)-Math.sin(c*S)*Math.sin(Q*S))/(Math.cos(c*S)*Math.cos(Q*S)))/S;(isNaN(ie)||ie===0)&&(ie=T/Math.cos(Math.PI/180*c)),this._point=V.subtract(p.getPixelOrigin()),this._radius=isNaN(ie)?0:V.x-p.project([Q,o-ie]).x,this._radiusY=V.y-F.y}else{var fe=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(fe).x}this._updateBounds()}});function YE(o,c,p){return new jh(o,c,p)}var Mr=fi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){w(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,p=null,v=fo,S,T,F=0,W=this._parts.length;F<W;F++)for(var V=this._parts[F],Q=1,ie=V.length;Q<ie;Q++){S=V[Q-1],T=V[Q];var fe=v(o,S,T,!0);fe<c&&(c=fe,p=v(o,S,T))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Jy(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=ae(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new H,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return On(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],p=On(o),v=0,S=o.length;v<S;v++)p?(c[v]=ae(o[v]),this._bounds.extend(c[v])):c[v]=this._convertLatLngs(o[v]);return c},_project:function(){var o=new re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new z(o,o);this._rawPxBounds&&(this._pxBounds=new re([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,p){var v=o[0]instanceof te,S=o.length,T,F;if(v){for(F=[],T=0;T<S;T++)F[T]=this._map.latLngToLayerPoint(o[T]),p.extend(F[T]);c.push(F)}else for(T=0;T<S;T++)this._projectLatlngs(o[T],c,p)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,v,S,T,F,W,V;for(p=0,S=0,T=this._rings.length;p<T;p++)for(V=this._rings[p],v=0,F=V.length;v<F-1;v++)W=Xy(V[v],V[v+1],o,v,!0),W&&(c[S]=c[S]||[],c[S].push(W[0]),(W[1]!==V[v+1]||v===F-2)&&(c[S].push(W[1]),S++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,p=0,v=o.length;p<v;p++)o[p]=qy(o[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var p,v,S,T,F,W,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(p=0,T=this._parts.length;p<T;p++)for(W=this._parts[p],v=0,F=W.length,S=F-1;v<F;S=v++)if(!(!c&&v===0)&&Gy(o,W[S],W[v])<=V)return!0;return!1}});function XE(o,c){return new Mr(o,c)}Mr._flat=Qy;var Ua=Mr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ky(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=Mr.prototype._convertLatLngs.call(this,o),p=c.length;return p>=2&&c[0]instanceof te&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(o){Mr.prototype._setLatLngs.call(this,o),On(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return On(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,p=new z(c,c);if(o=new re(o.min.subtract(p),o.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,S=this._rings.length,T;v<S;v++)T=Vy(this._rings[v],o,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,p,v,S,T,F,W,V,Q;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(T=0,V=this._parts.length;T<V;T++)for(p=this._parts[T],F=0,Q=p.length,W=Q-1;F<Q;W=F++)v=p[F],S=p[W],v.y>o.y!=S.y>o.y&&o.x<(S.x-v.x)*(o.y-v.y)/(S.y-v.y)+v.x&&(c=!c);return c||Mr.prototype._containsPoint.call(this,o,!0)}});function QE(o,c){return new Ua(o,c)}var Lr=Ar.extend({initialize:function(o,c){w(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=_(o)?o:o.features,p,v,S;if(c){for(p=0,v=c.length;p<v;p++)S=c[p],(S.geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var T=this.options;if(T.filter&&!T.filter(o))return this;var F=uc(o,T);return F?(F.feature=hc(o),F.defaultOptions=F.options,this.resetStyle(F),T.onEachFeature&&T.onEachFeature(o,F),this.addLayer(F)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function uc(o,c){var p=o.type==="Feature"?o.geometry:o,v=p?p.coordinates:null,S=[],T=c&&c.pointToLayer,F=c&&c.coordsToLatLng||Nh,W,V,Q,ie;if(!v&&!p)return null;switch(p.type){case"Point":return W=F(v),nx(T,o,W,c);case"MultiPoint":for(Q=0,ie=v.length;Q<ie;Q++)W=F(v[Q]),S.push(nx(T,o,W,c));return new Ar(S);case"LineString":case"MultiLineString":return V=dc(v,p.type==="LineString"?0:1,F),new Mr(V,c);case"Polygon":case"MultiPolygon":return V=dc(v,p.type==="Polygon"?1:2,F),new Ua(V,c);case"GeometryCollection":for(Q=0,ie=p.geometries.length;Q<ie;Q++){var fe=uc({geometry:p.geometries[Q],type:"Feature",properties:o.properties},c);fe&&S.push(fe)}return new Ar(S);case"FeatureCollection":for(Q=0,ie=p.features.length;Q<ie;Q++){var be=uc(p.features[Q],c);be&&S.push(be)}return new Ar(S);default:throw new Error("Invalid GeoJSON object.")}}function nx(o,c,p,v){return o?o(c,p):new lc(p,v&&v.markersInheritOptions&&v)}function Nh(o){return new te(o[1],o[0],o[2])}function dc(o,c,p){for(var v=[],S=0,T=o.length,F;S<T;S++)F=c?dc(o[S],c-1,p):(p||Nh)(o[S]),v.push(F);return v}function Sh(o,c){return o=ae(o),o.alt!==void 0?[g(o.lng,c),g(o.lat,c),g(o.alt,c)]:[g(o.lng,c),g(o.lat,c)]}function fc(o,c,p,v){for(var S=[],T=0,F=o.length;T<F;T++)S.push(c?fc(o[T],On(o[T])?0:c-1,p,v):Sh(o[T],v));return!c&&p&&S.length>0&&S.push(S[0].slice()),S}function Ha(o,c){return o.feature?i({},o.feature,{geometry:c}):hc(c)}function hc(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Ph={toGeoJSON:function(o){return Ha(this,{type:"Point",coordinates:Sh(this.getLatLng(),o)})}};lc.include(Ph),jh.include(Ph),cc.include(Ph),Mr.include({toGeoJSON:function(o){var c=!On(this._latlngs),p=fc(this._latlngs,c?1:0,!1,o);return Ha(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),Ua.include({toGeoJSON:function(o){var c=!On(this._latlngs),p=c&&!On(this._latlngs[0]),v=fc(this._latlngs,p?2:c?1:0,!0,o);return c||(v=[v]),Ha(this,{type:(p?"Multi":"")+"Polygon",coordinates:v})}}),Ba.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(o).geometry.coordinates)}),Ha(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var p=c==="GeometryCollection",v=[];return this.eachLayer(function(S){if(S.toGeoJSON){var T=S.toGeoJSON(o);if(p)v.push(T.geometry);else{var F=hc(T);F.type==="FeatureCollection"?v.push.apply(v,F.features):v.push(F)}}}),p?Ha(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function rx(o,c){return new Lr(o,c)}var JE=rx,mc=rr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,p){this._url=o,this._bounds=X(c),w(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ye(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){We(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&za(this._image),this},bringToBack:function(){return this._map&&$a(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=X(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:Pe("img");if(ye(c,"leaflet-image-layer"),this._zoomAnimated&&ye(c,"leaflet-zoom-animated"),this.options.className&&ye(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=l(this.fire,this,"load"),c.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Vi(this._image,p,c)},_reset:function(){var o=this._image,c=new re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();et(o,c.min),o.style.width=p.x+"px",o.style.height=p.y+"px"},_updateOpacity:function(){En(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),eO=function(o,c,p){return new mc(o,c,p)},ix=mc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:Pe("video");if(ye(c,"leaflet-image-layer"),this._zoomAnimated&&ye(c,"leaflet-zoom-animated"),this.options.className&&ye(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=l(this.fire,this,"load"),o){for(var p=c.getElementsByTagName("source"),v=[],S=0;S<p.length;S++)v.push(p[S].src);this._url=p.length>0?v:[c.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var F=Pe("source");F.src=this._url[T],c.appendChild(F)}}});function tO(o,c,p){return new ix(o,c,p)}var ax=mc.extend({_initImage:function(){var o=this._image=this._url;ye(o,"leaflet-image-layer"),this._zoomAnimated&&ye(o,"leaflet-zoom-animated"),this.options.className&&ye(o,this.options.className),o.onselectstart=f,o.onmousemove=f}});function nO(o,c,p){return new ax(o,c,p)}var br=rr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof te||_(o))?(this._latlng=ae(o),w(this,c)):(w(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&En(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&En(this._container,1),this.bringToFront(),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(En(this._container,0),this._removeTimeout=setTimeout(l(We,void 0,this._container),200)):We(this._container),this.options.interactive&&(Xe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ae(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&za(this._container),this},bringToBack:function(){return this._map&&$a(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof Ar){c=null;var p=this._source._layers;for(var v in p)if(p[v]._map){c=p[v];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=Y(this.options.offset),p=this._getAnchor();this._zoomAnimated?et(this._container,o.add(p)):c=c.add(o).add(p);var v=this._containerBottom=-c.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=v+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});je.include({_initOverlay:function(o,c,p,v){var S=c;return S instanceof o||(S=new o(v).setContent(c)),p&&S.setLatLng(p),S}}),rr.include({_initOverlay:function(o,c,p,v){var S=p;return S instanceof o?(w(S,v),S._source=this):(S=c&&!v?c:new o(v,this),S.setContent(p)),S}});var pc=br.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,br.prototype.openOn.call(this,o)},onAdd:function(o){br.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fi||this._source.on("preclick",qi))},onRemove:function(o){br.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fi||this._source.off("preclick",qi))},getEvents:function(){var o=br.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=Pe("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Pe("div",o+"-content-wrapper",c);if(this._contentNode=Pe("div",o+"-content",p),co(c),ph(this._contentNode),ve(c,"contextmenu",qi),this._tipContainer=Pe("div",o+"-tip-container",c),this._tip=Pe("div",o+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=Pe("a",o+"-close-button",c);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',ve(v,"click",function(S){_t(S),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var p=o.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var v=o.offsetHeight,S=this.options.maxHeight,T="leaflet-popup-scrolled";S&&v>S?(c.height=S+"px",ye(o,T)):Xe(o,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),p=this._getAnchor();et(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(ao(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,v=this._containerWidth,S=new z(this._containerLeft,-p-this._containerBottom);S._add(Ki(this._container));var T=o.layerPointToContainerPoint(S),F=Y(this.options.autoPanPadding),W=Y(this.options.autoPanPaddingTopLeft||F),V=Y(this.options.autoPanPaddingBottomRight||F),Q=o.getSize(),ie=0,fe=0;T.x+v+V.x>Q.x&&(ie=T.x+v-Q.x+V.x),T.x-ie-W.x<0&&(ie=T.x-W.x),T.y+p+V.y>Q.y&&(fe=T.y+p-Q.y+V.y),T.y-fe-W.y<0&&(fe=T.y-W.y),(ie||fe)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([ie,fe]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),rO=function(o,c){return new pc(o,c)};je.mergeOptions({closePopupOnClick:!0}),je.include({openPopup:function(o,c,p){return this._initOverlay(pc,o,c,p).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),rr.include({bindPopup:function(o,c){return this._popup=this._initOverlay(pc,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Ar||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Gi(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof fi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var gc=br.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){br.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){br.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=br.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,p,v=this._map,S=this._container,T=v.latLngToContainerPoint(v.getCenter()),F=v.layerPointToContainerPoint(o),W=this.options.direction,V=S.offsetWidth,Q=S.offsetHeight,ie=Y(this.options.offset),fe=this._getAnchor();W==="top"?(c=V/2,p=Q):W==="bottom"?(c=V/2,p=0):W==="center"?(c=V/2,p=Q/2):W==="right"?(c=0,p=Q/2):W==="left"?(c=V,p=Q/2):F.x<T.x?(W="right",c=0,p=Q/2):(W="left",c=V+(ie.x+fe.x)*2,p=Q/2),o=o.subtract(Y(c,p,!0)).add(ie).add(fe),Xe(S,"leaflet-tooltip-right"),Xe(S,"leaflet-tooltip-left"),Xe(S,"leaflet-tooltip-top"),Xe(S,"leaflet-tooltip-bottom"),ye(S,"leaflet-tooltip-"+W),et(S,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&En(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),iO=function(o,c){return new gc(o,c)};je.include({openTooltip:function(o,c,p){return this._initOverlay(gc,o,c,p).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),rr.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(gc,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Ar||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(ve(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ve(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,p,v;this._tooltip.options.sticky&&o.originalEvent&&(p=this._map.mouseEventToContainerPoint(o.originalEvent),v=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(c)}});var sx=Fa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),p=this.options;if(p.html instanceof Element?(nc(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var v=Y(p.bgPos);c.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function aO(o){return new sx(o)}Fa.Default=ho;var mo=rr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){w(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),We(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(za(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&($a(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof z?o:new z(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,p=-o(-1/0,1/0),v=0,S=c.length,T;v<S;v++)T=c[v].style.zIndex,c[v]!==this._container&&T&&(p=o(p,+T));isFinite(p)&&(this.options.zIndex=p+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){En(this._container,this.options.opacity);var o=+new Date,c=!1,p=!1;for(var v in this._tiles){var S=this._tiles[v];if(!(!S.current||!S.loaded)){var T=Math.min(1,(o-S.loaded)/200);En(S.el,T),T<1?c=!0:(S.active?p=!0:this._onOpaqueTile(S),S.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&($(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===o?(this._levels[p].el.style.zIndex=c-Math.abs(o-p),this._onUpdateLevel(p)):(We(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var v=this._levels[o],S=this._map;return v||(v=this._levels[o]={},v.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=c,v.origin=S.project(S.unproject(S.getPixelOrigin()),o).round(),v.zoom=o,this._setZoomTransform(v,S.getCenter(),S.getZoom()),f(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var o,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var v=c.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)We(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,p,v){var S=Math.floor(o/2),T=Math.floor(c/2),F=p-1,W=new z(+S,+T);W.z=+F;var V=this._tileCoordsToKey(W),Q=this._tiles[V];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),F>v?this._retainParent(S,T,F,v):!1)},_retainChildren:function(o,c,p,v){for(var S=2*o;S<2*o+2;S++)for(var T=2*c;T<2*c+2;T++){var F=new z(S,T);F.z=p+1;var W=this._tileCoordsToKey(F),V=this._tiles[W];if(V&&V.active){V.retain=!0;continue}else V&&V.loaded&&(V.retain=!0);p+1<v&&this._retainChildren(S,T,p+1,v)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,p,v){var S=Math.round(c);this.options.maxZoom!==void 0&&S>this.options.maxZoom||this.options.minZoom!==void 0&&S<this.options.minZoom?S=void 0:S=this._clampZoom(S);var T=this.options.updateWhenZooming&&S!==this._tileZoom;(!v||T)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),S!==void 0&&this._update(o),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],o,c)},_setZoomTransform:function(o,c,p){var v=this._map.getZoomScale(p,o.zoom),S=o.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(c,p)).round();ce.any3d?Vi(o.el,S,v):et(o.el,S)},_resetGrid:function(){var o=this._map,c=o.options.crs,p=this._tileSize=this.getTileSize(),v=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],v).x/p.x),Math.ceil(o.project([0,c.wrapLng[1]],v).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],v).y/p.x),Math.ceil(o.project([c.wrapLat[1],0],v).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),v=c.getZoomScale(p,this._tileZoom),S=c.project(o,this._tileZoom).floor(),T=c.getSize().divideBy(v*2);return new re(S.subtract(T),S.add(T))},_update:function(o){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(o),S=this._pxBoundsToTileRange(v),T=S.getCenter(),F=[],W=this.options.keepBuffer,V=new re(S.getBottomLeft().subtract([W,-W]),S.getTopRight().add([W,-W]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ie=this._tiles[Q].coords;(ie.z!==this._tileZoom||!V.contains(new z(ie.x,ie.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(o,p);return}for(var fe=S.min.y;fe<=S.max.y;fe++)for(var be=S.min.x;be<=S.max.x;be++){var Ut=new z(be,fe);if(Ut.z=this._tileZoom,!!this._isValidTile(Ut)){var ht=this._tiles[this._tileCoordsToKey(Ut)];ht?ht.current=!0:F.push(Ut)}}if(F.sort(function(Qt,Wa){return Qt.distanceTo(T)-Wa.distanceTo(T)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tn=document.createDocumentFragment();for(be=0;be<F.length;be++)this._addTile(F[be],Tn);this._level.el.appendChild(Tn)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(o.x<p.min.x||o.x>p.max.x)||!c.wrapLat&&(o.y<p.min.y||o.y>p.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(o);return X(this.options.bounds).overlaps(v)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,p=this.getTileSize(),v=o.scaleBy(p),S=v.add(p),T=c.unproject(v,o.z),F=c.unproject(S,o.z);return[T,F]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),p=new H(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),p=new z(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(o){var c=this._tiles[o];c&&(We(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){ye(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=f,o.onmousemove=f,ce.ielt9&&this.options.opacity<1&&En(o,this.options.opacity)},_addTile:function(o,c){var p=this._getTilePos(o),v=this._tileCoordsToKey(o),S=this.createTile(this._wrapCoords(o),l(this._tileReady,this,o));this._initTile(S),this.createTile.length<2&&M(l(this._tileReady,this,o,null,S)),et(S,p),this._tiles[v]={el:S,coords:o,current:!0},c.appendChild(S),this.fire("tileloadstart",{tile:S,coords:o})},_tileReady:function(o,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:o});var v=this._tileCoordsToKey(o);p=this._tiles[v],p&&(p.loaded=+new Date,this._map._fadeAnimated?(En(p.el,0),$(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(ye(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new z(this._wrapX?h(o.x,this._wrapX):o.x,this._wrapY?h(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new re(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function sO(o){return new mo(o)}var Za=mo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=w(this,c),c.detectRetina&&ce.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var p=document.createElement("img");return ve(p,"load",l(this._tileOnLoad,this,c,p)),ve(p,"error",l(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(o),p},getTileUrl:function(o){var c={r:ce.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=p),c["-y"]=p}return N(this._url,i(c,this.options))},_tileOnLoad:function(o,c){ce.ielt9?setTimeout(l(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,p){var v=this.options.errorTileUrl;v&&c.getAttribute("src")!==v&&(c.src=v),o(p,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,v=this.options.zoomOffset;return p&&(o=c-o),o+v},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=f,c.onerror=f,!c.complete)){c.src=C;var p=this._tiles[o].coords;We(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",C),mo.prototype._removeTile.call(this,o)},_tileReady:function(o,c,p){if(!(!this._map||p&&p.getAttribute("src")===C))return mo.prototype._tileReady.call(this,o,c,p)}});function ox(o,c){return new Za(o,c)}var lx=Za.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var p=i({},this.defaultWmsParams);for(var v in c)v in this.options||(p[v]=c[v]);c=w(this,c);var S=c.detectRetina&&ce.retina?2:1,T=this.getTileSize();p.width=T.x*S,p.height=T.y*S,this.wmsParams=p},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Za.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),p=this._crs,v=ne(p.project(c[0]),p.project(c[1])),S=v.min,T=v.max,F=(this._wmsVersion>=1.3&&this._crs===ex?[S.y,S.x,T.y,T.x]:[S.x,S.y,T.x,T.y]).join(","),W=Za.prototype.getTileUrl.call(this,o);return W+P(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(o,c){return i(this.wmsParams,o),c||this.redraw(),this}});function oO(o,c){return new lx(o,c)}Za.WMS=lx,ox.wms=oO;var Dr=rr.extend({options:{padding:.1},initialize:function(o){w(this,o),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ye(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var p=this._map.getZoomScale(c,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,c),T=v.multiplyBy(-p).add(S).subtract(this._map._getNewPixelOrigin(o,c));ce.any3d?Vi(this._container,T,p):et(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new re(p,p.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cx=Dr.extend({options:{tolerance:0},getEvents:function(){var o=Dr.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Dr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ve(o,"mousemove",this._onMouseMove,this),ve(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ve(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,We(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Dr.prototype._update.call(this);var o=this._bounds,c=this._container,p=o.getSize(),v=ce.retina?2:1;et(c,o.min),c.width=v*p.x,c.height=v*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Dr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[d(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,p=c.next,v=c.prev;p?p.prev=v:this._drawLast=v,v?v.next=p:this._drawFirst=p,delete o._order,delete this._layers[d(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),p=[],v,S;for(S=0;S<c.length;S++){if(v=Number(c[S]),isNaN(v))return;p.push(v)}o.options._dashArray=p}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new re,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)o=v.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var p,v,S,T,F=o._parts,W=F.length,V=this._ctx;if(W){for(V.beginPath(),p=0;p<W;p++){for(v=0,S=F[p].length;v<S;v++)T=F[p][v],V[v?"lineTo":"moveTo"](T.x,T.y);c&&V.closePath()}this._fillStroke(V,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,p=this._ctx,v=Math.max(Math.round(o._radius),1),S=(Math.max(Math.round(o._radiusY),1)||v)/v;S!==1&&(p.save(),p.scale(1,S)),p.beginPath(),p.arc(c.x,c.y/S,v,0,Math.PI*2,!1),S!==1&&p.restore(),this._fillStroke(p,o)}},_fillStroke:function(o,c){var p=c.options;p.fill&&(o.globalAlpha=p.fillOpacity,o.fillStyle=p.fillColor||p.color,o.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=p.opacity,o.lineWidth=p.weight,o.strokeStyle=p.color,o.lineCap=p.lineCap,o.lineJoin=p.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),p,v,S=this._drawFirst;S;S=S.next)p=S.layer,p.options.interactive&&p._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(p))&&(v=p);this._fireEvent(v?[v]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(Xe(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var p,v,S=this._drawFirst;S;S=S.next)p=S.layer,p.options.interactive&&p._containsPoint(c)&&(v=p);v!==this._hoveredLayer&&(this._handleMouseOut(o),v&&(ye(this._container,"leaflet-interactive"),this._fireEvent([v],o,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,p){this._map._fireDOMEvent(c,p||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var p=c.next,v=c.prev;if(p)p.prev=v;else return;v?v.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var p=c.next,v=c.prev;if(v)v.next=p;else return;p?p.prev=v:v&&(this._drawLast=v),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function ux(o){return ce.canvas?new cx(o):null}var po=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),lO={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Dr.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=po("shape");ye(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=po("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;We(c),o.removeInteractiveTarget(c),delete this._layers[d(o)]},_updateStyle:function(o){var c=o._stroke,p=o._fill,v=o.options,S=o._container;S.stroked=!!v.stroke,S.filled=!!v.fill,v.stroke?(c||(c=o._stroke=po("stroke")),S.appendChild(c),c.weight=v.weight+"px",c.color=v.color,c.opacity=v.opacity,v.dashArray?c.dashStyle=_(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=v.lineCap.replace("butt","flat"),c.joinstyle=v.lineJoin):c&&(S.removeChild(c),o._stroke=null),v.fill?(p||(p=o._fill=po("fill")),S.appendChild(p),p.color=v.fillColor||v.color,p.opacity=v.fillOpacity):p&&(S.removeChild(p),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),p=Math.round(o._radius),v=Math.round(o._radiusY||p);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+v+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){za(o._container)},_bringToBack:function(o){$a(o._container)}},vc=ce.vml?po:Tt,go=Dr.extend({_initContainer:function(){this._container=vc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){We(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Dr.prototype._update.call(this);var o=this._bounds,c=o.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),et(p,o.min),p.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=vc("path");o.options.className&&ye(c,o.options.className),o.options.interactive&&ye(c,"leaflet-interactive"),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){We(o._path),o.removeInteractiveTarget(o._path),delete this._layers[d(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,p=o.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,At(o._parts,c))},_updateCircle:function(o){var c=o._point,p=Math.max(Math.round(o._radius),1),v=Math.max(Math.round(o._radiusY),1)||p,S="a"+p+","+v+" 0 1,0 ",T=o._empty()?"M0 0":"M"+(c.x-p)+","+c.y+S+p*2+",0 "+S+-p*2+",0 ";this._setPath(o,T)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){za(o._path)},_bringToBack:function(o){$a(o._path)}});ce.vml&&go.include(lO);function dx(o){return ce.svg||ce.vml?new go(o):null}je.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&ux(o)||dx(o)}});var fx=Ua.extend({initialize:function(o,c){Ua.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=X(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function cO(o,c){return new fx(o,c)}go.create=vc,go.pointsToPath=At,Lr.geometryToLayer=uc,Lr.coordsToLatLng=Nh,Lr.coordsToLatLngs=dc,Lr.latLngToCoords=Sh,Lr.latLngsToCoords=fc,Lr.getFeature=Ha,Lr.asFeature=hc,je.mergeOptions({boxZoom:!0});var hx=xr.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ve(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){We(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),so(),oh(),this._startPoint=this._map.mouseEventToContainerPoint(o),ve(document,{contextmenu:Gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),ye(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new re(this._point,this._startPoint),p=c.getSize();et(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(We(this._box),Xe(this._container,"leaflet-crosshair")),oo(),lh(),De(document,{contextmenu:Gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var c=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});je.addInitHook("addHandler","boxZoom",hx),je.mergeOptions({doubleClickZoom:!0});var mx=xr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,p=c.getZoom(),v=c.options.zoomDelta,S=o.originalEvent.shiftKey?p-v:p+v;c.options.doubleClickZoom==="center"?c.setZoom(S):c.setZoomAround(o.containerPoint,S)}});je.addInitHook("addHandler","doubleClickZoom",mx),je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var px=xr.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new di(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}ye(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xe(this._map._container,"leaflet-grab"),Xe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=X(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),p=this._initialWorldOffset,v=this._draggable._newPos.x,S=(v-c+p)%o+c-p,T=(v+c+p)%o-c-p,F=Math.abs(S+p)<Math.abs(T+p)?S:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(o){var c=this._map,p=c.options,v=!p.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),v)c.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,F=p.easeLinearity,W=S.multiplyBy(F/T),V=W.distanceTo([0,0]),Q=Math.min(p.inertiaMaxSpeed,V),ie=W.multiplyBy(Q/V),fe=Q/(p.inertiaDeceleration*F),be=ie.multiplyBy(-fe/2).round();!be.x&&!be.y?c.fire("moveend"):(be=c._limitOffset(be,c.options.maxBounds),M(function(){c.panBy(be,{duration:fe,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});je.addInitHook("addHandler","dragging",px),je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gx=xr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ve(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,p=o.scrollTop||c.scrollTop,v=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(v,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},p=this.keyCodes,v,S;for(v=0,S=p.left.length;v<S;v++)c[p.left[v]]=[-1*o,0];for(v=0,S=p.right.length;v<S;v++)c[p.right[v]]=[o,0];for(v=0,S=p.down.length;v<S;v++)c[p.down[v]]=[0,o];for(v=0,S=p.up.length;v<S;v++)c[p.up[v]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},p=this.keyCodes,v,S;for(v=0,S=p.zoomIn.length;v<S;v++)c[p.zoomIn[v]]=o;for(v=0,S=p.zoomOut.length;v<S;v++)c[p.zoomOut[v]]=-o},_addHooks:function(){ve(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,p=this._map,v;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(v=this._panKeys[c],o.shiftKey&&(v=Y(v).multiplyBy(3)),p.options.maxBounds&&(v=p._limitOffset(Y(v),p.options.maxBounds)),p.options.worldCopyJump){var S=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(v)));p.panTo(S)}else p.panBy(v)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Gi(o)}}});je.addInitHook("addHandler","keyboard",gx),je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vx=xr.extend({addHooks:function(){ve(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=Fy(o),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var v=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),v),Gi(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),p=this._map.options.zoomSnap||0;o._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),S=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,T=p?Math.ceil(S/p)*p:S,F=o._limitZoom(c+(this._delta>0?T:-T))-c;this._delta=0,this._startTime=null,F&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+F):o.setZoomAround(this._lastMousePos,c+F))}});je.addInitHook("addHandler","scrollWheelZoom",vx);var uO=600;je.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var yx=xr.extend({addHooks:function(){ve(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new z(c.clientX,c.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ve(document,"touchend",_t),ve(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),uO),ve(document,"touchend touchcancel contextmenu",this._cancel,this),ve(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){De(document,"touchend",_t),De(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new z(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var p=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});je.addInitHook("addHandler","tapHold",yx),je.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var xx=xr.extend({addHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),ve(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xe(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(o.touches[0]),v=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(v)._divideBy(2))),this._startDist=p.distanceTo(v),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ve(document,"touchmove",this._onTouchMove,this),ve(document,"touchend touchcancel",this._onTouchEnd,this),_t(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(o.touches[0]),v=c.mouseEventToContainerPoint(o.touches[1]),S=p.distanceTo(v)/this._startDist;if(this._zoom=c.getScaleZoom(S,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&S<1||this._zoom>c.getMaxZoom()&&S>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,S===1)return}else{var T=p._add(v)._divideBy(2)._subtract(this._centerPoint);if(S===1&&T.x===0&&T.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var F=l(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(F,this,!0),_t(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});je.addInitHook("addHandler","touchZoom",xx),je.BoxZoom=hx,je.DoubleClickZoom=mx,je.Drag=px,je.Keyboard=gx,je.ScrollWheelZoom=vx,je.TapHold=yx,je.TouchZoom=xx,n.Bounds=re,n.Browser=ce,n.CRS=Te,n.Canvas=cx,n.Circle=jh,n.CircleMarker=cc,n.Class=E,n.Control=nr,n.DivIcon=sx,n.DivOverlay=br,n.DomEvent=CE,n.DomUtil=PE,n.Draggable=di,n.Evented=K,n.FeatureGroup=Ar,n.GeoJSON=Lr,n.GridLayer=mo,n.Handler=xr,n.Icon=Fa,n.ImageOverlay=mc,n.LatLng=te,n.LatLngBounds=H,n.Layer=rr,n.LayerGroup=Ba,n.LineUtil=FE,n.Map=je,n.Marker=lc,n.Mixin=DE,n.Path=fi,n.Point=z,n.PolyUtil=IE,n.Polygon=Ua,n.Polyline=Mr,n.Popup=pc,n.PosAnimation=Uy,n.Projection=UE,n.Rectangle=fx,n.Renderer=Dr,n.SVG=go,n.SVGOverlay=ax,n.TileLayer=Za,n.Tooltip=gc,n.Transformation=me,n.Util=R,n.VideoOverlay=ix,n.bind=l,n.bounds=ne,n.canvas=ux,n.circle=YE,n.circleMarker=GE,n.control=uo,n.divIcon=aO,n.extend=i,n.featureGroup=VE,n.geoJSON=rx,n.geoJson=JE,n.gridLayer=sO,n.icon=KE,n.imageOverlay=eO,n.latLng=ae,n.latLngBounds=X,n.layerGroup=WE,n.map=EE,n.marker=qE,n.point=Y,n.polygon=QE,n.polyline=XE,n.popup=rO,n.rectangle=cO,n.setOptions=w,n.stamp=d,n.svg=dx,n.svgOverlay=nO,n.tileLayer=ox,n.tooltip=iO,n.transformation=J,n.version=r,n.videoOverlay=tO;var dO=window.L;n.noConflict=function(){return window.L=dO,this},window.L=n})})(wg,wg.exports);var Zi=wg.exports;const Jo=Tr(Zi);function no(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function qf(e,t){return t==null?function(r,i){const a=x.useRef();return a.current||(a.current=e(r,i)),a}:function(r,i){const a=x.useRef();a.current||(a.current=e(r,i));const l=x.useRef(r),{instance:u}=a.current;return x.useEffect(function(){l.current!==r&&(t(u,r,l.current),l.current=r)},[u,r,i]),a}}function HC(e,t){x.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function ZC(e){return function(n){const r=Vf(),i=e(Kf(n,r),r);return zC(r.map,n.attribution),dy(i.current,n.eventHandlers),HC(i.current,r),i}}function MH(e,t){const n=x.useRef();x.useEffect(function(){if(t.pathOptions!==n.current){const i=t.pathOptions??{};e.instance.setStyle(i),n.current=i}},[e,t])}function LH(e){return function(n){const r=Vf(),i=e(Kf(n,r),r);return dy(i.current,n.eventHandlers),HC(i.current,r),MH(i.current,n),i}}function DH(e,t){const n=qf(e,t),r=ZC(n);return UC(r)}function IH(e,t){const n=qf(e),r=AH(n,t);return OH(r)}function fy(e,t){const n=qf(e,t),r=LH(n);return UC(r)}function RH(e,t){const n=qf(e,t),r=ZC(n);return TH(r)}function zH(e,t,n){const{opacity:r,zIndex:i}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function hy(){return Vf().map}function my(e){const t=hy();return x.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const $H=fy(function({center:t,children:n,...r},i){const a=new Zi.Circle(t,r);return no(a,Wf(i,{overlayContainer:a}))},$C),WC=fy(function({center:t,children:n,...r},i){const a=new Zi.CircleMarker(t,r);return no(a,Wf(i,{overlayContainer:a}))},$C);function jg(){return jg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jg.apply(this,arguments)}function BH({bounds:e,boundsOptions:t,center:n,children:r,className:i,id:a,placeholder:l,style:u,whenReady:d,zoom:m,...h},f){const[g]=x.useState({className:i,id:a,style:u}),[y,j]=x.useState(null);x.useImperativeHandle(f,()=>(y==null?void 0:y.map)??null,[y]);const w=x.useCallback(b=>{if(b!==null&&y===null){const N=new Zi.Map(b,h);n!=null&&m!=null?N.setView(n,m):e!=null&&N.fitBounds(e,t),d!=null&&N.whenReady(d),j(EH(N))}},[]);x.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const P=y?pu.createElement(FC,{value:y},r):l??null;return pu.createElement("div",jg({},g,{ref:w}),P)}const Gf=x.forwardRef(BH),cs=DH(function({position:t,...n},r){const i=new Zi.Marker(t,n);return no(i,Wf(r,{overlayContainer:i}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),Cl=fy(function({positions:t,...n},r){const i=new Zi.Polygon(t,n);return no(i,Wf(r,{overlayContainer:i}))},function(t,n,r){n.positions!==r.positions&&t.setLatLngs(n.positions)}),ra=IH(function(t,n){const r=new Zi.Popup(t,n.overlayContainer);return no(r,n)},function(t,n,{position:r},i){x.useEffect(function(){const{instance:l}=t;function u(m){m.popup===l&&(l.update(),i(!0))}function d(m){m.popup===l&&i(!1)}return n.map.on({popupopen:u,popupclose:d}),n.overlayContainer==null?(r!=null&&l.setLatLng(r),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var h;n.map.off({popupopen:u,popupclose:d}),(h=n.overlayContainer)==null||h.unbindPopup(),n.map.removeLayer(l)}},[t,n,i,r])}),Yf=RH(function({url:t,...n},r){const i=new Zi.TileLayer(t,Kf(n,r));return no(i,r)},function(t,n,r){zH(t,n,r);const{url:i}=n;i!=null&&i!==r.url&&t.setUrl(i)}),VC="dummyMapAreas",py=e=>{try{localStorage.setItem(VC,JSON.stringify(e))}catch(t){console.error("Failed saving areas to localStorage",t)}},Xf=()=>{try{const e=localStorage.getItem(VC);return e?JSON.parse(e):[...Bu]}catch(e){return console.error("Failed loading areas from localStorage",e),[...Bu]}},ec=async()=>({data:Xf().sort((t,n)=>t.name.localeCompare(n.name)),error:null}),FH=async e=>{const t=Xf(),n={...e,id:it(),created_at:he(),updated_at:he()};return t.push(n),py(t),{data:n,error:null}},UH=async(e,t)=>{const n=Xf(),r=n.findIndex(i=>i.id===e);return r===-1?{data:null,error:{message:"Area not found"}}:(n[r]={...n[r],...t,updated_at:he()},py(n),{data:n[r],error:null})},HH=async e=>{const t=Xf(),n=t.findIndex(i=>i.id===e);if(n===-1)return{error:{message:"Area not found"}};const[r]=t.splice(n,1);py(t);try{const i=await cn();await Promise.all((i.data||[]).filter(a=>a.area_id===e||a.area_name===(r==null?void 0:r.name)).map(a=>Z2(a.id,{area_id:void 0,area_name:void 0})))}catch{}try{const i=await Bt();await Promise.all((i.data||[]).filter(a=>a.area_id===e||a.area_name===(r==null?void 0:r.name)).map(a=>Wu(a.id,{area_id:void 0,area_name:void 0})))}catch{}return{error:null}},ZH=async e=>{const[t,n]=await Promise.all([cn(),Bt()]);return{volunteerCount:(t.data||[]).filter(r=>r.area_id===e).length,patientCount:(n.data||[]).filter(r=>r.area_id===e).length,error:null}},Cm=new Map,WH=async e=>{if(!e||e.trim().length===0)return null;const t=e.toLowerCase().trim();if(Cm.has(t))return Cm.get(t);try{const n=encodeURIComponent(e),r=await fetch(`https://nominatim.openstreetmap.org/search?q=${n}&format=json&limit=1`,{headers:{"User-Agent":"HealthcareApp/1.0"}});if(!r.ok)return console.error("Geocoding API error:",r.statusText),null;const i=await r.json();if(!i||i.length===0)return console.warn("No geocoding results for address:",e),null;const a={lat:parseFloat(i[0].lat),lng:parseFloat(i[0].lon),display_name:i[0].display_name,confidence:parseFloat(i[0].importance||"0.5")};return Cm.set(t,a),a}catch(n){return console.error("Error geocoding address:",n),null}},VH=(e,t)=>{const n=e[1],r=e[0];let i=!1;for(let a=0,l=t.length-1;a<t.length;l=a++){const u=t[a][1],d=t[a][0],m=t[l][1],h=t[l][0];d>r!=h>r&&n<(m-u)*(r-d)/(h-d)+u&&(i=!i)}return i},KC=(e,t,n)=>{const r=[e,t];for(const i of n)if(i.geometry&&i.geometry.coordinates&&i.geometry.coordinates.length>0){const a=i.geometry.coordinates[0];if(VH(r,a))return i}return null},KH=async(e,t,n)=>{if(typeof e!="number"||typeof t!="number")return{area:null,method:"none",confidence:"low"};const r=KC(e,t,n);return r?{area:r,method:"gps",confidence:"high"}:{area:null,method:"none",confidence:"low"}},qH=async(e,t)=>{const n=await WH(e);if(!n)return{area:null,method:"none",confidence:"low"};const r=KC(n.lat,n.lng,t);return r?{area:r,method:"address",confidence:n.confidence>.7?"high":n.confidence>.4?"medium":"low",geocodedLat:n.lat,geocodedLng:n.lng}:{area:null,method:"none",confidence:"low",geocodedLat:n.lat,geocodedLng:n.lng}},qC=async(e,t,n,r)=>{const i=await KH(e,t,r);if(i.area&&i.confidence==="high")return i;const a=await qH(n,r);return a.area?a:i.area?i:{area:null,method:"none",confidence:"low"}},GC=["Amnat Charoen","Ang Thong","Bangkok","Bueng Kan","Buri Ram","Chachoengsao","Chai Nat","Chaiyaphum","Chanthaburi","Chiang Mai","Chiang Rai","Chon Buri","Chumphon","Kalasin","Kamphaeng Phet","Kanchanaburi","Khon Kaen","Krabi","Lampang","Lamphun","Loei","Lop Buri","Mae Hong Son","Maha Sarakham","Mukdahan","Nakhon Nayok","Nakhon Pathom","Nakhon Phanom","Nakhon Ratchasima","Nakhon Sawan","Nakhon Si Thammarat","Nan","Narathiwat","Nong Bua Lam Phu","Nong Khai","Nonthaburi","Pathum Thani","Pattani","Phangnga","Phatthalung","Phayao","Phetchabun","Phetchaburi","Phichit","Phitsanulok","Phrae","Phuket","Prachin Buri","Prachuap Khiri Khan","Ranong","Ratchaburi","Rayong","Roi Et","Sa Kaeo","Sakon Nakhon","Samut Prakan","Samut Sakhon","Samut Songkhram","Saraburi","Satun","Sing Buri","Si Sa Ket","Songkhla","Sukhothai","Suphan Buri","Surat Thani","Surin","Tak","Trang","Trat","Ubon Ratchathani","Udon Thani","Uthai Thani","Uttaradit","Yala","Yasothon"],Ad={"Nakhon Pathom":{"Mueang Nakhon Pathom":["Phra Pathom Chedi","Tha Tamnak","Phra Prathon","Don Yai Hom"],"Kamphaeng Saen":["Suan Mon","Nong Krathum","Thung Kraphang Hom"],"Nakhon Chai Si":["Wat Samrong","Bang Kaeo Fa","Tha Na"],"Don Tum":["Don Tum","Lam Hoei","Bo Phlap"],"Bang Len":["Bang Len","Nang Buat","Rang Krathum"],Phutthamonthon:["Salaya","Bang Krathuek","Khun Kaeo"],"Sam Phran":["Krathum Lom","Tha Kham","Om Yai"]},Bangkok:{"Phasi Charoen":["Bang Wa","Khlong Khwang","Pak Khlong Phasi Charoen"],"Bang Kapi":["Hua Mak","Khlong Chan"],"Phra Nakhon":["Bowon Niwet","Talat Yot","Wat Sam Phraya"]},Nonthaburi:{"Mueang Nonthaburi":["Bang Kraso","Talat Khwan","Tha Sai"],"Bang Bua Thong":["Bang Phlap","Phimon Rat","Lahan"]},"Pathum Thani":{"Mueang Pathum Thani":["Bang Paruat","Bang Duea","Ban Klang"],Thanyaburi:["Rangsit","Bueng Yitho","Pracha Thipat"],"Lam Luk Ka":["Khu Khot","Lam Luk Ka","Bueng Kham Phroi"]}},GH=({patient:e,onClose:t})=>{var B;const{user:n}=Se(),[r,i]=x.useState(!1),[a,l]=x.useState({name:"",doe:"",gender:"male",address:"",province:"",district:"",subdistrict:"",addressLine:"",phone_number:"",caregivers_contact:"",caregiver_name:"",caregiver_phone:"",assigned_doctor:"",last_record_date:"",today_date:new Date().toISOString().split("T")[0],assigned_vhv_name:"",medical_record_number:"",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"",doctor_diagnosed:"",medications_history:"",food_allergies:"",medication_allergies:"",height:"",weight:"",bmi:"",temperature:"",pulse:"",blood_pressure:"",diabetes:"",mental_health_status:"",other_symptoms:"",pregnancy_details:"",smoker:!1,doctors_note:"",photo_url:"",lat:void 0,lng:void 0,patient_email:""}),[u,d]=x.useState([]),[m,h]=x.useState([]),[f,g]=x.useState({}),[y,j]=x.useState([]),[w,P]=x.useState(null),[b,N]=x.useState(!1);x.useEffect(()=>{var D,M,$;(async()=>{const{data:R}=await Ct(),E=(R||[]).filter(K=>K.role==="doctor").map(K=>({id:K.id,full_name:K.full_name}));d(E);const U=await cn();h(U.data||[]);try{const K=await Bt(),z={};for(const G of K.data||[]){const Y=(G.assigned_vhv_name||"").toLowerCase().trim();Y&&(z[Y]=(z[Y]||0)+1)}g(z)}catch{}const Z=await ec();j(Z.data||[])})(),e&&l({name:e.name,doe:e.doe,gender:e.gender,address:e.address,province:e.address.split(",").map(R=>R.trim()).slice(-1)[0]||"",district:e.address.split(",").map(R=>R.trim()).slice(-2,-1)[0]||"",subdistrict:e.address.split(",").map(R=>R.trim()).slice(-3,-2)[0]||"",addressLine:e.address.split(",").slice(0,-3).join(", ").trim(),phone_number:e.phone_number||"",caregivers_contact:e.caregivers_contact,caregiver_name:((D=e.caregivers_contact.split("-")[0])==null?void 0:D.trim())||"",caregiver_phone:((M=e.caregivers_contact.split("-")[1])==null?void 0:M.trim())||"",assigned_doctor:e.assigned_doctor,last_record_date:e.last_record_date,today_date:e.today_date,assigned_vhv_name:e.assigned_vhv_name,medical_record_number:e.medical_record_number,patient_categories:e.patient_categories,personal_health_history:e.personal_health_history,doctor_diagnosed:e.doctor_diagnosed,medications_history:e.medications_history,food_allergies:e.food_allergies,medication_allergies:e.medication_allergies,height:e.height,weight:e.weight,bmi:e.bmi,temperature:e.temperature,pulse:e.pulse,blood_pressure:e.blood_pressure,diabetes:e.diabetes,mental_health_status:e.mental_health_status,other_symptoms:e.other_symptoms,pregnancy_details:e.pregnancy_details,smoker:e.smoker,doctors_note:e.doctors_note,lat:e.lat,lng:e.lng,patient_email:e.user_id&&(($=Ai(e.user_id))==null?void 0:$.email)||""})},[e]),x.useEffect(()=>{const D=[a.addressLine,a.subdistrict,a.district,a.province].filter(Boolean).join(", ");if(a.lat&&a.lng||D.length>5){const M=setTimeout(async()=>{N(!0);const $=await qC(a.lat,a.lng,D,y);P($),$.geocodedLat&&$.geocodedLng&&!a.lat&&!a.lng&&l(R=>({...R,lat:$.geocodedLat,lng:$.geocodedLng})),N(!1)},600);return()=>clearTimeout(M)}else P(null)},[a.lat,a.lng,a.addressLine,a.subdistrict,a.district,a.province,y]),x.useEffect(()=>{e||(async()=>{const D=await F2();l(M=>({...M,medical_record_number:D}))})()},[e]),x.useEffect(()=>{const D=parseFloat(a.height),M=parseFloat(a.weight);if(D>0&&M>0&&!Number.isNaN(D)&&!Number.isNaN(M)){const $=M/Math.pow(D/100,2);l(R=>({...R,bmi:$.toFixed(1)}))}},[a.height,a.weight]);const _=async D=>{var M,$;D.preventDefault(),i(!0);try{const R=[a.addressLine,a.subdistrict,a.district,a.province].filter(Boolean).join(", "),E=[a.caregiver_name,a.caregiver_phone].filter(Boolean).join(" - "),U={name:a.name,doe:a.doe,gender:a.gender,address:R||a.address,phone_number:a.phone_number,caregivers_contact:E||a.caregivers_contact,assigned_doctor:a.assigned_doctor,last_record_date:a.last_record_date,today_date:a.today_date,assigned_vhv_name:a.assigned_vhv_name,medical_record_number:a.medical_record_number,patient_categories:a.patient_categories,personal_health_history:a.personal_health_history,doctor_diagnosed:a.doctor_diagnosed,medications_history:a.medications_history,food_allergies:a.food_allergies,medication_allergies:a.medication_allergies,height:a.height,weight:a.weight,bmi:a.bmi,temperature:a.temperature,pulse:a.pulse,blood_pressure:a.blood_pressure,diabetes:a.diabetes,mental_health_status:a.mental_health_status,other_symptoms:a.other_symptoms,pregnancy_details:a.pregnancy_details,smoker:a.smoker,doctors_note:a.doctors_note,lat:a.lat,lng:a.lng,photo_url:a.photo_url,area_id:(M=w==null?void 0:w.area)==null?void 0:M.id,area_name:($=w==null?void 0:w.area)==null?void 0:$.name};if(e){let Z={...U};if((!e.user_id||!Ai(e.user_id))&&a.patient_email){const{data:z}=await Ab(a.patient_email,a.name);z!=null&&z.id&&(Z.user_id=z.id)}else if(e.user_id&&a.patient_email){const z=e.user_id?Ai(e.user_id):void 0;if(z&&z.email.toLowerCase()!==a.patient_email.toLowerCase()){const{error:G}=await fM(e.user_id,a.patient_email);G&&console.error("Error updating user email:",G)}}const{error:K}=await Wu(e.id,Z);if(K){console.error("Error updating patient:",K);return}}else{const{data:Z}=await Ab(a.patient_email,a.name),{error:K}=await DM({...U,created_by:(n==null?void 0:n.id)||"",user_id:(Z==null?void 0:Z.id)||""});if(K){console.error("Error creating patient:",K);return}}t()}catch(R){console.error("Error saving patient:",R)}finally{i(!1)}},k=D=>{const{name:M,value:$,type:R}=D.target;if(R==="checkbox"){const E=D.target;if(M.startsWith("patient_categories.")){const U=M.split(".")[1];l({...a,patient_categories:{...a.patient_categories,[U]:E.checked}})}else l({...a,[M]:E.checked})}else l(M==="province"?{...a,province:$,district:"",subdistrict:""}:M==="district"?{...a,district:$,subdistrict:""}:{...a,[M]:$})},C=!1,A=x.useMemo(()=>a.lat&&a.lng?[a.lat,a.lng]:[13.793,100.321],[a.lat,a.lng]),O=x.useMemo(()=>Jo.divIcon({className:"patient-pin",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#a21caf;border:2px solid #fff;box-shadow:0 0 0 3px rgba(162,28,175,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),[]),I=()=>(my({click(D){l(M=>({...M,lat:D.latlng.lat,lng:D.latlng.lng}))}}),null);return s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(Xd,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Re,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Patient":"New Patient"})]})]})}),s.jsxs("form",{onSubmit:_,className:"p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),s.jsx("input",{type:"text",name:"name",required:!0,value:a.name,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Entry (DOE) *"}),s.jsx("input",{type:"date",name:"doe",required:!0,value:a.doe,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),s.jsxs("select",{name:"gender",required:!0,value:a.gender,onChange:k,disabled:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",children:[s.jsx("option",{value:"male",children:"Male"}),s.jsx("option",{value:"female",children:"Female"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Record Number (auto)"}),s.jsx("input",{type:"text",name:"medical_record_number",required:!0,value:a.medical_record_number,onChange:k,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province"}),s.jsxs("select",{name:"province",value:a.province,onChange:k,disabled:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[s.jsx("option",{value:"",children:"Select Province"}),GC.map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District / Amphoe"}),s.jsxs("select",{name:"district",value:a.district,onChange:k,disabled:!a.province,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[s.jsx("option",{value:"",children:"Select District"}),Object.keys(Ad[a.province]||{}).map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-District / Tambon"}),s.jsxs("select",{name:"subdistrict",value:a.subdistrict,onChange:k,disabled:!a.district,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[s.jsx("option",{value:"",children:"Select Sub-District"}),(((B=Ad[a.province])==null?void 0:B[a.district])||[]).map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("input",{type:"text",name:"addressLine",placeholder:"House number, street, village",value:a.addressLine,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:D=>{var R;const M=(R=D.target.files)==null?void 0:R[0];if(!M)return;const $=new FileReader;$.onload=()=>l(E=>({...E,photo_url:String($.result)})),$.readAsDataURL(M)},disabled:C}),s.jsx("span",{className:"text-sm text-gray-500",children:"or"}),s.jsx("input",{type:"text",name:"photo_url",placeholder:"Image URL",value:a.photo_url||"",onChange:k,readOnly:C,className:"flex-1 px-3 py-2 border rounded"})]}),a.photo_url&&s.jsx("img",{src:a.photo_url,alt:"preview",className:"mt-2 w-20 h-20 rounded-full object-cover"})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Email (for login)"}),s.jsx("input",{type:"email",name:"patient_email",value:a.patient_email,onChange:k,readOnly:C,required:!e,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caregiver's Name"}),s.jsx("input",{type:"text",name:"caregiver_name",value:a.caregiver_name,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caregiver's Contact Number"}),s.jsx("input",{type:"text",name:"caregiver_phone",value:a.caregiver_phone,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),s.jsx("input",{type:"text",name:"phone_number",value:a.phone_number,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Doctor *"}),s.jsxs("select",{name:"assigned_doctor",required:!0,value:a.assigned_doctor,onChange:k,disabled:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[s.jsx("option",{value:"",children:"Select"}),u.map(D=>s.jsx("option",{value:D.full_name,children:D.full_name},D.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned VHV"}),s.jsxs("select",{name:"assigned_vhv_name",value:a.assigned_vhv_name,onChange:k,disabled:!a.lat||!a.lng||!(w!=null&&w.area),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[s.jsx("option",{value:"",children:a.lat&&a.lng&&(w!=null&&w.area)?"Select":"Pin location on map first"}),(()=>{var E;const D=(E=w==null?void 0:w.area)==null?void 0:E.name,$=(m||[]).filter(U=>(U.area_name||"").toLowerCase()===(D||"").toLowerCase()).map(U=>{var Z;return{id:U.user_id||U.id,name:((Z=U.user)==null?void 0:Z.full_name)||U.name}}),R=new Set($.map(U=>U.name));return a.assigned_vhv_name&&!R.has(a.assigned_vhv_name)&&$.unshift({id:"current",name:a.assigned_vhv_name}),$.map(U=>{const Z=U.name.toLowerCase(),K=f[Z]||0;return s.jsxs("option",{value:U.name,children:[U.name," (",K,")"]},U.id+U.name)})})()]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Today's Date"}),s.jsx("input",{type:"date",name:"today_date",value:a.today_date,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Record Date"}),s.jsx("input",{type:"date",name:"last_record_date",value:a.last_record_date,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Location"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Click on the map to set the patient's exact location."}),s.jsx("div",{className:"h-72 w-full border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs(Gf,{center:A,zoom:14,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(Yf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),s.jsx(I,{}),y.map(D=>{var R,E,U;if(!((E=(R=D.geometry)==null?void 0:R.coordinates)!=null&&E[0]))return null;const M=D.geometry.coordinates[0].map(Z=>[Z[0],Z[1]]),$=((U=w==null?void 0:w.area)==null?void 0:U.id)===D.id;return s.jsx(Cl,{positions:M,pathOptions:{color:D.color,fillColor:D.color,fillOpacity:$?.3:.1,weight:$?3:2}},D.id)}),typeof a.lat=="number"&&typeof a.lng=="number"&&s.jsx(cs,{position:[a.lat,a.lng],icon:O})]})}),w&&s.jsx("div",{className:`mt-3 p-3 rounded border ${w.area?"bg-green-50 border-green-200 text-green-800":"bg-yellow-50 border-yellow-200 text-yellow-800"}`,children:w.area?s.jsxs(s.Fragment,{children:["Assigned Area: ",s.jsx("strong",{children:w.area.name}),s.jsxs("span",{className:"ml-2 text-xs opacity-70",children:[w.confidence," (",w.method,")"]})]}):s.jsx(s.Fragment,{children:"No matching area for this location"})}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700",children:"Latitude"}),s.jsx("input",{type:"number",step:"any",name:"lat",value:a.lat??"",onChange:k,className:"w-full px-3 py-2 border rounded"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700",children:"Longitude"}),s.jsx("input",{type:"number",step:"any",name:"lng",value:a.lng??"",onChange:k,className:"w-full px-3 py-2 border rounded"})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Medical Information"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Categories"}),s.jsxs("div",{className:"flex space-x-6",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"patient_categories.critical",checked:a.patient_categories.critical,onChange:k,disabled:C,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Critical"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"patient_categories.elderly",checked:a.patient_categories.elderly,onChange:k,disabled:C,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Elderly"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"patient_categories.pregnant",checked:a.patient_categories.pregnant,onChange:k,disabled:C,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Pregnant"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personal Health History"}),s.jsx("textarea",{name:"personal_health_history",rows:3,value:a.personal_health_history,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor Diagnosed"}),s.jsx("textarea",{name:"doctor_diagnosed",rows:3,value:a.doctor_diagnosed,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medications History"}),s.jsx("textarea",{name:"medications_history",rows:3,value:a.medications_history,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Food Allergies"}),s.jsx("input",{type:"text",name:"food_allergies",value:a.food_allergies,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medication Allergies"}),s.jsx("input",{type:"text",name:"medication_allergies",value:a.medication_allergies,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Height"}),s.jsx("input",{type:"text",name:"height",value:a.height,onChange:k,readOnly:C,placeholder:"e.g., 175 cm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight"}),s.jsx("input",{type:"text",name:"weight",value:a.weight,onChange:k,readOnly:C,placeholder:"e.g., 70 kg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BMI"}),s.jsx("input",{type:"text",name:"bmi",value:a.bmi,onChange:k,readOnly:!0,placeholder:"Auto-calculated",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),s.jsx("input",{type:"text",name:"temperature",value:a.temperature,onChange:k,readOnly:C,placeholder:"e.g., 98.6F",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pulse"}),s.jsx("input",{type:"text",name:"pulse",value:a.pulse,onChange:k,readOnly:C,placeholder:"e.g., 72 bpm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Pressure"}),s.jsx("input",{type:"text",name:"blood_pressure",value:a.blood_pressure,onChange:k,readOnly:C,placeholder:"e.g., 120/80 mmHg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diabetes"}),s.jsx("input",{type:"text",name:"diabetes",value:a.diabetes,onChange:k,readOnly:C,placeholder:"e.g., Type 2, HbA1c: 7.2%",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mental Health Status"}),s.jsx("div",{className:"flex flex-wrap gap-4",children:["Normal","Anxiety","Depression","Stress","Other"].map(D=>{const M=(a.mental_health_status||"").split(",").map($=>$.trim()).includes(D);return s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:M,onChange:$=>{const R=new Set((a.mental_health_status||"").split(",").map(E=>E.trim()).filter(Boolean));$.target.checked?R.add(D):R.delete(D),l(E=>({...E,mental_health_status:Array.from(R).join(", ")}))},disabled:C,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),D]},D)})})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Any Other Symptoms"}),s.jsx("textarea",{name:"other_symptoms",rows:2,value:a.other_symptoms,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pregnancy Details"}),s.jsx("textarea",{name:"pregnancy_details",rows:3,value:a.pregnancy_details,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",placeholder:"Include gestational age, due date, complications, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Smoker"}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"smoker",checked:a.smoker===!0,onChange:()=>l(D=>({...D,smoker:!0})),disabled:C}),"Yes"]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"smoker",checked:a.smoker===!1,onChange:()=>l(D=>({...D,smoker:!1})),disabled:C}),"No"]})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor's Notes"}),s.jsx("textarea",{name:"doctors_note",rows:4,value:a.doctors_note,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",placeholder:"Doctor's observations, recommendations, and notes..."})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Aa,{className:"w-5 h-5"}),s.jsx("span",{children:e?"Update Patient":"Create Patient"})]})})]})]})]})})},YH=()=>{const{user:e}=Se(),[t,n]=x.useState([]),[r,i]=x.useState(!0),[a,l]=x.useState(""),[u,d]=x.useState(!1),[m,h]=x.useState(null),[f,g]=x.useState(!1),[y,j]=x.useState(""),[w,P]=x.useState("");x.useEffect(()=>{b(),(async()=>{var U;if((e==null?void 0:e.role)!=="volunteer")return;const{data:R}=await cn(),E=(R||[]).find(Z=>Z.user_id===e.id);E&&(j(((U=E.user)==null?void 0:U.full_name)||E.name),P(E.area_name||""))})()},[]);const b=async()=>{try{const{data:R,error:E}=await Bt();E?console.error("Error fetching patients:",E):n((R||[]).map(U=>({...U,created_by_user:U.created_by_user})))}catch(R){console.error("Error fetching patients:",R)}finally{i(!1)}},N=x.useMemo(()=>{const R=a.toLowerCase();let E=t;if((e==null?void 0:e.role)==="volunteer"&&w){const U=w.toLowerCase();E=E.filter(Z=>(Z.area_name||"").toLowerCase()===U)}return(e==null?void 0:e.role)==="volunteer"&&f&&y&&(E=E.filter(U=>(U.assigned_vhv_name||"").toLowerCase().includes(y.toLowerCase()))),E.filter(U=>{var Z,K;return U.name.toLowerCase().includes(R)||U.medical_record_number.toLowerCase().includes(R)||((Z=U.assigned_vhv_name)==null?void 0:Z.toLowerCase().includes(R))||((K=U.assigned_doctor)==null?void 0:K.toLowerCase().includes(R))||U.doctor_diagnosed.toLowerCase().includes(R)})},[t,a,e==null?void 0:e.role,f,y,w]),[_,k]=x.useState(1),C=10,A=Math.max(1,Math.ceil(N.length/C)),O=x.useMemo(()=>{const R=(_-1)*C;return N.slice(R,R+C)},[N,_]);x.useEffect(()=>{k(1)},[a]);const I=R=>{const E=[];return R.patient_categories.critical&&E.push("Critical"),R.patient_categories.elderly&&E.push("Elderly"),R.patient_categories.pregnant&&E.push("Pregnant"),E.length?E.join(", "):"Normal"},B=R=>{h(R),d(!0)},D=()=>{d(!1),h(null),b()};if(r)return s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})});if(u)return s.jsx(GH,{patient:m,onClose:D});const M=(e==null?void 0:e.role)==="doctor",$=(e==null?void 0:e.role)==="volunteer";return M||$?s.jsxs("div",{className:"py-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"relative w-full max-w-xl",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search",value:a,onChange:R=>l(R.target.value),className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"ml-3 flex items-center gap-3",children:[$&&s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:R=>g(R.target.checked)}),"Assigned to me"]}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer")&&s.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[s.jsx(Gt,{className:"w-4 h-4"}),s.jsx("span",{children:"create new patient"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-sky-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Patient ID"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Assigned VHV"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[O.map(R=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:R.medical_record_number}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:R.name}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:I(R)}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:R.assigned_vhv_name||"-"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>B(R),className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(z2,{className:"w-4 h-4"}),"View Detail"]}),s.jsxs("button",{onClick:()=>{localStorage.setItem("records_selected_patient",R.id);try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"records"}))}catch{}window.setAppView&&window.setAppView("records")},className:"text-green-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(pa,{className:"w-4 h-4"}),"Records"]})]})})]},R.id)),O.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:5,children:"No patients found."})})]})]})}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Math.min(_*C,N.length)," of ",N.length," patients"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>k(R=>Math.max(1,R-1)),disabled:_===1,"aria-label":"Previous page",children:"<"}),s.jsx("button",{className:`px-3 py-1 rounded ${_===1?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>k(1),children:"1"}),A>2&&s.jsxs(s.Fragment,{children:[_>2&&s.jsx("span",{className:"px-1",children:""}),_>1&&_<A&&s.jsx("button",{className:"px-3 py-1 rounded bg-gray-200",children:_}),_<A-1&&s.jsx("span",{className:"px-1",children:""})]}),A>1&&s.jsx("button",{className:`px-3 py-1 rounded ${_===A?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>k(A),children:A}),s.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>k(R=>Math.min(A,R+1)),disabled:_===A,"aria-label":"Next page",children:">"})]})]})]})]}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Patient Management"}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer")&&s.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Gt,{className:"w-5 h-5"}),s.jsx("span",{children:"Add Patient"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search patients by name, MRN, or condition...",value:a,onChange:R=>l(R.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(R=>{var E,U;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all cursor-pointer",onClick:()=>B(R),children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Re,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:R.name}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["MRN: ",R.medical_record_number]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:R.doctor_diagnosed})]})]}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsxs("span",{children:["Gender: ",R.gender]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(Fu,{className:"w-4 h-4"}),s.jsx("span",{children:R.caregivers_contact})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Dr: ",R.assigned_doctor]})]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-3",children:["Created by: ",(E=R.created_by_user)==null?void 0:E.full_name," (",(U=R.created_by_user)==null?void 0:U.role,")"]}),(R.patient_categories.critical||R.patient_categories.elderly||R.patient_categories.pregnant)&&s.jsxs("div",{className:"flex space-x-1 mt-2",children:[R.patient_categories.critical&&s.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Critical"}),R.patient_categories.elderly&&s.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:"Elderly"}),R.patient_categories.pregnant&&s.jsx("span",{className:"px-2 py-1 bg-pink-100 text-pink-800 text-xs rounded-full",children:"Pregnant"})]})]})]},R.id)})}),N.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Re,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:a?"No patients found matching your search.":"No patients found."})]})]})},XH=()=>{var d,m;const{user:e}=Se(),[t,n]=x.useState(null),[r,i]=x.useState(!0),[a,l]=x.useState(null);x.useEffect(()=>{u()},[e]);const u=async()=>{if(e)try{const{data:h,error:f}=await ii(e.id);if(f&&f.code!=="PGRST116")console.error("Error fetching patient profile:",f);else if(n(h),h!=null&&h.assigned_vhv_name)try{const{data:g}=await cn(),y=(g||[]).find(j=>typeof h.assigned_vhv_name=="string"&&(j.name||"").toLowerCase().includes((h.assigned_vhv_name||"").toLowerCase()));y&&l(y)}catch{}}catch(h){console.error("Error fetching patient profile:",h)}finally{i(!1)}};return r?s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t?s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Re,{className:"w-8 h-8 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),s.jsxs("p",{className:"text-gray-600",children:["Medical Record: ",t.medical_record_number]})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"Patient ID:"})," ",s.jsx("span",{className:"font-mono text-gray-900",children:t.id})]}),s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"User ID:"})," ",s.jsx("span",{className:"font-mono text-gray-900",children:t.user_id})]}),s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"MRN:"})," ",s.jsx("span",{className:"font-mono text-gray-900",children:t.medical_record_number})]})]}),(t.patient_categories.critical||t.patient_categories.elderly||t.patient_categories.pregnant)&&s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Patient Categories"}),s.jsxs("div",{className:"flex space-x-2",children:[t.patient_categories.critical&&s.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:"Critical"}),t.patient_categories.elderly&&s.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 text-sm rounded-full",children:"Elderly"}),t.patient_categories.pregnant&&s.jsx("span",{className:"px-3 py-1 bg-pink-100 text-pink-800 text-sm rounded-full",children:"Pregnant"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a&&s.jsx("div",{className:"lg:col-span-2 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Re,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-blue-800",children:"Assigned VHV"}),s.jsxs("div",{className:"font-semibold text-blue-900",children:[a.name," ",a.volunteer_code?`(${a.volunteer_code})`:""]}),s.jsxs("div",{className:"text-sm text-blue-800",children:[a.email||""," ",a.phone?`  ${a.phone}`:""]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>{try{localStorage.setItem("message:recipient",a.user_id)}catch{}try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"messages"}))}catch{}window.setAppView&&window.setAppView("messages")},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-flex items-center gap-2 text-sm",children:[s.jsx(Dl,{className:"w-4 h-4"})," Message"]}),s.jsxs("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"map"}))}catch{}window.setAppView&&window.setAppView("map")},className:"px-3 py-2 border border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50 inline-flex items-center gap-2 text-sm",children:[s.jsx(xv,{className:"w-4 h-4"})," Open Map"]})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(Re,{className:"w-5 h-5"}),s.jsx("span",{children:"Basic Information"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(gn,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Gender"}),s.jsx("p",{className:"text-gray-900 capitalize",children:t.gender})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(os,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Address"}),s.jsx("p",{className:"text-gray-900",children:t.address})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Fu,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Caregiver's Contact"}),s.jsx("p",{className:"text-gray-900",children:t.caregivers_contact})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Re,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Assigned Doctor"}),t.assigned_doctor?s.jsx("button",{onClick:()=>{try{localStorage.setItem("doctor:search",t.assigned_doctor)}catch{}try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"doctors"}))}catch{}window.setAppView&&window.setAppView("doctors")},className:"text-blue-700 hover:underline",children:t.assigned_doctor}):s.jsx("p",{className:"text-gray-900",children:"Not assigned"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Re,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Assigned VHV"}),s.jsx("p",{className:"text-gray-900",children:t.assigned_vhv_name||"Not assigned"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(mn,{className:"w-5 h-5"}),s.jsx("span",{children:"Vital Signs"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Height / Weight / BMI"}),s.jsxs("p",{className:"text-gray-900",children:[t.height," / ",t.weight," / ",t.bmi]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Temperature"}),s.jsx("p",{className:"text-gray-900",children:t.temperature})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Pulse"}),s.jsx("p",{className:"text-gray-900",children:t.pulse})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Blood Pressure"}),s.jsx("p",{className:"text-gray-900",children:t.blood_pressure})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Diabetes Status"}),s.jsx("p",{className:"text-gray-900",children:t.diabetes||"None"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Smoker"}),s.jsx("p",{className:"text-gray-900",children:t.smoker?"Yes":"No"})]})]})]})]}),t.personal_health_history&&s.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-blue-800 flex items-center space-x-2 mb-3",children:[s.jsx(os,{className:"w-5 h-5"}),s.jsx("span",{children:"Personal Health History"})]}),s.jsx("p",{className:"text-blue-700",children:t.personal_health_history})]}),t.doctor_diagnosed&&s.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-green-800 flex items-center space-x-2 mb-3",children:[s.jsx(os,{className:"w-5 h-5"}),s.jsx("span",{children:"Doctor Diagnosed"})]}),s.jsx("p",{className:"text-green-700",children:t.doctor_diagnosed})]}),(t.food_allergies||t.medication_allergies)&&s.jsxs("div",{className:"mt-8 p-4 bg-red-50 rounded-lg border border-red-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-red-800 flex items-center space-x-2 mb-3",children:[s.jsx(Ur,{className:"w-5 h-5"}),s.jsx("span",{children:"Allergies"})]}),t.food_allergies&&s.jsxs("div",{className:"mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:"Food Allergies:"}),s.jsx("p",{className:"text-red-700",children:t.food_allergies})]}),t.medication_allergies&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:"Medication Allergies:"}),s.jsx("p",{className:"text-red-700",children:t.medication_allergies})]})]}),t.medications_history&&s.jsxs("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-purple-800 flex items-center space-x-2 mb-3",children:[s.jsx(Ws,{className:"w-5 h-5"}),s.jsx("span",{children:"Medications History"})]}),s.jsx("p",{className:"text-purple-700",children:t.medications_history})]}),t.mental_health_status&&s.jsxs("div",{className:"mt-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 flex items-center space-x-2 mb-3",children:[s.jsx(mn,{className:"w-5 h-5"}),s.jsx("span",{children:"Mental Health Status"})]}),s.jsx("p",{className:"text-indigo-700",children:t.mental_health_status})]}),t.other_symptoms&&s.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-yellow-800 flex items-center space-x-2 mb-3",children:[s.jsx(Ur,{className:"w-5 h-5"}),s.jsx("span",{children:"Other Symptoms"})]}),s.jsx("p",{className:"text-yellow-700",children:t.other_symptoms})]}),t.pregnancy_details&&s.jsxs("div",{className:"mt-6 p-4 bg-pink-50 rounded-lg border border-pink-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-pink-800 flex items-center space-x-2 mb-3",children:[s.jsx(mn,{className:"w-5 h-5"}),s.jsx("span",{children:"Pregnancy Details"})]}),s.jsx("p",{className:"text-pink-700",children:t.pregnancy_details})]}),t.doctors_note&&s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center space-x-2 mb-3",children:[s.jsx(os,{className:"w-5 h-5"}),s.jsx("span",{children:"Doctor's Notes"})]}),s.jsx("p",{className:"text-gray-700",children:t.doctors_note})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 text-sm text-gray-500",children:[s.jsxs("p",{children:["Date of Entry: ",new Date(t.doe).toLocaleDateString()]}),s.jsxs("p",{children:["Last Record Date: ",t.last_record_date?new Date(t.last_record_date).toLocaleDateString():"N/A"]}),s.jsxs("p",{children:["Profile created by: ",(d=t.created_by_user)==null?void 0:d.full_name," (",(m=t.created_by_user)==null?void 0:m.role,")"]}),s.jsxs("p",{children:["Created: ",new Date(t.created_at).toLocaleDateString()]}),t.updated_at&&s.jsxs("p",{children:["Last updated: ",new Date(t.updated_at).toLocaleDateString()]})]})]})]})}):s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[s.jsx(Re,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Profile Found"}),s.jsx("p",{className:"text-gray-600",children:"Your medical profile hasn't been created yet. Please contact your healthcare provider to set up your profile."})]})})},QH=()=>{var K,z,G,Y,re,ne;const{user:e}=Se(),[t,n]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState(null),[u,d]=x.useState(""),[m,h]=x.useState(!1),[f,g]=x.useState(""),[y,j]=x.useState(""),[w,P]=x.useState(!0),[b,N]=x.useState(""),[_,k]=x.useState(null),[C,A]=x.useState(null);x.useEffect(()=>{O(),I()},[e]),x.useEffect(()=>{try{const H=localStorage.getItem("message:recipient");if(H){h(!0),g(H);const X=r.find(te=>te.id===H);X&&N(X.full_name),localStorage.removeItem("message:recipient")}}catch{}},[r]);const O=async()=>{if(e)try{const{data:H,error:X}=await zM(e.id);X?console.error("Error fetching messages:",X):n(H||[])}catch(H){console.error("Error fetching messages:",H)}finally{P(!1)}},I=async()=>{try{const{data:H,error:X}=await Ct(e==null?void 0:e.id);if(X)console.error("Error fetching users:",X);else{const te=H||[],ae=(e==null?void 0:e.role)==="patient"?te.filter(Te=>Te.role!=="patient"):te;i(ae)}}catch(H){console.error("Error fetching users:",H)}},B=()=>{const H=new Map;return t.forEach(X=>{const te=X.sender_id===(e==null?void 0:e.id)?X.recipient_id:X.sender_id,ae=X.sender_id===(e==null?void 0:e.id)?X.recipient:X.sender;H.has(te)||H.set(te,{userId:te,user:ae,lastMessage:X,messages:[]}),H.get(te).messages.push(X)}),Array.from(H.values()).sort((X,te)=>new Date(te.lastMessage.created_at).getTime()-new Date(X.lastMessage.created_at).getTime())},D=H=>{var te;const X=(te=H.target.files)==null?void 0:te[0];if(X){if(X.size>5*1024*1024){alert("Image size must be less than 5MB");return}if(!X.type.startsWith("image/")){alert("Please select an image file");return}k(X);const ae=new FileReader;ae.onload=Te=>{var Ft;A((Ft=Te.target)==null?void 0:Ft.result)},ae.readAsDataURL(X)}},M=()=>{k(null),A(null)},$=async()=>{if(!u.trim()&&!_)return;const H=m?f:a;if(!H)return;let X,te;_&&(X=C,te=_.name);try{const{data:ae,error:Te}=await mr({sender_id:(e==null?void 0:e.id)||"",recipient_id:H,subject:m?y:"Re: Conversation",content:u||(_?`[Image: ${_.name}]`:""),image_url:X,image_name:te,is_read:!1});Te?(console.error("Error sending message:",Te),alert("Failed to send message. Please try again.")):(d(""),M(),m&&(j(""),h(!1),g(""),N("")),await O())}catch(ae){console.error("Error sending message:",ae),alert("Failed to send message. Please try again.")}},R=async H=>{try{await $M(H,(e==null?void 0:e.id)||"")}catch(X){console.error("Error marking message as read:",X)}},E=B(),U=a?((K=E.find(H=>H.userId===a))==null?void 0:K.messages)||[]:[],Z=r.filter(H=>H.full_name.toLowerCase().includes(b.toLowerCase())||H.email.toLowerCase().includes(b.toLowerCase()));return w?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Messages"}),s.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Gt,{className:"w-5 h-5"}),s.jsx("span",{children:"New Message"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s.jsxs("div",{className:"flex h-[600px]",children:[s.jsxs("div",{className:"w-1/3 border-r border-gray-200",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsx("h3",{className:"font-semibold text-gray-900",children:"Conversations"})}),s.jsx("div",{className:"overflow-y-auto",style:{height:"calc(600px - 60px)"},children:E.map(H=>{var X,te;return s.jsx("div",{onClick:()=>{l(H.userId),h(!1),H.messages.filter(ae=>ae.recipient_id===(e==null?void 0:e.id)&&!ae.is_read).forEach(ae=>R(ae.id))},className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ${a===H.userId?"bg-blue-50":""}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:s.jsx(Re,{className:"w-5 h-5 text-gray-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-gray-900 truncate",children:(X=H.user)==null?void 0:X.full_name}),s.jsx("p",{className:"text-sm text-gray-600 capitalize",children:(te=H.user)==null?void 0:te.role}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:H.lastMessage.content})]}),H.messages.some(ae=>ae.recipient_id===(e==null?void 0:e.id)&&!ae.is_read)&&s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})},H.userId)})})]}),s.jsx("div",{className:"flex-1",children:m?s.jsxs("div",{className:"p-4 h-full flex flex-col",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"New Message"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recipient"}),s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search users...",value:b,onChange:H=>N(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),s.jsx("div",{className:"mt-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg",children:Z.map(H=>s.jsxs("div",{onClick:()=>{g(H.id),N(H.full_name)},className:`p-2 cursor-pointer hover:bg-gray-50 ${f===H.id?"bg-blue-50":""}`,children:[s.jsx("p",{className:"text-sm font-medium",children:H.full_name}),s.jsx("p",{className:"text-xs text-gray-600 capitalize",children:H.role})]},H.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),s.jsx("input",{type:"text",value:y,onChange:H=>j(H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Message subject..."})]})]}),s.jsxs("div",{className:"flex-1 mt-4 flex flex-col",children:[C&&s.jsxs("div",{className:"mb-4 relative inline-block",children:[s.jsx("img",{src:C,alt:"Preview",className:"max-w-xs max-h-32 rounded-lg border border-gray-300"}),s.jsx("button",{onClick:M,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:s.jsx(Cs,{className:"w-3 h-3"})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_==null?void 0:_.name})]}),s.jsx("textarea",{value:u,onChange:H=>d(H.target.value),placeholder:_?"Add a caption (optional)...":"Type your message...",className:"flex-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none"}),s.jsxs("div",{className:"flex justify-between items-center mt-4",children:[s.jsx("div",{className:"flex space-x-2",children:s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"}),s.jsxs("div",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all flex items-center space-x-1",children:[s.jsx(vM,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Image"})]})]})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:$,disabled:!u.trim()&&!_||!f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Uu,{className:"w-4 h-4"}),s.jsx("span",{children:"Send"})]})]})]})]})]}):a?s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsx("p",{className:"font-semibold text-gray-900",children:((z=U[0])==null?void 0:z.sender_id)===(e==null?void 0:e.id)?(Y=(G=U[0])==null?void 0:G.recipient)==null?void 0:Y.full_name:(ne=(re=U[0])==null?void 0:re.sender)==null?void 0:ne.full_name})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:U.sort((H,X)=>new Date(H.created_at).getTime()-new Date(X.created_at).getTime()).map(H=>s.jsx("div",{className:`flex ${H.sender_id===(e==null?void 0:e.id)?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${H.sender_id===(e==null?void 0:e.id)?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[H.image_url&&s.jsxs("div",{className:"mb-2",children:[s.jsx("img",{src:H.image_url,alt:H.image_name||"Shared image",className:"max-w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(H.image_url,"_blank")}),H.image_name&&s.jsx("p",{className:`text-xs mt-1 ${H.sender_id===(e==null?void 0:e.id)?"text-blue-200":"text-gray-500"}`,children:H.image_name})]}),H.content&&H.content!==`[Image: ${H.image_name}]`&&s.jsx("p",{className:"text-sm",children:H.content}),s.jsx("p",{className:`text-xs mt-1 ${H.sender_id===(e==null?void 0:e.id)?"text-blue-200":"text-gray-500"}`,children:new Date(H.created_at).toLocaleString()})]})},H.id))}),s.jsxs("div",{className:"p-4 border-t border-gray-200",children:[C&&s.jsxs("div",{className:"mb-3 relative inline-block",children:[s.jsx("img",{src:C,alt:"Preview",className:"max-w-xs max-h-24 rounded-lg border border-gray-300"}),s.jsx("button",{onClick:M,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:s.jsx(Cs,{className:"w-3 h-3"})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_==null?void 0:_.name})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("label",{className:"cursor-pointer self-end",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"}),s.jsx("div",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",children:s.jsx(_M,{className:"w-5 h-5"})})]}),s.jsx("textarea",{value:u,onChange:H=>d(H.target.value),placeholder:_?"Add a caption (optional)...":"Type your reply...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none",rows:2,onKeyPress:H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),$())}}),s.jsx("button",{onClick:$,disabled:!u.trim()&&!_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(Uu,{className:"w-5 h-5"})})]})]})]}):s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Dl,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"Select a conversation to start messaging"})]})})})]})})]})},YC=({task:e,onClose:t,rolesFilter:n,forceAssignedToUserId:r,hideAssignedTo:i})=>{const{user:a}=Se(),[l,u]=x.useState(!1),[d,m]=x.useState([]),[h,f]=x.useState([]),[g,y]=x.useState([]),[j,w]=x.useState("general"),[P,b]=x.useState({title:"",description:"",priority:"medium",status:"pending",assigned_to:r||"",patient_id:"",due_date:""}),[N,_]=x.useState([]);x.useEffect(()=>{if(k(),A(),C(),e){const M=!!(e.patient_id&&e.due_date);w(M?"appointment":"general"),b({title:e.title,description:e.description,priority:e.priority,status:e.status,assigned_to:r||e.assigned_to,patient_id:e.patient_id||"",due_date:e.due_date||""}),e.form_fields&&Array.isArray(e.form_fields)&&_(e.form_fields.map($=>{var R;return{...$,options:((R=$.options)==null?void 0:R.join(", "))||""}}))}},[e]);const k=async()=>{try{const{data:M,error:$}=await Ct();if($)console.error("Error fetching users:",$);else{let R=(M||[]).filter(E=>E.role==="doctor"||E.role==="volunteer");n&&n.length&&(R=R.filter(E=>n.includes(E.role))),m(R)}}catch(M){console.error("Error fetching users:",M)}},C=async()=>{try{const{data:M,error:$}=await cn();$||y(M||[])}catch(M){console.error("Error fetching volunteers:",M)}},A=async()=>{try{const{data:M,error:$}=await Bt();$?console.error("Error fetching patients:",$):f(M||[])}catch(M){console.error("Error fetching patients:",M)}},O=async M=>{if(M.preventDefault(),u(!0),j==="appointment"){if(!P.patient_id){alert("Please select a patient for the appointment."),u(!1);return}if(!P.due_date){alert("Please select a date for the appointment."),u(!1);return}}try{const $=N.map(R=>({id:R.id,label:R.label,type:R.type,required:!!R.required,options:R.options?R.options.split(",").map(E=>E.trim()).filter(Boolean):void 0}));if(e){const{error:R}=await Nr(e.id,{...P,form_fields:$});if(R){console.error("Error updating task:",R);return}}else{const R={...P,assigned_to:r||P.assigned_to,assigned_by:(a==null?void 0:a.id)||"",patient_id:j==="appointment"?P.patient_id:void 0,form_fields:$,form_responses:{}},{error:E}=await Rl(R);if(E){console.error("Error creating task:",E);return}}t()}catch($){console.error("Error saving task:",$)}finally{u(!1)}},I=M=>{const{name:$,value:R}=M.target;$==="assigned_to"&&r||b({...P,[$]:R})},B=M=>{w(M),M==="general"&&b({...P,patient_id:""})},D=(n==null?void 0:n.includes("volunteer"))&&!e;return s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(Xd,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Yo,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Task":"Create New Task"})]})]})}),s.jsxs("form",{onSubmit:O,className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[D&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Type *"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"taskType",value:"general",checked:j==="general",onChange:()=>B("general"),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"text-sm text-gray-700",children:"General Task"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"taskType",value:"appointment",checked:j==="appointment",onChange:()=>B("appointment"),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Appointment"})]})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j==="appointment"?`Appointments require a patient and date, and will appear in the volunteer's "Today's Appointments" tab.`:`General tasks will appear in the volunteer's "Today's To-Do" tab when due today.`})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title *"}),s.jsx("input",{type:"text",name:"title",required:!0,value:P.title,onChange:I,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter task title..."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),s.jsx("textarea",{name:"description",required:!0,rows:4,value:P.description,onChange:I,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Describe the task in detail..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),s.jsxs("select",{name:"priority",required:!0,value:P.priority,onChange:I,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),(!(n!=null&&n.includes("volunteer"))||!!e)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),s.jsxs("select",{name:"status",required:!0,value:P.status,onChange:I,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{className:j==="general"?"opacity-50":"",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j==="appointment"?"Patient *":"Related Patient (Optional)"}),s.jsxs("select",{name:"patient_id",value:P.patient_id,onChange:I,required:j==="appointment",disabled:j==="general",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"",children:"Select patient..."}),h.map(M=>s.jsxs("option",{value:M.id,children:[M.name," - ",M.medical_record_number]},M.id))]}),j==="general"&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"General tasks don't require a patient assignment"})]}),i?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned To"}),s.jsx("div",{className:"px-4 py-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-700",children:"You"})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign To *"}),s.jsxs("select",{name:"assigned_to",required:!0,value:P.assigned_to,onChange:I,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"",children:"Select user..."}),(()=>{let M=d;if(n!=null&&n.includes("volunteer")){let $="";if(P.patient_id){const R=h.find(E=>E.id===P.patient_id);$=((R==null?void 0:R.area_name)||"").toLowerCase()}if($){const R=g.filter(E=>(E.area_name||"").toLowerCase()===$).map(E=>E.user_id);M=d.filter(E=>E.role==="volunteer"&&R.includes(E.id))}else M=d.filter(R=>R.role==="volunteer")}return M.map($=>s.jsxs("option",{value:$.id,children:[$.full_name," (",$.role,")"]},$.id))})()]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j==="appointment"?"Appointment Date *":"Due Date (Optional)"}),s.jsx("input",{type:"date",name:"due_date",value:P.due_date,onChange:I,required:j==="appointment",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),j==="appointment"&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Appointment date is required and will appear in the volunteer's appointment schedule"})]}),(n==null?void 0:n.includes("volunteer"))&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Form Fields (for volunteer to fill)"}),s.jsxs("div",{className:"space-y-3",children:[N.map((M,$)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-center",children:[s.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Field label",value:M.label,onChange:R=>{const E=R.target.value;_(U=>U.map((Z,K)=>K===$?{...Z,label:E}:Z))}}),s.jsxs("select",{className:"px-3 py-2 border rounded",value:M.type,onChange:R=>{const E=R.target.value;_(U=>U.map((Z,K)=>K===$?{...Z,type:E}:Z))},children:[s.jsx("option",{value:"text",children:"Text"}),s.jsx("option",{value:"textarea",children:"Textarea"}),s.jsx("option",{value:"number",children:"Number"}),s.jsx("option",{value:"date",children:"Date"}),s.jsx("option",{value:"select",children:"Select"}),s.jsx("option",{value:"checkbox",children:"Checkbox"}),s.jsx("option",{value:"radio",children:"Radio"})]}),s.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Options (comma separated)",value:M.options||"",onChange:R=>{const E=R.target.value;_(U=>U.map((Z,K)=>K===$?{...Z,options:E}:Z))}}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!M.required,onChange:R=>{const E=R.target.checked;_(U=>U.map((Z,K)=>K===$?{...Z,required:E}:Z))}})," Required"]}),s.jsx("button",{type:"button",className:"text-red-600 text-sm",onClick:()=>_(R=>R.filter((E,U)=>U!==$)),children:"Remove"})]})]},M.id)),s.jsx("button",{type:"button",className:"px-3 py-2 border rounded text-sm",onClick:()=>_(M=>[...M,{id:"f-"+Math.random().toString(36).slice(2,9),label:"",type:"text",options:""}]),children:"+ Add Field"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"These fields will appear on the volunteer side when they open the task to complete it."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Aa,{className:"w-5 h-5"}),s.jsx("span",{children:e?"Update Task":"Create Task"})]})})]})]})]})})},p1=({personalOnly:e=!1,title:t})=>{const{user:n}=Se(),[r,i]=x.useState([]),[a,l]=x.useState(!0),[u,d]=x.useState(""),[m,h]=x.useState("all"),[f,g]=x.useState("all"),[y,j]=x.useState(!1),[w,P]=x.useState(null);x.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:D,error:M}=await Hr(n==null?void 0:n.id);if(M)console.error("Error fetching tasks:",M);else{let $=D||[];e&&(n!=null&&n.id)&&($=$.filter(R=>R.assigned_to===n.id)),i($)}}catch(D){console.error("Error fetching tasks:",D)}finally{l(!1)}},N=async(D,M)=>{try{const{error:$}=await Nr(D,{status:M});$?console.error("Error updating task:",$):b()}catch($){console.error("Error updating task:",$)}},_=async D=>{if(window.confirm("Are you sure you want to delete this task?"))try{const{error:M}=await W2(D);M?console.error("Error deleting task:",M):b()}catch(M){console.error("Error deleting task:",M)}},k=D=>{P(D),j(!0)},C=()=>{j(!1),P(null),b()},A=r.filter(D=>{var E;const M=D.title.toLowerCase().includes(u.toLowerCase())||D.description.toLowerCase().includes(u.toLowerCase())||((E=D.assigned_to_user)==null?void 0:E.full_name.toLowerCase().includes(u.toLowerCase())),$=m==="all"||D.status===m,R=f==="all"||D.priority===f;return M&&$&&R}),O=D=>{switch(D){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=D=>{switch(D){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=D=>{switch(D){case"completed":return s.jsx(gs,{className:"w-4 h-4"});case"in_progress":return s.jsx(vl,{className:"w-4 h-4"});case"pending":return s.jsx(Ur,{className:"w-4 h-4"});default:return s.jsx(vl,{className:"w-4 h-4"})}};return a?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):y?s.jsx(YC,{task:w,onClose:C,forceAssignedToUserId:e?n==null?void 0:n.id:void 0,hideAssignedTo:e}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t||(e?"My Tasks":"Task Management")}),s.jsxs("button",{onClick:()=>j(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Gt,{className:"w-5 h-5"}),s.jsx("span",{children:e?"Add Task":"Create Task"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tasks...",value:u,onChange:D=>d(D.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:m,onChange:D=>h(D.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]}),s.jsxs("select",{value:f,onChange:D=>g(D.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Priority"}),s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:A.map(D=>{var M,$;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:D.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:D.description})]}),s.jsxs("div",{className:"flex space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>k(D),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Task",children:s.jsx(Hu,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>_(D.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Task",children:s.jsx(Il,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${O(D.priority)}`,children:[D.priority.charAt(0).toUpperCase()+D.priority.slice(1)," Priority"]}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${I(D.status)}`,children:[B(D.status),s.jsx("span",{children:D.status.replace("_"," ").charAt(0).toUpperCase()+D.status.replace("_"," ").slice(1)})]})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Assigned to: ",(M=D.assigned_to_user)==null?void 0:M.full_name]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Created by: ",($=D.assigned_by_user)==null?void 0:$.full_name]})]}),D.patient&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Patient: ",D.patient.name]})]}),D.due_date&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsxs("span",{children:["Due: ",new Date(D.due_date).toLocaleDateString()]})]})]}),D.status!=="completed"&&D.status!=="cancelled"&&s.jsxs("div",{className:"flex space-x-2",children:[D.status==="pending"&&s.jsx("button",{onClick:()=>N(D.id,"in_progress"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"Start Task"}),D.status==="in_progress"&&s.jsx("button",{onClick:()=>N(D.id,"completed"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:"Mark Complete"}),s.jsx("button",{onClick:()=>N(D.id,"cancelled"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Cancel"})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",children:[s.jsxs("p",{children:["Created: ",new Date(D.created_at).toLocaleDateString()]}),D.completed_at&&s.jsxs("p",{children:["Completed: ",new Date(D.completed_at).toLocaleDateString()]})]})]},D.id)})}),A.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gs,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:u||m!=="all"||f!=="all"?"No tasks found matching your filters.":"No tasks found."})]})]})},El=({open:e,title:t,onClose:n,children:r})=>e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:n}),s.jsxs("div",{className:"relative bg-white w-[95vw] max-w-3xl max-h-[85vh] rounded-2xl shadow-xl border border-gray-200 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-200 bg-gray-50 shrink-0",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900",children:t}),s.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 px-2 py-1",children:""})]}),s.jsx("div",{className:"p-5 overflow-y-auto flex-1",children:r})]})]}):null,JH=e=>e?new Date(e).toLocaleDateString():"",Em=(e,t)=>{if(!e)return"";const n=new Date(e).toLocaleDateString();return t?`${n} ${t}`:n},eZ=()=>{const{user:e}=Se(),[t,n]=x.useState("appointments"),[r,i]=x.useState([]),[a,l]=x.useState(!0),[u,d]=x.useState([]),[m,h]=x.useState(()=>new Date().toISOString().slice(0,10)),[f,g]=x.useState(""),[y,j]=x.useState([]),[w,P]=x.useState(!1),[b,N]=x.useState({patientId:"",doctorId:"",date:new Date().toISOString().slice(0,10),time:"09:00",title:"Appointment",description:""}),[_,k]=x.useState(!1),[C,A]=x.useState(null),[O,I]=x.useState({patientId:"",doctorId:"",date:"",time:"09:00",title:"",description:""}),B=async()=>{l(!0);const[{data:z},{data:G},{data:Y}]=await Promise.all([Hr(),Ct(),Bt()]),re=(z||[]).filter(ne=>ne.assigned_to===(e==null?void 0:e.id));i(re),d((G||[]).filter(ne=>ne.role==="doctor")),j(Y||[]),l(!1)};x.useEffect(()=>{B()},[]);const D=x.useMemo(()=>r.filter(z=>!!z.patient_id),[r]),M=x.useMemo(()=>r.filter(z=>!z.patient_id),[r]),$=x.useMemo(()=>{const z=f.toLowerCase();return D.filter(G=>{var Y;return G.status==="pending"&&((G.title||"").toLowerCase().includes(z)||(((Y=G.patient)==null?void 0:Y.name)||"").toLowerCase().includes(z))})},[D,f]),R=x.useMemo(()=>{const z=f.toLowerCase();return D.filter(G=>{var Y;return(G.status==="in_progress"||G.status==="completed")&&(m?G.due_date===m:!0)&&((G.title||"").toLowerCase().includes(z)||(((Y=G.patient)==null?void 0:Y.name)||"").toLowerCase().includes(z))})},[D,m,f]),E=x.useMemo(()=>{const z=f.toLowerCase();return D.filter(G=>{var Y;return G.status==="cancelled"&&((G.title||"").toLowerCase().includes(z)||(((Y=G.patient)==null?void 0:Y.name)||"").toLowerCase().includes(z))})},[D,f]),U=x.useMemo(()=>{const z=f.toLowerCase();return M.filter(G=>(G.title||"").toLowerCase().includes(z)||(G.description||"").toLowerCase().includes(z))},[M,f]),Z=async z=>{await Nr(z.id,{status:"in_progress"}),B()},K=z=>{A(z),I({patientId:z.patient_id||"",doctorId:z.assigned_to,date:z.due_date||new Date().toISOString().slice(0,10),time:z.due_time||"09:00",title:z.title||"Appointment",description:z.description||""}),k(!0)};return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"inline-flex rounded-lg overflow-hidden border border-gray-200",children:[s.jsxs("button",{className:`px-4 py-2 text-sm inline-flex items-center gap-2 whitespace-nowrap ${t==="appointments"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>n("appointments"),children:[s.jsx(Ps,{className:"w-4 h-4"})," Appointments"]}),s.jsxs("button",{className:`px-4 py-2 text-sm border-l border-gray-200 inline-flex items-center gap-2 whitespace-nowrap ${t==="general"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>n("general"),children:[s.jsx(Yo,{className:"w-4 h-4"})," General Tasks"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[t==="appointments"&&s.jsx("input",{type:"date",className:"px-3 py-2 border rounded",value:m,onChange:z=>h(z.target.value)}),s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-4 h-4 absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{className:"pl-7 pr-3 py-2 border rounded",placeholder:"Search...",value:f,onChange:z=>g(z.target.value)})]}),t==="appointments"&&s.jsxs("button",{className:"px-3 py-2 bg-blue-600 text-white rounded inline-flex items-center gap-1",onClick:()=>{N({patientId:"",doctorId:(e==null?void 0:e.id)||"",date:new Date().toISOString().slice(0,10),title:"Appointment",description:""}),P(!0)},children:[s.jsx(Gt,{className:"w-4 h-4"})," Create"]})]})]}),a?s.jsx("div",{className:"py-10 text-center",children:"Loading"}):t==="appointments"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden mb-6",children:[s.jsx("div",{className:"px-4 py-2 bg-red-50 border-b border-red-100 text-sm text-red-800",children:"Needs Approval"}),s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Patient"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Requested Date"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[$.map(z=>{var G;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:((G=z.patient)==null?void 0:G.name)||""}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:z.title||"Appointment"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Em(z.due_date,z.due_time)}),s.jsxs("td",{className:"px-4 py-2 text-sm flex gap-2",children:[s.jsxs("button",{onClick:()=>Z(z),className:"px-3 py-1 bg-green-600 text-white rounded inline-flex items-center gap-1",children:[s.jsx(gs,{className:"w-4 h-4"}),"Approve"]}),s.jsxs("button",{onClick:()=>K(z),className:"px-3 py-1 bg-blue-600 text-white rounded inline-flex items-center gap-1",children:[s.jsx(Hu,{className:"w-4 h-4"}),"Edit"]}),s.jsxs("button",{onClick:()=>Nr(z.id,{status:"cancelled"}).then(B),className:"px-3 py-1 bg-red-600 text-white rounded inline-flex items-center gap-1",children:[s.jsx(Pp,{className:"w-4 h-4"}),"Cancel"]})]})]},z.id)}),$.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-4 py-4 text-center text-gray-500",children:"No pending requests."})})]})]})]}),s.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-2 bg-blue-50 border-b border-blue-100 text-sm text-blue-800",children:["Approved  ",m||"All Dates"]}),s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Patient"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[R.map(z=>{var G;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:((G=z.patient)==null?void 0:G.name)||""}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:z.title||"Appointment"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Em(z.due_date,z.due_time)}),s.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:z.status.replace("_"," ")}),s.jsxs("td",{className:"px-4 py-2 text-sm flex gap-2",children:[s.jsxs("button",{onClick:()=>K(z),className:"px-3 py-1 bg-blue-600 text-white rounded inline-flex items-center gap-1",children:[s.jsx(Hu,{className:"w-4 h-4"}),"Edit"]}),s.jsxs("button",{onClick:()=>Nr(z.id,{status:"cancelled"}).then(B),className:"px-3 py-1 bg-red-600 text-white rounded inline-flex items-center gap-1",children:[s.jsx(Pp,{className:"w-4 h-4"}),"Cancel"]})]})]},z.id)}),R.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:"No approved appointments for this date."})})]})]})]}),s.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden mt-6",children:[s.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-100 text-sm text-gray-800",children:"Cancelled"}),s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Patient"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[E.map(z=>{var G;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:((G=z.patient)==null?void 0:G.name)||""}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:z.title||"Appointment"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:Em(z.due_date,z.due_time)})]},z.id)}),E.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-gray-500",children:"No cancelled appointments."})})]})]})]})]}):s.jsx("div",{className:"bg-white border rounded-xl overflow-hidden",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Due"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Priority"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Status"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[U.map(z=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.title}),s.jsx("td",{className:"px-4 py-2 text-sm",children:JH(z.due_date)}),s.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:z.priority}),s.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:z.status.replace("_"," ")})]},z.id)),U.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-gray-500",children:"No general tasks."})})]})]})}),s.jsx(El,{open:w,title:"Create Appointment",onClose:()=>P(!1),children:s.jsxs("form",{onSubmit:async z=>{z.preventDefault(),!(!b.patientId||!b.doctorId||!b.date)&&(await Rl({title:b.title||"Appointment",description:b.description||"Doctor scheduled appointment",priority:"medium",status:"in_progress",assigned_to:b.doctorId,assigned_by:(e==null?void 0:e.id)||"",patient_id:b.patientId,due_date:b.date,due_time:b.time}),P(!1),B())},className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded",value:b.patientId,onChange:z=>N({...b,patientId:z.target.value}),required:!0,children:[s.jsx("option",{value:"",children:"Select patient"}),y.map(z=>s.jsx("option",{value:z.id,children:z.name},z.id))]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded",value:b.doctorId,onChange:z=>N({...b,doctorId:z.target.value}),required:!0,children:[s.jsx("option",{value:"",children:"Select doctor"}),u.map(z=>s.jsx("option",{value:z.id,children:z.full_name},z.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:b.date,onChange:z=>N({...b,date:z.target.value}),required:!0}),s.jsx("input",{type:"time",className:"w-full px-3 py-2 border rounded",value:b.time,onChange:z=>N({...b,time:z.target.value}),required:!0})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:b.title,onChange:z=>N({...b,title:z.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border rounded",value:b.description,onChange:z=>N({...b,description:z.target.value})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 border rounded",onClick:()=>P(!1),children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Create"})]})]})}),s.jsx(El,{open:_,title:"Edit Appointment",onClose:()=>k(!1),children:s.jsxs("form",{onSubmit:async z=>{z.preventDefault(),C&&(await Nr(C.id,{title:O.title,description:O.description,assigned_to:O.doctorId,due_date:O.date,due_time:O.time,status:C.status==="pending"?"in_progress":C.status}),k(!1),B())},className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded",required:!0,value:O.doctorId,onChange:z=>I({...O,doctorId:z.target.value}),children:[s.jsx("option",{value:"",children:"Select doctor"}),u.map(z=>s.jsx("option",{value:z.id,children:z.full_name},z.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",required:!0,value:O.date,onChange:z=>I({...O,date:z.target.value})}),s.jsx("input",{type:"time",className:"w-full px-3 py-2 border rounded",required:!0,value:O.time,onChange:z=>I({...O,time:z.target.value})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:O.title,onChange:z=>I({...O,title:z.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border rounded",value:O.description,onChange:z=>I({...O,description:z.target.value})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 border rounded",onClick:()=>k(!1),children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save"})]})]})})]})},tZ=()=>{var D;const{user:e}=Se(),[t,n]=x.useState([]),[r,i]=x.useState(!0),[a,l]=x.useState(""),[u,d]=x.useState("all"),[m,h]=x.useState("all"),[f,g]=x.useState(!1),[y,j]=x.useState(null),[w,P]=x.useState(null);x.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:M}=await Hr(),$=(M||[]).filter(R=>{var E;return((E=R.assigned_to_user)==null?void 0:E.role)==="volunteer"});n($)}finally{i(!1)}},N=async(M,$)=>{const{error:R}=await Nr(M,{status:$});R||b()},_=async M=>{if(!window.confirm("Delete this task?"))return;const{error:$}=await W2(M);$||b()},k=M=>{j(M),g(!0)},C=()=>{g(!1),j(null),b()},A=t.filter(M=>{var U;const $=M.title.toLowerCase().includes(a.toLowerCase())||M.description.toLowerCase().includes(a.toLowerCase())||((U=M.assigned_to_user)==null?void 0:U.full_name.toLowerCase().includes(a.toLowerCase())),R=u==="all"||M.status===u,E=m==="all"||M.priority===m;return $&&R&&E}),O=M=>{switch(M){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=M=>{switch(M){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=M=>{switch(M){case"completed":return s.jsx(gs,{className:"w-4 h-4"});case"in_progress":return s.jsx(vl,{className:"w-4 h-4"});case"pending":return s.jsx(Ur,{className:"w-4 h-4"});default:return s.jsx(vl,{className:"w-4 h-4"})}};return r?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):f?s.jsx(YC,{task:y,onClose:C,rolesFilter:["volunteer"]}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Volunteer Tasks"}),(e==null?void 0:e.role)==="doctor"&&s.jsxs("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Gt,{className:"w-5 h-5"}),s.jsx("span",{children:"Assign Task"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tasks...",value:a,onChange:M=>l(M.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:u,onChange:M=>d(M.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]}),s.jsxs("select",{value:m,onChange:M=>h(M.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Priority"}),s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:A.map(M=>{var $;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:M.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:M.description})]}),s.jsxs("div",{className:"flex space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>k(M),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Task",children:s.jsx(Hu,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>_(M.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Task",children:s.jsx(Il,{className:"w-4 h-4"})}),(M.report||M.form_responses&&Object.keys(M.form_responses).length>0)&&s.jsx("button",{onClick:()=>P(M),className:"p-2 text-gray-500 hover:text-green-700 hover:bg-green-50 rounded-lg transition-all",title:"Review Submission",children:s.jsx(gs,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${O(M.priority)}`,children:[M.priority.charAt(0).toUpperCase()+M.priority.slice(1)," Priority"]}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${I(M.status)}`,children:[B(M.status),s.jsx("span",{children:M.status.replace("_"," ").charAt(0).toUpperCase()+M.status.replace("_"," ").slice(1)})]})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Volunteer: ",($=M.assigned_to_user)==null?void 0:$.full_name]})]}),M.patient&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsxs("span",{children:["Patient: ",M.patient.name]})]}),M.due_date&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsxs("span",{children:["Due: ",new Date(M.due_date).toLocaleDateString()]})]}),M.report&&s.jsxs("div",{className:"text-gray-700 bg-gray-50 border border-gray-200 rounded p-3",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Volunteer Report"}),s.jsx("div",{children:M.report})]})]}),M.status!=="completed"&&M.status!=="cancelled"&&s.jsxs("div",{className:"flex space-x-2",children:[M.status==="pending"&&s.jsx("button",{onClick:()=>N(M.id,"in_progress"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"Start"}),M.status==="in_progress"&&s.jsx("button",{onClick:()=>N(M.id,"completed"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:"Mark Complete"}),s.jsx("button",{onClick:()=>N(M.id,"cancelled"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Cancel"})]})]},M.id)})}),A.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gs,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No volunteer tasks found."})]}),s.jsx(El,{open:!!w,title:w?`Review Submission: ${w.title}`:"",onClose:()=>P(null),children:w?s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"text-gray-700",children:["Volunteer: ",s.jsx("span",{className:"font-medium",children:(D=w.assigned_to_user)==null?void 0:D.full_name})]}),w.patient&&s.jsxs("div",{className:"text-gray-700",children:["Patient: ",s.jsx("span",{className:"font-medium",children:w.patient.name})]}),w.due_date&&s.jsxs("div",{className:"text-gray-700",children:["Due: ",s.jsx("span",{className:"font-medium",children:new Date(w.due_date).toLocaleDateString()})]}),s.jsxs("div",{className:"text-gray-700",children:["Status: ",s.jsx("span",{className:"font-medium capitalize",children:w.status.replace("_"," ")})]})]}),w.report?s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Volunteer Report"}),s.jsx("div",{className:"whitespace-pre-wrap text-gray-800",children:w.report})]}):s.jsx("div",{className:"text-gray-500",children:"No written report provided."}),w.form_fields&&w.form_fields.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Form Responses"}),s.jsx("div",{className:"space-y-2",children:w.form_fields.map(M=>{const $=(w.form_responses||{})[M.id],R=Array.isArray($)?$.join(", "):$??"";return s.jsxs("div",{className:"flex justify-between gap-4 border-b border-gray-100 pb-1",children:[s.jsx("div",{className:"text-gray-600",children:M.label}),s.jsx("div",{className:"text-gray-900 text-right break-words",children:String(R)||""})]},M.id)})})]})]}):null})]})},g1=e=>{if(!e)return!1;const t=new Date(e),n=new Date;return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()},nZ=()=>{const{user:e}=Se(),[t,n]=x.useState([]),[r,i]=x.useState(!0),[a,l]=x.useState("appointments"),[u,d]=x.useState(null),[m,h]=x.useState(""),[f,g]=x.useState({});x.useEffect(()=>{y()},[]);const y=async()=>{const{data:E}=await Hr(e==null?void 0:e.id),U=(E||[]).filter(Z=>Z.assigned_to===(e==null?void 0:e.id));n(U),i(!1)},j=E=>E.status==="completed"&&!(E.report&&String(E.report).trim().length>0)?"in_progress":E.status,w=x.useMemo(()=>t.filter(E=>g1(E.due_date)&&!!E.patient),[t]),P=x.useMemo(()=>t.filter(E=>g1(E.due_date)&&!E.patient),[t]),b=E=>{if(!E)return!1;const U=new Date(E),Z=new Date;return U.setHours(0,0,0,0)>Z.setHours(0,0,0,0)},N=E=>{if(!E)return!1;const U=new Date(E),Z=new Date;return U.setHours(0,0,0,0)<Z.setHours(0,0,0,0)},_=x.useMemo(()=>t.filter(E=>!!E.patient&&b(E.due_date)&&j(E)!=="completed"&&E.status!=="cancelled"),[t]),k=x.useMemo(()=>t.filter(E=>!!E.patient&&N(E.due_date)&&j(E)!=="completed"&&E.status!=="cancelled"),[t]),C=x.useMemo(()=>t.filter(E=>!!E.patient&&E.status==="completed"&&!!(E.report&&String(E.report).trim().length>0)),[t]),A=x.useMemo(()=>t.filter(E=>!E.patient&&b(E.due_date)&&j(E)!=="completed"&&E.status!=="cancelled"),[t]),O=x.useMemo(()=>t.filter(E=>!E.patient&&N(E.due_date)&&j(E)!=="completed"&&E.status!=="cancelled"),[t]),I=x.useMemo(()=>t.filter(E=>!E.patient&&E.status==="completed"&&!!(E.report&&String(E.report).trim().length>0)),[t]),B=async E=>{await Nr(E.id,{status:"in_progress"}),y()},D=E=>{d(E),h(E.report||""),g(E.form_responses||{})},M=async()=>{u&&(await Nr(u.id,{status:"completed",report:m,form_responses:f}),d(null),h(""),g({}),y())},$=a==="appointments"?w:P,R=({title:E,items:U})=>s.jsxs("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:E}),U.length===0?s.jsx("div",{className:"text-gray-500 text-sm",children:"No items."}):s.jsx("div",{className:"space-y-3",children:U.map(Z=>s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:Z.title}),s.jsx("div",{className:"text-gray-600 mt-1",children:Z.description}),s.jsxs("div",{className:"text-gray-700 mt-2",children:["Due ",Z.due_date?new Date(Z.due_date).toLocaleDateString():""," ",Z.patient&&s.jsxs("span",{children:[" Patient: ",Z.patient.name]})]})]}),s.jsx("div",{className:"flex gap-2",children:j(Z)!=="completed"&&Z.status!=="cancelled"&&s.jsx("button",{onClick:()=>D(Z),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Open"})})]})},Z.id))})]});return r?s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Tasks"}),s.jsxs("div",{className:"inline-flex rounded-lg overflow-hidden border border-gray-200",children:[s.jsxs("button",{className:`px-4 py-2 text-sm flex items-center gap-2 ${a==="appointments"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>l("appointments"),children:[s.jsx(Ps,{className:"w-4 h-4"})," Todays Appointments"]}),s.jsxs("button",{className:`px-4 py-2 text-sm border-l border-gray-200 flex items-center gap-2 ${a==="todos"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>l("todos"),children:[s.jsx(wM,{className:"w-4 h-4"})," Todays ToDo"]})]})]}),$.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(Ur,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),"No tasks for today in this tab."]}):s.jsx("div",{className:"space-y-4",children:$.map(E=>s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-5 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:E.title}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:E.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-3",children:[s.jsx(gn,{className:"w-4 h-4"})," Due ",E.due_date?new Date(E.due_date).toLocaleDateString():"",E.patient&&s.jsxs("span",{children:[" Patient: ",E.patient.name]})]}),E.report&&s.jsxs("div",{className:"text-gray-700 bg-gray-50 border border-gray-200 rounded p-3 mt-3",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Submitted report"}),s.jsx("div",{children:E.report})]})]}),s.jsxs("div",{className:"flex gap-2",children:[j(E)==="pending"&&s.jsx("button",{onClick:()=>B(E),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Start"}),j(E)!=="completed"&&E.status!=="cancelled"&&s.jsx("button",{onClick:()=>D(E),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Open"})]})]})},E.id))}),a==="appointments"?s.jsxs(s.Fragment,{children:[s.jsx(R,{title:"Upcoming Appointments",items:_}),s.jsx(R,{title:"Overdue Appointments",items:k}),s.jsx(R,{title:"Finished Appointments",items:C})]}):s.jsxs(s.Fragment,{children:[s.jsx(R,{title:"Upcoming ToDo",items:A}),s.jsx(R,{title:"Overdue ToDo",items:O}),s.jsx(R,{title:"Finished ToDo",items:I})]}),s.jsx(El,{open:!!u,title:u?`Complete Task: ${u.title}`:"",onClose:()=>d(null),children:s.jsxs("div",{className:"space-y-4",children:[(u==null?void 0:u.form_fields)&&u.form_fields.length>0&&s.jsx("div",{className:"space-y-3",children:u.form_fields.map(E=>{const U=f[E.id]??"",Z=K=>g(z=>({...z,[E.id]:K}));switch(E.type){case"textarea":return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[E.label,E.required&&" *"]}),s.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-lg p-2",value:U,onChange:K=>Z(K.target.value)})]},E.id);case"number":case"date":case"text":return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[E.label,E.required&&" *"]}),s.jsx("input",{type:E.type,className:"w-full border border-gray-300 rounded-lg p-2",value:U,onChange:K=>Z(K.target.value)})]},E.id);case"select":return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[E.label,E.required&&" *"]}),s.jsxs("select",{className:"w-full border border-gray-300 rounded-lg p-2",value:U,onChange:K=>Z(K.target.value),children:[s.jsx("option",{value:"",children:"Select"}),(E.options||[]).map(K=>s.jsx("option",{value:K,children:K},K))]})]},E.id);case"checkbox":return s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-1",children:[E.label,E.required&&" *"]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:(E.options||[]).map(K=>{const z=Array.isArray(U)?U:[],G=z.includes(K);return s.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:G,onChange:Y=>{const re=new Set(z);Y.target.checked?re.add(K):re.delete(K),Z(Array.from(re))}})," ",K]},K)})})]},E.id);case"radio":return s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-1",children:[E.label,E.required&&" *"]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:(E.options||[]).map(K=>s.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:E.id,checked:U===K,onChange:()=>Z(K)})," ",K]},K))})]},E.id);default:return null}})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Report / Notes"}),s.jsx("textarea",{value:m,onChange:E=>h(E.target.value),rows:4,className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500",placeholder:"Write your visit notes, actions taken, observations, etc."})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-lg",onClick:()=>d(null),children:"Cancel"}),s.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg",onClick:M,children:"Submit & Complete"})]})]})})]})},Om=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16"],rZ=({onClose:e,onAreaChanged:t})=>{const{user:n}=Se(),[r,i]=x.useState([]),[a,l]=x.useState(!0),[u,d]=x.useState(!1),[m,h]=x.useState([]);x.useState(null);const[f,g]=x.useState(!1),[y,j]=x.useState(""),[w,P]=x.useState(Om[0]),[b,N]=x.useState(null),[_,k]=x.useState(null),C=x.useCallback(async()=>{l(!0);const{data:E,error:U}=await ec();!U&&E&&i(E),l(!1)},[]);x.useEffect(()=>{C()},[C]),x.useEffect(()=>{b?ZH(b.id).then(E=>{k(E)}):k(null)},[b]);const A=()=>{d(!0),h([])},O=()=>{m.length>=3?g(!0):(alert("Please draw at least 3 points to create an area"),d(!1),h([]))},I=()=>{d(!1),h([])},B=async()=>{if(!y.trim()){alert("Please enter a name for the area");return}if(m.length<3){alert("Area must have at least 3 points");return}const E={type:"Polygon",coordinates:[[...m.map(K=>[K[0],K[1]]),m[0]].map(K=>[K[0],K[1]])]},{data:U,error:Z}=await FH({name:y,color:w,geometry:E,created_by:(n==null?void 0:n.id)||""});if(Z){console.error("Error creating area:",Z),alert("Failed to create area: "+Z.message);return}g(!1),d(!1),h([]),j(""),P(Om[0]),await C(),t&&t()},D=async E=>{if(!confirm("Are you sure you want to delete this area? Volunteers and patients will be unassigned."))return;const{error:U}=await HH(E);if(U){console.error("Error deleting area:",U),alert("Failed to delete area: "+U.message);return}N(null),await C(),t&&t()},M=async(E,U)=>{const{error:Z}=await UH(E,{color:U});if(Z){console.error("Error updating area color:",Z);return}await C(),t&&t()},$=()=>(my({click(E){u&&h(U=>[...U,[E.latlng.lat,E.latlng.lng]])}}),null),R=()=>{const E=hy();return x.useEffect(()=>{E.setView([13.793,100.321],13)},[E]),null};return a?s.jsx("div",{className:"py-10 text-center",children:"Loading areas..."}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Map Area Management"}),s.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:s.jsx(Cs,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-4 flex items-center gap-3",children:u?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:O,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[s.jsx(Aa,{className:"w-4 h-4"}),"Finish Drawing"]}),s.jsxs("button",{onClick:I,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:[s.jsx(Cs,{className:"w-4 h-4"}),"Cancel"]}),s.jsxs("span",{className:"text-sm text-gray-600",children:["Click on map to add points (",m.length," points)"]})]}):s.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(Gt,{className:"w-4 h-4"}),"Draw New Area"]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-3",children:s.jsx("div",{className:"h-[600px] w-full border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs(Gf,{center:[13.793,100.321],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(R,{}),s.jsx(Yf,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx($,{}),r.map(E=>{var Z,K;if(!((K=(Z=E.geometry)==null?void 0:Z.coordinates)!=null&&K[0]))return null;const U=E.geometry.coordinates[0].map(z=>[z[0],z[1]]);return s.jsx(Cl,{positions:U,pathOptions:{color:E.color,fillColor:E.color,fillOpacity:(b==null?void 0:b.id)===E.id?.4:.2,weight:(b==null?void 0:b.id)===E.id?3:2},eventHandlers:{click:()=>N(E)},children:s.jsx(ra,{children:s.jsxs("div",{className:"p-2",children:[s.jsx("div",{className:"font-semibold text-lg mb-2",children:E.name}),_&&(b==null?void 0:b.id)===E.id&&s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("div",{children:["Volunteers: ",_.volunteerCount]}),s.jsxs("div",{children:["Patients: ",_.patientCount]})]})]})})},`area-polygon-${E.id}`)}),u&&m.length>0&&s.jsxs(s.Fragment,{children:[m.length>=2&&s.jsx(Cl,{positions:m,pathOptions:{color:w,fillColor:w,fillOpacity:.3,weight:2,dashArray:"5, 5"}}),m.map((E,U)=>s.jsx(WC,{center:E,radius:8,pathOptions:{color:w,fillColor:w,fillOpacity:.8,weight:2}},`drawing-point-${U}`))]})]})})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Areas (",r.length,")"]}),s.jsxs("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:[r.map(E=>s.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-all ${(b==null?void 0:b.id)===E.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>N(E),children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:E.color}}),s.jsx("span",{className:"font-medium text-sm",children:E.name})]})}),(b==null?void 0:b.id)===E.id&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600",children:"Color:"}),s.jsx("input",{type:"color",value:E.color,onChange:U=>M(E.id,U.target.value),className:"w-8 h-6 rounded cursor-pointer"})]}),s.jsxs("button",{onClick:U=>{U.stopPropagation(),D(E.id)},className:"w-full inline-flex items-center justify-center gap-2 px-3 py-1.5 text-xs bg-red-50 text-red-700 rounded hover:bg-red-100",children:[s.jsx(Il,{className:"w-3 h-3"}),"Delete Area"]})]})]},E.id)),r.length===0&&s.jsx("div",{className:"text-sm text-gray-500 text-center py-8",children:'No areas yet. Click "Draw New Area" to create one.'})]})]})})]})]})]}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Name Your Area"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area Name"}),s.jsx("input",{type:"text",value:y,onChange:E=>j(E.target.value),placeholder:"e.g., North District Zone 1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area Color"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:w,onChange:E=>P(E.target.value),className:"w-12 h-10 rounded cursor-pointer"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Om.map(E=>s.jsx("button",{onClick:()=>P(E),className:`w-8 h-8 rounded ${w===E?"ring-2 ring-blue-500":""}`,style:{backgroundColor:E}},E))})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{g(!1),d(!1),h([])},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Area"})]})]})]})})]})},Mo=[13.793,100.321];function Tm(e,t){const n=m=>m*Math.PI/180,i=n(t[0]-e[0]),a=n(t[1]-e[1]),l=n(e[0]),u=n(t[0]),d=Math.sin(i/2)*Math.sin(i/2)+Math.cos(l)*Math.cos(u)*Math.sin(a/2)*Math.sin(a/2);return 2*6371*Math.asin(Math.sqrt(d))}const iZ=({onBack:e})=>{const{user:t}=Se(),[n,r]=x.useState("all"),[i,a]=x.useState(10),[l,u]=x.useState([]),[d,m]=x.useState(null),[h,f]=x.useState(null),[g,y]=x.useState(Mo),[j,w]=x.useState([]),[P,b]=x.useState([]),[N,_]=x.useState([]),[k,C]=x.useState(""),[A,O]=x.useState(null),[I,B]=x.useState([]),[D,M]=x.useState(!0),[$,R]=x.useState(!1);x.useEffect(()=>{(async()=>{const{data:H}=await HM();u(H||[])})()},[]);const E=x.useCallback(async()=>{const{data:H}=await ec();B(H||[])},[]);x.useEffect(()=>{E()},[E]),x.useEffect(()=>{(async()=>{if((t==null?void 0:t.role)==="volunteer"){const[{data:H},X]=await Promise.all([Bt(),cn()]),te=(X.data||[]).find(me=>me.user_id===t.id),ae=((te==null?void 0:te.area_name)||"").toLowerCase();C((te==null?void 0:te.area_name)||""),O(te!=null&&te.lat&&(te!=null&&te.lng)?[te.lat,te.lng]:null);const Te=t.full_name,Ft=(H||[]).filter(me=>typeof me.assigned_vhv_name=="string"&&me.assigned_vhv_name.toLowerCase().includes(Te.toLowerCase()));w(Ft);const se=(H||[]).filter(me=>(me.area_name||"").toLowerCase()===ae);b(se);const ge=(X.data||[]).filter(me=>(me.area_name||"").toLowerCase()===ae);_(ge)}else if((t==null?void 0:t.role)==="doctor"||(t==null?void 0:t.role)==="patient"){const[{data:H},X]=await Promise.all([Bt(),cn()]);b(H||[]),_(X.data||[])}})()},[t]);const U=x.useMemo(()=>(l||[]).filter(H=>n==="patients"||n!=="all"&&n!=="patients"&&H.type!==n||H.type==="volunteer"?!1:Tm(d||A||Mo,[H.lat,H.lng])<=i),[l,n,i,d,A]),Z=x.useMemo(()=>{const H=d||A||Mo;let X=[];if((t==null?void 0:t.role)==="volunteer")X=n==="patients"?j||[]:P||[];else if((t==null?void 0:t.role)==="doctor")X=P||[];else return[];return X.filter(te=>typeof te.lat=="number"&&typeof te.lng=="number").filter(te=>Tm(H,[te.lat,te.lng])<=i)},[j,P,n,d,A,i,t]),K=x.useMemo(()=>{if(n==="patients")return[];if(n==="volunteer"||n==="all"){const H=d||A||Mo;return(N||[]).filter(X=>typeof X.lat=="number"&&typeof X.lng=="number").filter(X=>Tm(H,[X.lat,X.lng])<=i)}return[]},[N,n,d,A,i]),z=H=>H==="volunteer"?"#22c55e":H==="center"?"#0ea5e9":"#ef4444",G=x.useMemo(()=>Jo.divIcon({className:"custom-my-location-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;background:#2563eb;border:2px solid #fff;box-shadow:0 0 0 3px rgba(37,99,235,0.25);color:#fff;font-size:16px;line-height:1"></div>',iconSize:[28,28],iconAnchor:[14,14],popupAnchor:[0,-14]}),[]),Y=()=>{if(f(null),!("geolocation"in navigator)){f("Geolocation not supported by this browser");return}navigator.geolocation.getCurrentPosition(H=>{const X=[H.coords.latitude,H.coords.longitude];m(X),y(X)},H=>{f(H.message||"Unable to get current location")},{enableHighAccuracy:!0,timeout:1e4})},re=()=>{y(Mo)},ne=({center:H})=>{const X=hy();return x.useEffect(()=>{X.setView(H)},[H]),null};return $?s.jsx(rZ,{onClose:()=>R(!1),onAreaChanged:E}):s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(Xd,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:s.jsx(xv,{className:"w-6 h-6 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Nearby Care Network"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:n,onChange:H=>r(H.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"volunteer",children:"Volunteers"}),s.jsx("option",{value:"center",children:"Centers"}),s.jsx("option",{value:"hospital",children:"Hospitals"}),((t==null?void 0:t.role)==="volunteer"||(t==null?void 0:t.role)==="doctor")&&s.jsx("option",{value:"patients",children:(t==null?void 0:t.role)==="doctor"?"Patients":"My Patients"})]}),s.jsxs("select",{value:i,onChange:H=>a(parseInt(H.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[s.jsx("option",{value:5,children:"5 km"}),s.jsx("option",{value:10,children:"10 km"}),s.jsx("option",{value:20,children:"20 km"})]}),s.jsx("button",{onClick:Y,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",children:"Use My Location"}),s.jsx("button",{onClick:re,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",children:"Reset"}),s.jsxs("button",{onClick:()=>M(!D),className:`px-3 py-2 text-sm rounded-lg border ${D?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 hover:bg-gray-50"}`,children:[D?"Hide":"Show"," Areas"]}),(t==null?void 0:t.role)==="doctor"&&s.jsxs("button",{onClick:()=>R(!0),className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 inline-flex items-center gap-2",children:[s.jsx(PM,{className:"w-4 h-4"}),"Manage Areas"]})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"h-[600px] w-full border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs(Gf,{center:g,zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(ne,{center:g}),s.jsx(Yf,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx($H,{center:g,radius:i*1e3,pathOptions:{color:"#0ea5e9",weight:1}}),D&&I.map(H=>{var te,ae;if(!((ae=(te=H.geometry)==null?void 0:te.coordinates)!=null&&ae[0]))return null;const X=H.geometry.coordinates[0].map(Te=>[Te[0],Te[1]]);return s.jsx(Cl,{positions:X,pathOptions:{color:H.color,fillColor:H.color,fillOpacity:.15,weight:2},children:s.jsx(ra,{children:s.jsx("div",{className:"font-semibold",children:H.name})})},`area-${H.id}`)}),d&&s.jsx(cs,{position:d,icon:G,children:s.jsx(ra,{children:s.jsx("div",{className:"font-semibold",children:"You are here"})})}),!d&&A&&s.jsx(cs,{position:A,icon:G,children:s.jsx(ra,{children:s.jsx("div",{className:"font-semibold",children:"Your saved location"})})}),U.map(H=>s.jsx(WC,{center:[H.lat,H.lng],radius:10,pathOptions:{color:z(H.type),weight:2,fillOpacity:.6},children:s.jsx(ra,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-semibold",children:H.name}),s.jsx("div",{className:"text-xs text-gray-600 capitalize",children:H.type}),H.address&&s.jsx("div",{className:"text-xs text-gray-700",children:H.address}),H.phone&&s.jsxs("div",{className:"text-xs text-gray-700",children:[" ",H.phone]})]})})},H.id)),((t==null?void 0:t.role)==="volunteer"||(t==null?void 0:t.role)==="doctor")&&(n==="all"||n==="patients")&&Z.map(H=>s.jsx(cs,{position:[H.lat,H.lng],icon:Jo.divIcon({className:"custom-patient-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#a21caf;border:2px solid #fff;box-shadow:0 0 0 3px rgba(162,28,175,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),children:s.jsx(ra,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-semibold",children:H.name}),s.jsx("div",{className:"text-xs text-gray-600",children:"Patient"}),s.jsxs("div",{className:"text-xs text-gray-700",children:["MRN: ",H.medical_record_number]}),H.phone_number&&s.jsxs("div",{className:"text-xs text-gray-700",children:[" ",H.phone_number]})]})})},`pat-${H.id}`)),K.map(H=>s.jsx(cs,{position:[H.lat,H.lng],icon:Jo.divIcon({className:"custom-volunteer-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#22c55e;border:2px solid #fff;box-shadow:0 0 0 3px rgba(34,197,94,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),children:s.jsx(ra,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-semibold",children:H.name}),s.jsx("div",{className:"text-xs text-gray-600",children:"Volunteer"}),s.jsxs("div",{className:"text-xs text-gray-700",children:["Code: ",H.volunteer_code]}),H.email&&s.jsx("div",{className:"text-xs text-gray-700",children:H.email}),H.phone&&s.jsxs("div",{className:"text-xs text-gray-700",children:[" ",H.phone]})]})})},`vol-${H.id}`))]})}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"About this map"}),s.jsxs("div",{className:"text-blue-700 text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Center:"})," Salaya, Nakhon Pathom"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Filters:"})," ",n,"  ",i," km radius"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Legend:"})," ",s.jsx("span",{className:"text-green-700",children:"Volunteers"}),", ",s.jsx("span",{className:"text-sky-700",children:"Centers"}),", ",s.jsx("span",{className:"text-red-700",children:"Hospitals"})]}),h&&s.jsxs("p",{className:"text-red-700",children:["Location error: ",h]})]})]})]})]})})},aZ=({record:e,patientId:t,onClose:n})=>{const{user:r}=Se(),[i,a]=x.useState(!1),[l,u]=x.useState(null),[d,m]=x.useState([]),[h,f]=x.useState({patient_id:t||"",record_date:new Date().toISOString().split("T")[0],temperature:"",pulse:"",blood_pressure:"",weight:"",blood_sugar:"",oxygen_saturation:"",pain_level:0,fatigue_level:0,mood:"good",appetite:"good",sleep_quality:"good",symptoms_description:"",medications_taken:"",activities:"",notes:"",dr_instructions:"",custom_fields:[],custom_values:{}}),[g,y]=x.useState([]);x.useEffect(()=>{(r==null?void 0:r.role)==="patient"?j():((r==null?void 0:r.role)==="doctor"||(r==null?void 0:r.role)==="volunteer")&&w(),e&&(f({patient_id:e.patient_id,record_date:e.record_date,temperature:e.temperature||"",pulse:e.pulse||"",blood_pressure:e.blood_pressure||"",weight:e.weight||"",blood_sugar:e.blood_sugar||"",oxygen_saturation:e.oxygen_saturation||"",pain_level:e.pain_level||0,fatigue_level:e.fatigue_level||0,mood:e.mood||"good",appetite:e.appetite||"good",sleep_quality:e.sleep_quality||"good",symptoms_description:e.symptoms_description||"",medications_taken:e.medications_taken||"",activities:e.activities||"",notes:e.notes||"",dr_instructions:e.dr_instructions||"",custom_fields:e.custom_fields||[],custom_values:e.custom_values||{}}),y((e.custom_fields||[]).map(k=>({...k,options:(k.options||[]).join(", ")}))))},[e,r]);const j=async()=>{if(r)try{const{data:k,error:C}=await ii(r.id);!C&&k&&(u(k),f(A=>({...A,patient_id:k.id})))}catch(k){console.error("Error fetching patient profile:",k)}},w=async()=>{try{const{data:k,error:C}=await Bt();if(!C&&k){if((r==null?void 0:r.role)==="volunteer"){const A=(r.full_name||"").toLowerCase(),O=(k||[]).filter(I=>typeof I.assigned_vhv_name=="string"&&I.assigned_vhv_name.toLowerCase().includes(A));m(O)}else m(k);t&&f(A=>({...A,patient_id:t}))}}catch(k){console.error("Error fetching patients:",k)}},P=async k=>{k.preventDefault(),a(!0);try{const C=h.patient_id||t||(l==null?void 0:l.id);if(!C){alert("Please select a patient before saving the record."),a(!1);return}if(e){const{error:A}=await XM(e.id,{...h,custom_fields:g.map(O=>({id:O.id,label:O.label,type:O.type,options:(O.options||"").split(",").map(I=>I.trim()).filter(Boolean)}))});if(A){console.error("Error updating daily record:",A);return}}else{const{error:A}=await YM({...h,custom_fields:g.map(O=>({id:O.id,label:O.label,type:O.type,options:(O.options||"").split(",").map(I=>I.trim()).filter(Boolean)})),patient_id:C,recorded_by:(r==null?void 0:r.id)||""});if(A){console.error("Error creating daily record:",A);return}if((r==null?void 0:r.role)==="patient")try{const O=[],I=E=>{const U=(E||"").match(/-?\d+\.?\d*/);return U?parseFloat(U[0]):NaN},B=I(h.temperature);Number.isNaN(B)||(/c/i.test(h.temperature)?B*9/5+32:B)>=100.4&&O.push(`High temperature: ${h.temperature}`);const D=I(h.pulse);!Number.isNaN(D)&&(D>=110||D<=50)&&O.push(`Abnormal pulse: ${h.pulse}`);const M=(h.blood_pressure||"").match(/(\d+)\D+(\d+)/);if(M){const E=parseInt(M[1],10),U=parseInt(M[2],10);(E>=140||U>=90)&&O.push(`High blood pressure: ${h.blood_pressure}`),(E<=90||U<=60)&&O.push(`Low blood pressure: ${h.blood_pressure}`)}const $=I(h.blood_sugar);!Number.isNaN($)&&$>=200&&O.push(`High blood sugar: ${h.blood_sugar}`);const R=I(h.oxygen_saturation);if(!Number.isNaN(R)&&R>0&&R<92&&O.push(`Low SpO: ${h.oxygen_saturation}`),h.pain_level>=8&&O.push(`Severe pain level: ${h.pain_level}/10`),h.fatigue_level>=8&&O.push(`Severe fatigue: ${h.fatigue_level}/10`),O.length>0){const{data:E}=await Ct(),{data:U}=await cn(),Z=l,K=((Z==null?void 0:Z.assigned_vhv_name)||"").toLowerCase(),z=(U||[]).find(re=>(re.name||"").toLowerCase().includes(K)),G=((Z==null?void 0:Z.assigned_doctor)||"").toLowerCase(),Y=(E||[]).filter(re=>re.role==="doctor"&&(re.full_name||"").toLowerCase().includes(G));if(z!=null&&z.user_id){const re="Alert: Abnormal Daily Health Measurement",ne=`Patient: ${Z==null?void 0:Z.name}
MRN: ${Z==null?void 0:Z.medical_record_number}
Date: ${h.record_date}

Issues:
- ${O.join(`
- `)}

Action: Please review and schedule an appointment with ${(Z==null?void 0:Z.assigned_doctor)||"doctor"} as needed.`;await mr({sender_id:r.id,recipient_id:z.user_id,subject:re,content:ne});const H=R&&R<90||B&&!Number.isNaN(B)&&(/c/i.test(h.temperature)?B>=40:B>=104)?"urgent":"high";if(await Rl({title:"Schedule appointment for patient",description:`Auto-generated from daily record.

${O.join(`
`)}`,priority:H,status:"pending",assigned_to:z.user_id,assigned_by:r.id,patient_id:C,due_date:new Date().toISOString().slice(0,10)}),Y.length>0){const X=Y[0];await mr({sender_id:r.id,recipient_id:X.id,subject:"FYI: Abnormal Daily Record",content:`Patient ${Z==null?void 0:Z.name} submitted daily record with issues:
- ${O.join(`
- `)}
VHV has been asked to schedule an appointment.`})}}}}catch(O){console.warn("Alerting VHV failed:",O)}}n()}catch(C){console.error("Error saving daily record:",C)}finally{a(!1)}},b=k=>{const{name:C,value:A,type:O}=k.target;f(O==="range"||O==="number"?{...h,[C]:parseInt(A)||0}:{...h,[C]:A})},N=k=>k===0?"None":k<=3?"Mild":k<=6?"Moderate":k<=8?"Severe":"Extreme",_=k=>k===0?"text-green-600":k<=3?"text-yellow-600":k<=6?"text-orange-600":k<=8?"text-red-600":"text-red-800";return s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(Xd,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:s.jsx(pa,{className:"w-6 h-6 text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Daily Record":"New Daily Record"})]})]})}),s.jsxs("form",{onSubmit:P,className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 pb-2 border-b border-gray-200",children:"Basic Information"}),((r==null?void 0:r.role)==="doctor"||(r==null?void 0:r.role)==="volunteer")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Patient *"}),s.jsxs("select",{name:"patient_id",required:!0,value:h.patient_id,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"",children:"Choose a patient..."}),d.map(k=>s.jsx("option",{value:k.id,children:k.name},k.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Record Date *"}),s.jsx("input",{type:"date",name:"record_date",required:!0,value:h.record_date,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsx("h4",{className:"text-md font-semibold text-gray-800 mt-6",children:"Vital Signs"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),s.jsx("input",{type:"text",name:"temperature",value:h.temperature,onChange:b,placeholder:"e.g., 98.6F",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pulse"}),s.jsx("input",{type:"text",name:"pulse",value:h.pulse,onChange:b,placeholder:"e.g., 72 bpm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Pressure"}),s.jsx("input",{type:"text",name:"blood_pressure",value:h.blood_pressure,onChange:b,placeholder:"e.g., 120/80 mmHg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight"}),s.jsx("input",{type:"text",name:"weight",value:h.weight,onChange:b,placeholder:"e.g., 70 kg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Sugar"}),s.jsx("input",{type:"text",name:"blood_sugar",value:h.blood_sugar,onChange:b,placeholder:"e.g., 110 mg/dL",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Oxygen Saturation"}),s.jsx("input",{type:"text",name:"oxygen_saturation",value:h.oxygen_saturation,onChange:b,placeholder:"e.g., 98%",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 pb-2 border-b border-gray-200",children:"Symptoms & Well-being"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Pain Level: ",s.jsxs("span",{className:`font-semibold ${_(h.pain_level)}`,children:[h.pain_level," - ",N(h.pain_level)]})]}),s.jsx("input",{type:"range",name:"pain_level",min:"0",max:"10",value:h.pain_level,onChange:b,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"0 - No Pain"}),s.jsx("span",{children:"10 - Extreme Pain"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor Instructions"}),s.jsx("textarea",{name:"dr_instructions",rows:3,value:h.dr_instructions,onChange:b,readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:"Guidance for patient/volunteer (visible to them, not editable)",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all ${(r==null?void 0:r.role)!=="doctor"?"bg-gray-50":""}`})]}),(r==null?void 0:r.role)==="doctor"&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Fields"}),s.jsxs("div",{className:"space-y-3",children:[g.map((k,C)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-center",children:[s.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Label",value:k.label,onChange:A=>{const O=A.target.value;y(I=>I.map((B,D)=>D===C?{...B,label:O}:B))}}),s.jsxs("select",{className:"px-3 py-2 border rounded",value:k.type,onChange:A=>{const O=A.target.value;y(I=>I.map((B,D)=>D===C?{...B,type:O}:B))},children:[s.jsx("option",{value:"text",children:"Text"}),s.jsx("option",{value:"textarea",children:"Textarea"}),s.jsx("option",{value:"number",children:"Number"}),s.jsx("option",{value:"date",children:"Date"}),s.jsx("option",{value:"select",children:"Select"}),s.jsx("option",{value:"checkbox",children:"Checkbox"}),s.jsx("option",{value:"radio",children:"Radio"})]}),s.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Options (comma separated)",value:k.options||"",onChange:A=>{const O=A.target.value;y(I=>I.map((B,D)=>D===C?{...B,options:O}:B))}}),s.jsx("button",{type:"button",className:"text-red-600 text-sm",onClick:()=>y(A=>A.filter((O,I)=>I!==C)),children:"Remove"})]},k.id)),s.jsx("button",{type:"button",className:"px-3 py-2 border rounded text-sm",onClick:()=>y(k=>[...k,{id:"cf-"+Math.random().toString(36).slice(2,9),label:"",type:"text",options:""}]),children:"+ Add Field"})]})]}),(g.length>0||(h.custom_fields||[]).length>0)&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Values"}),s.jsx("div",{className:"space-y-3",children:(((r==null?void 0:r.role)==="doctor"?g:h.custom_fields)||[]).map(k=>{const C=k.id,A=h.custom_values[C]??"",O=I=>f(B=>({...B,custom_values:{...B.custom_values||{},[C]:I}}));return k.type==="textarea"?s.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border rounded",value:A,onChange:I=>O(I.target.value),readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:k.label},C):k.type==="number"?s.jsx("input",{type:"number",className:"w-full px-3 py-2 border rounded",value:A,onChange:I=>O(I.target.value),readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:k.label},C):k.type==="date"?s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:A,onChange:I=>O(I.target.value),readOnly:(r==null?void 0:r.role)!=="doctor"},C):k.type==="select"?s.jsxs("select",{className:"w-full px-3 py-2 border rounded",value:A,onChange:I=>O(I.target.value),disabled:(r==null?void 0:r.role)!=="doctor",children:[s.jsx("option",{value:"",children:"Select"}),(k.options||"").split(",").map(I=>I.trim()).filter(Boolean).map(I=>s.jsx("option",{value:I,children:I},I))]},C):k.type==="checkbox"?s.jsx("div",{className:"flex flex-wrap gap-3",children:(k.options||"").split(",").map(I=>I.trim()).filter(Boolean).map(I=>{const B=Array.isArray(A)?A:[],D=B.includes(I);return s.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:D,disabled:(r==null?void 0:r.role)!=="doctor",onChange:M=>{const $=new Set(B);M.target.checked?$.add(I):$.delete(I),O(Array.from($))}})," ",I]},I)})},C):k.type==="radio"?s.jsx("div",{className:"flex flex-wrap gap-3",children:(k.options||"").split(",").map(I=>I.trim()).filter(Boolean).map(I=>s.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:C,value:I,checked:A===I,disabled:(r==null?void 0:r.role)!=="doctor",onChange:()=>O(I)})," ",I]},I))},C):s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:A,onChange:I=>O(I.target.value),readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:k.label},C)})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Fatigue Level: ",s.jsxs("span",{className:`font-semibold ${_(h.fatigue_level)}`,children:[h.fatigue_level," - ",N(h.fatigue_level)]})]}),s.jsx("input",{type:"range",name:"fatigue_level",min:"0",max:"10",value:h.fatigue_level,onChange:b,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"0 - No Fatigue"}),s.jsx("span",{children:"10 - Extreme Fatigue"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mood"}),s.jsxs("select",{name:"mood",value:h.mood,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"excellent",children:"Excellent"}),s.jsx("option",{value:"good",children:"Good"}),s.jsx("option",{value:"fair",children:"Fair"}),s.jsx("option",{value:"poor",children:"Poor"}),s.jsx("option",{value:"very_poor",children:"Very Poor"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appetite"}),s.jsxs("select",{name:"appetite",value:h.appetite,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"excellent",children:"Excellent"}),s.jsx("option",{value:"good",children:"Good"}),s.jsx("option",{value:"fair",children:"Fair"}),s.jsx("option",{value:"poor",children:"Poor"}),s.jsx("option",{value:"very_poor",children:"Very Poor"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sleep Quality"}),s.jsxs("select",{name:"sleep_quality",value:h.sleep_quality,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"excellent",children:"Excellent"}),s.jsx("option",{value:"good",children:"Good"}),s.jsx("option",{value:"fair",children:"Fair"}),s.jsx("option",{value:"poor",children:"Poor"}),s.jsx("option",{value:"very_poor",children:"Very Poor"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Symptoms Description"}),s.jsx("textarea",{name:"symptoms_description",rows:3,value:h.symptoms_description,onChange:b,placeholder:"Describe any symptoms you're experiencing...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medications Taken"}),s.jsx("textarea",{name:"medications_taken",rows:2,value:h.medications_taken,onChange:b,placeholder:"List medications taken today...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activities"}),s.jsx("textarea",{name:"activities",rows:2,value:h.activities,onChange:b,placeholder:"Describe your activities today...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),s.jsx("textarea",{name:"notes",rows:3,value:h.notes,onChange:b,placeholder:"Any additional notes or observations...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:n,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Aa,{className:"w-5 h-5"}),s.jsx("span",{children:e?"Update Record":"Save Record"})]})})]})]})]})})},sZ=()=>{const{user:e}=Se(),[t,n]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState(!0),[u,d]=x.useState(""),[m,h]=x.useState("all"),[f,g]=x.useState(!1),[y,j]=x.useState(null);x.useEffect(()=>{const O=localStorage.getItem("records_selected_patient");O&&(h(O),localStorage.removeItem("records_selected_patient")),w(),(e==null?void 0:e.role)!=="patient"&&P()},[e]);const w=async()=>{try{const{data:O,error:I}=await GM(void 0,(e==null?void 0:e.role)==="patient"?e.id:void 0);if(I)console.error("Error fetching daily records:",I);else{let B=O||[];if((e==null?void 0:e.role)==="volunteer"){const D=(e.full_name||"").toLowerCase();B=B.filter(M=>M.patient&&typeof M.patient.assigned_vhv_name=="string"&&M.patient.assigned_vhv_name.toLowerCase().includes(D))}n(B)}}catch(O){console.error("Error fetching daily records:",O)}finally{l(!1)}},P=async()=>{try{const{data:O,error:I}=await Bt();if(I)console.error("Error fetching patients:",I);else if((e==null?void 0:e.role)==="volunteer"){const B=(e.full_name||"").toLowerCase(),D=(O||[]).filter(M=>typeof M.assigned_vhv_name=="string"&&M.assigned_vhv_name.toLowerCase().includes(B));i(D)}else i(O||[])}catch(O){console.error("Error fetching patients:",O)}},b=O=>{j(O),g(!0)},N=async O=>{if(window.confirm("Are you sure you want to delete this daily record?"))try{const{error:I}=await QM(O);I?console.error("Error deleting record:",I):w()}catch(I){console.error("Error deleting record:",I)}},_=()=>{g(!1),j(null),w()},k=t.filter(O=>{var D,M,$;const I=((D=O.patient)==null?void 0:D.name.toLowerCase().includes(u.toLowerCase()))||((M=O.symptoms_description)==null?void 0:M.toLowerCase().includes(u.toLowerCase()))||(($=O.notes)==null?void 0:$.toLowerCase().includes(u.toLowerCase())),B=m==="all"||O.patient_id===m;return I&&B}),C=O=>{switch(O){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";case"poor":return"bg-orange-100 text-orange-800";case"very_poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=O=>!O||O===0?"text-green-600":O<=3?"text-yellow-600":O<=6?"text-orange-600":O<=8?"text-red-600":"text-red-800";return a?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin"})})}):f?s.jsx(aZ,{record:y,onClose:_}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Daily Records"}),s.jsxs("button",{onClick:()=>g(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Gt,{className:"w-5 h-5"}),s.jsx("span",{children:"Add Record"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search records...",value:u,onChange:O=>d(O.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(e==null?void 0:e.role)!=="patient"&&s.jsxs("select",{value:m,onChange:O=>h(O.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Patients"}),r.map(O=>s.jsxs("option",{value:O.id,children:[O.name," - ",O.medical_record_number]},O.id))]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:k.map(O=>{var I,B,D,M;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:s.jsx(pa,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:(e==null?void 0:e.role)==="patient"?"My Record":(I=O.patient)==null?void 0:I.name}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsx("span",{children:new Date(O.record_date).toLocaleDateString()})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[((e==null?void 0:e.role)==="doctor"||O.recorded_by===(e==null?void 0:e.id))&&s.jsx("button",{onClick:()=>b(O),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit Record",children:s.jsx(R2,{className:"w-4 h-4"})}),((e==null?void 0:e.role)==="doctor"||O.recorded_by===(e==null?void 0:e.id))&&s.jsx("button",{onClick:()=>N(O.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Record",children:s.jsx(Il,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Vital Signs"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[O.temperature&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Temp:"}),s.jsx("span",{className:"ml-1 font-medium",children:O.temperature})]}),O.pulse&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Pulse:"}),s.jsx("span",{className:"ml-1 font-medium",children:O.pulse})]}),O.blood_pressure&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"BP:"}),s.jsx("span",{className:"ml-1 font-medium",children:O.blood_pressure})]}),O.weight&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Weight:"}),s.jsx("span",{className:"ml-1 font-medium",children:O.weight})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Mood:"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(O.mood)}`,children:((B=O.mood)==null?void 0:B.replace("_"," ").charAt(0).toUpperCase())+((D=O.mood)==null?void 0:D.replace("_"," ").slice(1))})]}),O.pain_level!==void 0&&O.pain_level>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Pain Level:"}),s.jsxs("span",{className:`font-medium ${A(O.pain_level)}`,children:[O.pain_level,"/10"]})]}),O.fatigue_level!==void 0&&O.fatigue_level>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Fatigue:"}),s.jsxs("span",{className:`font-medium ${A(O.fatigue_level)}`,children:[O.fatigue_level,"/10"]})]}),O.symptoms_description&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Symptoms:"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:O.symptoms_description})]}),O.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Notes:"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:O.notes})]}),O.dr_instructions&&s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-sm font-semibold text-blue-900",children:"Doctor Instructions"}),s.jsx("div",{className:"text-sm text-blue-800 mt-1 whitespace-pre-wrap",children:O.dr_instructions})]}),Array.isArray(O.custom_fields)&&O.custom_fields.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-1",children:"Additional Information"}),s.jsx("div",{className:"space-y-1 text-sm",children:O.custom_fields.map($=>{const R=O.custom_values?O.custom_values[$.id]:void 0,E=Array.isArray(R)?R.join(", "):R??"";return s.jsxs("div",{className:"flex justify-between gap-3",children:[s.jsx("span",{className:"text-gray-600",children:$.label}),s.jsx("span",{className:"text-gray-900 text-right break-words",children:String(E)||""})]},$.id)})})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:"w-3 h-3"}),s.jsxs("span",{children:["Recorded by: ",(M=O.recorded_by_user)==null?void 0:M.full_name]})]}),s.jsxs("p",{className:"mt-1",children:["Created: ",new Date(O.created_at).toLocaleDateString()]})]})]},O.id)})}),k.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pa,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:u||m!=="all"?"No records found matching your filters.":"No daily records found."}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Start tracking daily symptoms and vital signs by creating your first record."})]})]})},oZ=()=>{const{user:e}=Se(),[t,n]=x.useState(!0),[r,i]=x.useState(null),[a,l]=x.useState([]),[u,d]=x.useState(!1),[m,h]=x.useState([]),[f,g]=x.useState({doctorId:"",date:"",time:"09:00",title:"Appointment Request",message:""}),[y,j]=x.useState(!1),[w,P]=x.useState("");x.useEffect(()=>{(async()=>{try{if(!(e!=null&&e.id))return;const[{data:C},{data:A}]=await Promise.all([ii(e.id),Ct()]),O=(C==null?void 0:C.id)||null;i(O);const I=(A||[]).filter(M=>M.role==="doctor");if(h(I),C!=null&&C.assigned_doctor){const M=I.find($=>($.full_name||"").toLowerCase().includes((C.assigned_doctor||"").toLowerCase()));M&&(P(M.id),g($=>({...$,doctorId:$.doctorId||M.id})))}const{data:B}=await Hr(),D=(B||[]).filter(M=>M.patient_id===O);l(D)}finally{n(!1)}})()},[e]),x.useEffect(()=>{if(!r)return;const C=setInterval(async()=>{const{data:A}=await Hr(),O=(A||[]).filter(I=>I.patient_id===r);l(O)},8e3);return()=>clearInterval(C)},[r]);const b=x.useMemo(()=>{const C=new Date;return C.setHours(0,0,0,0),C.getTime()},[]),N=x.useMemo(()=>{const C=[],A=[],O=[],I=[],B=[];for(const M of a){if(!M.due_date){B.push(M);continue}const $=new Date(M.due_date).getTime();M.status==="completed"?O.push(M):M.status==="cancelled"?I.push(M):$<b?C.push(M):A.push(M)}const D=(M,$)=>{const R=M.due_date?new Date(M.due_date).getTime():0,E=$.due_date?new Date($.due_date).getTime():0;return R-E};return{overdue:C.sort(D),upcoming:A.sort(D),completed:O.sort(D),cancelled:I.sort(D),undated:B}},[a,b]),_=async C=>{if(!C||!window.confirm("Cancel this appointment?"))return;await Nr(C,{status:"cancelled"});const{data:A}=await Hr(),O=(A||[]).filter(I=>I.patient_id===r);l(O)},k=async C=>{if(C.preventDefault(),!r||!(e!=null&&e.id)){alert("Missing patient profile.");return}if(!f.doctorId){alert("Please select a doctor");return}if(!f.date){alert("Please choose a date");return}j(!0);try{await Rl({title:f.title||"Appointment Request",description:f.message||"Patient requested an appointment",priority:"medium",status:"pending",assigned_to:f.doctorId,assigned_by:e.id,patient_id:r,due_date:f.date,due_time:f.time}),await mr({sender_id:e.id,recipient_id:f.doctorId,subject:"Appointment Request",content:`Patient requests an appointment on ${f.date}.

Message: ${f.message||"(no additional message)"}
`,is_read:!1}),d(!1),g({doctorId:"",date:"",time:"09:00",title:"",message:""});const{data:A}=await Hr(),O=(A||[]).filter(I=>I.patient_id===r);l(O),alert("Appointment request sent")}finally{j(!1)}};return t?s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(Ps,{className:"w-6 h-6 text-blue-600"})," Appointments"]}),s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",onClick:()=>{g(C=>({...C,doctorId:C.doctorId||w||""})),d(!0)},children:[s.jsx(Gt,{className:"w-4 h-4"})," Request Appointment"]})]}),a.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(gn,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),"No appointments found."]}):s.jsxs("div",{className:"space-y-6",children:[N.overdue.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-red-700 mb-2",children:"Overdue"}),s.jsx("div",{className:"space-y-3",children:N.overdue.map(C=>s.jsx("div",{className:"bg-white border border-red-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:C.title||"Appointment"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[s.jsx(gn,{className:"w-4 h-4"})," ",C.due_date?new Date(C.due_date).toLocaleDateString():""," ",C.due_time?` ${C.due_time}`:"",C.assigned_to_user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",C.assigned_to_user.full_name]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-red-50 text-red-800 border-red-200 h-fit",children:"Overdue"}),s.jsx("button",{onClick:()=>_(C.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded",children:"Cancel"})]})]})},C.id))})]}),N.upcoming.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Upcoming"}),s.jsx("div",{className:"space-y-3",children:N.upcoming.map(C=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:C.title||"Appointment"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[s.jsx(gn,{className:"w-4 h-4"})," ",C.due_date?new Date(C.due_date).toLocaleDateString():""," ",C.due_time?` ${C.due_time}`:"",C.assigned_to_user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",C.assigned_to_user.full_name]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-blue-50 text-blue-800 border-blue-200 h-fit",children:C.status.replace("_"," ")}),s.jsx("button",{onClick:()=>_(C.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded",children:"Cancel"})]})]})},C.id))})]}),N.completed.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Completed"}),s.jsx("div",{className:"space-y-3",children:N.completed.map(C=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:C.title||"Appointment"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[s.jsx(gn,{className:"w-4 h-4"})," ",C.due_date?new Date(C.due_date).toLocaleDateString():""," ",C.due_time?` ${C.due_time}`:"",C.assigned_to_user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",C.assigned_to_user.full_name]})]})]}),s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-green-50 text-green-800 border-green-200 h-fit",children:"Completed"})]})},C.id))})]}),N.cancelled.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Cancelled"}),s.jsx("div",{className:"space-y-3",children:N.cancelled.map(C=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:C.title||"Appointment"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[s.jsx(gn,{className:"w-4 h-4"})," ",C.due_date?new Date(C.due_date).toLocaleDateString():""," ",C.due_time?` ${C.due_time}`:"",C.assigned_to_user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",C.assigned_to_user.full_name]})]})]}),s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-gray-50 text-gray-800 border-gray-200 h-fit",children:"Cancelled"})]})},C.id))})]}),N.undated.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Other"}),s.jsx("div",{className:"space-y-3",children:N.undated.map(C=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:C.title||"Appointment"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[s.jsx(gn,{className:"w-4 h-4"})," ",C.assigned_to_user&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",C.assigned_to_user.full_name]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-blue-50 text-blue-800 border-blue-200 h-fit",children:C.status.replace("_"," ")}),s.jsx("button",{onClick:()=>_(C.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded",children:"Cancel"})]})]})},C.id))})]})]}),u&&s.jsxs("div",{className:"mt-8 bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[s.jsx(Dl,{className:"w-5 h-5 text-blue-600"})," New Appointment Request"]}),s.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor"}),s.jsxs("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:f.doctorId,onChange:C=>g({...f,doctorId:C.target.value}),required:!0,children:[s.jsx("option",{value:"",children:"Select doctor"}),m.map(C=>s.jsx("option",{value:C.id,children:C.full_name},C.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:f.date,onChange:C=>g({...f,date:C.target.value}),required:!0}),s.jsx("input",{type:"time",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:f.time,onChange:C=>g({...f,time:C.target.value}),required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:f.title,onChange:C=>g({...f,title:C.target.value}),placeholder:"e.g., Follow-up consultation",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (optional)"}),s.jsx("textarea",{rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:f.message,onChange:C=>g({...f,message:C.target.value}),placeholder:"Additional details"})]}),s.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-lg",onClick:()=>d(!1),children:"Cancel"}),s.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50",children:y?"Sending":"Send Request"})]})]})]})]})},lZ=()=>{const{user:e}=Se(),[t,n]=x.useState(!0),[r,i]=x.useState([]),[a,l]=x.useState([]),[u,d]=x.useState(!1),[m,h]=x.useState([]),[f,g]=x.useState({doctorId:"",date:"",time:"09:00",title:"",message:"",patientId:""}),y=((e==null?void 0:e.full_name)||"").toLowerCase(),j=async()=>{n(!0);const[{data:b},{data:N},{data:_}]=await Promise.all([Bt(),Ct(),Hr()]),k=(b||[]).filter(O=>typeof O.assigned_vhv_name=="string"&&O.assigned_vhv_name.toLowerCase().includes(y));i(k),h((N||[]).filter(O=>O.role==="doctor"));const C=new Set(k.map(O=>O.id)),A=(_||[]).filter(O=>O.patient_id&&C.has(O.patient_id));l(A),n(!1)};x.useEffect(()=>{j()},[]),x.useEffect(()=>{const b=setInterval(()=>{j()},8e3);return()=>clearInterval(b)},[]);const w=x.useMemo(()=>{const b=new Date;b.setHours(0,0,0,0);const N=b.getTime(),_=[],k=[];for(const A of a){if(!A.due_date)continue;new Date(A.due_date).getTime()<N&&A.status!=="completed"&&A.status!=="cancelled"?k.push(A):_.push(A)}const C=(A,O)=>new Date(A.due_date||"").getTime()-new Date(O.due_date||"").getTime();return{overdue:k.sort(C),upcoming:_.sort(C)}},[a]),P=async b=>{b.preventDefault(),!(!(e!=null&&e.id)||!f.patientId||!f.doctorId||!f.date)&&(await Rl({title:f.title||"Appointment Request",description:f.message||"Volunteer requested an appointment",priority:"medium",status:"pending",assigned_to:f.doctorId,assigned_by:e.id,patient_id:f.patientId,due_date:f.date,due_time:f.time}),await mr({sender_id:e.id,recipient_id:f.doctorId,subject:"Appointment Request",content:`Volunteer requested appointment on ${f.date} for patient.

Message: ${f.message||"(none)"}`}),d(!1),g({doctorId:"",date:"",time:"09:00",title:"",message:"",patientId:""}),j(),alert("Appointment request sent"))};return t?s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(Ps,{className:"w-6 h-6 text-blue-600"})," Appointments"]}),s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",onClick:()=>d(!0),children:[s.jsx(Gt,{className:"w-4 h-4"})," Request Appointment"]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-6",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Upcoming"}),w.upcoming.length===0?s.jsx("div",{className:"text-gray-500 text-sm",children:"No upcoming appointments."}):s.jsx("div",{className:"space-y-2",children:w.upcoming.map(b=>s.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:b.title||"Appointment"}),s.jsxs("div",{className:"text-gray-700 flex items-center gap-2 mt-1",children:[s.jsx(gn,{className:"w-4 h-4"})," ",b.due_date?new Date(b.due_date).toLocaleDateString():""," ",b.due_time?` ${b.due_time}`:""," ",b.patient&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Re,{className:"w-4 h-4"})," ",b.patient.name]})]})]}),s.jsx("div",{className:"text-xs px-2 py-1 rounded-full border bg-blue-50 text-blue-800",children:b.status.replace("_"," ")})]},b.id))})]}),u&&s.jsx("div",{className:"mt-4 bg-white rounded-xl border border-gray-200 p-6",children:s.jsxs("form",{onSubmit:P,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded",required:!0,value:f.patientId,onChange:b=>g({...f,patientId:b.target.value}),children:[s.jsx("option",{value:"",children:"Select patient"}),r.map(b=>s.jsx("option",{value:b.id,children:b.name},b.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor"}),s.jsxs("select",{className:"w-full px-3 py-2 border rounded",required:!0,value:f.doctorId,onChange:b=>g({...f,doctorId:b.target.value}),children:[s.jsx("option",{value:"",children:"Select doctor"}),m.map(b=>s.jsx("option",{value:b.id,children:b.full_name},b.id))]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",required:!0,value:f.title,onChange:b=>g({...f,title:b.target.value}),placeholder:"e.g., Home visit follow-up"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",required:!0,value:f.date,onChange:b=>g({...f,date:b.target.value})}),s.jsx("input",{type:"time",className:"w-full px-3 py-2 border rounded",required:!0,value:f.time,onChange:b=>g({...f,time:b.target.value})})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (optional)"}),s.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border rounded",value:f.message,onChange:b=>g({...f,message:b.target.value})})]}),s.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 border rounded",onClick:()=>d(!1),children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Send Request"})]})]})})]})},cZ=async()=>{const[{data:e},{data:t}]=await Promise.all([cn(),ec()]),n=new Map((t||[]).map(i=>[i.id,i]));return{data:(e||[]).map(i=>({...i,area:i.area_id?n.get(i.area_id):void 0})),error:null}},uZ=async e=>{const{data:t,error:n}=await RM(e);return{data:t,error:n}},dZ=async(e,t)=>{const n={...t};delete n.area;const{data:r,error:i}=await Z2(e,n);return{data:r,error:i}},fZ=async()=>H2(),hZ=({record:e,onClose:t})=>{var $,R;const n=!!e,[r,i]=x.useState(!1),[a,l]=x.useState([]),[u,d]=x.useState(null),[m,h]=x.useState(!1),[f,g]=x.useState([]),[y,j]=x.useState([]),[w,P]=x.useState(""),b=((($=e==null?void 0:e.user)==null?void 0:$.full_name)||(e==null?void 0:e.name)||"").trim(),N=((e==null?void 0:e.area_name)||"").toLowerCase(),[_,k]=x.useState({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",dob:(e==null?void 0:e.dob)||"",photo_url:(e==null?void 0:e.photo_url)||"",volunteer_code:(e==null?void 0:e.volunteer_code)||"",province:"",district:"",subdistrict:"",addressLine:"",lat:e==null?void 0:e.lat,lng:e==null?void 0:e.lng});x.useEffect(()=>{if((async()=>{const{data:E}=await ec();l(E||[])})(),e!=null&&e.address){const E=e.address.split(",").map(U=>U.trim()).filter(Boolean);k(U=>({...U,province:E.slice(-1)[0]||"",district:E.slice(-2,-1)[0]||"",subdistrict:E.slice(-3,-2)[0]||"",addressLine:E.slice(0,-3).join(", ")}))}e||fZ().then(E=>{k(U=>({...U,volunteer_code:E}))})},[e]),x.useEffect(()=>{(async()=>{if(!e)return;const{data:E}=await Bt(),U=E||[];if(j(U),b){const Z=U.filter(K=>typeof K.assigned_vhv_name=="string"&&K.assigned_vhv_name.toLowerCase().includes(b.toLowerCase()));g(Z)}else g([])})()},[e,b]),x.useEffect(()=>{const E=[_.addressLine,_.subdistrict,_.district,_.province].filter(Boolean).join(", ");if(_.lat&&_.lng||E.length>5){const U=setTimeout(async()=>{h(!0);const Z=await qC(_.lat,_.lng,E,a);d(Z),Z.geocodedLat&&Z.geocodedLng&&!_.lat&&!_.lng&&k(K=>({...K,lat:Z.geocodedLat,lng:Z.geocodedLng})),h(!1)},1e3);return()=>clearTimeout(U)}},[_.lat,_.lng,_.addressLine,_.subdistrict,_.district,_.province,a]);const C=async E=>{var U,Z;E.preventDefault(),i(!0);try{const K=[_.addressLine,_.subdistrict,_.district,_.province].filter(Boolean).join(", "),z={name:_.name,email:_.email,phone:_.phone,address:K,lat:_.lat,lng:_.lng,dob:_.dob,photo_url:_.photo_url,area_id:((U=u==null?void 0:u.area)==null?void 0:U.id)||null,area_name:((Z=u==null?void 0:u.area)==null?void 0:Z.name)||null};if(!_.lat||!_.lng){alert("Please click on the map to set the volunteer's exact location."),i(!1);return}if(!(u!=null&&u.area)){alert("Please place the volunteer inside a defined area created by a doctor."),i(!1);return}if(n&&e){z.volunteer_code=_.volunteer_code;const{error:G}=await dZ(e.id,z);if(G)throw G}else{const{data:G,error:Y}=await BM(_.email,_.name);if(Y)throw Y;z.user_id=G==null?void 0:G.id,z.volunteer_code=_.volunteer_code;const{error:re}=await uZ(z);if(re)throw re}t()}catch(K){console.error("Error saving volunteer:",K),alert("Failed to save volunteer: "+K.message)}finally{i(!1)}},A=async()=>{const{data:E}=await Bt(),U=E||[];if(j(U),b){const Z=U.filter(K=>typeof K.assigned_vhv_name=="string"&&K.assigned_vhv_name.toLowerCase().includes(b.toLowerCase()));g(Z)}},O=async E=>{if(!e||!E)return;const U=(y||[]).find(K=>K.id===E);if(!(((U==null?void 0:U.area_name)||"").toLowerCase()===N||N==="")){alert("This patient is not in the same area as the volunteer.");return}await Wu(E,{assigned_vhv_name:b}),await A()},I=async E=>{E&&(await Wu(E,{assigned_vhv_name:""}),await A())},B=x.useMemo(()=>Jo.divIcon({className:"vol-pin",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#22c55e;border:2px solid #fff;box-shadow:0 0 0 3px rgba(34,197,94,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13]}),[]),D=_.lat&&_.lng?[_.lat,_.lng]:[13.793,100.321],M=()=>(my({click(E){k(U=>({...U,lat:E.latlng.lat,lng:E.latlng.lng}))}}),null);return s.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:n?"Edit Volunteer":"Create Volunteer"}),n&&e&&s.jsxs("div",{className:"mt-1 text-xs text-gray-600 flex flex-wrap gap-2",children:[s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["Record ID: ",s.jsx("span",{className:"font-mono",children:e.id})]}),s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["User ID: ",s.jsx("span",{className:"font-mono",children:e.user_id})]}),e.volunteer_code&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["Volunteer ID: ",s.jsx("span",{className:"font-mono",children:e.volunteer_code})]})]})]}),s.jsxs("form",{onSubmit:C,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),s.jsx("input",{required:!0,className:"w-full px-4 py-3 border rounded-lg",value:_.name,onChange:E=>k(U=>({...U,name:E.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),s.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 border rounded-lg",value:_.email,onChange:E=>k(U=>({...U,email:E.target.value})),disabled:n})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded-lg",value:_.phone,onChange:E=>k(U=>({...U,phone:E.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),s.jsx("input",{type:"date",className:"w-full px-4 py-3 border rounded-lg",value:_.dob,onChange:E=>k(U=>({...U,dob:E.target.value}))})]}),n&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Volunteer ID"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded-lg bg-gray-50",value:_.volunteer_code,readOnly:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),s.jsx("input",{placeholder:"Image URL",className:"w-full px-4 py-3 border rounded-lg",value:_.photo_url,onChange:E=>k(U=>({...U,photo_url:E.target.value}))})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Address Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province"}),s.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:_.province,onChange:E=>k(U=>({...U,province:E.target.value,district:"",subdistrict:""})),children:[s.jsx("option",{value:"",children:"Select Province"}),GC.map(E=>s.jsx("option",{value:E,children:E},E))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District"}),s.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:_.district,onChange:E=>k(U=>({...U,district:E.target.value,subdistrict:""})),disabled:!_.province,children:[s.jsx("option",{value:"",children:"Select District"}),Object.keys(Ad[_.province]||{}).map(E=>s.jsx("option",{value:E,children:E},E))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-District"}),s.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:_.subdistrict,onChange:E=>k(U=>({...U,subdistrict:E.target.value})),disabled:!_.district,children:[s.jsx("option",{value:"",children:"Select Sub-District"}),(((R=Ad[_.province])==null?void 0:R[_.district])||[]).map(E=>s.jsx("option",{value:E,children:E},E))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded-lg",placeholder:"House number, street, village",value:_.addressLine,onChange:E=>k(U=>({...U,addressLine:E.target.value}))})]})]})]}),u&&s.jsx("div",{className:`p-4 rounded-lg border-2 ${u.area?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:s.jsx("div",{className:"flex items-start gap-3",children:u.area?s.jsxs(s.Fragment,{children:[s.jsx(xM,{className:"w-5 h-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-green-900",children:"Area Assigned"}),s.jsxs("div",{className:"text-sm text-green-700 mt-1",children:["This volunteer will be assigned to: ",s.jsx("strong",{children:u.area.name})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:u.area.color}}),s.jsxs("span",{className:"text-xs text-green-600",children:["Confidence: ",u.confidence," (",u.method,")"]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(gM,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-yellow-900",children:"No Area Match"}),s.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"This location is not within any defined area. The volunteer will be unassigned."})]})]})})}),m&&s.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"}),"Determining area assignment..."]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (click map to set)"}),s.jsx("div",{className:"h-80 w-full border rounded-lg overflow-hidden",children:s.jsxs(Gf,{center:D,zoom:14,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(Yf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),s.jsx(M,{}),a.map(E=>{var K,z,G;if(!((z=(K=E.geometry)==null?void 0:K.coordinates)!=null&&z[0]))return null;const U=E.geometry.coordinates[0].map(Y=>[Y[0],Y[1]]),Z=((G=u==null?void 0:u.area)==null?void 0:G.id)===E.id;return s.jsx(Cl,{positions:U,pathOptions:{color:E.color,fillColor:E.color,fillOpacity:Z?.3:.1,weight:Z?3:2}},E.id)}),_.lat&&_.lng&&s.jsx(cs,{position:[_.lat,_.lng],icon:B})]})}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700",children:"Latitude"}),s.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded",value:_.lat??"",onChange:E=>k(U=>({...U,lat:parseFloat(E.target.value)}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700",children:"Longitude"}),s.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded",value:_.lng??"",onChange:E=>k(U=>({...U,lng:parseFloat(E.target.value)}))})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50",children:[r?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(Aa,{className:"w-5 h-5"}),r?"Saving...":"Save Volunteer"]})]})]}),n&&s.jsxs("div",{className:"mt-10",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Assigned Patients"}),s.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Patients assigned to ",b||"this volunteer","."]}),s.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsx("input",{placeholder:"Search patients by name or MRN",value:w,onChange:E=>P(E.target.value),className:"flex-1 px-3 py-2 border rounded"}),s.jsxs("select",{className:"flex-1 px-3 py-2 border rounded",onChange:E=>O(E.target.value),defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"Assign a patient"}),y.filter(E=>{const U=w.toLowerCase(),Z=(E.name||"").toLowerCase().includes(U)||(E.medical_record_number||"").toLowerCase().includes(U),K=typeof E.assigned_vhv_name=="string"&&E.assigned_vhv_name.toLowerCase().includes(b.toLowerCase()),z=(E.area_name||"").toLowerCase()===N||N==="";return Z&&!K&&z}).slice(0,20).map(E=>s.jsxs("option",{value:E.id,children:[E.name,"  ",E.medical_record_number]},E.id))]})]}),s.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Selecting a patient will immediately assign them to this volunteer. Only patients from the same area are listed."})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"MRN"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Name"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Area"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[f.map(E=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm",children:E.medical_record_number}),s.jsx("td",{className:"px-4 py-2 text-sm",children:E.name}),s.jsx("td",{className:"px-4 py-2 text-sm",children:E.area_name||"-"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:s.jsx("button",{onClick:()=>I(E.id),className:"px-3 py-1 text-red-700 bg-red-50 hover:bg-red-100 rounded",children:"Remove"})})]},E.id)),f.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:4,children:"No patients assigned."})})]})]})})]})]})},mZ=()=>{const{user:e}=Se(),t=(e==null?void 0:e.role)==="doctor",[n,r]=x.useState([]),[i,a]=x.useState(!0),[l,u]=x.useState({}),[d,m]=x.useState(""),[h,f]=x.useState(!1),[g,y]=x.useState(null),j=async()=>{a(!0);const[{data:P},{data:b}]=await Promise.all([cZ(),Bt()]);r(P||[]);const N={},_=b||[];(P||[]).forEach(k=>{var O;const C=(((O=k.user)==null?void 0:O.full_name)||k.name||"").toLowerCase(),A=_.filter(I=>typeof I.assigned_vhv_name=="string"&&I.assigned_vhv_name.toLowerCase().includes(C)).length;N[k.id]=A}),u(N),a(!1)};x.useEffect(()=>{j()},[]);const w=x.useMemo(()=>{const P=d.toLowerCase();return n.filter(b=>b.name.toLowerCase().includes(P)||(b.volunteer_code||"").toLowerCase().includes(P)||(b.email||"").toLowerCase().includes(P)||(b.phone||"").toLowerCase().includes(P)||(b.area_name||"").toLowerCase().includes(P))},[n,d]);return i?s.jsx("div",{className:"py-10 text-center",children:"Loading"}):h?s.jsx(hZ,{record:g,onClose:()=>{f(!1),y(null),j()}}):s.jsxs("div",{className:"py-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"relative w-full max-w-xl",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:d,onChange:P=>m(P.target.value),placeholder:"Search volunteers...",className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t&&s.jsxs("button",{onClick:()=>f(!0),className:"ml-3 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[s.jsx(Gt,{className:"w-4 h-4"}),"Create Volunteer"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-sky-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Volunteer ID"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Phone"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Area"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Assigned Patients"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[w.map(P=>{var b;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm",children:P.volunteer_code}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[P.photo_url?s.jsx("img",{src:P.photo_url,alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100"}),s.jsx("span",{children:P.name})]})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:P.email}),s.jsx("td",{className:"px-4 py-3 text-sm",children:P.phone||"-"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:P.area_name?s.jsxs("div",{className:"flex items-center gap-2",children:[((b=P.area)==null?void 0:b.color)&&s.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:P.area.color}}),s.jsx("span",{children:P.area_name})]}):s.jsx("span",{className:"text-gray-400 text-xs",children:"Not assigned"})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:l[P.id]??0}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("button",{onClick:()=>{y(P),f(!0)},className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(z2,{className:"w-4 h-4"}),"View Detail"]})})]},P.id)}),w.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No volunteers found"})})]})]})})})]})},pZ=()=>{const{user:e}=Se(),[t,n]=x.useState([]),[r,i]=x.useState(""),[a,l]=x.useState(!0),[u,d]=x.useState(!1),[m,h]=x.useState(null),[f,g]=x.useState(""),[y,j]=x.useState("");x.useEffect(()=>{(async()=>{const{data:B}=await Ct();n(B||[]),l(!1)})()},[e==null?void 0:e.id]),x.useEffect(()=>{try{const B=localStorage.getItem("doctor:search");B&&(i(B),localStorage.removeItem("doctor:search"))}catch{}},[]);const w=x.useMemo(()=>(t||[]).filter(B=>B.role==="doctor").filter(B=>{const D=r.toLowerCase(),M=(B.doctor_code||"").toLowerCase();return(B.full_name||"").toLowerCase().includes(D)||(B.email||"").toLowerCase().includes(D)||M.includes(D)}),[t,r]),[P,b]=x.useState(1),N=10,_=Math.max(1,Math.ceil(w.length/N)),k=x.useMemo(()=>{const B=(P-1)*N;return w.slice(B,B+N)},[w,P]),C=B=>{try{localStorage.setItem("message:recipient",B)}catch{}try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"messages"}))}catch{}window.setAppView&&window.setAppView("messages")},A=(e==null?void 0:e.role)==="doctor",O=()=>{h(null),g(""),j(""),d(!0)},I=B=>{h(B),g(B.full_name),j(B.email),d(!0)};return a?s.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Zu,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Doctors"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative w-64",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:r,onChange:B=>i(B.target.value),placeholder:"Search doctors...",className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),A&&s.jsxs("button",{onClick:O,className:"ml-3 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[s.jsx(Gt,{className:"w-4 h-4"}),"New Doctor"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-sky-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Doctor ID"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[k.map(B=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm",children:B.doctor_code||B.id}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Zu,{className:"w-4 h-4 text-blue-600"})}),s.jsx("span",{className:"text-gray-900",children:B.full_name})]})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:B.email}),s.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(B.created_at).toLocaleDateString()}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>C(B.id),className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(Dl,{className:"w-4 h-4"}),"Message"]}),B.email&&s.jsxs("a",{href:`mailto:${B.email}`,className:"text-gray-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(NM,{className:"w-4 h-4"}),"Email"]}),A&&s.jsxs("button",{onClick:()=>I(B),className:"text-gray-700 hover:underline inline-flex items-center gap-1",children:[s.jsx(SM,{className:"w-4 h-4"}),"Edit"]}),A&&s.jsx("button",{onClick:async()=>{if(!window.confirm("Delete this doctor account? This cannot be undone."))return;await UM(B.id);const{data:D}=await Ct();n(D||[])},className:"text-red-700 hover:underline inline-flex items-center gap-1",children:"Delete"})]})})]},B.id)),k.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:5,children:"No doctors found."})})]})]})}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Math.min(P*N,w.length)," of ",w.length," doctors"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>b(B=>Math.max(1,B-1)),disabled:P===1,children:"<"}),s.jsx("button",{className:`px-3 py-1 rounded ${P===1?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>b(1),children:"1"}),_>2&&s.jsxs(s.Fragment,{children:[P>2&&s.jsx("span",{className:"px-1",children:""}),P>1&&P<_&&s.jsx("button",{className:"px-3 py-1 rounded bg-gray-200",children:P}),P<_-1&&s.jsx("span",{className:"px-1",children:""})]}),_>1&&s.jsx("button",{className:`px-3 py-1 rounded ${P===_?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>b(_),children:_}),s.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>b(B=>Math.min(_,B+1)),disabled:P===_,children:">"})]})]})]}),s.jsx(El,{open:u,title:m?"Edit Doctor":"New Doctor",onClose:()=>d(!1),children:s.jsxs("div",{className:"space-y-4",children:[m&&s.jsxs("div",{className:"text-xs text-gray-600 flex flex-wrap gap-2",children:[m.doctor_code&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["Doctor ID: ",s.jsx("span",{className:"font-mono",children:m.doctor_code})]}),s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["User ID: ",s.jsx("span",{className:"font-mono",children:m.id})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),s.jsx("input",{value:f,onChange:B=>g(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:y,onChange:B=>j(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{id:"doctor-phone",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),s.jsx("input",{id:"doctor-dob",type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Picture URL"}),s.jsx("input",{id:"doctor-photo",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>d(!1),className:"px-3 py-2 border border-gray-300 rounded-lg",children:"Cancel"}),s.jsx("button",{onClick:async()=>{var R,E,U;const B=((R=document.getElementById("doctor-phone"))==null?void 0:R.value)||"",D=((E=document.getElementById("doctor-dob"))==null?void 0:E.value)||"",M=((U=document.getElementById("doctor-photo"))==null?void 0:U.value)||"";if(!y.trim()||!f.trim()){alert("Name and Email are required");return}if(m)await Cp(m.id,{full_name:f,email:y,phone:B,dob:D,photo_url:M});else{const K=(await FM(y,f)).data;K&&await Cp(K.id,{phone:B,dob:D,photo_url:M})}const{data:$}=await Ct();n($||[]),d(!1)},className:"px-3 py-2 bg-blue-600 text-white rounded-lg",children:"Save"})]})]})})]})},gZ=()=>{const{user:e}=Se(),[t,n]=x.useState((e==null?void 0:e.full_name)||""),[r,i]=x.useState((e==null?void 0:e.photo_url)||""),[a,l]=x.useState(!1),[u,d]=x.useState((e==null?void 0:e.email)||""),[m,h]=x.useState(""),[f,g]=x.useState(""),[y,j]=x.useState(""),[w,P]=x.useState(""),[b,N]=x.useState(""),[_,k]=x.useState("");x.useEffect(()=>{n((e==null?void 0:e.full_name)||""),i((e==null?void 0:e.photo_url)||""),d((e==null?void 0:e.email)||"")},[e]);const C=O=>{if(!O)return;const I=new FileReader;I.onload=()=>i(String(I.result)),I.readAsDataURL(O)},A=async()=>{e&&(l(!0),await Cp(e.id,{full_name:t,photo_url:r,email:u,phone:y,gender:m,dob:f,address:w}),l(!1),alert("Profile updated"))};return s.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"My Profile"}),s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-100",children:r?s.jsx("img",{src:r,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:""})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Role"}),s.jsx("div",{className:"font-medium text-gray-900 capitalize",children:e==null?void 0:e.role}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["User ID: ",s.jsx("span",{className:"font-mono",children:e==null?void 0:e.id})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded",value:t,onChange:O=>n(O.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:O=>{var I;return C((I=O.target.files)==null?void 0:I[0])}}),s.jsx("span",{className:"text-sm text-gray-500",children:"or"}),s.jsx("input",{className:"w-full md:flex-1 px-3 py-2 border rounded",placeholder:"Image URL",value:r,onChange:O=>i(O.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded",type:"email",value:u,onChange:O=>d(O.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded",value:y,onChange:O=>j(O.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),s.jsxs("select",{className:"w-full px-4 py-3 border rounded",value:m,onChange:O=>h(O.target.value),children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"male",children:"Male"}),s.jsx("option",{value:"female",children:"Female"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded",type:"date",value:f,onChange:O=>g(O.target.value)})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("input",{className:"w-full px-4 py-3 border rounded",value:w,onChange:O=>P(O.target.value)})]})]}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsx("button",{onClick:A,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded",children:a?"Saving":"Save Changes"})}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Password"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsx("input",{type:"password",className:"w-full px-4 py-3 border rounded",value:b,onChange:O=>N(O.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsx("input",{type:"password",className:"w-full px-4 py-3 border rounded",value:_,onChange:O=>k(O.target.value)})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx("button",{className:"px-4 py-2 border rounded",onClick:async()=>{if(!e)return;if(b.length<6)return alert("Password must be at least 6 characters");if(b!==_)return alert("Passwords do not match");const{error:O}=await Yd(e.id,b);if(O)return alert(O.message);N(""),k(""),alert("Password updated")},children:"Update Password"})})]})]})]})},vZ=()=>{const{user:e}=Se(),[t,n]=x.useState(!0),[r,i]=x.useState(!1),[a,l]=x.useState(""),[u,d]=x.useState(""),[m,h]=x.useState(""),[f,g]=x.useState([]),[y,j]=x.useState(null),[w,P]=x.useState(null),[b,N]=x.useState(null),[_,k]=x.useState(""),[C,A]=x.useState("");x.useEffect(()=>{(async()=>{try{const{data:B}=await ii((e==null?void 0:e.id)||""),[{data:D},{data:M}]=await Promise.all([Ct(),cn()]);if(B){const $=(D||[]).find(E=>E.role==="doctor"&&(E.full_name||"").toLowerCase().includes((B.assigned_doctor||"").toLowerCase()));$&&(P($.id),k($.full_name));const R=(M||[]).find(E=>(E.name||"").toLowerCase().includes((B.assigned_vhv_name||"").toLowerCase()));R&&(N(R.user_id),A(R.name)),j(B.id)}if(B){const{data:$}=await Vu(B.id);g($||[])}}finally{n(!1)}})()},[e==null?void 0:e.id]);const O=x.useMemo(()=>a.trim().length>0&&(w||b),[a,w,b]),I=async()=>{if(O){if(!y){alert("Cannot find your patient profile.");return}i(!0);try{const B="Medication Request",D=`Patient requests medication refill/order.

Medication: ${a}
Quantity: ${u||"N/A"}
Notes: ${m||"N/A"}`,M=[w,b].filter(Boolean);await s3({patient_id:y,requested_by:e.id,title:B,medication:a,dosage:"",quantity:u,notes:m,status:"pending"}),await Promise.all(M.map(R=>mr({sender_id:e.id,recipient_id:R,subject:B,content:D,is_read:!1}))),l(""),d(""),h(""),alert("Request sent to your care team.");const{data:$}=await Vu(y);g($||[])}catch{alert("Failed to send request")}finally{i(!1)}}};return t?s.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):s.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"border-b border-gray-200 p-6 flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(Ws,{className:"w-6 h-6 text-purple-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Medication Request"})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medication Name"}),s.jsx("input",{value:a,onChange:B=>l(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"e.g., Metformin 500mg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),s.jsx("input",{value:u,onChange:B=>d(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"e.g., 30 tablets"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:m,onChange:B=>h(B.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Any additional information..."})]}),s.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("div",{className:"text-sm text-blue-800 mb-2 font-medium",children:"This request will be sent to:"}),s.jsxs("ul",{className:"text-sm text-blue-900 list-disc pl-5 space-y-1",children:[w?s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Zu,{className:"w-4 h-4"})," Dr. ",_]}):s.jsx("li",{children:"No doctor found from your profile."}),b?s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Re,{className:"w-4 h-4"})," ",C," (VHV)"]}):s.jsx("li",{children:"No VHV found from your profile."})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{disabled:!O||r,onClick:I,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 inline-flex items-center gap-2",children:[s.jsx(Uu,{className:"w-4 h-4"})," Submit Request"]})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mt-6",children:[s.jsx("div",{className:"p-4 text-gray-900 font-semibold",children:"My Medication Requests"}),s.jsx("div",{className:"p-4",children:f.length===0?s.jsx("div",{className:"text-gray-600 text-sm",children:"No requests yet."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Date"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Medication"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Quantity"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:f.map(B=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-3 py-2",children:new Date(B.created_at).toLocaleString()}),s.jsx("td",{className:"px-3 py-2",children:B.medication||"-"}),s.jsx("td",{className:"px-3 py-2",children:B.quantity||"-"}),s.jsx("td",{className:"px-3 py-2 capitalize",children:B.status.replace("_"," ")})]},B.id))})]})})})]})]})},Am=["Little interest or pleasure in doing things","Feeling down, depressed, or hopeless","Trouble falling or staying asleep, or sleeping too much","Feeling tired or having little energy","Poor appetite or overeating","Feeling bad about yourself  or that you are a failure or have let yourself or your family down","Trouble concentrating on things, such as reading or watching television","Moving or speaking so slowly that other people could have noticed? Or the opposite  being so fidgety or restless that you have been moving around a lot more than usual","Thoughts that you would be better off dead, or thoughts of hurting yourself"];function yZ(e){return e>=20?"severe":e>=15?"moderately_severe":e>=10?"moderate":e>=5?"mild":"minimal"}const xZ=()=>{const{user:e}=Se(),[t,n]=x.useState(null),[r,i]=x.useState(Array(Am.length).fill(0)),[a,l]=x.useState(""),[u,d]=x.useState(!0),[m,h]=x.useState(!1),[f,g]=x.useState([]);x.useEffect(()=>{(async()=>{const{data:b}=await ii((e==null?void 0:e.id)||"");if(n(b),b){const N=await Ep(b.id);g(N.data||[])}d(!1)})()},[e==null?void 0:e.id]);const y=x.useMemo(()=>(r||[]).reduce((b,N)=>b+(Number.isFinite(N)?N:0),0),[r]),j=yZ(y),w=(b,N)=>{i(_=>_.map((k,C)=>C===b?N:k))},P=async()=>{if(t){h(!0);try{const b=new Date().toISOString();await JM({patient_id:t.id,recorded_by:e.id,date:b,answers:r,total_score:y,severity:j,notes:a});const[{data:N},{data:_}]=await Promise.all([Ct(),cn()]),k=(t.assigned_doctor||"").toLowerCase(),C=(N||[]).filter(E=>E.role==="doctor"&&(E.full_name||"").toLowerCase().includes(k)),A=(t.assigned_vhv_name||"").toLowerCase(),I=(_||[]).filter(E=>(E.name||"").toLowerCase().includes(A)).map(E=>E.user_id).filter(Boolean),B=j==="moderately_severe"||j==="severe"?C.map(E=>E.id).filter(Boolean):[],D=[...I,...B],M="New Mental Health Assessment Submitted",$=`Patient: ${t.name}
MRN: ${t.medical_record_number}
Severity: ${j.replace("_"," ")}
Score: ${y}
Submitted at: ${new Date().toLocaleString()}

Notes: ${a||"N/A"}`;await Promise.all(D.map(E=>mr({sender_id:e.id,recipient_id:E,subject:M,content:$,is_read:!1}))),alert("Assessment submitted. Your care team has been notified.");const R=await Ep(t.id);g(R.data||[]),l(""),i(Array(Am.length).fill(0))}catch{alert("Failed to submit assessment")}finally{h(!1)}}};return u?s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t?s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"border-b border-gray-200 p-6 flex items-center gap-3",children:[s.jsx("div",{className:"bg-pink-100 p-2 rounded-lg",children:s.jsx(mn,{className:"w-6 h-6 text-pink-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mental Health Assessment (PHQ-9)"})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm text-gray-700",children:"Answer each question for the last two weeks. 0 = Not at all, 1 = Several days, 2 = More than half the days, 3 = Nearly every day."}),s.jsx("div",{className:"space-y-5",children:Am.map((b,N)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-center",children:[s.jsxs("div",{className:"md:col-span-3 text-gray-900",children:[N+1,". ",b]}),s.jsx("div",{className:"md:col-span-2 flex items-center gap-2",children:[0,1,2,3].map(_=>s.jsxs("label",{className:`px-3 py-2 rounded-lg border cursor-pointer ${r[N]===_?"bg-blue-600 text-white border-blue-600":"border-gray-300 text-gray-800 hover:bg-gray-50"}`,children:[s.jsx("input",{type:"radio",name:`q${N}`,value:_,checked:r[N]===_,onChange:()=>w(N,_),className:"hidden"}),_]},_))})]},N))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[s.jsx("div",{className:"text-sm text-blue-800",children:"Total Score"}),s.jsx("div",{className:"text-xl font-semibold text-blue-900",children:y})]}),s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded",children:[s.jsx("div",{className:"text-sm text-purple-800",children:"Severity"}),s.jsx("div",{className:"text-xl font-semibold text-purple-900 capitalize",children:j.replace("_"," ")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optional)"}),s.jsx("textarea",{value:a,onChange:b=>l(b.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Anything you'd like to share..."})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{disabled:m,onClick:P,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-flex items-center gap-2",children:[s.jsx(Uu,{className:"w-4 h-4"})," Submit Assessment"]})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mt-6",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center gap-2 text-gray-900 font-semibold",children:[s.jsx(I2,{className:"w-5 h-5"})," Previous Assessments"]}),s.jsx("div",{className:"p-4",children:f.length===0?s.jsx("div",{className:"text-gray-600 text-sm",children:"No assessments yet."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Score"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Severity"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:f.map(b=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(b.date).toLocaleString()}),s.jsx("td",{className:"px-4 py-2 text-sm",children:b.total_score}),s.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:String(b.severity).replace("_"," ")})]},b.id))})]})})})]})]}):s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-700",children:"No patient profile found."})})},bZ=e=>e.replace("_"," "),_Z=()=>{const{user:e}=Se(),[t,n]=x.useState([]),[r,i]=x.useState(!0),[a,l]=x.useState(""),[u,d]=x.useState(""),m=async()=>{i(!0);const{data:f}=await Ep();n(f||[]),i(!1)};x.useEffect(()=>{m()},[]);const h=x.useMemo(()=>{const f=a.toLowerCase();return(t||[]).filter(g=>!u||String(g.severity)===u).filter(g=>{var P,b;const y=(((P=g.patient)==null?void 0:P.name)||"").toLowerCase(),j=(((b=g.patient)==null?void 0:b.medical_record_number)||"").toLowerCase(),w=(g.notes||"").toLowerCase();return y.includes(f)||j.includes(f)||w.includes(f)})},[t,a,u]);return r?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):(e==null?void 0:e.role)!=="doctor"?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-8 text-center text-gray-700",children:"Only doctors can view mental health assessments."})}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(I2,{className:"w-6 h-6 text-purple-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mental Health Assessments"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative w-64",children:[s.jsx(Kn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:a,onChange:f=>l(f.target.value),placeholder:"Search patients, MRN or notes...",className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:u,onChange:f=>d(f.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[s.jsx("option",{value:"",children:"All severities"}),s.jsx("option",{value:"minimal",children:"Minimal"}),s.jsx("option",{value:"mild",children:"Mild"}),s.jsx("option",{value:"moderate",children:"Moderate"}),s.jsx("option",{value:"moderately_severe",children:"Moderately severe"}),s.jsx("option",{value:"severe",children:"Severe"})]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-purple-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Patient"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"MRN"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Score"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Severity"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Notes"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[h.map(f=>{var g,y;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(f.date).toLocaleString()}),s.jsx("td",{className:"px-4 py-3 text-sm",children:((g=f.patient)==null?void 0:g.name)||"-"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:((y=f.patient)==null?void 0:y.medical_record_number)||"-"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:f.total_score}),s.jsx("td",{className:"px-4 py-3 text-sm capitalize",children:bZ(String(f.severity))}),s.jsx("td",{className:"px-4 py-3 text-sm truncate max-w-[320px]",children:f.notes||"-"})]},f.id)}),h.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:6,children:"No assessments found."})})]})]})})})]})};let fa=null,Lo={};const wZ=e=>{try{Lo=JSON.parse(localStorage.getItem("med:lastSent")||"{}")}catch{Lo={}}if(fa&&(clearInterval(fa),fa=null),!e)return;const t=async()=>{try{const{data:n}=await a3(e);if(!n||n.length===0)return;const{data:r}=await ii(e);for(const i of n){const a=`${i.medication.id}@${i.scheduledAt}`;if(Lo[a])continue;const l="Medication Reminder",u=`Time to take your medication.

Medication: ${i.medication.name}${i.medication.dosage?`
Dosage: ${i.medication.dosage}`:""}
Scheduled time: ${new Date(i.scheduledAt).toLocaleTimeString()}
Patient: ${(r==null?void 0:r.name)||""}`;await mr({sender_id:e,recipient_id:e,subject:l,content:u}),Lo[a]=new Date().toISOString()}localStorage.setItem("med:lastSent",JSON.stringify(Lo))}catch{}};fa=setInterval(t,60*1e3),t()},v1=()=>{fa&&clearInterval(fa),fa=null},jZ=()=>{const{user:e}=Se(),[t,n]=x.useState(null),[r,i]=x.useState([]),[a,l]=x.useState(!0),[u,d]=x.useState(!1),[m,h]=x.useState(null),[f,g]=x.useState({name:"",dosage:"",instructions:"",times:"09:00, 21:00",start_date:"",end_date:"",reminders_enabled:!0}),y=async()=>{l(!0);const{data:_}=await ii((e==null?void 0:e.id)||"");n(_);const{data:k}=await e3(_==null?void 0:_.id);i(k||[]),l(!1)};x.useEffect(()=>{y()},[e==null?void 0:e.id]);const j=()=>{h(null),g({name:"",dosage:"",instructions:"",times:"09:00, 21:00",start_date:"",end_date:"",reminders_enabled:!0}),d(!0)},w=_=>{h(_),g({name:_.name||"",dosage:_.dosage||"",instructions:_.instructions||"",times:(_.times||[]).join(", "),start_date:_.start_date||"",end_date:_.end_date||"",reminders_enabled:_.reminders_enabled!==!1}),d(!0)},P=_=>_.split(",").map(k=>k.trim()).filter(Boolean),b=async()=>{if(!(t!=null&&t.id)||!f.name.trim())return alert("Name is required");const _={patient_id:t.id,name:f.name,dosage:f.dosage,instructions:f.instructions,times:P(f.times),start_date:f.start_date||void 0,end_date:f.end_date||void 0,reminders_enabled:!!f.reminders_enabled};m?await t3(m.id,_):await V2(_),d(!1),h(null),y()},N=async(_,k)=>{const C=new Date,[A,O]=k.split(":").map(I=>parseInt(I,10)||0);C.setHours(A,O,0,0),await r3(_.id,_.patient_id,C.toISOString()),alert("Marked as taken")};return a?s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(Ws,{className:"w-6 h-6 text-purple-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Medications"})]}),s.jsxs("button",{onClick:j,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 inline-flex items-center gap-2",children:[s.jsx(Gt,{className:"w-4 h-4"})," Add"]})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:s.jsxs("div",{className:"divide-y divide-gray-100",children:[r.length===0&&s.jsx("div",{className:"p-6 text-gray-600",children:"No medications added."}),r.map(_=>s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900",children:[_.name," ",_.dosage&&s.jsxs("span",{className:"text-gray-600 font-normal",children:[" ",_.dosage]})]}),_.instructions&&s.jsx("div",{className:"text-sm text-gray-700",children:_.instructions}),s.jsxs("div",{className:"text-sm text-gray-700 flex items-center gap-2 mt-1",children:[s.jsx(vl,{className:"w-4 h-4"})," ",(_.times||[]).join(", ")]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Reminders: ",_.reminders_enabled!==!1?"On":"Off"," ",_.start_date&&`  from ${_.start_date}`," ",_.end_date&&`  until ${_.end_date}`]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>w(_),className:"px-3 py-2 border rounded",children:"Edit"}),s.jsx("button",{onClick:async()=>{confirm("Delete medication?")&&(await n3(_.id),y())},className:"px-3 py-2 border rounded text-red-700 border-red-300",children:"Delete"})]})]}),_.times&&_.times.length>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:_.times.map(k=>s.jsxs("button",{onClick:()=>N(_,k),className:"text-sm px-3 py-1 rounded border bg-purple-50 hover:bg-purple-100",children:["Mark ",k," taken"]},k))})]},_.id))]})}),u&&s.jsxs("div",{className:"mt-6 bg-white rounded-xl border border-gray-200 p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.name,onChange:_=>g({...f,name:_.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosage"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.dosage,onChange:_=>g({...f,dosage:_.target.value}),placeholder:"e.g., 500mg"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.instructions,onChange:_=>g({...f,instructions:_.target.value}),placeholder:"e.g., after meal"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Times (comma-separated HH:MM)"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.times,onChange:_=>g({...f,times:_.target.value}),placeholder:"09:00, 21:00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:f.start_date,onChange:_=>g({...f,start_date:_.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:f.end_date,onChange:_=>g({...f,end_date:_.target.value})})]}),s.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[s.jsx("input",{id:"rem-on",type:"checkbox",checked:f.reminders_enabled,onChange:_=>g({...f,reminders_enabled:_.target.checked})}),s.jsx("label",{htmlFor:"rem-on",className:"text-sm text-gray-700",children:"Enable reminders"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx("button",{onClick:()=>{d(!1),h(null)},className:"px-3 py-2 border rounded",children:"Cancel"}),s.jsxs("button",{onClick:b,className:"px-3 py-2 bg-purple-600 text-white rounded inline-flex items-center gap-2",children:[s.jsx(Aa,{className:"w-4 h-4"})," Save"]})]})]})]})},NZ=()=>{const{user:e}=Se(),[t,n]=x.useState(!0),[r,i]=x.useState([]),[a,l]=x.useState(""),[u,d]=x.useState(!1),[m,h]=x.useState(null),[f,g]=x.useState({name:"",dosage:"",instructions:"",times:"09:00, 21:00"}),y=async()=>{n(!0);const{data:_}=await Vu();i(_||[]),n(!1)};x.useEffect(()=>{y()},[]);const j=x.useMemo(()=>{const _=a.toLowerCase();return(r||[]).filter(k=>{var C;return(k.status==="pending"||k.status==="approved"||k.status==="declined")&&((((C=k.patient)==null?void 0:C.name)||"").toLowerCase().includes(_)||(k.medication||"").toLowerCase().includes(_)||(k.notes||"").toLowerCase().includes(_))})},[r,a]),w=_=>{h(_),g({name:_.medication||"",dosage:"",instructions:"",times:"09:00, 21:00"}),d(!0)},P=_=>_.split(",").map(k=>k.trim()).filter(Boolean),b=async()=>{var B,D,M;if(!m||!f.name.trim())return;await V2({patient_id:m.patient_id,name:f.name,dosage:f.dosage,instructions:f.instructions,times:P(f.times),reminders_enabled:!0,assigned_by:e.id}),await Mb(m.id,{status:"approved",resolved_by:e.id});const[{data:_},{data:k}]=await Promise.all([cn(),Ct()]),C=(((B=m.patient)==null?void 0:B.assigned_vhv_name)||"").toLowerCase(),A=(_||[]).find($=>($.name||"").toLowerCase().includes(C)),O="Prescription Created",I=`Prescription created for ${(D=m.patient)==null?void 0:D.name}.
Medication: ${f.name}
Dosage: ${f.dosage||"N/A"}
Times: ${P(f.times).join(", ")}
Instructions: ${f.instructions||""}`;await mr({sender_id:e.id,recipient_id:(M=m.patient)==null?void 0:M.user_id,subject:O,content:I}),A!=null&&A.user_id&&await mr({sender_id:e.id,recipient_id:A.user_id,subject:O,content:I}),d(!1),h(null),y()},N=async _=>{await Mb(_.id,{status:"declined",resolved_by:e.id}),y()};return t?s.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(Ws,{className:"w-6 h-6 text-purple-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Medication Requests"})]}),s.jsxs("div",{className:"relative w-64",children:[s.jsx(Kn,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:a,onChange:_=>l(_.target.value),placeholder:"Search...",className:"w-full pl-9 pr-3 py-2 border rounded"})]})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s.jsx("thead",{className:"bg-purple-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Patient"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Medication"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Quantity"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Notes"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[j.map(_=>{var k;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:new Date(_.created_at).toLocaleString()}),s.jsx("td",{className:"px-4 py-3",children:((k=_.patient)==null?void 0:k.name)||"-"}),s.jsx("td",{className:"px-4 py-3",children:_.medication||"-"}),s.jsx("td",{className:"px-4 py-3",children:_.quantity||"-"}),s.jsx("td",{className:"px-4 py-3 truncate max-w-[280px]",children:_.notes||"-"}),s.jsx("td",{className:"px-4 py-3 capitalize",children:_.status.replace("_"," ")}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"px-3 py-1 border rounded inline-flex items-center gap-1",onClick:()=>w(_),children:[s.jsx(yM,{className:"w-4 h-4"})," Prescribe"]}),s.jsxs("button",{className:"px-3 py-1 border rounded text-red-700 border-red-300 inline-flex items-center gap-1",onClick:()=>N(_),children:[s.jsx(Pp,{className:"w-4 h-4"})," Decline"]})]})})]},_.id)}),j.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:7,children:"No requests"})})]})]})})}),u&&s.jsxs("div",{className:"mt-6 bg-white border border-gray-200 rounded-xl p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medication"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.name,onChange:_=>g({...f,name:_.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosage"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.dosage,onChange:_=>g({...f,dosage:_.target.value})})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.instructions,onChange:_=>g({...f,instructions:_.target.value})})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Times (comma separated HH:MM)"}),s.jsx("input",{className:"w-full px-3 py-2 border rounded",value:f.times,onChange:_=>g({...f,times:_.target.value}),placeholder:"09:00, 21:00"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx("button",{onClick:()=>{d(!1),h(null)},className:"px-3 py-2 border rounded",children:"Cancel"}),s.jsxs("button",{onClick:b,className:"px-3 py-2 bg-purple-600 text-white rounded inline-flex items-center gap-2",children:[s.jsx(Gt,{className:"w-4 h-4"})," Prescribe"]})]})]})]})},SZ=()=>{const{user:e}=Se(),[t,n]=x.useState(!0),[r,i]=x.useState([]),[a,l]=x.useState(""),u=async()=>{n(!0);const[{data:m},{data:h}]=await Promise.all([Vu(),Bt()]),f=((e==null?void 0:e.full_name)||"").toLowerCase(),g=(h||[]).filter(w=>(w.assigned_vhv_name||"").toLowerCase().includes(f)),y=new Set(g.map(w=>w.id)),j=(m||[]).filter(w=>y.has(w.patient_id));i(j),n(!1)};x.useEffect(()=>{u()},[]);const d=x.useMemo(()=>{const m=a.toLowerCase();return(r||[]).filter(h=>{var f;return(((f=h.patient)==null?void 0:f.name)||"").toLowerCase().includes(m)||(h.medication||"").toLowerCase().includes(m)||(h.notes||"").toLowerCase().includes(m)})},[r,a]);return t?s.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto"})}):s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(Ws,{className:"w-6 h-6 text-purple-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Medication Requests"})]}),s.jsxs("div",{className:"relative w-64",children:[s.jsx(Kn,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:a,onChange:m=>l(m.target.value),placeholder:"Search...",className:"w-full pl-9 pr-3 py-2 border rounded"})]})]}),s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s.jsx("thead",{className:"bg-purple-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Patient"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Medication"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Quantity"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Status"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[d.map(m=>{var h;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:new Date(m.created_at).toLocaleString()}),s.jsx("td",{className:"px-4 py-3",children:((h=m.patient)==null?void 0:h.name)||"-"}),s.jsx("td",{className:"px-4 py-3",children:m.medication||"-"}),s.jsx("td",{className:"px-4 py-3",children:m.quantity||"-"}),s.jsx("td",{className:"px-4 py-3 capitalize",children:m.status.replace("_"," ")})]},m.id)}),d.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:5,children:"No requests"})})]})]})})})]})};function PZ(){const{user:e,loading:t}=Se(),[n,r]=x.useState("dashboard"),[i,a]=x.useState(!1);if(x.useEffect(()=>{sM(),window.setAppView=d=>r(d);const u=d=>{const m=d==null?void 0:d.detail;typeof m=="string"&&r(m)};return window.addEventListener("codex:setView",u),()=>window.removeEventListener("codex:setView",u)},[]),x.useEffect(()=>((e==null?void 0:e.role)==="patient"?wZ(e.id):v1(),()=>v1()),[e==null?void 0:e.id,e==null?void 0:e.role]),t)return s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})});if(!e)return s.jsx(u3,{});const l=()=>{switch(n){case"dashboard":return s.jsx(Dn,{});case"patients":return e.role==="doctor"||e.role==="volunteer"?s.jsx(YH,{}):s.jsx(Dn,{});case"profile":return e.role==="patient"?s.jsx(XH,{}):s.jsx(Dn,{});case"messages":return s.jsx(QH,{});case"tasks":return e.role==="volunteer"?s.jsx(nZ,{}):e.role==="doctor"?s.jsx(eZ,{}):s.jsx(p1,{personalOnly:!0,title:"My Tasks"});case"volunteer-tasks":return e.role==="doctor"?s.jsx(tZ,{}):s.jsx(p1,{});case"volunteers":return e.role==="doctor"?s.jsx(mZ,{}):s.jsx(Dn,{});case"doctors":return e.role==="volunteer"||e.role==="patient"||e.role==="doctor"?s.jsx(pZ,{}):s.jsx(Dn,{});case"map":return s.jsx(iZ,{onBack:()=>r("dashboard")});case"records":return s.jsx(sZ,{});case"appointments":return e.role==="patient"?s.jsx(oZ,{}):e.role==="volunteer"?s.jsx(lZ,{}):s.jsx(Dn,{});case"medication":return e.role==="patient"?s.jsx(vZ,{}):s.jsx(Dn,{});case"mental":return e.role==="patient"?s.jsx(xZ,{}):s.jsx(Dn,{});case"mental-assessments":return e.role==="doctor"?s.jsx(_Z,{}):s.jsx(Dn,{});case"medications":return e.role==="patient"?s.jsx(jZ,{}):s.jsx(Dn,{});case"med-requests":return e.role==="doctor"?s.jsx(NZ,{}):e.role==="volunteer"?s.jsx(SZ,{}):s.jsx(Dn,{});case"user-profile":return s.jsx(gZ,{});default:return s.jsx(Dn,{})}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(f3,{currentView:n,onViewChange:r,mobileOpen:i,setMobileOpen:a}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[s.jsx(d3,{currentView:n,onViewChange:r,onMenuClick:()=>a(!0)}),s.jsx("main",{className:"p-4 md:p-6 max-w-7xl w-full mx-auto",children:l()})]})]})}function kZ(){return s.jsx(hM,{children:s.jsx(PZ,{})})}O2(document.getElementById("root")).render(s.jsx(x.StrictMode,{children:s.jsx(kZ,{})}));
