var WA=Object.defineProperty;var HA=(e,t,r)=>t in e?WA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Sm=(e,t,r)=>HA(e,typeof t!="symbol"?t+"":t,r);function KA(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ZA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var _S={exports:{}},kf={},bS={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc=Symbol.for("react.element"),VA=Symbol.for("react.portal"),qA=Symbol.for("react.fragment"),GA=Symbol.for("react.strict_mode"),YA=Symbol.for("react.profiler"),XA=Symbol.for("react.provider"),JA=Symbol.for("react.context"),QA=Symbol.for("react.forward_ref"),eM=Symbol.for("react.suspense"),tM=Symbol.for("react.memo"),rM=Symbol.for("react.lazy"),ib=Symbol.iterator;function nM(e){return e===null||typeof e!="object"?null:(e=ib&&e[ib]||e["@@iterator"],typeof e=="function"?e:null)}var wS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jS=Object.assign,SS={};function xo(e,t,r){this.props=e,this.context=t,this.refs=SS,this.updater=r||wS}xo.prototype.isReactComponent={};xo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function PS(){}PS.prototype=xo.prototype;function Dv(e,t,r){this.props=e,this.context=t,this.refs=SS,this.updater=r||wS}var Iv=Dv.prototype=new PS;Iv.constructor=Dv;jS(Iv,xo.prototype);Iv.isPureReactComponent=!0;var ab=Array.isArray,kS=Object.prototype.hasOwnProperty,Rv={current:null},NS={key:!0,ref:!0,__self:!0,__source:!0};function CS(e,t,r){var n,i={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)kS.call(t,n)&&!NS.hasOwnProperty(n)&&(i[n]=t[n]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var d=Array(c),f=0;f<c;f++)d[f]=arguments[f+2];i.children=d}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)i[n]===void 0&&(i[n]=c[n]);return{$$typeof:pc,type:e,key:a,ref:o,props:i,_owner:Rv.current}}function iM(e,t){return{$$typeof:pc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $v(e){return typeof e=="object"&&e!==null&&e.$$typeof===pc}function aM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var sb=/\/+/g;function Pm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aM(""+e.key):t.toString(36)}function Zu(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case pc:case VA:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+Pm(o,0):n,ab(i)?(r="",e!=null&&(r=e.replace(sb,"$&/")+"/"),Zu(i,t,r,"",function(f){return f})):i!=null&&($v(i)&&(i=iM(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sb,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",ab(e))for(var c=0;c<e.length;c++){a=e[c];var d=n+Pm(a,c);o+=Zu(a,t,r,d,i)}else if(d=nM(e),typeof d=="function")for(e=d.call(e),c=0;!(a=e.next()).done;)a=a.value,d=n+Pm(a,c++),o+=Zu(a,t,r,d,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ou(e,t,r){if(e==null)return e;var n=[],i=0;return Zu(e,n,"","",function(a){return t.call(r,a,i++)}),n}function sM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Jt={current:null},Vu={transition:null},oM={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Vu,ReactCurrentOwner:Rv};function ES(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:ou,forEach:function(e,t,r){ou(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ou(e,function(){t++}),t},toArray:function(e){return ou(e,function(t){return t})||[]},only:function(e){if(!$v(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=xo;_e.Fragment=qA;_e.Profiler=YA;_e.PureComponent=Dv;_e.StrictMode=GA;_e.Suspense=eM;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oM;_e.act=ES;_e.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jS({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Rv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)kS.call(t,d)&&!NS.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){c=Array(d);for(var f=0;f<d;f++)c[f]=arguments[f+2];n.children=c}return{$$typeof:pc,type:e.type,key:i,ref:a,props:n,_owner:o}};_e.createContext=function(e){return e={$$typeof:JA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:XA,_context:e},e.Consumer=e};_e.createElement=CS;_e.createFactory=function(e){var t=CS.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:QA,render:e}};_e.isValidElement=$v;_e.lazy=function(e){return{$$typeof:rM,_payload:{_status:-1,_result:e},_init:sM}};_e.memo=function(e,t){return{$$typeof:tM,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=Vu.transition;Vu.transition={};try{e()}finally{Vu.transition=t}};_e.unstable_act=ES;_e.useCallback=function(e,t){return Jt.current.useCallback(e,t)};_e.useContext=function(e){return Jt.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return Jt.current.useDeferredValue(e)};_e.useEffect=function(e,t){return Jt.current.useEffect(e,t)};_e.useId=function(){return Jt.current.useId()};_e.useImperativeHandle=function(e,t,r){return Jt.current.useImperativeHandle(e,t,r)};_e.useInsertionEffect=function(e,t){return Jt.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return Jt.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return Jt.current.useMemo(e,t)};_e.useReducer=function(e,t,r){return Jt.current.useReducer(e,t,r)};_e.useRef=function(e){return Jt.current.useRef(e)};_e.useState=function(e){return Jt.current.useState(e)};_e.useSyncExternalStore=function(e,t,r){return Jt.current.useSyncExternalStore(e,t,r)};_e.useTransition=function(){return Jt.current.useTransition()};_e.version="18.3.1";bS.exports=_e;var _=bS.exports;const od=Dn(_),lM=KA({__proto__:null,default:od},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cM=_,uM=Symbol.for("react.element"),dM=Symbol.for("react.fragment"),fM=Object.prototype.hasOwnProperty,hM=cM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mM={key:!0,ref:!0,__self:!0,__source:!0};function OS(e,t,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)fM.call(t,n)&&!mM.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:uM,type:e,key:a,ref:o,props:i,_owner:hM.current}}kf.Fragment=dM;kf.jsx=OS;kf.jsxs=OS;_S.exports=kf;var l=_S.exports,TS={exports:{}},kr={},AS={exports:{}},MS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,Y){var V=F.length;F.push(Y);e:for(;0<V;){var ce=V-1>>>1,ee=F[ce];if(0<i(ee,Y))F[ce]=Y,F[V]=ee,V=ce;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var Y=F[0],V=F.pop();if(V!==Y){F[0]=V;e:for(var ce=0,ee=F.length,X=ee>>>1;ce<X;){var te=2*(ce+1)-1,ae=F[te],oe=te+1,Qe=F[oe];if(0>i(ae,V))oe<ee&&0>i(Qe,ae)?(F[ce]=Qe,F[oe]=V,ce=oe):(F[ce]=ae,F[te]=V,ce=te);else if(oe<ee&&0>i(Qe,V))F[ce]=Qe,F[oe]=V,ce=oe;else break e}}return Y}function i(F,Y){var V=F.sortIndex-Y.sortIndex;return V!==0?V:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],f=[],h=1,m=null,g=3,v=!1,j=!1,w=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(F){for(var Y=r(f);Y!==null;){if(Y.callback===null)n(f);else if(Y.startTime<=F)n(f),Y.sortIndex=Y.expirationTime,t(d,Y);else break;Y=r(f)}}function O(F){if(w=!1,S(F),!j)if(r(d)!==null)j=!0,z(N);else{var Y=r(f);Y!==null&&G(O,Y.startTime-F)}}function N(F,Y){j=!1,w&&(w=!1,b(A),A=-1),v=!0;var V=g;try{for(S(Y),m=r(d);m!==null&&(!(m.expirationTime>Y)||F&&!R());){var ce=m.callback;if(typeof ce=="function"){m.callback=null,g=m.priorityLevel;var ee=ce(m.expirationTime<=Y);Y=e.unstable_now(),typeof ee=="function"?m.callback=ee:m===r(d)&&n(d),S(Y)}else n(d);m=r(d)}if(m!==null)var X=!0;else{var te=r(f);te!==null&&G(O,te.startTime-Y),X=!1}return X}finally{m=null,g=V,v=!1}}var C=!1,E=null,A=-1,H=5,B=-1;function R(){return!(e.unstable_now()-B<H)}function U(){if(E!==null){var F=e.unstable_now();B=F;var Y=!0;try{Y=E(!0,F)}finally{Y?I():(C=!1,E=null)}}else C=!1}var I;if(typeof x=="function")I=function(){x(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,$=D.port2;D.port1.onmessage=U,I=function(){$.postMessage(null)}}else I=function(){P(U,0)};function z(F){E=F,C||(C=!0,I())}function G(F,Y){A=P(function(){F(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){j||v||(j=!0,z(N))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(F){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var V=g;g=Y;try{return F()}finally{g=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var V=g;g=F;try{return Y()}finally{g=V}},e.unstable_scheduleCallback=function(F,Y,V){var ce=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ce+V:ce):V=ce,F){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=V+ee,F={id:h++,callback:Y,priorityLevel:F,startTime:V,expirationTime:ee,sortIndex:-1},V>ce?(F.sortIndex=V,t(f,F),r(d)===null&&F===r(f)&&(w?(b(A),A=-1):w=!0,G(O,V-ce))):(F.sortIndex=ee,t(d,F),j||v||(j=!0,z(N))),F},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(F){var Y=g;return function(){var V=g;g=Y;try{return F.apply(this,arguments)}finally{g=V}}}})(MS);AS.exports=MS;var pM=AS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gM=_,wr=pM;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LS=new Set,Rl={};function Va(e,t){Gs(e,t),Gs(e+"Capture",t)}function Gs(e,t){for(Rl[e]=t,e=0;e<t.length;e++)LS.add(t[e])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ip=Object.prototype.hasOwnProperty,vM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ob={},lb={};function yM(e){return Ip.call(lb,e)?!0:Ip.call(ob,e)?!1:vM.test(e)?lb[e]=!0:(ob[e]=!0,!1)}function xM(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _M(e,t,r,n){if(t===null||typeof t>"u"||xM(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qt(e,t,r,n,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Dt[e]=new Qt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Dt[t]=new Qt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Dt[e]=new Qt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Dt[e]=new Qt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Dt[e]=new Qt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Dt[e]=new Qt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Dt[e]=new Qt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Dt[e]=new Qt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Dt[e]=new Qt(e,5,!1,e.toLowerCase(),null,!1,!1)});var zv=/[\-:]([a-z])/g;function Bv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zv,Bv);Dt[t]=new Qt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zv,Bv);Dt[t]=new Qt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zv,Bv);Dt[t]=new Qt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Dt[e]=new Qt(e,1,!1,e.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Dt[e]=new Qt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fv(e,t,r,n){var i=Dt.hasOwnProperty(t)?Dt[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_M(t,r,i,n)&&(r=null),n||i===null?yM(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var oi=gM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lu=Symbol.for("react.element"),js=Symbol.for("react.portal"),Ss=Symbol.for("react.fragment"),Uv=Symbol.for("react.strict_mode"),Rp=Symbol.for("react.profiler"),DS=Symbol.for("react.provider"),IS=Symbol.for("react.context"),Wv=Symbol.for("react.forward_ref"),$p=Symbol.for("react.suspense"),zp=Symbol.for("react.suspense_list"),Hv=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),RS=Symbol.for("react.offscreen"),cb=Symbol.iterator;function Go(e){return e===null||typeof e!="object"?null:(e=cb&&e[cb]||e["@@iterator"],typeof e=="function"?e:null)}var Ge=Object.assign,km;function fl(e){if(km===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);km=t&&t[1]||""}return`
`+km+e}var Nm=!1;function Cm(e,t){if(!e||Nm)return"";Nm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var n=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){n=f}e.call(t.prototype)}else{try{throw Error()}catch(f){n=f}e()}}catch(f){if(f&&n&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var d=`
`+i[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{Nm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?fl(e):""}function bM(e){switch(e.tag){case 5:return fl(e.type);case 16:return fl("Lazy");case 13:return fl("Suspense");case 19:return fl("SuspenseList");case 0:case 2:case 15:return e=Cm(e.type,!1),e;case 11:return e=Cm(e.type.render,!1),e;case 1:return e=Cm(e.type,!0),e;default:return""}}function Bp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ss:return"Fragment";case js:return"Portal";case Rp:return"Profiler";case Uv:return"StrictMode";case $p:return"Suspense";case zp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case IS:return(e.displayName||"Context")+".Consumer";case DS:return(e._context.displayName||"Context")+".Provider";case Wv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Hv:return t=e.displayName||null,t!==null?t:Bp(e.type)||"Memo";case xi:t=e._payload,e=e._init;try{return Bp(e(t))}catch{}}return null}function wM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bp(t);case 8:return t===Uv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $S(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jM(e){var t=$S(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cu(e){e._valueTracker||(e._valueTracker=jM(e))}function zS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=$S(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ld(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fp(e,t){var r=t.checked;return Ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ub(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Wi(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function BS(e,t){t=t.checked,t!=null&&Fv(e,"checked",t,!1)}function Up(e,t){BS(e,t);var r=Wi(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wp(e,t.type,r):t.hasOwnProperty("defaultValue")&&Wp(e,t.type,Wi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function db(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Wp(e,t,r){(t!=="number"||ld(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var hl=Array.isArray;function Bs(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Wi(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Hp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Q(92));if(hl(r)){if(1<r.length)throw Error(Q(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Wi(r)}}function FS(e,t){var r=Wi(t.value),n=Wi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function hb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function US(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?US(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uu,WS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uu=uu||document.createElement("div"),uu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $l(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SM=["Webkit","ms","Moz","O"];Object.keys(wl).forEach(function(e){SM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wl[t]=wl[e]})});function HS(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||wl.hasOwnProperty(e)&&wl[e]?(""+t).trim():t+"px"}function KS(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=HS(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var PM=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zp(e,t){if(t){if(PM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Vp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qp=null;function Kv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gp=null,Fs=null,Us=null;function mb(e){if(e=yc(e)){if(typeof Gp!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=Tf(t),Gp(e.stateNode,e.type,t))}}function ZS(e){Fs?Us?Us.push(e):Us=[e]:Fs=e}function VS(){if(Fs){var e=Fs,t=Us;if(Us=Fs=null,mb(e),t)for(e=0;e<t.length;e++)mb(t[e])}}function qS(e,t){return e(t)}function GS(){}var Em=!1;function YS(e,t,r){if(Em)return e(t,r);Em=!0;try{return qS(e,t,r)}finally{Em=!1,(Fs!==null||Us!==null)&&(GS(),VS())}}function zl(e,t){var r=e.stateNode;if(r===null)return null;var n=Tf(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Q(231,t,typeof r));return r}var Yp=!1;if(Qn)try{var Yo={};Object.defineProperty(Yo,"passive",{get:function(){Yp=!0}}),window.addEventListener("test",Yo,Yo),window.removeEventListener("test",Yo,Yo)}catch{Yp=!1}function kM(e,t,r,n,i,a,o,c,d){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(h){this.onError(h)}}var jl=!1,cd=null,ud=!1,Xp=null,NM={onError:function(e){jl=!0,cd=e}};function CM(e,t,r,n,i,a,o,c,d){jl=!1,cd=null,kM.apply(NM,arguments)}function EM(e,t,r,n,i,a,o,c,d){if(CM.apply(this,arguments),jl){if(jl){var f=cd;jl=!1,cd=null}else throw Error(Q(198));ud||(ud=!0,Xp=f)}}function qa(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function XS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pb(e){if(qa(e)!==e)throw Error(Q(188))}function OM(e){var t=e.alternate;if(!t){if(t=qa(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return pb(i),e;if(a===n)return pb(i),t;a=a.sibling}throw Error(Q(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,c=i.child;c;){if(c===r){o=!0,r=i,n=a;break}if(c===n){o=!0,n=i,r=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===r){o=!0,r=a,n=i;break}if(c===n){o=!0,n=a,r=i;break}c=c.sibling}if(!o)throw Error(Q(189))}}if(r.alternate!==n)throw Error(Q(190))}if(r.tag!==3)throw Error(Q(188));return r.stateNode.current===r?e:t}function JS(e){return e=OM(e),e!==null?QS(e):null}function QS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=QS(e);if(t!==null)return t;e=e.sibling}return null}var eP=wr.unstable_scheduleCallback,gb=wr.unstable_cancelCallback,TM=wr.unstable_shouldYield,AM=wr.unstable_requestPaint,rt=wr.unstable_now,MM=wr.unstable_getCurrentPriorityLevel,Zv=wr.unstable_ImmediatePriority,tP=wr.unstable_UserBlockingPriority,dd=wr.unstable_NormalPriority,LM=wr.unstable_LowPriority,rP=wr.unstable_IdlePriority,Nf=null,Nn=null;function DM(e){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Nf,e,void 0,(e.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:$M,IM=Math.log,RM=Math.LN2;function $M(e){return e>>>=0,e===0?32:31-(IM(e)/RM|0)|0}var du=64,fu=4194304;function ml(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var c=o&~i;c!==0?n=ml(c):(a&=o,a!==0&&(n=ml(a)))}else o=r&~i,o!==0?n=ml(o):a!==0&&(n=ml(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-fn(t),i=1<<r,n|=e[r],t&=~i;return n}function zM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-fn(a),c=1<<o,d=i[o];d===-1?(!(c&r)||c&n)&&(i[o]=zM(c,t)):d<=t&&(e.expiredLanes|=c),a&=~c}}function Jp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nP(){var e=du;return du<<=1,!(du&4194240)&&(du=64),e}function Om(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-fn(t),e[t]=r}function FM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-fn(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function Vv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-fn(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Ee=0;function iP(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var aP,qv,sP,oP,lP,Qp=!1,hu=[],Ai=null,Mi=null,Li=null,Bl=new Map,Fl=new Map,Pi=[],UM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vb(e,t){switch(e){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":Bl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(t.pointerId)}}function Xo(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=yc(t),t!==null&&qv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function WM(e,t,r,n,i){switch(t){case"focusin":return Ai=Xo(Ai,e,t,r,n,i),!0;case"dragenter":return Mi=Xo(Mi,e,t,r,n,i),!0;case"mouseover":return Li=Xo(Li,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Bl.set(a,Xo(Bl.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Fl.set(a,Xo(Fl.get(a)||null,e,t,r,n,i)),!0}return!1}function cP(e){var t=xa(e.target);if(t!==null){var r=qa(t);if(r!==null){if(t=r.tag,t===13){if(t=XS(r),t!==null){e.blockedOn=t,lP(e.priority,function(){sP(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=eg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);qp=n,r.target.dispatchEvent(n),qp=null}else return t=yc(r),t!==null&&qv(t),e.blockedOn=r,!1;t.shift()}return!0}function yb(e,t,r){qu(e)&&r.delete(t)}function HM(){Qp=!1,Ai!==null&&qu(Ai)&&(Ai=null),Mi!==null&&qu(Mi)&&(Mi=null),Li!==null&&qu(Li)&&(Li=null),Bl.forEach(yb),Fl.forEach(yb)}function Jo(e,t){e.blockedOn===t&&(e.blockedOn=null,Qp||(Qp=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,HM)))}function Ul(e){function t(i){return Jo(i,e)}if(0<hu.length){Jo(hu[0],e);for(var r=1;r<hu.length;r++){var n=hu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ai!==null&&Jo(Ai,e),Mi!==null&&Jo(Mi,e),Li!==null&&Jo(Li,e),Bl.forEach(t),Fl.forEach(t),r=0;r<Pi.length;r++)n=Pi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Pi.length&&(r=Pi[0],r.blockedOn===null);)cP(r),r.blockedOn===null&&Pi.shift()}var Ws=oi.ReactCurrentBatchConfig,hd=!0;function KM(e,t,r,n){var i=Ee,a=Ws.transition;Ws.transition=null;try{Ee=1,Gv(e,t,r,n)}finally{Ee=i,Ws.transition=a}}function ZM(e,t,r,n){var i=Ee,a=Ws.transition;Ws.transition=null;try{Ee=4,Gv(e,t,r,n)}finally{Ee=i,Ws.transition=a}}function Gv(e,t,r,n){if(hd){var i=eg(e,t,r,n);if(i===null)Bm(e,t,n,md,r),vb(e,n);else if(WM(i,e,t,r,n))n.stopPropagation();else if(vb(e,n),t&4&&-1<UM.indexOf(e)){for(;i!==null;){var a=yc(i);if(a!==null&&aP(a),a=eg(e,t,r,n),a===null&&Bm(e,t,n,md,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Bm(e,t,n,null,r)}}var md=null;function eg(e,t,r,n){if(md=null,e=Kv(n),e=xa(e),e!==null)if(t=qa(e),t===null)e=null;else if(r=t.tag,r===13){if(e=XS(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return md=e,null}function uP(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MM()){case Zv:return 1;case tP:return 4;case dd:case LM:return 16;case rP:return 536870912;default:return 16}default:return 16}}var Ei=null,Yv=null,Gu=null;function dP(){if(Gu)return Gu;var e,t=Yv,r=t.length,n,i="value"in Ei?Ei.value:Ei.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[a-n];n++);return Gu=i.slice(e,1<n?1-n:void 0)}function Yu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mu(){return!0}function xb(){return!1}function Nr(e){function t(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?mu:xb,this.isPropagationStopped=xb,this}return Ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=mu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=mu)},persist:function(){},isPersistent:mu}),t}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xv=Nr(_o),vc=Ge({},_o,{view:0,detail:0}),VM=Nr(vc),Tm,Am,Qo,Cf=Ge({},vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qo&&(Qo&&e.type==="mousemove"?(Tm=e.screenX-Qo.screenX,Am=e.screenY-Qo.screenY):Am=Tm=0,Qo=e),Tm)},movementY:function(e){return"movementY"in e?e.movementY:Am}}),_b=Nr(Cf),qM=Ge({},Cf,{dataTransfer:0}),GM=Nr(qM),YM=Ge({},vc,{relatedTarget:0}),Mm=Nr(YM),XM=Ge({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),JM=Nr(XM),QM=Ge({},_o,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eL=Nr(QM),tL=Ge({},_o,{data:0}),bb=Nr(tL),rL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iL[e])?!!t[e]:!1}function Jv(){return aL}var sL=Ge({},vc,{key:function(e){if(e.key){var t=rL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jv,charCode:function(e){return e.type==="keypress"?Yu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oL=Nr(sL),lL=Ge({},Cf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wb=Nr(lL),cL=Ge({},vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jv}),uL=Nr(cL),dL=Ge({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),fL=Nr(dL),hL=Ge({},Cf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mL=Nr(hL),pL=[9,13,27,32],Qv=Qn&&"CompositionEvent"in window,Sl=null;Qn&&"documentMode"in document&&(Sl=document.documentMode);var gL=Qn&&"TextEvent"in window&&!Sl,fP=Qn&&(!Qv||Sl&&8<Sl&&11>=Sl),jb=" ",Sb=!1;function hP(e,t){switch(e){case"keyup":return pL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ps=!1;function vL(e,t){switch(e){case"compositionend":return mP(t);case"keypress":return t.which!==32?null:(Sb=!0,jb);case"textInput":return e=t.data,e===jb&&Sb?null:e;default:return null}}function yL(e,t){if(Ps)return e==="compositionend"||!Qv&&hP(e,t)?(e=dP(),Gu=Yv=Ei=null,Ps=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fP&&t.locale!=="ko"?null:t.data;default:return null}}var xL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xL[e.type]:t==="textarea"}function pP(e,t,r,n){ZS(n),t=pd(t,"onChange"),0<t.length&&(r=new Xv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Pl=null,Wl=null;function _L(e){kP(e,0)}function Ef(e){var t=Cs(e);if(zS(t))return e}function bL(e,t){if(e==="change")return t}var gP=!1;if(Qn){var Lm;if(Qn){var Dm="oninput"in document;if(!Dm){var kb=document.createElement("div");kb.setAttribute("oninput","return;"),Dm=typeof kb.oninput=="function"}Lm=Dm}else Lm=!1;gP=Lm&&(!document.documentMode||9<document.documentMode)}function Nb(){Pl&&(Pl.detachEvent("onpropertychange",vP),Wl=Pl=null)}function vP(e){if(e.propertyName==="value"&&Ef(Wl)){var t=[];pP(t,Wl,e,Kv(e)),YS(_L,t)}}function wL(e,t,r){e==="focusin"?(Nb(),Pl=t,Wl=r,Pl.attachEvent("onpropertychange",vP)):e==="focusout"&&Nb()}function jL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ef(Wl)}function SL(e,t){if(e==="click")return Ef(t)}function PL(e,t){if(e==="input"||e==="change")return Ef(t)}function kL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mn=typeof Object.is=="function"?Object.is:kL;function Hl(e,t){if(mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ip.call(t,i)||!mn(e[i],t[i]))return!1}return!0}function Cb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Eb(e,t){var r=Cb(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cb(r)}}function yP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xP(){for(var e=window,t=ld();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ld(e.document)}return t}function ey(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function NL(e){var t=xP(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&yP(r.ownerDocument.documentElement,r)){if(n!==null&&ey(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=Eb(r,a);var o=Eb(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CL=Qn&&"documentMode"in document&&11>=document.documentMode,ks=null,tg=null,kl=null,rg=!1;function Ob(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rg||ks==null||ks!==ld(n)||(n=ks,"selectionStart"in n&&ey(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),kl&&Hl(kl,n)||(kl=n,n=pd(tg,"onSelect"),0<n.length&&(t=new Xv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ks)))}function pu(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ns={animationend:pu("Animation","AnimationEnd"),animationiteration:pu("Animation","AnimationIteration"),animationstart:pu("Animation","AnimationStart"),transitionend:pu("Transition","TransitionEnd")},Im={},_P={};Qn&&(_P=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Of(e){if(Im[e])return Im[e];if(!Ns[e])return e;var t=Ns[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _P)return Im[e]=t[r];return e}var bP=Of("animationend"),wP=Of("animationiteration"),jP=Of("animationstart"),SP=Of("transitionend"),PP=new Map,Tb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vi(e,t){PP.set(e,t),Va(t,[e])}for(var Rm=0;Rm<Tb.length;Rm++){var $m=Tb[Rm],EL=$m.toLowerCase(),OL=$m[0].toUpperCase()+$m.slice(1);Vi(EL,"on"+OL)}Vi(bP,"onAnimationEnd");Vi(wP,"onAnimationIteration");Vi(jP,"onAnimationStart");Vi("dblclick","onDoubleClick");Vi("focusin","onFocus");Vi("focusout","onBlur");Vi(SP,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Va("onBeforeInput",["compositionend","keypress","textInput","paste"]);Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TL=new Set("cancel close invalid load scroll toggle".split(" ").concat(pl));function Ab(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,EM(n,t,void 0,e),e.currentTarget=null}function kP(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var c=n[o],d=c.instance,f=c.currentTarget;if(c=c.listener,d!==a&&i.isPropagationStopped())break e;Ab(i,c,f),a=d}else for(o=0;o<n.length;o++){if(c=n[o],d=c.instance,f=c.currentTarget,c=c.listener,d!==a&&i.isPropagationStopped())break e;Ab(i,c,f),a=d}}}if(ud)throw e=Xp,ud=!1,Xp=null,e}function $e(e,t){var r=t[og];r===void 0&&(r=t[og]=new Set);var n=e+"__bubble";r.has(n)||(NP(t,e,2,!1),r.add(n))}function zm(e,t,r){var n=0;t&&(n|=4),NP(r,e,n,t)}var gu="_reactListening"+Math.random().toString(36).slice(2);function Kl(e){if(!e[gu]){e[gu]=!0,LS.forEach(function(r){r!=="selectionchange"&&(TL.has(r)||zm(r,!1,e),zm(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gu]||(t[gu]=!0,zm("selectionchange",!1,t))}}function NP(e,t,r,n){switch(uP(t)){case 1:var i=KM;break;case 4:i=ZM;break;default:i=Gv}r=i.bind(null,t,r,e),i=void 0,!Yp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Bm(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var c=n.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;c!==null;){if(o=xa(c),o===null)return;if(d=o.tag,d===5||d===6){n=a=o;continue e}c=c.parentNode}}n=n.return}YS(function(){var f=a,h=Kv(r),m=[];e:{var g=PP.get(e);if(g!==void 0){var v=Xv,j=e;switch(e){case"keypress":if(Yu(r)===0)break e;case"keydown":case"keyup":v=oL;break;case"focusin":j="focus",v=Mm;break;case"focusout":j="blur",v=Mm;break;case"beforeblur":case"afterblur":v=Mm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=_b;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=GM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=uL;break;case bP:case wP:case jP:v=JM;break;case SP:v=fL;break;case"scroll":v=VM;break;case"wheel":v=mL;break;case"copy":case"cut":case"paste":v=eL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=wb}var w=(t&4)!==0,P=!w&&e==="scroll",b=w?g!==null?g+"Capture":null:g;w=[];for(var x=f,S;x!==null;){S=x;var O=S.stateNode;if(S.tag===5&&O!==null&&(S=O,b!==null&&(O=zl(x,b),O!=null&&w.push(Zl(x,O,S)))),P)break;x=x.return}0<w.length&&(g=new v(g,j,null,r,h),m.push({event:g,listeners:w}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&r!==qp&&(j=r.relatedTarget||r.fromElement)&&(xa(j)||j[ei]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(j=r.relatedTarget||r.toElement,v=f,j=j?xa(j):null,j!==null&&(P=qa(j),j!==P||j.tag!==5&&j.tag!==6)&&(j=null)):(v=null,j=f),v!==j)){if(w=_b,O="onMouseLeave",b="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(w=wb,O="onPointerLeave",b="onPointerEnter",x="pointer"),P=v==null?g:Cs(v),S=j==null?g:Cs(j),g=new w(O,x+"leave",v,r,h),g.target=P,g.relatedTarget=S,O=null,xa(h)===f&&(w=new w(b,x+"enter",j,r,h),w.target=S,w.relatedTarget=P,O=w),P=O,v&&j)t:{for(w=v,b=j,x=0,S=w;S;S=ds(S))x++;for(S=0,O=b;O;O=ds(O))S++;for(;0<x-S;)w=ds(w),x--;for(;0<S-x;)b=ds(b),S--;for(;x--;){if(w===b||b!==null&&w===b.alternate)break t;w=ds(w),b=ds(b)}w=null}else w=null;v!==null&&Mb(m,g,v,w,!1),j!==null&&P!==null&&Mb(m,P,j,w,!0)}}e:{if(g=f?Cs(f):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var N=bL;else if(Pb(g))if(gP)N=PL;else{N=jL;var C=wL}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=SL);if(N&&(N=N(e,f))){pP(m,N,r,h);break e}C&&C(e,g,f),e==="focusout"&&(C=g._wrapperState)&&C.controlled&&g.type==="number"&&Wp(g,"number",g.value)}switch(C=f?Cs(f):window,e){case"focusin":(Pb(C)||C.contentEditable==="true")&&(ks=C,tg=f,kl=null);break;case"focusout":kl=tg=ks=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":rg=!1,Ob(m,r,h);break;case"selectionchange":if(CL)break;case"keydown":case"keyup":Ob(m,r,h)}var E;if(Qv)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ps?hP(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(fP&&r.locale!=="ko"&&(Ps||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ps&&(E=dP()):(Ei=h,Yv="value"in Ei?Ei.value:Ei.textContent,Ps=!0)),C=pd(f,A),0<C.length&&(A=new bb(A,e,null,r,h),m.push({event:A,listeners:C}),E?A.data=E:(E=mP(r),E!==null&&(A.data=E)))),(E=gL?vL(e,r):yL(e,r))&&(f=pd(f,"onBeforeInput"),0<f.length&&(h=new bb("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:f}),h.data=E))}kP(m,t)})}function Zl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function pd(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=zl(e,r),a!=null&&n.unshift(Zl(e,a,i)),a=zl(e,t),a!=null&&n.push(Zl(e,a,i))),e=e.return}return n}function ds(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Mb(e,t,r,n,i){for(var a=t._reactName,o=[];r!==null&&r!==n;){var c=r,d=c.alternate,f=c.stateNode;if(d!==null&&d===n)break;c.tag===5&&f!==null&&(c=f,i?(d=zl(r,a),d!=null&&o.unshift(Zl(r,d,c))):i||(d=zl(r,a),d!=null&&o.push(Zl(r,d,c)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var AL=/\r\n?/g,ML=/\u0000|\uFFFD/g;function Lb(e){return(typeof e=="string"?e:""+e).replace(AL,`
`).replace(ML,"")}function vu(e,t,r){if(t=Lb(t),Lb(e)!==t&&r)throw Error(Q(425))}function gd(){}var ng=null,ig=null;function ag(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sg=typeof setTimeout=="function"?setTimeout:void 0,LL=typeof clearTimeout=="function"?clearTimeout:void 0,Db=typeof Promise=="function"?Promise:void 0,DL=typeof queueMicrotask=="function"?queueMicrotask:typeof Db<"u"?function(e){return Db.resolve(null).then(e).catch(IL)}:sg;function IL(e){setTimeout(function(){throw e})}function Fm(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Ul(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ul(t)}function Di(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ib(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var bo=Math.random().toString(36).slice(2),Sn="__reactFiber$"+bo,Vl="__reactProps$"+bo,ei="__reactContainer$"+bo,og="__reactEvents$"+bo,RL="__reactListeners$"+bo,$L="__reactHandles$"+bo;function xa(e){var t=e[Sn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ei]||r[Sn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ib(e);e!==null;){if(r=e[Sn])return r;e=Ib(e)}return t}e=r,r=e.parentNode}return null}function yc(e){return e=e[Sn]||e[ei],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function Tf(e){return e[Vl]||null}var lg=[],Es=-1;function qi(e){return{current:e}}function Be(e){0>Es||(e.current=lg[Es],lg[Es]=null,Es--)}function Re(e,t){Es++,lg[Es]=e.current,e.current=t}var Hi={},Ht=qi(Hi),lr=qi(!1),La=Hi;function Ys(e,t){var r=e.type.contextTypes;if(!r)return Hi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function cr(e){return e=e.childContextTypes,e!=null}function vd(){Be(lr),Be(Ht)}function Rb(e,t,r){if(Ht.current!==Hi)throw Error(Q(168));Re(Ht,t),Re(lr,r)}function CP(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Q(108,wM(e)||"Unknown",i));return Ge({},r,n)}function yd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hi,La=Ht.current,Re(Ht,e),Re(lr,lr.current),!0}function $b(e,t,r){var n=e.stateNode;if(!n)throw Error(Q(169));r?(e=CP(e,t,La),n.__reactInternalMemoizedMergedChildContext=e,Be(lr),Be(Ht),Re(Ht,e)):Be(lr),Re(lr,r)}var Wn=null,Af=!1,Um=!1;function EP(e){Wn===null?Wn=[e]:Wn.push(e)}function zL(e){Af=!0,EP(e)}function Gi(){if(!Um&&Wn!==null){Um=!0;var e=0,t=Ee;try{var r=Wn;for(Ee=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Wn=null,Af=!1}catch(i){throw Wn!==null&&(Wn=Wn.slice(e+1)),eP(Zv,Gi),i}finally{Ee=t,Um=!1}}return null}var Os=[],Ts=0,xd=null,_d=0,Rr=[],$r=0,Da=null,Zn=1,Vn="";function fa(e,t){Os[Ts++]=_d,Os[Ts++]=xd,xd=e,_d=t}function OP(e,t,r){Rr[$r++]=Zn,Rr[$r++]=Vn,Rr[$r++]=Da,Da=e;var n=Zn;e=Vn;var i=32-fn(n)-1;n&=~(1<<i),r+=1;var a=32-fn(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Zn=1<<32-fn(t)+i|r<<i|n,Vn=a+e}else Zn=1<<a|r<<i|n,Vn=e}function ty(e){e.return!==null&&(fa(e,1),OP(e,1,0))}function ry(e){for(;e===xd;)xd=Os[--Ts],Os[Ts]=null,_d=Os[--Ts],Os[Ts]=null;for(;e===Da;)Da=Rr[--$r],Rr[$r]=null,Vn=Rr[--$r],Rr[$r]=null,Zn=Rr[--$r],Rr[$r]=null}var xr=null,yr=null,Ue=!1,on=null;function TP(e,t){var r=Ur(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function zb(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xr=e,yr=Di(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xr=e,yr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Da!==null?{id:Zn,overflow:Vn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ur(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,xr=e,yr=null,!0):!1;default:return!1}}function cg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ug(e){if(Ue){var t=yr;if(t){var r=t;if(!zb(e,t)){if(cg(e))throw Error(Q(418));t=Di(r.nextSibling);var n=xr;t&&zb(e,t)?TP(n,r):(e.flags=e.flags&-4097|2,Ue=!1,xr=e)}}else{if(cg(e))throw Error(Q(418));e.flags=e.flags&-4097|2,Ue=!1,xr=e}}}function Bb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xr=e}function yu(e){if(e!==xr)return!1;if(!Ue)return Bb(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ag(e.type,e.memoizedProps)),t&&(t=yr)){if(cg(e))throw AP(),Error(Q(418));for(;t;)TP(e,t),t=Di(t.nextSibling)}if(Bb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){yr=Di(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}yr=null}}else yr=xr?Di(e.stateNode.nextSibling):null;return!0}function AP(){for(var e=yr;e;)e=Di(e.nextSibling)}function Xs(){yr=xr=null,Ue=!1}function ny(e){on===null?on=[e]:on.push(e)}var BL=oi.ReactCurrentBatchConfig;function el(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Q(309));var n=r.stateNode}if(!n)throw Error(Q(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Q(284));if(!r._owner)throw Error(Q(290,e))}return e}function xu(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fb(e){var t=e._init;return t(e._payload)}function MP(e){function t(b,x){if(e){var S=b.deletions;S===null?(b.deletions=[x],b.flags|=16):S.push(x)}}function r(b,x){if(!e)return null;for(;x!==null;)t(b,x),x=x.sibling;return null}function n(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function i(b,x){return b=zi(b,x),b.index=0,b.sibling=null,b}function a(b,x,S){return b.index=S,e?(S=b.alternate,S!==null?(S=S.index,S<x?(b.flags|=2,x):S):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function c(b,x,S,O){return x===null||x.tag!==6?(x=Gm(S,b.mode,O),x.return=b,x):(x=i(x,S),x.return=b,x)}function d(b,x,S,O){var N=S.type;return N===Ss?h(b,x,S.props.children,O,S.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xi&&Fb(N)===x.type)?(O=i(x,S.props),O.ref=el(b,x,S),O.return=b,O):(O=nd(S.type,S.key,S.props,null,b.mode,O),O.ref=el(b,x,S),O.return=b,O)}function f(b,x,S,O){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Ym(S,b.mode,O),x.return=b,x):(x=i(x,S.children||[]),x.return=b,x)}function h(b,x,S,O,N){return x===null||x.tag!==7?(x=Ca(S,b.mode,O,N),x.return=b,x):(x=i(x,S),x.return=b,x)}function m(b,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Gm(""+x,b.mode,S),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case lu:return S=nd(x.type,x.key,x.props,null,b.mode,S),S.ref=el(b,null,x),S.return=b,S;case js:return x=Ym(x,b.mode,S),x.return=b,x;case xi:var O=x._init;return m(b,O(x._payload),S)}if(hl(x)||Go(x))return x=Ca(x,b.mode,S,null),x.return=b,x;xu(b,x)}return null}function g(b,x,S,O){var N=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:c(b,x,""+S,O);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lu:return S.key===N?d(b,x,S,O):null;case js:return S.key===N?f(b,x,S,O):null;case xi:return N=S._init,g(b,x,N(S._payload),O)}if(hl(S)||Go(S))return N!==null?null:h(b,x,S,O,null);xu(b,S)}return null}function v(b,x,S,O,N){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(S)||null,c(x,b,""+O,N);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case lu:return b=b.get(O.key===null?S:O.key)||null,d(x,b,O,N);case js:return b=b.get(O.key===null?S:O.key)||null,f(x,b,O,N);case xi:var C=O._init;return v(b,x,S,C(O._payload),N)}if(hl(O)||Go(O))return b=b.get(S)||null,h(x,b,O,N,null);xu(x,O)}return null}function j(b,x,S,O){for(var N=null,C=null,E=x,A=x=0,H=null;E!==null&&A<S.length;A++){E.index>A?(H=E,E=null):H=E.sibling;var B=g(b,E,S[A],O);if(B===null){E===null&&(E=H);break}e&&E&&B.alternate===null&&t(b,E),x=a(B,x,A),C===null?N=B:C.sibling=B,C=B,E=H}if(A===S.length)return r(b,E),Ue&&fa(b,A),N;if(E===null){for(;A<S.length;A++)E=m(b,S[A],O),E!==null&&(x=a(E,x,A),C===null?N=E:C.sibling=E,C=E);return Ue&&fa(b,A),N}for(E=n(b,E);A<S.length;A++)H=v(E,b,A,S[A],O),H!==null&&(e&&H.alternate!==null&&E.delete(H.key===null?A:H.key),x=a(H,x,A),C===null?N=H:C.sibling=H,C=H);return e&&E.forEach(function(R){return t(b,R)}),Ue&&fa(b,A),N}function w(b,x,S,O){var N=Go(S);if(typeof N!="function")throw Error(Q(150));if(S=N.call(S),S==null)throw Error(Q(151));for(var C=N=null,E=x,A=x=0,H=null,B=S.next();E!==null&&!B.done;A++,B=S.next()){E.index>A?(H=E,E=null):H=E.sibling;var R=g(b,E,B.value,O);if(R===null){E===null&&(E=H);break}e&&E&&R.alternate===null&&t(b,E),x=a(R,x,A),C===null?N=R:C.sibling=R,C=R,E=H}if(B.done)return r(b,E),Ue&&fa(b,A),N;if(E===null){for(;!B.done;A++,B=S.next())B=m(b,B.value,O),B!==null&&(x=a(B,x,A),C===null?N=B:C.sibling=B,C=B);return Ue&&fa(b,A),N}for(E=n(b,E);!B.done;A++,B=S.next())B=v(E,b,A,B.value,O),B!==null&&(e&&B.alternate!==null&&E.delete(B.key===null?A:B.key),x=a(B,x,A),C===null?N=B:C.sibling=B,C=B);return e&&E.forEach(function(U){return t(b,U)}),Ue&&fa(b,A),N}function P(b,x,S,O){if(typeof S=="object"&&S!==null&&S.type===Ss&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case lu:e:{for(var N=S.key,C=x;C!==null;){if(C.key===N){if(N=S.type,N===Ss){if(C.tag===7){r(b,C.sibling),x=i(C,S.props.children),x.return=b,b=x;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xi&&Fb(N)===C.type){r(b,C.sibling),x=i(C,S.props),x.ref=el(b,C,S),x.return=b,b=x;break e}r(b,C);break}else t(b,C);C=C.sibling}S.type===Ss?(x=Ca(S.props.children,b.mode,O,S.key),x.return=b,b=x):(O=nd(S.type,S.key,S.props,null,b.mode,O),O.ref=el(b,x,S),O.return=b,b=O)}return o(b);case js:e:{for(C=S.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){r(b,x.sibling),x=i(x,S.children||[]),x.return=b,b=x;break e}else{r(b,x);break}else t(b,x);x=x.sibling}x=Ym(S,b.mode,O),x.return=b,b=x}return o(b);case xi:return C=S._init,P(b,x,C(S._payload),O)}if(hl(S))return j(b,x,S,O);if(Go(S))return w(b,x,S,O);xu(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(r(b,x.sibling),x=i(x,S),x.return=b,b=x):(r(b,x),x=Gm(S,b.mode,O),x.return=b,b=x),o(b)):r(b,x)}return P}var Js=MP(!0),LP=MP(!1),bd=qi(null),wd=null,As=null,iy=null;function ay(){iy=As=wd=null}function sy(e){var t=bd.current;Be(bd),e._currentValue=t}function dg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Hs(e,t){wd=e,iy=As=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(sr=!0),e.firstContext=null)}function Kr(e){var t=e._currentValue;if(iy!==e)if(e={context:e,memoizedValue:t,next:null},As===null){if(wd===null)throw Error(Q(308));As=e,wd.dependencies={lanes:0,firstContext:e}}else As=As.next=e;return t}var _a=null;function oy(e){_a===null?_a=[e]:_a.push(e)}function DP(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,oy(t)):(r.next=i.next,i.next=r),t.interleaved=r,ti(e,n)}function ti(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var _i=!1;function ly(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ii(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,je&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,ti(e,r)}return i=n.interleaved,i===null?(t.next=t,oy(n)):(t.next=i.next,i.next=t),n.interleaved=t,ti(e,r)}function Xu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Vv(e,r)}}function Ub(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function jd(e,t,r,n){var i=e.updateQueue;_i=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,f=d.next;d.next=null,o===null?a=f:o.next=f,o=d;var h=e.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=f:c.next=f,h.lastBaseUpdate=d))}if(a!==null){var m=i.baseState;o=0,h=f=d=null,c=a;do{var g=c.lane,v=c.eventTime;if((n&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=e,w=c;switch(g=t,v=r,w.tag){case 1:if(j=w.payload,typeof j=="function"){m=j.call(v,m,g);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=w.payload,g=typeof j=="function"?j.call(v,m,g):j,g==null)break e;m=Ge({},m,g);break e;case 2:_i=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[c]:g.push(c))}else v={eventTime:v,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(f=h=v,d=m):h=h.next=v,o|=g;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;g=c,c=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(d=m),i.baseState=d,i.firstBaseUpdate=f,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Ra|=o,e.lanes=o,e.memoizedState=m}}function Wb(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Q(191,i));i.call(n)}}}var xc={},Cn=qi(xc),ql=qi(xc),Gl=qi(xc);function ba(e){if(e===xc)throw Error(Q(174));return e}function cy(e,t){switch(Re(Gl,t),Re(ql,e),Re(Cn,xc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kp(t,e)}Be(Cn),Re(Cn,t)}function Qs(){Be(Cn),Be(ql),Be(Gl)}function RP(e){ba(Gl.current);var t=ba(Cn.current),r=Kp(t,e.type);t!==r&&(Re(ql,e),Re(Cn,r))}function uy(e){ql.current===e&&(Be(Cn),Be(ql))}var Ze=qi(0);function Sd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wm=[];function dy(){for(var e=0;e<Wm.length;e++)Wm[e]._workInProgressVersionPrimary=null;Wm.length=0}var Ju=oi.ReactCurrentDispatcher,Hm=oi.ReactCurrentBatchConfig,Ia=0,qe=null,ht=null,jt=null,Pd=!1,Nl=!1,Yl=0,FL=0;function $t(){throw Error(Q(321))}function fy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!mn(e[r],t[r]))return!1;return!0}function hy(e,t,r,n,i,a){if(Ia=a,qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ju.current=e===null||e.memoizedState===null?KL:ZL,e=r(n,i),Nl){a=0;do{if(Nl=!1,Yl=0,25<=a)throw Error(Q(301));a+=1,jt=ht=null,t.updateQueue=null,Ju.current=VL,e=r(n,i)}while(Nl)}if(Ju.current=kd,t=ht!==null&&ht.next!==null,Ia=0,jt=ht=qe=null,Pd=!1,t)throw Error(Q(300));return e}function my(){var e=Yl!==0;return Yl=0,e}function wn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?qe.memoizedState=jt=e:jt=jt.next=e,jt}function Zr(){if(ht===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var t=jt===null?qe.memoizedState:jt.next;if(t!==null)jt=t,ht=e;else{if(e===null)throw Error(Q(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},jt===null?qe.memoizedState=jt=e:jt=jt.next=e}return jt}function Xl(e,t){return typeof t=="function"?t(e):t}function Km(e){var t=Zr(),r=t.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=e;var n=ht,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var c=o=null,d=null,f=a;do{var h=f.lane;if((Ia&h)===h)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),n=f.hasEagerState?f.eagerState:e(n,f.action);else{var m={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(c=d=m,o=n):d=d.next=m,qe.lanes|=h,Ra|=h}f=f.next}while(f!==null&&f!==a);d===null?o=n:d.next=c,mn(n,t.memoizedState)||(sr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,qe.lanes|=a,Ra|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Zm(e){var t=Zr(),r=t.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);mn(a,t.memoizedState)||(sr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function $P(){}function zP(e,t){var r=qe,n=Zr(),i=t(),a=!mn(n.memoizedState,i);if(a&&(n.memoizedState=i,sr=!0),n=n.queue,py(UP.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||jt!==null&&jt.memoizedState.tag&1){if(r.flags|=2048,Jl(9,FP.bind(null,r,n,i,t),void 0,null),Pt===null)throw Error(Q(349));Ia&30||BP(r,t,i)}return i}function BP(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function FP(e,t,r,n){t.value=r,t.getSnapshot=n,WP(t)&&HP(e)}function UP(e,t,r){return r(function(){WP(t)&&HP(e)})}function WP(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!mn(e,r)}catch{return!0}}function HP(e){var t=ti(e,1);t!==null&&hn(t,e,1,-1)}function Hb(e){var t=wn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xl,lastRenderedState:e},t.queue=e,e=e.dispatch=HL.bind(null,qe,e),[t.memoizedState,e]}function Jl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function KP(){return Zr().memoizedState}function Qu(e,t,r,n){var i=wn();qe.flags|=e,i.memoizedState=Jl(1|t,r,void 0,n===void 0?null:n)}function Mf(e,t,r,n){var i=Zr();n=n===void 0?null:n;var a=void 0;if(ht!==null){var o=ht.memoizedState;if(a=o.destroy,n!==null&&fy(n,o.deps)){i.memoizedState=Jl(t,r,a,n);return}}qe.flags|=e,i.memoizedState=Jl(1|t,r,a,n)}function Kb(e,t){return Qu(8390656,8,e,t)}function py(e,t){return Mf(2048,8,e,t)}function ZP(e,t){return Mf(4,2,e,t)}function VP(e,t){return Mf(4,4,e,t)}function qP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function GP(e,t,r){return r=r!=null?r.concat([e]):null,Mf(4,4,qP.bind(null,t,e),r)}function gy(){}function YP(e,t){var r=Zr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&fy(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function XP(e,t){var r=Zr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&fy(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function JP(e,t,r){return Ia&21?(mn(r,t)||(r=nP(),qe.lanes|=r,Ra|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,sr=!0),e.memoizedState=r)}function UL(e,t){var r=Ee;Ee=r!==0&&4>r?r:4,e(!0);var n=Hm.transition;Hm.transition={};try{e(!1),t()}finally{Ee=r,Hm.transition=n}}function QP(){return Zr().memoizedState}function WL(e,t,r){var n=$i(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},e2(e))t2(t,r);else if(r=DP(e,t,r,n),r!==null){var i=Xt();hn(r,e,n,i),r2(r,t,n)}}function HL(e,t,r){var n=$i(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(e2(e))t2(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,c=a(o,r);if(i.hasEagerState=!0,i.eagerState=c,mn(c,o)){var d=t.interleaved;d===null?(i.next=i,oy(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}r=DP(e,t,i,n),r!==null&&(i=Xt(),hn(r,e,n,i),r2(r,t,n))}}function e2(e){var t=e.alternate;return e===qe||t!==null&&t===qe}function t2(e,t){Nl=Pd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function r2(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Vv(e,r)}}var kd={readContext:Kr,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},KL={readContext:Kr,useCallback:function(e,t){return wn().memoizedState=[e,t===void 0?null:t],e},useContext:Kr,useEffect:Kb,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Qu(4194308,4,qP.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Qu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qu(4,2,e,t)},useMemo:function(e,t){var r=wn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=wn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=WL.bind(null,qe,e),[n.memoizedState,e]},useRef:function(e){var t=wn();return e={current:e},t.memoizedState=e},useState:Hb,useDebugValue:gy,useDeferredValue:function(e){return wn().memoizedState=e},useTransition:function(){var e=Hb(!1),t=e[0];return e=UL.bind(null,e[1]),wn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=qe,i=wn();if(Ue){if(r===void 0)throw Error(Q(407));r=r()}else{if(r=t(),Pt===null)throw Error(Q(349));Ia&30||BP(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Kb(UP.bind(null,n,a,e),[e]),n.flags|=2048,Jl(9,FP.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=wn(),t=Pt.identifierPrefix;if(Ue){var r=Vn,n=Zn;r=(n&~(1<<32-fn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Yl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=FL++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ZL={readContext:Kr,useCallback:YP,useContext:Kr,useEffect:py,useImperativeHandle:GP,useInsertionEffect:ZP,useLayoutEffect:VP,useMemo:XP,useReducer:Km,useRef:KP,useState:function(){return Km(Xl)},useDebugValue:gy,useDeferredValue:function(e){var t=Zr();return JP(t,ht.memoizedState,e)},useTransition:function(){var e=Km(Xl)[0],t=Zr().memoizedState;return[e,t]},useMutableSource:$P,useSyncExternalStore:zP,useId:QP,unstable_isNewReconciler:!1},VL={readContext:Kr,useCallback:YP,useContext:Kr,useEffect:py,useImperativeHandle:GP,useInsertionEffect:ZP,useLayoutEffect:VP,useMemo:XP,useReducer:Zm,useRef:KP,useState:function(){return Zm(Xl)},useDebugValue:gy,useDeferredValue:function(e){var t=Zr();return ht===null?t.memoizedState=e:JP(t,ht.memoizedState,e)},useTransition:function(){var e=Zm(Xl)[0],t=Zr().memoizedState;return[e,t]},useMutableSource:$P,useSyncExternalStore:zP,useId:QP,unstable_isNewReconciler:!1};function nn(e,t){if(e&&e.defaultProps){t=Ge({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function fg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ge({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Lf={isMounted:function(e){return(e=e._reactInternals)?qa(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Xt(),i=$i(e),a=Yn(n,i);a.payload=t,r!=null&&(a.callback=r),t=Ii(e,a,i),t!==null&&(hn(t,e,i,n),Xu(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Xt(),i=$i(e),a=Yn(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Ii(e,a,i),t!==null&&(hn(t,e,i,n),Xu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xt(),n=$i(e),i=Yn(r,n);i.tag=2,t!=null&&(i.callback=t),t=Ii(e,i,n),t!==null&&(hn(t,e,n,r),Xu(t,e,n))}};function Zb(e,t,r,n,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!Hl(r,n)||!Hl(i,a):!0}function n2(e,t,r){var n=!1,i=Hi,a=t.contextType;return typeof a=="object"&&a!==null?a=Kr(a):(i=cr(t)?La:Ht.current,n=t.contextTypes,a=(n=n!=null)?Ys(e,i):Hi),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Vb(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Lf.enqueueReplaceState(t,t.state,null)}function hg(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},ly(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Kr(a):(a=cr(t)?La:Ht.current,i.context=Ys(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(fg(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Lf.enqueueReplaceState(i,i.state,null),jd(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function eo(e,t){try{var r="",n=t;do r+=bM(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Vm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function mg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var qL=typeof WeakMap=="function"?WeakMap:Map;function i2(e,t,r){r=Yn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Cd||(Cd=!0,Sg=n),mg(e,t)},r}function a2(e,t,r){r=Yn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){mg(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){mg(e,t),typeof n!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function qb(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new qL;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=lD.bind(null,e,t,r),t.then(e,e))}function Gb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yb(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Yn(-1,1),t.tag=2,Ii(r,t,1))),r.lanes|=1),e)}var GL=oi.ReactCurrentOwner,sr=!1;function qt(e,t,r,n){t.child=e===null?LP(t,null,r,n):Js(t,e.child,r,n)}function Xb(e,t,r,n,i){r=r.render;var a=t.ref;return Hs(t,i),n=hy(e,t,r,n,a,i),r=my(),e!==null&&!sr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ri(e,t,i)):(Ue&&r&&ty(t),t.flags|=1,qt(e,t,n,i),t.child)}function Jb(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!Sy(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,s2(e,t,a,n,i)):(e=nd(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Hl,r(o,n)&&e.ref===t.ref)return ri(e,t,i)}return t.flags|=1,e=zi(a,n),e.ref=t.ref,e.return=t,t.child=e}function s2(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Hl(a,n)&&e.ref===t.ref)if(sr=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(sr=!0);else return t.lanes=e.lanes,ri(e,t,i)}return pg(e,t,r,n,i)}function o2(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Ls,pr),pr|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(Ls,pr),pr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Re(Ls,pr),pr|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Re(Ls,pr),pr|=n;return qt(e,t,i,r),t.child}function l2(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function pg(e,t,r,n,i){var a=cr(r)?La:Ht.current;return a=Ys(t,a),Hs(t,i),r=hy(e,t,r,n,a,i),n=my(),e!==null&&!sr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ri(e,t,i)):(Ue&&n&&ty(t),t.flags|=1,qt(e,t,r,i),t.child)}function Qb(e,t,r,n,i){if(cr(r)){var a=!0;yd(t)}else a=!1;if(Hs(t,i),t.stateNode===null)ed(e,t),n2(t,r,n),hg(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,f=r.contextType;typeof f=="object"&&f!==null?f=Kr(f):(f=cr(r)?La:Ht.current,f=Ys(t,f));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==n||d!==f)&&Vb(t,o,n,f),_i=!1;var g=t.memoizedState;o.state=g,jd(t,n,o,i),d=t.memoizedState,c!==n||g!==d||lr.current||_i?(typeof h=="function"&&(fg(t,r,h,n),d=t.memoizedState),(c=_i||Zb(t,r,c,n,g,d,f))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=f,n=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,IP(e,t),c=t.memoizedProps,f=t.type===t.elementType?c:nn(t.type,c),o.props=f,m=t.pendingProps,g=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=Kr(d):(d=cr(r)?La:Ht.current,d=Ys(t,d));var v=r.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==d)&&Vb(t,o,n,d),_i=!1,g=t.memoizedState,o.state=g,jd(t,n,o,i);var j=t.memoizedState;c!==m||g!==j||lr.current||_i?(typeof v=="function"&&(fg(t,r,v,n),j=t.memoizedState),(f=_i||Zb(t,r,f,n,g,j,d)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,j,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,j,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),o.props=n,o.state=j,o.context=d,n=f):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),n=!1)}return gg(e,t,r,n,a,i)}function gg(e,t,r,n,i,a){l2(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&$b(t,r,!1),ri(e,t,a);n=t.stateNode,GL.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Js(t,e.child,null,a),t.child=Js(t,null,c,a)):qt(e,t,c,a),t.memoizedState=n.state,i&&$b(t,r,!0),t.child}function c2(e){var t=e.stateNode;t.pendingContext?Rb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Rb(e,t.context,!1),cy(e,t.containerInfo)}function ew(e,t,r,n,i){return Xs(),ny(i),t.flags|=256,qt(e,t,r,n),t.child}var vg={dehydrated:null,treeContext:null,retryLane:0};function yg(e){return{baseLanes:e,cachePool:null,transitions:null}}function u2(e,t,r){var n=t.pendingProps,i=Ze.current,a=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(i&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Re(Ze,i&1),e===null)return ug(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Rf(o,n,0,null),e=Ca(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=yg(r),t.memoizedState=vg,e):vy(t,o));if(i=e.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return YL(e,t,o,n,c,i,r);if(a){a=n.fallback,o=t.mode,i=e.child,c=i.sibling;var d={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=zi(i,d),n.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=zi(c,a):(a=Ca(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?yg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=vg,n}return a=e.child,e=a.sibling,n=zi(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function vy(e,t){return t=Rf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _u(e,t,r,n){return n!==null&&ny(n),Js(t,e.child,null,r),e=vy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function YL(e,t,r,n,i,a,o){if(r)return t.flags&256?(t.flags&=-257,n=Vm(Error(Q(422))),_u(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Rf({mode:"visible",children:n.children},i,0,null),a=Ca(a,i,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Js(t,e.child,null,o),t.child.memoizedState=yg(o),t.memoizedState=vg,a);if(!(t.mode&1))return _u(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var c=n.dgst;return n=c,a=Error(Q(419)),n=Vm(a,n,void 0),_u(e,t,o,n)}if(c=(o&e.childLanes)!==0,sr||c){if(n=Pt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ti(e,i),hn(n,e,i,-1))}return jy(),n=Vm(Error(Q(421))),_u(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=cD.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,yr=Di(i.nextSibling),xr=t,Ue=!0,on=null,e!==null&&(Rr[$r++]=Zn,Rr[$r++]=Vn,Rr[$r++]=Da,Zn=e.id,Vn=e.overflow,Da=t),t=vy(t,n.children),t.flags|=4096,t)}function tw(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),dg(e.return,t,r)}function qm(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function d2(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(qt(e,t,n.children,r),n=Ze.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tw(e,r,t);else if(e.tag===19)tw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Re(Ze,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Sd(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),qm(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Sd(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}qm(t,!0,r,null,a);break;case"together":qm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ed(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ri(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ra|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,r=zi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=zi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function XL(e,t,r){switch(t.tag){case 3:c2(t),Xs();break;case 5:RP(t);break;case 1:cr(t.type)&&yd(t);break;case 4:cy(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Re(bd,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Re(Ze,Ze.current&1),t.flags|=128,null):r&t.child.childLanes?u2(e,t,r):(Re(Ze,Ze.current&1),e=ri(e,t,r),e!==null?e.sibling:null);Re(Ze,Ze.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return d2(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(Ze,Ze.current),n)break;return null;case 22:case 23:return t.lanes=0,o2(e,t,r)}return ri(e,t,r)}var f2,xg,h2,m2;f2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xg=function(){};h2=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ba(Cn.current);var a=null;switch(r){case"input":i=Fp(e,i),n=Fp(e,n),a=[];break;case"select":i=Ge({},i,{value:void 0}),n=Ge({},n,{value:void 0}),a=[];break;case"textarea":i=Hp(e,i),n=Hp(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=gd)}Zp(r,n);var o;r=null;for(f in i)if(!n.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var c=i[f];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Rl.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in n){var d=n[f];if(c=i!=null?i[f]:void 0,n.hasOwnProperty(f)&&d!==c&&(d!=null||c!=null))if(f==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(a||(a=[]),a.push(f,r)),r=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Rl.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&$e("scroll",e),a||c===d||(a=[])):(a=a||[]).push(f,d))}r&&(a=a||[]).push("style",r);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};m2=function(e,t,r,n){r!==n&&(t.flags|=4)};function tl(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function JL(e,t,r){var n=t.pendingProps;switch(ry(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(t),null;case 1:return cr(t.type)&&vd(),zt(t),null;case 3:return n=t.stateNode,Qs(),Be(lr),Be(Ht),dy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(yu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,on!==null&&(Ng(on),on=null))),xg(e,t),zt(t),null;case 5:uy(t);var i=ba(Gl.current);if(r=t.type,e!==null&&t.stateNode!=null)h2(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Q(166));return zt(t),null}if(e=ba(Cn.current),yu(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Sn]=t,n[Vl]=a,e=(t.mode&1)!==0,r){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(i=0;i<pl.length;i++)$e(pl[i],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":ub(n,a),$e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},$e("invalid",n);break;case"textarea":fb(n,a),$e("invalid",n)}Zp(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?n.textContent!==c&&(a.suppressHydrationWarning!==!0&&vu(n.textContent,c,e),i=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&vu(n.textContent,c,e),i=["children",""+c]):Rl.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&$e("scroll",n)}switch(r){case"input":cu(n),db(n,a,!0);break;case"textarea":cu(n),hb(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=gd)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=US(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Sn]=t,e[Vl]=n,f2(e,t,!1,!1),t.stateNode=e;e:{switch(o=Vp(r,n),r){case"dialog":$e("cancel",e),$e("close",e),i=n;break;case"iframe":case"object":case"embed":$e("load",e),i=n;break;case"video":case"audio":for(i=0;i<pl.length;i++)$e(pl[i],e);i=n;break;case"source":$e("error",e),i=n;break;case"img":case"image":case"link":$e("error",e),$e("load",e),i=n;break;case"details":$e("toggle",e),i=n;break;case"input":ub(e,n),i=Fp(e,n),$e("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Ge({},n,{value:void 0}),$e("invalid",e);break;case"textarea":fb(e,n),i=Hp(e,n),$e("invalid",e);break;default:i=n}Zp(r,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?KS(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&WS(e,d)):a==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&$l(e,d):typeof d=="number"&&$l(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Rl.hasOwnProperty(a)?d!=null&&a==="onScroll"&&$e("scroll",e):d!=null&&Fv(e,a,d,o))}switch(r){case"input":cu(e),db(e,n,!1);break;case"textarea":cu(e),hb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Wi(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Bs(e,!!n.multiple,a,!1):n.defaultValue!=null&&Bs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=gd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zt(t),null;case 6:if(e&&t.stateNode!=null)m2(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Q(166));if(r=ba(Gl.current),ba(Cn.current),yu(t)){if(n=t.stateNode,r=t.memoizedProps,n[Sn]=t,(a=n.nodeValue!==r)&&(e=xr,e!==null))switch(e.tag){case 3:vu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vu(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Sn]=t,t.stateNode=n}return zt(t),null;case 13:if(Be(Ze),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&yr!==null&&t.mode&1&&!(t.flags&128))AP(),Xs(),t.flags|=98560,a=!1;else if(a=yu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(Q(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Q(317));a[Sn]=t}else Xs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zt(t),a=!1}else on!==null&&(Ng(on),on=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ze.current&1?pt===0&&(pt=3):jy())),t.updateQueue!==null&&(t.flags|=4),zt(t),null);case 4:return Qs(),xg(e,t),e===null&&Kl(t.stateNode.containerInfo),zt(t),null;case 10:return sy(t.type._context),zt(t),null;case 17:return cr(t.type)&&vd(),zt(t),null;case 19:if(Be(Ze),a=t.memoizedState,a===null)return zt(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)tl(a,!1);else{if(pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Sd(e),o!==null){for(t.flags|=128,tl(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Re(Ze,Ze.current&1|2),t.child}e=e.sibling}a.tail!==null&&rt()>to&&(t.flags|=128,n=!0,tl(a,!1),t.lanes=4194304)}else{if(!n)if(e=Sd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),tl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ue)return zt(t),null}else 2*rt()-a.renderingStartTime>to&&r!==1073741824&&(t.flags|=128,n=!0,tl(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=rt(),t.sibling=null,r=Ze.current,Re(Ze,n?r&1|2:r&1),t):(zt(t),null);case 22:case 23:return wy(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?pr&1073741824&&(zt(t),t.subtreeFlags&6&&(t.flags|=8192)):zt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function QL(e,t){switch(ry(t),t.tag){case 1:return cr(t.type)&&vd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qs(),Be(lr),Be(Ht),dy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uy(t),null;case 13:if(Be(Ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));Xs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Ze),null;case 4:return Qs(),null;case 10:return sy(t.type._context),null;case 22:case 23:return wy(),null;case 24:return null;default:return null}}var bu=!1,Ft=!1,eD=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Ms(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Je(e,t,n)}else r.current=null}function _g(e,t,r){try{r()}catch(n){Je(e,t,n)}}var rw=!1;function tD(e,t){if(ng=hd,e=xP(),ey(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,c=-1,d=-1,f=0,h=0,m=e,g=null;t:for(;;){for(var v;m!==r||i!==0&&m.nodeType!==3||(c=o+i),m!==a||n!==0&&m.nodeType!==3||(d=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===e)break t;if(g===r&&++f===i&&(c=o),g===a&&++h===n&&(d=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(ig={focusedElem:e,selectionRange:r},hd=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var w=j.memoizedProps,P=j.memoizedState,b=t.stateNode,x=b.getSnapshotBeforeUpdate(t.elementType===t.type?w:nn(t.type,w),P);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(O){Je(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return j=rw,rw=!1,j}function Cl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&_g(t,r,a)}i=i.next}while(i!==n)}}function Df(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function bg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function p2(e){var t=e.alternate;t!==null&&(e.alternate=null,p2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sn],delete t[Vl],delete t[og],delete t[RL],delete t[$L])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function g2(e){return e.tag===5||e.tag===3||e.tag===4}function nw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||g2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=gd));else if(n!==4&&(e=e.child,e!==null))for(wg(e,t,r),e=e.sibling;e!==null;)wg(e,t,r),e=e.sibling}function jg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(jg(e,t,r),e=e.sibling;e!==null;)jg(e,t,r),e=e.sibling}var Tt=null,an=!1;function gi(e,t,r){for(r=r.child;r!==null;)v2(e,t,r),r=r.sibling}function v2(e,t,r){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Nf,r)}catch{}switch(r.tag){case 5:Ft||Ms(r,t);case 6:var n=Tt,i=an;Tt=null,gi(e,t,r),Tt=n,an=i,Tt!==null&&(an?(e=Tt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Tt.removeChild(r.stateNode));break;case 18:Tt!==null&&(an?(e=Tt,r=r.stateNode,e.nodeType===8?Fm(e.parentNode,r):e.nodeType===1&&Fm(e,r),Ul(e)):Fm(Tt,r.stateNode));break;case 4:n=Tt,i=an,Tt=r.stateNode.containerInfo,an=!0,gi(e,t,r),Tt=n,an=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&_g(r,t,o),i=i.next}while(i!==n)}gi(e,t,r);break;case 1:if(!Ft&&(Ms(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){Je(r,t,c)}gi(e,t,r);break;case 21:gi(e,t,r);break;case 22:r.mode&1?(Ft=(n=Ft)||r.memoizedState!==null,gi(e,t,r),Ft=n):gi(e,t,r);break;default:gi(e,t,r)}}function iw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new eD),t.forEach(function(n){var i=uD.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function tn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Tt=c.stateNode,an=!1;break e;case 3:Tt=c.stateNode.containerInfo,an=!0;break e;case 4:Tt=c.stateNode.containerInfo,an=!0;break e}c=c.return}if(Tt===null)throw Error(Q(160));v2(a,o,i),Tt=null,an=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(f){Je(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)y2(t,e),t=t.sibling}function y2(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tn(t,e),bn(e),n&4){try{Cl(3,e,e.return),Df(3,e)}catch(w){Je(e,e.return,w)}try{Cl(5,e,e.return)}catch(w){Je(e,e.return,w)}}break;case 1:tn(t,e),bn(e),n&512&&r!==null&&Ms(r,r.return);break;case 5:if(tn(t,e),bn(e),n&512&&r!==null&&Ms(r,r.return),e.flags&32){var i=e.stateNode;try{$l(i,"")}catch(w){Je(e,e.return,w)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&BS(i,a),Vp(c,o);var f=Vp(c,a);for(o=0;o<d.length;o+=2){var h=d[o],m=d[o+1];h==="style"?KS(i,m):h==="dangerouslySetInnerHTML"?WS(i,m):h==="children"?$l(i,m):Fv(i,h,m,f)}switch(c){case"input":Up(i,a);break;case"textarea":FS(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Bs(i,!!a.multiple,v,!1):g!==!!a.multiple&&(a.defaultValue!=null?Bs(i,!!a.multiple,a.defaultValue,!0):Bs(i,!!a.multiple,a.multiple?[]:"",!1))}i[Vl]=a}catch(w){Je(e,e.return,w)}}break;case 6:if(tn(t,e),bn(e),n&4){if(e.stateNode===null)throw Error(Q(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(w){Je(e,e.return,w)}}break;case 3:if(tn(t,e),bn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ul(t.containerInfo)}catch(w){Je(e,e.return,w)}break;case 4:tn(t,e),bn(e);break;case 13:tn(t,e),bn(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(_y=rt())),n&4&&iw(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Ft=(f=Ft)||h,tn(t,e),Ft=f):tn(t,e),bn(e),n&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!h&&e.mode&1)for(ne=e,h=e.child;h!==null;){for(m=ne=h;ne!==null;){switch(g=ne,v=g.child,g.tag){case 0:case 11:case 14:case 15:Cl(4,g,g.return);break;case 1:Ms(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){n=g,r=g.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(w){Je(n,r,w)}}break;case 5:Ms(g,g.return);break;case 22:if(g.memoizedState!==null){sw(m);continue}}v!==null?(v.return=g,ne=v):sw(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,f?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,d=m.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=HS("display",o))}catch(w){Je(e,e.return,w)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(w){Je(e,e.return,w)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:tn(t,e),bn(e),n&4&&iw(e);break;case 21:break;default:tn(t,e),bn(e)}}function bn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(g2(r)){var n=r;break e}r=r.return}throw Error(Q(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&($l(i,""),n.flags&=-33);var a=nw(e);jg(e,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,c=nw(e);wg(e,c,o);break;default:throw Error(Q(161))}}catch(d){Je(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rD(e,t,r){ne=e,x2(e)}function x2(e,t,r){for(var n=(e.mode&1)!==0;ne!==null;){var i=ne,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||bu;if(!o){var c=i.alternate,d=c!==null&&c.memoizedState!==null||Ft;c=bu;var f=Ft;if(bu=o,(Ft=d)&&!f)for(ne=i;ne!==null;)o=ne,d=o.child,o.tag===22&&o.memoizedState!==null?ow(i):d!==null?(d.return=o,ne=d):ow(i);for(;a!==null;)ne=a,x2(a),a=a.sibling;ne=i,bu=c,Ft=f}aw(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ne=a):aw(e)}}function aw(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ft||Df(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ft)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:nn(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Wb(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Wb(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Ul(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Ft||t.flags&512&&bg(t)}catch(g){Je(t,t.return,g)}}if(t===e){ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}}function sw(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ne=r;break}ne=t.return}}function ow(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Df(4,t)}catch(d){Je(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(d){Je(t,i,d)}}var a=t.return;try{bg(t)}catch(d){Je(t,a,d)}break;case 5:var o=t.return;try{bg(t)}catch(d){Je(t,o,d)}}}catch(d){Je(t,t.return,d)}if(t===e){ne=null;break}var c=t.sibling;if(c!==null){c.return=t.return,ne=c;break}ne=t.return}}var nD=Math.ceil,Nd=oi.ReactCurrentDispatcher,yy=oi.ReactCurrentOwner,Hr=oi.ReactCurrentBatchConfig,je=0,Pt=null,ot=null,Lt=0,pr=0,Ls=qi(0),pt=0,Ql=null,Ra=0,If=0,xy=0,El=null,nr=null,_y=0,to=1/0,Fn=null,Cd=!1,Sg=null,Ri=null,wu=!1,Oi=null,Ed=0,Ol=0,Pg=null,td=-1,rd=0;function Xt(){return je&6?rt():td!==-1?td:td=rt()}function $i(e){return e.mode&1?je&2&&Lt!==0?Lt&-Lt:BL.transition!==null?(rd===0&&(rd=nP()),rd):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:uP(e.type)),e):1}function hn(e,t,r,n){if(50<Ol)throw Ol=0,Pg=null,Error(Q(185));gc(e,r,n),(!(je&2)||e!==Pt)&&(e===Pt&&(!(je&2)&&(If|=r),pt===4&&ki(e,Lt)),ur(e,n),r===1&&je===0&&!(t.mode&1)&&(to=rt()+500,Af&&Gi()))}function ur(e,t){var r=e.callbackNode;BM(e,t);var n=fd(e,e===Pt?Lt:0);if(n===0)r!==null&&gb(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&gb(r),t===1)e.tag===0?zL(lw.bind(null,e)):EP(lw.bind(null,e)),DL(function(){!(je&6)&&Gi()}),r=null;else{switch(iP(n)){case 1:r=Zv;break;case 4:r=tP;break;case 16:r=dd;break;case 536870912:r=rP;break;default:r=dd}r=N2(r,_2.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function _2(e,t){if(td=-1,rd=0,je&6)throw Error(Q(327));var r=e.callbackNode;if(Ks()&&e.callbackNode!==r)return null;var n=fd(e,e===Pt?Lt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Od(e,n);else{t=n;var i=je;je|=2;var a=w2();(Pt!==e||Lt!==t)&&(Fn=null,to=rt()+500,Na(e,t));do try{sD();break}catch(c){b2(e,c)}while(!0);ay(),Nd.current=a,je=i,ot!==null?t=0:(Pt=null,Lt=0,t=pt)}if(t!==0){if(t===2&&(i=Jp(e),i!==0&&(n=i,t=kg(e,i))),t===1)throw r=Ql,Na(e,0),ki(e,n),ur(e,rt()),r;if(t===6)ki(e,n);else{if(i=e.current.alternate,!(n&30)&&!iD(i)&&(t=Od(e,n),t===2&&(a=Jp(e),a!==0&&(n=a,t=kg(e,a))),t===1))throw r=Ql,Na(e,0),ki(e,n),ur(e,rt()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Q(345));case 2:ha(e,nr,Fn);break;case 3:if(ki(e,n),(n&130023424)===n&&(t=_y+500-rt(),10<t)){if(fd(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Xt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=sg(ha.bind(null,e,nr,Fn),t);break}ha(e,nr,Fn);break;case 4:if(ki(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-fn(n);a=1<<o,o=t[o],o>i&&(i=o),n&=~a}if(n=i,n=rt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*nD(n/1960))-n,10<n){e.timeoutHandle=sg(ha.bind(null,e,nr,Fn),n);break}ha(e,nr,Fn);break;case 5:ha(e,nr,Fn);break;default:throw Error(Q(329))}}}return ur(e,rt()),e.callbackNode===r?_2.bind(null,e):null}function kg(e,t){var r=El;return e.current.memoizedState.isDehydrated&&(Na(e,t).flags|=256),e=Od(e,t),e!==2&&(t=nr,nr=r,t!==null&&Ng(t)),e}function Ng(e){nr===null?nr=e:nr.push.apply(nr,e)}function iD(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!mn(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ki(e,t){for(t&=~xy,t&=~If,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-fn(t),n=1<<r;e[r]=-1,t&=~n}}function lw(e){if(je&6)throw Error(Q(327));Ks();var t=fd(e,0);if(!(t&1))return ur(e,rt()),null;var r=Od(e,t);if(e.tag!==0&&r===2){var n=Jp(e);n!==0&&(t=n,r=kg(e,n))}if(r===1)throw r=Ql,Na(e,0),ki(e,t),ur(e,rt()),r;if(r===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ha(e,nr,Fn),ur(e,rt()),null}function by(e,t){var r=je;je|=1;try{return e(t)}finally{je=r,je===0&&(to=rt()+500,Af&&Gi())}}function $a(e){Oi!==null&&Oi.tag===0&&!(je&6)&&Ks();var t=je;je|=1;var r=Hr.transition,n=Ee;try{if(Hr.transition=null,Ee=1,e)return e()}finally{Ee=n,Hr.transition=r,je=t,!(je&6)&&Gi()}}function wy(){pr=Ls.current,Be(Ls)}function Na(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,LL(r)),ot!==null)for(r=ot.return;r!==null;){var n=r;switch(ry(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&vd();break;case 3:Qs(),Be(lr),Be(Ht),dy();break;case 5:uy(n);break;case 4:Qs();break;case 13:Be(Ze);break;case 19:Be(Ze);break;case 10:sy(n.type._context);break;case 22:case 23:wy()}r=r.return}if(Pt=e,ot=e=zi(e.current,null),Lt=pr=t,pt=0,Ql=null,xy=If=Ra=0,nr=El=null,_a!==null){for(t=0;t<_a.length;t++)if(r=_a[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}_a=null}return e}function b2(e,t){do{var r=ot;try{if(ay(),Ju.current=kd,Pd){for(var n=qe.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Pd=!1}if(Ia=0,jt=ht=qe=null,Nl=!1,Yl=0,yy.current=null,r===null||r.return===null){pt=1,Ql=t,ot=null;break}e:{var a=e,o=r.return,c=r,d=t;if(t=Lt,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,h=c,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Gb(o);if(v!==null){v.flags&=-257,Yb(v,o,c,a,t),v.mode&1&&qb(a,f,t),t=v,d=f;var j=t.updateQueue;if(j===null){var w=new Set;w.add(d),t.updateQueue=w}else j.add(d);break e}else{if(!(t&1)){qb(a,f,t),jy();break e}d=Error(Q(426))}}else if(Ue&&c.mode&1){var P=Gb(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Yb(P,o,c,a,t),ny(eo(d,c));break e}}a=d=eo(d,c),pt!==4&&(pt=2),El===null?El=[a]:El.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var b=i2(a,d,t);Ub(a,b);break e;case 1:c=d;var x=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ri===null||!Ri.has(S)))){a.flags|=65536,t&=-t,a.lanes|=t;var O=a2(a,c,t);Ub(a,O);break e}}a=a.return}while(a!==null)}S2(r)}catch(N){t=N,ot===r&&r!==null&&(ot=r=r.return);continue}break}while(!0)}function w2(){var e=Nd.current;return Nd.current=kd,e===null?kd:e}function jy(){(pt===0||pt===3||pt===2)&&(pt=4),Pt===null||!(Ra&268435455)&&!(If&268435455)||ki(Pt,Lt)}function Od(e,t){var r=je;je|=2;var n=w2();(Pt!==e||Lt!==t)&&(Fn=null,Na(e,t));do try{aD();break}catch(i){b2(e,i)}while(!0);if(ay(),je=r,Nd.current=n,ot!==null)throw Error(Q(261));return Pt=null,Lt=0,pt}function aD(){for(;ot!==null;)j2(ot)}function sD(){for(;ot!==null&&!TM();)j2(ot)}function j2(e){var t=k2(e.alternate,e,pr);e.memoizedProps=e.pendingProps,t===null?S2(e):ot=t,yy.current=null}function S2(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=QL(r,t),r!==null){r.flags&=32767,ot=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pt=6,ot=null;return}}else if(r=JL(r,t,pr),r!==null){ot=r;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);pt===0&&(pt=5)}function ha(e,t,r){var n=Ee,i=Hr.transition;try{Hr.transition=null,Ee=1,oD(e,t,r,n)}finally{Hr.transition=i,Ee=n}return null}function oD(e,t,r,n){do Ks();while(Oi!==null);if(je&6)throw Error(Q(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(FM(e,a),e===Pt&&(ot=Pt=null,Lt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wu||(wu=!0,N2(dd,function(){return Ks(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Hr.transition,Hr.transition=null;var o=Ee;Ee=1;var c=je;je|=4,yy.current=null,tD(e,r),y2(r,e),NL(ig),hd=!!ng,ig=ng=null,e.current=r,rD(r),AM(),je=c,Ee=o,Hr.transition=a}else e.current=r;if(wu&&(wu=!1,Oi=e,Ed=i),a=e.pendingLanes,a===0&&(Ri=null),DM(r.stateNode),ur(e,rt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Cd)throw Cd=!1,e=Sg,Sg=null,e;return Ed&1&&e.tag!==0&&Ks(),a=e.pendingLanes,a&1?e===Pg?Ol++:(Ol=0,Pg=e):Ol=0,Gi(),null}function Ks(){if(Oi!==null){var e=iP(Ed),t=Hr.transition,r=Ee;try{if(Hr.transition=null,Ee=16>e?16:e,Oi===null)var n=!1;else{if(e=Oi,Oi=null,Ed=0,je&6)throw Error(Q(331));var i=je;for(je|=4,ne=e.current;ne!==null;){var a=ne,o=a.child;if(ne.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var f=c[d];for(ne=f;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:Cl(8,h,a)}var m=h.child;if(m!==null)m.return=h,ne=m;else for(;ne!==null;){h=ne;var g=h.sibling,v=h.return;if(p2(h),h===f){ne=null;break}if(g!==null){g.return=v,ne=g;break}ne=v}}}var j=a.alternate;if(j!==null){var w=j.child;if(w!==null){j.child=null;do{var P=w.sibling;w.sibling=null,w=P}while(w!==null)}}ne=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ne=o;else e:for(;ne!==null;){if(a=ne,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Cl(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,ne=b;break e}ne=a.return}}var x=e.current;for(ne=x;ne!==null;){o=ne;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ne=S;else e:for(o=x;ne!==null;){if(c=ne,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Df(9,c)}}catch(N){Je(c,c.return,N)}if(c===o){ne=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,ne=O;break e}ne=c.return}}if(je=i,Gi(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Nf,e)}catch{}n=!0}return n}finally{Ee=r,Hr.transition=t}}return!1}function cw(e,t,r){t=eo(r,t),t=i2(e,t,1),e=Ii(e,t,1),t=Xt(),e!==null&&(gc(e,1,t),ur(e,t))}function Je(e,t,r){if(e.tag===3)cw(e,e,r);else for(;t!==null;){if(t.tag===3){cw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ri===null||!Ri.has(n))){e=eo(r,e),e=a2(t,e,1),t=Ii(t,e,1),e=Xt(),t!==null&&(gc(t,1,e),ur(t,e));break}}t=t.return}}function lD(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Xt(),e.pingedLanes|=e.suspendedLanes&r,Pt===e&&(Lt&r)===r&&(pt===4||pt===3&&(Lt&130023424)===Lt&&500>rt()-_y?Na(e,0):xy|=r),ur(e,t)}function P2(e,t){t===0&&(e.mode&1?(t=fu,fu<<=1,!(fu&130023424)&&(fu=4194304)):t=1);var r=Xt();e=ti(e,t),e!==null&&(gc(e,t,r),ur(e,r))}function cD(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),P2(e,r)}function uD(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(t),P2(e,r)}var k2;k2=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||lr.current)sr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return sr=!1,XL(e,t,r);sr=!!(e.flags&131072)}else sr=!1,Ue&&t.flags&1048576&&OP(t,_d,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ed(e,t),e=t.pendingProps;var i=Ys(t,Ht.current);Hs(t,r),i=hy(null,t,n,e,i,r);var a=my();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cr(n)?(a=!0,yd(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ly(t),i.updater=Lf,t.stateNode=i,i._reactInternals=t,hg(t,n,e,r),t=gg(null,t,n,!0,a,r)):(t.tag=0,Ue&&a&&ty(t),qt(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ed(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=fD(n),e=nn(n,e),i){case 0:t=pg(null,t,n,e,r);break e;case 1:t=Qb(null,t,n,e,r);break e;case 11:t=Xb(null,t,n,e,r);break e;case 14:t=Jb(null,t,n,nn(n.type,e),r);break e}throw Error(Q(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:nn(n,i),pg(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:nn(n,i),Qb(e,t,n,i,r);case 3:e:{if(c2(t),e===null)throw Error(Q(387));n=t.pendingProps,a=t.memoizedState,i=a.element,IP(e,t),jd(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=eo(Error(Q(423)),t),t=ew(e,t,n,r,i);break e}else if(n!==i){i=eo(Error(Q(424)),t),t=ew(e,t,n,r,i);break e}else for(yr=Di(t.stateNode.containerInfo.firstChild),xr=t,Ue=!0,on=null,r=LP(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xs(),n===i){t=ri(e,t,r);break e}qt(e,t,n,r)}t=t.child}return t;case 5:return RP(t),e===null&&ug(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,ag(n,i)?o=null:a!==null&&ag(n,a)&&(t.flags|=32),l2(e,t),qt(e,t,o,r),t.child;case 6:return e===null&&ug(t),null;case 13:return u2(e,t,r);case 4:return cy(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Js(t,null,n,r):qt(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:nn(n,i),Xb(e,t,n,i,r);case 7:return qt(e,t,t.pendingProps,r),t.child;case 8:return qt(e,t,t.pendingProps.children,r),t.child;case 12:return qt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Re(bd,n._currentValue),n._currentValue=o,a!==null)if(mn(a.value,o)){if(a.children===i.children&&!lr.current){t=ri(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var d=c.firstContext;d!==null;){if(d.context===n){if(a.tag===1){d=Yn(-1,r&-r),d.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?d.next=d:(d.next=h.next,h.next=d),f.pending=d}}a.lanes|=r,d=a.alternate,d!==null&&(d.lanes|=r),dg(a.return,r,t),c.lanes|=r;break}d=d.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Q(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),dg(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}qt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Hs(t,r),i=Kr(i),n=n(i),t.flags|=1,qt(e,t,n,r),t.child;case 14:return n=t.type,i=nn(n,t.pendingProps),i=nn(n.type,i),Jb(e,t,n,i,r);case 15:return s2(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:nn(n,i),ed(e,t),t.tag=1,cr(n)?(e=!0,yd(t)):e=!1,Hs(t,r),n2(t,n,i),hg(t,n,i,r),gg(null,t,n,!0,e,r);case 19:return d2(e,t,r);case 22:return o2(e,t,r)}throw Error(Q(156,t.tag))};function N2(e,t){return eP(e,t)}function dD(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,r,n){return new dD(e,t,r,n)}function Sy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fD(e){if(typeof e=="function")return Sy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wv)return 11;if(e===Hv)return 14}return 2}function zi(e,t){var r=e.alternate;return r===null?(r=Ur(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function nd(e,t,r,n,i,a){var o=2;if(n=e,typeof e=="function")Sy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ss:return Ca(r.children,i,a,t);case Uv:o=8,i|=8;break;case Rp:return e=Ur(12,r,t,i|2),e.elementType=Rp,e.lanes=a,e;case $p:return e=Ur(13,r,t,i),e.elementType=$p,e.lanes=a,e;case zp:return e=Ur(19,r,t,i),e.elementType=zp,e.lanes=a,e;case RS:return Rf(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case DS:o=10;break e;case IS:o=9;break e;case Wv:o=11;break e;case Hv:o=14;break e;case xi:o=16,n=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=Ur(o,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function Ca(e,t,r,n){return e=Ur(7,e,n,t),e.lanes=r,e}function Rf(e,t,r,n){return e=Ur(22,e,n,t),e.elementType=RS,e.lanes=r,e.stateNode={isHidden:!1},e}function Gm(e,t,r){return e=Ur(6,e,null,t),e.lanes=r,e}function Ym(e,t,r){return t=Ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hD(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Om(0),this.expirationTimes=Om(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Om(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Py(e,t,r,n,i,a,o,c,d){return e=new hD(e,t,r,c,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ur(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ly(a),e}function mD(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:js,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function C2(e){if(!e)return Hi;e=e._reactInternals;e:{if(qa(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(cr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var r=e.type;if(cr(r))return CP(e,r,t)}return t}function E2(e,t,r,n,i,a,o,c,d){return e=Py(r,n,!0,e,i,a,o,c,d),e.context=C2(null),r=e.current,n=Xt(),i=$i(r),a=Yn(n,i),a.callback=t??null,Ii(r,a,i),e.current.lanes=i,gc(e,i,n),ur(e,n),e}function $f(e,t,r,n){var i=t.current,a=Xt(),o=$i(i);return r=C2(r),t.context===null?t.context=r:t.pendingContext=r,t=Yn(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ii(i,t,o),e!==null&&(hn(e,i,o,a),Xu(e,i,o)),o}function Td(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ky(e,t){uw(e,t),(e=e.alternate)&&uw(e,t)}function pD(){return null}var O2=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ny(e){this._internalRoot=e}zf.prototype.render=Ny.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));$f(e,t,null,null)};zf.prototype.unmount=Ny.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$a(function(){$f(null,e,null,null)}),t[ei]=null}};function zf(e){this._internalRoot=e}zf.prototype.unstable_scheduleHydration=function(e){if(e){var t=oP();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Pi.length&&t!==0&&t<Pi[r].priority;r++);Pi.splice(r,0,e),r===0&&cP(e)}};function Cy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dw(){}function gD(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var f=Td(o);a.call(f)}}var o=E2(t,n,e,0,null,!1,!1,"",dw);return e._reactRootContainer=o,e[ei]=o.current,Kl(e.nodeType===8?e.parentNode:e),$a(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var c=n;n=function(){var f=Td(d);c.call(f)}}var d=Py(e,0,!1,null,null,!1,!1,"",dw);return e._reactRootContainer=d,e[ei]=d.current,Kl(e.nodeType===8?e.parentNode:e),$a(function(){$f(t,d,r,n)}),d}function Ff(e,t,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var d=Td(o);c.call(d)}}$f(t,o,e,i)}else o=gD(r,t,e,i,n);return Td(o)}aP=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ml(t.pendingLanes);r!==0&&(Vv(t,r|1),ur(t,rt()),!(je&6)&&(to=rt()+500,Gi()))}break;case 13:$a(function(){var n=ti(e,1);if(n!==null){var i=Xt();hn(n,e,1,i)}}),ky(e,1)}};qv=function(e){if(e.tag===13){var t=ti(e,134217728);if(t!==null){var r=Xt();hn(t,e,134217728,r)}ky(e,134217728)}};sP=function(e){if(e.tag===13){var t=$i(e),r=ti(e,t);if(r!==null){var n=Xt();hn(r,e,t,n)}ky(e,t)}};oP=function(){return Ee};lP=function(e,t){var r=Ee;try{return Ee=e,t()}finally{Ee=r}};Gp=function(e,t,r){switch(t){case"input":if(Up(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Tf(n);if(!i)throw Error(Q(90));zS(n),Up(n,i)}}}break;case"textarea":FS(e,r);break;case"select":t=r.value,t!=null&&Bs(e,!!r.multiple,t,!1)}};qS=by;GS=$a;var vD={usingClientEntryPoint:!1,Events:[yc,Cs,Tf,ZS,VS,by]},rl={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yD={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=JS(e),e===null?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||pD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{Nf=ju.inject(yD),Nn=ju}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vD;kr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cy(t))throw Error(Q(200));return mD(e,t,null,r)};kr.createRoot=function(e,t){if(!Cy(e))throw Error(Q(299));var r=!1,n="",i=O2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Py(e,1,!1,null,null,r,!1,n,i),e[ei]=t.current,Kl(e.nodeType===8?e.parentNode:e),new Ny(t)};kr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=JS(t),e=e===null?null:e.stateNode,e};kr.flushSync=function(e){return $a(e)};kr.hydrate=function(e,t,r){if(!Bf(t))throw Error(Q(200));return Ff(null,e,t,!0,r)};kr.hydrateRoot=function(e,t,r){if(!Cy(e))throw Error(Q(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=O2;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=E2(t,null,e,1,r??null,i,!1,a,o),e[ei]=t.current,Kl(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new zf(t)};kr.render=function(e,t,r){if(!Bf(t))throw Error(Q(200));return Ff(null,e,t,!1,r)};kr.unmountComponentAtNode=function(e){if(!Bf(e))throw Error(Q(40));return e._reactRootContainer?($a(function(){Ff(null,null,e,!1,function(){e._reactRootContainer=null,e[ei]=null})}),!0):!1};kr.unstable_batchedUpdates=by;kr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Bf(r))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Ff(e,t,r,!1,n)};kr.version="18.3.1-next-f1338f8080-20240426";function T2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T2)}catch(e){console.error(e)}}T2(),TS.exports=kr;var Uf=TS.exports,A2,fw=Uf;A2=fw.createRoot,fw.hydrateRoot;const Xm=new Date().toISOString().slice(0,10),Jm=e=>{const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().slice(0,10)};function Tn(){return crypto.randomUUID()}function Ne(){return new Date().toISOString()}const Cg=[{id:"550e8400-e29b-41d4-a716-446655440001",email:"dr.smith@hospital.com",password:"password321",full_name:"Dr. Sarah Smith",role:"doctor",created_at:"2024-01-15T08:00:00Z"},{id:"550e8400-e29b-41d4-a716-446655440002",email:"john.doe@email.com",password:"password321",full_name:"John Doe",role:"patient",created_at:"2024-01-16T09:30:00Z"},{id:"550e8400-e29b-41d4-a716-446655440003",email:"volunteer@hospital.com",password:"password321",full_name:"Maria Garcia",role:"volunteer",created_at:"2024-01-17T10:15:00Z"},{id:"550e8400-e29b-41d4-a716-446655440004",email:"jane.wilson@email.com",password:"password321",full_name:"Jane Wilson",role:"patient",created_at:"2024-01-18T11:00:00Z"},{id:"550e8400-e29b-41d4-a716-446655440005",email:"dr.johnson@hospital.com",password:"password321",full_name:"Dr. Michael Johnson",role:"doctor",created_at:"2024-01-19T07:45:00Z"}],xD=[{id:"patient-3",user_id:"user-6",name:"Robert Chen",doe:"2024-01-10",gender:"male",address:"789 Pine Street, Springfield, IL 62703",caregivers_contact:"Linda Chen - (555) 456-7890",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-24",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-009876",lat:13.804,lng:100.326,phone_number:"+66 80 777 8899",patient_categories:{critical:!0,elderly:!0,pregnant:!1},personal_health_history:"History of heart disease, stroke in 2019, diabetes since 2015",doctor_diagnosed:"Congestive Heart Failure, Type 2 Diabetes, Hypertension",medications_history:"Metoprolol 50mg daily, Lisinopril 20mg daily, Insulin glargine",food_allergies:"Dairy products",medication_allergies:"Sulfa drugs",height:"168 cm",weight:"85 kg",bmi:"30.1",temperature:"99.2°F",pulse:"88 bpm",blood_pressure:"145/92 mmHg",diabetes:"Type 2 - HbA1c: 8.1%",mental_health_status:"Mild depression, receiving counseling",other_symptoms:"Shortness of breath, swelling in legs",pregnancy_details:"N/A",smoker:!0,doctors_note:"Critical patient requiring close monitoring. Heart failure symptoms worsening.",created_by:"user-1",created_at:"2024-01-15T11:20:00Z",updated_at:"2024-01-26T14:30:00Z"},{id:"patient-11",user_id:"user-14",name:"Olivia Brown",doe:"2025-08-15",gender:"female",address:"22 Meadow Ln, Springfield, IL 62701",caregivers_contact:"Mark Brown - (555) 777-8899",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2025-09-25",today_date:"2025-09-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-202509-01",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2025-09-20",personal_health_history:"Uncomplicated pregnancy and delivery",doctor_diagnosed:"Postpartum recovery",medications_history:"Prenatal vitamins",food_allergies:"None known",medication_allergies:"None known",height:"165 cm",weight:"68 kg",bmi:"25.0",temperature:"98.6°F",pulse:"76 bpm",blood_pressure:"118/76 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Mild fatigue",pregnancy_details:"Delivered a healthy baby",smoker:!1,doctors_note:"Routine postpartum follow-up in 6 weeks",created_by:"user-5",created_at:"2025-09-21T10:00:00Z",updated_at:"2025-09-26T09:00:00Z"},{id:"patient-12",user_id:"user-15",name:"Ava Nguyen",doe:"2025-08-28",gender:"female",address:"90 Hillcrest Rd, Springfield, IL 62702",caregivers_contact:"Tom Nguyen - (555) 222-3344",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2025-09-24",today_date:"2025-09-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-202509-02",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2025-08-30",personal_health_history:"Gestational diabetes, controlled",doctor_diagnosed:"Postpartum monitoring",medications_history:"Insulin during pregnancy",food_allergies:"None",medication_allergies:"None",height:"162 cm",weight:"67 kg",bmi:"25.5",temperature:"98.4°F",pulse:"74 bpm",blood_pressure:"120/78 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"None",pregnancy_details:"Delivered a healthy baby",smoker:!1,doctors_note:"Blood sugar normalized postpartum",created_by:"user-5",created_at:"2025-09-01T11:00:00Z",updated_at:"2025-09-26T08:30:00Z"},{id:"patient-9",user_id:"user-12",name:"Sofia Martinez",doe:"2024-01-18",gender:"female",address:"12 River Park, Springfield, IL 62701",caregivers_contact:"Daniel Martinez - (555) 111-2233",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-889900",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2024-01-20",personal_health_history:"Healthy pregnancy, normal delivery",doctor_diagnosed:"Postpartum recovery",medications_history:"Prenatal vitamins, iron supplements",food_allergies:"None known",medication_allergies:"None known",height:"164 cm",weight:"66 kg",bmi:"24.5",temperature:"98.6°F",pulse:"76 bpm",blood_pressure:"120/78 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Mild fatigue",pregnancy_details:"Delivered a healthy baby boy",smoker:!1,doctors_note:"Recovering well postpartum. Routine follow-up in 6 weeks.",created_by:"user-5",created_at:"2024-01-20T12:30:00Z",updated_at:"2024-01-26T09:30:00Z"},{id:"patient-10",user_id:"user-13",name:"Hannah Lee",doe:"2023-12-28",gender:"female",address:"98 Lake View, Springfield, IL 62702",caregivers_contact:"Eric Lee - (555) 333-4455",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-991122",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2023-12-30",personal_health_history:"Gestational hypertension in late pregnancy",doctor_diagnosed:"Postpartum monitoring",medications_history:"Labetalol during pregnancy",food_allergies:"None known",medication_allergies:"None known",height:"168 cm",weight:"70 kg",bmi:"24.8",temperature:"98.4°F",pulse:"74 bpm",blood_pressure:"124/80 mmHg",diabetes:"None",mental_health_status:"Some anxiety, improving",other_symptoms:"Occasional headaches",pregnancy_details:"Delivered a healthy baby girl",smoker:!1,doctors_note:"BP stable postpartum. Continue monitoring.",created_by:"user-5",created_at:"2024-01-01T11:20:00Z",updated_at:"2024-01-26T10:10:00Z"},{id:"patient-4",user_id:"user-7",name:"Emily Rodriguez",doe:"2024-01-12",gender:"female",address:"321 Oak Drive, Springfield, IL 62704",caregivers_contact:"Carlos Rodriguez - (555) 234-5678",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-112233",lat:13.786,lng:100.317,phone_number:"+66 80 222 3344",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-04-02",personal_health_history:"Second pregnancy, first child born healthy in 2020",doctor_diagnosed:"Pregnancy - 32 weeks, Mild Anemia",medications_history:"Prenatal vitamins, Iron supplements",food_allergies:"None known",medication_allergies:"None known",height:"162 cm",weight:"72 kg",bmi:"27.4",temperature:"98.2°F",pulse:"82 bpm",blood_pressure:"125/78 mmHg",diabetes:"None",mental_health_status:"Good, excited about pregnancy",other_symptoms:"Mild fatigue, occasional heartburn",pregnancy_details:"32 weeks gestation, estimated due date: April 2, 2024. Baby developing normally, mild anemia being treated.",smoker:!1,doctors_note:"Pregnancy progressing well. Monitor iron levels and continue supplements.",created_by:"user-5",created_at:"2024-01-16T09:45:00Z",updated_at:"2024-01-26T10:15:00Z"},{id:"patient-5",user_id:"user-8",name:"Michael Thompson",doe:"2024-01-08",gender:"male",address:"654 Maple Avenue, Springfield, IL 62705",caregivers_contact:"Sarah Thompson - (555) 345-6789",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-445566",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"Generally healthy, occasional sports injuries",doctor_diagnosed:"Acute Bronchitis, Seasonal Allergies",medications_history:"Albuterol inhaler as needed, Claritin during allergy season",food_allergies:"None known",medication_allergies:"None known",height:"180 cm",weight:"75 kg",bmi:"23.1",temperature:"98.8°F",pulse:"68 bpm",blood_pressure:"118/72 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Persistent cough, mild congestion",pregnancy_details:"N/A",smoker:!1,doctors_note:"Recovering from bronchitis. Should improve with current treatment.",created_by:"user-1",created_at:"2024-01-12T13:30:00Z",updated_at:"2024-01-26T16:20:00Z"},{id:"patient-6",user_id:"user-9",name:"Margaret Foster",doe:"2024-01-05",gender:"female",address:"987 Cedar Lane, Springfield, IL 62706",caregivers_contact:"David Foster - (555) 567-8901",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-778899",patient_categories:{critical:!1,elderly:!0,pregnant:!1},personal_health_history:"Osteoporosis, mild cognitive decline, history of falls",doctor_diagnosed:"Osteoporosis, Mild Dementia, Hypertension",medications_history:"Alendronate weekly, Amlodipine 5mg daily, Donepezil 10mg daily",food_allergies:"None known",medication_allergies:"Aspirin",height:"155 cm",weight:"58 kg",bmi:"24.1",temperature:"98.4°F",pulse:"76 bpm",blood_pressure:"138/82 mmHg",diabetes:"None",mental_health_status:"Mild anxiety, some confusion",other_symptoms:"Occasional dizziness, memory issues",pregnancy_details:"N/A",smoker:!1,doctors_note:"Stable condition. Family support is excellent. Continue current medications.",created_by:"user-5",created_at:"2024-01-10T08:15:00Z",updated_at:"2024-01-26T11:45:00Z"},{id:"patient-7",user_id:"user-10",name:"James Patterson",doe:"2024-01-14",gender:"male",address:"147 Birch Street, Springfield, IL 62707",caregivers_contact:"Helen Patterson - (555) 678-9012",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-334455",patient_categories:{critical:!0,elderly:!0,pregnant:!1},personal_health_history:"COPD, former heavy smoker, multiple hospitalizations",doctor_diagnosed:"Chronic Obstructive Pulmonary Disease (COPD), Chronic Kidney Disease",medications_history:"Tiotropium inhaler daily, Prednisone 10mg daily, Furosemide 40mg daily",food_allergies:"None known",medication_allergies:"Penicillin, Codeine",height:"175 cm",weight:"62 kg",bmi:"20.2",temperature:"99.4°F",pulse:"92 bpm",blood_pressure:"152/88 mmHg",diabetes:"None",mental_health_status:"Moderate depression due to chronic illness",other_symptoms:"Severe shortness of breath, chronic fatigue, frequent coughing",pregnancy_details:"N/A",smoker:!1,doctors_note:"Critical patient with advanced COPD. Requires frequent monitoring and possible hospitalization.",created_by:"user-1",created_at:"2024-01-18T15:20:00Z",updated_at:"2024-01-26T17:10:00Z"},{id:"patient-8",user_id:"user-11",name:"Lisa Wang",doe:"2024-01-20",gender:"female",address:"258 Elm Court, Springfield, IL 62708",caregivers_contact:"Kevin Wang - (555) 789-0123",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-556677",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-05-20",personal_health_history:"First pregnancy, generally healthy",doctor_diagnosed:"Pregnancy - 24 weeks, Gestational Hypertension",medications_history:"Prenatal vitamins, Labetalol 200mg twice daily",food_allergies:"Shellfish",medication_allergies:"None known",height:"158 cm",weight:"65 kg",bmi:"26.0",temperature:"98.6°F",pulse:"85 bpm",blood_pressure:"142/85 mmHg",diabetes:"None",mental_health_status:"Some anxiety about pregnancy complications",other_symptoms:"Mild headaches, swelling in hands and feet",pregnancy_details:"24 weeks gestation, estimated due date: May 20, 2024. Developing gestational hypertension, requires close monitoring.",smoker:!1,doctors_note:"Monitor blood pressure closely. May need to consider early delivery if hypertension worsens.",created_by:"user-5",created_at:"2024-01-22T12:30:00Z",updated_at:"2024-01-26T13:45:00Z"}],_D=[{id:"patient-1",user_id:"user-2",name:"John Doe",doe:"2024-01-15",gender:"male",address:"123 Main Street, Springfield, IL 62701",caregivers_contact:"Mary Doe - (555) 123-4567",assigned_doctor:"Dr. Sarah Smith - (111) 123-4567",last_record_date:"2024-01-20",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia - (111) 123-4567",medical_record_number:"MRN-001234",lat:13.7992,lng:100.3195,phone_number:"+66 80 111 2233",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"Family history of cardiovascular disease. Previous surgery for appendectomy in 2010.",doctor_diagnosed:"Hypertension, Type 2 Diabetes Mellitus",medications_history:"Lisinopril 10mg daily since 2020, Metformin 500mg twice daily since 2021",food_allergies:"Shellfish, Nuts",medication_allergies:"Penicillin",height:"175 cm",weight:"80 kg",bmi:"26.1",temperature:"98.6°F",pulse:"72 bpm",blood_pressure:"130/85 mmHg",diabetes:"Type 2 - HbA1c: 7.2%",mental_health_status:"Stable, no current concerns",other_symptoms:"Occasional headaches, mild fatigue",pregnancy_details:"N/A",smoker:!1,doctors_note:"Patient shows good compliance with medication. Blood pressure slightly elevated, recommend lifestyle modifications and regular monitoring.",created_by:"user-1",created_at:"2024-01-20T14:30:00Z",updated_at:"2024-01-25T16:45:00Z"},{id:"patient-2",user_id:"user-4",name:"Jane Wilson",doe:"2024-01-18",gender:"female",address:"456 Oak Avenue, Springfield, IL 62702",caregivers_contact:"Robert Wilson - (555) 987-6543",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-005678",lat:13.7901,lng:100.3282,phone_number:"+66 80 444 5566",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-03-15",personal_health_history:"No significant past medical history. First pregnancy.",doctor_diagnosed:"Gestational Diabetes, Pregnancy - 28 weeks",medications_history:"Prenatal vitamins, Insulin as needed for glucose control",food_allergies:"None known",medication_allergies:"None known",height:"165 cm",weight:"68 kg",bmi:"25.0",temperature:"98.4°F",pulse:"78 bpm",blood_pressure:"118/75 mmHg",diabetes:"Gestational - Fasting glucose: 95 mg/dL",mental_health_status:"Mild anxiety related to pregnancy, receiving counseling",other_symptoms:"Morning sickness (resolved), mild back pain",pregnancy_details:"28 weeks gestation, estimated due date: March 15, 2024. Regular prenatal checkups, baby developing normally.",smoker:!1,doctors_note:"Pregnancy progressing well. Gestational diabetes well controlled with diet and occasional insulin. Continue regular monitoring.",created_by:"user-3",created_at:"2024-01-21T10:15:00Z",updated_at:"2024-01-26T09:20:00Z"},{name:"Zach",doe:"2025-09-25",gender:"male",address:"Bangkok",caregivers_contact:"111",assigned_doctor:"Strange",last_record_date:"2025-09-25",today_date:"2025-09-25",assigned_vhv_name:"Ironman",medical_record_number:"12345",patient_categories:{critical:!1,elderly:!0,pregnant:!1},personal_health_history:"Good Healthy",doctor_diagnosed:"Lack of sleep",medications_history:"Sleeping pills",food_allergies:"prawns",medication_allergies:"none",height:"170cm",weight:"70kg",bmi:"22.9",temperature:"98.6",pulse:"72",blood_pressure:"120/80",diabetes:"Type2",mental_health_status:"Sound Mind",other_symptoms:"Dream walking",pregnancy_details:"",smoker:!1,doctors_note:"Good To Go",created_by:"user-1",user_id:"user-1",id:"id-uqy6ynvpa",created_at:"2025-09-24T18:14:30.861Z",updated_at:"2025-09-24T18:16:35.460Z"},...xD],bD=[{id:"task-1",title:"Follow-up Blood Pressure Check",description:"Schedule and conduct follow-up blood pressure monitoring for patient John Doe. Check medication compliance and adjust dosage if necessary.",priority:"high",status:"pending",assigned_to:"user-3",assigned_by:"user-1",patient_id:"patient-1",due_date:"2024-01-28",created_at:"2024-01-25T10:30:00Z",updated_at:"2024-01-25T10:30:00Z"},{id:"task-v1",title:"Home Visit - John Doe",description:"Check blood pressure, confirm medications, record vitals.",priority:"high",status:"pending",assigned_to:"user-3",assigned_by:"user-1",patient_id:"patient-1",due_date:Xm,created_at:Ne(),updated_at:Ne()},{id:"task-v2",title:"Follow-up Call - Jane Wilson",description:"Call to review glucose logs and confirm prenatal visit.",priority:"medium",status:"pending",assigned_to:"user-3",assigned_by:"user-5",patient_id:"patient-2",due_date:Xm,created_at:Ne(),updated_at:Ne()},{id:"task-v3",title:"Supply Check - Outreach Kits",description:"Verify stock of glucose strips and BP cuffs for field work.",priority:"low",status:"pending",assigned_to:"user-3",assigned_by:"user-1",due_date:Xm,created_at:Ne(),updated_at:Ne()},{id:"task-2",title:"Prenatal Care Coordination",description:"Coordinate prenatal care appointments and ensure all necessary tests are scheduled for Jane Wilson. Monitor gestational diabetes management.",priority:"urgent",status:"in_progress",assigned_to:"user-3",assigned_by:"user-5",patient_id:"patient-2",due_date:"2024-01-27",created_at:"2024-01-24T14:15:00Z",updated_at:"2024-01-26T09:45:00Z"},{id:"task-3",title:"Medication Inventory Check",description:"Review and update medication inventory. Ensure adequate stock of diabetes medications and blood pressure medications.",priority:"medium",status:"completed",assigned_to:"user-3",assigned_by:"user-1",due_date:"2024-01-26",created_at:"2024-01-23T08:00:00Z",updated_at:"2024-01-26T16:30:00Z",completed_at:"2024-01-26T16:30:00Z"},{id:"task-4",title:"Patient Education Session",description:"Conduct diabetes management education session for newly diagnosed patients. Prepare educational materials and schedule group session.",priority:"medium",status:"pending",assigned_to:"user-1",assigned_by:"user-5",due_date:"2024-01-30",created_at:"2024-01-25T11:00:00Z",updated_at:"2024-01-25T11:00:00Z"},{id:"appt-jd-1",title:"Clinic Visit - BP Review",description:"Follow-up on blood pressure and medication adherence.",priority:"medium",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:Jm(3),created_at:Ne(),updated_at:Ne()},{id:"appt-jd-2",title:"Lab Results Discussion",description:"Discuss recent lab results and adjust care plan as needed.",priority:"low",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:Jm(10),created_at:Ne(),updated_at:Ne()},{id:"appt-jd-overdue",title:"Missed Appointment - Check-in",description:"Reschedule missed appointment and check symptoms.",priority:"high",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:Jm(-2),created_at:Ne(),updated_at:Ne()}],wD=[{id:"msg-1",sender_id:"user-1",recipient_id:"user-2",subject:"Follow-up Appointment",content:"Hi John, I wanted to follow up on your recent blood pressure readings. Please schedule an appointment for next week.",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-25T09:30:00Z"},{id:"msg-2",sender_id:"user-2",recipient_id:"user-1",subject:"Re: Follow-up Appointment",content:"Thank you Dr. Smith. I will call the office today to schedule the appointment.",image_url:void 0,image_name:void 0,is_read:!0,created_at:"2024-01-25T14:15:00Z"},{id:"msg-3",sender_id:"user-3",recipient_id:"user-4",subject:"Medication Reminder",content:"Hi Jane, this is a friendly reminder to take your evening insulin. Let me know if you have any questions!",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-26T19:00:00Z"},{id:"msg-4",sender_id:"user-5",recipient_id:"user-2",subject:"Lab Results Available",content:"Your recent lab results are now available. Overall looking good, but we should discuss a few items at your next visit.",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-26T11:30:00Z"}],jD=[{id:"ann-1",title:"New Health Guidelines",content:"Please note the updated health and safety guidelines for patient care. All staff should review the new protocols for infection control and patient interaction.",priority:"high",created_by:"user-1",created_at:"2024-01-25T08:00:00Z",updated_at:"2024-01-25T08:00:00Z"},{id:"ann-2",title:"Medication Inventory Update",content:"The medication inventory has been updated. Please check the new stock levels and report any shortages immediately.",priority:"medium",created_by:"user-5",created_at:"2024-01-24T14:30:00Z",updated_at:"2024-01-24T14:30:00Z"},{id:"ann-3",title:"Emergency Contact Information",content:"Updated emergency contact information has been distributed. Please ensure all patients have current emergency contacts on file.",priority:"urgent",created_by:"user-1",created_at:"2024-01-26T10:15:00Z",updated_at:"2024-01-26T10:15:00Z"}],SD=[{id:"record-1",patient_id:"patient-1",recorded_by:"user-2",record_date:"2024-01-26",temperature:"98.6°F",pulse:"75 bpm",blood_pressure:"128/82 mmHg",weight:"79.5 kg",blood_sugar:"110 mg/dL",pain_level:3,fatigue_level:4,mood:"good",appetite:"good",sleep_quality:"fair",symptoms_description:"Mild headache in the morning, feeling better now",medications_taken:"Lisinopril 10mg, Metformin 500mg",activities:"Light walking for 30 minutes",notes:"Feeling overall better than yesterday",created_at:"2024-01-26T08:30:00Z",updated_at:"2024-01-26T08:30:00Z"},{id:"record-2",patient_id:"patient-2",recorded_by:"user-4",record_date:"2024-01-26",temperature:"98.4°F",pulse:"80 bpm",blood_pressure:"115/70 mmHg",weight:"68.2 kg",blood_sugar:"92 mg/dL",pain_level:2,fatigue_level:3,mood:"excellent",appetite:"excellent",sleep_quality:"good",symptoms_description:"Baby is very active today, no morning sickness",medications_taken:"Prenatal vitamins",activities:"Prenatal yoga, light housework",notes:"Feeling great, baby movements are strong",created_at:"2024-01-26T09:15:00Z",updated_at:"2024-01-26T09:15:00Z"},{id:"record-3",patient_id:"patient-1",recorded_by:"user-2",record_date:"2024-01-25",temperature:"99.1°F",pulse:"78 bpm",blood_pressure:"132/85 mmHg",weight:"80 kg",blood_sugar:"125 mg/dL",pain_level:5,fatigue_level:6,mood:"fair",appetite:"poor",sleep_quality:"poor",symptoms_description:"Persistent headache, feeling tired",medications_taken:"Lisinopril 10mg, Metformin 500mg, Tylenol for headache",activities:"Mostly resting",notes:"Not feeling well today, headache is bothering me",created_at:"2024-01-25T19:00:00Z",updated_at:"2024-01-25T19:00:00Z"}],M2=[{id:"loc-v-1",type:"volunteer",name:"Maria Garcia (Volunteer)",lat:13.8005,lng:100.3231,address:"Near Salaya Market",user_id:"user-3"},{id:"loc-v-2",type:"volunteer",name:"Volunteer Team A",lat:13.7892,lng:100.3148,address:"Phutthamonthon Sai 4",phone:"+66 2 123 4567"},{id:"loc-v-3",type:"volunteer",name:"Volunteer Team B",lat:13.784,lng:100.3295,address:"Salaya Station",phone:"+66 2 765 4321"},{id:"loc-c-1",type:"center",name:"Community Health Center - Salaya",lat:13.7963,lng:100.3127,address:"Salaya Rd",phone:"+66 2 555 0101"},{id:"loc-c-2",type:"center",name:"Phutthamonthon Health Center",lat:13.8048,lng:100.3342,address:"Phutthamonthon",phone:"+66 2 555 0202"},{id:"loc-h-1",type:"hospital",name:"Nakhon Pathom Hospital (Annex)",lat:13.7769,lng:100.3186,address:"Near Salaya",phone:"+66 2 555 0303"}],L2=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),PD=()=>{var t;const e="medical_portal_session";try{const r=localStorage.getItem(e);if(r){const n=JSON.parse(r);if((t=n==null?void 0:n.user)!=null&&t.id&&!L2(n.user.id))return console.warn("Detected invalid user ID format in session. Clearing..."),localStorage.removeItem(e),!0}}catch(r){console.error("Error validating session:",r)}return!1},wa="medical_portal_session",D2="dummyUsers",kD=e=>{try{localStorage.setItem(D2,JSON.stringify(e))}catch(t){console.error("Error saving users to localStorage:",t)}},ND=()=>{try{const e=localStorage.getItem(D2);return e?JSON.parse(e):[...Cg]}catch(e){return console.error("Error loading users from localStorage:",e),[...Cg]}};let Bi=ND();const CD=async(e,t,r,n)=>{if(Bi.find(c=>c.email===e))return{data:null,error:{message:"User already exists with this email"}};const a={id:Tn(),email:e,password:t,full_name:r,role:n,created_at:Ne()};Bi.push(a),kD(Bi);const o={user:a,token:Tn(),expires_at:new Date(Date.now()+24*60*60*1e3).toISOString()};return localStorage.setItem(wa,JSON.stringify(o)),{data:{user:a,session:o},error:null}},ED=async(e,t)=>{const r=Bi.find(i=>i.email===e&&i.password===t);if(!r)return{data:null,error:{message:"Invalid email or password"}};const n={user:r,token:Tn(),expires_at:new Date(Date.now()+24*60*60*1e3).toISOString()};return localStorage.setItem(wa,JSON.stringify(n)),{data:{user:r,session:n},error:null}},OD=async()=>(localStorage.removeItem(wa),{error:null}),TD=()=>{const e=localStorage.getItem(wa);if(!e)return null;try{const t=JSON.parse(e);return new Date(t.expires_at)<new Date?(localStorage.removeItem(wa),null):L2(t.user.id)?t:(console.warn("Invalid user ID format detected. Clearing session. Please log in again."),localStorage.removeItem(wa),null)}catch{return localStorage.removeItem(wa),null}},ro=e=>Bi.find(t=>t.id===e),Ey=async(e,t)=>{const r=Bi.findIndex(n=>n.id===e);if(r===-1)return{error:{message:"User not found"}};Bi[r].password=t||"";try{localStorage.setItem("dummyUsers",JSON.stringify(Bi))}catch{}return{error:null}},I2=_.createContext(void 0),Ye=()=>{const e=_.useContext(I2);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},AD=({children:e})=>{const[t,r]=_.useState(null),[n,i]=_.useState(null),[a,o]=_.useState(!0);_.useEffect(()=>{const m=TD();m&&(i(m),r(m.user)),o(!1)},[]);const h={user:t,session:n,loading:a,signUp:async(m,g,v,j)=>{const{data:w,error:P}=await CD(m,g,v,j);return w&&!P&&(i(w.session),r(w.user)),{data:w,error:P}},signIn:async(m,g)=>{const{data:v,error:j}=await ED(m,g);return v&&!j&&(i(v.session),r(v.user)),{data:v,error:j}},signOut:async()=>{const{error:m}=await OD();return m||(i(null),r(null)),{error:m}}};return l.jsx(I2.Provider,{value:h,children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(e,t)=>{const r=_.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:c="",children:d,...f},h)=>_.createElement("svg",{ref:h,...MD,width:i,height:i,stroke:n,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${LD(e)}`,c].join(" "),...f},[...t.map(([m,g])=>_.createElement(m,g)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=pe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=pe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=pe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=pe("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=pe("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=pe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=pe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=pe("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=pe("UserSearch",[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Kt=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t)),console.log(`📁 Data saved to LOCALSTORAGE with key: ${e}`,t.length||Object.keys(t).length),console.log("🔍 This data is stored in your BROWSER, not in actual files")}catch(r){console.error("Error saving to localStorage:",r)}},Yi=(e,t)=>{try{const r=localStorage.getItem(e),n=r?JSON.parse(r):t;return console.log(`📂 Data loaded from LOCALSTORAGE with key: ${e}`,n.length||Object.keys(n).length),console.log("🔍 This data comes from your BROWSER storage, not actual files"),n}catch(r){return console.error("Error loading from localStorage:",r),t}};let ar=Yi("dummyPatientProfiles",[..._D]),Ea=Yi("dummyMessages",[...wD]),lt=Yi("dummyUsers",[...Cg]),zr=Yi("dummyTasks",[...bD]),ln=Yi("dummyAnnouncements",[...jD]),cn=Yi("dummyDailyRecords",[...SD]),ZD=Yi("dummyLocations",[...M2]),gl=Yi("dummyVolunteers",[]);const VD=e=>{if(!e)return 0;const t=(e.match(/(\d+)/)||[])[1];return t?parseInt(t,10):0},qD=e=>`MRN-${String(e).padStart(6,"0")}`,U2=async()=>{await new Promise(t=>setTimeout(t,50));const e=ar.reduce((t,r)=>Math.max(t,VD(r.medical_record_number)),0);return qD(e+1)},GD=e=>`VHV-${String(e).padStart(6,"0")}`,jo=async()=>(await new Promise(e=>setTimeout(e,500)),{data:ar.map(e=>({...e,created_by_user:lt.find(t=>t.id===e.created_by)})),error:null}),YD=async e=>{await new Promise(r=>setTimeout(r,200));const t=ar.find(r=>(r.medical_record_number||"").toLowerCase()===(e||"").toLowerCase());return t?{data:t,error:null}:{data:null,error:{message:"No patient with that ID"}}},bc=async e=>{await new Promise(r=>setTimeout(r,300));const t=ar.find(r=>r.user_id===e);return t?{data:{...t,created_by_user:lt.find(r=>r.id===t.created_by)},error:null}:{data:null,error:{code:"PGRST116",message:"No profile found"}}},XD=async e=>{await new Promise(n=>setTimeout(n,400));let t=e.medical_record_number;t||(t=await U2());const r={...e,medical_record_number:t,id:Tn(),created_at:Ne(),updated_at:Ne()};return ar.push(r),Kt("dummyPatientProfiles",ar),{data:r,error:null}},JD=async(e,t)=>{await new Promise(n=>setTimeout(n,400));const r=ar.findIndex(n=>n.id===e);return r===-1?{data:null,error:{message:"Profile not found"}}:(ar[r]={...ar[r],...t,updated_at:Ne()},Kt("dummyPatientProfiles",ar),{data:ar[r],error:null})},Hf=async()=>{if(await new Promise(t=>setTimeout(t,200)),(gl||[]).length===0){const t=(lt||[]).filter(r=>r.role==="volunteer").map((r,n)=>{const i=(M2||[]).find(a=>a.user_id===r.id);return{id:Tn(),user_id:r.id,volunteer_code:GD(n+1),name:r.full_name,email:r.email,phone:void 0,address:i==null?void 0:i.address,lat:i==null?void 0:i.lat,lng:i==null?void 0:i.lng,created_at:Ne(),updated_at:Ne()}});t.length>0&&(gl=t,Kt("dummyVolunteers",gl))}return{data:gl.map(t=>({...t,user:lt.find(r=>r.id===t.user_id)})),error:null}},QD=async e=>{await new Promise(r=>setTimeout(r,150));const t=gl.find(r=>(r.volunteer_code||"").toLowerCase()===e.toLowerCase());return{data:t||null,error:t?null:{message:"Not found"}}},eI=async e=>(await new Promise(r=>setTimeout(r,400)),{data:Ea.filter(r=>r.sender_id===e||r.recipient_id===e).map(r=>({...r,sender:lt.find(n=>n.id===r.sender_id),recipient:lt.find(n=>n.id===r.recipient_id)})).sort((r,n)=>new Date(n.created_at).getTime()-new Date(r.created_at).getTime()),error:null}),Ay=async e=>{await new Promise(r=>setTimeout(r,300));const t={...e,id:Tn(),created_at:Ne()};return Ea.push(t),Kt("dummyMessages",Ea),console.log("💾 Message saved to BROWSER LOCALSTORAGE:",t),console.log("📊 Total messages in BROWSER storage:",Ea.length),console.log("⚠️  NOTE: Data is NOT saved to actual files, only in browser localStorage"),{data:t,error:null}},tI=async(e,t)=>{await new Promise(n=>setTimeout(n,200));const r=Ea.findIndex(n=>n.id===e&&n.recipient_id===t);return r!==-1&&(Ea[r].is_read=!0,Kt("dummyMessages",Ea)),{error:null}},Ga=async e=>(await new Promise(r=>setTimeout(r,300)),{data:e?lt.filter(r=>r.id!==e):lt,error:null}),mw=async(e,t)=>{if(await new Promise(i=>setTimeout(i,150)),!e)return{data:null,error:{message:"Email is required"}};const r=lt.find(i=>i.email.toLowerCase()===e.toLowerCase());if(r)return{data:r,error:null};const n={id:Tn(),email:e,password:"",full_name:t||e.split("@")[0],role:"patient",created_at:Ne()};return lt.push(n),Kt("dummyUsers",lt),{data:n,error:null}},rI=async(e,t)=>{await new Promise(n=>setTimeout(n,150));const r=lt.findIndex(n=>n.id===e);return r===-1?{data:null,error:{message:"User not found"}}:(lt[r]={...lt[r],...t},Kt("dummyUsers",lt),{data:lt[r],error:null})},nI=async()=>(await new Promise(e=>setTimeout(e,200)),{data:ZD,error:null}),rc=async e=>{await new Promise(r=>setTimeout(r,400));let t=zr.map(r=>({...r,assigned_to_user:lt.find(n=>n.id===r.assigned_to),assigned_by_user:lt.find(n=>n.id===r.assigned_by),patient:r.patient_id?ar.find(n=>n.id===r.patient_id):void 0}));return e&&(t=t.filter(r=>r.assigned_to===e||r.assigned_by===e)),{data:t.sort((r,n)=>new Date(n.created_at).getTime()-new Date(r.created_at).getTime()),error:null}},W2=async e=>{await new Promise(r=>setTimeout(r,400));const t={...e,id:Tn(),created_at:Ne(),updated_at:Ne()};return zr.push(t),Kt("dummyTasks",zr),{data:t,error:null}},nc=async(e,t)=>{await new Promise(n=>setTimeout(n,400));const r=zr.findIndex(n=>n.id===e);return r===-1?{data:null,error:{message:"Task not found"}}:(t.status==="completed"&&zr[r].status!=="completed"&&(t.completed_at=Ne()),zr[r]={...zr[r],...t,updated_at:Ne()},Kt("dummyTasks",zr),{data:zr[r],error:null})},H2=async e=>{await new Promise(r=>setTimeout(r,300));const t=zr.findIndex(r=>r.id===e);return t===-1?{data:null,error:{message:"Task not found"}}:(zr.splice(t,1),Kt("dummyTasks",zr),{data:null,error:null})},iI=async()=>(await new Promise(t=>setTimeout(t,300)),{data:ln.map(t=>({...t,created_by_user:lt.find(r=>r.id===t.created_by)})).sort((t,r)=>new Date(r.created_at).getTime()-new Date(t.created_at).getTime()),error:null}),aI=async e=>{await new Promise(r=>setTimeout(r,400));const t={...e,id:Tn(),created_at:Ne(),updated_at:Ne()};return ln.push(t),Kt("dummyAnnouncements",ln),{data:t,error:null}},sI=async(e,t)=>{await new Promise(n=>setTimeout(n,400));const r=ln.findIndex(n=>n.id===e);return r===-1?{data:null,error:{message:"Announcement not found"}}:(ln[r]={...ln[r],...t,updated_at:Ne()},Kt("dummyAnnouncements",ln),{data:ln[r],error:null})},oI=async e=>{await new Promise(r=>setTimeout(r,300));const t=ln.findIndex(r=>r.id===e);return t===-1?{data:null,error:{message:"Announcement not found"}}:(ln.splice(t,1),Kt("dummyAnnouncements",ln),{data:null,error:null})},lI=async(e,t)=>{await new Promise(n=>setTimeout(n,400));let r=cn.map(n=>({...n,patient:ar.find(i=>i.id===n.patient_id),recorded_by_user:lt.find(i=>i.id===n.recorded_by)}));if(t){const n=ar.find(i=>i.user_id===t);n&&(r=r.filter(i=>i.patient_id===n.id))}return{data:r.sort((n,i)=>new Date(i.record_date).getTime()-new Date(n.record_date).getTime()),error:null}},cI=async e=>{await new Promise(r=>setTimeout(r,400));const t={...e,id:Tn(),created_at:Ne(),updated_at:Ne()};return cn.push(t),Kt("dummyDailyRecords",cn),{data:t,error:null}},uI=async(e,t)=>{await new Promise(n=>setTimeout(n,400));const r=cn.findIndex(n=>n.id===e);return r===-1?{data:null,error:{message:"Daily record not found"}}:(cn[r]={...cn[r],...t,updated_at:Ne()},Kt("dummyDailyRecords",cn),{data:cn[r],error:null})},dI=async e=>{await new Promise(r=>setTimeout(r,300));const t=cn.findIndex(r=>r.id===e);return t===-1?{data:null,error:{message:"Daily record not found"}}:(cn.splice(t,1),Kt("dummyDailyRecords",cn),{data:null,error:null})},fI=()=>{const{signIn:e}=Ye(),[t,r]=_.useState("identify"),[n,i]=_.useState(""),[a,o]=_.useState(""),[c,d]=_.useState(null),[f,h]=_.useState(!1),[m,g]=_.useState(""),[v,j]=_.useState(""),[w,P]=_.useState(!1),[b,x]=_.useState(""),S=async C=>{C.preventDefault(),x(""),P(!0);try{let E="",A=null;const H=n.trim();if(!H)throw new Error("Please enter patient ID or email");if(H.includes("@")){const{data:U}=await Ga(),I=(U||[]).find(D=>D.role==="patient"&&D.email.toLowerCase()===H.toLowerCase());if(!I)throw new Error("No patient account with this email");A=I.id,E=I.email}else{const{data:U}=await YD(H);if(!U)throw new Error("Patient ID not found");if(U.user_id){const I=ro(U.user_id);I&&I.role==="patient"&&(A=I.id,E=I.email)}if(!A)throw new Error("This patient has no account yet. Ask your care team to add an email for login.")}d(A),o(E);const B=A?ro(A):void 0,R=!!(B&&B.password&&B.password.length>0);h(R),r(R?"password":"set-password")}catch(E){x(E.message||"Unable to identify patient")}finally{P(!1)}},O=async C=>{if(C.preventDefault(),x(""),m.length<6)return x("Password must be at least 6 characters");if(m!==v)return x("Passwords do not match");if(!c)return x("Missing user account");P(!0);try{const{error:E}=await Ey(c,m);if(E)throw new Error(E.message);const A=await e(a,m);A!=null&&A.error&&x(A.error.message)}catch(E){x(E.message||"Unable to set password")}finally{P(!1)}},N=async C=>{C.preventDefault(),x(""),P(!0);try{const{error:E}=await e(a,m);E&&x(E.message)}catch{x("Login failed")}finally{P(!1)}};return l.jsxs("div",{className:"w-full",children:[t==="identify"&&l.jsxs("form",{onSubmit:S,className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(F2,{className:"w-8 h-8 inline text-blue-600"}),l.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Patient Access"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Patient ID (MRN) or Email"})]}),l.jsx("input",{type:"text",value:n,onChange:C=>i(C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"MRN-001234 or you@example.com"}),b&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:b}),l.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsx(tc,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",value:a,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsx("input",{type:"password",value:m,onChange:C=>g(C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),b&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:b}),l.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsx(tc,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&l.jsxs("form",{onSubmit:O,className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(Md,{className:"w-8 h-8 inline text-blue-600"}),l.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),l.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",a]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),l.jsx("input",{type:"password",value:m,onChange:C=>g(C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),l.jsx("input",{type:"password",value:v,onChange:C=>j(C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),b&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:b}),l.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsx(Md,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},hI=()=>{const{signIn:e}=Ye(),[t,r]=_.useState("identify"),[n,i]=_.useState(""),[a,o]=_.useState(""),[c,d]=_.useState(null),[f,h]=_.useState(""),[m,g]=_.useState(""),[v,j]=_.useState(!1),[w,P]=_.useState(""),b=async O=>{O.preventDefault(),P(""),j(!0);try{let N=null,C="";const E=n.trim();if(!E)throw new Error("Enter Volunteer ID or Email");if(E.includes("@")){const{data:B}=await Ga(),R=(B||[]).find(U=>U.role==="volunteer"&&U.email.toLowerCase()===E.toLowerCase());if(!R)throw new Error("Volunteer email not found");N=R.id,C=R.email}else{const{data:B}=await QD(E);if(!B)throw new Error("Volunteer ID not found");N=B.user_id;const R=N?ro(N):void 0;if(!R)throw new Error("No user linked to this volunteer");C=R.email}d(N),o(C);const A=N?ro(N):void 0,H=!!(A&&A.password&&A.password.length>0);r(H?"password":"set-password")}catch(N){P(N.message||"Unable to identify")}finally{j(!1)}},x=async O=>{if(O.preventDefault(),P(""),f.length<6)return P("Password must be at least 6 characters");if(f!==m)return P("Passwords do not match");if(!c)return P("Missing user account");j(!0);try{const{error:N}=await Ey(c,f);if(N)throw new Error(N.message);const C=await e(a,f);C!=null&&C.error&&P(C.error.message)}catch(N){P(N.message||"Unable to set password")}finally{j(!1)}},S=async O=>{O.preventDefault(),P(""),j(!0);try{const{error:N}=await e(a,f);N&&P(N.message)}finally{j(!1)}};return l.jsxs("div",{className:"w-full",children:[t==="identify"&&l.jsxs("form",{onSubmit:b,className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(F2,{className:"w-8 h-8 inline text-emerald-600"}),l.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Volunteer Access"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Volunteer ID or Email"})]}),l.jsx("input",{type:"text",value:n,onChange:O=>i(O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"VHV-000123 or you@example.com"}),w&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),l.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[v?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsx(tc,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&l.jsxs("form",{onSubmit:S,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",value:a,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsx("input",{type:"password",value:f,onChange:O=>h(O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),w&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),l.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[v?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsx(tc,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&l.jsxs("form",{onSubmit:x,className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(Md,{className:"w-8 h-8 inline text-emerald-600"}),l.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),l.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",a]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),l.jsx("input",{type:"password",value:f,onChange:O=>h(O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),l.jsx("input",{type:"password",value:m,onChange:O=>g(O.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),w&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),l.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[v?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsx(Md,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},mI=()=>{const[e,t]=_.useState("patient"),[r,n]=_.useState(!0),[i,a]=_.useState(""),[o,c]=_.useState(""),[d,f]=_.useState(""),[h,m]=_.useState("patient"),[g,v]=_.useState(!1),[j,w]=_.useState(""),{signIn:P,signUp:b}=Ye(),x=async S=>{S.preventDefault(),w(""),v(!0);try{if(r){const{error:O}=await P(i,o);O&&w(O.message)}else{const{error:O}=await b(i,o,d,h);O&&w(O.message)}}catch{w("An unexpected error occurred")}finally{v(!1)}};return e==="patient"?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"flex justify-center mb-3",children:l.jsx("div",{className:"bg-blue-600 p-3 rounded-full",children:l.jsx(En,{className:"w-8 h-8 text-white"})})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"MedConnect Patient Portal"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Access with your MRN or email"})]}),l.jsx(fI,{}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-4",children:[l.jsx("button",{onClick:()=>t("staff"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Staff login"}),l.jsx("span",{className:"text-gray-300",children:"|"}),l.jsx("button",{onClick:()=>t("volunteer"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Volunteer login"})]})})]})}):e==="volunteer"?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"flex justify-center mb-3",children:l.jsx("div",{className:"bg-emerald-600 p-3 rounded-full",children:l.jsx(En,{className:"w-8 h-8 text-white"})})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"MedConnect Volunteer Portal"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Access with Volunteer ID or email"})]}),l.jsx(hI,{}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-4",children:[l.jsx("button",{onClick:()=>t("staff"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Staff login"}),l.jsx("span",{className:"text-gray-300",children:"|"}),l.jsx("button",{onClick:()=>t("patient"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Patient login"})]})})]})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx("div",{className:"bg-blue-600 p-3 rounded-full",children:l.jsx(En,{className:"w-8 h-8 text-white"})})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"MedConnect Portal"}),l.jsx("p",{className:"text-gray-600 mt-2",children:r?"Sign in to your account":"Create your account"})]}),l.jsxs("form",{onSubmit:x,className:"space-y-6",children:[!r&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),l.jsx("input",{type:"text",required:!0,value:d,onChange:S=>f(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your full name"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),l.jsxs("select",{value:h,onChange:S=>m(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[l.jsx("option",{value:"patient",children:"Patient"}),l.jsx("option",{value:"doctor",children:"Doctor"}),l.jsx("option",{value:"volunteer",children:"Volunteer"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),l.jsx("input",{type:"email",required:!0,value:i,onChange:S=>a(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your email"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsx("input",{type:"password",required:!0,value:o,onChange:S=>c(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your password"})]}),j&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:j}),l.jsx("button",{type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[r?l.jsx(tc,{className:"w-5 h-5"}):l.jsx(KD,{className:"w-5 h-5"}),l.jsx("span",{children:r?"Sign In":"Sign Up"})]})})]}),l.jsxs("div",{className:"mt-6 text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-4",children:[l.jsx("button",{onClick:()=>t("patient"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Patient login"}),l.jsx("span",{className:"text-gray-300",children:"|"}),l.jsx("button",{onClick:()=>t("volunteer"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Volunteer login"})]}),l.jsx("button",{onClick:()=>n(!r),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:r?"Don't have an account? Sign up":"Already have an account? Sign in"})]})]})})},pI=({onMenuClick:e,onViewChange:t})=>{var d,f;const{user:r,signOut:n}=Ye(),[i,a]=_.useState(void 0);_.useEffect(()=>{let h=!0;return(async()=>{if(r){if(r.photo_url){a(r.photo_url);return}if(r.role==="patient"){const{data:g}=await bc(r.id);h&&a(g==null?void 0:g.photo_url)}}})(),()=>{h=!1}},[r]);const o=async()=>{await n()},c=h=>{switch(h){case"doctor":return"bg-green-100 text-green-800";case"volunteer":return"bg-purple-100 text-purple-800";case"patient":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return l.jsx("nav",{className:"bg-white shadow-md border-b border-gray-200 sticky top-0 z-20",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsx("div",{className:"flex items-center space-x-3",children:l.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100",onClick:e,"aria-label":"Open menu",children:l.jsx(z2,{className:"w-5 h-5"})})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:()=>t("user-profile"),className:"w-9 h-9 rounded-full overflow-hidden border border-gray-200 bg-gray-50 flex items-center justify-center hover:ring-2 hover:ring-blue-500",title:"My Profile",children:i?l.jsx("img",{src:i,className:"w-full h-full object-cover"}):l.jsx(nt,{className:"w-5 h-5 text-gray-500"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:r==null?void 0:r.full_name}),l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c((r==null?void 0:r.role)||"")}`,children:((d=r==null?void 0:r.role)==null?void 0:d.charAt(0).toUpperCase())+((f=r==null?void 0:r.role)==null?void 0:f.slice(1))})]}),l.jsx("button",{onClick:o,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",title:"Sign Out",children:l.jsx(UD,{className:"w-5 h-5"})})]})]})})})},gI=({currentView:e,onViewChange:t,mobileOpen:r,setMobileOpen:n})=>{const{user:i}=Ye(),[a,o]=_.useState(!1);_.useEffect(()=>{const m=localStorage.getItem("sidebar-collapsed");m&&o(m==="1")},[]);const c=()=>{const m=!a;o(m),localStorage.setItem("sidebar-collapsed",m?"1":"0")},d=()=>{const m=[{key:"dashboard",label:"Dashboard",icon:nt},{key:"messages",label:"Messages",icon:Zs},{key:"tasks",label:"My Tasks",icon:Tl},{key:"records",label:"Daily Records",icon:no},{key:"map",label:"Map",icon:Ty}];if((i==null?void 0:i.role)==="doctor"||(i==null?void 0:i.role)==="volunteer")m.splice(1,0,{key:"patients",label:"Patients",icon:Ti}),(i==null?void 0:i.role)==="doctor"&&m.splice(2,0,{key:"volunteers",label:"Volunteers",icon:Tl});else if((i==null?void 0:i.role)==="patient"){m.splice(1,0,{key:"profile",label:"My Profile",icon:Ti});const g=m.findIndex(v=>v.key==="tasks");g!==-1&&(m[g]={key:"appointments",label:"Appointments",icon:Oy})}return(i==null?void 0:i.role)==="doctor"&&m.splice(3,0,{key:"volunteer-tasks",label:"Volunteer Tasks",icon:Tl}),m},f=()=>l.jsx("ul",{className:"mt-4 space-y-1",children:d().map(m=>{const g=m.icon,v=e===m.key;return l.jsx("li",{children:l.jsxs("button",{onClick:()=>{t(m.key),n&&n(!1)},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${v?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[l.jsx(g,{className:"w-5 h-5 shrink-0"}),!a&&l.jsx("span",{className:"text-sm font-medium truncate",children:m.label})]})},m.key)})}),h=l.jsxs("div",{className:`h-full flex flex-col ${a?"items-center":""}`,children:[l.jsx("div",{className:`flex items-center ${a?"justify-center":"justify-start"} h-16 px-3 border-b border-gray-200`,children:a?l.jsx("img",{src:"/logo.png",alt:"logo",className:"h-8 object-contain"}):l.jsx("img",{src:"/logo.png",alt:"logo",className:"h-9 object-contain"})}),l.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:l.jsx(f,{})}),l.jsx("div",{className:"p-2 border-t border-gray-200",children:l.jsxs("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg px-3 py-2",children:[a?l.jsx(z2,{className:"w-4 h-4"}):l.jsx($D,{className:"w-4 h-4"}),!a&&l.jsx("span",{className:"text-sm",children:"Collapse"})]})})]});return l.jsxs(l.Fragment,{children:[l.jsx("aside",{className:`hidden md:flex md:flex-col bg-white border-r border-gray-200 h-screen sticky top-0 z-30 transition-[width] duration-200 ${a?"w-20":"w-64"}`,children:h}),l.jsxs("div",{className:`md:hidden ${r?"fixed inset-0 z-40":"hidden"}`,children:[l.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>n&&n(!1)}),l.jsxs("aside",{className:"absolute left-0 top-0 h-full w-72 bg-white border-r border-gray-200 shadow-xl",children:[l.jsxs("div",{className:"h-16 flex items-center justify-between px-3 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:l.jsx(En,{className:"w-6 h-6 text-white"})}),l.jsx("span",{className:"text-lg font-bold text-gray-900",children:"HealthBridge"})]}),l.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100",onClick:()=>n&&n(!1),children:l.jsx(io,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"h-[calc(100%-4rem)] overflow-y-auto px-2",children:l.jsx(f,{})})]})]})]})},vI=({announcement:e,onClose:t,onSuccess:r})=>{const{user:n}=Ye(),[i,a]=_.useState(!1),[o,c]=_.useState({title:(e==null?void 0:e.title)||"",content:(e==null?void 0:e.content)||"",priority:(e==null?void 0:e.priority)||"medium"}),d=async h=>{h.preventDefault(),a(!0);try{if(e){const{error:m}=await sI(e.id,o);if(m){console.error("Error updating announcement:",m);return}}else{const{error:m}=await aI({...o,created_by:(n==null?void 0:n.id)||""});if(m){console.error("Error creating announcement:",m);return}}r(),t()}catch(m){console.error("Error saving announcement:",m)}finally{a(!1)}},f=h=>{const{name:m,value:g}=h.target;c({...o,[m]:g})};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"border-b border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:l.jsx(id,{className:"w-6 h-6 text-blue-600"})}),l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Edit Announcement":"Create New Announcement"})]}),l.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:l.jsx(io,{className:"w-5 h-5"})})]})}),l.jsxs("form",{onSubmit:d,className:"p-6",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),l.jsx("input",{type:"text",name:"title",required:!0,value:o.title,onChange:f,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter announcement title..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),l.jsxs("select",{name:"priority",required:!0,value:o.priority,onChange:f,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[l.jsx("option",{value:"low",children:"Low"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"urgent",children:"Urgent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),l.jsx("textarea",{name:"content",required:!0,rows:6,value:o.content,onChange:f,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter announcement content..."})]})]}),l.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[l.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(wo,{className:"w-5 h-5"}),l.jsxs("span",{children:[e?"Update":"Create"," Announcement"]})]})})]})]})]})})};function K2(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=K2(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Oe(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=K2(e))&&(n&&(n+=" "),n+=t);return n}var Kf={},Z2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Z2);var My={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(My);var Ly={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Ly);var Zf={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],i=r.length;if(i===0)return n;let a=0,o="",c="",d=!1;for(r.charCodeAt(0)===46&&(n.push(""),a++);a<i;){const f=r[a];c?f==="\\"&&a+1<i?(a++,o+=r[a]):f===c?c="":o+=f:d?f==='"'||f==="'"?c=f:f==="]"?(d=!1,n.push(o),o=""):o+=f:f==="["?(d=!0,o&&(n.push(o),o="")):f==="."?o&&(n.push(o),o=""):o+=f,a++}return o&&n.push(o),n}e.toPath=t})(Zf);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z2,r=My,n=Ly,i=Zf;function a(c,d,f){if(c==null)return f;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return f;const h=c[d];return h===void 0?r.isDeepKey(d)?a(c,i.toPath(d),f):f:h}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const h=c[d];return h===void 0?f:h}default:{if(Array.isArray(d))return o(c,d,f);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return f;const h=c[d];return h===void 0?f:h}}}function o(c,d,f){if(d.length===0)return f;let h=c;for(let m=0;m<d.length;m++){if(h==null||t.isUnsafeProperty(d[m]))return f;h=h[d[m]]}return h===void 0?f:h}e.get=a})(Kf);var yI=Kf.get;const Ba=Dn(yI);var V2={exports:{}},Me={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy=Symbol.for("react.transitional.element"),Iy=Symbol.for("react.portal"),Vf=Symbol.for("react.fragment"),qf=Symbol.for("react.strict_mode"),Gf=Symbol.for("react.profiler"),Yf=Symbol.for("react.consumer"),Xf=Symbol.for("react.context"),Jf=Symbol.for("react.forward_ref"),Qf=Symbol.for("react.suspense"),eh=Symbol.for("react.suspense_list"),th=Symbol.for("react.memo"),rh=Symbol.for("react.lazy"),xI=Symbol.for("react.view_transition"),_I=Symbol.for("react.client.reference");function Gr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Dy:switch(e=e.type,e){case Vf:case Gf:case qf:case Qf:case eh:case xI:return e;default:switch(e=e&&e.$$typeof,e){case Xf:case Jf:case rh:case th:return e;case Yf:return e;default:return t}}case Iy:return t}}}Me.ContextConsumer=Yf;Me.ContextProvider=Xf;Me.Element=Dy;Me.ForwardRef=Jf;Me.Fragment=Vf;Me.Lazy=rh;Me.Memo=th;Me.Portal=Iy;Me.Profiler=Gf;Me.StrictMode=qf;Me.Suspense=Qf;Me.SuspenseList=eh;Me.isContextConsumer=function(e){return Gr(e)===Yf};Me.isContextProvider=function(e){return Gr(e)===Xf};Me.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dy};Me.isForwardRef=function(e){return Gr(e)===Jf};Me.isFragment=function(e){return Gr(e)===Vf};Me.isLazy=function(e){return Gr(e)===rh};Me.isMemo=function(e){return Gr(e)===th};Me.isPortal=function(e){return Gr(e)===Iy};Me.isProfiler=function(e){return Gr(e)===Gf};Me.isStrictMode=function(e){return Gr(e)===qf};Me.isSuspense=function(e){return Gr(e)===Qf};Me.isSuspenseList=function(e){return Gr(e)===eh};Me.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Vf||e===Gf||e===qf||e===Qf||e===eh||typeof e=="object"&&e!==null&&(e.$$typeof===rh||e.$$typeof===th||e.$$typeof===Xf||e.$$typeof===Yf||e.$$typeof===Jf||e.$$typeof===_I||e.getModuleId!==void 0)};Me.typeOf=Gr;V2.exports=Me;var bI=V2.exports,St=e=>e===0?0:e>0?1:-1,jr=e=>typeof e=="number"&&e!=+e,ja=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,de=e=>(typeof e=="number"||e instanceof Number)&&!jr(e),Mn=e=>de(e)||typeof e=="string",wI=0,ic=e=>{var t=++wI;return"".concat(e||"").concat(t)},Wt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!de(t)&&typeof t!="string")return n;var a;if(ja(t)){if(r==null)return n;var o=t.indexOf("%");a=r*parseFloat(t.slice(0,o))/100}else a=+t;return jr(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},q2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Mt(e,t,r){return de(e)&&de(t)?e+r*(t-e):t}function jI(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Ba(n,t))===r)}var kt=e=>e===null||typeof e>"u",wc=e=>kt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),SI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Ry(e){if(typeof e!="string")return!1;var t=SI;return t.includes(e)}var PI=["viewBox","children"],pw=["points","pathLength"],ep={svg:PI,polygon:pw,polyline:pw},kI=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{Ry(i)&&(n[i]=a=>r[i](r,a))}),n},NI=(e,t,r)=>n=>(e(t,r,n),null),jc=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var a=e[i];Ry(i)&&typeof a=="function"&&(n||(n={}),n[i]=NI(a,t,r))}),n},CI=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function G2(e){if(typeof e!="string")return!1;var t=CI;return t.includes(e)}function Xi(e){var t=Object.entries(e).filter(r=>{var[n]=r;return G2(n)});return Object.fromEntries(t)}var gw=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",vw=null,tp=null,Y2=e=>{if(e===vw&&Array.isArray(tp))return tp;var t=[];return _.Children.forEach(e,r=>{kt(r)||(bI.isFragment(r)?t=t.concat(Y2(r.props.children)):t.push(r))}),tp=t,vw=e,t};function $y(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>gw(i)):n=[gw(t)],Y2(e).forEach(i=>{var a=Ba(i,"type.displayName")||Ba(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}var EI=(e,t,r,n)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(i=n&&(ep==null?void 0:ep[n]))!==null&&i!==void 0?i:[],o=t.startsWith("data-"),c=typeof e!="function"&&(!!n&&a.includes(t)||G2(t)),d=!!r&&Ry(t);return o||c||d},gt=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(_.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(a=>{var o;EI((o=n)===null||o===void 0?void 0:o[a],a,t,r)&&(i[a]=n[a])}),i},OI=["children","width","height","viewBox","className","style","title","desc"];function Eg(){return Eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eg.apply(null,arguments)}function TI(e,t){if(e==null)return{};var r,n,i=AI(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function AI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zy=_.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:a,className:o,style:c,title:d,desc:f}=e,h=TI(e,OI),m=a||{width:n,height:i,x:0,y:0},g=Oe("recharts-surface",o);return _.createElement("svg",Eg({},gt(h,!0,"svg"),{className:g,width:n,height:i,style:c,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),_.createElement("title",null,d),_.createElement("desc",null,f),r)}),MI=["children","className"];function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Og.apply(null,arguments)}function LI(e,t){if(e==null)return{};var r,n,i=DI(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function DI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dr=_.forwardRef((e,t)=>{var{children:r,className:n}=e,i=LI(e,MI),a=Oe("recharts-layer",n);return _.createElement("g",Og({className:a},gt(i,!0),{ref:t}),r)}),X2=_.createContext(null),II=()=>_.useContext(X2);function Ie(e){return function(){return e}}const J2=Math.cos,Dd=Math.sin,gn=Math.sqrt,Id=Math.PI,nh=2*Id,Tg=Math.PI,Ag=2*Tg,ma=1e-6,RI=Ag-ma;function Q2(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function $I(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Q2;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class zI{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Q2:$I(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,o){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,c=this._y1,d=n-t,f=i-r,h=o-t,m=c-r,g=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(g>ma)if(!(Math.abs(m*d-f*h)>ma)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let v=n-o,j=i-c,w=d*d+f*f,P=v*v+j*j,b=Math.sqrt(w),x=Math.sqrt(g),S=a*Math.tan((Tg-Math.acos((w+g-P)/(2*b*x)))/2),O=S/x,N=S/b;Math.abs(O-1)>ma&&this._append`L${t+O*h},${r+O*m}`,this._append`A${a},${a},0,0,${+(m*v>h*j)},${this._x1=t+N*d},${this._y1=r+N*f}`}}arc(t,r,n,i,a,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(i),d=n*Math.sin(i),f=t+c,h=r+d,m=1^o,g=o?i-a:a-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>ma||Math.abs(this._y1-h)>ma)&&this._append`L${f},${h}`,n&&(g<0&&(g=g%Ag+Ag),g>RI?this._append`A${n},${n},0,1,${m},${t-c},${r-d}A${n},${n},0,1,${m},${this._x1=f},${this._y1=h}`:g>ma&&this._append`A${n},${n},0,${+(g>=Tg)},${m},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function By(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new zI(t)}function Fy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ek(e){this._context=e}ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ih(e){return new ek(e)}function tk(e){return e[0]}function rk(e){return e[1]}function nk(e,t){var r=Ie(!0),n=null,i=ih,a=null,o=By(c);e=typeof e=="function"?e:e===void 0?tk:Ie(e),t=typeof t=="function"?t:t===void 0?rk:Ie(t);function c(d){var f,h=(d=Fy(d)).length,m,g=!1,v;for(n==null&&(a=i(v=o())),f=0;f<=h;++f)!(f<h&&r(m=d[f],f,d))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+e(m,f,d),+t(m,f,d));if(v)return a=null,v+""||null}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:Ie(+d),c):e},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:Ie(+d),c):t},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Ie(!!d),c):r},c.curve=function(d){return arguments.length?(i=d,n!=null&&(a=i(n)),c):i},c.context=function(d){return arguments.length?(d==null?n=a=null:a=i(n=d),c):n},c}function Su(e,t,r){var n=null,i=Ie(!0),a=null,o=ih,c=null,d=By(f);e=typeof e=="function"?e:e===void 0?tk:Ie(+e),t=typeof t=="function"?t:Ie(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?rk:Ie(+r);function f(m){var g,v,j,w=(m=Fy(m)).length,P,b=!1,x,S=new Array(w),O=new Array(w);for(a==null&&(c=o(x=d())),g=0;g<=w;++g){if(!(g<w&&i(P=m[g],g,m))===b)if(b=!b)v=g,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),j=g-1;j>=v;--j)c.point(S[j],O[j]);c.lineEnd(),c.areaEnd()}b&&(S[g]=+e(P,g,m),O[g]=+t(P,g,m),c.point(n?+n(P,g,m):S[g],r?+r(P,g,m):O[g]))}if(x)return c=null,x+""||null}function h(){return nk().defined(i).curve(o).context(a)}return f.x=function(m){return arguments.length?(e=typeof m=="function"?m:Ie(+m),n=null,f):e},f.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Ie(+m),f):e},f.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Ie(+m),f):n},f.y=function(m){return arguments.length?(t=typeof m=="function"?m:Ie(+m),r=null,f):t},f.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Ie(+m),f):t},f.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Ie(+m),f):r},f.lineX0=f.lineY0=function(){return h().x(e).y(t)},f.lineY1=function(){return h().x(e).y(r)},f.lineX1=function(){return h().x(n).y(t)},f.defined=function(m){return arguments.length?(i=typeof m=="function"?m:Ie(!!m),f):i},f.curve=function(m){return arguments.length?(o=m,a!=null&&(c=o(a)),f):o},f.context=function(m){return arguments.length?(m==null?a=c=null:c=o(a=m),f):a},f}class ik{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function BI(e){return new ik(e,!0)}function FI(e){return new ik(e,!1)}const Uy={draw(e,t){const r=gn(t/Id);e.moveTo(r,0),e.arc(0,0,r,0,nh)}},UI={draw(e,t){const r=gn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},ak=gn(1/3),WI=ak*2,HI={draw(e,t){const r=gn(t/WI),n=r*ak;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},KI={draw(e,t){const r=gn(t),n=-r/2;e.rect(n,n,r,r)}},ZI=.8908130915292852,sk=Dd(Id/10)/Dd(7*Id/10),VI=Dd(nh/10)*sk,qI=-J2(nh/10)*sk,GI={draw(e,t){const r=gn(t*ZI),n=VI*r,i=qI*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const o=nh*a/5,c=J2(o),d=Dd(o);e.lineTo(d*r,-c*r),e.lineTo(c*n-d*i,d*n+c*i)}e.closePath()}},rp=gn(3),YI={draw(e,t){const r=-gn(t/(rp*3));e.moveTo(0,r*2),e.lineTo(-rp*r,-r),e.lineTo(rp*r,-r),e.closePath()}},Ar=-.5,Mr=gn(3)/2,Mg=1/gn(12),XI=(Mg/2+1)*3,JI={draw(e,t){const r=gn(t/XI),n=r/2,i=r*Mg,a=n,o=r*Mg+r,c=-a,d=o;e.moveTo(n,i),e.lineTo(a,o),e.lineTo(c,d),e.lineTo(Ar*n-Mr*i,Mr*n+Ar*i),e.lineTo(Ar*a-Mr*o,Mr*a+Ar*o),e.lineTo(Ar*c-Mr*d,Mr*c+Ar*d),e.lineTo(Ar*n+Mr*i,Ar*i-Mr*n),e.lineTo(Ar*a+Mr*o,Ar*o-Mr*a),e.lineTo(Ar*c+Mr*d,Ar*d-Mr*c),e.closePath()}};function QI(e,t){let r=null,n=By(i);e=typeof e=="function"?e:Ie(e||Uy),t=typeof t=="function"?t:Ie(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Ie(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Ie(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Rd(){}function $d(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function ok(e){this._context=e}ok.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$d(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$d(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function e3(e){return new ok(e)}function lk(e){this._context=e}lk.prototype={areaStart:Rd,areaEnd:Rd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$d(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function t3(e){return new lk(e)}function ck(e){this._context=e}ck.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:$d(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function r3(e){return new ck(e)}function uk(e){this._context=e}uk.prototype={areaStart:Rd,areaEnd:Rd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function n3(e){return new uk(e)}function yw(e){return e<0?-1:1}function xw(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0),c=(a*i+o*n)/(n+i);return(yw(a)+yw(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(c))||0}function _w(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function np(e,t,r){var n=e._x0,i=e._y0,a=e._x1,o=e._y1,c=(a-n)/3;e._context.bezierCurveTo(n+c,i+c*t,a-c,o-c*r,a,o)}function zd(e){this._context=e}zd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:np(this,this._t0,_w(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,np(this,_w(this,r=xw(this,e,t)),r);break;default:np(this,this._t0,r=xw(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function dk(e){this._context=new fk(e)}(dk.prototype=Object.create(zd.prototype)).point=function(e,t){zd.prototype.point.call(this,t,e)};function fk(e){this._context=e}fk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function i3(e){return new zd(e)}function a3(e){return new dk(e)}function hk(e){this._context=e}hk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=bw(e),i=bw(t),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function bw(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function s3(e){return new hk(e)}function ah(e,t){this._context=e,this._t=t}ah.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function o3(e){return new ah(e,.5)}function l3(e){return new ah(e,0)}function c3(e){return new ah(e,1)}function ao(e,t){if((o=e.length)>1)for(var r=1,n,i,a=e[t[0]],o,c=a.length;r<o;++r)for(i=a,a=e[t[r]],n=0;n<c;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Lg(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function u3(e,t){return e[t]}function d3(e){const t=[];return t.key=e,t}function f3(){var e=Ie([]),t=Lg,r=ao,n=u3;function i(a){var o=Array.from(e.apply(this,arguments),d3),c,d=o.length,f=-1,h;for(const m of a)for(c=0,++f;c<d;++c)(o[c][f]=[0,+n(m,o[c].key,f,a)]).data=m;for(c=0,h=Fy(t(o));c<d;++c)o[h[c]].index=c;return r(o,h),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Ie(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Ie(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?Lg:typeof a=="function"?a:Ie(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??ao,i):r},i}function h3(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,o;i<a;++i){for(o=r=0;r<n;++r)o+=e[r][i][1]||0;if(o)for(r=0;r<n;++r)e[r][i][1]/=o}ao(e,t)}}function m3(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var o=0,c=0;o<i;++o)c+=e[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}ao(e,t)}}function p3(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,o;n<a;++n){for(var c=0,d=0,f=0;c<o;++c){for(var h=e[t[c]],m=h[n][1]||0,g=h[n-1][1]||0,v=(m-g)/2,j=0;j<c;++j){var w=e[t[j]],P=w[n][1]||0,b=w[n-1][1]||0;v+=P-b}d+=m,f+=v*m}i[n-1][1]+=i[n-1][0]=r,d&&(r-=f/d)}i[n-1][1]+=i[n-1][0]=r,ao(e,t)}}var g3=["type","size","sizeType"];function Dg(){return Dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dg.apply(null,arguments)}function ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(r),!0).forEach(function(n){v3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v3(e,t,r){return(t=y3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y3(e){var t=x3(e,"string");return typeof t=="symbol"?t:t+""}function x3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _3(e,t){if(e==null)return{};var r,n,i=b3(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function b3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mk={symbolCircle:Uy,symbolCross:UI,symbolDiamond:HI,symbolSquare:KI,symbolStar:GI,symbolTriangle:YI,symbolWye:JI},w3=Math.PI/180,j3=e=>{var t="symbol".concat(wc(e));return mk[t]||Uy},S3=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*w3;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},P3=(e,t)=>{mk["symbol".concat(wc(e))]=t},Wy=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=_3(e,g3),a=jw(jw({},i),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var c=()=>{var g=j3(o),v=QI().type(g).size(S3(r,n,o));return v()},{className:d,cx:f,cy:h}=a,m=gt(a,!0);return f===+f&&h===+h&&r===+r?_.createElement("path",Dg({},m,{className:Oe("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(h,")"),d:c()})):null};Wy.registerSymbol=P3;function Ig(){return Ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ig.apply(null,arguments)}function Sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function k3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(r),!0).forEach(function(n){Hy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hy(e,t,r){return(t=N3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N3(e){var t=C3(e,"string");return typeof t=="symbol"?t:t+""}function C3(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lr=32;class Ky extends _.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,i=Lr/2,a=Lr/6,o=Lr/3,c=t.inactive?n:t.color,d=r??t.type;if(d==="none")return null;if(d==="plainline")return _.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Lr,y2:i,className:"recharts-legend-icon"});if(d==="line")return _.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Lr,"M").concat(2*o,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(d==="rect")return _.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Lr/8,"h").concat(Lr,"v").concat(Lr*3/4,"h").concat(-Lr,"z"),className:"recharts-legend-icon"});if(_.isValidElement(t.legendIcon)){var f=k3({},t);return delete f.legendIcon,_.cloneElement(t.legendIcon,f)}return _.createElement(Wy,{fill:c,cx:i,cy:i,size:Lr,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:o}=this.props,c={x:0,y:0,width:Lr,height:Lr},d={display:n==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,m)=>{var g=h.formatter||i,v=Oe({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:h.inactive});if(h.type==="none")return null;var j=h.inactive?a:h.color,w=g?g(h.value,h,m):h.value;return _.createElement("li",Ig({className:v,style:d,key:"legend-item-".concat(m)},jc(this.props,h,m)),_.createElement(zy,{width:r,height:r,viewBox:c,style:f,"aria-label":"".concat(w," legend icon")},this.renderIcon(h,o)),_.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},w))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return _.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Hy(Ky,"displayName","Legend");Hy(Ky,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var pk={},gk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let a=0;a<r.length;a++){const o=r[a],c=n(o);i.has(c)||i.set(c,o)}return Array.from(i.values())}e.uniqBy=t})(gk);var Zy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Zy);var vk={},sh={},yk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(yk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yk;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(sh);var xk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(xk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sh,r=xk;function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(vk);var _k={},bk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kf;function r(n){return function(i){return t.get(i,n)}}e.property=r})(bk);var wk={},ip={},ap={},Vy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Vy);var qy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(qy);var Gy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Gy);var Pw;function E3(){return Pw||(Pw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yy(),r=Vy,n=qy,i=Gy;function a(m,g,v){return typeof v!="function"?t.isMatch(m,g):o(m,g,function j(w,P,b,x,S,O){const N=v(w,P,b,x,S,O);return N!==void 0?!!N:o(w,P,j,O)},new Map)}function o(m,g,v,j){if(g===m)return!0;switch(typeof g){case"object":return c(m,g,v,j);case"function":return Object.keys(g).length>0?o(m,{...g},v,j):i.eq(m,g);default:return r.isObject(m)?typeof g=="string"?g==="":!0:i.eq(m,g)}}function c(m,g,v,j){if(g==null)return!0;if(Array.isArray(g))return f(m,g,v,j);if(g instanceof Map)return d(m,g,v,j);if(g instanceof Set)return h(m,g,v,j);const w=Object.keys(g);if(m==null)return w.length===0;if(w.length===0)return!0;if(j&&j.has(g))return j.get(g)===m;j&&j.set(g,m);try{for(let P=0;P<w.length;P++){const b=w[P];if(!n.isPrimitive(m)&&!(b in m)||g[b]===void 0&&m[b]!==void 0||g[b]===null&&m[b]!==null||!v(m[b],g[b],b,m,g,j))return!1}return!0}finally{j&&j.delete(g)}}function d(m,g,v,j){if(g.size===0)return!0;if(!(m instanceof Map))return!1;for(const[w,P]of g.entries()){const b=m.get(w);if(v(b,P,w,m,g,j)===!1)return!1}return!0}function f(m,g,v,j){if(g.length===0)return!0;if(!Array.isArray(m))return!1;const w=new Set;for(let P=0;P<g.length;P++){const b=g[P];let x=!1;for(let S=0;S<m.length;S++){if(w.has(S))continue;const O=m[S];let N=!1;if(v(O,b,P,m,g,j)&&(N=!0),N){w.add(S),x=!0;break}}if(!x)return!1}return!0}function h(m,g,v,j){return g.size===0?!0:m instanceof Set?f([...m],[...g],v,j):!1}e.isMatchWith=a,e.isSetMatch=h}(ap)),ap}var kw;function Yy(){return kw||(kw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E3();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r}(ip)),ip}var jk={},Xy={},Sk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Sk);var Jy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Jy);var Qy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",c="[object Date]",d="[object Map]",f="[object Set]",h="[object Array]",m="[object Function]",g="[object ArrayBuffer]",v="[object Object]",j="[object Error]",w="[object DataView]",P="[object Uint8Array]",b="[object Uint8ClampedArray]",x="[object Uint16Array]",S="[object Uint32Array]",O="[object BigUint64Array]",N="[object Int8Array]",C="[object Int16Array]",E="[object Int32Array]",A="[object BigInt64Array]",H="[object Float32Array]",B="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=g,e.arrayTag=h,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=O,e.booleanTag=i,e.dataViewTag=w,e.dateTag=c,e.errorTag=j,e.float32ArrayTag=H,e.float64ArrayTag=B,e.functionTag=m,e.int16ArrayTag=C,e.int32ArrayTag=E,e.int8ArrayTag=N,e.mapTag=d,e.numberTag=n,e.objectTag=v,e.regexpTag=t,e.setTag=f,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=x,e.uint32ArrayTag=S,e.uint8ArrayTag=P,e.uint8ClampedArrayTag=b})(Qy);var Pk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Pk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sk,r=Jy,n=Qy,i=qy,a=Pk;function o(h,m){return c(h,void 0,h,new Map,m)}function c(h,m,g,v=new Map,j=void 0){const w=j==null?void 0:j(h,m,g,v);if(w!==void 0)return w;if(i.isPrimitive(h))return h;if(v.has(h))return v.get(h);if(Array.isArray(h)){const P=new Array(h.length);v.set(h,P);for(let b=0;b<h.length;b++)P[b]=c(h[b],b,g,v,j);return Object.hasOwn(h,"index")&&(P.index=h.index),Object.hasOwn(h,"input")&&(P.input=h.input),P}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const P=new RegExp(h.source,h.flags);return P.lastIndex=h.lastIndex,P}if(h instanceof Map){const P=new Map;v.set(h,P);for(const[b,x]of h)P.set(b,c(x,b,g,v,j));return P}if(h instanceof Set){const P=new Set;v.set(h,P);for(const b of h)P.add(c(b,void 0,g,v,j));return P}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const P=new(Object.getPrototypeOf(h)).constructor(h.length);v.set(h,P);for(let b=0;b<h.length;b++)P[b]=c(h[b],b,g,v,j);return P}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const P=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return v.set(h,P),d(P,h,g,v,j),P}if(typeof File<"u"&&h instanceof File){const P=new File([h],h.name,{type:h.type});return v.set(h,P),d(P,h,g,v,j),P}if(h instanceof Blob){const P=new Blob([h],{type:h.type});return v.set(h,P),d(P,h,g,v,j),P}if(h instanceof Error){const P=new h.constructor;return v.set(h,P),P.message=h.message,P.name=h.name,P.stack=h.stack,P.cause=h.cause,d(P,h,g,v,j),P}if(typeof h=="object"&&f(h)){const P=Object.create(Object.getPrototypeOf(h));return v.set(h,P),d(P,h,g,v,j),P}return h}function d(h,m,g=h,v,j){const w=[...Object.keys(m),...t.getSymbols(m)];for(let P=0;P<w.length;P++){const b=w[P],x=Object.getOwnPropertyDescriptor(h,b);(x==null||x.writable)&&(h[b]=c(m[b],b,g,v,j))}}function f(h){switch(r.getTag(h)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=c,e.copyProperties=d})(Xy);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xy;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(jk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yy(),r=jk;function n(i){return i=r.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=n})(wk);var kk={},Nk={},Ck={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xy,r=Qy;function n(i,a){return t.cloneDeepWith(i,(o,c,d,f)=>{const h=a==null?void 0:a(o,c,d,f);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const m=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(m,i),m}case r.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=n})(Ck);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ck;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Nk);var Ek={},e0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(e0);var Ok={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jy;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Ok);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=My,r=e0,n=Ok,i=Zf;function a(o,c){let d;if(Array.isArray(c)?d=c:typeof c=="string"&&t.isDeepKey(c)&&(o==null?void 0:o[c])==null?d=i.toPath(c):d=[c],d.length===0)return!1;let f=o;for(let h=0;h<d.length;h++){const m=d[h];if((f==null||!Object.hasOwn(f,m))&&!((Array.isArray(f)||n.isArguments(f))&&r.isIndex(m)&&m<f.length))return!1;f=f[m]}return!0}e.has=a})(Ek);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yy(),r=Ly,n=Nk,i=Kf,a=Ek;function o(c,d){switch(typeof c){case"object":{Object.is(c==null?void 0:c.valueOf(),-0)&&(c="-0");break}case"number":{c=r.toKey(c);break}}return d=n.cloneDeep(d),function(f){const h=i.get(f,c);return h===void 0?a.has(f,c):d===void 0?h===void 0:t.isMatch(h,d)}}e.matchesProperty=o})(kk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zy,r=bk,n=wk,i=kk;function a(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=a})(_k);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gk,r=Zy,n=vk,i=_k;function a(o,c=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),i.iteratee(c)):[]}e.uniqBy=a})(pk);var O3=pk.uniqBy;const Nw=Dn(O3);function Tk(e,t,r){return t===!0?Nw(e,r):typeof t=="function"?Nw(e,t):e}var Ak={exports:{}},Mk={},Lk={exports:{}},Dk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=_;function T3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var A3=typeof Object.is=="function"?Object.is:T3,M3=so.useState,L3=so.useEffect,D3=so.useLayoutEffect,I3=so.useDebugValue;function R3(e,t){var r=t(),n=M3({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return D3(function(){i.value=r,i.getSnapshot=t,sp(i)&&a({inst:i})},[e,r,t]),L3(function(){return sp(i)&&a({inst:i}),e(function(){sp(i)&&a({inst:i})})},[e]),I3(r),r}function sp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!A3(e,r)}catch{return!0}}function $3(e,t){return t()}var z3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$3:R3;Dk.useSyncExternalStore=so.useSyncExternalStore!==void 0?so.useSyncExternalStore:z3;Lk.exports=Dk;var B3=Lk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oh=_,F3=B3;function U3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var W3=typeof Object.is=="function"?Object.is:U3,H3=F3.useSyncExternalStore,K3=oh.useRef,Z3=oh.useEffect,V3=oh.useMemo,q3=oh.useDebugValue;Mk.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=K3(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=V3(function(){function d(v){if(!f){if(f=!0,h=v,v=n(v),i!==void 0&&o.hasValue){var j=o.value;if(i(j,v))return m=j}return m=v}if(j=m,W3(h,v))return j;var w=n(v);return i!==void 0&&i(j,w)?(h=v,j):(h=v,m=w)}var f=!1,h,m,g=r===void 0?null:r;return[function(){return d(t())},g===null?void 0:function(){return d(g())}]},[t,r,n,i]);var c=H3(e,a[0],a[1]);return Z3(function(){o.hasValue=!0,o.value=c},[c]),q3(c),c};Ak.exports=Mk;var G3=Ak.exports,t0=_.createContext(null),Y3=e=>e,Xe=()=>{var e=_.useContext(t0);return e?e.store.dispatch:Y3},ad=()=>{},X3=()=>ad,J3=(e,t)=>e===t;function le(e){var t=_.useContext(t0);return G3.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:X3,t?t.store.getState:ad,t?t.store.getState:ad,t?e:ad,J3)}function Q3(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function e4(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function t4(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Cw=e=>Array.isArray(e)?e:[e];function r4(e){const t=Array.isArray(e[0])?e[0]:e;return t4(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function n4(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var i4=class{constructor(e){this.value=e}deref(){return this.value}},a4=typeof WeakRef<"u"?WeakRef:i4,s4=0,Ew=1;function Pu(){return{s:s4,v:void 0,o:null,p:null}}function Ik(e,t={}){let r=Pu();const{resultEqualityCheck:n}=t;let i,a=0;function o(){var m;let c=r;const{length:d}=arguments;for(let g=0,v=d;g<v;g++){const j=arguments[g];if(typeof j=="function"||typeof j=="object"&&j!==null){let w=c.o;w===null&&(c.o=w=new WeakMap);const P=w.get(j);P===void 0?(c=Pu(),w.set(j,c)):c=P}else{let w=c.p;w===null&&(c.p=w=new Map);const P=w.get(j);P===void 0?(c=Pu(),w.set(j,c)):c=P}}const f=c;let h;if(c.s===Ew)h=c.v;else if(h=e.apply(null,arguments),a++,n){const g=((m=i==null?void 0:i.deref)==null?void 0:m.call(i))??i;g!=null&&n(g,h)&&(h=g,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new a4(h):h}return f.s=Ew,f.v=h,h}return o.clearCache=()=>{r=Pu(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function o4(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let a=0,o=0,c,d={},f=i.pop();typeof f=="object"&&(d=f,f=i.pop()),Q3(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...r,...d},{memoize:m,memoizeOptions:g=[],argsMemoize:v=Ik,argsMemoizeOptions:j=[],devModeChecks:w={}}=h,P=Cw(g),b=Cw(j),x=r4(i),S=m(function(){return a++,f.apply(null,arguments)},...P),O=v(function(){o++;const C=n4(x,arguments);return c=S.apply(null,C),c},...b);return Object.assign(O,{resultFunc:f,memoizedResultFunc:S,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:m,argsMemoize:v})};return Object.assign(n,{withTypes:()=>n}),n}var K=o4(Ik),l4=Object.assign((e,t=K)=>{e4(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((o,c,d)=>(o[r[d]]=c,o),{}))},{withTypes:()=>l4}),Rk={},$k={},zk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const o=t(n),c=t(i);if(o===c&&o===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?c-o:o-c}return 0};e.compareValues=r})(zk);var Bk={},r0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(r0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r0,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||o!=null&&Object.hasOwn(o,a)}e.isKey=i})(Bk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zk,r=Bk,n=Zf;function i(a,o,c,d){if(a==null)return[];c=d?void 0:c,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(v=>String(v));const f=(v,j)=>{let w=v;for(let P=0;P<j.length&&w!=null;++P)w=w[j[P]];return w},h=(v,j)=>j==null||v==null?j:typeof v=="object"&&"key"in v?Object.hasOwn(j,v.key)?j[v.key]:f(j,v.path):typeof v=="function"?v(j):Array.isArray(v)?f(j,v):typeof j=="object"?j[v]:j,m=o.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||r.isKey(v)?v:{key:v,path:n.toPath(v)}));return a.map(v=>({original:v,criteria:m.map(j=>h(j,v))})).slice().sort((v,j)=>{for(let w=0;w<m.length;w++){const P=t.compareValues(v.criteria[w],j.criteria[w],c[w]);if(P!==0)return P}return 0}).map(v=>v.original)}e.orderBy=i})($k);var Fk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],a=Math.floor(n),o=(c,d)=>{for(let f=0;f<c.length;f++){const h=c[f];Array.isArray(h)&&d<a?o(h,d+1):i.push(h)}};return o(r,0),i}e.flatten=t})(Fk);var n0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e0,r=sh,n=Vy,i=Gy;function a(o,c,d){return n.isObject(d)&&(typeof c=="number"&&r.isArrayLike(d)&&t.isIndex(c)&&c<d.length||typeof c=="string"&&c in d)?i.eq(d[c],o):!1}e.isIterateeCall=a})(n0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$k,r=Fk,n=n0;function i(a,...o){const c=o.length;return c>1&&n.isIterateeCall(a,o[0],o[1])?o=[]:c>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(a,r.flatten(o),["asc"])}e.sortBy=i})(Rk);var c4=Rk.sortBy;const lh=Dn(c4);var Uk=e=>e.legend.settings,u4=e=>e.legend.size,d4=e=>e.legend.payload,f4=K([d4,Uk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?lh(n,r):n});function h4(){return le(f4)}var ku=1;function Wk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=_.useState({height:0,left:0,top:0,width:0}),n=_.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-t.height)>ku||Math.abs(o.left-t.left)>ku||Math.abs(o.top-t.top)>ku||Math.abs(o.width-t.width)>ku)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ot(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var m4=typeof Symbol=="function"&&Symbol.observable||"@@observable",Ow=m4,op=()=>Math.random().toString(36).substring(7).split("").join("."),p4={INIT:`@@redux/INIT${op()}`,REPLACE:`@@redux/REPLACE${op()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${op()}`},Bd=p4;function i0(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Hk(e,t,r){if(typeof e!="function")throw new Error(Ot(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ot(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ot(1));return r(Hk)(e,t)}let n=e,i=t,a=new Map,o=a,c=0,d=!1;function f(){o===a&&(o=new Map,a.forEach((P,b)=>{o.set(b,P)}))}function h(){if(d)throw new Error(Ot(3));return i}function m(P){if(typeof P!="function")throw new Error(Ot(4));if(d)throw new Error(Ot(5));let b=!0;f();const x=c++;return o.set(x,P),function(){if(b){if(d)throw new Error(Ot(6));b=!1,f(),o.delete(x),a=null}}}function g(P){if(!i0(P))throw new Error(Ot(7));if(typeof P.type>"u")throw new Error(Ot(8));if(typeof P.type!="string")throw new Error(Ot(17));if(d)throw new Error(Ot(9));try{d=!0,i=n(i,P)}finally{d=!1}return(a=o).forEach(x=>{x()}),P}function v(P){if(typeof P!="function")throw new Error(Ot(10));n=P,g({type:Bd.REPLACE})}function j(){const P=m;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(Ot(11));function x(){const O=b;O.next&&O.next(h())}return x(),{unsubscribe:P(x)}},[Ow](){return this}}}return g({type:Bd.INIT}),{dispatch:g,subscribe:m,getState:h,replaceReducer:v,[Ow]:j}}function g4(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Bd.INIT})>"u")throw new Error(Ot(12));if(typeof r(void 0,{type:Bd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ot(13))})}function Kk(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let i;try{g4(r)}catch(a){i=a}return function(o={},c){if(i)throw i;let d=!1;const f={};for(let h=0;h<n.length;h++){const m=n[h],g=r[m],v=o[m],j=g(v,c);if(typeof j>"u")throw c&&c.type,new Error(Ot(14));f[m]=j,d=d||j!==v}return d=d||n.length!==Object.keys(o).length,d?f:o}}function Fd(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function v4(...e){return t=>(r,n)=>{const i=t(r,n);let a=()=>{throw new Error(Ot(15))};const o={getState:i.getState,dispatch:(d,...f)=>a(d,...f)},c=e.map(d=>d(o));return a=Fd(...c)(i.dispatch),{...i,dispatch:a}}}function Zk(e){return i0(e)&&"type"in e&&typeof e.type=="string"}var Vk=Symbol.for("immer-nothing"),Tw=Symbol.for("immer-draftable"),Sr=Symbol.for("immer-state");function un(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var oo=Object.getPrototypeOf;function Fa(e){return!!e&&!!e[Sr]}function ni(e){var t;return e?qk(e)||Array.isArray(e)||!!e[Tw]||!!((t=e.constructor)!=null&&t[Tw])||Sc(e)||uh(e):!1}var y4=Object.prototype.constructor.toString();function qk(e){if(!e||typeof e!="object")return!1;const t=oo(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===y4}function Ud(e,t){ch(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function ch(e){const t=e[Sr];return t?t.type_:Array.isArray(e)?1:Sc(e)?2:uh(e)?3:0}function Rg(e,t){return ch(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Gk(e,t,r){const n=ch(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function x4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Sc(e){return e instanceof Map}function uh(e){return e instanceof Set}function pa(e){return e.copy_||e.base_}function $g(e,t){if(Sc(e))return new Map(e);if(uh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=qk(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Sr];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const o=i[a],c=n[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[o]})}return Object.create(oo(e),n)}else{const n=oo(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function a0(e,t=!1){return dh(e)||Fa(e)||!ni(e)||(ch(e)>1&&Object.defineProperties(e,{set:{value:Nu},add:{value:Nu},clear:{value:Nu},delete:{value:Nu}}),Object.freeze(e),t&&Object.values(e).forEach(r=>a0(r,!0))),e}function Nu(){un(2)}function dh(e){return Object.isFrozen(e)}var _4={};function Ua(e){const t=_4[e];return t||un(0,e),t}var ac;function Yk(){return ac}function b4(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Aw(e,t){t&&(Ua("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function zg(e){Bg(e),e.drafts_.forEach(w4),e.drafts_=null}function Bg(e){e===ac&&(ac=e.parent_)}function Mw(e){return ac=b4(ac,e)}function w4(e){const t=e[Sr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Lw(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Sr].modified_&&(zg(t),un(4)),ni(e)&&(e=Wd(t,e),t.parent_||Hd(t,e)),t.patches_&&Ua("Patches").generateReplacementPatches_(r[Sr].base_,e,t.patches_,t.inversePatches_)):e=Wd(t,r,[]),zg(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Vk?e:void 0}function Wd(e,t,r){if(dh(t))return t;const n=t[Sr];if(!n)return Ud(t,(i,a)=>Dw(e,n,t,i,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Hd(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,o=!1;n.type_===3&&(a=new Set(i),i.clear(),o=!0),Ud(a,(c,d)=>Dw(e,n,i,c,d,r,o)),Hd(e,i,!1),r&&e.patches_&&Ua("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Dw(e,t,r,n,i,a,o){if(Fa(i)){const c=a&&t&&t.type_!==3&&!Rg(t.assigned_,n)?a.concat(n):void 0,d=Wd(e,i,c);if(Gk(r,n,d),Fa(d))e.canAutoFreeze_=!1;else return}else o&&r.add(i);if(ni(i)&&!dh(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Wd(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Sc(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Hd(e,i)}}function Hd(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&a0(t,r)}function j4(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Yk(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=s0;r&&(i=[n],a=sc);const{revoke:o,proxy:c}=Proxy.revocable(i,a);return n.draft_=c,n.revoke_=o,c}var s0={get(e,t){if(t===Sr)return e;const r=pa(e);if(!Rg(r,t))return S4(e,r,t);const n=r[t];return e.finalized_||!ni(n)?n:n===lp(e.base_,t)?(cp(e),e.copy_[t]=Ug(n,e)):n},has(e,t){return t in pa(e)},ownKeys(e){return Reflect.ownKeys(pa(e))},set(e,t,r){const n=Xk(pa(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=lp(pa(e),t),a=i==null?void 0:i[Sr];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(x4(r,i)&&(r!==void 0||Rg(e.base_,t)))return!0;cp(e),Fg(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return lp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,cp(e),Fg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=pa(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){un(11)},getPrototypeOf(e){return oo(e.base_)},setPrototypeOf(){un(12)}},sc={};Ud(s0,(e,t)=>{sc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});sc.deleteProperty=function(e,t){return sc.set.call(this,e,t,void 0)};sc.set=function(e,t,r){return s0.set.call(this,e[0],t,r,e[0])};function lp(e,t){const r=e[Sr];return(r?pa(r):e)[t]}function S4(e,t,r){var i;const n=Xk(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function Xk(e,t){if(!(t in e))return;let r=oo(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=oo(r)}}function Fg(e){e.modified_||(e.modified_=!0,e.parent_&&Fg(e.parent_))}function cp(e){e.copy_||(e.copy_=$g(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var P4=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const o=this;return function(d=a,...f){return o.produce(d,h=>r.call(this,h,...f))}}typeof r!="function"&&un(6),n!==void 0&&typeof n!="function"&&un(7);let i;if(ni(t)){const a=Mw(this),o=Ug(t,void 0);let c=!0;try{i=r(o),c=!1}finally{c?zg(a):Bg(a)}return Aw(a,n),Lw(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===Vk&&(i=void 0),this.autoFreeze_&&a0(i,!0),n){const a=[],o=[];Ua("Patches").generateReplacementPatches_(t,i,a,o),n(a,o)}return i}else un(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...c)=>this.produceWithPatches(o,d=>t(d,...c));let n,i;return[this.produce(t,r,(o,c)=>{n=o,i=c}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ni(e)||un(8),Fa(e)&&(e=Xn(e));const t=Mw(this),r=Ug(e,void 0);return r[Sr].isManual_=!0,Bg(t),r}finishDraft(e,t){const r=e&&e[Sr];(!r||!r.isManual_)&&un(9);const{scope_:n}=r;return Aw(n,t),Lw(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Ua("Patches").applyPatches_;return Fa(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Ug(e,t){const r=Sc(e)?Ua("MapSet").proxyMap_(e,t):uh(e)?Ua("MapSet").proxySet_(e,t):j4(e,t);return(t?t.scope_:Yk()).drafts_.push(r),r}function Xn(e){return Fa(e)||un(10,e),Jk(e)}function Jk(e){if(!ni(e)||dh(e))return e;const t=e[Sr];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=$g(e,t.scope_.immer_.useStrictShallowCopy_)}else r=$g(e,!0);return Ud(r,(n,i)=>{Gk(r,n,Jk(i))}),t&&(t.finalized_=!1),r}var k4=new P4,Qk=k4.produce;function eN(e){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,e):i(a)}var N4=eN(),C4=eN,E4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Fd:Fd.apply(null,arguments)};function Vr(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(_r(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Zk(n)&&n.type===e,r}var tN=class vl extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,vl.prototype)}static get[Symbol.species](){return vl}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new vl(...t[0].concat(this)):new vl(...t.concat(this))}};function Iw(e){return ni(e)?Qk(e,()=>{}):e}function Cu(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function O4(e){return typeof e=="boolean"}var T4=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let o=new tN;return r&&(O4(r)?o.push(N4):o.push(C4(r.extraArgument))),o},A4="RTK_autoBatch",Rw=e=>t=>{setTimeout(t,e)},M4=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,a=!1,o=!1;const c=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Rw(10):e.type==="callback"?e.queueNotification:Rw(e.timeout),f=()=>{o=!1,a&&(a=!1,c.forEach(h=>h()))};return Object.assign({},n,{subscribe(h){const m=()=>i&&h(),g=n.subscribe(m);return c.add(h),()=>{g(),c.delete(h)}},dispatch(h){var m;try{return i=!((m=h==null?void 0:h.meta)!=null&&m[A4]),a=!i,a&&(o||(o=!0,d(f))),n.dispatch(h)}finally{i=!0}}})},L4=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new tN(e);return n&&i.push(M4(typeof n=="object"?n:void 0)),i};function D4(e){const t=T4(),{reducer:r=void 0,middleware:n,devTools:i=!0,duplicateMiddlewareCheck:a=!0,preloadedState:o=void 0,enhancers:c=void 0}=e||{};let d;if(typeof r=="function")d=r;else if(i0(r))d=Kk(r);else throw new Error(_r(1));let f;typeof n=="function"?f=n(t):f=t();let h=Fd;i&&(h=E4({trace:!1,...typeof i=="object"&&i}));const m=v4(...f),g=L4(m);let v=typeof c=="function"?c(g):g();const j=h(...v);return Hk(d,o,j)}function rN(e){const t={},r=[];let n;const i={addCase(a,o){const c=typeof a=="string"?a:a.type;if(!c)throw new Error(_r(28));if(c in t)throw new Error(_r(29));return t[c]=o,i},addAsyncThunk(a,o){return o.pending&&(t[a.pending.type]=o.pending),o.rejected&&(t[a.rejected.type]=o.rejected),o.fulfilled&&(t[a.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}function I4(e){return typeof e=="function"}function R4(e,t){let[r,n,i]=rN(t),a;if(I4(e))a=()=>Iw(e());else{const c=Iw(e);a=()=>c}function o(c=a(),d){let f=[r[d.type],...n.filter(({matcher:h})=>h(d)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,m)=>{if(m)if(Fa(h)){const v=m(h,d);return v===void 0?h:v}else{if(ni(h))return Qk(h,g=>m(g,d));{const g=m(h,d);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},c)}return o.getInitialState=a,o}var $4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",z4=(e=21)=>{let t="",r=e;for(;r--;)t+=$4[Math.random()*64|0];return t},B4=Symbol.for("rtk-slice-createasyncthunk");function F4(e,t){return`${e}/${t}`}function U4({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[B4];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(_r(11));typeof process<"u";const c=(typeof i.reducers=="function"?i.reducers(H4()):i.reducers)||{},d=Object.keys(c),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(O,N){const C=typeof O=="string"?O:O.type;if(!C)throw new Error(_r(12));if(C in f.sliceCaseReducersByType)throw new Error(_r(13));return f.sliceCaseReducersByType[C]=N,h},addMatcher(O,N){return f.sliceMatchers.push({matcher:O,reducer:N}),h},exposeAction(O,N){return f.actionCreators[O]=N,h},exposeCaseReducer(O,N){return f.sliceCaseReducersByName[O]=N,h}};d.forEach(O=>{const N=c[O],C={reducerName:O,type:F4(a,O),createNotation:typeof i.reducers=="function"};Z4(N)?q4(C,N,h,t):K4(C,N,h)});function m(){const[O={},N=[],C=void 0]=typeof i.extraReducers=="function"?rN(i.extraReducers):[i.extraReducers],E={...O,...f.sliceCaseReducersByType};return R4(i.initialState,A=>{for(let H in E)A.addCase(H,E[H]);for(let H of f.sliceMatchers)A.addMatcher(H.matcher,H.reducer);for(let H of N)A.addMatcher(H.matcher,H.reducer);C&&A.addDefaultCase(C)})}const g=O=>O,v=new Map,j=new WeakMap;let w;function P(O,N){return w||(w=m()),w(O,N)}function b(){return w||(w=m()),w.getInitialState()}function x(O,N=!1){function C(A){let H=A[O];return typeof H>"u"&&N&&(H=Cu(j,C,b)),H}function E(A=g){const H=Cu(v,N,()=>new WeakMap);return Cu(H,A,()=>{const B={};for(const[R,U]of Object.entries(i.selectors??{}))B[R]=W4(U,A,()=>Cu(j,A,b),N);return B})}return{reducerPath:O,getSelectors:E,get selectors(){return E(C)},selectSlice:C}}const S={name:a,reducer:P,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:b,...x(o),injectInto(O,{reducerPath:N,...C}={}){const E=N??o;return O.inject({reducerPath:E,reducer:P},C),{...S,...x(E,!0)}}};return S}}function W4(e,t,r,n){function i(a,...o){let c=t(a);return typeof c>"u"&&n&&(c=r()),e(c,...o)}return i.unwrapped=e,i}var Cr=U4();function H4(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function K4({type:e,reducerName:t,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!V4(n))throw new Error(_r(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?Vr(e,o):Vr(e))}function Z4(e){return e._reducerDefinitionType==="asyncThunk"}function V4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function q4({type:e,reducerName:t},r,n,i){if(!i)throw new Error(_r(18));const{payloadCreator:a,fulfilled:o,pending:c,rejected:d,settled:f,options:h}=r,m=i(e,a,h);n.exposeAction(t,m),o&&n.addCase(m.fulfilled,o),c&&n.addCase(m.pending,c),d&&n.addCase(m.rejected,d),f&&n.addMatcher(m.settled,f),n.exposeCaseReducer(t,{fulfilled:o||Eu,pending:c||Eu,rejected:d||Eu,settled:f||Eu})}function Eu(){}var G4="task",nN="listener",iN="completed",o0="cancelled",Y4=`task-${o0}`,X4=`task-${iN}`,Wg=`${nN}-${o0}`,J4=`${nN}-${iN}`,fh=class{constructor(e){Sm(this,"name","TaskAbortError");Sm(this,"message");this.code=e,this.message=`${G4} ${o0} (reason: ${e})`}},l0=(e,t)=>{if(typeof e!="function")throw new TypeError(_r(32))},Kd=()=>{},aN=(e,t=Kd)=>(e.catch(t),e),sN=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Oa=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ta=e=>{if(e.aborted){const{reason:t}=e;throw new fh(t)}};function oN(e,t){let r=Kd;return new Promise((n,i)=>{const a=()=>i(new fh(e.reason));if(e.aborted){a();return}r=sN(e,a),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Kd})}var Q4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof fh?"cancelled":"rejected",error:r}}finally{t==null||t()}},Zd=e=>t=>aN(oN(e,t).then(r=>(Ta(e),r))),lN=e=>{const t=Zd(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Vs}=Object,$w={},hh="listenerMiddleware",eR=(e,t)=>{const r=n=>sN(e,()=>Oa(n,e.reason));return(n,i)=>{l0(n);const a=new AbortController;r(a);const o=Q4(async()=>{Ta(e),Ta(a.signal);const c=await n({pause:Zd(a.signal),delay:lN(a.signal),signal:a.signal});return Ta(a.signal),c},()=>Oa(a,X4));return i!=null&&i.autoJoin&&t.push(o.catch(Kd)),{result:Zd(e)(o),cancel(){Oa(a,Y4)}}}},tR=(e,t)=>{const r=async(n,i)=>{Ta(t);let a=()=>{};const c=[new Promise((d,f)=>{let h=e({predicate:n,effect:(m,g)=>{g.unsubscribe(),d([m,g.getState(),g.getOriginalState()])}});a=()=>{h(),f()}})];i!=null&&c.push(new Promise(d=>setTimeout(d,i,null)));try{const d=await oN(t,Promise.race(c));return Ta(t),d}finally{a()}};return(n,i)=>aN(r(n,i))},cN=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=Vr(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(_r(21));return l0(a),{predicate:i,type:t,effect:a}},uN=Vs(e=>{const{type:t,predicate:r,effect:n}=cN(e);return{id:z4(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(_r(22))}}},{withTypes:()=>uN}),zw=(e,t)=>{const{type:r,effect:n,predicate:i}=cN(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},Hg=e=>{e.pending.forEach(t=>{Oa(t,Wg)})},rR=e=>()=>{e.forEach(Hg),e.clear()},Bw=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},dN=Vs(Vr(`${hh}/add`),{withTypes:()=>dN}),nR=Vr(`${hh}/removeAll`),fN=Vs(Vr(`${hh}/remove`),{withTypes:()=>fN}),iR=(...e)=>{console.error(`${hh}/error`,...e)},Pc=(e={})=>{const t=new Map,{extra:r,onError:n=iR}=e;l0(n);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),m=>{h.unsubscribe(),m!=null&&m.cancelActive&&Hg(h)}),a=h=>{const m=zw(t,h)??uN(h);return i(m)};Vs(a,{withTypes:()=>a});const o=h=>{const m=zw(t,h);return m&&(m.unsubscribe(),h.cancelActive&&Hg(m)),!!m};Vs(o,{withTypes:()=>o});const c=async(h,m,g,v)=>{const j=new AbortController,w=tR(a,j.signal),P=[];try{h.pending.add(j),await Promise.resolve(h.effect(m,Vs({},g,{getOriginalState:v,condition:(b,x)=>w(b,x).then(Boolean),take:w,delay:lN(j.signal),pause:Zd(j.signal),extra:r,signal:j.signal,fork:eR(j.signal,P),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((b,x,S)=>{b!==j&&(Oa(b,Wg),S.delete(b))})},cancel:()=>{Oa(j,Wg),h.pending.delete(j)},throwIfCancelled:()=>{Ta(j.signal)}})))}catch(b){b instanceof fh||Bw(n,b,{raisedBy:"effect"})}finally{await Promise.all(P),Oa(j,J4),h.pending.delete(j)}},d=rR(t);return{middleware:h=>m=>g=>{if(!Zk(g))return m(g);if(dN.match(g))return a(g.payload);if(nR.match(g)){d();return}if(fN.match(g))return o(g.payload);let v=h.getState();const j=()=>{if(v===$w)throw new Error(_r(23));return v};let w;try{if(w=m(g),t.size>0){const P=h.getState(),b=Array.from(t.values());for(const x of b){let S=!1;try{S=x.predicate(g,P,v)}catch(O){S=!1,Bw(n,O,{raisedBy:"predicate"})}S&&c(x,g,h,j)}}}finally{v=$w}return w},startListening:a,stopListening:o,clearListeners:d}};function _r(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var aR={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},hN=Cr({name:"chartLayout",initialState:aR,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:sR,setLayout:oR,setChartSize:lR,setScale:cR}=hN.actions,uR=hN.reducer;function Fw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Uw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fw(Object(r),!0).forEach(function(n){dR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dR(e,t,r){return(t=fR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fR(e){var t=hR(e,"string");return typeof t=="symbol"?t:t+""}function hR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vd=Math.PI/180,mR=e=>e*180/Math.PI,ct=(e,t,r,n)=>({x:e+Math.cos(-Vd*n)*r,y:t+Math.sin(-Vd*n)*r}),mN=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},pR=(e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return Math.sqrt((r-i)**2+(n-a)**2)},gR=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:a}=t,o=pR({x:r,y:n},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var c=(r-i)/o,d=Math.acos(c);return n>a&&(d=2*Math.PI-d),{radius:o,angle:mR(d),angleInRadian:d}},vR=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:t-a*360,endAngle:r-a*360}},yR=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(i,a);return e+o*360},xR=(e,t)=>{var{x:r,y:n}=e,{radius:i,angle:a}=gR({x:r,y:n},t),{innerRadius:o,outerRadius:c}=t;if(i<o||i>c||i===0)return null;var{startAngle:d,endAngle:f}=vR(t),h=a,m;if(d<=f){for(;h>f;)h-=360;for(;h<d;)h+=360;m=h>=d&&h<=f}else{for(;h>d;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=d}return m?Uw(Uw({},t),{},{radius:i,angle:yR(h,t)}):null};function pN(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ww(Object(r),!0).forEach(function(n){_R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _R(e,t,r){return(t=bR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bR(e){var t=wR(e,"string");return typeof t=="symbol"?t:t+""}function wR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ve(e,t,r){return kt(e)||kt(t)?r:Mn(t)?Ba(e,t,r):typeof t=="function"?t(e):r}var jR=(e,t,r,n,i)=>{var a,o=-1,c=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var d=0;d<c;d++){var f=d>0?r[d-1].coordinate:r[c-1].coordinate,h=r[d].coordinate,m=d>=c-1?r[0].coordinate:r[d+1].coordinate,g=void 0;if(St(h-f)!==St(m-h)){var v=[];if(St(m-h)===St(i[1]-i[0])){g=m;var j=h+i[1]-i[0];v[0]=Math.min(j,(j+f)/2),v[1]=Math.max(j,(j+f)/2)}else{g=f;var w=m+i[1]-i[0];v[0]=Math.min(h,(w+h)/2),v[1]=Math.max(h,(w+h)/2)}var P=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(e>P[0]&&e<=P[1]||e>=v[0]&&e<=v[1]){({index:o}=r[d]);break}}else{var b=Math.min(f,m),x=Math.max(f,m);if(e>(b+h)/2&&e<=(x+h)/2){({index:o}=r[d]);break}}}else if(t){for(var S=0;S<c;S++)if(S===0&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S>0&&S<c-1&&e>(t[S].coordinate+t[S-1].coordinate)/2&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S===c-1&&e>(t[S].coordinate+t[S-1].coordinate)/2){({index:o}=t[S]);break}}return o},SR=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:a,verticalAlign:o,layout:c}=t;if((c==="vertical"||c==="horizontal"&&o==="middle")&&a!=="center"&&de(e[a]))return Br(Br({},e),{},{[a]:e[a]+(n||0)});if((c==="horizontal"||c==="vertical"&&a==="center")&&o!=="middle"&&de(e[o]))return Br(Br({},e),{},{[o]:e[o]+(i||0)})}return e},Ya=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",gN=(e,t,r,n)=>{if(n)return e.map(c=>c.coordinate);var i,a,o=e.map(c=>(c.coordinate===t&&(i=!0),c.coordinate===r&&(a=!0),c.coordinate));return i||o.push(t),a||o.push(r),o},vN=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:a,scale:o,realScaleType:c,isCategorical:d,categoricalDomain:f,tickCount:h,ticks:m,niceTicks:g,axisType:v}=e;if(!o)return null;var j=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,w=i==="category"&&o.bandwidth?o.bandwidth()/j:0;if(w=v==="angleAxis"&&a&&a.length>=2?St(a[0]-a[1])*2*w:w,m||g){var P=(m||g||[]).map((b,x)=>{var S=n?n.indexOf(b):b;return{coordinate:o(S)+w,value:b,offset:w,index:x}});return P.filter(b=>!jr(b.coordinate))}return d&&f?f.map((b,x)=>({coordinate:o(b)+w,value:b,index:x,offset:w})):o.ticks&&!r&&h!=null?o.ticks(h).map((b,x)=>({coordinate:o(b)+w,value:b,offset:w,index:x})):o.domain().map((b,x)=>({coordinate:o(b)+w,value:n?n[b]:b,index:x,offset:w}))},Hw=1e-4,PR=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-Hw,a=Math.max(n[0],n[1])+Hw,o=e(t[0]),c=e(t[r-1]);(o<i||o>a||c<i||c>a)&&e.domain([t[0],t[r-1]])}},kR=(e,t)=>{if(!t||t.length!==2||!de(t[0])||!de(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!de(e[0])||e[0]<r)&&(i[0]=r),(!de(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},NR=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0,o=0;o<t;++o){var c=jr(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=i,e[o][r][1]=i+c,i=e[o][r][1]):(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1])}},CR=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0;a<t;++a){var o=jr(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=i,e[a][r][1]=i+o,i=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},ER={sign:NR,expand:h3,none:ao,silhouette:m3,wiggle:p3,positive:CR},OR=(e,t,r)=>{var n=ER[r],i=f3().keys(t).value((a,o)=>+Ve(a,o,0)).order(Lg).offset(n);return i(e)};function TR(e){return e==null?void 0:String(e)}var Kw=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:a,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var c=Ve(a,t.dataKey,t.scale.domain()[o]);return kt(c)?null:t.scale(c)-i/2+n},AR=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},MR=e=>{var t=e.flat(2).filter(de);return[Math.min(...t),Math.max(...t)]},LR=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],DR=(e,t,r)=>{if(e!=null)return LR(Object.keys(e).reduce((n,i)=>{var a=e[i],{stackedData:o}=a,c=o.reduce((d,f)=>{var h=pN(f,t,r),m=MR(h);return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],n[0]),Math.max(c[1],n[1])]},[1/0,-1/0]))},Zw=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Vw=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,c0=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=lh(t,h=>h.coordinate),a=1/0,o=1,c=i.length;o<c;o++){var d=i[o],f=i[o-1];a=Math.min((d.coordinate||0)-(f.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function qw(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:a}=e;return Br(Br({},t),{},{dataKey:r,payload:n,value:i,name:a})}function mh(e,t){if(e)return String(e);if(typeof t=="string")return t}function IR(e,t,r,n,i){if(r==="horizontal"||r==="vertical"){var a=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return a?{x:e,y:t}:null}return n?xR({x:e,y:t},n):null}var RR=(e,t,r,n)=>{var i=t.find(f=>f&&f.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:i.coordinate};if(e==="centric"){var a=i.coordinate,{radius:o}=n;return Br(Br(Br({},n),ct(n.cx,n.cy,o,a)),{},{angle:a,radius:o})}var c=i.coordinate,{angle:d}=n;return Br(Br(Br({},n),ct(n.cx,n.cy,c,d)),{},{angle:d,radius:c})}return{x:0,y:0}},$R=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,li=e=>e.layout.width,ci=e=>e.layout.height,zR=e=>e.layout.scale,yN=e=>e.layout.margin,ph=K(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),gh=K(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),xN="data-recharts-item-index",_N="data-recharts-item-data-key",kc=60;function Gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ou(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gw(Object(r),!0).forEach(function(n){BR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BR(e,t,r){return(t=FR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FR(e){var t=UR(e,"string");return typeof t=="symbol"?t:t+""}function UR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WR=e=>e.brush.height;function HR(e){var t=gh(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:kc;return r+i}return r},0)}function KR(e){var t=gh(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:kc;return r+i}return r},0)}function ZR(e){var t=ph(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function VR(e){var t=ph(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var vt=K([li,ci,yN,WR,HR,KR,ZR,VR,Uk,u4],(e,t,r,n,i,a,o,c,d,f)=>{var h={left:(r.left||0)+i,right:(r.right||0)+a},m={top:(r.top||0)+o,bottom:(r.bottom||0)+c},g=Ou(Ou({},m),h),v=g.bottom;g.bottom+=n,g=SR(g,d,f);var j=e-g.left-g.right,w=t-g.top-g.bottom;return Ou(Ou({brushBottom:v},g),{},{width:Math.max(j,0),height:Math.max(w,0)})}),qR=K(vt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),u0=K(li,ci,(e,t)=>({x:0,y:0,width:e,height:t})),GR=_.createContext(null),Yr=()=>_.useContext(GR)!=null,vh=e=>e.brush,yh=K([vh,vt,yN],(e,t,r)=>({height:e.height,x:de(e.x)?e.x:t.left,y:de(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:de(e.width)?e.width:t.width})),d0=()=>{var e,t=Yr(),r=le(qR),n=le(yh),i=(e=le(vh))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},YR={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},bN=()=>{var e;return(e=le(vt))!==null&&e!==void 0?e:YR},f0=()=>le(li),h0=()=>le(ci),XR=()=>le(e=>e.layout.margin),ke=e=>e.layout.layoutType,m0=()=>le(ke),JR={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},wN=Cr({name:"legend",initialState:JR,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Xn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Yw,setLegendSettings:QR,addLegendPayload:jN,removeLegendPayload:SN}=wN.actions,e5=wN.reducer,t5=["contextPayload"];function Kg(){return Kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kg.apply(null,arguments)}function Xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xw(Object(r),!0).forEach(function(n){p0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p0(e,t,r){return(t=r5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r5(e){var t=n5(e,"string");return typeof t=="symbol"?t:t+""}function n5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i5(e,t){if(e==null)return{};var r,n,i=a5(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function a5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function s5(e){return e.value}function o5(e){var{contextPayload:t}=e,r=i5(e,t5),n=Tk(t,e.payloadUniqBy,s5),i=lo(lo({},r),{},{payload:n});return _.isValidElement(e.content)?_.cloneElement(e.content,i):typeof e.content=="function"?_.createElement(e.content,i):_.createElement(Ky,i)}function l5(e,t,r,n,i,a){var{layout:o,align:c,verticalAlign:d}=t,f,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(c==="center"&&o==="vertical"?f={left:((n||0)-a.width)/2}:f=c==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?h={top:((i||0)-a.height)/2}:h=d==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),lo(lo({},f),h)}function c5(e){var t=Xe();return _.useEffect(()=>{t(QR(e))},[t,e]),null}function u5(e){var t=Xe();return _.useEffect(()=>(t(Yw(e)),()=>{t(Yw({width:0,height:0}))}),[t,e]),null}function d5(e){var t=h4(),r=II(),n=XR(),{width:i,height:a,wrapperStyle:o,portal:c}=e,[d,f]=Wk([t]),h=f0(),m=h0();if(h==null||m==null)return null;var g=h-(n.left||0)-(n.right||0),v=Wa.getWidthOrHeight(e.layout,a,i,g),j=c?o:lo(lo({position:"absolute",width:(v==null?void 0:v.width)||i||"auto",height:(v==null?void 0:v.height)||a||"auto"},l5(o,e,n,h,m,d)),o),w=c??r;if(w==null)return null;var P=_.createElement("div",{className:"recharts-legend-wrapper",style:j,ref:f},_.createElement(c5,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),_.createElement(u5,{width:d.width,height:d.height}),_.createElement(o5,Kg({},e,v,{margin:n,chartWidth:h,chartHeight:m,contextPayload:t})));return Uf.createPortal(P,w)}class Wa extends _.PureComponent{static getWidthOrHeight(t,r,n,i){return t==="vertical"&&de(r)?{height:r}:t==="horizontal"?{width:n||i}:null}render(){return _.createElement(d5,this.props)}}p0(Wa,"displayName","Legend");p0(Wa,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zg.apply(null,arguments)}function Jw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function up(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jw(Object(r),!0).forEach(function(n){f5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f5(e,t,r){return(t=h5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h5(e){var t=m5(e,"string");return typeof t=="symbol"?t:t+""}function m5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p5(e){return Array.isArray(e)&&Mn(e[0])&&Mn(e[1])?e.join(" ~ "):e}var g5=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:o,itemSorter:c,wrapperClassName:d,labelClassName:f,label:h,labelFormatter:m,accessibilityLayer:g=!1}=e,v=()=>{if(a&&a.length){var N={padding:0,margin:0},C=(c?lh(a,c):a).map((E,A)=>{if(E.type==="none")return null;var H=E.formatter||o||p5,{value:B,name:R}=E,U=B,I=R;if(H){var D=H(B,R,E,A,a);if(Array.isArray(D))[U,I]=D;else if(D!=null)U=D;else return null}var $=up({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:$},Mn(I)?_.createElement("span",{className:"recharts-tooltip-item-name"},I):null,Mn(I)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},U),_.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:N},C)}return null},j=up({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=up({margin:0},i),P=!kt(h),b=P?h:"",x=Oe("recharts-default-tooltip",d),S=Oe("recharts-tooltip-label",f);P&&m&&a!==void 0&&a!==null&&(b=m(h,a));var O=g?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",Zg({className:x,style:j},O),_.createElement("p",{className:S,style:w},_.isValidElement(b)?b:"".concat(b)),v())},nl="recharts-tooltip-wrapper",v5={visibility:"hidden"};function y5(e){var{coordinate:t,translateX:r,translateY:n}=e;return Oe(nl,{["".concat(nl,"-right")]:de(r)&&t&&de(t.x)&&r>=t.x,["".concat(nl,"-left")]:de(r)&&t&&de(t.x)&&r<t.x,["".concat(nl,"-bottom")]:de(n)&&t&&de(t.y)&&n>=t.y,["".concat(nl,"-top")]:de(n)&&t&&de(t.y)&&n<t.y})}function Qw(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:c,viewBox:d,viewBoxDimension:f}=e;if(a&&de(a[n]))return a[n];var h=r[n]-c-(i>0?i:0),m=r[n]+i;if(t[n])return o[n]?h:m;var g=d[n];if(g==null)return 0;if(o[n]){var v=h,j=g;return v<j?Math.max(m,g):Math.max(h,g)}if(f==null)return 0;var w=m+c,P=g+f;return w>P?Math.max(h,g):Math.max(m,g)}function x5(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function _5(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:c,viewBox:d}=e,f,h,m;return o.height>0&&o.width>0&&r?(h=Qw({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=Qw({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),f=x5({translateX:h,translateY:m,useTranslate3d:c})):f=v5,{cssProperties:f,cssClasses:y5({translateX:h,translateY:m,coordinate:r})}}function e1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Tu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e1(Object(r),!0).forEach(function(n){Vg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vg(e,t,r){return(t=b5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b5(e){var t=w5(e,"string");return typeof t=="symbol"?t:t+""}function w5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class j5 extends _.PureComponent{constructor(){super(...arguments),Vg(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Vg(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:o,hasPayload:c,isAnimationActive:d,offset:f,position:h,reverseDirection:m,useTranslate3d:g,viewBox:v,wrapperStyle:j,lastBoundingBox:w,innerRef:P,hasPortalFromProps:b}=this.props,{cssClasses:x,cssProperties:S}=_5({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:f,position:h,reverseDirection:m,tooltipBox:{height:w.height,width:w.width},useTranslate3d:g,viewBox:v}),O=b?{}:Tu(Tu({transition:d&&t?"transform ".concat(n,"ms ").concat(i):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),N=Tu(Tu({},O),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},j);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:x,style:N,ref:P},a)}}var S5=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Xa={devToolsEnabled:!1,isSsr:S5()},PN=()=>le(e=>e.rootProps.accessibilityLayer);function Pr(e){return Number.isFinite(e)}function co(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function qg(){return qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qg.apply(null,arguments)}function t1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function r1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t1(Object(r),!0).forEach(function(n){P5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P5(e,t,r){return(t=k5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k5(e){var t=N5(e,"string");return typeof t=="symbol"?t:t+""}function N5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n1={curveBasisClosed:t3,curveBasisOpen:r3,curveBasis:e3,curveBumpX:BI,curveBumpY:FI,curveLinearClosed:n3,curveLinear:ih,curveMonotoneX:i3,curveMonotoneY:a3,curveNatural:s3,curveStep:o3,curveStepAfter:c3,curveStepBefore:l3},Au=e=>Pr(e.x)&&Pr(e.y),il=e=>e.x,al=e=>e.y,C5=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(wc(e));return(r==="curveMonotone"||r==="curveBump")&&t?n1["".concat(r).concat(t==="vertical"?"Y":"X")]:n1[r]||ih},E5=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=e,o=C5(t,i),c=a?r.filter(Au):r,d;if(Array.isArray(n)){var f=a?n.filter(m=>Au(m)):n,h=c.map((m,g)=>r1(r1({},m),{},{base:f[g]}));return i==="vertical"?d=Su().y(al).x1(il).x0(m=>m.base.x):d=Su().x(il).y1(al).y0(m=>m.base.y),d.defined(Au).curve(o),d(h)}return i==="vertical"&&de(n)?d=Su().y(al).x1(il).x0(n):de(n)?d=Su().x(il).y1(al).y0(n):d=nk().x(il).y(al),d.defined(Au).curve(o),d(c)},kN=e=>{var{className:t,points:r,path:n,pathRef:i}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?E5(e):n;return _.createElement("path",qg({},Xi(e),kI(e),{className:Oe("recharts-curve",t),d:a===null?void 0:a,ref:i}))},O5=["x","y","top","left","width","height","className"];function Gg(){return Gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gg.apply(null,arguments)}function i1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function T5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i1(Object(r),!0).forEach(function(n){A5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A5(e,t,r){return(t=M5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M5(e){var t=L5(e,"string");return typeof t=="symbol"?t:t+""}function L5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D5(e,t){if(e==null)return{};var r,n,i=I5(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function I5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var R5=(e,t,r,n,i,a)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),$5=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:a=0,height:o=0,className:c}=e,d=D5(e,O5),f=T5({x:t,y:r,top:n,left:i,width:a,height:o},d);return!de(t)||!de(r)||!de(a)||!de(o)||!de(n)||!de(i)?null:_.createElement("path",Gg({},gt(f,!0),{className:Oe("recharts-cross",c),d:R5(t,r,a,o,n,i)}))};function z5(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function a1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function B5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a1(Object(r),!0).forEach(function(n){F5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F5(e,t,r){return(t=U5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U5(e){var t=W5(e,"string");return typeof t=="symbol"?t:t+""}function W5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function er(e,t){var r=B5({},e),n=t,i=Object.keys(t),a=i.reduce((o,c)=>(o[c]===void 0&&n[c]!==void 0&&(o[c]=n[c]),o),r);return a}function H5(){}function s1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function o1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(r),!0).forEach(function(n){K5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K5(e,t,r){return(t=Z5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z5(e){var t=V5(e,"string");return typeof t=="symbol"?t:t+""}function V5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q5=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),NN=(e,t,r)=>e.map(n=>"".concat(q5(n)," ").concat(t,"ms ").concat(r)).join(","),G5=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),oc=(e,t)=>Object.keys(t).reduce((r,n)=>o1(o1({},r),{},{[n]:e(n,t[n])}),{});function l1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(r),!0).forEach(function(n){Y5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y5(e,t,r){return(t=X5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X5(e){var t=J5(e,"string");return typeof t=="symbol"?t:t+""}function J5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qd=(e,t,r)=>e+(t-e)*r,Yg=e=>{var{from:t,to:r}=e;return t!==r},CN=(e,t,r)=>{var n=oc((i,a)=>{if(Yg(a)){var[o,c]=e(a.from,a.to,a.velocity);return At(At({},a),{},{from:o,velocity:c})}return a},t);return r<1?oc((i,a)=>Yg(a)?At(At({},a),{},{velocity:qd(a.velocity,n[i].velocity,r),from:qd(a.from,n[i].from,r)}):a,t):CN(e,n,r-1)};function Q5(e,t,r,n,i,a){var o,c=n.reduce((g,v)=>At(At({},g),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),d=()=>oc((g,v)=>v.from,c),f=()=>!Object.values(c).filter(Yg).length,h=null,m=g=>{o||(o=g);var v=g-o,j=v/r.dt;c=CN(r,c,j),i(At(At(At({},e),t),d())),o=g,f()||(h=a.setTimeout(m))};return()=>(h=a.setTimeout(m),()=>{h()})}function e$(e,t,r,n,i,a,o){var c=null,d=i.reduce((m,g)=>At(At({},m),{},{[g]:[e[g],t[g]]}),{}),f,h=m=>{f||(f=m);var g=(m-f)/n,v=oc((w,P)=>qd(...P,r(g)),d);if(a(At(At(At({},e),t),v)),g<1)c=o.setTimeout(h);else{var j=oc((w,P)=>qd(...P,r(1)),d);a(At(At(At({},e),t),j))}};return()=>(c=o.setTimeout(h),()=>{c()})}const t$=(e,t,r,n,i,a)=>{var o=G5(e,t);return r.isStepper===!0?Q5(e,t,r,o,i,a):e$(e,t,r,n,o,i,a)};var Gd=1e-4,EN=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],ON=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),c1=(e,t)=>r=>{var n=EN(e,t);return ON(n,r)},r$=(e,t)=>r=>{var n=EN(e,t),i=[...n.map((a,o)=>a*o).slice(1),0];return ON(i,r)},u1=function(){for(var t,r,n,i,a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];if(o.length===1)switch(o[0]){case"linear":[t,n,r,i]=[0,0,1,1];break;case"ease":[t,n,r,i]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,i]=[.42,0,1,1];break;case"ease-out":[t,n,r,i]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,i]=[0,0,.58,1];break;default:{var d=o[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,n,r,i]=d[1].split(")")[0].split(",").map(j=>parseFloat(j)))}}else o.length===4&&([t,n,r,i]=o);var f=c1(t,r),h=c1(n,i),m=r$(t,r),g=j=>j>1?1:j<0?0:j,v=j=>{for(var w=j>1?1:j,P=w,b=0;b<8;++b){var x=f(P)-w,S=m(P);if(Math.abs(x-w)<Gd||S<Gd)return h(P);P=g(P-x/S)}return h(P)};return v.isStepper=!1,v},n$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,a=(o,c,d)=>{var f=-(o-c)*r,h=d*n,m=d+(f-h)*i/1e3,g=d*i/1e3+o;return Math.abs(g-c)<Gd&&Math.abs(m)<Gd?[c,0]:[g,m]};return a.isStepper=!0,a.dt=i,a},i$=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return u1(e);case"spring":return n$();default:if(e.split("(")[0]==="cubic-bezier")return u1(e)}return typeof e=="function"?e:null};function a$(e){var t,r=()=>null,n=!1,i=null,a=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var c=o,[d,...f]=c;if(typeof d=="number"){i=e.setTimeout(a.bind(null,f),d);return}a(d),i=e.setTimeout(a.bind(null,f));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,i&&(i(),i=null),a(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class s${setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}function o$(){return a$(new s$)}var l$=_.createContext(o$);function c$(e,t){var r=_.useContext(l$);return _.useMemo(()=>t??r(e),[e,t,r])}var u$={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},d1={t:0},dp={t:1};function xh(e){var t=er(e,u$),{isActive:r,canBegin:n,duration:i,easing:a,begin:o,onAnimationEnd:c,onAnimationStart:d,children:f}=t,h=c$(t.animationId,t.animationManager),[m,g]=_.useState(r?d1:dp),v=_.useRef(null);return _.useEffect(()=>{r||g(dp)},[r]),_.useEffect(()=>{if(!r||!n)return H5;var j=t$(d1,dp,i$(a),i,g,h.getTimeoutController()),w=()=>{v.current=j()};return h.start([d,o,w,i,c]),()=>{h.stop(),v.current&&v.current(),c()}},[r,n,i,a,o,d,c,h]),f(m.t)}function _h(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef(ic(t)),n=_.useRef(e);return n.current!==e&&(r.current=ic(t),n.current=e),r.current}function f1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function h1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f1(Object(r),!0).forEach(function(n){d$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d$(e,t,r){return(t=f$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f$(e){var t=h$(e,"string");return typeof t=="symbol"?t:t+""}function h$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yd(){return Yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yd.apply(null,arguments)}var m1=(e,t,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,c=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,f;if(a>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,g=4;m<g;m++)h[m]=i[m]>a?a:i[m];f="M".concat(e,",").concat(t+o*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(e+c*h[0],",").concat(t)),f+="L ".concat(e+r-c*h[1],",").concat(t),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+o*h[1])),f+="L ".concat(e+r,",").concat(t+n-o*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(e+r-c*h[2],",").concat(t+n)),f+="L ".concat(e+c*h[3],",").concat(t+n),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-o*h[3])),f+="Z"}else if(a>0&&i===+i&&i>0){var v=Math.min(a,i);f="M ".concat(e,",").concat(t+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+c*v,",").concat(t,`
            L `).concat(e+r-c*v,",").concat(t,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+r,",").concat(t+o*v,`
            L `).concat(e+r,",").concat(t+n-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+r-c*v,",").concat(t+n,`
            L `).concat(e+c*v,",").concat(t+n,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e,",").concat(t+n-o*v," Z")}else f="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return f},m$={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TN=e=>{var t=er(e,m$),r=_.useRef(null),[n,i]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var D=r.current.getTotalLength();D&&i(D)}catch{}},[]);var{x:a,y:o,width:c,height:d,radius:f,className:h}=t,{animationEasing:m,animationDuration:g,animationBegin:v,isAnimationActive:j,isUpdateAnimationActive:w}=t,P=_.useRef(c),b=_.useRef(d),x=_.useRef(a),S=_.useRef(o),O=_.useMemo(()=>({x:a,y:o,width:c,height:d,radius:f}),[a,o,c,d,f]),N=_h(O,"rectangle-");if(a!==+a||o!==+o||c!==+c||d!==+d||c===0||d===0)return null;var C=Oe("recharts-rectangle",h);if(!w)return _.createElement("path",Yd({},gt(t,!0),{className:C,d:m1(a,o,c,d,f)}));var E=P.current,A=b.current,H=x.current,B=S.current,R="0px ".concat(n===-1?1:n,"px"),U="".concat(n,"px 0px"),I=NN(["strokeDasharray"],g,typeof m=="string"?m:void 0);return _.createElement(xh,{animationId:N,key:N,canBegin:n>0,duration:g,easing:m,isActive:w,begin:v},D=>{var $=Mt(E,c,D),z=Mt(A,d,D),G=Mt(H,a,D),F=Mt(B,o,D);r.current&&(P.current=$,b.current=z,x.current=G,S.current=F);var Y;return j?D>0?Y={transition:I,strokeDasharray:U}:Y={strokeDasharray:R}:Y={strokeDasharray:U},_.createElement("path",Yd({},gt(t,!0),{className:C,d:m1(G,F,$,z,f),ref:r,style:h1(h1({},Y),t.style)}))})};function AN(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:a}=e,o=ct(t,r,n,i),c=ct(t,r,n,a);return{points:[o,c],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function Xg(){return Xg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xg.apply(null,arguments)}var p$=(e,t)=>{var r=St(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Mu=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:a,isExternal:o,cornerRadius:c,cornerIsExternal:d}=e,f=c*(o?1:-1)+n,h=Math.asin(c/f)/Vd,m=d?i:i+a*h,g=ct(t,r,f,m),v=ct(t,r,n,m),j=d?i-a*h:i,w=ct(t,r,f*Math.cos(h*Vd),j);return{center:g,circleTangency:v,lineTangency:w,theta:h}},MN=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:o}=e,c=p$(a,o),d=a+c,f=ct(t,r,i,a),h=ct(t,r,i,d),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(n>0){var g=ct(t,r,n,a),v=ct(t,r,n,d);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(t,",").concat(r," Z");return m},g$=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:f}=e,h=St(f-d),{circleTangency:m,lineTangency:g,theta:v}=Mu({cx:t,cy:r,radius:i,angle:d,sign:h,cornerRadius:a,cornerIsExternal:c}),{circleTangency:j,lineTangency:w,theta:P}=Mu({cx:t,cy:r,radius:i,angle:f,sign:-h,cornerRadius:a,cornerIsExternal:c}),b=c?Math.abs(d-f):Math.abs(d-f)-v-P;if(b<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):MN({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:d,endAngle:f});var x="M ".concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:S,lineTangency:O,theta:N}=Mu({cx:t,cy:r,radius:n,angle:d,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),{circleTangency:C,lineTangency:E,theta:A}=Mu({cx:t,cy:r,radius:n,angle:f,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),H=c?Math.abs(d-f):Math.abs(d-f)-N-A;if(H<0&&a===0)return"".concat(x,"L").concat(t,",").concat(r,"Z");x+="L".concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(H>180),",").concat(+(h>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,"Z")}else x+="L".concat(t,",").concat(r,"Z");return x},v$={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},LN=e=>{var t=er(e,v$),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:h,className:m}=t;if(a<i||f===h)return null;var g=Oe("recharts-sector",m),v=a-i,j=Wt(o,v,0,!0),w;return j>0&&Math.abs(f-h)<360?w=g$({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(j,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:h}):w=MN({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:f,endAngle:h}),_.createElement("path",Xg({},gt(t,!0),{className:g,d:w}))};function y$(e,t,r){var n,i,a,o;if(e==="horizontal")n=t.x,a=n,i=r.top,o=r.top+r.height;else if(e==="vertical")i=t.y,o=i,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:c,cy:d,innerRadius:f,outerRadius:h,angle:m}=t,g=ct(c,d,f,m),v=ct(c,d,h,m);n=g.x,i=g.y,a=v.x,o=v.y}else return AN(t);return[{x:n,y:i},{x:a,y:o}]}var DN={},IN={},RN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r0;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(RN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RN;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(IN);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n0,r=IN;function n(i,a,o){o&&typeof o!="number"&&t.isIterateeCall(i,a,o)&&(a=o=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),o=o===void 0?i<a?1:-1:r.toFinite(o);const c=Math.max(Math.ceil((a-i)/(o||1)),0),d=new Array(c);for(let f=0;f<c;f++)d[f]=i,i+=o;return d}e.range=n})(DN);var x$=DN.range;const $N=Dn(x$);function Ui(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _$(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function g0(e){let t,r,n;e.length!==2?(t=Ui,r=(c,d)=>Ui(e(c),d),n=(c,d)=>e(c)-d):(t=e===Ui||e===_$?e:b$,r=e,n=e);function i(c,d,f=0,h=c.length){if(f<h){if(t(d,d)!==0)return h;do{const m=f+h>>>1;r(c[m],d)<0?f=m+1:h=m}while(f<h)}return f}function a(c,d,f=0,h=c.length){if(f<h){if(t(d,d)!==0)return h;do{const m=f+h>>>1;r(c[m],d)<=0?f=m+1:h=m}while(f<h)}return f}function o(c,d,f=0,h=c.length){const m=i(c,d,f,h-1);return m>f&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:i,center:o,right:a}}function b$(){return 0}function zN(e){return e===null?NaN:+e}function*w$(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const j$=g0(Ui),Nc=j$.right;g0(zN).center;class p1 extends Map{constructor(t,r=k$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(g1(this,t))}has(t){return super.has(g1(this,t))}set(t,r){return super.set(S$(this,t),r)}delete(t){return super.delete(P$(this,t))}}function g1({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function S$({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function P$({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function k$(e){return e!==null&&typeof e=="object"?e.valueOf():e}function N$(e=Ui){if(e===Ui)return BN;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function BN(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const C$=Math.sqrt(50),E$=Math.sqrt(10),O$=Math.sqrt(2);function Xd(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),o=a>=C$?10:a>=E$?5:a>=O$?2:1;let c,d,f;return i<0?(f=Math.pow(10,-i)/o,c=Math.round(e*f),d=Math.round(t*f),c/f<e&&++c,d/f>t&&--d,f=-f):(f=Math.pow(10,i)*o,c=Math.round(e/f),d=Math.round(t/f),c*f<e&&++c,d*f>t&&--d),d<c&&.5<=r&&r<2?Xd(e,t,r*2):[c,d,f]}function Jg(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,o]=n?Xd(t,e,r):Xd(e,t,r);if(!(a>=i))return[];const c=a-i+1,d=new Array(c);if(n)if(o<0)for(let f=0;f<c;++f)d[f]=(a-f)/-o;else for(let f=0;f<c;++f)d[f]=(a-f)*o;else if(o<0)for(let f=0;f<c;++f)d[f]=(i+f)/-o;else for(let f=0;f<c;++f)d[f]=(i+f)*o;return d}function Qg(e,t,r){return t=+t,e=+e,r=+r,Xd(e,t,r)[2]}function ev(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Qg(t,e,r):Qg(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function v1(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function y1(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function FN(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?BN:N$(i);n>r;){if(n-r>600){const d=n-r+1,f=t-r+1,h=Math.log(d),m=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*m*(d-m)/d)*(f-d/2<0?-1:1),v=Math.max(r,Math.floor(t-f*m/d+g)),j=Math.min(n,Math.floor(t+(d-f)*m/d+g));FN(e,t,v,j,i)}const a=e[t];let o=r,c=n;for(sl(e,r,t),i(e[n],a)>0&&sl(e,r,n);o<c;){for(sl(e,o,c),++o,--c;i(e[o],a)<0;)++o;for(;i(e[c],a)>0;)--c}i(e[r],a)===0?sl(e,r,c):(++c,sl(e,c,n)),c<=t&&(r=c+1),t<=c&&(n=c-1)}return e}function sl(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function T$(e,t,r){if(e=Float64Array.from(w$(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return y1(e);if(t>=1)return v1(e);var n,i=(n-1)*t,a=Math.floor(i),o=v1(FN(e,a).subarray(0,a+1)),c=y1(e.subarray(a+1));return o+(c-o)*(i-a)}}function A$(e,t,r=zN){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),o=+r(e[a],a,e),c=+r(e[a+1],a+1,e);return o+(c-o)*(i-a)}}function M$(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function Xr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ui(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tv=Symbol("implicit");function v0(){var e=new p1,t=[],r=[],n=tv;function i(a){let o=e.get(a);if(o===void 0){if(n!==tv)return n;e.set(a,o=t.push(a)-1)}return r[o%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new p1;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return v0(t,r).unknown(n)},Xr.apply(i,arguments),i}function y0(){var e=v0().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,o,c=!1,d=0,f=0,h=.5;delete e.unknown;function m(){var g=t().length,v=i<n,j=v?i:n,w=v?n:i;a=(w-j)/Math.max(1,g-d+f*2),c&&(a=Math.floor(a)),j+=(w-j-a*(g-d))*h,o=a*(1-d),c&&(j=Math.round(j),o=Math.round(o));var P=M$(g).map(function(b){return j+a*b});return r(v?P.reverse():P)}return e.domain=function(g){return arguments.length?(t(g),m()):t()},e.range=function(g){return arguments.length?([n,i]=g,n=+n,i=+i,m()):[n,i]},e.rangeRound=function(g){return[n,i]=g,n=+n,i=+i,c=!0,m()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(g){return arguments.length?(c=!!g,m()):c},e.padding=function(g){return arguments.length?(d=Math.min(1,f=+g),m()):d},e.paddingInner=function(g){return arguments.length?(d=Math.min(1,g),m()):d},e.paddingOuter=function(g){return arguments.length?(f=+g,m()):f},e.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),m()):h},e.copy=function(){return y0(t(),[n,i]).round(c).paddingInner(d).paddingOuter(f).align(h)},Xr.apply(m(),arguments)}function UN(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return UN(t())},e}function L$(){return UN(y0.apply(null,arguments).paddingInner(1))}function x0(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function WN(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Cc(){}var lc=.7,Jd=1/lc,qs="\\s*([+-]?\\d+)\\s*",cc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",On="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D$=/^#([0-9a-f]{3,8})$/,I$=new RegExp(`^rgb\\(${qs},${qs},${qs}\\)$`),R$=new RegExp(`^rgb\\(${On},${On},${On}\\)$`),$$=new RegExp(`^rgba\\(${qs},${qs},${qs},${cc}\\)$`),z$=new RegExp(`^rgba\\(${On},${On},${On},${cc}\\)$`),B$=new RegExp(`^hsl\\(${cc},${On},${On}\\)$`),F$=new RegExp(`^hsla\\(${cc},${On},${On},${cc}\\)$`),x1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};x0(Cc,uc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_1,formatHex:_1,formatHex8:U$,formatHsl:W$,formatRgb:b1,toString:b1});function _1(){return this.rgb().formatHex()}function U$(){return this.rgb().formatHex8()}function W$(){return HN(this).formatHsl()}function b1(){return this.rgb().formatRgb()}function uc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=D$.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?w1(t):r===3?new or(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Lu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Lu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=I$.exec(e))?new or(t[1],t[2],t[3],1):(t=R$.exec(e))?new or(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$$.exec(e))?Lu(t[1],t[2],t[3],t[4]):(t=z$.exec(e))?Lu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=B$.exec(e))?P1(t[1],t[2]/100,t[3]/100,1):(t=F$.exec(e))?P1(t[1],t[2]/100,t[3]/100,t[4]):x1.hasOwnProperty(e)?w1(x1[e]):e==="transparent"?new or(NaN,NaN,NaN,0):null}function w1(e){return new or(e>>16&255,e>>8&255,e&255,1)}function Lu(e,t,r,n){return n<=0&&(e=t=r=NaN),new or(e,t,r,n)}function H$(e){return e instanceof Cc||(e=uc(e)),e?(e=e.rgb(),new or(e.r,e.g,e.b,e.opacity)):new or}function rv(e,t,r,n){return arguments.length===1?H$(e):new or(e,t,r,n??1)}function or(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}x0(or,rv,WN(Cc,{brighter(e){return e=e==null?Jd:Math.pow(Jd,e),new or(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lc:Math.pow(lc,e),new or(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new or(Aa(this.r),Aa(this.g),Aa(this.b),Qd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j1,formatHex:j1,formatHex8:K$,formatRgb:S1,toString:S1}));function j1(){return`#${Sa(this.r)}${Sa(this.g)}${Sa(this.b)}`}function K$(){return`#${Sa(this.r)}${Sa(this.g)}${Sa(this.b)}${Sa((isNaN(this.opacity)?1:this.opacity)*255)}`}function S1(){const e=Qd(this.opacity);return`${e===1?"rgb(":"rgba("}${Aa(this.r)}, ${Aa(this.g)}, ${Aa(this.b)}${e===1?")":`, ${e})`}`}function Qd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Aa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sa(e){return e=Aa(e),(e<16?"0":"")+e.toString(16)}function P1(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new dn(e,t,r,n)}function HN(e){if(e instanceof dn)return new dn(e.h,e.s,e.l,e.opacity);if(e instanceof Cc||(e=uc(e)),!e)return new dn;if(e instanceof dn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,c=a-i,d=(a+i)/2;return c?(t===a?o=(r-n)/c+(r<n)*6:r===a?o=(n-t)/c+2:o=(t-r)/c+4,c/=d<.5?a+i:2-a-i,o*=60):c=d>0&&d<1?0:o,new dn(o,c,d,e.opacity)}function Z$(e,t,r,n){return arguments.length===1?HN(e):new dn(e,t,r,n??1)}function dn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}x0(dn,Z$,WN(Cc,{brighter(e){return e=e==null?Jd:Math.pow(Jd,e),new dn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lc:Math.pow(lc,e),new dn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new or(fp(e>=240?e-240:e+120,i,n),fp(e,i,n),fp(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new dn(k1(this.h),Du(this.s),Du(this.l),Qd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qd(this.opacity);return`${e===1?"hsl(":"hsla("}${k1(this.h)}, ${Du(this.s)*100}%, ${Du(this.l)*100}%${e===1?")":`, ${e})`}`}}));function k1(e){return e=(e||0)%360,e<0?e+360:e}function Du(e){return Math.max(0,Math.min(1,e||0))}function fp(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const _0=e=>()=>e;function V$(e,t){return function(r){return e+r*t}}function q$(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function G$(e){return(e=+e)==1?KN:function(t,r){return r-t?q$(t,r,e):_0(isNaN(t)?r:t)}}function KN(e,t){var r=t-e;return r?V$(e,r):_0(isNaN(e)?t:e)}const N1=function e(t){var r=G$(t);function n(i,a){var o=r((i=rv(i)).r,(a=rv(a)).r),c=r(i.g,a.g),d=r(i.b,a.b),f=KN(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=c(h),i.b=d(h),i.opacity=f(h),i+""}}return n.gamma=e,n}(1);function Y$(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function X$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function J$(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=So(e[o],t[o]);for(;o<r;++o)a[o]=t[o];return function(c){for(o=0;o<n;++o)a[o]=i[o](c);return a}}function Q$(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function ef(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function e6(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=So(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var nv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hp=new RegExp(nv.source,"g");function t6(e){return function(){return e}}function r6(e){return function(t){return e(t)+""}}function n6(e,t){var r=nv.lastIndex=hp.lastIndex=0,n,i,a,o=-1,c=[],d=[];for(e=e+"",t=t+"";(n=nv.exec(e))&&(i=hp.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),c[o]?c[o]+=a:c[++o]=a),(n=n[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,d.push({i:o,x:ef(n,i)})),r=hp.lastIndex;return r<t.length&&(a=t.slice(r),c[o]?c[o]+=a:c[++o]=a),c.length<2?d[0]?r6(d[0].x):t6(t):(t=d.length,function(f){for(var h=0,m;h<t;++h)c[(m=d[h]).i]=m.x(f);return c.join("")})}function So(e,t){var r=typeof t,n;return t==null||r==="boolean"?_0(t):(r==="number"?ef:r==="string"?(n=uc(t))?(t=n,N1):n6:t instanceof uc?N1:t instanceof Date?Q$:X$(t)?Y$:Array.isArray(t)?J$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?e6:ef)(e,t)}function b0(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function i6(e,t){t===void 0&&(t=e,e=So);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[c](o-c)}}function a6(e){return function(){return e}}function tf(e){return+e}var C1=[0,1];function Yt(e){return e}function iv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:a6(isNaN(t)?NaN:.5)}function s6(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function o6(e,t,r){var n=e[0],i=e[1],a=t[0],o=t[1];return i<n?(n=iv(i,n),a=r(o,a)):(n=iv(n,i),a=r(a,o)),function(c){return a(n(c))}}function l6(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=iv(e[o],e[o+1]),a[o]=r(t[o],t[o+1]);return function(c){var d=Nc(e,c,1,n)-1;return a[d](i[d](c))}}function Ec(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function bh(){var e=C1,t=C1,r=So,n,i,a,o=Yt,c,d,f;function h(){var g=Math.min(e.length,t.length);return o!==Yt&&(o=s6(e[0],e[g-1])),c=g>2?l6:o6,d=f=null,m}function m(g){return g==null||isNaN(g=+g)?a:(d||(d=c(e.map(n),t,r)))(n(o(g)))}return m.invert=function(g){return o(i((f||(f=c(t,e.map(n),ef)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,tf),h()):e.slice()},m.range=function(g){return arguments.length?(t=Array.from(g),h()):t.slice()},m.rangeRound=function(g){return t=Array.from(g),r=b0,h()},m.clamp=function(g){return arguments.length?(o=g?!0:Yt,h()):o!==Yt},m.interpolate=function(g){return arguments.length?(r=g,h()):r},m.unknown=function(g){return arguments.length?(a=g,m):a},function(g,v){return n=g,i=v,h()}}function w0(){return bh()(Yt,Yt)}function c6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function uo(e){return e=rf(Math.abs(e)),e?e[1]:NaN}function u6(e,t){return function(r,n){for(var i=r.length,a=[],o=0,c=e[0],d=0;i>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),a.push(r.substring(i-=c,i+c)),!((d+=c+1)>n));)c=e[o=(o+1)%e.length];return a.reverse().join(t)}}function d6(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var f6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dc(e){if(!(t=f6.exec(e)))throw new Error("invalid format: "+e);var t;return new j0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}dc.prototype=j0.prototype;function j0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}j0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function h6(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var ZN;function m6(e,t){var r=rf(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(ZN=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+rf(e,Math.max(0,t+a-1))[0]}function E1(e,t){var r=rf(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const O1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:c6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>E1(e*100,t),r:E1,s:m6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function T1(e){return e}var A1=Array.prototype.map,M1=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function p6(e){var t=e.grouping===void 0||e.thousands===void 0?T1:u6(A1.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?T1:d6(A1.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function f(m){m=dc(m);var g=m.fill,v=m.align,j=m.sign,w=m.symbol,P=m.zero,b=m.width,x=m.comma,S=m.precision,O=m.trim,N=m.type;N==="n"?(x=!0,N="g"):O1[N]||(S===void 0&&(S=12),O=!0,N="g"),(P||g==="0"&&v==="=")&&(P=!0,g="0",v="=");var C=w==="$"?r:w==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",E=w==="$"?n:/[%p]/.test(N)?o:"",A=O1[N],H=/[defgprs%]/.test(N);S=S===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function B(R){var U=C,I=E,D,$,z;if(N==="c")I=A(R)+I,R="";else{R=+R;var G=R<0||1/R<0;if(R=isNaN(R)?d:A(Math.abs(R),S),O&&(R=h6(R)),G&&+R==0&&j!=="+"&&(G=!1),U=(G?j==="("?j:c:j==="-"||j==="("?"":j)+U,I=(N==="s"?M1[8+ZN/3]:"")+I+(G&&j==="("?")":""),H){for(D=-1,$=R.length;++D<$;)if(z=R.charCodeAt(D),48>z||z>57){I=(z===46?i+R.slice(D+1):R.slice(D))+I,R=R.slice(0,D);break}}}x&&!P&&(R=t(R,1/0));var F=U.length+R.length+I.length,Y=F<b?new Array(b-F+1).join(g):"";switch(x&&P&&(R=t(Y+R,Y.length?b-I.length:1/0),Y=""),v){case"<":R=U+R+I+Y;break;case"=":R=U+Y+R+I;break;case"^":R=Y.slice(0,F=Y.length>>1)+U+R+I+Y.slice(F);break;default:R=Y+U+R+I;break}return a(R)}return B.toString=function(){return m+""},B}function h(m,g){var v=f((m=dc(m),m.type="f",m)),j=Math.max(-8,Math.min(8,Math.floor(uo(g)/3)))*3,w=Math.pow(10,-j),P=M1[8+j/3];return function(b){return v(w*b)+P}}return{format:f,formatPrefix:h}}var Iu,S0,VN;g6({thousands:",",grouping:[3],currency:["$",""]});function g6(e){return Iu=p6(e),S0=Iu.format,VN=Iu.formatPrefix,Iu}function v6(e){return Math.max(0,-uo(Math.abs(e)))}function y6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(uo(t)/3)))*3-uo(Math.abs(e)))}function x6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,uo(t)-uo(e))+1}function qN(e,t,r,n){var i=ev(e,t,r),a;switch(n=dc(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=y6(i,o))&&(n.precision=a),VN(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=x6(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=v6(i))&&(n.precision=a-(n.type==="%")*2);break}}return S0(n)}function Ji(e){var t=e.domain;return e.ticks=function(r){var n=t();return Jg(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return qN(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,o=n[i],c=n[a],d,f,h=10;for(c<o&&(f=o,o=c,c=f,f=i,i=a,a=f);h-- >0;){if(f=Qg(o,c,r),f===d)return n[i]=o,n[a]=c,t(n);if(f>0)o=Math.floor(o/f)*f,c=Math.ceil(c/f)*f;else if(f<0)o=Math.ceil(o*f)/f,c=Math.floor(c*f)/f;else break;d=f}return e},e}function GN(){var e=w0();return e.copy=function(){return Ec(e,GN())},Xr.apply(e,arguments),Ji(e)}function YN(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,tf),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return YN(e).unknown(t)},e=arguments.length?Array.from(e,tf):[0,1],Ji(r)}function XN(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),e[r]=t.floor(i),e[n]=t.ceil(a),e}function L1(e){return Math.log(e)}function D1(e){return Math.exp(e)}function _6(e){return-Math.log(-e)}function b6(e){return-Math.exp(-e)}function w6(e){return isFinite(e)?+("1e"+e):e<0?0:e}function j6(e){return e===10?w6:e===Math.E?Math.exp:t=>Math.pow(e,t)}function S6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function I1(e){return(t,r)=>-e(-t,r)}function P0(e){const t=e(L1,D1),r=t.domain;let n=10,i,a;function o(){return i=S6(n),a=j6(n),r()[0]<0?(i=I1(i),a=I1(a),e(_6,b6)):e(L1,D1),t}return t.base=function(c){return arguments.length?(n=+c,o()):n},t.domain=function(c){return arguments.length?(r(c),o()):r()},t.ticks=c=>{const d=r();let f=d[0],h=d[d.length-1];const m=h<f;m&&([f,h]=[h,f]);let g=i(f),v=i(h),j,w;const P=c==null?10:+c;let b=[];if(!(n%1)&&v-g<P){if(g=Math.floor(g),v=Math.ceil(v),f>0){for(;g<=v;++g)for(j=1;j<n;++j)if(w=g<0?j/a(-g):j*a(g),!(w<f)){if(w>h)break;b.push(w)}}else for(;g<=v;++g)for(j=n-1;j>=1;--j)if(w=g>0?j/a(-g):j*a(g),!(w<f)){if(w>h)break;b.push(w)}b.length*2<P&&(b=Jg(f,h,P))}else b=Jg(g,v,Math.min(v-g,P)).map(a);return m?b.reverse():b},t.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=dc(d)).precision==null&&(d.trim=!0),d=S0(d)),c===1/0)return d;const f=Math.max(1,n*c/t.ticks().length);return h=>{let m=h/a(Math.round(i(h)));return m*n<n-.5&&(m*=n),m<=f?d(h):""}},t.nice=()=>r(XN(r(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),t}function JN(){const e=P0(bh()).domain([1,10]);return e.copy=()=>Ec(e,JN()).base(e.base()),Xr.apply(e,arguments),e}function R1(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function $1(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function k0(e){var t=1,r=e(R1(t),$1(t));return r.constant=function(n){return arguments.length?e(R1(t=+n),$1(t)):t},Ji(r)}function QN(){var e=k0(bh());return e.copy=function(){return Ec(e,QN()).constant(e.constant())},Xr.apply(e,arguments)}function z1(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function P6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function k6(e){return e<0?-e*e:e*e}function N0(e){var t=e(Yt,Yt),r=1;function n(){return r===1?e(Yt,Yt):r===.5?e(P6,k6):e(z1(r),z1(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Ji(t)}function C0(){var e=N0(bh());return e.copy=function(){return Ec(e,C0()).exponent(e.exponent())},Xr.apply(e,arguments),e}function N6(){return C0.apply(null,arguments).exponent(.5)}function B1(e){return Math.sign(e)*e*e}function C6(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function eC(){var e=w0(),t=[0,1],r=!1,n;function i(a){var o=C6(e(a));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(a){return e.invert(B1(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,tf)).map(B1)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return eC(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Xr.apply(i,arguments),Ji(i)}function tC(){var e=[],t=[],r=[],n;function i(){var o=0,c=Math.max(1,t.length);for(r=new Array(c-1);++o<c;)r[o-1]=A$(e,o/c);return a}function a(o){return o==null||isNaN(o=+o)?n:t[Nc(r,o)]}return a.invertExtent=function(o){var c=t.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:e[0],c<r.length?r[c]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let c of o)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(Ui),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return tC().domain(e).range(t).unknown(n)},Xr.apply(a,arguments)}function rC(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function o(d){return d!=null&&d<=d?i[Nc(n,d,0,r)]:a}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,c()):[e,t]},o.range=function(d){return arguments.length?(r=(i=Array.from(d)).length-1,c()):i.slice()},o.invertExtent=function(d){var f=i.indexOf(d);return f<0?[NaN,NaN]:f<1?[e,n[0]]:f>=r?[n[r-1],t]:[n[f-1],n[f]]},o.unknown=function(d){return arguments.length&&(a=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return rC().domain([e,t]).range(i).unknown(a)},Xr.apply(Ji(o),arguments)}function nC(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[Nc(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return nC().domain(e).range(t).unknown(r)},Xr.apply(i,arguments)}const mp=new Date,pp=new Date;function yt(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),c=i.ceil(a);return a-o<c-a?o:c},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,c)=>{const d=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<o)||!(c>0))return d;let f;do d.push(f=new Date(+a)),t(a,c),e(a);while(f<a&&a<o);return d},i.filter=a=>yt(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;t(o,-1),!a(o););else for(;--c>=0;)for(;t(o,1),!a(o););}),r&&(i.count=(a,o)=>(mp.setTime(+a),pp.setTime(+o),e(mp),e(pp),Math.floor(r(mp,pp))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?o=>n(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const nf=yt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);nf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?yt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):nf);nf.range;const qn=1e3,Wr=qn*60,Gn=Wr*60,ii=Gn*24,E0=ii*7,F1=ii*30,gp=ii*365,Pa=yt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getUTCSeconds());Pa.range;const O0=yt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qn)},(e,t)=>{e.setTime(+e+t*Wr)},(e,t)=>(t-e)/Wr,e=>e.getMinutes());O0.range;const T0=yt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Wr)},(e,t)=>(t-e)/Wr,e=>e.getUTCMinutes());T0.range;const A0=yt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qn-e.getMinutes()*Wr)},(e,t)=>{e.setTime(+e+t*Gn)},(e,t)=>(t-e)/Gn,e=>e.getHours());A0.range;const M0=yt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Gn)},(e,t)=>(t-e)/Gn,e=>e.getUTCHours());M0.range;const Oc=yt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Wr)/ii,e=>e.getDate()-1);Oc.range;const wh=yt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ii,e=>e.getUTCDate()-1);wh.range;const iC=yt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ii,e=>Math.floor(e/ii));iC.range;function Ja(e){return yt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Wr)/E0)}const jh=Ja(0),af=Ja(1),E6=Ja(2),O6=Ja(3),fo=Ja(4),T6=Ja(5),A6=Ja(6);jh.range;af.range;E6.range;O6.range;fo.range;T6.range;A6.range;function Qa(e){return yt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/E0)}const Sh=Qa(0),sf=Qa(1),M6=Qa(2),L6=Qa(3),ho=Qa(4),D6=Qa(5),I6=Qa(6);Sh.range;sf.range;M6.range;L6.range;ho.range;D6.range;I6.range;const L0=yt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());L0.range;const D0=yt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());D0.range;const ai=yt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ai.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ai.range;const si=yt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());si.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});si.range;function aC(e,t,r,n,i,a){const o=[[Pa,1,qn],[Pa,5,5*qn],[Pa,15,15*qn],[Pa,30,30*qn],[a,1,Wr],[a,5,5*Wr],[a,15,15*Wr],[a,30,30*Wr],[i,1,Gn],[i,3,3*Gn],[i,6,6*Gn],[i,12,12*Gn],[n,1,ii],[n,2,2*ii],[r,1,E0],[t,1,F1],[t,3,3*F1],[e,1,gp]];function c(f,h,m){const g=h<f;g&&([f,h]=[h,f]);const v=m&&typeof m.range=="function"?m:d(f,h,m),j=v?v.range(f,+h+1):[];return g?j.reverse():j}function d(f,h,m){const g=Math.abs(h-f)/m,v=g0(([,,P])=>P).right(o,g);if(v===o.length)return e.every(ev(f/gp,h/gp,m));if(v===0)return nf.every(Math.max(ev(f,h,m),1));const[j,w]=o[g/o[v-1][2]<o[v][2]/g?v-1:v];return j.every(w)}return[c,d]}const[R6,$6]=aC(si,D0,Sh,iC,M0,T0),[z6,B6]=aC(ai,L0,jh,Oc,A0,O0);function vp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function yp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ol(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function F6(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,o=e.shortDays,c=e.months,d=e.shortMonths,f=ll(i),h=cl(i),m=ll(a),g=cl(a),v=ll(o),j=cl(o),w=ll(c),P=cl(c),b=ll(d),x=cl(d),S={a:G,A:F,b:Y,B:V,c:null,d:V1,e:V1,f:uz,g:_z,G:wz,H:oz,I:lz,j:cz,L:sC,m:dz,M:fz,p:ce,q:ee,Q:Y1,s:X1,S:hz,u:mz,U:pz,V:gz,w:vz,W:yz,x:null,X:null,y:xz,Y:bz,Z:jz,"%":G1},O={a:X,A:te,b:ae,B:oe,c:null,d:q1,e:q1,f:Nz,g:Rz,G:zz,H:Sz,I:Pz,j:kz,L:lC,m:Cz,M:Ez,p:Qe,q:fr,Q:Y1,s:X1,S:Oz,u:Tz,U:Az,V:Mz,w:Lz,W:Dz,x:null,X:null,y:Iz,Y:$z,Z:Bz,"%":G1},N={a:B,A:R,b:U,B:I,c:D,d:K1,e:K1,f:nz,g:H1,G:W1,H:Z1,I:Z1,j:Q6,L:rz,m:J6,M:ez,p:H,q:X6,Q:az,s:sz,S:tz,u:Z6,U:V6,V:q6,w:K6,W:G6,x:$,X:z,y:H1,Y:W1,Z:Y6,"%":iz};S.x=C(r,S),S.X=C(n,S),S.c=C(t,S),O.x=C(r,O),O.X=C(n,O),O.c=C(t,O);function C(se,ge){return function(be){var J=[],_t=-1,Te=0,It=se.length,Rt,Jr,na;for(be instanceof Date||(be=new Date(+be));++_t<It;)se.charCodeAt(_t)===37&&(J.push(se.slice(Te,_t)),(Jr=U1[Rt=se.charAt(++_t)])!=null?Rt=se.charAt(++_t):Jr=Rt==="e"?" ":"0",(na=ge[Rt])&&(Rt=na(be,Jr)),J.push(Rt),Te=_t+1);return J.push(se.slice(Te,_t)),J.join("")}}function E(se,ge){return function(be){var J=ol(1900,void 0,1),_t=A(J,se,be+="",0),Te,It;if(_t!=be.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(ge&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(Te=yp(ol(J.y,0,1)),It=Te.getUTCDay(),Te=It>4||It===0?sf.ceil(Te):sf(Te),Te=wh.offset(Te,(J.V-1)*7),J.y=Te.getUTCFullYear(),J.m=Te.getUTCMonth(),J.d=Te.getUTCDate()+(J.w+6)%7):(Te=vp(ol(J.y,0,1)),It=Te.getDay(),Te=It>4||It===0?af.ceil(Te):af(Te),Te=Oc.offset(Te,(J.V-1)*7),J.y=Te.getFullYear(),J.m=Te.getMonth(),J.d=Te.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),It="Z"in J?yp(ol(J.y,0,1)).getUTCDay():vp(ol(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(It+5)%7:J.w+J.U*7-(It+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,yp(J)):vp(J)}}function A(se,ge,be,J){for(var _t=0,Te=ge.length,It=be.length,Rt,Jr;_t<Te;){if(J>=It)return-1;if(Rt=ge.charCodeAt(_t++),Rt===37){if(Rt=ge.charAt(_t++),Jr=N[Rt in U1?ge.charAt(_t++):Rt],!Jr||(J=Jr(se,be,J))<0)return-1}else if(Rt!=be.charCodeAt(J++))return-1}return J}function H(se,ge,be){var J=f.exec(ge.slice(be));return J?(se.p=h.get(J[0].toLowerCase()),be+J[0].length):-1}function B(se,ge,be){var J=v.exec(ge.slice(be));return J?(se.w=j.get(J[0].toLowerCase()),be+J[0].length):-1}function R(se,ge,be){var J=m.exec(ge.slice(be));return J?(se.w=g.get(J[0].toLowerCase()),be+J[0].length):-1}function U(se,ge,be){var J=b.exec(ge.slice(be));return J?(se.m=x.get(J[0].toLowerCase()),be+J[0].length):-1}function I(se,ge,be){var J=w.exec(ge.slice(be));return J?(se.m=P.get(J[0].toLowerCase()),be+J[0].length):-1}function D(se,ge,be){return A(se,t,ge,be)}function $(se,ge,be){return A(se,r,ge,be)}function z(se,ge,be){return A(se,n,ge,be)}function G(se){return o[se.getDay()]}function F(se){return a[se.getDay()]}function Y(se){return d[se.getMonth()]}function V(se){return c[se.getMonth()]}function ce(se){return i[+(se.getHours()>=12)]}function ee(se){return 1+~~(se.getMonth()/3)}function X(se){return o[se.getUTCDay()]}function te(se){return a[se.getUTCDay()]}function ae(se){return d[se.getUTCMonth()]}function oe(se){return c[se.getUTCMonth()]}function Qe(se){return i[+(se.getUTCHours()>=12)]}function fr(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var ge=C(se+="",S);return ge.toString=function(){return se},ge},parse:function(se){var ge=E(se+="",!1);return ge.toString=function(){return se},ge},utcFormat:function(se){var ge=C(se+="",O);return ge.toString=function(){return se},ge},utcParse:function(se){var ge=E(se+="",!0);return ge.toString=function(){return se},ge}}}var U1={"-":"",_:" ",0:"0"},Nt=/^\s*\d+/,U6=/^%/,W6=/[\\^$*+?|[\]().{}]/g;function Pe(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function H6(e){return e.replace(W6,"\\$&")}function ll(e){return new RegExp("^(?:"+e.map(H6).join("|")+")","i")}function cl(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function K6(e,t,r){var n=Nt.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Z6(e,t,r){var n=Nt.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function V6(e,t,r){var n=Nt.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function q6(e,t,r){var n=Nt.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function G6(e,t,r){var n=Nt.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function W1(e,t,r){var n=Nt.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function H1(e,t,r){var n=Nt.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Y6(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function X6(e,t,r){var n=Nt.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function J6(e,t,r){var n=Nt.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function K1(e,t,r){var n=Nt.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Q6(e,t,r){var n=Nt.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Z1(e,t,r){var n=Nt.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function ez(e,t,r){var n=Nt.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function tz(e,t,r){var n=Nt.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function rz(e,t,r){var n=Nt.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function nz(e,t,r){var n=Nt.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function iz(e,t,r){var n=U6.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function az(e,t,r){var n=Nt.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function sz(e,t,r){var n=Nt.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function V1(e,t){return Pe(e.getDate(),t,2)}function oz(e,t){return Pe(e.getHours(),t,2)}function lz(e,t){return Pe(e.getHours()%12||12,t,2)}function cz(e,t){return Pe(1+Oc.count(ai(e),e),t,3)}function sC(e,t){return Pe(e.getMilliseconds(),t,3)}function uz(e,t){return sC(e,t)+"000"}function dz(e,t){return Pe(e.getMonth()+1,t,2)}function fz(e,t){return Pe(e.getMinutes(),t,2)}function hz(e,t){return Pe(e.getSeconds(),t,2)}function mz(e){var t=e.getDay();return t===0?7:t}function pz(e,t){return Pe(jh.count(ai(e)-1,e),t,2)}function oC(e){var t=e.getDay();return t>=4||t===0?fo(e):fo.ceil(e)}function gz(e,t){return e=oC(e),Pe(fo.count(ai(e),e)+(ai(e).getDay()===4),t,2)}function vz(e){return e.getDay()}function yz(e,t){return Pe(af.count(ai(e)-1,e),t,2)}function xz(e,t){return Pe(e.getFullYear()%100,t,2)}function _z(e,t){return e=oC(e),Pe(e.getFullYear()%100,t,2)}function bz(e,t){return Pe(e.getFullYear()%1e4,t,4)}function wz(e,t){var r=e.getDay();return e=r>=4||r===0?fo(e):fo.ceil(e),Pe(e.getFullYear()%1e4,t,4)}function jz(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Pe(t/60|0,"0",2)+Pe(t%60,"0",2)}function q1(e,t){return Pe(e.getUTCDate(),t,2)}function Sz(e,t){return Pe(e.getUTCHours(),t,2)}function Pz(e,t){return Pe(e.getUTCHours()%12||12,t,2)}function kz(e,t){return Pe(1+wh.count(si(e),e),t,3)}function lC(e,t){return Pe(e.getUTCMilliseconds(),t,3)}function Nz(e,t){return lC(e,t)+"000"}function Cz(e,t){return Pe(e.getUTCMonth()+1,t,2)}function Ez(e,t){return Pe(e.getUTCMinutes(),t,2)}function Oz(e,t){return Pe(e.getUTCSeconds(),t,2)}function Tz(e){var t=e.getUTCDay();return t===0?7:t}function Az(e,t){return Pe(Sh.count(si(e)-1,e),t,2)}function cC(e){var t=e.getUTCDay();return t>=4||t===0?ho(e):ho.ceil(e)}function Mz(e,t){return e=cC(e),Pe(ho.count(si(e),e)+(si(e).getUTCDay()===4),t,2)}function Lz(e){return e.getUTCDay()}function Dz(e,t){return Pe(sf.count(si(e)-1,e),t,2)}function Iz(e,t){return Pe(e.getUTCFullYear()%100,t,2)}function Rz(e,t){return e=cC(e),Pe(e.getUTCFullYear()%100,t,2)}function $z(e,t){return Pe(e.getUTCFullYear()%1e4,t,4)}function zz(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ho(e):ho.ceil(e),Pe(e.getUTCFullYear()%1e4,t,4)}function Bz(){return"+0000"}function G1(){return"%"}function Y1(e){return+e}function X1(e){return Math.floor(+e/1e3)}var hs,uC,dC;Fz({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Fz(e){return hs=F6(e),uC=hs.format,hs.parse,dC=hs.utcFormat,hs.utcParse,hs}function Uz(e){return new Date(e)}function Wz(e){return e instanceof Date?+e:+new Date(+e)}function I0(e,t,r,n,i,a,o,c,d,f){var h=w0(),m=h.invert,g=h.domain,v=f(".%L"),j=f(":%S"),w=f("%I:%M"),P=f("%I %p"),b=f("%a %d"),x=f("%b %d"),S=f("%B"),O=f("%Y");function N(C){return(d(C)<C?v:c(C)<C?j:o(C)<C?w:a(C)<C?P:n(C)<C?i(C)<C?b:x:r(C)<C?S:O)(C)}return h.invert=function(C){return new Date(m(C))},h.domain=function(C){return arguments.length?g(Array.from(C,Wz)):g().map(Uz)},h.ticks=function(C){var E=g();return e(E[0],E[E.length-1],C??10)},h.tickFormat=function(C,E){return E==null?N:f(E)},h.nice=function(C){var E=g();return(!C||typeof C.range!="function")&&(C=t(E[0],E[E.length-1],C??10)),C?g(XN(E,C)):h},h.copy=function(){return Ec(h,I0(e,t,r,n,i,a,o,c,d,f))},h}function Hz(){return Xr.apply(I0(z6,B6,ai,L0,jh,Oc,A0,O0,Pa,uC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Kz(){return Xr.apply(I0(R6,$6,si,D0,Sh,wh,M0,T0,Pa,dC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ph(){var e=0,t=1,r,n,i,a,o=Yt,c=!1,d;function f(m){return m==null||isNaN(m=+m)?d:o(i===0?.5:(m=(a(m)-r)*i,c?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([e,t]=m,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),f):[e,t]},f.clamp=function(m){return arguments.length?(c=!!m,f):c},f.interpolator=function(m){return arguments.length?(o=m,f):o};function h(m){return function(g){var v,j;return arguments.length?([v,j]=g,o=m(v,j),f):[o(0),o(1)]}}return f.range=h(So),f.rangeRound=h(b0),f.unknown=function(m){return arguments.length?(d=m,f):d},function(m){return a=m,r=m(e),n=m(t),i=r===n?0:1/(n-r),f}}function Qi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fC(){var e=Ji(Ph()(Yt));return e.copy=function(){return Qi(e,fC())},ui.apply(e,arguments)}function hC(){var e=P0(Ph()).domain([1,10]);return e.copy=function(){return Qi(e,hC()).base(e.base())},ui.apply(e,arguments)}function mC(){var e=k0(Ph());return e.copy=function(){return Qi(e,mC()).constant(e.constant())},ui.apply(e,arguments)}function R0(){var e=N0(Ph());return e.copy=function(){return Qi(e,R0()).exponent(e.exponent())},ui.apply(e,arguments)}function Zz(){return R0.apply(null,arguments).exponent(.5)}function pC(){var e=[],t=Yt;function r(n){if(n!=null&&!isNaN(n=+n))return t((Nc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Ui),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>T$(e,a/n))},r.copy=function(){return pC(t).domain(e)},ui.apply(r,arguments)}function kh(){var e=0,t=.5,r=1,n=1,i,a,o,c,d,f=Yt,h,m=!1,g;function v(w){return isNaN(w=+w)?g:(w=.5+((w=+h(w))-a)*(n*w<n*a?c:d),f(m?Math.max(0,Math.min(1,w)):w))}v.domain=function(w){return arguments.length?([e,t,r]=w,i=h(e=+e),a=h(t=+t),o=h(r=+r),c=i===a?0:.5/(a-i),d=a===o?0:.5/(o-a),n=a<i?-1:1,v):[e,t,r]},v.clamp=function(w){return arguments.length?(m=!!w,v):m},v.interpolator=function(w){return arguments.length?(f=w,v):f};function j(w){return function(P){var b,x,S;return arguments.length?([b,x,S]=P,f=i6(w,[b,x,S]),v):[f(0),f(.5),f(1)]}}return v.range=j(So),v.rangeRound=j(b0),v.unknown=function(w){return arguments.length?(g=w,v):g},function(w){return h=w,i=w(e),a=w(t),o=w(r),c=i===a?0:.5/(a-i),d=a===o?0:.5/(o-a),n=a<i?-1:1,v}}function gC(){var e=Ji(kh()(Yt));return e.copy=function(){return Qi(e,gC())},ui.apply(e,arguments)}function vC(){var e=P0(kh()).domain([.1,1,10]);return e.copy=function(){return Qi(e,vC()).base(e.base())},ui.apply(e,arguments)}function yC(){var e=k0(kh());return e.copy=function(){return Qi(e,yC()).constant(e.constant())},ui.apply(e,arguments)}function $0(){var e=N0(kh());return e.copy=function(){return Qi(e,$0()).exponent(e.exponent())},ui.apply(e,arguments)}function Vz(){return $0.apply(null,arguments).exponent(.5)}const yl=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:y0,scaleDiverging:gC,scaleDivergingLog:vC,scaleDivergingPow:$0,scaleDivergingSqrt:Vz,scaleDivergingSymlog:yC,scaleIdentity:YN,scaleImplicit:tv,scaleLinear:GN,scaleLog:JN,scaleOrdinal:v0,scalePoint:L$,scalePow:C0,scaleQuantile:tC,scaleQuantize:rC,scaleRadial:eC,scaleSequential:fC,scaleSequentialLog:hC,scaleSequentialPow:R0,scaleSequentialQuantile:pC,scaleSequentialSqrt:Zz,scaleSequentialSymlog:mC,scaleSqrt:N6,scaleSymlog:QN,scaleThreshold:nC,scaleTime:Hz,scaleUtc:Kz,tickFormat:qN},Symbol.toStringTag,{value:"Module"}));var ea=e=>e.chartData,z0=K([ea],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),B0=(e,t,r,n)=>n?z0(e):ea(e);function mo(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Pr(t)&&Pr(r))return!0}return!1}function J1(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function qz(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,a;if(Pr(r))i=r;else if(typeof r=="function")return;if(Pr(n))a=n;else if(typeof n=="function")return;var o=[i,a];if(mo(o))return o}}function Gz(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(mo(n))return J1(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,o,c;if(i==="auto")t!=null&&(o=Math.min(...t));else if(de(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&Zw.test(i)){var d=Zw.exec(i);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[0]-f}}else o=t==null?void 0:t[0];if(a==="auto")t!=null&&(c=Math.max(...t));else if(de(a))c=a;else if(typeof a=="function")try{t!=null&&(c=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&Vw.test(a)){var h=Vw.exec(a);if(h==null||t==null)c=void 0;else{var m=+h[1];c=t[1]+m}}else c=t==null?void 0:t[1];var g=[o,c];if(mo(g))return t==null?g:J1(g,t,r)}}}var Po=1e9,Yz={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},U0,We=!0,qr="[DecimalError] ",Ma=qr+"Invalid argument: ",F0=qr+"Exponent out of range: ",ko=Math.floor,ga=Math.pow,Xz=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vr,wt=1e7,ze=7,xC=9007199254740991,of=ko(xC/ze),ie={};ie.absoluteValue=ie.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ie.comparedTo=ie.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};ie.decimalPlaces=ie.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ze;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ie.dividedBy=ie.div=function(e){return Jn(this,new this.constructor(e))};ie.dividedToIntegerBy=ie.idiv=function(e){var t=this,r=t.constructor;return Ae(Jn(t,new r(e),0,1),r.precision)};ie.equals=ie.eq=function(e){return!this.cmp(e)};ie.exponent=function(){return ut(this)};ie.greaterThan=ie.gt=function(e){return this.cmp(e)>0};ie.greaterThanOrEqualTo=ie.gte=function(e){return this.cmp(e)>=0};ie.isInteger=ie.isint=function(){return this.e>this.d.length-2};ie.isNegative=ie.isneg=function(){return this.s<0};ie.isPositive=ie.ispos=function(){return this.s>0};ie.isZero=function(){return this.s===0};ie.lessThan=ie.lt=function(e){return this.cmp(e)<0};ie.lessThanOrEqualTo=ie.lte=function(e){return this.cmp(e)<1};ie.logarithm=ie.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(vr))throw Error(qr+"NaN");if(r.s<1)throw Error(qr+(r.s?"NaN":"-Infinity"));return r.eq(vr)?new n(0):(We=!1,t=Jn(fc(r,a),fc(e,a),a),We=!0,Ae(t,i))};ie.minus=ie.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wC(t,e):_C(t,(e.s=-e.s,e))};ie.modulo=ie.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(qr+"NaN");return r.s?(We=!1,t=Jn(r,e,0,1).times(e),We=!0,r.minus(t)):Ae(new n(r),i)};ie.naturalExponential=ie.exp=function(){return bC(this)};ie.naturalLogarithm=ie.ln=function(){return fc(this)};ie.negated=ie.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ie.plus=ie.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_C(t,e):wC(t,(e.s=-e.s,e))};ie.precision=ie.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ma+e);if(t=ut(i)+1,n=i.d.length-1,r=n*ze+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ie.squareRoot=ie.sqrt=function(){var e,t,r,n,i,a,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(qr+"NaN")}for(e=ut(c),We=!1,i=Math.sqrt(+c),i==0||i==1/0?(t=kn(c.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=ko((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(i.toString()),r=d.precision,i=o=r+3;;)if(a=n,n=a.plus(Jn(c,a,o+2)).times(.5),kn(a.d).slice(0,o)===(t=kn(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(Ae(a,r+1,0),a.times(a).eq(c)){n=a;break}}else if(t!="9999")break;o+=4}return We=!0,Ae(n,r)};ie.times=ie.mul=function(e){var t,r,n,i,a,o,c,d,f,h=this,m=h.constructor,g=h.d,v=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,r=h.e+e.e,d=g.length,f=v.length,d<f&&(a=g,g=v,v=a,o=d,d=f,f=o),a=[],o=d+f,n=o;n--;)a.push(0);for(n=f;--n>=0;){for(t=0,i=d+n;i>n;)c=a[i]+v[n]*g[i-n-1]+t,a[i--]=c%wt|0,t=c/wt|0;a[i]=(a[i]+t)%wt|0}for(;!a[--o];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,We?Ae(e,m.precision):e};ie.toDecimalPlaces=ie.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ln(e,0,Po),t===void 0?t=n.rounding:Ln(t,0,8),Ae(r,e+ut(r)+1,t))};ie.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Ha(n,!0):(Ln(e,0,Po),t===void 0?t=i.rounding:Ln(t,0,8),n=Ae(new i(n),e+1,t),r=Ha(n,!0,e+1)),r};ie.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?Ha(i):(Ln(e,0,Po),t===void 0?t=a.rounding:Ln(t,0,8),n=Ae(new a(i),e+ut(i)+1,t),r=Ha(n.abs(),!1,e+ut(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};ie.toInteger=ie.toint=function(){var e=this,t=e.constructor;return Ae(new t(e),ut(e)+1,t.rounding)};ie.toNumber=function(){return+this};ie.toPower=ie.pow=function(e){var t,r,n,i,a,o,c=this,d=c.constructor,f=12,h=+(e=new d(e));if(!e.s)return new d(vr);if(c=new d(c),!c.s){if(e.s<1)throw Error(qr+"Infinity");return c}if(c.eq(vr))return c;if(n=d.precision,e.eq(vr))return Ae(c,n);if(t=e.e,r=e.d.length-1,o=t>=r,a=c.s,o){if((r=h<0?-h:h)<=xC){for(i=new d(vr),t=Math.ceil(n/ze+4),We=!1;r%2&&(i=i.times(c),ej(i.d,t)),r=ko(r/2),r!==0;)c=c.times(c),ej(c.d,t);return We=!0,e.s<0?new d(vr).div(i):Ae(i,n)}}else if(a<0)throw Error(qr+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,c.s=1,We=!1,i=e.times(fc(c,n+f)),We=!0,i=bC(i),i.s=a,i};ie.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=ut(i),n=Ha(i,r<=a.toExpNeg||r>=a.toExpPos)):(Ln(e,1,Po),t===void 0?t=a.rounding:Ln(t,0,8),i=Ae(new a(i),e,t),r=ut(i),n=Ha(i,e<=r||r<=a.toExpNeg,e)),n};ie.toSignificantDigits=ie.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ln(e,1,Po),t===void 0?t=n.rounding:Ln(t,0,8)),Ae(new n(r),e,t)};ie.toString=ie.valueOf=ie.val=ie.toJSON=ie[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ut(e),r=e.constructor;return Ha(e,t<=r.toExpNeg||t>=r.toExpPos)};function _C(e,t){var r,n,i,a,o,c,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),We?Ae(t,m):t;if(d=e.d,f=t.d,o=e.e,i=t.e,d=d.slice(),a=o-i,a){for(a<0?(n=d,a=-a,c=f.length):(n=f,i=o,c=d.length),o=Math.ceil(m/ze),c=o>c?o+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=d.length,a=f.length,c-a<0&&(a=c,n=f,f=d,d=n),r=0;a;)r=(d[--a]=d[a]+f[a]+r)/wt|0,d[a]%=wt;for(r&&(d.unshift(r),++i),c=d.length;d[--c]==0;)d.pop();return t.d=d,t.e=i,We?Ae(t,m):t}function Ln(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ma+e)}function kn(e){var t,r,n,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)n=e[t]+"",r=ze-n.length,r&&(a+=bi(r)),a+=n;o=e[t],n=o+"",r=ze-n.length,r&&(a+=bi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Jn=function(){function e(n,i){var a,o=0,c=n.length;for(n=n.slice();c--;)a=n[c]*i+o,n[c]=a%wt|0,o=a/wt|0;return o&&n.unshift(o),n}function t(n,i,a,o){var c,d;if(a!=o)d=a>o?1:-1;else for(c=d=0;c<a;c++)if(n[c]!=i[c]){d=n[c]>i[c]?1:-1;break}return d}function r(n,i,a){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*wt+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o){var c,d,f,h,m,g,v,j,w,P,b,x,S,O,N,C,E,A,H=n.constructor,B=n.s==i.s?1:-1,R=n.d,U=i.d;if(!n.s)return new H(n);if(!i.s)throw Error(qr+"Division by zero");for(d=n.e-i.e,E=U.length,N=R.length,v=new H(B),j=v.d=[],f=0;U[f]==(R[f]||0);)++f;if(U[f]>(R[f]||0)&&--d,a==null?x=a=H.precision:o?x=a+(ut(n)-ut(i))+1:x=a,x<0)return new H(0);if(x=x/ze+2|0,f=0,E==1)for(h=0,U=U[0],x++;(f<N||h)&&x--;f++)S=h*wt+(R[f]||0),j[f]=S/U|0,h=S%U|0;else{for(h=wt/(U[0]+1)|0,h>1&&(U=e(U,h),R=e(R,h),E=U.length,N=R.length),O=E,w=R.slice(0,E),P=w.length;P<E;)w[P++]=0;A=U.slice(),A.unshift(0),C=U[0],U[1]>=wt/2&&++C;do h=0,c=t(U,w,E,P),c<0?(b=w[0],E!=P&&(b=b*wt+(w[1]||0)),h=b/C|0,h>1?(h>=wt&&(h=wt-1),m=e(U,h),g=m.length,P=w.length,c=t(m,w,g,P),c==1&&(h--,r(m,E<g?A:U,g))):(h==0&&(c=h=1),m=U.slice()),g=m.length,g<P&&m.unshift(0),r(w,m,P),c==-1&&(P=w.length,c=t(U,w,E,P),c<1&&(h++,r(w,E<P?A:U,P))),P=w.length):c===0&&(h++,w=[0]),j[f++]=h,c&&w[0]?w[P++]=R[O]||0:(w=[R[O]],P=1);while((O++<N||w[0]!==void 0)&&x--)}return j[0]||j.shift(),v.e=d,Ae(v,o?a+ut(v)+1:a)}}();function bC(e,t){var r,n,i,a,o,c,d=0,f=0,h=e.constructor,m=h.precision;if(ut(e)>16)throw Error(F0+ut(e));if(!e.s)return new h(vr);for(t==null?(We=!1,c=m):c=t,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),f+=5;for(n=Math.log(ga(2,f))/Math.LN10*2+5|0,c+=n,r=i=a=new h(vr),h.precision=c;;){if(i=Ae(i.times(e),c),r=r.times(++d),o=a.plus(Jn(i,r,c)),kn(o.d).slice(0,c)===kn(a.d).slice(0,c)){for(;f--;)a=Ae(a.times(a),c);return h.precision=m,t==null?(We=!0,Ae(a,m)):a}a=o}}function ut(e){for(var t=e.e*ze,r=e.d[0];r>=10;r/=10)t++;return t}function xp(e,t,r){if(t>e.LN10.sd())throw We=!0,r&&(e.precision=r),Error(qr+"LN10 precision limit exceeded");return Ae(new e(e.LN10),t)}function bi(e){for(var t="";e--;)t+="0";return t}function fc(e,t){var r,n,i,a,o,c,d,f,h,m=1,g=10,v=e,j=v.d,w=v.constructor,P=w.precision;if(v.s<1)throw Error(qr+(v.s?"NaN":"-Infinity"));if(v.eq(vr))return new w(0);if(t==null?(We=!1,f=P):f=t,v.eq(10))return t==null&&(We=!0),xp(w,f);if(f+=g,w.precision=f,r=kn(j),n=r.charAt(0),a=ut(v),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(e),r=kn(v.d),n=r.charAt(0),m++;a=ut(v),n>1?(v=new w("0."+r),a++):v=new w(n+"."+r.slice(1))}else return d=xp(w,f+2,P).times(a+""),v=fc(new w(n+"."+r.slice(1)),f-g).plus(d),w.precision=P,t==null?(We=!0,Ae(v,P)):v;for(c=o=v=Jn(v.minus(vr),v.plus(vr),f),h=Ae(v.times(v),f),i=3;;){if(o=Ae(o.times(h),f),d=c.plus(Jn(o,new w(i),f)),kn(d.d).slice(0,f)===kn(c.d).slice(0,f))return c=c.times(2),a!==0&&(c=c.plus(xp(w,f+2,P).times(a+""))),c=Jn(c,new w(m),f),w.precision=P,t==null?(We=!0,Ae(c,P)):c;c=d,i+=2}}function Q1(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=ko(r/ze),e.d=[],n=(r+1)%ze,r<0&&(n+=ze),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=ze;n<i;)e.d.push(+t.slice(n,n+=ze));t=t.slice(n),n=ze-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),We&&(e.e>of||e.e<-of))throw Error(F0+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ae(e,t,r){var n,i,a,o,c,d,f,h,m=e.d;for(o=1,a=m[0];a>=10;a/=10)o++;if(n=t-o,n<0)n+=ze,i=t,f=m[h=0];else{if(h=Math.ceil((n+1)/ze),a=m.length,h>=a)return e;for(f=a=m[h],o=1;a>=10;a/=10)o++;n%=ze,i=n-ze+o}if(r!==void 0&&(a=ga(10,o-i-1),c=f/a%10|0,d=t<0||m[h+1]!==void 0||f%a,d=r<4?(c||d)&&(r==0||r==(e.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?i>0?f/ga(10,o-i):0:m[h-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return d?(a=ut(e),m.length=1,t=t-a-1,m[0]=ga(10,(ze-t%ze)%ze),e.e=ko(-t/ze)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(n==0?(m.length=h,a=1,h--):(m.length=h+1,a=ga(10,ze-n),m[h]=i>0?(f/ga(10,o-i)%ga(10,i)|0)*a:0),d)for(;;)if(h==0){(m[0]+=a)==wt&&(m[0]=1,++e.e);break}else{if(m[h]+=a,m[h]!=wt)break;m[h--]=0,a=1}for(n=m.length;m[--n]===0;)m.pop();if(We&&(e.e>of||e.e<-of))throw Error(F0+ut(e));return e}function wC(e,t){var r,n,i,a,o,c,d,f,h,m,g=e.constructor,v=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),We?Ae(t,v):t;if(d=e.d,m=t.d,n=t.e,f=e.e,d=d.slice(),o=f-n,o){for(h=o<0,h?(r=d,o=-o,c=m.length):(r=m,n=f,c=d.length),i=Math.max(Math.ceil(v/ze),c)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=d.length,c=m.length,h=i<c,h&&(c=i),i=0;i<c;i++)if(d[i]!=m[i]){h=d[i]<m[i];break}o=0}for(h&&(r=d,d=m,m=r,t.s=-t.s),c=d.length,i=m.length-c;i>0;--i)d[c++]=0;for(i=m.length;i>o;){if(d[--i]<m[i]){for(a=i;a&&d[--a]===0;)d[a]=wt-1;--d[a],d[i]+=wt}d[i]-=m[i]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,We?Ae(t,v):t):new g(0)}function Ha(e,t,r){var n,i=ut(e),a=kn(e.d),o=a.length;return t?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+bi(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+bi(-i-1)+a,r&&(n=r-o)>0&&(a+=bi(n))):i>=o?(a+=bi(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+bi(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=bi(n))),e.s<0?"-"+a:a}function ej(e,t){if(e.length>t)return e.length=t,!0}function jC(e){var t,r,n;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Ma+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return Q1(o,a.toString())}else if(typeof a!="string")throw Error(Ma+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Xz.test(a))Q1(o,a);else throw Error(Ma+a)}if(i.prototype=ie,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=jC,i.config=i.set=Jz,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function Jz(e){if(!e||typeof e!="object")throw Error(qr+"Object expected");var t,r,n,i=["precision",1,Po,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(ko(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Ma+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ma+r+": "+n);return this}var U0=jC(Yz);vr=new U0(1);const Ce=U0;var Qz=e=>e,SC={"@@functional/placeholder":!0},PC=e=>e===SC,tj=e=>function t(){return arguments.length===0||arguments.length===1&&PC(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},kC=(e,t)=>e===1?t:tj(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(o=>o!==SC).length;return a>=e?t(...n):kC(e-a,tj(function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var f=n.map(h=>PC(h)?c.shift():h);return t(...f,...c)}))}),Nh=e=>kC(e.length,e),av=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},eB=Nh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),tB=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Qz;var i=r.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((c,d)=>d(c),a(...arguments))}},sv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),NC=e=>{var t=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t&&i.every((o,c)=>{var d;return o===((d=t)===null||d===void 0?void 0:d[c])})||(t=i,r=e(...i)),r}};function CC(e){var t;return e===0?t=1:t=Math.floor(new Ce(e).abs().log(10).toNumber())+1,t}function EC(e,t,r){for(var n=new Ce(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}Nh((e,t,r)=>{var n=+e,i=+t;return n+r*(i-n)});Nh((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Nh((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var OC=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},TC=(e,t,r)=>{if(e.lte(0))return new Ce(0);var n=CC(e.toNumber()),i=new Ce(10).pow(n),a=e.div(i),o=n!==1?.05:.1,c=new Ce(Math.ceil(a.div(o).toNumber())).add(r).mul(o),d=c.mul(i);return t?new Ce(d.toNumber()):new Ce(Math.ceil(d.toNumber()))},rB=(e,t,r)=>{var n=new Ce(1),i=new Ce(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new Ce(10).pow(CC(e)-1),i=new Ce(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Ce(Math.floor(e)))}else e===0?i=new Ce(Math.floor((t-1)/2)):r||(i=new Ce(Math.floor(e)));var o=Math.floor((t-1)/2),c=tB(eB(d=>i.add(new Ce(d-o).mul(n)).toNumber()),av);return c(0,t)},AC=function(t,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ce(0),tickMin:new Ce(0),tickMax:new Ce(0)};var o=TC(new Ce(r).sub(t).div(n-1),i,a),c;t<=0&&r>=0?c=new Ce(0):(c=new Ce(t).add(r).div(2),c=c.sub(new Ce(c).mod(o)));var d=Math.ceil(c.sub(t).div(o).toNumber()),f=Math.ceil(new Ce(r).sub(c).div(o).toNumber()),h=d+f+1;return h>n?AC(t,r,n,i,a+1):(h<n&&(f=r>0?f+(n-h):f,d=r>0?d:d+(n-h)),{step:o,tickMin:c.sub(new Ce(d).mul(o)),tickMax:c.add(new Ce(f).mul(o))})};function nB(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[o,c]=OC([t,r]);if(o===-1/0||c===1/0){var d=c===1/0?[o,...av(0,n-1).map(()=>1/0)]:[...av(0,n-1).map(()=>-1/0),c];return t>r?sv(d):d}if(o===c)return rB(o,n,i);var{step:f,tickMin:h,tickMax:m}=AC(o,c,a,i,0),g=EC(h,m.add(new Ce(.1).mul(f)),f);return t>r?sv(g):g}function iB(e,t){var[r,n]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=OC([r,n]);if(a===-1/0||o===1/0)return[r,n];if(a===o)return[a];var c=Math.max(t,2),d=TC(new Ce(o).sub(a).div(c-1),i,0),f=[...EC(new Ce(a),new Ce(o),d),o];return i===!1&&(f=f.map(h=>Math.round(h))),r>n?sv(f):f}var aB=NC(nB),sB=NC(iB),MC=e=>e.rootProps.maxBarSize,oB=e=>e.rootProps.barGap,LC=e=>e.rootProps.barCategoryGap,lB=e=>e.rootProps.barSize,Tc=e=>e.rootProps.stackOffset,W0=e=>e.options.chartName,H0=e=>e.rootProps.syncId,DC=e=>e.rootProps.syncMethod,K0=e=>e.options.eventEmitter,Hn={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},gr={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},Ch=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},cB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Hn.angleAxisId,includeHidden:!1,name:void 0,reversed:Hn.reversed,scale:Hn.scale,tick:Hn.tick,tickCount:void 0,ticks:void 0,type:Hn.type,unit:void 0},uB={allowDataOverflow:gr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:gr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:gr.scale,tick:gr.tick,tickCount:gr.tickCount,ticks:void 0,type:gr.type,unit:void 0},dB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Hn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hn.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hn.scale,tick:Hn.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},fB={allowDataOverflow:gr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:gr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:gr.scale,tick:gr.tick,tickCount:gr.tickCount,ticks:void 0,type:"category",unit:void 0},Z0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?dB:cB,V0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?fB:uB,Eh=e=>e.polarOptions,q0=K([li,ci,vt],mN),IC=K([Eh,q0],(e,t)=>{if(e!=null)return Wt(e.innerRadius,t,0)}),RC=K([Eh,q0],(e,t)=>{if(e!=null)return Wt(e.outerRadius,t,t*.8)}),hB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},$C=K([Eh],hB);K([Z0,$C],Ch);var zC=K([q0,IC,RC],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});K([V0,zC],Ch);var BC=K([ke,Eh,IC,RC,li,ci],(e,t,r,n,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:c,startAngle:d,endAngle:f}=t;return{cx:Wt(o,i,i/2),cy:Wt(c,a,a/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:f,clockWise:!1}}}),He=(e,t)=>t,Ac=(e,t,r)=>r;function G0(e){return e==null?void 0:e.id}var xt=e=>{var t=ke(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},No=e=>e.tooltip.settings.axisId,Ct=e=>{var t=xt(e),r=No(e);return Mc(e,t,r)},FC=K([Ct],e=>e==null?void 0:e.dataKey);function UC(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=r,o=new Map;return e.forEach(c=>{var d,f=(d=c.data)!==null&&d!==void 0?d:n;if(!(f==null||f.length===0)){var h=G0(c);f.forEach((m,g)=>{var v=a==null||i?g:String(Ve(m,a,null)),j=Ve(m,c.dataKey,0),w;o.has(v)?w=o.get(v):w={},Object.assign(w,{[h]:j}),o.set(v,w)})}}),Array.from(o.values())}function Oh(e){return e.stackId!=null&&e.dataKey!=null}function rj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rj(Object(r),!0).forEach(function(n){mB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mB(e,t,r){return(t=pB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pB(e){var t=gB(e,"string");return typeof t=="symbol"?t:t+""}function gB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ov=[0,"auto"],hr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},WC=(e,t)=>e.cartesianAxis.xAxis[t],di=(e,t)=>{var r=WC(e,t);return r??hr},mr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ov,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:kc},HC=(e,t)=>e.cartesianAxis.yAxis[t],fi=(e,t)=>{var r=HC(e,t);return r??mr},vB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Y0=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??vB},it=(e,t,r)=>{switch(t){case"xAxis":return di(e,r);case"yAxis":return fi(e,r);case"zAxis":return Y0(e,r);case"angleAxis":return Z0(e,r);case"radiusAxis":return V0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},yB=(e,t,r)=>{switch(t){case"xAxis":return di(e,r);case"yAxis":return fi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Mc=(e,t,r)=>{switch(t){case"xAxis":return di(e,r);case"yAxis":return fi(e,r);case"angleAxis":return Z0(e,r);case"radiusAxis":return V0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},KC=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function X0(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var J0=e=>e.graphicalItems.cartesianItems,xB=K([He,Ac],X0),Q0=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Lc=K([J0,it,xB],Q0),ZC=K([Lc],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Oh)),VC=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),qC=K([Lc],VC),ex=e=>e.map(t=>t.data).filter(Boolean).flat(1),_B=K([Lc],ex),tx=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},rx=K([_B,B0],tx),nx=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ve(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:Ve(i,n)}))):e.map(n=>({value:n})),Th=K([rx,it,Lc],nx);function GC(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function es(e){return e.filter(t=>Mn(t)||t instanceof Date).map(Number).filter(t=>jr(t)===!1)}function bB(e,t,r){return!r||typeof t!="number"||jr(t)?[]:r.length?es(r.flatMap(n=>{var i=Ve(e,n.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!Pr(a)||!Pr(o)))return[t-a,t+o]})):[]}var wB=K([ZC,B0,Ct],UC),YC=(e,t,r)=>{var n={},i=t.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),n);return Object.fromEntries(Object.entries(i).map(a=>{var[o,c]=a,d=c.map(G0);return[o,{stackedData:OR(e,d,r),graphicalItems:c}]}))},lv=K([wB,ZC,Tc],YC),XC=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:i}=t;if(r!=="zAxis"){var a=DR(e,n,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},jB=K([lv,ea,He],XC),JC=(e,t,r,n,i)=>r.length>0?e.flatMap(a=>r.flatMap(o=>{var c,d,f=(c=n[o.id])===null||c===void 0?void 0:c.filter(m=>GC(i,m)),h=Ve(a,(d=t.dataKey)!==null&&d!==void 0?d:o.dataKey);return{value:h,errorDomain:bB(a,h,f)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Ve(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),Ah=e=>e.errorBars,QC=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>GC(r,n));K([qC,Ah,He],QC);var SB=K([rx,it,qC,Ah,He],JC);function PB(e){var{value:t}=e;if(Mn(t)||t instanceof Date)return t}var nj=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=es(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},kB=(e,t,r)=>{var n=e.map(PB).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&q2(n))?$N(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},ix=e=>{var t;if(e==null||!("domain"in e))return ov;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=es(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ov},cf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),c=Math.max(...a);return[o,c]}},eE=e=>e.referenceElements.dots,Co=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),NB=K([eE,He,Ac],Co),tE=e=>e.referenceElements.areas,CB=K([tE,He,Ac],Co),rE=e=>e.referenceElements.lines,EB=K([rE,He,Ac],Co),nE=(e,t)=>{var r=es(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},OB=K(NB,He,nE),iE=(e,t)=>{var r=es(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},TB=K([CB,He],iE),aE=(e,t)=>{var r=es(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},AB=K(EB,He,aE),MB=K(OB,AB,TB,(e,t,r)=>cf(e,r,t)),sE=K([it],ix),ax=(e,t,r,n,i,a,o)=>{var c=qz(t,e.allowDataOverflow);if(c!=null)return c;var d=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",f=d?cf(r,i,nj(n)):cf(i,nj(n));return Gz(t,f,e.allowDataOverflow)},LB=K([it,sE,jB,SB,MB,ke,He],ax),DB=[0,1],sx=(e,t,r,n,i,a,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:c,type:d}=e,f=Ya(t,a);return f&&c==null?$N(0,r.length):d==="category"?kB(n,e,f):i==="expand"?DB:o}},ox=K([it,ke,rx,Th,Tc,He,LB],sx),oE=(e,t,r,n,i)=>{if(e!=null){var{scale:a,type:o}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var c="scale".concat(wc(a));return c in yl?c:"point"}}},Eo=K([it,ke,KC,W0,He],oE);function IB(e){if(e!=null){if(e in yl)return yl[e]();var t="scale".concat(wc(e));if(t in yl)return yl[t]()}}function lx(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=IB(t);if(i!=null){var a=i.domain(r).range(n);return PR(a),a}}}var cx=(e,t,r)=>{var n=ix(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&mo(e))return aB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&mo(e))return sB(e,t.tickCount,t.allowDecimals)}},ux=K([ox,Mc,Eo],cx),dx=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&mo(t)&&Array.isArray(r)&&r.length>0){var i=t[0],a=r[0],o=t[1],c=r[r.length-1];return[Math.min(i,a),Math.max(o,c)]}return t},RB=K([it,ox,ux,He],dx),$B=K(Th,it,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(es(e.map(c=>c.value))).sort((c,d)=>c-d);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var o=n[a+1]-n[a];r=Math.min(r,o)}return r/i}}),lE=K($B,ke,LC,vt,(e,t,r,n)=>n,(e,t,r,n,i)=>{if(!Pr(e))return 0;var a=t==="vertical"?n.height:n.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var o=Wt(r,e*a),c=e*a/2;return c-o-(c-o)/a*o}return 0}),zB=(e,t)=>{var r=di(e,t);return r==null||typeof r.padding!="string"?0:lE(e,"xAxis",t,r.padding)},BB=(e,t)=>{var r=fi(e,t);return r==null||typeof r.padding!="string"?0:lE(e,"yAxis",t,r.padding)},FB=K(di,zB,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),UB=K(fi,BB,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),WB=K([vt,FB,yh,vh,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),HB=K([vt,ke,UB,yh,vh,(e,t,r)=>r],(e,t,r,n,i,a)=>{var{padding:o}=i;return a?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Dc=(e,t,r,n)=>{var i;switch(t){case"xAxis":return WB(e,r,n);case"yAxis":return HB(e,r,n);case"zAxis":return(i=Y0(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return $C(e);case"radiusAxis":return zC(e,r);default:return}},cE=K([it,Dc],Ch),Oo=K([it,Eo,RB,cE],lx);K([Lc,Ah,He],QC);function uE(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Mh=(e,t)=>t,Lh=(e,t,r)=>r,KB=K(ph,Mh,Lh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(uE)),ZB=K(gh,Mh,Lh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(uE)),dE=(e,t)=>({width:e.width,height:t.height}),VB=(e,t)=>{var r=typeof t.width=="number"?t.width:kc;return{width:r,height:e.height}},fE=K(vt,di,dE),qB=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},GB=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},YB=K(ci,vt,KB,Mh,Lh,(e,t,r,n,i)=>{var a={},o;return r.forEach(c=>{var d=dE(t,c);o==null&&(o=qB(t,n,e));var f=n==="top"&&!i||n==="bottom"&&i;a[c.id]=o-Number(f)*d.height,o+=(f?-1:1)*d.height}),a}),XB=K(li,vt,ZB,Mh,Lh,(e,t,r,n,i)=>{var a={},o;return r.forEach(c=>{var d=VB(t,c);o==null&&(o=GB(t,n,e));var f=n==="left"&&!i||n==="right"&&i;a[c.id]=o-Number(f)*d.width,o+=(f?-1:1)*d.width}),a}),JB=(e,t)=>{var r=di(e,t);if(r!=null)return YB(e,r.orientation,r.mirror)},QB=K([vt,di,JB,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),e8=(e,t)=>{var r=fi(e,t);if(r!=null)return XB(e,r.orientation,r.mirror)},t8=K([vt,fi,e8,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),hE=K(vt,fi,(e,t)=>{var r=typeof t.width=="number"?t.width:kc;return{width:r,height:e.height}}),ij=(e,t,r)=>{switch(t){case"xAxis":return fE(e,r).width;case"yAxis":return hE(e,r).height;default:return}},mE=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=r,c=Ya(e,n),d=t.map(f=>f.value);if(o&&c&&a==="category"&&i&&q2(d))return d}},fx=K([ke,Th,it,He],mE),pE=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,o=Ya(e,n);if(o&&(i==="number"||a!=="auto"))return t.map(c=>c.value)}},hx=K([ke,Th,Mc,He],pE),aj=K([ke,yB,Eo,Oo,fx,hx,Dc,ux,He],(e,t,r,n,i,a,o,c,d)=>{if(t==null)return null;var f=Ya(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:a,duplicateDomain:i,isCategorical:f,niceTicks:c,range:o,realScaleType:r,scale:n}}),r8=(e,t,r,n,i,a,o,c,d)=>{if(!(t==null||n==null)){var f=Ya(e,d),{type:h,ticks:m,tickCount:g}=t,v=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=h==="category"&&n.bandwidth?n.bandwidth()/v:0;j=d==="angleAxis"&&a!=null&&a.length>=2?St(a[0]-a[1])*2*j:j;var w=m||i;if(w){var P=w.map((b,x)=>{var S=o?o.indexOf(b):b;return{index:x,coordinate:n(S)+j,value:b,offset:j}});return P.filter(b=>!jr(b.coordinate))}return f&&c?c.map((b,x)=>({coordinate:n(b)+j,value:b,index:x,offset:j})):n.ticks?n.ticks(g).map(b=>({coordinate:n(b)+j,value:b,offset:j})):n.domain().map((b,x)=>({coordinate:n(b)+j,value:o?o[b]:b,index:x,offset:j}))}},gE=K([ke,Mc,Eo,Oo,ux,Dc,fx,hx,He],r8),n8=(e,t,r,n,i,a,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var c=Ya(e,o),{tickCount:d}=t,f=0;return f=o==="angleAxis"&&(n==null?void 0:n.length)>=2?St(n[0]-n[1])*2*f:f,c&&a?a.map((h,m)=>({coordinate:r(h)+f,value:h,index:m,offset:f})):r.ticks?r.ticks(d).map(h=>({coordinate:r(h)+f,value:h,offset:f})):r.domain().map((h,m)=>({coordinate:r(h)+f,value:i?i[h]:h,index:m,offset:f}))}},po=K([ke,Mc,Oo,Dc,fx,hx,He],n8),go=K(it,Oo,(e,t)=>{if(!(e==null||t==null))return lf(lf({},e),{},{scale:t})}),i8=K([it,Eo,ox,cE],lx);K((e,t,r)=>Y0(e,r),i8,(e,t)=>{if(!(e==null||t==null))return lf(lf({},e),{},{scale:t})});var a8=K([ke,ph,gh],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),vE=e=>e.options.defaultTooltipEventType,yE=e=>e.options.validateTooltipEventTypes;function xE(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function mx(e,t){var r=vE(e),n=yE(e);return xE(t,r,n)}function s8(e){return le(t=>mx(t,e))}var _E=(e,t)=>{var r,n=Number(t);if(!(jr(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},o8=e=>e.tooltip.settings,Ni={active:!1,index:null,dataKey:void 0,coordinate:void 0},l8={itemInteraction:{click:Ni,hover:Ni},axisInteraction:{click:Ni,hover:Ni},keyboardInteraction:Ni,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},bE=Cr({name:"tooltip",initialState:l8,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Xn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:c8,removeTooltipEntrySettings:u8,setTooltipSettingsState:d8,setActiveMouseOverItemIndex:wE,mouseLeaveItem:f8,mouseLeaveChart:jE,setActiveClickItemIndex:h8,setMouseOverAxisIndex:SE,setMouseClickAxisIndex:m8,setSyncInteraction:cv,setKeyboardInteraction:uv}=bE.actions,p8=bE.reducer;function sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ru(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sj(Object(r),!0).forEach(function(n){g8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g8(e,t,r){return(t=v8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v8(e){var t=y8(e,"string");return typeof t=="symbol"?t:t+""}function y8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x8(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function _8(e){return e.index!=null}var PE=(e,t,r,n)=>{if(t==null)return Ni;var i=x8(e,t,r);if(i==null)return Ni;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(_8(i)){if(a)return Ru(Ru({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Ru(Ru({},Ni),{},{coordinate:i.coordinate})},px=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Pr(n))return r;var i=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(i,Math.min(n,a)))},kE=(e,t,r,n,i,a,o,c)=>{if(!(a==null||c==null)){var d=o[0],f=d==null?void 0:c(d.positions,a);if(f!=null)return f;var h=i==null?void 0:i[Number(a)];if(h)switch(r){case"horizontal":return{x:h.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:h.coordinate}}}},NE=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},Ic=e=>e.options.tooltipPayloadSearcher,To=e=>e.tooltip;function oj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oj(Object(r),!0).forEach(function(n){b8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b8(e,t,r){return(t=w8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w8(e){var t=j8(e,"string");return typeof t=="symbol"?t:t+""}function j8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S8(e,t){return e??t}var CE=(e,t,r,n,i,a,o)=>{if(!(t==null||a==null)){var{chartData:c,computedData:d,dataStartIndex:f,dataEndIndex:h}=r,m=[];return e.reduce((g,v)=>{var j,{dataDefinedOnItem:w,settings:P}=v,b=S8(w,c),x=Array.isArray(b)?pN(b,f,h):b,S=(j=P==null?void 0:P.dataKey)!==null&&j!==void 0?j:n,O=P==null?void 0:P.nameKey,N;if(n&&Array.isArray(x)&&!Array.isArray(x[0])&&o==="axis"?N=jI(x,n,i):N=a(x,t,d,O),Array.isArray(N))N.forEach(E=>{var A=lj(lj({},P),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});g.push(qw({tooltipEntrySettings:A,dataKey:E.dataKey,payload:E.payload,value:Ve(E.payload,E.dataKey),name:E.name}))});else{var C;g.push(qw({tooltipEntrySettings:P,dataKey:S,payload:N,value:Ve(N,S),name:(C=Ve(N,O))!==null&&C!==void 0?C:P==null?void 0:P.name}))}return g},m)}},gx=K([Ct,ke,KC,W0,xt],oE),P8=K([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),k8=K([xt,No],X0),Rc=K([P8,Ct,k8],Q0),N8=K([Rc],e=>e.filter(Oh)),C8=K([Rc],ex),Ao=K([C8,ea],tx),E8=K([N8,ea,Ct],UC),vx=K([Ao,Ct,Rc],nx),O8=K([Ct],ix),T8=K([Rc],e=>e.filter(Oh)),A8=K([E8,T8,Tc],YC),M8=K([A8,ea,xt],XC),L8=K([Rc],VC),D8=K([Ao,Ct,L8,Ah,xt],JC),I8=K([eE,xt,No],Co),R8=K([I8,xt],nE),$8=K([tE,xt,No],Co),z8=K([$8,xt],iE),B8=K([rE,xt,No],Co),F8=K([B8,xt],aE),U8=K([R8,F8,z8],cf),W8=K([Ct,O8,M8,D8,U8,ke,xt],ax),EE=K([Ct,ke,Ao,vx,Tc,xt,W8],sx),H8=K([EE,Ct,gx],cx),K8=K([Ct,EE,H8,xt],dx),OE=e=>{var t=xt(e),r=No(e),n=!1;return Dc(e,t,r,n)},TE=K([Ct,OE],Ch),AE=K([Ct,gx,K8,TE],lx),Z8=K([ke,vx,Ct,xt],mE),V8=K([ke,vx,Ct,xt],pE),q8=(e,t,r,n,i,a,o,c)=>{if(t){var{type:d}=t,f=Ya(e,c);if(n){var h=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/h:0;return m=c==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?St(i[0]-i[1])*2*m:m,f&&o?o.map((g,v)=>({coordinate:n(g)+m,value:g,index:v,offset:m})):n.domain().map((g,v)=>({coordinate:n(g)+m,value:a?a[g]:g,index:v,offset:m}))}}},hi=K([ke,Ct,gx,AE,OE,Z8,V8,xt],q8),yx=K([vE,yE,o8],(e,t,r)=>xE(r.shared,e,t)),ME=e=>e.tooltip.settings.trigger,xx=e=>e.tooltip.settings.defaultIndex,Dh=K([To,yx,ME,xx],PE),Ka=K([Dh,Ao],px),LE=K([hi,Ka],_E),DE=K([Dh],e=>{if(e)return e.dataKey}),IE=K([To,yx,ME,xx],NE),G8=K([li,ci,ke,vt,hi,xx,IE,Ic],kE),Y8=K([Dh,G8],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),X8=K([Dh],e=>e.active),J8=K([IE,Ka,ea,FC,LE,Ic,yx],CE);K([J8],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function cj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cj(Object(r),!0).forEach(function(n){Q8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q8(e,t,r){return(t=eF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eF(e){var t=tF(e,"string");return typeof t=="symbol"?t:t+""}function tF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rF=()=>le(Ct),nF=()=>{var e=rF(),t=le(hi),r=le(AE);return c0(uj(uj({},e),{},{scale:r}),t)},iF=()=>le(W0),_x=(e,t)=>t,RE=(e,t,r)=>r,bx=(e,t,r,n)=>n,aF=K(hi,e=>lh(e,t=>t.coordinate)),wx=K([To,_x,RE,bx],PE),$E=K([wx,Ao],px),sF=(e,t,r)=>{if(t!=null){var n=To(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},zE=K([To,_x,RE,bx],NE),uf=K([li,ci,ke,vt,hi,bx,zE,Ic],kE),oF=K([wx,uf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),BE=K(hi,$E,_E),lF=K([zE,$E,ea,FC,BE,Ic,_x],CE),cF=K([wx],e=>({isActive:e.active,activeIndex:e.index})),uF=(e,t,r,n,i,a,o,c)=>{if(!(!e||!t||!n||!i||!a)){var d=IR(e.chartX,e.chartY,t,r,c);if(d){var f=$R(d,t),h=jR(f,o,a,n,i),m=RR(t,a,h,d);return{activeIndex:String(h),activeCoordinate:m}}}};function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dv.apply(null,arguments)}function dj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $u(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dj(Object(r),!0).forEach(function(n){dF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dF(e,t,r){return(t=fF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fF(e){var t=hF(e,"string");return typeof t=="symbol"?t:t+""}function hF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mF(e){var{coordinate:t,payload:r,index:n,offset:i,tooltipAxisBandSize:a,layout:o,cursor:c,tooltipEventType:d,chartName:f}=e,h=t,m=r,g=n;if(!c||!h||f!=="ScatterChart"&&d!=="axis")return null;var v,j;if(f==="ScatterChart")v=h,j=$5;else if(f==="BarChart")v=z5(o,h,i,a),j=TN;else if(o==="radial"){var{cx:w,cy:P,radius:b,startAngle:x,endAngle:S}=AN(h);v={cx:w,cy:P,startAngle:x,endAngle:S,innerRadius:b,outerRadius:b},j=LN}else v={points:y$(o,h,i)},j=kN;var O=typeof c=="object"&&"className"in c?c.className:void 0,N=$u($u($u($u({stroke:"#ccc",pointerEvents:"none"},i),v),gt(c,!1)),{},{payload:m,payloadIndex:g,className:Oe("recharts-tooltip-cursor",O)});return _.isValidElement(c)?_.cloneElement(c,N):_.createElement(j,N)}function pF(e){var t=nF(),r=bN(),n=m0(),i=iF();return _.createElement(mF,dv({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var FE=_.createContext(null),gF=()=>_.useContext(FE),UE={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(d,f,h){this.fn=d,this.context=f,this.once=h||!1}function a(d,f,h,m,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new i(h,m||d,g),j=r?r+f:f;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],v]:d._events[j].push(v):(d._events[j]=v,d._eventsCount++),d}function o(d,f){--d._eventsCount===0?d._events=new n:delete d._events[f]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],h,m;if(this._eventsCount===0)return f;for(m in h=this._events)t.call(h,m)&&f.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},c.prototype.listeners=function(f){var h=r?r+f:f,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,v=m.length,j=new Array(v);g<v;g++)j[g]=m[g].fn;return j},c.prototype.listenerCount=function(f){var h=r?r+f:f,m=this._events[h];return m?m.fn?1:m.length:0},c.prototype.emit=function(f,h,m,g,v,j){var w=r?r+f:f;if(!this._events[w])return!1;var P=this._events[w],b=arguments.length,x,S;if(P.fn){switch(P.once&&this.removeListener(f,P.fn,void 0,!0),b){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,h),!0;case 3:return P.fn.call(P.context,h,m),!0;case 4:return P.fn.call(P.context,h,m,g),!0;case 5:return P.fn.call(P.context,h,m,g,v),!0;case 6:return P.fn.call(P.context,h,m,g,v,j),!0}for(S=1,x=new Array(b-1);S<b;S++)x[S-1]=arguments[S];P.fn.apply(P.context,x)}else{var O=P.length,N;for(S=0;S<O;S++)switch(P[S].once&&this.removeListener(f,P[S].fn,void 0,!0),b){case 1:P[S].fn.call(P[S].context);break;case 2:P[S].fn.call(P[S].context,h);break;case 3:P[S].fn.call(P[S].context,h,m);break;case 4:P[S].fn.call(P[S].context,h,m,g);break;default:if(!x)for(N=1,x=new Array(b-1);N<b;N++)x[N-1]=arguments[N];P[S].fn.apply(P[S].context,x)}}return!0},c.prototype.on=function(f,h,m){return a(this,f,h,m,!1)},c.prototype.once=function(f,h,m){return a(this,f,h,m,!0)},c.prototype.removeListener=function(f,h,m,g){var v=r?r+f:f;if(!this._events[v])return this;if(!h)return o(this,v),this;var j=this._events[v];if(j.fn)j.fn===h&&(!g||j.once)&&(!m||j.context===m)&&o(this,v);else{for(var w=0,P=[],b=j.length;w<b;w++)(j[w].fn!==h||g&&!j[w].once||m&&j[w].context!==m)&&P.push(j[w]);P.length?this._events[v]=P.length===1?P[0]:P:o(this,v)}return this},c.prototype.removeAllListeners=function(f){var h;return f?(h=r?r+f:f,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c})(UE);var vF=UE.exports;const yF=Dn(vF);var hc=new yF,fv="recharts.syncEvent.tooltip",fj="recharts.syncEvent.brush";function WE(e,t){if(t){var r=Number.parseInt(t,10);if(!jr(r))return e==null?void 0:e[r]}}var xF={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},HE=Cr({name:"options",initialState:xF,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),_F=HE.reducer,{createEventEmitter:bF}=HE.actions;function wF(e){return e.tooltip.syncInteraction}var jF={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},KE=Cr({name:"chartData",initialState:jF,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:hj,setDataStartEndIndexes:SF,setComputedData:pG}=KE.actions,PF=KE.reducer,kF=["x","y"];function mj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mj(Object(r),!0).forEach(function(n){NF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NF(e,t,r){return(t=CF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CF(e){var t=EF(e,"string");return typeof t=="symbol"?t:t+""}function EF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OF(e,t){if(e==null)return{};var r,n,i=TF(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function TF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZE=()=>{};function AF(){var e=le(H0),t=le(K0),r=Xe(),n=le(DC),i=le(hi),a=m0(),o=d0(),c=le(d=>d.rootProps.className);_.useEffect(()=>{if(e==null)return ZE;var d=(f,h,m)=>{if(t!==m&&e===f){if(n==="index"){var g;if(o&&h!==null&&h!==void 0&&(g=h.payload)!==null&&g!==void 0&&g.coordinate){var v=h.payload.coordinate,{x:j,y:w}=v,P=OF(v,kF),b=ca(ca(ca({},P),typeof j=="number"&&{x:Math.max(o.x,Math.min(j,o.x+o.width))}),typeof w=="number"&&{y:Math.max(o.y,Math.min(w,o.y+o.height))}),x=ca(ca({},h),{},{payload:ca(ca({},h.payload),{},{coordinate:b})});r(x)}else r(h);return}if(i!=null){var S;if(typeof n=="function"){var O={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},N=n(i,O);S=i[N]}else n==="value"&&(S=i.find(I=>String(I.value)===h.payload.label));var{coordinate:C}=h.payload;if(S==null||h.payload.active===!1||C==null||o==null){r(cv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:E,y:A}=C,H=Math.min(E,o.x+o.width),B=Math.min(A,o.y+o.height),R={x:a==="horizontal"?S.coordinate:H,y:a==="horizontal"?B:S.coordinate},U=cv({active:h.payload.active,coordinate:R,dataKey:h.payload.dataKey,index:String(S.index),label:h.payload.label});r(U)}}};return hc.on(fv,d),()=>{hc.off(fv,d)}},[c,r,t,e,n,i,a,o])}function MF(){var e=le(H0),t=le(K0),r=Xe();_.useEffect(()=>{if(e==null)return ZE;var n=(i,a,o)=>{t!==o&&e===i&&r(SF(a))};return hc.on(fj,n),()=>{hc.off(fj,n)}},[r,t,e])}function LF(){var e=Xe();_.useEffect(()=>{e(bF())},[e]),AF(),MF()}function DF(e,t,r,n,i,a){var o=le(g=>sF(g,e,t)),c=le(K0),d=le(H0),f=le(DC),h=le(wF),m=h==null?void 0:h.active;_.useEffect(()=>{if(!m&&d!=null&&c!=null){var g=cv({active:a,coordinate:r,dataKey:o,index:i,label:typeof n=="number"?String(n):n});hc.emit(fv,d,g,c)}},[m,r,o,i,n,c,d,f,a])}function pj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pj(Object(r),!0).forEach(function(n){IF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IF(e,t,r){return(t=RF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RF(e){var t=$F(e,"string");return typeof t=="symbol"?t:t+""}function $F(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zF(e){return e.dataKey}function BF(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(g5,t)}var vj=[],FF={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Xa.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function wi(e){var t=er(e,FF),{active:r,allowEscapeViewBox:n,animationDuration:i,animationEasing:a,content:o,filterNull:c,isAnimationActive:d,offset:f,payloadUniqBy:h,position:m,reverseDirection:g,useTranslate3d:v,wrapperStyle:j,cursor:w,shared:P,trigger:b,defaultIndex:x,portal:S,axisId:O}=t,N=Xe(),C=typeof x=="number"?String(x):x;_.useEffect(()=>{N(d8({shared:P,trigger:b,axisId:O,active:r,defaultIndex:C}))},[N,P,b,O,r,C]);var E=d0(),A=PN(),H=s8(P),{activeIndex:B,isActive:R}=le(ae=>cF(ae,H,b,C)),U=le(ae=>lF(ae,H,b,C)),I=le(ae=>BE(ae,H,b,C)),D=le(ae=>oF(ae,H,b,C)),$=U,z=gF(),G=r??R,[F,Y]=Wk([$,G]),V=H==="axis"?I:void 0;DF(H,b,D,V,B,G);var ce=S??z;if(ce==null)return null;var ee=$??vj;G||(ee=vj),c&&ee.length&&(ee=Tk($.filter(ae=>ae.value!=null&&(ae.hide!==!0||t.includeHidden)),h,zF));var X=ee.length>0,te=_.createElement(j5,{allowEscapeViewBox:n,animationDuration:i,animationEasing:a,isAnimationActive:d,active:G,coordinate:D,hasPayload:X,offset:f,position:m,reverseDirection:g,useTranslate3d:v,viewBox:E,wrapperStyle:j,lastBoundingBox:F,innerRef:Y,hasPortalFromProps:!!S},BF(o,gj(gj({},t),{},{payload:ee,label:V,active:G,coordinate:D,accessibilityLayer:A})));return _.createElement(_.Fragment,null,Uf.createPortal(te,ce),G&&_.createElement(pF,{cursor:w,tooltipEventType:H,coordinate:D,payload:$,index:B}))}var VE={},qE={},GE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:a}={}){let o,c=null;const d=a!=null&&a.includes("leading"),f=a==null||a.includes("trailing"),h=()=>{c!==null&&(r.apply(o,c),o=void 0,c=null)},m=()=>{f&&h(),w()};let g=null;const v=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,m()},n)},j=()=>{g!==null&&(clearTimeout(g),g=null)},w=()=>{j(),o=void 0,c=null},P=()=>{h()},b=function(...x){if(i!=null&&i.aborted)return;o=this,c=x;const S=g==null;v(),d&&S&&h()};return b.schedule=v,b.cancel=w,b.flush=P,i==null||i.addEventListener("abort",w,{once:!0}),b}e.debounce=t})(GE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GE;function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:c=!0,maxWait:d}=a,f=Array(2);o&&(f[0]="leading"),c&&(f[1]="trailing");let h,m=null;const g=t.debounce(function(...w){h=n.apply(this,w),m=null},i,{edges:f}),v=function(...w){return d!=null&&(m===null&&(m=Date.now()),Date.now()-m>=d)?(h=n.apply(this,w),m=Date.now(),g.cancel(),g.schedule(),h):(g.apply(this,w),h)},j=()=>(g.flush(),h);return v.cancel=g.cancel,v.flush=j,v}e.debounce=r})(qE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qE;function r(n,i=0,a={}){const{leading:o=!0,trailing:c=!0}=a;return t.debounce(n,i,{leading:o,maxWait:i,trailing:c})}e.throttle=r})(VE);var UF=VE.throttle;const WF=Dn(UF);var Al=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _p(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yj(Object(r),!0).forEach(function(n){HF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HF(e,t,r){return(t=KF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KF(e){var t=ZF(e,"string");return typeof t=="symbol"?t:t+""}function ZF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ji=_.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:o=0,minHeight:c,maxHeight:d,children:f,debounce:h=0,id:m,className:g,onResize:v,style:j={}}=e,w=_.useRef(null),P=_.useRef();P.current=v,_.useImperativeHandle(t,()=>w.current);var[b,x]=_.useState({containerWidth:n.width,containerHeight:n.height}),S=_.useCallback((N,C)=>{x(E=>{var A=Math.round(N),H=Math.round(C);return E.containerWidth===A&&E.containerHeight===H?E:{containerWidth:A,containerHeight:H}})},[]);_.useEffect(()=>{var N=H=>{var B,{width:R,height:U}=H[0].contentRect;S(R,U),(B=P.current)===null||B===void 0||B.call(P,R,U)};h>0&&(N=WF(N,h,{trailing:!0,leading:!1}));var C=new ResizeObserver(N),{width:E,height:A}=w.current.getBoundingClientRect();return S(E,A),C.observe(w.current),()=>{C.disconnect()}},[S,h]);var O=_.useMemo(()=>{var{containerWidth:N,containerHeight:C}=b;if(N<0||C<0)return null;Al(ja(i)||ja(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),Al(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=ja(i)?N:i,A=ja(a)?C:a;return r&&r>0&&(E?A=E/r:A&&(E=A*r),d&&A>d&&(A=d)),Al(E>0||A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,A,i,a,o,c,r),_.Children.map(f,H=>_.cloneElement(H,{width:E,height:A,style:_p({width:E,height:A},H.props.style)}))},[r,f,a,d,c,o,b,i]);return _.createElement("div",{id:m?"".concat(m):void 0,className:Oe("recharts-responsive-container",g),style:_p(_p({},j),{},{width:i,height:a,minWidth:o,minHeight:c,maxHeight:d}),ref:w},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},O))}),Fr=e=>null;Fr.displayName="Cell";function VF(e,t,r){return(t=qF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qF(e){var t=GF(e,"string");return typeof t=="symbol"?t:t+""}function GF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class YF{constructor(t){VF(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xj(Object(r),!0).forEach(function(n){JF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JF(e,t,r){return(t=QF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QF(e){var t=eU(e,"string");return typeof t=="symbol"?t:t+""}function eU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tU={cacheSize:2e3,enableCache:!0},YE=XF({},tU),_j=new YF(YE.cacheSize),rU={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},bj="recharts_measurement_span";function nU(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",o=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(c)}var wj=(e,t)=>{try{var r=document.getElementById(bj);r||(r=document.createElement("span"),r.setAttribute("id",bj),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,rU,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Ml=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Xa.isSsr)return{width:0,height:0};if(!YE.enableCache)return wj(t,r);var n=nU(t,r),i=_j.get(n);if(i)return i;var a=wj(t,r);return _j.set(n,a),a},jj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Sj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iU=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,aU=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,XE={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sU=Object.keys(XE),Ds="NaN";function oU(e,t){return e*XE[t]}class rr{static parse(t){var r,[,n,i]=(r=aU.exec(t))!==null&&r!==void 0?r:[];return new rr(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,jr(t)&&(this.unit=""),r!==""&&!iU.test(r)&&(this.num=NaN,this.unit=""),sU.includes(r)&&(this.num=oU(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new rr(NaN,""):new rr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new rr(NaN,""):new rr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new rr(NaN,""):new rr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new rr(NaN,""):new rr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return jr(this.num)}}function JE(e){if(e.includes(Ds))return Ds;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,a]=(r=jj.exec(t))!==null&&r!==void 0?r:[],o=rr.parse(n??""),c=rr.parse(a??""),d=i==="*"?o.multiply(c):o.divide(c);if(d.isNaN())return Ds;t=t.replace(jj,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,h,m,g]=(f=Sj.exec(t))!==null&&f!==void 0?f:[],v=rr.parse(h??""),j=rr.parse(g??""),w=m==="+"?v.add(j):v.subtract(j);if(w.isNaN())return Ds;t=t.replace(Sj,w.toString())}return t}var Pj=/\(([^()]*)\)/;function lU(e){for(var t=e,r;(r=Pj.exec(t))!=null;){var[,n]=r;t=t.replace(Pj,JE(n))}return t}function cU(e){var t=e.replace(/\s+/g,"");return t=lU(t),t=JE(t),t}function uU(e){try{return cU(e)}catch{return Ds}}function bp(e){var t=uU(e.slice(5,-1));return t===Ds?"":t}var dU=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],fU=["dx","dy","angle","className","breakAll"];function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hv.apply(null,arguments)}function kj(e,t){if(e==null)return{};var r,n,i=hU(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function hU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QE=/[ \f\n\r\t\v\u2028\u2029]+/,eO=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];kt(t)||(r?i=t.toString().split(""):i=t.toString().split(QE));var a=i.map(c=>({word:c,width:Ml(c,n).width})),o=r?0:Ml(" ",n).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},mU=(e,t,r,n,i)=>{var{maxLines:a,children:o,style:c,breakAll:d}=e,f=de(a),h=o,m=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce((U,I)=>{var{word:D,width:$}=I,z=U[U.length-1];if(z&&(n==null||i||z.width+$+r<Number(n)))z.words.push(D),z.width+=$+r;else{var G={words:[D],width:$};U.push(G)}return U},[])},g=m(t),v=B=>B.reduce((R,U)=>R.width>U.width?R:U);if(!f||i)return g;var j=g.length>a||v(g).width>Number(n);if(!j)return g;for(var w="…",P=B=>{var R=h.slice(0,B),U=eO({breakAll:d,style:c,children:R+w}).wordsWithComputedWidth,I=m(U),D=I.length>a||v(I).width>Number(n);return[D,I]},b=0,x=h.length-1,S=0,O;b<=x&&S<=h.length-1;){var N=Math.floor((b+x)/2),C=N-1,[E,A]=P(C),[H]=P(N);if(!E&&!H&&(b=N+1),E&&H&&(x=N-1),!E&&H){O=A;break}S++}return O||g},Nj=e=>{var t=kt(e)?[]:e.toString().split(QE);return[{words:t}]},pU=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:o}=e;if((t||r)&&!Xa.isSsr){var c,d,f=eO({breakAll:a,children:n,style:i});if(f){var{wordsWithComputedWidth:h,spaceWidth:m}=f;c=h,d=m}else return Nj(n);return mU({breakAll:a,children:n,maxLines:o,style:i},c,d,t,r)}return Nj(n)},Cj="#808080",Ih=_.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:c="start",verticalAnchor:d="end",fill:f=Cj}=e,h=kj(e,dU),m=_.useMemo(()=>pU({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:o,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,o,h.style,h.width]),{dx:g,dy:v,angle:j,className:w,breakAll:P}=h,b=kj(h,fU);if(!Mn(r)||!Mn(n)||m.length===0)return null;var x=r+(de(g)?g:0),S=n+(de(v)?v:0),O;switch(d){case"start":O=bp("calc(".concat(a,")"));break;case"middle":O=bp("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:O=bp("calc(".concat(m.length-1," * -").concat(i,")"));break}var N=[];if(o){var C=m[0].width,{width:E}=h;N.push("scale(".concat(de(E)?E/C:1,")"))}return j&&N.push("rotate(".concat(j,", ").concat(x,", ").concat(S,")")),N.length&&(b.transform=N.join(" ")),_.createElement("text",hv({},gt(b,!0),{ref:t,x,y:S,className:Oe("recharts-text",w),textAnchor:c,fill:f.includes("url")?Cj:f}),m.map((A,H)=>{var B=A.words.join(P?"":" ");return _.createElement("tspan",{x,dy:H===0?O:i,key:"".concat(B,"-").concat(H)},B)}))});Ih.displayName="Text";var gU=["labelRef"];function vU(e,t){if(e==null)return{};var r,n,i=yU(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function yU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ej(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ej(Object(r),!0).forEach(function(n){xU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ej(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xU(e,t,r){return(t=_U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _U(e){var t=bU(e,"string");return typeof t=="symbol"?t:t+""}function bU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kn(){return Kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kn.apply(null,arguments)}var tO=_.createContext(null),wU=e=>{var{x:t,y:r,width:n,height:i,children:a}=e,o=_.useMemo(()=>({x:t,y:r,width:n,height:i}),[t,r,n,i]);return _.createElement(tO.Provider,{value:o},a)},rO=()=>{var e=_.useContext(tO),t=d0();return e||t},jU=_.createContext(null),SU=()=>{var e=_.useContext(jU),t=le(BC);return e||t},PU=e=>{var{value:t,formatter:r}=e,n=kt(e.children)?t:e.children;return typeof r=="function"?r(n):n},jx=e=>e!=null&&typeof e=="function",kU=(e,t)=>{var r=St(t-e),n=Math.min(Math.abs(t-e),360);return r*n},NU=(e,t,r,n,i)=>{var{offset:a,className:o}=e,{cx:c,cy:d,innerRadius:f,outerRadius:h,startAngle:m,endAngle:g,clockWise:v}=i,j=(f+h)/2,w=kU(m,g),P=w>=0?1:-1,b,x;switch(t){case"insideStart":b=m+P*a,x=v;break;case"insideEnd":b=g-P*a,x=!v;break;case"end":b=g+P*a,x=v;break;default:throw new Error("Unsupported position ".concat(t))}x=w<=0?x:!x;var S=ct(c,d,j,b),O=ct(c,d,j,b+(x?1:-1)*359),N="M".concat(S.x,",").concat(S.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(x?0:1,`,
    `).concat(O.x,",").concat(O.y),C=kt(e.id)?ic("recharts-radial-line-"):e.id;return _.createElement("text",Kn({},n,{dominantBaseline:"central",className:Oe("recharts-radial-bar-label",o)}),_.createElement("defs",null,_.createElement("path",{id:C,d:N})),_.createElement("textPath",{xlinkHref:"#".concat(C)},r))},CU=(e,t,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:o,startAngle:c,endAngle:d}=e,f=(c+d)/2;if(r==="outside"){var{x:h,y:m}=ct(n,i,o+t,f);return{x:h,y:m,textAnchor:h>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+o)/2,{x:v,y:j}=ct(n,i,g,f);return{x:v,y:j,textAnchor:"middle",verticalAnchor:"middle"}},nO=e=>"cx"in e&&de(e.cx),EU=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,a;r!=null&&!nO(r)&&(a=r);var{x:o,y:c,width:d,height:f}=t,h=f>=0?1:-1,m=h*n,g=h>0?"end":"start",v=h>0?"start":"end",j=d>=0?1:-1,w=j*n,P=j>0?"end":"start",b=j>0?"start":"end";if(i==="top"){var x={x:o+d/2,y:c-h*n,textAnchor:"middle",verticalAnchor:g};return tt(tt({},x),a?{height:Math.max(c-a.y,0),width:d}:{})}if(i==="bottom"){var S={x:o+d/2,y:c+f+m,textAnchor:"middle",verticalAnchor:v};return tt(tt({},S),a?{height:Math.max(a.y+a.height-(c+f),0),width:d}:{})}if(i==="left"){var O={x:o-w,y:c+f/2,textAnchor:P,verticalAnchor:"middle"};return tt(tt({},O),a?{width:Math.max(O.x-a.x,0),height:f}:{})}if(i==="right"){var N={x:o+d+w,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return tt(tt({},N),a?{width:Math.max(a.x+a.width-N.x,0),height:f}:{})}var C=a?{width:d,height:f}:{};return i==="insideLeft"?tt({x:o+w,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},C):i==="insideRight"?tt({x:o+d-w,y:c+f/2,textAnchor:P,verticalAnchor:"middle"},C):i==="insideTop"?tt({x:o+d/2,y:c+m,textAnchor:"middle",verticalAnchor:v},C):i==="insideBottom"?tt({x:o+d/2,y:c+f-m,textAnchor:"middle",verticalAnchor:g},C):i==="insideTopLeft"?tt({x:o+w,y:c+m,textAnchor:b,verticalAnchor:v},C):i==="insideTopRight"?tt({x:o+d-w,y:c+m,textAnchor:P,verticalAnchor:v},C):i==="insideBottomLeft"?tt({x:o+w,y:c+f-m,textAnchor:b,verticalAnchor:g},C):i==="insideBottomRight"?tt({x:o+d-w,y:c+f-m,textAnchor:P,verticalAnchor:g},C):i&&typeof i=="object"&&(de(i.x)||ja(i.x))&&(de(i.y)||ja(i.y))?tt({x:o+Wt(i.x,d),y:c+Wt(i.y,f),textAnchor:"end",verticalAnchor:"end"},C):tt({x:o+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},C)},OU={offset:5};function Si(e){var t=er(e,OU),{viewBox:r,position:n,value:i,children:a,content:o,className:c="",textBreakAll:d,labelRef:f}=t,h=SU(),m=rO(),g=n==="center"?m:h??m,v=r||g;if(!v||kt(i)&&kt(a)&&!_.isValidElement(o)&&typeof o!="function")return null;var j=tt(tt({},t),{},{viewBox:v});if(_.isValidElement(o)){var w=vU(j,gU);return _.cloneElement(o,w)}var P;if(typeof o=="function"){if(P=_.createElement(o,j),_.isValidElement(P))return P}else P=PU(t);var b=nO(v),x=gt(t,!0);if(b&&(n==="insideStart"||n==="insideEnd"||n==="end"))return NU(t,n,P,x,v);var S=b?CU(v,t.offset,t.position):EU(t,v);return _.createElement(Ih,Kn({ref:f,className:Oe("recharts-label",c)},x,S,{breakAll:d}),P)}Si.displayName="Label";var TU=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?_.createElement(Si,Kn({key:"label-implicit"},n)):Mn(e)?_.createElement(Si,Kn({key:"label-implicit",value:e},n)):_.isValidElement(e)?e.type===Si?_.cloneElement(e,tt({key:"label-implicit"},n)):_.createElement(Si,Kn({key:"label-implicit",content:e},n)):jx(e)?_.createElement(Si,Kn({key:"label-implicit",content:e},n)):e&&typeof e=="object"?_.createElement(Si,Kn({},e,{key:"label-implicit"},n)):null};function AU(e){var{label:t}=e,r=rO();return TU(t,r)||null}var iO={},aO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(aO);var sO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(sO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aO,r=sO,n=sh;function i(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=i})(iO);var MU=iO.last;const LU=Dn(MU);var DU=["valueAccessor"],IU=["dataKey","clockWise","id","textBreakAll"];function df(){return df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},df.apply(null,arguments)}function Oj(e,t){if(e==null)return{};var r,n,i=RU(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function RU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $U=e=>Array.isArray(e.value)?LU(e.value):e.value,oO=_.createContext(void 0),zU=oO.Provider,lO=_.createContext(void 0),BU=lO.Provider;function FU(){return _.useContext(oO)}function UU(){return _.useContext(lO)}function sd(e){var{valueAccessor:t=$U}=e,r=Oj(e,DU),{dataKey:n,clockWise:i,id:a,textBreakAll:o}=r,c=Oj(r,IU),d=FU(),f=UU(),h=d||f;return!h||!h.length?null:_.createElement(dr,{className:"recharts-label-list"},h.map((m,g)=>{var v,j=kt(n)?t(m,g):Ve(m&&m.payload,n),w=kt(a)?{}:{id:"".concat(a,"-").concat(g)};return _.createElement(Si,df({},gt(m,!0),c,w,{fill:(v=r.fill)!==null&&v!==void 0?v:m.fill,parentViewBox:m.parentViewBox,value:j,textBreakAll:o,viewBox:m.viewBox,key:"label-".concat(g),index:g}))}))}sd.displayName="LabelList";function cO(e){var{label:t}=e;return t?t===!0?_.createElement(sd,{key:"labelList-implicit"}):_.isValidElement(t)||jx(t)?_.createElement(sd,{key:"labelList-implicit",content:t}):typeof t=="object"?_.createElement(sd,df({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var uO=e=>e.graphicalItems.polarItems,WU=K([He,Ac],X0),Sx=K([uO,it,WU],Q0),HU=K([Sx],ex),Px=K([HU,z0],tx),KU=K([Px,it,Sx],nx),ZU=K([Px,it,Sx],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var a,o=Ve(n,(a=t.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ve(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),Tj=()=>{},VU=K([it,sE,Tj,ZU,Tj,ke,He],ax),dO=K([it,ke,Px,KU,Tc,He,VU],sx),qU=K([dO,it,Eo],cx);K([it,dO,qU,He],dx);var GU={radiusAxis:{},angleAxis:{}},YU=Cr({name:"polarAxis",initialState:GU,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),XU=YU.reducer;function Aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aj(Object(r),!0).forEach(function(n){JU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JU(e,t,r){return(t=QU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QU(e){var t=e7(e,"string");return typeof t=="symbol"?t:t+""}function e7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t7=(e,t)=>t,kx=K([uO,t7],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),r7=[],Nx=(e,t,r)=>(r==null?void 0:r.length)===0?r7:r,fO=K([z0,kx,Nx],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(a=>Mj(Mj({},t.presentationProps),a.props))),i!=null)return i}}),n7=K([fO,kx,Nx],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var a,o=Ve(n,t.nameKey,t.name),c;return r!=null&&(a=r[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?c=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?c=n.fill:c=t.fill,{value:mh(o,t.dataKey),color:c,payload:n,type:t.legendType}})}),i7=K([fO,kx,Nx,vt],(e,t,r,n)=>{if(!(t==null||e==null))return t9({offset:n,pieSettings:t,displayedData:e,cells:r})}),hO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(hO);var a7=hO.isPlainObject;const s7=Dn(a7);function Lj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lj(Object(r),!0).forEach(function(n){o7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o7(e,t,r){return(t=l7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l7(e){var t=c7(e,"string");return typeof t=="symbol"?t:t+""}function c7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ff(){return ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ff.apply(null,arguments)}var Ij=(e,t,r,n,i)=>{var a=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-a/2,",").concat(t+i),o+="L ".concat(e+r-a/2-n,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z"),o},u7={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},d7=e=>{var t=er(e,u7),{x:r,y:n,upperWidth:i,lowerWidth:a,height:o,className:c}=t,{animationEasing:d,animationDuration:f,animationBegin:h,isUpdateAnimationActive:m}=t,g=_.useRef(),[v,j]=_.useState(-1),w=_.useRef(i),P=_.useRef(a),b=_.useRef(o),x=_.useRef(r),S=_.useRef(n),O=_h(e,"trapezoid-");if(_.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var D=g.current.getTotalLength();D&&j(D)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||o!==+o||i===0&&a===0||o===0)return null;var N=Oe("recharts-trapezoid",c);if(!m)return _.createElement("g",null,_.createElement("path",ff({},gt(t,!0),{className:N,d:Ij(r,n,i,a,o)})));var C=w.current,E=P.current,A=b.current,H=x.current,B=S.current,R="0px ".concat(v===-1?1:v,"px"),U="".concat(v,"px 0px"),I=NN(["strokeDasharray"],f,d);return _.createElement(xh,{animationId:O,key:O,canBegin:v>0,duration:f,easing:d,isActive:m,begin:h},D=>{var $=Mt(C,i,D),z=Mt(E,a,D),G=Mt(A,o,D),F=Mt(H,r,D),Y=Mt(B,n,D);g.current&&(w.current=$,P.current=z,b.current=G,x.current=F,S.current=Y);var V=D>0?{transition:I,strokeDasharray:U}:{strokeDasharray:R};return _.createElement("path",ff({},gt(t,!0),{className:N,d:Ij(F,Y,$,z,G),ref:g,style:Dj(Dj({},V),t.style)}))})},f7=["option","shapeType","propTransformer","activeClassName","isActive"];function h7(e,t){if(e==null)return{};var r,n,i=m7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function m7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rj(Object(r),!0).forEach(function(n){p7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p7(e,t,r){return(t=g7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g7(e){var t=v7(e,"string");return typeof t=="symbol"?t:t+""}function v7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y7(e,t){return hf(hf({},t),e)}function x7(e,t){return e==="symbols"}function $j(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return _.createElement(TN,r);case"trapezoid":return _.createElement(d7,r);case"sector":return _.createElement(LN,r);case"symbols":if(x7(t))return _.createElement(Wy,r);break;default:return null}}function _7(e){return _.isValidElement(e)?e.props:e}function mO(e){var{option:t,shapeType:r,propTransformer:n=y7,activeClassName:i="recharts-active-shape",isActive:a}=e,o=h7(e,f7),c;if(_.isValidElement(t))c=_.cloneElement(t,hf(hf({},o),_7(t)));else if(typeof t=="function")c=t(o);else if(s7(t)&&typeof t!="boolean"){var d=n(t,o);c=_.createElement($j,{shapeType:r,elementProps:d})}else{var f=o;c=_.createElement($j,{shapeType:r,elementProps:f})}return a?_.createElement(dr,{className:i},c):c}var Cx=(e,t)=>{var r=Xe();return(n,i)=>a=>{e==null||e(n,i,a),r(wE({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},Ex=e=>{var t=Xe();return(r,n)=>i=>{e==null||e(r,n,i),t(f8())}},Ox=(e,t)=>{var r=Xe();return(n,i)=>a=>{e==null||e(n,i,a),r(h8({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function pO(e){var{fn:t,args:r}=e,n=Xe(),i=Yr();return _.useEffect(()=>{if(!i){var a=t(r);return n(c8(a)),()=>{n(u8(a))}}},[t,r,n,i]),null}var gO=()=>{};function b7(e){var{legendPayload:t}=e,r=Xe(),n=Yr();return _.useEffect(()=>n?gO:(r(jN(t)),()=>{r(SN(t))}),[r,n,t]),null}function w7(e){var{legendPayload:t}=e,r=Xe(),n=le(ke);return _.useEffect(()=>n!=="centric"&&n!=="radial"?gO:(r(jN(t)),()=>{r(SN(t))}),[r,n,t]),null}var wp,j7=()=>{var[e]=_.useState(()=>ic("uid-"));return e},S7=(wp=lM.useId)!==null&&wp!==void 0?wp:j7;function P7(e,t){var r=S7();return t||(e?"".concat(e,"-").concat(r):r)}var k7=_.createContext(void 0),vO=e=>{var{id:t,type:r,children:n}=e,i=P7("recharts-".concat(r),t);return _.createElement(k7.Provider,{value:i},n(i))},N7={cartesianItems:[],polarItems:[]},yO=Cr({name:"graphicalItems",initialState:N7,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,i=Xn(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},removeCartesianGraphicalItem(e,t){var r=Xn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Xn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:C7,replaceCartesianGraphicalItem:E7,removeCartesianGraphicalItem:O7,addPolarGraphicalItem:T7,removePolarGraphicalItem:A7}=yO.actions,M7=yO.reducer;function L7(e){var t=Xe(),r=_.useRef(null);return _.useEffect(()=>{r.current===null?t(C7(e)):r.current!==e&&t(E7({prev:r.current,next:e})),r.current=e},[t,e]),_.useEffect(()=>()=>{r.current&&(t(O7(r.current)),r.current=null)},[t]),null}function D7(e){var t=Xe();return _.useEffect(()=>(t(T7(e)),()=>{t(A7(e))}),[t,e]),null}var I7=["onMouseEnter","onClick","onMouseLeave"],R7=["id"],$7=["id"];function Tx(e,t){if(e==null)return{};var r,n,i=z7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function z7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zj(Object(r),!0).forEach(function(n){B7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B7(e,t,r){return(t=F7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F7(e){var t=U7(e,"string");return typeof t=="symbol"?t:t+""}function U7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ki(){return Ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ki.apply(null,arguments)}function W7(e){var t=_.useMemo(()=>$y(e.children,Fr),[e.children]),r=le(n=>n7(n,e.id,t));return r==null?null:_.createElement(w7,{legendPayload:r})}function H7(e){var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:a,fill:o,name:c,hide:d,tooltipType:f}=e;return{dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:o,dataKey:t,nameKey:r,name:mh(c,t),hide:d,type:f,color:o,unit:""}}}var K7=(e,t)=>e>t?"start":e<t?"end":"middle",Z7=(e,t,r)=>Wt(typeof t=="function"?t(e):t,r,r*.8),V7=(e,t,r)=>{var{top:n,left:i,width:a,height:o}=t,c=mN(a,o),d=i+Wt(e.cx,a,a/2),f=n+Wt(e.cy,o,o/2),h=Wt(e.innerRadius,c,0),m=Z7(r,e.outerRadius,c),g=e.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:d,cy:f,innerRadius:h,outerRadius:m,maxRadius:g}},q7=(e,t)=>{var r=St(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function G7(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Y7=(e,t)=>{if(_.isValidElement(e))return _.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Oe("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return _.createElement(kN,Ki({},t,{type:"linear",className:r}))},X7=(e,t,r)=>{if(_.isValidElement(e))return _.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),_.isValidElement(n)))return n;var i=Oe("recharts-pie-label-text",G7(e));return _.createElement(Ih,Ki({},t,{alignmentBaseline:"middle",className:i}),n)};function J7(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:a,dataKey:o}=r;if(!n||!i||!t)return null;var c=Xi(r),d=gt(i,!1),f=gt(a,!1),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((g,v)=>{var j=(g.startAngle+g.endAngle)/2,w=ct(g.cx,g.cy,g.outerRadius+h,j),P=Fe(Fe(Fe(Fe({},c),g),{},{stroke:"none"},d),{},{index:v,textAnchor:K7(w.x,g.cx)},w),b=Fe(Fe(Fe(Fe({},c),g),{},{fill:"none",stroke:g.fill},f),{},{index:v,points:[ct(g.cx,g.cy,g.outerRadius,j),w],key:"line"});return _.createElement(dr,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},a&&Y7(a,b),X7(i,P,Ve(g,o)))});return _.createElement(dr,{className:"recharts-pie-labels"},m)}function Q7(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?_.createElement(cO,{label:i}):_.createElement(J7,{sectors:t,props:r,showLabels:n})}function e9(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i}=e,a=le(Ka),{onMouseEnter:o,onClick:c,onMouseLeave:d}=i,f=Tx(i,I7),h=Cx(o,i.dataKey),m=Ex(d),g=Ox(c,i.dataKey);return t==null||t.length===0?null:_.createElement(_.Fragment,null,t.map((v,j)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&t.length!==1)return null;var w=r&&String(j)===a,P=a?n:null,b=w?r:P,x=Fe(Fe({},v),{},{stroke:v.stroke,tabIndex:-1,[xN]:j,[_N]:i.dataKey});return _.createElement(dr,Ki({tabIndex:-1,className:"recharts-pie-sector"},jc(f,v,j),{onMouseEnter:h(v,j),onMouseLeave:m(v,j),onClick:g(v,j),key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(j)}),_.createElement(mO,Ki({option:b,isActive:w,shapeType:"sector"},x)))}))}function t9(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:a}=e,{cornerRadius:o,startAngle:c,endAngle:d,dataKey:f,nameKey:h,tooltipType:m}=r,g=Math.abs(r.minAngle),v=q7(c,d),j=Math.abs(v),w=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,P=n.filter(C=>Ve(C,f,0)!==0).length,b=(j>=360?P:P-1)*w,x=j-P*g-b,S=n.reduce((C,E)=>{var A=Ve(E,f,0);return C+(de(A)?A:0)},0),O;if(S>0){var N;O=n.map((C,E)=>{var A=Ve(C,f,0),H=Ve(C,h,E),B=V7(r,a,C),R=(de(A)?A:0)/S,U,I=Fe(Fe({},C),i&&i[E]&&i[E].props);E?U=N.endAngle+St(v)*w*(A!==0?1:0):U=c;var D=U+St(v)*((A!==0?g:0)+R*x),$=(U+D)/2,z=(B.innerRadius+B.outerRadius)/2,G=[{name:H,value:A,payload:I,dataKey:f,type:m}],F=ct(B.cx,B.cy,z,$);return N=Fe(Fe(Fe(Fe({},r.presentationProps),{},{percent:R,cornerRadius:o,name:H,tooltipPayload:G,midAngle:$,middleRadius:z,tooltipPosition:F},I),B),{},{value:A,startAngle:U,endAngle:D,payload:I,paddingAngle:St(v)*w}),N})}return O}function r9(e){var{showLabels:t,sectors:r,children:n}=e,i=_.useMemo(()=>!t||!r?[]:r.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[r,t]);return _.createElement(BU,{value:t?i:void 0},n)}function n9(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:c,activeShape:d,inactiveShape:f,onAnimationStart:h,onAnimationEnd:m}=t,g=_h(t,"recharts-pie-"),v=r.current,[j,w]=_.useState(!1),P=_.useCallback(()=>{typeof m=="function"&&m(),w(!1)},[m]),b=_.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return _.createElement(r9,{showLabels:!j,sectors:n},_.createElement(xh,{animationId:g,begin:a,duration:o,isActive:i,easing:c,onAnimationStart:b,onAnimationEnd:P,key:g},x=>{var S=[],O=n&&n[0],N=O==null?void 0:O.startAngle;return n==null||n.forEach((C,E)=>{var A=v&&v[E],H=E>0?Ba(C,"paddingAngle",0):0;if(A){var B=Mt(A.endAngle-A.startAngle,C.endAngle-C.startAngle,x),R=Fe(Fe({},C),{},{startAngle:N+H,endAngle:N+B+H});S.push(R),N=R.endAngle}else{var{endAngle:U,startAngle:I}=C,D=Mt(0,U-I,x),$=Fe(Fe({},C),{},{startAngle:N+H,endAngle:N+D+H});S.push($),N=$.endAngle}}),r.current=S,_.createElement(dr,null,_.createElement(e9,{sectors:S,activeShape:d,inactiveShape:f,allOtherPieProps:t}))}),_.createElement(Q7,{showLabels:!j,sectors:n,props:t}),t.children)}var i9={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Xa.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function a9(e){var{id:t}=e,r=Tx(e,R7),{hide:n,className:i,rootTabIndex:a}=e,o=_.useMemo(()=>$y(e.children,Fr),[e.children]),c=le(h=>i7(h,t,o)),d=_.useRef(null),f=Oe("recharts-pie",i);return n||c==null?(d.current=null,_.createElement(dr,{tabIndex:a,className:f})):_.createElement(_.Fragment,null,_.createElement(pO,{fn:H7,args:Fe(Fe({},e),{},{sectors:c})}),_.createElement(dr,{tabIndex:a,className:f},_.createElement(n9,{props:Fe(Fe({},r),{},{sectors:c}),previousSectorsRef:d})))}function mf(e){var t=er(e,i9),{id:r}=t,n=Tx(t,$7),i=Xi(n);return _.createElement(vO,{id:r,type:"pie"},a=>_.createElement(_.Fragment,null,_.createElement(D7,{type:"pie",id:a,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),_.createElement(W7,Ki({},n,{id:a})),_.createElement(a9,Ki({},n,{id:a}))))}mf.displayName="Pie";function Bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bj(Object(r),!0).forEach(function(n){s9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s9(e,t,r){return(t=o9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o9(e){var t=l9(e,"string");return typeof t=="symbol"?t:t+""}function l9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c9={xAxis:{},yAxis:{},zAxis:{}},xO=Cr({name:"cartesianAxis",initialState:c9,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=Fj(Fj({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:u9,removeXAxis:d9,addYAxis:f9,removeYAxis:h9,addZAxis:gG,removeZAxis:vG,updateYAxisWidth:m9}=xO.actions,p9=xO.reducer,g9=K([vt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),v9=K([g9,li,ci],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),_O=()=>le(v9),y9="Invariant failed";function x9(e,t){throw new Error(y9)}var _9=["x","y"];function mv(){return mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mv.apply(null,arguments)}function Uj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ul(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uj(Object(r),!0).forEach(function(n){b9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b9(e,t,r){return(t=w9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w9(e){var t=j9(e,"string");return typeof t=="symbol"?t:t+""}function j9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S9(e,t){if(e==null)return{};var r,n,i=P9(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function P9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function k9(e,t){var{x:r,y:n}=e,i=S9(e,_9),a="".concat(r),o=parseInt(a,10),c="".concat(n),d=parseInt(c,10),f="".concat(t.height||i.height),h=parseInt(f,10),m="".concat(t.width||i.width),g=parseInt(m,10);return ul(ul(ul(ul(ul({},t),i),o?{x:o}:{}),d?{y:d}:{}),{},{height:h,width:g,name:t.name,radius:t.radius})}function Ax(e){return _.createElement(mO,mv({shapeType:"rectangle",propTransformer:k9,activeClassName:"recharts-active-bar"},e))}var N9=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(de(t))return t;var a=de(n)||kt(n);return a?t(n,i):(a||x9(),r)}},C9={},E9=Cr({name:"errorBars",initialState:C9,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),O9=E9.reducer,T9=["children"];function A9(e,t){if(e==null)return{};var r,n,i=M9(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function M9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var L9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},D9=_.createContext(L9);function I9(e){var{children:t}=e,r=A9(e,T9);return _.createElement(D9.Provider,{value:r},t)}function bO(e,t){var r,n,i=le(f=>di(f,e)),a=le(f=>fi(f,t)),o=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:hr.allowDataOverflow,c=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:mr.allowDataOverflow,d=o||c;return{needClip:d,needClipX:o,needClipY:c}}function R9(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=_O(),{needClipX:a,needClipY:o,needClip:c}=bO(t,r);if(!c)return null;var{x:d,y:f,width:h,height:m}=i;return _.createElement("clipPath",{id:"clipPath-".concat(n)},_.createElement("rect",{x:a?d:d-h/2,y:o?f:f-m/2,width:a?h:h*2,height:o?m:m*2}))}var $9=["onMouseEnter","onMouseLeave","onClick"],z9=["value","background","tooltipPosition"],B9=["id"],F9=["onMouseEnter","onClick","onMouseLeave"];function Zi(){return Zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zi.apply(null,arguments)}function Wj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wj(Object(r),!0).forEach(function(n){U9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U9(e,t,r){return(t=W9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W9(e){var t=H9(e,"string");return typeof t=="symbol"?t:t+""}function H9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pf(e,t){if(e==null)return{};var r,n,i=K9(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function K9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Z9=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:mh(r,t),payload:e}]};function V9(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:a,hide:o,unit:c}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:mh(a,t),hide:o,type:e.tooltipType,color:e.fill,unit:c}}}function q9(e){var t=le(Ka),{data:r,dataKey:n,background:i,allOtherBarProps:a}=e,{onMouseEnter:o,onMouseLeave:c,onClick:d}=a,f=pf(a,$9),h=Cx(o,n),m=Ex(c),g=Ox(d,n);if(!i||r==null)return null;var v=gt(i,!1);return _.createElement(_.Fragment,null,r.map((j,w)=>{var{value:P,background:b,tooltipPosition:x}=j,S=pf(j,z9);if(!b)return null;var O=h(j,w),N=m(j,w),C=g(j,w),E=Gt(Gt(Gt(Gt(Gt({option:i,isActive:String(w)===t},S),{},{fill:"#eee"},b),v),jc(f,j,w)),{},{onMouseEnter:O,onMouseLeave:N,onClick:C,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return _.createElement(Ax,Zi({key:"background-bar-".concat(E.index)},E))}))}function G9(e){var{showLabels:t,children:r,rects:n}=e,i=n==null?void 0:n.map(a=>{var o={x:a.x,y:a.y,width:a.width,height:a.height};return Gt(Gt({},o),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:o,fill:a.fill})});return _.createElement(zU,{value:t?i:void 0},r)}function Y9(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:a,dataKey:o}=e,c=le(Ka),d=le(DE),f=r&&String(a)===c&&(d==null||o===d),h=f?r:t;return _.createElement(Ax,Zi({},n,i,{isActive:f,option:h,index:a,dataKey:o}))}function X9(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:a}=e;return _.createElement(Ax,Zi({},r,n,{isActive:!1,option:t,index:i,dataKey:a}))}function J9(e){var{data:t,props:r}=e,n=Xi(r),i=pf(n,B9),{shape:a,dataKey:o,activeBar:c}=r,{onMouseEnter:d,onClick:f,onMouseLeave:h}=r,m=pf(r,F9),g=Cx(d,o),v=Ex(h),j=Ox(f,o);return t?_.createElement(_.Fragment,null,t.map((w,P)=>_.createElement(dr,Zi({className:"recharts-bar-rectangle"},jc(m,w,P),{onMouseEnter:g(w,P),onMouseLeave:v(w,P),onClick:j(w,P),key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(P)}),c?_.createElement(Y9,{shape:a,activeBar:c,baseProps:i,entry:w,index:P,dataKey:o}):_.createElement(X9,{shape:a,baseProps:i,entry:w,index:P,dataKey:o})))):null}function Q9(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:c,animationEasing:d,onAnimationEnd:f,onAnimationStart:h}=t,m=r.current,g=_h(t,"recharts-bar-"),[v,j]=_.useState(!1),w=!v,P=_.useCallback(()=>{typeof f=="function"&&f(),j(!1)},[f]),b=_.useCallback(()=>{typeof h=="function"&&h(),j(!0)},[h]);return _.createElement(G9,{showLabels:w,rects:n},_.createElement(xh,{animationId:g,begin:o,duration:c,isActive:a,easing:d,onAnimationEnd:P,onAnimationStart:b,key:g},x=>{var S=x===1?n:n==null?void 0:n.map((O,N)=>{var C=m&&m[N];if(C)return Gt(Gt({},O),{},{x:Mt(C.x,O.x,x),y:Mt(C.y,O.y,x),width:Mt(C.width,O.width,x),height:Mt(C.height,O.height,x)});if(i==="horizontal"){var E=Mt(0,O.height,x);return Gt(Gt({},O),{},{y:O.y+O.height-E,height:E})}var A=Mt(0,O.width,x);return Gt(Gt({},O),{},{width:A})});return x>0&&(r.current=S??null),S==null?null:_.createElement(dr,null,_.createElement(J9,{props:t,data:S}))}),_.createElement(cO,{label:t.label}),t.children)}function eW(e){var t=_.useRef(null);return _.createElement(Q9,{previousRectanglesRef:t,props:e})}var wO=0,tW=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ve(e,t)}};class rW extends _.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:o,needClip:c,background:d,id:f}=this.props;if(t||r==null)return null;var h=Oe("recharts-bar",i),m=f;return _.createElement(dr,{className:h,id:f},c&&_.createElement("defs",null,_.createElement(R9,{clipPathId:m,xAxisId:a,yAxisId:o})),_.createElement(dr,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(m,")"):void 0},_.createElement(q9,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),_.createElement(eW,this.props)))}}var nW={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Xa.isSsr,legendType:"rect",minPointSize:wO,xAxisId:0,yAxisId:0};function iW(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:c,animationDuration:d,animationEasing:f,isAnimationActive:h}=e,{needClip:m}=bO(t,r),g=m0(),v=Yr(),j=$y(e.children,Fr),w=le(x=>AW(x,t,r,v,e.id,j));if(g!=="vertical"&&g!=="horizontal")return null;var P,b=w==null?void 0:w[0];return b==null||b.height==null||b.width==null?P=0:P=g==="vertical"?b.height/2:b.width/2,_.createElement(I9,{xAxisId:t,yAxisId:r,data:w,dataPointFormatter:tW,errorBarOffset:P},_.createElement(rW,Zi({},e,{layout:g,needClip:m,data:w,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:c,animationDuration:d,animationEasing:f,isAnimationActive:h})))}function aW(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:o,yAxis:c,xAxisTicks:d,yAxisTicks:f,stackedData:h,displayedData:m,offset:g,cells:v,parentViewBox:j}=e,w=t==="horizontal"?c:o,P=h?w.scale.domain():null,b=AR({numericAxis:w});return m.map((x,S)=>{var O,N,C,E,A,H;h?O=kR(h[S],P):(O=Ve(x,r),Array.isArray(O)||(O=[b,O]));var B=N9(n,wO)(O[1],S);if(t==="horizontal"){var R,[U,I]=[c.scale(O[0]),c.scale(O[1])];N=Kw({axis:o,ticks:d,bandSize:a,offset:i.offset,entry:x,index:S}),C=(R=I??U)!==null&&R!==void 0?R:void 0,E=i.size;var D=U-I;if(A=jr(D)?0:D,H={x:N,y:g.top,width:E,height:g.height},Math.abs(B)>0&&Math.abs(A)<Math.abs(B)){var $=St(A||B)*(Math.abs(B)-Math.abs(A));C-=$,A+=$}}else{var[z,G]=[o.scale(O[0]),o.scale(O[1])];if(N=z,C=Kw({axis:c,ticks:f,bandSize:a,offset:i.offset,entry:x,index:S}),E=G-z,A=i.size,H={x:g.left,y:C,width:g.width,height:A},Math.abs(B)>0&&Math.abs(E)<Math.abs(B)){var F=St(E||B)*(Math.abs(B)-Math.abs(E));E+=F}}if(N==null||C==null||E==null||A==null)return null;var Y=Gt(Gt({},x),{},{x:N,y:C,width:E,height:A,value:h?O:O[1],payload:x,background:H,tooltipPosition:{x:N+E/2,y:C+A/2},parentViewBox:j},v&&v[S]&&v[S].props);return Y}).filter(Boolean)}function sW(e){var t=er(e,nW),r=Yr();return _.createElement(vO,{id:t.id,type:"bar"},n=>_.createElement(_.Fragment,null,_.createElement(b7,{legendPayload:Z9(t)}),_.createElement(pO,{fn:V9,args:t}),_.createElement(L7,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:TR(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),_.createElement(iW,Zi({},t,{id:n}))))}var Is=_.memo(sW);Is.displayName="Bar";function Hj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hj(Object(r),!0).forEach(function(n){oW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oW(e,t,r){return(t=lW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lW(e){var t=cW(e,"string");return typeof t=="symbol"?t:t+""}function cW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uW=(e,t)=>t,dW=(e,t,r)=>r,fW=(e,t,r,n)=>n,hW=(e,t,r,n,i)=>i,$c=K([J0,hW],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),mW=K([$c],e=>e==null?void 0:e.maxBarSize),pW=(e,t,r,n,i,a)=>a,Kj=(e,t,r)=>{var n=r??e;if(!kt(n))return Wt(n,t,0)},gW=K([ke,J0,uW,dW,fW],(e,t,r,n,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),vW=(e,t,r,n)=>{var i=ke(e);return i==="horizontal"?lv(e,"yAxis",r,n):lv(e,"xAxis",t,n)},yW=(e,t,r)=>{var n=ke(e);return n==="horizontal"?ij(e,"xAxis",t):ij(e,"yAxis",r)},xW=(e,t,r)=>{var n={},i=e.filter(Oh),a=e.filter(f=>f.stackId==null),o=i.reduce((f,h)=>(f[h.stackId]||(f[h.stackId]=[]),f[h.stackId].push(h),f),n),c=Object.entries(o).map(f=>{var[h,m]=f,g=m.map(j=>j.dataKey),v=Kj(t,r,m[0].barSize);return{stackId:h,dataKeys:g,barSize:v}}),d=a.map(f=>{var h=[f.dataKey].filter(g=>g!=null),m=Kj(t,r,f.barSize);return{stackId:void 0,dataKeys:h,barSize:m}});return[...c,...d]},_W=K([gW,lB,yW],xW),bW=(e,t,r,n,i)=>{var a,o,c=$c(e,t,r,n,i);if(c!=null){var d=ke(e),f=MC(e),{maxBarSize:h}=c,m=kt(h)?f:h,g,v;return d==="horizontal"?(g=go(e,"xAxis",t,n),v=po(e,"xAxis",t,n)):(g=go(e,"yAxis",r,n),v=po(e,"yAxis",r,n)),(a=(o=c0(g,v,!0))!==null&&o!==void 0?o:m)!==null&&a!==void 0?a:0}},jO=(e,t,r,n)=>{var i=ke(e),a,o;return i==="horizontal"?(a=go(e,"xAxis",t,n),o=po(e,"xAxis",t,n)):(a=go(e,"yAxis",r,n),o=po(e,"yAxis",r,n)),c0(a,o)};function wW(e,t,r,n,i){var a=n.length;if(!(a<1)){var o=Wt(e,r,0,!0),c,d=[];if(Pr(n[0].barSize)){var f=!1,h=r/a,m=n.reduce((b,x)=>b+(x.barSize||0),0);m+=(a-1)*o,m>=r&&(m-=(a-1)*o,o=0),m>=r&&h>0&&(f=!0,h*=.9,m=a*h);var g=(r-m)/2>>0,v={offset:g-o,size:0};c=n.reduce((b,x)=>{var S,O={stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:v.offset+v.size+o,size:f?h:(S=x.barSize)!==null&&S!==void 0?S:0}},N=[...b,O];return v=N[N.length-1].position,N},d)}else{var j=Wt(t,r,0,!0);r-2*j-(a-1)*o<=0&&(o=0);var w=(r-2*j-(a-1)*o)/a;w>1&&(w>>=0);var P=Pr(i)?Math.min(w,i):w;c=n.reduce((b,x,S)=>[...b,{stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:j+(w+o)*S+(w-P)/2,size:P}}],d)}return c}}var jW=(e,t,r,n,i,a,o)=>{var c=kt(o)?t:o,d=wW(r,n,i!==a?i:a,e,c);return i!==a&&d!=null&&(d=d.map(f=>zu(zu({},f),{},{position:zu(zu({},f.position),{},{offset:f.position.offset-i/2})}))),d},SW=K([_W,MC,oB,LC,bW,jO,mW],jW),PW=(e,t,r,n)=>go(e,"xAxis",t,n),kW=(e,t,r,n)=>go(e,"yAxis",r,n),NW=(e,t,r,n)=>po(e,"xAxis",t,n),CW=(e,t,r,n)=>po(e,"yAxis",r,n),EW=K([SW,$c],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),OW=(e,t)=>{var r=G0(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:a}=i;if(a)return a.find(o=>o.key===r)}}}},TW=K([vW,$c],OW),AW=K([vt,u0,PW,kW,NW,CW,EW,ke,B0,jO,TW,$c,pW],(e,t,r,n,i,a,o,c,d,f,h,m,g)=>{var{chartData:v,dataStartIndex:j,dataEndIndex:w}=d;if(!(m==null||o==null||t==null||c!=="horizontal"&&c!=="vertical"||r==null||n==null||i==null||a==null||f==null)){var{data:P}=m,b;if(P!=null&&P.length>0?b=P:b=v==null?void 0:v.slice(j,w+1),b!=null)return aW({layout:c,barSettings:m,pos:o,parentViewBox:t,bandSize:f,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:h,displayedData:b,offset:e,cells:g})}}),SO=e=>{var{chartData:t}=e,r=Xe(),n=Yr();return _.useEffect(()=>n?()=>{}:(r(hj(t)),()=>{r(hj(void 0))}),[t,r,n]),null},Zj={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},MW=Cr({name:"brush",initialState:Zj,reducers:{setBrushSettings(e,t){return t.payload==null?Zj:t.payload}}}),LW=MW.reducer;function DW(e,t,r){return(t=IW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IW(e){var t=RW(e,"string");return typeof t=="symbol"?t:t+""}function RW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Mx{static create(t){return new Mx(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}DW(Mx,"EPS",1e-4);function $W(e){return(e%180+180)%180}var zW=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=$W(i),o=a*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},BW={dots:[],areas:[],lines:[]},FW=Cr({name:"referenceElements",initialState:BW,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Xn(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Xn(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Xn(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),UW=FW.reducer,WW=_.createContext(void 0),HW=e=>{var{children:t}=e,[r]=_.useState("".concat(ic("recharts"),"-clip")),n=_O();if(n==null)return null;var{x:i,y:a,width:o,height:c}=n;return _.createElement(WW.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:i,y:a,height:c,width:o}))),t)};function vo(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function PO(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function KW(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return zW(n,r)}function ZW(e,t,r){var n=r==="width",{x:i,y:a,width:o,height:c}=e;return t===1?{start:n?i:a,end:n?i+o:a+c}:{start:n?i+o:a+c,end:n?i:a}}function gf(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function VW(e,t){return PO(e,t+1)}function qW(e,t,r,n,i){for(var a=(n||[]).slice(),{start:o,end:c}=t,d=0,f=1,h=o,m=function(){var j=n==null?void 0:n[d];if(j===void 0)return{v:PO(n,f)};var w=d,P,b=()=>(P===void 0&&(P=r(j,w)),P),x=j.coordinate,S=d===0||gf(e,x,b,h,c);S||(d=0,h=o,f+=1),S&&(h=x+e*(b()/2+i),d+=f)},g;f<=a.length;)if(g=m(),g)return g.v;return[]}function Vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vj(Object(r),!0).forEach(function(n){GW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GW(e,t,r){return(t=YW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YW(e){var t=XW(e,"string");return typeof t=="symbol"?t:t+""}function XW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JW(e,t,r,n,i){for(var a=(n||[]).slice(),o=a.length,{start:c}=t,{end:d}=t,f=function(g){var v=a[g],j,w=()=>(j===void 0&&(j=r(v,g)),j);if(g===o-1){var P=e*(v.coordinate+e*w()/2-d);a[g]=v=Bt(Bt({},v),{},{tickCoord:P>0?v.coordinate-P*e:v.coordinate})}else a[g]=v=Bt(Bt({},v),{},{tickCoord:v.coordinate});var b=gf(e,v.tickCoord,w,c,d);b&&(d=v.tickCoord-e*(w()/2+i),a[g]=Bt(Bt({},v),{},{isShow:!0}))},h=o-1;h>=0;h--)f(h);return a}function QW(e,t,r,n,i,a){var o=(n||[]).slice(),c=o.length,{start:d,end:f}=t;if(a){var h=n[c-1],m=r(h,c-1),g=e*(h.coordinate+e*m/2-f);o[c-1]=h=Bt(Bt({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate});var v=gf(e,h.tickCoord,()=>m,d,f);v&&(f=h.tickCoord-e*(m/2+i),o[c-1]=Bt(Bt({},h),{},{isShow:!0}))}for(var j=a?c-1:c,w=function(x){var S=o[x],O,N=()=>(O===void 0&&(O=r(S,x)),O);if(x===0){var C=e*(S.coordinate-e*N()/2-d);o[x]=S=Bt(Bt({},S),{},{tickCoord:C<0?S.coordinate-C*e:S.coordinate})}else o[x]=S=Bt(Bt({},S),{},{tickCoord:S.coordinate});var E=gf(e,S.tickCoord,N,d,f);E&&(d=S.tickCoord+e*(N()/2+i),o[x]=Bt(Bt({},S),{},{isShow:!0}))},P=0;P<j;P++)w(P);return o}function Lx(e,t,r){var{tick:n,ticks:i,viewBox:a,minTickGap:o,orientation:c,interval:d,tickFormatter:f,unit:h,angle:m}=e;if(!i||!i.length||!n)return[];if(de(d)||Xa.isSsr){var g;return(g=VW(i,de(d)?d:0))!==null&&g!==void 0?g:[]}var v=[],j=c==="top"||c==="bottom"?"width":"height",w=h&&j==="width"?Ml(h,{fontSize:t,letterSpacing:r}):{width:0,height:0},P=(S,O)=>{var N=typeof f=="function"?f(S.value,O):S.value;return j==="width"?KW(Ml(N,{fontSize:t,letterSpacing:r}),w,m):Ml(N,{fontSize:t,letterSpacing:r})[j]},b=i.length>=2?St(i[1].coordinate-i[0].coordinate):1,x=ZW(a,b,j);return d==="equidistantPreserveStart"?qW(b,x,P,i,o):(d==="preserveStart"||d==="preserveStartEnd"?v=QW(b,x,P,i,o,d==="preserveStartEnd"):v=JW(b,x,P,i,o),v.filter(S=>S.isShow))}var eH=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=e,o=0;if(t){t.forEach(h=>{if(h){var m=h.getBoundingClientRect();m.width>o&&(o=m.width)}});var c=r?r.getBoundingClientRect().width:0,d=i+a,f=o+d+c+(r?n:0);return Math.round(f)}return 0},tH=["axisLine","width","height","className","hide","ticks"],rH=["viewBox"],nH=["viewBox"];function pv(e,t){if(e==null)return{};var r,n,i=iH(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function iH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Za.apply(null,arguments)}function qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qj(Object(r),!0).forEach(function(n){aH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aH(e,t,r){return(t=sH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sH(e){var t=oH(e,"string");return typeof t=="symbol"?t:t+""}function oH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dx={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function lH(e){var{x:t,y:r,width:n,height:i,orientation:a,mirror:o,axisLine:c,otherSvgProps:d}=e;if(!c)return null;var f=mt(mt(mt({},d),gt(c,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!o||a==="bottom"&&o);f=mt(mt({},f),{},{x1:t,y1:r+h*i,x2:t+n,y2:r+h*i})}else{var m=+(a==="left"&&!o||a==="right"&&o);f=mt(mt({},f),{},{x1:t+m*n,y1:r,x2:t+m*n,y2:r+i})}return _.createElement("line",Za({},f,{className:Oe("recharts-cartesian-axis-line",Ba(c,"className"))}))}function cH(e,t,r,n,i,a,o,c,d){var f,h,m,g,v,j,w=c?-1:1,P=e.tickSize||o,b=de(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":f=h=e.coordinate,g=r+ +!c*i,m=g-w*P,j=m-w*d,v=b;break;case"left":m=g=e.coordinate,h=t+ +!c*n,f=h-w*P,v=f-w*d,j=b;break;case"right":m=g=e.coordinate,h=t+ +c*n,f=h+w*P,v=f+w*d,j=b;break;default:f=h=e.coordinate,g=r+ +c*i,m=g+w*P,j=m+w*d,v=b;break}return{line:{x1:f,y1:m,x2:h,y2:g},tick:{x:v,y:j}}}function uH(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function dH(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function fH(e){var{option:t,tickProps:r,value:n}=e,i,a=Oe(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))i=_.cloneElement(t,mt(mt({},r),{},{className:a}));else if(typeof t=="function")i=t(mt(mt({},r),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Oe(o,t==null?void 0:t.className)),i=_.createElement(Ih,Za({},r,{className:o}),n)}return i}function hH(e){var{ticks:t=[],tick:r,tickLine:n,stroke:i,tickFormatter:a,unit:o,padding:c,tickTextProps:d,orientation:f,mirror:h,x:m,y:g,width:v,height:j,tickSize:w,tickMargin:P,fontSize:b,letterSpacing:x,getTicksConfig:S,events:O}=e,N=Lx(mt(mt({},S),{},{ticks:t}),b,x),C=uH(f,h),E=dH(f,h),A=Xi(S),H=gt(r,!1),B=mt(mt({},A),{},{fill:"none"},gt(n,!1)),R=N.map((U,I)=>{var{line:D,tick:$}=cH(U,m,g,v,j,f,w,h,P),z=mt(mt(mt(mt({textAnchor:C,verticalAnchor:E},A),{},{stroke:"none",fill:i},H),$),{},{index:I,payload:U,visibleTicksCount:N.length,tickFormatter:a,padding:c},d);return _.createElement(dr,Za({className:"recharts-cartesian-axis-tick",key:"tick-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},jc(O,U,I)),n&&_.createElement("line",Za({},B,D,{className:Oe("recharts-cartesian-axis-tick-line",Ba(n,"className"))})),r&&_.createElement(fH,{option:r,tickProps:z,value:"".concat(typeof a=="function"?a(U.value,I):U.value).concat(o||"")}))});return R.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},R):null}var mH=_.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:a,hide:o,ticks:c}=e,d=pv(e,tH),[f,h]=_.useState(""),[m,g]=_.useState(""),v=_.useRef([]);_.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var w;return eH({ticks:v.current,label:(w=e.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=_.useCallback(w=>{if(w){var P=w.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=Array.from(P);var b=P[0];if(b){var x=window.getComputedStyle(b),S=x.fontSize,O=x.letterSpacing;(S!==f||O!==m)&&(h(S),g(O))}}},[f,m]);return o||n!=null&&n<=0||i!=null&&i<=0?null:_.createElement(dr,{className:Oe("recharts-cartesian-axis",a),ref:j},_.createElement(lH,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Xi(e)}),_.createElement(hH,{ticks:c,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:f,letterSpacing:m,getTicksConfig:e,events:d}),_.createElement(wU,{x:e.x,y:e.y,width:e.width,height:e.height},_.createElement(AU,{label:e.label}),e.children))}),pH=_.memo(mH,(e,t)=>{var{viewBox:r}=e,n=pv(e,rH),{viewBox:i}=t,a=pv(t,nH);return vo(r,i)&&vo(n,a)}),Ix=_.forwardRef((e,t)=>{var r=er(e,Dx);return _.createElement(pH,Za({},r,{ref:t}))});Ix.displayName="CartesianAxis";var gH=["x1","y1","x2","y2","key"],vH=["offset"],yH=["xAxisId","yAxisId"],xH=["xAxisId","yAxisId"];function Gj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gj(Object(r),!0).forEach(function(n){_H(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _H(e,t,r){return(t=bH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bH(e){var t=wH(e,"string");return typeof t=="symbol"?t:t+""}function wH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ka.apply(null,arguments)}function vf(e,t){if(e==null)return{};var r,n,i=jH(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var SH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:o,ry:c}=e;return _.createElement("rect",{x:n,y:i,ry:c,width:a,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function kO(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:i,x2:a,y2:o,key:c}=t,d=vf(t,gH),f=Xi(d),h=vf(f,vH);r=_.createElement("line",ka({},h,{x1:n,y1:i,x2:a,y2:o,fill:"none",key:c}))}return r}function PH(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var a=vf(e,yH),o=i.map((c,d)=>{var f=Ut(Ut({},a),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(d),index:d});return kO(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function kH(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var a=vf(e,xH),o=i.map((c,d)=>{var f=Ut(Ut({},a),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(d),index:d});return kO(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function NH(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:a,height:o,horizontalPoints:c,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var f=c.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==f[0]&&f.unshift(0);var h=f.map((m,g)=>{var v=!f[g+1],j=v?i+o-m:f[g+1]-m;if(j<=0)return null;var w=g%t.length;return _.createElement("rect",{key:"react-".concat(g),y:m,x:n,height:j,width:a,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function CH(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:o,height:c,verticalPoints:d}=e;if(!t||!r||!r.length)return null;var f=d.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==f[0]&&f.unshift(0);var h=f.map((m,g)=>{var v=!f[g+1],j=v?i+o-m:f[g+1]-m;if(j<=0)return null;var w=g%r.length;return _.createElement("rect",{key:"react-".concat(g),x:m,y:a,width:j,height:c,stroke:"none",fill:r[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var EH=(e,t)=>{var{xAxis:r,width:n,height:i,offset:a}=e;return gN(Lx(Ut(Ut(Ut({},Dx),r),{},{ticks:vN(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},OH=(e,t)=>{var{yAxis:r,width:n,height:i,offset:a}=e;return gN(Lx(Ut(Ut(Ut({},Dx),r),{},{ticks:vN(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},TH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Rs(e){var t=f0(),r=h0(),n=bN(),i=Ut(Ut({},er(e,TH)),{},{x:de(e.x)?e.x:n.left,y:de(e.y)?e.y:n.top,width:de(e.width)?e.width:n.width,height:de(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:o,x:c,y:d,width:f,height:h,syncWithTicks:m,horizontalValues:g,verticalValues:v}=i,j=Yr(),w=le(H=>aj(H,"xAxis",a,j)),P=le(H=>aj(H,"yAxis",o,j));if(!de(f)||f<=0||!de(h)||h<=0||!de(c)||c!==+c||!de(d)||d!==+d)return null;var b=i.verticalCoordinatesGenerator||EH,x=i.horizontalCoordinatesGenerator||OH,{horizontalPoints:S,verticalPoints:O}=i;if((!S||!S.length)&&typeof x=="function"){var N=g&&g.length,C=x({yAxis:P?Ut(Ut({},P),{},{ticks:N?g:P.ticks}):void 0,width:t,height:r,offset:n},N?!0:m);Al(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(S=C)}if((!O||!O.length)&&typeof b=="function"){var E=v&&v.length,A=b({xAxis:w?Ut(Ut({},w),{},{ticks:E?v:w.ticks}):void 0,width:t,height:r,offset:n},E?!0:m);Al(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(O=A)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(SH,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),_.createElement(NH,ka({},i,{horizontalPoints:S})),_.createElement(CH,ka({},i,{verticalPoints:O})),_.createElement(PH,ka({},i,{offset:n,horizontalPoints:S,xAxis:w,yAxis:P})),_.createElement(kH,ka({},i,{offset:n,verticalPoints:O,xAxis:w,yAxis:P})))}Rs.displayName="CartesianGrid";var AH=["dangerouslySetInnerHTML","ticks"],MH=["id"],LH=["domain"],DH=["domain"];function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gv.apply(null,arguments)}function yf(e,t){if(e==null)return{};var r,n,i=IH(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function IH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function RH(e){var t=Xe();return _.useEffect(()=>(t(u9(e)),()=>{t(d9(e))}),[e,t]),null}var $H=e=>{var{xAxisId:t,className:r}=e,n=le(u0),i=Yr(),a="xAxis",o=le(v=>Oo(v,a,t,i)),c=le(v=>gE(v,a,t,i)),d=le(v=>fE(v,t)),f=le(v=>QB(v,t)),h=le(v=>WC(v,t));if(d==null||f==null||h==null)return null;var m=yf(e,AH),g=yf(h,MH);return _.createElement(Ix,gv({},m,g,{scale:o,x:f.x,y:f.y,width:d.width,height:d.height,className:Oe("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:c}))},zH={allowDataOverflow:hr.allowDataOverflow,allowDecimals:hr.allowDecimals,allowDuplicatedCategory:hr.allowDuplicatedCategory,height:hr.height,hide:!1,mirror:hr.mirror,orientation:hr.orientation,padding:hr.padding,reversed:hr.reversed,scale:hr.scale,tickCount:hr.tickCount,type:hr.type,xAxisId:0},BH=e=>{var t,r,n,i,a,o=er(e,zH);return _.createElement(_.Fragment,null,_.createElement(RH,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),_.createElement($H,o))},FH=(e,t)=>{var{domain:r}=e,n=yf(e,LH),{domain:i}=t,a=yf(t,DH);return vo(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:vo({domain:r},{domain:i}):!1},$s=_.memo(BH,FH);$s.displayName="XAxis";var UH=["dangerouslySetInnerHTML","ticks"],WH=["id"],HH=["domain"],KH=["domain"];function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vv.apply(null,arguments)}function xf(e,t){if(e==null)return{};var r,n,i=ZH(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ZH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VH(e){var t=Xe();return _.useEffect(()=>(t(f9(e)),()=>{t(h9(e))}),[e,t]),null}var qH=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,a=_.useRef(null),o=_.useRef(null),c=le(u0),d=Yr(),f=Xe(),h="yAxis",m=le(x=>Oo(x,h,t,d)),g=le(x=>hE(x,t)),v=le(x=>t8(x,t)),j=le(x=>gE(x,h,t,d)),w=le(x=>HC(x,t));if(_.useLayoutEffect(()=>{if(!(n!=="auto"||!g||jx(i)||_.isValidElement(i)||w==null)){var x=a.current;if(x){var S=x.getCalculatedWidth();Math.round(g.width)!==Math.round(S)&&f(m9({id:t,width:S}))}}},[j,g,f,i,t,n,w]),g==null||v==null||w==null)return null;var P=xf(e,UH),b=xf(w,WH);return _.createElement(Ix,vv({},P,b,{ref:a,labelRef:o,scale:m,x:v.x,y:v.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:Oe("recharts-".concat(h," ").concat(h),r),viewBox:c,ticks:j}))},GH={allowDataOverflow:mr.allowDataOverflow,allowDecimals:mr.allowDecimals,allowDuplicatedCategory:mr.allowDuplicatedCategory,hide:!1,mirror:mr.mirror,orientation:mr.orientation,padding:mr.padding,reversed:mr.reversed,scale:mr.scale,tickCount:mr.tickCount,type:mr.type,width:mr.width,yAxisId:0},YH=e=>{var t,r,n,i,a,o=er(e,GH);return _.createElement(_.Fragment,null,_.createElement(VH,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),_.createElement(qH,o))},XH=(e,t)=>{var{domain:r}=e,n=xf(e,HH),{domain:i}=t,a=xf(t,KH);return vo(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:vo({domain:r},{domain:i}):!1},zs=_.memo(YH,XH);zs.displayName="YAxis";var JH={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zc=_;function QH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var eK=typeof Object.is=="function"?Object.is:QH,tK=zc.useSyncExternalStore,rK=zc.useRef,nK=zc.useEffect,iK=zc.useMemo,aK=zc.useDebugValue;JH.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=rK(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=iK(function(){function d(v){if(!f){if(f=!0,h=v,v=n(v),i!==void 0&&o.hasValue){var j=o.value;if(i(j,v))return m=j}return m=v}if(j=m,eK(h,v))return j;var w=n(v);return i!==void 0&&i(j,w)?(h=v,j):(h=v,m=w)}var f=!1,h,m,g=r===void 0?null:r;return[function(){return d(t())},g===null?void 0:function(){return d(g())}]},[t,r,n,i]);var c=tK(e,a[0],a[1]);return nK(function(){o.hasValue=!0,o.value=c},[c]),aK(c),c};function sK(e){e()}function oK(){let e=null,t=null;return{clear(){e=null,t=null},notify(){sK(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Yj={notify(){},get:()=>[]};function lK(e,t){let r,n=Yj,i=0,a=!1;function o(w){h();const P=n.subscribe(w);let b=!1;return()=>{b||(b=!0,P(),m())}}function c(){n.notify()}function d(){j.onStateChange&&j.onStateChange()}function f(){return a}function h(){i++,r||(r=e.subscribe(d),n=oK())}function m(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=Yj)}function g(){a||(a=!0,h())}function v(){a&&(a=!1,m())}const j={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:d,isSubscribed:f,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>n};return j}var cK=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uK=cK(),dK=()=>typeof navigator<"u"&&navigator.product==="ReactNative",fK=dK(),hK=()=>uK||fK?_.useLayoutEffect:_.useEffect,mK=hK(),jp=Symbol.for("react-redux-context"),Sp=typeof globalThis<"u"?globalThis:{};function pK(){if(!_.createContext)return{};const e=Sp[jp]??(Sp[jp]=new Map);let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var gK=pK();function vK(e){const{children:t,context:r,serverState:n,store:i}=e,a=_.useMemo(()=>{const d=lK(i);return{store:i,subscription:d,getServerState:n?()=>n:void 0}},[i,n]),o=_.useMemo(()=>i.getState(),[i]);mK(()=>{const{subscription:d}=a;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),o!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[a,o]);const c=r||gK;return _.createElement(c.Provider,{value:a},t)}var yK=vK,xK=(e,t)=>t,Rx=K([xK,ke,BC,xt,TE,hi,aF,vt],uF),$x=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},NO=Vr("mouseClick"),CO=Pc();CO.startListening({actionCreator:NO,effect:(e,t)=>{var r=e.payload,n=Rx(t.getState(),$x(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(m8({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var yv=Vr("mouseMove"),EO=Pc();EO.startListening({actionCreator:yv,effect:(e,t)=>{var r=e.payload,n=t.getState(),i=mx(n,n.tooltip.settings.shared),a=Rx(n,$x(r));i==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(SE({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(jE()))}});var Xj={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},OO=Cr({name:"rootProps",initialState:Xj,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Xj.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),_K=OO.reducer,{updateOptions:bK}=OO.actions,TO=Cr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:wK}=TO.actions,jK=TO.reducer,AO=Vr("keyDown"),MO=Vr("focus"),zx=Pc();zx.startListening({actionCreator:AO,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=Number(px(i,Ao(r))),c=hi(r);if(a==="Enter"){var d=uf(r,"axis","hover",String(i.index));t.dispatch(uv({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var f=a8(r),h=f==="left-to-right"?1:-1,m=a==="ArrowRight"?1:-1,g=o+m*h;if(!(c==null||g>=c.length||g<0)){var v=uf(r,"axis","hover",String(g));t.dispatch(uv({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:v}))}}}}});zx.startListening({actionCreator:MO,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",o=uf(r,"axis","hover",String(a));t.dispatch(uv({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var Ir=Vr("externalEvent"),LO=Pc();LO.startListening({actionCreator:Ir,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:Y8(r),activeDataKey:DE(r),activeIndex:Ka(r),activeLabel:LE(r),activeTooltipIndex:Ka(r),isTooltipActive:X8(r)};e.payload.handler(n,e.payload.reactEvent)}}});var SK=K([To],e=>e.tooltipItemPayloads),PK=K([SK,Ic,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(c=>c.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var o=t(a,r);return o}}}),DO=Vr("touchMove"),IO=Pc();IO.startListening({actionCreator:DO,effect:(e,t)=>{var r=e.payload,n=t.getState(),i=mx(n,n.tooltip.settings.shared);if(i==="axis"){var a=Rx(n,$x({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(SE({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,c=r.touches[0],d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var f=d.getAttribute(xN),h=(o=d.getAttribute(_N))!==null&&o!==void 0?o:void 0,m=PK(t.getState(),f,h);t.dispatch(wE({activeDataKey:h,activeIndex:f,activeCoordinate:m}))}}});var kK=Kk({brush:LW,cartesianAxis:p9,chartData:PF,errorBars:O9,graphicalItems:M7,layout:uR,legend:e5,options:_F,polarAxis:XU,polarOptions:jK,referenceElements:UW,rootProps:_K,tooltip:p8}),NK=function(t){return D4({reducer:kK,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([CO.middleware,EO.middleware,zx.middleware,LO.middleware,IO.middleware]),devTools:Xa.devToolsEnabled})};function RO(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Yr(),a=_.useRef(null);if(i)return r;a.current==null&&(a.current=NK(t));var o=t0;return _.createElement(yK,{context:o,store:a.current},r)}function $O(e){var{layout:t,width:r,height:n,margin:i}=e,a=Xe(),o=Yr();return _.useEffect(()=>{o||(a(oR(t)),a(lR({width:r,height:n})),a(sR(i)))},[a,o,t,r,n,i]),null}function zO(e){var t=Xe();return _.useEffect(()=>{t(bK(e))},[t,e]),null}var CK=["children"];function EK(e,t){if(e==null)return{};var r,n,i=OK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function OK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _f(){return _f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_f.apply(null,arguments)}var TK={width:"100%",height:"100%"},AK=_.forwardRef((e,t)=>{var r=f0(),n=h0(),i=PN();if(!co(r)||!co(n))return null;var{children:a,otherAttributes:o,title:c,desc:d}=e,f,h;return typeof o.tabIndex=="number"?f=o.tabIndex:f=i?0:void 0,typeof o.role=="string"?h=o.role:h=i?"application":void 0,_.createElement(zy,_f({},o,{title:c,desc:d,role:h,tabIndex:f,width:r,height:n,style:TK,ref:t}),a)}),MK=e=>{var{children:t}=e,r=le(yh);if(!r)return null;var{width:n,height:i,y:a,x:o}=r;return _.createElement(zy,{width:n,height:i,x:o,y:a},t)},Jj=_.forwardRef((e,t)=>{var{children:r}=e,n=EK(e,CK),i=Yr();return i?_.createElement(MK,null,r):_.createElement(AK,_f({ref:t},n),r)});function LK(){var e=Xe(),[t,r]=_.useState(null),n=le(zR);return _.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Pr(a)&&a!==n&&e(cR(a))}},[t,e,n]),r}function Qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function DK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qj(Object(r),!0).forEach(function(n){IK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IK(e,t,r){return(t=RK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RK(e){var t=$K(e,"string");return typeof t=="symbol"?t:t+""}function $K(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zK=_.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:o,onDoubleClick:c,onMouseDown:d,onMouseEnter:f,onMouseLeave:h,onMouseMove:m,onMouseUp:g,onTouchEnd:v,onTouchMove:j,onTouchStart:w,style:P,width:b}=e,x=Xe(),[S,O]=_.useState(null),[N,C]=_.useState(null);LF();var E=LK(),A=_.useCallback(ee=>{E(ee),typeof t=="function"&&t(ee),O(ee),C(ee)},[E,t,O,C]),H=_.useCallback(ee=>{x(NO(ee)),x(Ir({handler:a,reactEvent:ee}))},[x,a]),B=_.useCallback(ee=>{x(yv(ee)),x(Ir({handler:f,reactEvent:ee}))},[x,f]),R=_.useCallback(ee=>{x(jE()),x(Ir({handler:h,reactEvent:ee}))},[x,h]),U=_.useCallback(ee=>{x(yv(ee)),x(Ir({handler:m,reactEvent:ee}))},[x,m]),I=_.useCallback(()=>{x(MO())},[x]),D=_.useCallback(ee=>{x(AO(ee.key))},[x]),$=_.useCallback(ee=>{x(Ir({handler:o,reactEvent:ee}))},[x,o]),z=_.useCallback(ee=>{x(Ir({handler:c,reactEvent:ee}))},[x,c]),G=_.useCallback(ee=>{x(Ir({handler:d,reactEvent:ee}))},[x,d]),F=_.useCallback(ee=>{x(Ir({handler:g,reactEvent:ee}))},[x,g]),Y=_.useCallback(ee=>{x(Ir({handler:w,reactEvent:ee}))},[x,w]),V=_.useCallback(ee=>{x(DO(ee)),x(Ir({handler:j,reactEvent:ee}))},[x,j]),ce=_.useCallback(ee=>{x(Ir({handler:v,reactEvent:ee}))},[x,v]);return _.createElement(FE.Provider,{value:S},_.createElement(X2.Provider,{value:N},_.createElement("div",{className:Oe("recharts-wrapper",n),style:DK({position:"relative",cursor:"default",width:b,height:i},P),onClick:H,onContextMenu:$,onDoubleClick:z,onFocus:I,onKeyDown:D,onMouseDown:G,onMouseEnter:B,onMouseLeave:R,onMouseMove:U,onMouseUp:F,onTouchEnd:ce,onTouchMove:V,onTouchStart:Y,ref:A},r)))}),BK=["children","className","width","height","style","compact","title","desc"];function FK(e,t){if(e==null)return{};var r,n,i=UK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function UK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var BO=_.forwardRef((e,t)=>{var{children:r,className:n,width:i,height:a,style:o,compact:c,title:d,desc:f}=e,h=FK(e,BK),m=Xi(h);return c?_.createElement(Jj,{otherAttributes:m,title:d,desc:f},r):_.createElement(zK,{className:n,style:o,width:i,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement(Jj,{otherAttributes:m,title:d,desc:f,ref:t},_.createElement(HW,null,r)))}),WK=["width","height"];function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xv.apply(null,arguments)}function HK(e,t){if(e==null)return{};var r,n,i=KK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function KK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZK={top:5,right:5,bottom:5,left:5},VK={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ZK,reverseStackOrder:!1,syncMethod:"index"},qK=_.forwardRef(function(t,r){var n,i=er(t.categoricalChartProps,VK),{width:a,height:o}=i,c=HK(i,WK);if(!co(a)||!co(o))return null;var{chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,categoricalChartProps:g}=t,v={chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,eventEmitter:void 0};return _.createElement(RO,{preloadedState:{options:v},reduxStoreName:(n=g.id)!==null&&n!==void 0?n:d},_.createElement(SO,{chartData:g.data}),_.createElement($O,{width:a,height:o,layout:i.layout,margin:i.margin}),_.createElement(zO,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),_.createElement(BO,xv({},c,{width:a,height:o,ref:r})))}),GK=["axis","item"],xl=_.forwardRef((e,t)=>_.createElement(qK,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:GK,tooltipPayloadSearcher:WE,categoricalChartProps:e,ref:t}));function YK(e){var t=Xe();return _.useEffect(()=>{t(wK(e))},[t,e]),null}var XK=["width","height","layout"];function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(null,arguments)}function JK(e,t){if(e==null)return{};var r,n,i=QK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function QK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eZ={top:5,right:5,bottom:5,left:5},tZ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:eZ,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},rZ=_.forwardRef(function(t,r){var n,i=er(t.categoricalChartProps,tZ),{width:a,height:o,layout:c}=i,d=JK(i,XK);if(!co(a)||!co(o))return null;var{chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g}=t,v={chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return _.createElement(RO,{preloadedState:{options:v},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:f},_.createElement(SO,{chartData:i.data}),_.createElement($O,{width:a,height:o,layout:c,margin:i.margin}),_.createElement(zO,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),_.createElement(YK,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),_.createElement(BO,_v({width:a,height:o},d,{ref:r})))}),nZ=["item"],iZ={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},bv=_.forwardRef((e,t)=>{var r=er(e,iZ);return _.createElement(rZ,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:nZ,tooltipPayloadSearcher:WE,categoricalChartProps:r,ref:t})});const Bx=({open:e,title:t,onClose:r,children:n})=>e?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:r}),l.jsxs("div",{className:"relative bg-white w-[95vw] max-w-3xl max-h-[85vh] rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-200 bg-gray-50",children:[l.jsx("h3",{className:"text-base font-semibold text-gray-900",children:t}),l.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 px-2 py-1",children:"✕"})]}),l.jsx("div",{className:"p-5 overflow-auto",children:n})]})]}):null,Bu=["#0ea5e9","#22c55e","#f59e0b","#f43f5e","#6366f1","#14b8a6","#a78bfa","#06b6d4"],Pp={gender:"Gender",elderly:"Elderly vs Non‑Elderly",critical:"Critical vs Non‑Critical",pregnant:"Pregnancy Status"},aZ=({patients:e})=>{const[t,r]=_.useState("gender"),[n,i]=_.useState("bar"),[a,o]=_.useState(!1),[c,d]=_.useState(""),[f,h]=_.useState([]),m=_.useMemo(()=>{const w={};if(t==="gender")for(const P of e){const b=P.gender||"unknown";w[b]=(w[b]||0)+1}else if(t==="elderly")for(const P of e){const b=P.patient_categories.elderly?"Elderly":"Non‑Elderly";w[b]=(w[b]||0)+1}else if(t==="critical")for(const P of e){const b=P.patient_categories.critical?"Critical":"Non‑Critical";w[b]=(w[b]||0)+1}else if(t==="pregnant"){const P=Date.now(),b=42*24*60*60*1e3;for(const x of e){if(x.pregnancy_status==="pregnant"||x.patient_categories.pregnant){w.Pregnant=(w.Pregnant||0)+1;continue}if(x.pregnancy_status==="postpartum"){const S=x.delivery_date?new Date(x.delivery_date).getTime():NaN;!Number.isNaN(S)&&P-S<=b&&(w["Recently Delivered"]=(w["Recently Delivered"]||0)+1)}}}return Object.entries(w).map(([P,b])=>({name:P,count:b}))},[e,t]),g=e.length,v=w=>{if(t==="gender"){const P=w.toLowerCase();return e.filter(b=>(b.gender||"other").toLowerCase()===P)}if(t==="elderly"){const P=w==="Elderly";return e.filter(b=>!!b.patient_categories.elderly===P)}if(t==="critical"){const P=w==="Critical";return e.filter(b=>!!b.patient_categories.critical===P)}if(t==="pregnant"){const P=Date.now(),b=42*24*60*60*1e3;if(w==="Pregnant")return e.filter(x=>x.pregnancy_status==="pregnant"||x.patient_categories.pregnant);if(w==="Recently Delivered")return e.filter(x=>{if(x.pregnancy_status!=="postpartum")return!1;const S=x.delivery_date?new Date(x.delivery_date).getTime():NaN;return!Number.isNaN(S)&&P-S<=b})}return[]},j=w=>{const P=v(w);d(`${Pp[t]} • ${w} (${P.length})`),h(P),o(!0)};return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Patient Overview"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[Pp[t]," • Total: ",g]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:t,onChange:w=>r(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[l.jsx("option",{value:"gender",children:"Gender"}),l.jsx("option",{value:"elderly",children:"Elderly"}),l.jsx("option",{value:"critical",children:"Critical"}),l.jsx("option",{value:"pregnant",children:"Pregnancy"})]}),l.jsxs("div",{className:"inline-flex rounded-lg overflow-hidden border border-gray-300",children:[l.jsx("button",{className:`px-3 py-2 text-sm ${n==="bar"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>i("bar"),children:"Bar"}),l.jsx("button",{className:`px-3 py-2 text-sm border-l border-gray-300 ${n==="pie"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>i("pie"),children:"Pie"})]})]})]}),l.jsx("div",{className:"h-72",children:m.length===0?l.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 text-sm",children:"No data"}):n==="bar"?l.jsx(ji,{width:"100%",height:"100%",children:l.jsxs(xl,{data:m,margin:{top:10,right:20,left:0,bottom:0},children:[l.jsx(Rs,{strokeDasharray:"3 3"}),l.jsx($s,{dataKey:"name",tick:{fontSize:12}}),l.jsx(zs,{allowDecimals:!1,tick:{fontSize:12}}),l.jsx(wi,{}),l.jsx(Wa,{}),l.jsx(Is,{dataKey:"count",name:Pp[t],radius:[4,4,0,0],onClick:w=>{var P;return j((P=w==null?void 0:w.payload)==null?void 0:P.name)},children:m.map((w,P)=>l.jsx(Fr,{fill:Bu[P%Bu.length]},`bar-${P}`))})]})}):l.jsx(ji,{width:"100%",height:"100%",children:l.jsxs(bv,{children:[l.jsx(wi,{}),l.jsx(Wa,{}),l.jsx(mf,{data:m,dataKey:"count",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:!0,onClick:w=>j(w==null?void 0:w.name),children:m.map((w,P)=>l.jsx(Fr,{fill:Bu[P%Bu.length]},`pie-${P}`))})]})})}),l.jsx(Bx,{open:a,title:c,onClose:()=>o(!1),children:f.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"No matching patients."}):l.jsx("div",{className:"overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-gray-600",children:[l.jsx("th",{className:"py-2 pr-4",children:"Name"}),l.jsx("th",{className:"py-2 pr-4",children:"Gender"}),l.jsx("th",{className:"py-2 pr-4",children:"Doctor"}),l.jsx("th",{className:"py-2 pr-4",children:"MRN"})]})}),l.jsx("tbody",{children:f.map(w=>l.jsxs("tr",{className:"border-t border-gray-100",children:[l.jsx("td",{className:"py-2 pr-4 text-gray-900",children:w.name}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:w.gender}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:w.assigned_doctor}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:w.medical_record_number})]},w.id))})]})})})]})},Dr=["#0ea5e9","#22c55e","#f59e0b","#f43f5e","#6366f1","#14b8a6","#a78bfa","#06b6d4"],ms=({title:e,subtitle:t,children:r})=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-5",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:e}),t&&l.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:t})]}),l.jsx("div",{className:"h-56",children:r})]});function sZ(e){if(!e)return null;const t=parseFloat(String(e).replace(/[^0-9.]/g,""));return Number.isFinite(t)?t:null}const oZ=({patients:e})=>{const[t,r]=_.useState(!1),[n,i]=_.useState(""),[a,o]=_.useState([]),c=_.useMemo(()=>{const N={male:0,female:0,other:0};for(const C of e){const E=(C.gender||"other").toLowerCase();N[E]=(N[E]||0)+1}return Object.entries(N).map(([C,E])=>({name:C[0].toUpperCase()+C.slice(1),value:E}))},[e]),d=_.useMemo(()=>{let N=0,C=0;for(const E of e)E.patient_categories.elderly?N++:C++;return[{name:"Elderly",value:N},{name:"Non‑Elderly",value:C}]},[e]),f=_.useMemo(()=>{let N=0,C=0;for(const E of e)E.patient_categories.critical?N++:C++;return[{name:"Critical",value:N},{name:"Non‑Critical",value:C}]},[e]),h=_.useMemo(()=>{let N=0,C=0;const E=Date.now(),A=42*24*60*60*1e3;for(const H of e){const B=H.pregnancy_status;if(B==="pregnant"||H.patient_categories.pregnant){N++;continue}if(B==="postpartum"){const R=H.delivery_date?new Date(H.delivery_date).getTime():NaN;!Number.isNaN(R)&&E-R<=A&&C++}}return[{name:"Pregnant",value:N},{name:"Recently Delivered",value:C}]},[e]),m=_.useMemo(()=>{const N={Underweight:0,Normal:0,Overweight:0,Obese:0};for(const C of e){const E=sZ(C.bmi);E!=null&&(E<18.5?N.Underweight++:E<25?N.Normal++:E<30?N.Overweight++:N.Obese++)}return Object.entries(N).map(([C,E])=>({name:C,count:E}))},[e]),g=_.useMemo(()=>{const N={};for(const E of e){const A=(E.assigned_doctor||"Unassigned").split("-")[0].trim();N[A]=(N[A]||0)+1}const C=Object.entries(N).map(([E,A])=>({name:E,count:A}));return C.sort((E,A)=>A.count-E.count),C.slice(0,6)},[e]),v=(N,C)=>{i(`${N} (${C.length})`),o(C),r(!0)},j=N=>e.filter(C=>(C.gender||"other").toLowerCase()===N.toLowerCase()),w=N=>e.filter(C=>!!C.patient_categories.elderly==(N==="Elderly")),P=N=>e.filter(C=>!!C.patient_categories.critical==(N==="Critical")),b=N=>{const C=Date.now(),E=42*24*60*60*1e3;return N==="Pregnant"?e.filter(A=>A.pregnancy_status==="pregnant"||A.patient_categories.pregnant):N==="Recently Delivered"?e.filter(A=>{if(A.pregnancy_status!=="postpartum")return!1;const H=A.delivery_date?new Date(A.delivery_date).getTime():NaN;return!Number.isNaN(H)&&C-H<=E}):[]},x=N=>{const C=parseFloat(String(N.bmi||"").replace(/[^0-9.]/g,""));return Number.isFinite(C)?C:null},S=N=>e.filter(C=>{const E=x(C);return E==null?!1:N==="Underweight"?E<18.5:N==="Normal"?E>=18.5&&E<25:N==="Overweight"?E>=25&&E<30:N==="Obese"?E>=30:!1}),O=N=>e.filter(C=>(C.assigned_doctor||"Unassigned").split("-")[0].trim()===N);return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[l.jsx(ms,{title:"Gender Distribution",subtitle:"Patients by gender",children:l.jsx(ji,{width:"100%",height:"100%",children:l.jsxs(bv,{children:[l.jsx(wi,{}),l.jsx(Wa,{}),l.jsx(mf,{data:c,dataKey:"value",nameKey:"name",innerRadius:45,outerRadius:80,paddingAngle:2,onClick:N=>v(`Gender: ${N==null?void 0:N.name}`,j(N==null?void 0:N.name)),children:c.map((N,C)=>l.jsx(Fr,{fill:Dr[C%Dr.length]},C))})]})})}),l.jsx(ms,{title:"Elderly Status",subtitle:"Elderly vs non‑elderly",children:l.jsx(ji,{width:"100%",height:"100%",children:l.jsxs(xl,{data:d,margin:{top:10,right:10,left:0,bottom:0},children:[l.jsx(Rs,{strokeDasharray:"3 3"}),l.jsx($s,{dataKey:"name",tick:{fontSize:12}}),l.jsx(zs,{allowDecimals:!1,tick:{fontSize:12}}),l.jsx(wi,{}),l.jsx(Is,{dataKey:"value",radius:[6,6,0,0],onClick:N=>{var C,E;return v(`Elderly: ${(C=N==null?void 0:N.payload)==null?void 0:C.name}`,w((E=N==null?void 0:N.payload)==null?void 0:E.name))},children:d.map((N,C)=>l.jsx(Fr,{fill:Dr[C%Dr.length]},C))})]})})}),l.jsx(ms,{title:"Criticality",subtitle:"Critical vs non‑critical",children:l.jsx(ji,{width:"100%",height:"100%",children:l.jsxs(xl,{data:f,margin:{top:10,right:10,left:0,bottom:0},children:[l.jsx(Rs,{strokeDasharray:"3 3"}),l.jsx($s,{dataKey:"name",tick:{fontSize:12}}),l.jsx(zs,{allowDecimals:!1,tick:{fontSize:12}}),l.jsx(wi,{}),l.jsx(Is,{dataKey:"value",radius:[6,6,0,0],onClick:N=>{var C,E;return v(`Criticality: ${(C=N==null?void 0:N.payload)==null?void 0:C.name}`,P((E=N==null?void 0:N.payload)==null?void 0:E.name))},children:f.map((N,C)=>l.jsx(Fr,{fill:Dr[(C+3)%Dr.length]},C))})]})})}),l.jsx(ms,{title:"Pregnancy",subtitle:"Pregnant vs recently delivered",children:l.jsx(ji,{width:"100%",height:"100%",children:l.jsxs(bv,{children:[l.jsx(wi,{}),l.jsx(Wa,{}),l.jsx(mf,{data:h,dataKey:"value",nameKey:"name",innerRadius:45,outerRadius:80,paddingAngle:2,onClick:N=>v(`Pregnancy: ${N==null?void 0:N.name}`,b(N==null?void 0:N.name)),children:h.map((N,C)=>l.jsx(Fr,{fill:Dr[(C+4)%Dr.length]},C))})]})})}),l.jsx(ms,{title:"BMI Categories",subtitle:"Underweight/Normal/Overweight/Obese",children:l.jsx(ji,{width:"100%",height:"100%",children:l.jsxs(xl,{data:m,margin:{top:10,right:10,left:0,bottom:0},children:[l.jsx(Rs,{strokeDasharray:"3 3"}),l.jsx($s,{dataKey:"name",tick:{fontSize:12}}),l.jsx(zs,{allowDecimals:!1,tick:{fontSize:12}}),l.jsx(wi,{}),l.jsx(Is,{dataKey:"count",radius:[6,6,0,0],onClick:N=>{var C,E;return v(`BMI: ${(C=N==null?void 0:N.payload)==null?void 0:C.name}`,S((E=N==null?void 0:N.payload)==null?void 0:E.name))},children:m.map((N,C)=>l.jsx(Fr,{fill:Dr[(C+1)%Dr.length]},C))})]})})}),l.jsx(ms,{title:"Patients per Doctor",subtitle:"Top providers by assigned patients",children:l.jsx(ji,{width:"100%",height:"100%",children:l.jsxs(xl,{data:g,margin:{top:10,right:10,left:0,bottom:0},children:[l.jsx(Rs,{strokeDasharray:"3 3"}),l.jsx($s,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-15,height:50}),l.jsx(zs,{allowDecimals:!1,tick:{fontSize:12}}),l.jsx(wi,{}),l.jsx(Is,{dataKey:"count",radius:[6,6,0,0],onClick:N=>{var C,E;return v(`Doctor: ${(C=N==null?void 0:N.payload)==null?void 0:C.name}`,O((E=N==null?void 0:N.payload)==null?void 0:E.name))},children:g.map((N,C)=>l.jsx(Fr,{fill:Dr[(C+2)%Dr.length]},C))})]})})}),l.jsx(Bx,{open:t,title:n,onClose:()=>r(!1),children:a.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"No matching patients."}):l.jsx("div",{className:"overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-gray-600",children:[l.jsx("th",{className:"py-2 pr-4",children:"Name"}),l.jsx("th",{className:"py-2 pr-4",children:"Gender"}),l.jsx("th",{className:"py-2 pr-4",children:"Doctor"}),l.jsx("th",{className:"py-2 pr-4",children:"MRN"})]})}),l.jsx("tbody",{children:a.map(N=>l.jsxs("tr",{className:"border-t border-gray-100",children:[l.jsx("td",{className:"py-2 pr-4 text-gray-900",children:N.name}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:N.gender}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:N.assigned_doctor}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:N.medical_record_number})]},N.id))})]})})})]})},lZ=()=>{const e=(r,n)=>{try{const i=localStorage.getItem(r);if(!i){alert(`No data found for ${r}`);return}const a=JSON.parse(i),o=`export const ${r.replace("dummy","").toLowerCase()} = ${JSON.stringify(a,null,2)};`,c=new Blob([o],{type:"text/javascript"}),d=URL.createObjectURL(c),f=document.createElement("a");f.href=d,f.download=n,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(d)}catch(i){console.error("Error exporting data:",i),alert("Error exporting data")}},t=()=>{try{const r=localStorage.getItem("dummyMessages"),n=localStorage.getItem("dummyPatientProfiles"),i=localStorage.getItem("dummyTasks"),a=localStorage.getItem("dummyAnnouncements"),o=localStorage.getItem("dummyUsers"),c=localStorage.getItem("dummyDailyRecords"),d={dummyMessages:r?JSON.parse(r):[],dummyPatientProfiles:n?JSON.parse(n):[],dummyTasks:i?JSON.parse(i):[],dummyAnnouncements:a?JSON.parse(a):[],dummyUsers:o?JSON.parse(o):[],dummyDailyRecords:c?JSON.parse(c):[]},f=`export interface DummyUser {
  id: string;
  email: string;
  password: string;
  full_name: string;
  role: 'doctor' | 'patient' | 'volunteer';
  created_at: string;
}

export interface DummyPatientProfile {
  id: string;
  user_id: string;
  // Basic Information
  name: string;
  doe: string;
  gender: 'male' | 'female' | 'other';
  address: string;
  caregivers_contact: string;
  assigned_doctor: string;
  last_record_date: string;
  today_date: string;
  assigned_vhv_name: string;
  medical_record_number: string;
  
  // Medical Information
  patient_categories: {
    critical: boolean;
    elderly: boolean;
    pregnant: boolean;
  };
  personal_health_history: string;
  doctor_diagnosed: string;
  medications_history: string;
  food_allergies: string;
  medication_allergies: string;
  height: string;
  weight: string;
  bmi: string;
  temperature: string;
  pulse: string;
  blood_pressure: string;
  diabetes: string;
  mental_health_status: string;
  other_symptoms: string;
  pregnancy_details: string;
  smoker: boolean;
  doctors_note: string;
  
  created_by: string;
  created_at: string;
  updated_at: string;
}

export interface DummyMessage {
  id: string;
  sender_id: string;
  recipient_id: string;
  subject: string;
  content: string;
  image_url?: string;
  image_name?: string;
  is_read: boolean;
  created_at: string;
}

export interface DummyTask {
  id: string;
  title: string;
  description: string;
  priority: 'low' | 'medium' | 'high' | 'urgent';
  status: 'pending' | 'in_progress' | 'completed' | 'cancelled';
  assigned_to: string;
  assigned_by: string;
  patient_id?: string;
  due_date?: string;
  created_at: string;
  updated_at: string;
  completed_at?: string;
}

export interface DummyAnnouncement {
  id: string;
  title: string;
  content: string;
  priority: 'low' | 'medium' | 'high' | 'urgent';
  created_by: string;
  created_at: string;
  updated_at: string;
}

export interface DummyDailyRecord {
  id: string;
  patient_id: string;
  recorded_by: string;
  record_date: string;
  
  // Vital Signs
  temperature?: string;
  pulse?: string;
  blood_pressure?: string;
  weight?: string;
  blood_sugar?: string;
  oxygen_saturation?: string;
  
  // Symptoms
  pain_level?: number;
  fatigue_level?: number;
  mood?: 'excellent' | 'good' | 'fair' | 'poor' | 'very_poor';
  appetite?: 'excellent' | 'good' | 'fair' | 'poor' | 'very_poor';
  sleep_quality?: 'excellent' | 'good' | 'fair' | 'poor' | 'very_poor';
  
  // Additional Information
  symptoms_description?: string;
  medications_taken?: string;
  activities?: string;
  notes?: string;
  
  created_at: string;
  updated_at: string;
}

// Dummy Users
export const dummyUsers: DummyUser[] = ${JSON.stringify(d.dummyUsers,null,2)};

// Dummy Patient Profiles
export const dummyPatientProfiles: DummyPatientProfile[] = ${JSON.stringify(d.dummyPatientProfiles,null,2)};

// Dummy Tasks
export const dummyTasks: DummyTask[] = ${JSON.stringify(d.dummyTasks,null,2)};

// Dummy Messages
export const dummyMessages: DummyMessage[] = ${JSON.stringify(d.dummyMessages,null,2)};

// Dummy Announcements
export const dummyAnnouncements: DummyAnnouncement[] = ${JSON.stringify(d.dummyAnnouncements,null,2)};

// Dummy Daily Records
export const dummyDailyRecords: DummyDailyRecord[] = ${JSON.stringify(d.dummyDailyRecords,null,2)};

// Helper functions to simulate database operations
export const generateId = () => {
  return 'id-' + Math.random().toString(36).substr(2, 9);
};

export const getCurrentTimestamp = () => {
  return new Date().toISOString();
};`,h=new Blob([f],{type:"text/javascript"}),m=URL.createObjectURL(h),g=document.createElement("a");g.href=m,g.download="dummyData.ts",document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(m),alert("Complete dummyData.ts file downloaded! Replace the existing file in src/data/ with this updated version.")}catch(r){console.error("Error exporting all data:",r),alert("Error exporting data")}};return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[l.jsx(zD,{className:"w-5 h-5"}),l.jsx("span",{children:"Export Data to Files"})]}),l.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"Download updated dummy data files with all your changes. Replace the original files in your project."}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:t,className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2 transition-colors",children:[l.jsx(fs,{className:"w-5 h-5"}),l.jsx("span",{children:"Download Complete dummyData.ts"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:()=>e("dummyMessages","messages.js"),className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 text-sm transition-colors",children:[l.jsx(fs,{className:"w-4 h-4"}),l.jsx("span",{children:"Messages"})]}),l.jsxs("button",{onClick:()=>e("dummyPatientProfiles","patients.js"),className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 text-sm transition-colors",children:[l.jsx(fs,{className:"w-4 h-4"}),l.jsx("span",{children:"Patients"})]}),l.jsxs("button",{onClick:()=>e("dummyTasks","tasks.js"),className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 text-sm transition-colors",children:[l.jsx(fs,{className:"w-4 h-4"}),l.jsx("span",{children:"Tasks"})]}),l.jsxs("button",{onClick:()=>e("dummyAnnouncements","announcements.js"),className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 text-sm transition-colors",children:[l.jsx(fs,{className:"w-4 h-4"}),l.jsx("span",{children:"Announcements"})]}),l.jsxs("button",{onClick:()=>e("dummyDailyRecords","daily-records.js"),className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 text-sm transition-colors",children:[l.jsx(fs,{className:"w-4 h-4"}),l.jsx("span",{children:"Daily Records"})]})]})]}),l.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsxs("p",{className:"text-yellow-800 text-xs",children:[l.jsx("strong",{children:"Note:"})," After downloading, manually replace the files in your project's src/data/ folder to make the changes permanent."]})})]})},ps=()=>{const{user:e}=Ye(),[t,r]=_.useState([]),[n,i]=_.useState([]),[a,o]=_.useState(!0),[c,d]=_.useState(!1),[f,h]=_.useState(null),[m,g]=_.useState(null),[v,j]=_.useState(!1),w=async()=>{if(e!=null&&e.id)try{const{data:D,error:$}=await bc(e.id);$?console.error("Error fetching patient profile:",$):g(D)}catch(D){console.error("Error fetching patient profile:",D)}},P=async()=>{if(!m){alert("Patient profile not found. Please contact emergency services directly.");return}j(!0);try{const{data:D,error:$}=await Ga();if($||!D)throw new Error("Unable to find healthcare providers");const z=D.filter(Y=>Y.role==="doctor"||Y.role==="volunteer");if(z.length===0)throw new Error("No healthcare providers available");const G=`🚨 EMERGENCY - Immediate Assistance Needed

Patient: ${m.full_name}
Medical Record: ${m.medical_record_number}
Phone: ${m.phone_number}
Address: ${m.address}

Medical Conditions:
- Critical: ${m.patient_categories.critical?"Yes":"No"}
- Elderly: ${m.patient_categories.elderly?"Yes":"No"}
- Pregnant: ${m.patient_categories.pregnant?"Yes":"No"}
- Chronic Disease: ${m.patient_categories.chronic_disease?"Yes":"No"}
- Disability: ${m.patient_categories.disability?"Yes":"No"}

Emergency Contact: ${m.emergency_contact_name} - ${m.emergency_contact_phone}

This is an urgent request for immediate medical assistance. Please respond as soon as possible.`,F=z.map(Y=>Ay({sender_id:e.id,recipient_id:Y.id,content:G,subject:"🚨 EMERGENCY - Immediate Assistance Needed",priority:"urgent"}));await Promise.all(F),alert(`Emergency message sent successfully to ${z.length} healthcare provider(s). They will be notified immediately.`)}catch(D){console.error("Error sending emergency message:",D),alert("Failed to send emergency message. Please call emergency services directly or try again.")}finally{j(!1)}};_.useEffect(()=>{b(),(e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer"?x():(e==null?void 0:e.role)==="patient"&&w()},[]);const b=async()=>{try{const{data:D,error:$}=await iI();$?console.error("Error fetching announcements:",$):r(D||[])}catch(D){console.error("Error fetching announcements:",D)}finally{o(!1)}},x=async()=>{try{const{data:D,error:$}=await jo();$?console.error("Error fetching patients:",$):i(D||[])}catch(D){console.error("Error fetching patients:",D)}finally{o(!1)}},S=D=>{h(D),d(!0)},O=async D=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{const{error:$}=await oI(D);$?console.error("Error deleting announcement:",$):b()}catch($){console.error("Error deleting announcement:",$)}},N=()=>{d(!1),h(null)},C=()=>{b()},E=()=>{switch(e==null?void 0:e.role){case"doctor":return"Welcome to your medical dashboard. Manage patient records and communications.";case"volunteer":return"Welcome to your volunteer dashboard. Help manage patient information and provide support.";case"patient":return"Welcome to your patient portal. View your medical information and communicate with your healthcare team.";default:return"Welcome to MedConnect Portal."}},A=()=>{const D=n.filter(F=>F.patient_categories.critical).length,$=n.filter(F=>F.patient_categories.elderly).length,z=n.filter(F=>F.patient_categories.pregnant).length,G=n.length;return{critical:D,elderly:$,pregnant:z,total:G}},B=(()=>{switch(e==null?void 0:e.role){case"doctor":case"volunteer":return[{icon:Qm,title:"Patient Management",description:"View and manage patient profiles",action:"patients"},{icon:Zs,title:"Messages",description:"Communicate with patients and colleagues",action:"messages"},{icon:Ti,title:"Create Profile",description:"Add new patient information",action:"create-patient"},{icon:Tl,title:"Task Management",description:"Create and manage tasks",action:"tasks"},{icon:no,title:"Daily Records",description:"View patient daily records and symptoms",action:"records"},{icon:Ty,title:"Geographic Map",description:"View location-based information",action:"map"}];case"patient":return[{icon:Ti,title:"My Profile",description:"View your medical information",action:"profile"},{icon:no,title:"Daily Records",description:"Track your daily symptoms and vital signs",action:"records"},{icon:Zs,title:"Messages",description:"Communicate with your healthcare team",action:"messages"},{icon:En,title:"Health Resources",description:"Access helpful health information",action:"resources"},{icon:Zs,title:"Appointments",description:"View and request appointments",action:"appointments"}];default:return[]}})(),R=A(),U=D=>{switch(D){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=D=>{switch(D){case"urgent":return l.jsx(Fi,{className:"w-4 h-4"});case"high":return l.jsx(Fi,{className:"w-4 h-4"});default:return l.jsx(id,{className:"w-4 h-4"})}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Good ",new Date().getHours()<12?"morning":new Date().getHours()<17?"afternoon":"evening",", ",e==null?void 0:e.full_name]}),l.jsx("p",{className:"text-gray-600",children:E()})]}),(e==null?void 0:e.role)==="doctor"&&l.jsxs(l.Fragment,{children:[l.jsx(aZ,{patients:n}),l.jsx(oZ,{patients:n})]}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer")&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:l.jsx(Qm,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.total}),l.jsx("p",{className:"text-sm text-gray-600",children:"Total Patients"})]})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:l.jsx(Fi,{className:"w-6 h-6 text-red-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.critical}),l.jsx("p",{className:"text-sm text-gray-600",children:"Critical Patients"})]})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:l.jsx(Qm,{className:"w-6 h-6 text-orange-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.elderly}),l.jsx("p",{className:"text-sm text-gray-600",children:"Elderly Patients"})]})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"bg-pink-100 p-3 rounded-lg",children:l.jsx(En,{className:"w-6 h-6 text-pink-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.pregnant}),l.jsx("p",{className:"text-sm text-gray-600",children:"Pregnant Patients"})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(e==null?void 0:e.role)==="patient"&&l.jsx("div",{className:"md:col-span-2 lg:col-span-3 mb-4",children:l.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:l.jsx(Ld,{className:"w-8 h-8 text-red-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-red-800",children:"Emergency Assistance"}),l.jsx("p",{className:"text-red-700 text-sm",children:"Need immediate medical help? Click to send an urgent message to your healthcare team."}),l.jsx("p",{className:"text-red-600 text-xs mt-1",children:"For life-threatening emergencies, call emergency services immediately."})]})]}),l.jsx("button",{onClick:P,disabled:v||!m,className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 flex items-center space-x-2 font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 active:scale-95",children:v?l.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(Ld,{className:"w-6 h-6"}),l.jsx("span",{children:"EMERGENCY"})]})})]})})}),B.map((D,$)=>{const z=D.icon;return l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all cursor-pointer group",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"bg-blue-100 p-3 rounded-lg group-hover:bg-blue-200 transition-colors",children:l.jsx(z,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:D.title}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:D.description})]})]})},$)})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[l.jsx(id,{className:"w-6 h-6 text-blue-600"}),l.jsx("span",{children:"Announcements"})]}),(e==null?void 0:e.role)==="doctor"&&l.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[l.jsx(An,{className:"w-4 h-4"}),l.jsx("span",{children:"Add Announcement"})]})]}),a?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-6 h-6 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t.length>0?l.jsx("div",{className:"space-y-4",children:t.slice(0,3).map(D=>{var $;return l.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-all",children:l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:D.title}),l.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium border flex items-center space-x-1 ${U(D.priority)}`,children:[I(D.priority),l.jsx("span",{children:D.priority.charAt(0).toUpperCase()+D.priority.slice(1)})]})]}),l.jsx("p",{className:"text-gray-600 text-sm mb-2",children:D.content}),l.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[l.jsxs("span",{children:["By: ",($=D.created_by_user)==null?void 0:$.full_name]}),l.jsx("span",{children:new Date(D.created_at).toLocaleDateString()})]})]}),(e==null?void 0:e.role)==="doctor"&&l.jsxs("div",{className:"flex space-x-2 ml-4",children:[l.jsx("button",{onClick:()=>S(D),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Announcement",children:l.jsx(R2,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>O(D.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Announcement",children:l.jsx(_c,{className:"w-4 h-4"})})]})]})},D.id)})}):l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(id,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),l.jsx("p",{children:"No announcements to display."}),(e==null?void 0:e.role)==="doctor"&&l.jsx("p",{className:"text-sm mt-1",children:"Create your first announcement to keep everyone informed."})]})]}),l.jsx(lZ,{}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Activity"}),l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(En,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),l.jsx("p",{children:"No recent activity to display."}),l.jsx("p",{className:"text-sm mt-1",children:"Start by exploring the available features above."})]})]})]}),c&&l.jsx(vI,{announcement:f,onClose:N,onSuccess:C})]})};function FO(e,t){const r=_.useRef(t);_.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}function UO(e,t,r){t.center!==r.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==r.radius&&e.setRadius(t.radius)}const cZ=1;function uZ(e){return Object.freeze({__version:cZ,map:e})}function Rh(e,t){return Object.freeze({...e,...t})}const WO=_.createContext(null),HO=WO.Provider;function $h(){const e=_.useContext(WO);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function KO(e){function t(r,n){const{instance:i,context:a}=e(r).current;return _.useImperativeHandle(n,()=>i),r.children==null?null:od.createElement(HO,{value:a},r.children)}return _.forwardRef(t)}function dZ(e){function t(r,n){const[i,a]=_.useState(!1),{instance:o}=e(r,a).current;_.useImperativeHandle(n,()=>o),_.useEffect(function(){i&&o.update()},[o,i,r.children]);const c=o._contentNode;return c?Uf.createPortal(r.children,c):null}return _.forwardRef(t)}function fZ(e){function t(r,n){const{instance:i}=e(r).current;return _.useImperativeHandle(n,()=>i),null}return _.forwardRef(t)}function Fx(e,t){const r=_.useRef();_.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function zh(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}function hZ(e,t){return function(n,i){const a=$h(),o=e(zh(n,a),a);return FO(a.map,n.attribution),Fx(o.current,n.eventHandlers),t(o.current,a,n,i),o}}var wv={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,n){n(t)})(br,function(r){var n="1.9.4";function i(s){var u,p,y,k;for(p=1,y=arguments.length;p<y;p++){k=arguments[p];for(u in k)s[u]=k[u]}return s}var a=Object.create||function(){function s(){}return function(u){return s.prototype=u,new s}}();function o(s,u){var p=Array.prototype.slice;if(s.bind)return s.bind.apply(s,p.call(arguments,1));var y=p.call(arguments,2);return function(){return s.apply(u,y.length?y.concat(p.call(arguments)):arguments)}}var c=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++c),s._leaflet_id}function f(s,u,p){var y,k,T,M;return M=function(){y=!1,k&&(T.apply(p,k),k=!1)},T=function(){y?k=arguments:(s.apply(p,arguments),setTimeout(M,u),y=!0)},T}function h(s,u,p){var y=u[1],k=u[0],T=y-k;return s===y&&p?s:((s-k)%T+T)%T+k}function m(){return!1}function g(s,u){if(u===!1)return s;var p=Math.pow(10,u===void 0?6:u);return Math.round(s*p)/p}function v(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function j(s){return v(s).split(/\s+/)}function w(s,u){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?a(s.options):{});for(var p in u)s.options[p]=u[p];return s.options}function P(s,u,p){var y=[];for(var k in s)y.push(encodeURIComponent(p?k.toUpperCase():k)+"="+encodeURIComponent(s[k]));return(!u||u.indexOf("?")===-1?"?":"&")+y.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function x(s,u){return s.replace(b,function(p,y){var k=u[y];if(k===void 0)throw new Error("No value provided for variable "+p);return typeof k=="function"&&(k=k(u)),k})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function O(s,u){for(var p=0;p<s.length;p++)if(s[p]===u)return p;return-1}var N="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function C(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var E=0;function A(s){var u=+new Date,p=Math.max(0,16-(u-E));return E=u+p,window.setTimeout(s,p)}var H=window.requestAnimationFrame||C("RequestAnimationFrame")||A,B=window.cancelAnimationFrame||C("CancelAnimationFrame")||C("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function R(s,u,p){if(p&&H===A)s.call(u);else return H.call(window,o(s,u))}function U(s){s&&B.call(window,s)}var I={__proto__:null,extend:i,create:a,bind:o,get lastId(){return c},stamp:d,throttle:f,wrapNum:h,falseFn:m,formatNum:g,trim:v,splitWords:j,setOptions:w,getParamString:P,template:x,isArray:S,indexOf:O,emptyImageUrl:N,requestFn:H,cancelFn:B,requestAnimFrame:R,cancelAnimFrame:U};function D(){}D.extend=function(s){var u=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=u.__super__=this.prototype,y=a(p);y.constructor=u,u.prototype=y;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(u[k]=this[k]);return s.statics&&i(u,s.statics),s.includes&&($(s.includes),i.apply(null,[y].concat(s.includes))),i(y,s),delete y.statics,delete y.includes,y.options&&(y.options=p.options?a(p.options):{},i(y.options,s.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,M=y._initHooks.length;T<M;T++)y._initHooks[T].call(this)}},u},D.include=function(s){var u=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=u,this.mergeOptions(s.options)),this},D.mergeOptions=function(s){return i(this.prototype.options,s),this},D.addInitHook=function(s){var u=Array.prototype.slice.call(arguments,1),p=typeof s=="function"?s:function(){this[s].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function $(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var u=0;u<s.length;u++)s[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var z={on:function(s,u,p){if(typeof s=="object")for(var y in s)this._on(y,s[y],u);else{s=j(s);for(var k=0,T=s.length;k<T;k++)this._on(s[k],u,p)}return this},off:function(s,u,p){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var y in s)this._off(y,s[y],u);else{s=j(s);for(var k=arguments.length===1,T=0,M=s.length;T<M;T++)k?this._off(s[T]):this._off(s[T],u,p)}return this},_on:function(s,u,p,y){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(s,u,p)===!1){p===this&&(p=void 0);var k={fn:u,ctx:p};y&&(k.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(k)}},_off:function(s,u,p){var y,k,T;if(this._events&&(y=this._events[s],!!y)){if(arguments.length===1){if(this._firingCount)for(k=0,T=y.length;k<T;k++)y[k].fn=m;delete this._events[s];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var M=this._listens(s,u,p);if(M!==!1){var W=y[M];this._firingCount&&(W.fn=m,this._events[s]=y=y.slice()),y.splice(M,1)}}},fire:function(s,u,p){if(!this.listens(s,p))return this;var y=i({},u,{type:s,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var k=this._events[s];if(k){this._firingCount=this._firingCount+1||1;for(var T=0,M=k.length;T<M;T++){var W=k[T],Z=W.fn;W.once&&this.off(s,Z,W.ctx),Z.call(W.ctx||this,y)}this._firingCount--}}return p&&this._propagateEvent(y),this},listens:function(s,u,p,y){typeof s!="string"&&console.warn('"string" type argument expected');var k=u;typeof u!="function"&&(y=!!u,k=void 0,p=void 0);var T=this._events&&this._events[s];if(T&&T.length&&this._listens(s,k,p)!==!1)return!0;if(y){for(var M in this._eventParents)if(this._eventParents[M].listens(s,u,p,y))return!0}return!1},_listens:function(s,u,p){if(!this._events)return!1;var y=this._events[s]||[];if(!u)return!!y.length;p===this&&(p=void 0);for(var k=0,T=y.length;k<T;k++)if(y[k].fn===u&&y[k].ctx===p)return k;return!1},once:function(s,u,p){if(typeof s=="object")for(var y in s)this._on(y,s[y],u,!0);else{s=j(s);for(var k=0,T=s.length;k<T;k++)this._on(s[k],u,p,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var u in this._eventParents)this._eventParents[u].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};z.addEventListener=z.on,z.removeEventListener=z.clearAllEventListeners=z.off,z.addOneTimeEventListener=z.once,z.fireEvent=z.fire,z.hasEventListeners=z.listens;var G=D.extend(z);function F(s,u,p){this.x=p?Math.round(s):s,this.y=p?Math.round(u):u}var Y=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(s){return this.clone()._add(V(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(V(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new F(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new F(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Y(this.x),this.y=Y(this.y),this},distanceTo:function(s){s=V(s);var u=s.x-this.x,p=s.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(s){return s=V(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=V(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function V(s,u,p){return s instanceof F?s:S(s)?new F(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new F(s.x,s.y):new F(s,u,p)}function ce(s,u){if(s)for(var p=u?[s,u]:s,y=0,k=p.length;y<k;y++)this.extend(p[y])}ce.prototype={extend:function(s){var u,p;if(!s)return this;if(s instanceof F||typeof s[0]=="number"||"x"in s)u=p=V(s);else if(s=ee(s),u=s.min,p=s.max,!u||!p)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=p.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(s){return V((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return V(this.min.x,this.max.y)},getTopRight:function(){return V(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var u,p;return typeof s[0]=="number"||s instanceof F?s=V(s):s=ee(s),s instanceof ce?(u=s.min,p=s.max):u=p=s,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(s){s=ee(s);var u=this.min,p=this.max,y=s.min,k=s.max,T=k.x>=u.x&&y.x<=p.x,M=k.y>=u.y&&y.y<=p.y;return T&&M},overlaps:function(s){s=ee(s);var u=this.min,p=this.max,y=s.min,k=s.max,T=k.x>u.x&&y.x<p.x,M=k.y>u.y&&y.y<p.y;return T&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var u=this.min,p=this.max,y=Math.abs(u.x-p.x)*s,k=Math.abs(u.y-p.y)*s;return ee(V(u.x-y,u.y-k),V(p.x+y,p.y+k))},equals:function(s){return s?(s=ee(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ee(s,u){return!s||s instanceof ce?s:new ce(s,u)}function X(s,u){if(s)for(var p=u?[s,u]:s,y=0,k=p.length;y<k;y++)this.extend(p[y])}X.prototype={extend:function(s){var u=this._southWest,p=this._northEast,y,k;if(s instanceof ae)y=s,k=s;else if(s instanceof X){if(y=s._southWest,k=s._northEast,!y||!k)return this}else return s?this.extend(oe(s)||te(s)):this;return!u&&!p?(this._southWest=new ae(y.lat,y.lng),this._northEast=new ae(k.lat,k.lng)):(u.lat=Math.min(y.lat,u.lat),u.lng=Math.min(y.lng,u.lng),p.lat=Math.max(k.lat,p.lat),p.lng=Math.max(k.lng,p.lng)),this},pad:function(s){var u=this._southWest,p=this._northEast,y=Math.abs(u.lat-p.lat)*s,k=Math.abs(u.lng-p.lng)*s;return new X(new ae(u.lat-y,u.lng-k),new ae(p.lat+y,p.lng+k))},getCenter:function(){return new ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ae||"lat"in s?s=oe(s):s=te(s);var u=this._southWest,p=this._northEast,y,k;return s instanceof X?(y=s.getSouthWest(),k=s.getNorthEast()):y=k=s,y.lat>=u.lat&&k.lat<=p.lat&&y.lng>=u.lng&&k.lng<=p.lng},intersects:function(s){s=te(s);var u=this._southWest,p=this._northEast,y=s.getSouthWest(),k=s.getNorthEast(),T=k.lat>=u.lat&&y.lat<=p.lat,M=k.lng>=u.lng&&y.lng<=p.lng;return T&&M},overlaps:function(s){s=te(s);var u=this._southWest,p=this._northEast,y=s.getSouthWest(),k=s.getNorthEast(),T=k.lat>u.lat&&y.lat<p.lat,M=k.lng>u.lng&&y.lng<p.lng;return T&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,u){return s?(s=te(s),this._southWest.equals(s.getSouthWest(),u)&&this._northEast.equals(s.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function te(s,u){return s instanceof X?s:new X(s,u)}function ae(s,u,p){if(isNaN(s)||isNaN(u))throw new Error("Invalid LatLng object: ("+s+", "+u+")");this.lat=+s,this.lng=+u,p!==void 0&&(this.alt=+p)}ae.prototype={equals:function(s,u){if(!s)return!1;s=oe(s);var p=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return p<=(u===void 0?1e-9:u)},toString:function(s){return"LatLng("+g(this.lat,s)+", "+g(this.lng,s)+")"},distanceTo:function(s){return fr.distance(this,oe(s))},wrap:function(){return fr.wrapLatLng(this)},toBounds:function(s){var u=180*s/40075017,p=u/Math.cos(Math.PI/180*this.lat);return te([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new ae(this.lat,this.lng,this.alt)}};function oe(s,u,p){return s instanceof ae?s:S(s)&&typeof s[0]!="object"?s.length===3?new ae(s[0],s[1],s[2]):s.length===2?new ae(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ae(s.lat,"lng"in s?s.lng:s.lon,s.alt):u===void 0?null:new ae(s,u,p)}var Qe={latLngToPoint:function(s,u){var p=this.projection.project(s),y=this.scale(u);return this.transformation._transform(p,y)},pointToLatLng:function(s,u){var p=this.scale(u),y=this.transformation.untransform(s,p);return this.projection.unproject(y)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(s),y=this.transformation.transform(u.min,p),k=this.transformation.transform(u.max,p);return new ce(y,k)},infinite:!1,wrapLatLng:function(s){var u=this.wrapLng?h(s.lng,this.wrapLng,!0):s.lng,p=this.wrapLat?h(s.lat,this.wrapLat,!0):s.lat,y=s.alt;return new ae(p,u,y)},wrapLatLngBounds:function(s){var u=s.getCenter(),p=this.wrapLatLng(u),y=u.lat-p.lat,k=u.lng-p.lng;if(y===0&&k===0)return s;var T=s.getSouthWest(),M=s.getNorthEast(),W=new ae(T.lat-y,T.lng-k),Z=new ae(M.lat-y,M.lng-k);return new X(W,Z)}},fr=i({},Qe,{wrapLng:[-180,180],R:6371e3,distance:function(s,u){var p=Math.PI/180,y=s.lat*p,k=u.lat*p,T=Math.sin((u.lat-s.lat)*p/2),M=Math.sin((u.lng-s.lng)*p/2),W=T*T+Math.cos(y)*Math.cos(k)*M*M,Z=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*Z}}),se=6378137,ge={R:se,MAX_LATITUDE:85.0511287798,project:function(s){var u=Math.PI/180,p=this.MAX_LATITUDE,y=Math.max(Math.min(p,s.lat),-p),k=Math.sin(y*u);return new F(this.R*s.lng*u,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(s){var u=180/Math.PI;return new ae((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*u,s.x*u/this.R)},bounds:function(){var s=se*Math.PI;return new ce([-s,-s],[s,s])}()};function be(s,u,p,y){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=u,this._c=p,this._d=y}be.prototype={transform:function(s,u){return this._transform(s.clone(),u)},_transform:function(s,u){return u=u||1,s.x=u*(this._a*s.x+this._b),s.y=u*(this._c*s.y+this._d),s},untransform:function(s,u){return u=u||1,new F((s.x/u-this._b)/this._a,(s.y/u-this._d)/this._c)}};function J(s,u,p,y){return new be(s,u,p,y)}var _t=i({},fr,{code:"EPSG:3857",projection:ge,transformation:function(){var s=.5/(Math.PI*ge.R);return J(s,.5,-s,.5)}()}),Te=i({},_t,{code:"EPSG:900913"});function It(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Rt(s,u){var p="",y,k,T,M,W,Z;for(y=0,T=s.length;y<T;y++){for(W=s[y],k=0,M=W.length;k<M;k++)Z=W[k],p+=(k?"L":"M")+Z.x+" "+Z.y;p+=u?ue.svg?"z":"x":""}return p||"M0 0"}var Jr=document.documentElement.style,na="ActiveXObject"in window,_T=na&&!document.addEventListener,Xx="msLaunchUri"in navigator&&!("documentMode"in document),qh=vn("webkit"),Jx=vn("android"),Qx=vn("android 2")||vn("android 3"),bT=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),wT=Jx&&vn("Google")&&bT<537&&!("AudioNode"in window),Gh=!!window.opera,e_=!Xx&&vn("chrome"),t_=vn("gecko")&&!qh&&!Gh&&!na,jT=!e_&&vn("safari"),r_=vn("phantom"),n_="OTransition"in Jr,ST=navigator.platform.indexOf("Win")===0,i_=na&&"transition"in Jr,Yh="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Qx,a_="MozPerspective"in Jr,PT=!window.L_DISABLE_3D&&(i_||Yh||a_)&&!n_&&!r_,Io=typeof orientation<"u"||vn("mobile"),kT=Io&&qh,NT=Io&&Yh,s_=!window.PointerEvent&&window.MSPointerEvent,o_=!!(window.PointerEvent||s_),l_="ontouchstart"in window||!!window.TouchEvent,CT=!window.L_NO_TOUCH&&(l_||o_),ET=Io&&Gh,OT=Io&&t_,TT=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,AT=function(){var s=!1;try{var u=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",m,u),window.removeEventListener("testPassiveEventSupport",m,u)}catch{}return s}(),MT=function(){return!!document.createElement("canvas").getContext}(),Xh=!!(document.createElementNS&&It("svg").createSVGRect),LT=!!Xh&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),DT=!Xh&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var u=s.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),IT=navigator.platform.indexOf("Mac")===0,RT=navigator.platform.indexOf("Linux")===0;function vn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ue={ie:na,ielt9:_T,edge:Xx,webkit:qh,android:Jx,android23:Qx,androidStock:wT,opera:Gh,chrome:e_,gecko:t_,safari:jT,phantom:r_,opera12:n_,win:ST,ie3d:i_,webkit3d:Yh,gecko3d:a_,any3d:PT,mobile:Io,mobileWebkit:kT,mobileWebkit3d:NT,msPointer:s_,pointer:o_,touch:CT,touchNative:l_,mobileOpera:ET,mobileGecko:OT,retina:TT,passiveEvents:AT,canvas:MT,svg:Xh,vml:DT,inlineSvg:LT,mac:IT,linux:RT},c_=ue.msPointer?"MSPointerDown":"pointerdown",u_=ue.msPointer?"MSPointerMove":"pointermove",d_=ue.msPointer?"MSPointerUp":"pointerup",f_=ue.msPointer?"MSPointerCancel":"pointercancel",Jh={touchstart:c_,touchmove:u_,touchend:d_,touchcancel:f_},h_={touchstart:WT,touchmove:Wc,touchend:Wc,touchcancel:Wc},rs={},m_=!1;function $T(s,u,p){return u==="touchstart"&&UT(),h_[u]?(p=h_[u].bind(this,p),s.addEventListener(Jh[u],p,!1),p):(console.warn("wrong event specified:",u),m)}function zT(s,u,p){if(!Jh[u]){console.warn("wrong event specified:",u);return}s.removeEventListener(Jh[u],p,!1)}function BT(s){rs[s.pointerId]=s}function FT(s){rs[s.pointerId]&&(rs[s.pointerId]=s)}function p_(s){delete rs[s.pointerId]}function UT(){m_||(document.addEventListener(c_,BT,!0),document.addEventListener(u_,FT,!0),document.addEventListener(d_,p_,!0),document.addEventListener(f_,p_,!0),m_=!0)}function Wc(s,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var p in rs)u.touches.push(rs[p]);u.changedTouches=[u],s(u)}}function WT(s,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Et(u),Wc(s,u)}function HT(s){var u={},p,y;for(y in s)p=s[y],u[y]=p&&p.bind?p.bind(s):p;return s=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var KT=200;function ZT(s,u){s.addEventListener("dblclick",u);var p=0,y;function k(T){if(T.detail!==1){y=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var M=__(T);if(!(M.some(function(Z){return Z instanceof HTMLLabelElement&&Z.attributes.for})&&!M.some(function(Z){return Z instanceof HTMLInputElement||Z instanceof HTMLSelectElement}))){var W=Date.now();W-p<=KT?(y++,y===2&&u(HT(T))):y=1,p=W}}}return s.addEventListener("click",k),{dblclick:u,simDblclick:k}}function VT(s,u){s.removeEventListener("dblclick",u.dblclick),s.removeEventListener("click",u.simDblclick)}var Qh=Zc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ro=Zc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),g_=Ro==="webkitTransition"||Ro==="OTransition"?Ro+"End":"transitionend";function v_(s){return typeof s=="string"?document.getElementById(s):s}function $o(s,u){var p=s.style[u]||s.currentStyle&&s.currentStyle[u];if((!p||p==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(s,null);p=y?y[u]:null}return p==="auto"?null:p}function Se(s,u,p){var y=document.createElement(s);return y.className=u||"",p&&p.appendChild(y),y}function Ke(s){var u=s.parentNode;u&&u.removeChild(s)}function Hc(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function ns(s){var u=s.parentNode;u&&u.lastChild!==s&&u.appendChild(s)}function is(s){var u=s.parentNode;u&&u.firstChild!==s&&u.insertBefore(s,u.firstChild)}function em(s,u){if(s.classList!==void 0)return s.classList.contains(u);var p=Kc(s);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}function ve(s,u){if(s.classList!==void 0)for(var p=j(u),y=0,k=p.length;y<k;y++)s.classList.add(p[y]);else if(!em(s,u)){var T=Kc(s);tm(s,(T?T+" ":"")+u)}}function et(s,u){s.classList!==void 0?s.classList.remove(u):tm(s,v((" "+Kc(s)+" ").replace(" "+u+" "," ")))}function tm(s,u){s.className.baseVal===void 0?s.className=u:s.className.baseVal=u}function Kc(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Er(s,u){"opacity"in s.style?s.style.opacity=u:"filter"in s.style&&qT(s,u)}function qT(s,u){var p=!1,y="DXImageTransform.Microsoft.Alpha";try{p=s.filters.item(y)}catch{if(u===1)return}u=Math.round(u*100),p?(p.Enabled=u!==100,p.Opacity=u):s.style.filter+=" progid:"+y+"(opacity="+u+")"}function Zc(s){for(var u=document.documentElement.style,p=0;p<s.length;p++)if(s[p]in u)return s[p];return!1}function ia(s,u,p){var y=u||new F(0,0);s.style[Qh]=(ue.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(p?" scale("+p+")":"")}function at(s,u){s._leaflet_pos=u,ue.any3d?ia(s,u):(s.style.left=u.x+"px",s.style.top=u.y+"px")}function aa(s){return s._leaflet_pos||new F(0,0)}var zo,Bo,rm;if("onselectstart"in document)zo=function(){he(window,"selectstart",Et)},Bo=function(){Le(window,"selectstart",Et)};else{var Fo=Zc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);zo=function(){if(Fo){var s=document.documentElement.style;rm=s[Fo],s[Fo]="none"}},Bo=function(){Fo&&(document.documentElement.style[Fo]=rm,rm=void 0)}}function nm(){he(window,"dragstart",Et)}function im(){Le(window,"dragstart",Et)}var Vc,am;function sm(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(qc(),Vc=s,am=s.style.outlineStyle,s.style.outlineStyle="none",he(window,"keydown",qc))}function qc(){Vc&&(Vc.style.outlineStyle=am,Vc=void 0,am=void 0,Le(window,"keydown",qc))}function y_(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function om(s){var u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}var GT={__proto__:null,TRANSFORM:Qh,TRANSITION:Ro,TRANSITION_END:g_,get:v_,getStyle:$o,create:Se,remove:Ke,empty:Hc,toFront:ns,toBack:is,hasClass:em,addClass:ve,removeClass:et,setClass:tm,getClass:Kc,setOpacity:Er,testProp:Zc,setTransform:ia,setPosition:at,getPosition:aa,get disableTextSelection(){return zo},get enableTextSelection(){return Bo},disableImageDrag:nm,enableImageDrag:im,preventOutline:sm,restoreOutline:qc,getSizedParentNode:y_,getScale:om};function he(s,u,p,y){if(u&&typeof u=="object")for(var k in u)cm(s,k,u[k],p);else{u=j(u);for(var T=0,M=u.length;T<M;T++)cm(s,u[T],p,y)}return this}var yn="_leaflet_events";function Le(s,u,p,y){if(arguments.length===1)x_(s),delete s[yn];else if(u&&typeof u=="object")for(var k in u)um(s,k,u[k],p);else if(u=j(u),arguments.length===2)x_(s,function(W){return O(u,W)!==-1});else for(var T=0,M=u.length;T<M;T++)um(s,u[T],p,y);return this}function x_(s,u){for(var p in s[yn]){var y=p.split(/\d/)[0];(!u||u(y))&&um(s,y,null,null,p)}}var lm={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function cm(s,u,p,y){var k=u+d(p)+(y?"_"+d(y):"");if(s[yn]&&s[yn][k])return this;var T=function(W){return p.call(y||s,W||window.event)},M=T;!ue.touchNative&&ue.pointer&&u.indexOf("touch")===0?T=$T(s,u,T):ue.touch&&u==="dblclick"?T=ZT(s,T):"addEventListener"in s?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?s.addEventListener(lm[u]||u,T,ue.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(T=function(W){W=W||window.event,fm(s,W)&&M(W)},s.addEventListener(lm[u],T,!1)):s.addEventListener(u,M,!1):s.attachEvent("on"+u,T),s[yn]=s[yn]||{},s[yn][k]=T}function um(s,u,p,y,k){k=k||u+d(p)+(y?"_"+d(y):"");var T=s[yn]&&s[yn][k];if(!T)return this;!ue.touchNative&&ue.pointer&&u.indexOf("touch")===0?zT(s,u,T):ue.touch&&u==="dblclick"?VT(s,T):"removeEventListener"in s?s.removeEventListener(lm[u]||u,T,!1):s.detachEvent("on"+u,T),s[yn][k]=null}function sa(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function dm(s){return cm(s,"wheel",sa),this}function Uo(s){return he(s,"mousedown touchstart dblclick contextmenu",sa),s._leaflet_disable_click=!0,this}function Et(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function oa(s){return Et(s),sa(s),this}function __(s){if(s.composedPath)return s.composedPath();for(var u=[],p=s.target;p;)u.push(p),p=p.parentNode;return u}function b_(s,u){if(!u)return new F(s.clientX,s.clientY);var p=om(u),y=p.boundingClientRect;return new F((s.clientX-y.left)/p.x-u.clientLeft,(s.clientY-y.top)/p.y-u.clientTop)}var YT=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function w_(s){return ue.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/YT:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function fm(s,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==s;)p=p.parentNode}catch{return!1}return p!==s}var XT={__proto__:null,on:he,off:Le,stopPropagation:sa,disableScrollPropagation:dm,disableClickPropagation:Uo,preventDefault:Et,stop:oa,getPropagationPath:__,getMousePosition:b_,getWheelDelta:w_,isExternalTarget:fm,addListener:he,removeListener:Le},j_=G.extend({run:function(s,u,p,y){this.stop(),this._el=s,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=aa(s),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(s){var u=+new Date-this._startTime,p=this._duration*1e3;u<p?this._runFrame(this._easeOut(u/p),s):(this._runFrame(1),this._complete())},_runFrame:function(s,u){var p=this._startPos.add(this._offset.multiplyBy(s));u&&p._round(),at(this._el,p),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),we=G.extend({options:{crs:_t,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,u){u=w(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(oe(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ro&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),he(this._proxy,g_,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,u,p){if(u=u===void 0?this._zoom:this._limitZoom(u),s=this._limitCenter(oe(s),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=i({animate:p.animate},p.zoom),p.pan=i({animate:p.animate,duration:p.duration},p.pan));var y=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,u,p.zoom):this._tryAnimatedPan(s,p.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(s,u,p.pan&&p.pan.noMoveStart),this},setZoom:function(s,u){return this._loaded?this.setView(this.getCenter(),s,{zoom:u}):(this._zoom=s,this)},zoomIn:function(s,u){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,u)},zoomOut:function(s,u){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,u)},setZoomAround:function(s,u,p){var y=this.getZoomScale(u),k=this.getSize().divideBy(2),T=s instanceof F?s:this.latLngToContainerPoint(s),M=T.subtract(k).multiplyBy(1-1/y),W=this.containerPointToLatLng(k.add(M));return this.setView(W,u,{zoom:p})},_getBoundsCenterZoom:function(s,u){u=u||{},s=s.getBounds?s.getBounds():te(s);var p=V(u.paddingTopLeft||u.padding||[0,0]),y=V(u.paddingBottomRight||u.padding||[0,0]),k=this.getBoundsZoom(s,!1,p.add(y));if(k=typeof u.maxZoom=="number"?Math.min(u.maxZoom,k):k,k===1/0)return{center:s.getCenter(),zoom:k};var T=y.subtract(p).divideBy(2),M=this.project(s.getSouthWest(),k),W=this.project(s.getNorthEast(),k),Z=this.unproject(M.add(W).divideBy(2).add(T),k);return{center:Z,zoom:k}},fitBounds:function(s,u){if(s=te(s),!s.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(s,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,u){return this.setView(s,this._zoom,{pan:u})},panBy:function(s,u){if(s=V(s).round(),u=u||{},!s.x&&!s.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new j_,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){ve(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,u,p){if(p=p||{},p.animate===!1||!ue.any3d)return this.setView(s,u,p);this._stop();var y=this.project(this.getCenter()),k=this.project(s),T=this.getSize(),M=this._zoom;s=oe(s),u=u===void 0?M:u;var W=Math.max(T.x,T.y),Z=W*this.getZoomScale(M,u),q=k.distanceTo(y)||1,re=1.42,fe=re*re;function ye(st){var su=st?-1:1,zA=st?Z:W,BA=Z*Z-W*W+su*fe*fe*q*q,FA=2*zA*fe*q,jm=BA/FA,nb=Math.sqrt(jm*jm+1)-jm,UA=nb<1e-9?-18:Math.log(nb);return UA}function Zt(st){return(Math.exp(st)-Math.exp(-st))/2}function bt(st){return(Math.exp(st)+Math.exp(-st))/2}function Tr(st){return Zt(st)/bt(st)}var tr=ye(0);function us(st){return W*(bt(tr)/bt(tr+re*st))}function DA(st){return W*(bt(tr)*Tr(tr+re*st)-Zt(tr))/fe}function IA(st){return 1-Math.pow(1-st,1.5)}var RA=Date.now(),tb=(ye(1)-tr)/re,$A=p.duration?1e3*p.duration:1e3*tb*.8;function rb(){var st=(Date.now()-RA)/$A,su=IA(st)*tb;st<=1?(this._flyToFrame=R(rb,this),this._move(this.unproject(y.add(k.subtract(y).multiplyBy(DA(su)/q)),M),this.getScaleZoom(W/us(su),M),{flyTo:!0})):this._move(s,u)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),rb.call(this),this},flyToBounds:function(s,u){var p=this._getBoundsCenterZoom(s,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(s){return s=te(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var u=this.options.minZoom;return this.options.minZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var u=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,u){this._enforcingBounds=!0;var p=this.getCenter(),y=this._limitCenter(p,this._zoom,te(s));return p.equals(y)||this.panTo(y,u),this._enforcingBounds=!1,this},panInside:function(s,u){u=u||{};var p=V(u.paddingTopLeft||u.padding||[0,0]),y=V(u.paddingBottomRight||u.padding||[0,0]),k=this.project(this.getCenter()),T=this.project(s),M=this.getPixelBounds(),W=ee([M.min.add(p),M.max.subtract(y)]),Z=W.getSize();if(!W.contains(T)){this._enforcingBounds=!0;var q=T.subtract(W.getCenter()),re=W.extend(T).getSize().subtract(Z);k.x+=q.x<0?-re.x:re.x,k.y+=q.y<0?-re.y:re.y,this.panTo(this.unproject(k),u),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),y=u.divideBy(2).round(),k=p.divideBy(2).round(),T=y.subtract(k);return!T.x&&!T.y?this:(s.animate&&s.pan?this.panBy(T):(s.pan&&this._rawPanBy(T),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=o(this._handleGeolocationResponse,this),p=o(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,s):navigator.geolocation.getCurrentPosition(u,p,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var u=s.code,p=s.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var u=s.coords.latitude,p=s.coords.longitude,y=new ae(u,p),k=y.toBounds(s.coords.accuracy*2),T=this._locateOptions;if(T.setView){var M=this.getBoundsZoom(k);this.setView(y,T.maxZoom?Math.min(M,T.maxZoom):M)}var W={latlng:y,bounds:k,timestamp:s.timestamp};for(var Z in s.coords)typeof s.coords[Z]=="number"&&(W[Z]=s.coords[Z]);this.fire("locationfound",W)}},addHandler:function(s,u){if(!u)return this;var p=this[s]=new u(this);return this._handlers.push(p),this.options[s]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ke(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,u){var p="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),y=Se("div",p,u||this._mapPane);return s&&(this._panes[s]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),u=this.unproject(s.getBottomLeft()),p=this.unproject(s.getTopRight());return new X(u,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,u,p){s=te(s),p=V(p||[0,0]);var y=this.getZoom()||0,k=this.getMinZoom(),T=this.getMaxZoom(),M=s.getNorthWest(),W=s.getSouthEast(),Z=this.getSize().subtract(p),q=ee(this.project(W,y),this.project(M,y)).getSize(),re=ue.any3d?this.options.zoomSnap:1,fe=Z.x/q.x,ye=Z.y/q.y,Zt=u?Math.max(fe,ye):Math.min(fe,ye);return y=this.getScaleZoom(Zt,y),re&&(y=Math.round(y/(re/100))*(re/100),y=u?Math.ceil(y/re)*re:Math.floor(y/re)*re),Math.max(k,Math.min(T,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,u){var p=this._getTopLeftPoint(s,u);return new ce(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,u){var p=this.options.crs;return u=u===void 0?this._zoom:u,p.scale(s)/p.scale(u)},getScaleZoom:function(s,u){var p=this.options.crs;u=u===void 0?this._zoom:u;var y=p.zoom(s*p.scale(u));return isNaN(y)?1/0:y},project:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(oe(s),u)},unproject:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(V(s),u)},layerPointToLatLng:function(s){var u=V(s).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(s){var u=this.project(oe(s))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(oe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(te(s))},distance:function(s,u){return this.options.crs.distance(oe(s),oe(u))},containerPointToLayerPoint:function(s){return V(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return V(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var u=this.containerPointToLayerPoint(V(s));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(oe(s)))},mouseEventToContainerPoint:function(s){return b_(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var u=this._container=v_(s);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");he(u,"scroll",this._onScroll,this),this._containerId=d(u)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,ve(s,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=$o(s,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),at(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(s.markerPane,"leaflet-zoom-hide"),ve(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,u,p){at(this._mapPane,new F(0,0));var y=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var k=this._zoom!==u;this._moveStart(k,p)._move(s,u)._moveEnd(k),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(s,u){return s&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(s,u,p,y){u===void 0&&(u=this._zoom);var k=this._zoom!==u;return this._zoom=u,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),y?p&&p.pinch&&this.fire("zoom",p):((k||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){at(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var u=s?Le:he;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,u){for(var p=[],y,k=u==="mouseout"||u==="mouseover",T=s.target||s.srcElement,M=!1;T;){if(y=this._targets[d(T)],y&&(u==="click"||u==="preclick")&&this._draggableMoved(y)){M=!0;break}if(y&&y.listens(u,!0)&&(k&&!fm(T,s)||(p.push(y),k))||T===this._container)break;T=T.parentNode}return!p.length&&!M&&!k&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var u=s.target||s.srcElement;if(!(!this._loaded||u._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(u))){var p=s.type;p==="mousedown"&&sm(u),this._fireDOMEvent(s,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,u,p){if(s.type==="click"){var y=i({},s);y.type="preclick",this._fireDOMEvent(y,y.type,p)}var k=this._findEventTargets(s,u);if(p){for(var T=[],M=0;M<p.length;M++)p[M].listens(u,!0)&&T.push(p[M]);k=T.concat(k)}if(k.length){u==="contextmenu"&&Et(s);var W=k[0],Z={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var q=W.getLatLng&&(!W._radius||W._radius<=10);Z.containerPoint=q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),Z.layerPoint=this.containerPointToLayerPoint(Z.containerPoint),Z.latlng=q?W.getLatLng():this.layerPointToLatLng(Z.layerPoint)}for(M=0;M<k.length;M++)if(k[M].fire(u,Z,!0),Z.originalEvent._stopped||k[M].options.bubblingMouseEvents===!1&&O(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,u=this._handlers.length;s<u;s++)this._handlers[s].disable()},whenReady:function(s,u){return this._loaded?s.call(u||this,{target:this}):this.on("load",s,u),this},_getMapPanePos:function(){return aa(this._mapPane)||new F(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,u){var p=s&&u!==void 0?this._getNewPixelOrigin(s,u):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,u){var p=this.getSize()._divideBy(2);return this.project(s,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,u,p){var y=this._getNewPixelOrigin(p,u);return this.project(s,u)._subtract(y)},_latLngBoundsToNewLayerBounds:function(s,u,p){var y=this._getNewPixelOrigin(p,u);return ee([this.project(s.getSouthWest(),u)._subtract(y),this.project(s.getNorthWest(),u)._subtract(y),this.project(s.getSouthEast(),u)._subtract(y),this.project(s.getNorthEast(),u)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,u,p){if(!p)return s;var y=this.project(s,u),k=this.getSize().divideBy(2),T=new ce(y.subtract(k),y.add(k)),M=this._getBoundsOffset(T,p,u);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?s:this.unproject(y.add(M),u)},_limitOffset:function(s,u){if(!u)return s;var p=this.getPixelBounds(),y=new ce(p.min.add(s),p.max.add(s));return s.add(this._getBoundsOffset(y,u))},_getBoundsOffset:function(s,u,p){var y=ee(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),k=y.min.subtract(s.min),T=y.max.subtract(s.max),M=this._rebound(k.x,-T.x),W=this._rebound(k.y,-T.y);return new F(M,W)},_rebound:function(s,u){return s+u>0?Math.round(s-u)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(u))},_limitZoom:function(s){var u=this.getMinZoom(),p=this.getMaxZoom(),y=ue.any3d?this.options.zoomSnap:1;return y&&(s=Math.round(s/y)*y),Math.max(u,Math.min(p,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,u){var p=this._getCenterOffset(s)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,u),!0)},_createAnimProxy:function(){var s=this._proxy=Se("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(u){var p=Qh,y=this._proxy.style[p];ia(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),y===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ke(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),u=this.getZoom();ia(this._proxy,this.project(s,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(u),k=this._getCenterOffset(s)._divideBy(1-1/y);return p.animate!==!0&&!this.getSize().contains(k)?!1:(R(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(s,u,!0)},this),!0)},_animateZoom:function(s,u,p,y){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=u,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:u,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function JT(s,u){return new we(s,u)}var Qr=D.extend({options:{position:"topright"},initialize:function(s){w(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var u=this._map;return u&&u.removeControl(this),this.options.position=s,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var u=this._container=this.onAdd(s),p=this.getPosition(),y=s._controlCorners[p];return ve(u,"leaflet-control"),p.indexOf("bottom")!==-1?y.insertBefore(u,y.firstChild):y.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ke(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Wo=function(s){return new Qr(s)};we.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},u="leaflet-",p=this._controlContainer=Se("div",u+"control-container",this._container);function y(k,T){var M=u+k+" "+u+T;s[k+T]=Se("div",M,p)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ke(this._controlCorners[s]);Ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var S_=Qr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,u,p,y){return p<y?-1:y<p?1:0}},initialize:function(s,u,p){w(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in s)this._addLayer(s[y],y);for(y in u)this._addLayer(u[y],y,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Qr.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,u){return this._addLayer(s,u),this._map?this._update():this},addOverlay:function(s,u){return this._addLayer(s,u,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var u=this._getLayer(d(s));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",u=this._container=Se("div",s),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Uo(u),dm(u);var y=this._section=Se("section",s+"-list");p&&(this._map.on("click",this.collapse,this),he(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=Se("a",s+"-toggle",u);k.href="#",k.title="Layers",k.setAttribute("role","button"),he(k,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){Et(T),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Se("div",s+"-base",y),this._separator=Se("div",s+"-separator",y),this._overlaysList=Se("div",s+"-overlays",y),u.appendChild(y)},_getLayer:function(s){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&d(this._layers[u].layer)===s)return this._layers[u]},_addLayer:function(s,u,p){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(o(function(y,k){return this.options.sortFunction(y.layer,k.layer,y.name,k.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Hc(this._baseLayersList),Hc(this._overlaysList),this._layerControlInputs=[];var s,u,p,y,k=0;for(p=0;p<this._layers.length;p++)y=this._layers[p],this._addItem(y),u=u||y.overlay,s=s||!y.overlay,k+=y.overlay?0:1;return this.options.hideSingleBase&&(s=s&&k>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=u&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var u=this._getLayer(d(s.target)),p=u.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(s,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(u?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=p,y.firstChild},_addItem:function(s){var u=document.createElement("label"),p=this._map.hasLayer(s.layer),y;s.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=p):y=this._createRadioElement("leaflet-base-layers_"+d(this),p),this._layerControlInputs.push(y),y.layerId=d(s.layer),he(y,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+s.name;var T=document.createElement("span");u.appendChild(T),T.appendChild(y),T.appendChild(k);var M=s.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,u,p,y=[],k=[];this._handlingClick=!0;for(var T=s.length-1;T>=0;T--)u=s[T],p=this._getLayer(u.layerId).layer,u.checked?y.push(p):u.checked||k.push(p);for(T=0;T<k.length;T++)this._map.hasLayer(k[T])&&this._map.removeLayer(k[T]);for(T=0;T<y.length;T++)this._map.hasLayer(y[T])||this._map.addLayer(y[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,u,p,y=this._map.getZoom(),k=s.length-1;k>=0;k--)u=s[k],p=this._getLayer(u.layerId).layer,u.disabled=p.options.minZoom!==void 0&&y<p.options.minZoom||p.options.maxZoom!==void 0&&y>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,he(s,"click",Et),this.expand();var u=this;setTimeout(function(){Le(s,"click",Et),u._preventClick=!1})}}),QT=function(s,u,p){return new S_(s,u,p)},hm=Qr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var u="leaflet-control-zoom",p=Se("div",u+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,u,p,y,k){var T=Se("a",p,y);return T.innerHTML=s,T.href="#",T.title=u,T.setAttribute("role","button"),T.setAttribute("aria-label",u),Uo(T),he(T,"click",oa),he(T,"click",k,this),he(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var s=this._map,u="leaflet-disabled";et(this._zoomInButton,u),et(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ve(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ve(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});we.mergeOptions({zoomControl:!0}),we.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hm,this.addControl(this.zoomControl))});var eA=function(s){return new hm(s)},P_=Qr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var u="leaflet-control-scale",p=Se("div",u),y=this.options;return this._addScales(y,u+"-line",p),s.on(y.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),p},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,u,p){s.metric&&(this._mScale=Se("div",u,p)),s.imperial&&(this._iScale=Se("div",u,p))},_update:function(){var s=this._map,u=s.getSize().y/2,p=s.distance(s.containerPointToLatLng([0,u]),s.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var u=this._getRoundNum(s),p=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,p,u/s)},_updateImperial:function(s){var u=s*3.2808399,p,y,k;u>5280?(p=u/5280,y=this._getRoundNum(p),this._updateScale(this._iScale,y+" mi",y/p)):(k=this._getRoundNum(u),this._updateScale(this._iScale,k+" ft",k/u))},_updateScale:function(s,u,p){s.style.width=Math.round(this.options.maxWidth*p)+"px",s.innerHTML=u},_getRoundNum:function(s){var u=Math.pow(10,(Math.floor(s)+"").length-1),p=s/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,u*p}}),tA=function(s){return new P_(s)},rA='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',mm=Qr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?rA+" ":"")+"Leaflet</a>"},initialize:function(s){w(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Se("div","leaflet-control-attribution"),Uo(this._container);for(var u in s._layers)s._layers[u].getAttribution&&this.addAttribution(s._layers[u].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var u in this._attributions)this._attributions[u]&&s.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),s.length&&p.push(s.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});we.mergeOptions({attributionControl:!0}),we.addInitHook(function(){this.options.attributionControl&&new mm().addTo(this)});var nA=function(s){return new mm(s)};Qr.Layers=S_,Qr.Zoom=hm,Qr.Scale=P_,Qr.Attribution=mm,Wo.layers=QT,Wo.zoom=eA,Wo.scale=tA,Wo.attribution=nA;var xn=D.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xn.addTo=function(s,u){return s.addHandler(u,this),this};var iA={Events:z},k_=ue.touch?"touchstart mousedown":"mousedown",mi=G.extend({options:{clickTolerance:3},initialize:function(s,u,p,y){w(this,y),this._element=s,this._dragStartTarget=u||s,this._preventOutline=p},enable:function(){this._enabled||(he(this._dragStartTarget,k_,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(mi._dragging===this&&this.finishDrag(!0),Le(this._dragStartTarget,k_,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!em(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){mi._dragging===this&&this.finishDrag();return}if(!(mi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(mi._dragging=this,this._preventOutline&&sm(this._element),nm(),zo(),!this._moving)){this.fire("down");var u=s.touches?s.touches[0]:s,p=y_(this._element);this._startPoint=new F(u.clientX,u.clientY),this._startPos=aa(this._element),this._parentScale=om(p);var y=s.type==="mousedown";he(document,y?"mousemove":"touchmove",this._onMove,this),he(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var u=s.touches&&s.touches.length===1?s.touches[0]:s,p=new F(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,Et(s),this._moved||(this.fire("dragstart"),this._moved=!0,ve(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),at(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){et(document.body,"leaflet-dragging"),this._lastTarget&&(et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Le(document,"mousemove touchmove",this._onMove,this),Le(document,"mouseup touchend touchcancel",this._onUp,this),im(),Bo();var u=this._moved&&this._moving;this._moving=!1,mi._dragging=!1,u&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function N_(s,u,p){var y,k=[1,4,2,8],T,M,W,Z,q,re,fe,ye;for(T=0,re=s.length;T<re;T++)s[T]._code=la(s[T],u);for(W=0;W<4;W++){for(fe=k[W],y=[],T=0,re=s.length,M=re-1;T<re;M=T++)Z=s[T],q=s[M],Z._code&fe?q._code&fe||(ye=Gc(q,Z,fe,u,p),ye._code=la(ye,u),y.push(ye)):(q._code&fe&&(ye=Gc(q,Z,fe,u,p),ye._code=la(ye,u),y.push(ye)),y.push(Z));s=y}return s}function C_(s,u){var p,y,k,T,M,W,Z,q,re;if(!s||s.length===0)throw new Error("latlngs not passed");Or(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=oe([0,0]),ye=te(s),Zt=ye.getNorthWest().distanceTo(ye.getSouthWest())*ye.getNorthEast().distanceTo(ye.getNorthWest());Zt<1700&&(fe=pm(s));var bt=s.length,Tr=[];for(p=0;p<bt;p++){var tr=oe(s[p]);Tr.push(u.project(oe([tr.lat-fe.lat,tr.lng-fe.lng])))}for(W=Z=q=0,p=0,y=bt-1;p<bt;y=p++)k=Tr[p],T=Tr[y],M=k.y*T.x-T.y*k.x,Z+=(k.x+T.x)*M,q+=(k.y+T.y)*M,W+=M*3;W===0?re=Tr[0]:re=[Z/W,q/W];var us=u.unproject(V(re));return oe([us.lat+fe.lat,us.lng+fe.lng])}function pm(s){for(var u=0,p=0,y=0,k=0;k<s.length;k++){var T=oe(s[k]);u+=T.lat,p+=T.lng,y++}return oe([u/y,p/y])}var aA={__proto__:null,clipPolygon:N_,polygonCenter:C_,centroid:pm};function E_(s,u){if(!u||!s.length)return s.slice();var p=u*u;return s=lA(s,p),s=oA(s,p),s}function O_(s,u,p){return Math.sqrt(Ho(s,u,p,!0))}function sA(s,u,p){return Ho(s,u,p)}function oA(s,u){var p=s.length,y=typeof Uint8Array<"u"?Uint8Array:Array,k=new y(p);k[0]=k[p-1]=1,gm(s,k,u,0,p-1);var T,M=[];for(T=0;T<p;T++)k[T]&&M.push(s[T]);return M}function gm(s,u,p,y,k){var T=0,M,W,Z;for(W=y+1;W<=k-1;W++)Z=Ho(s[W],s[y],s[k],!0),Z>T&&(M=W,T=Z);T>p&&(u[M]=1,gm(s,u,p,y,M),gm(s,u,p,M,k))}function lA(s,u){for(var p=[s[0]],y=1,k=0,T=s.length;y<T;y++)cA(s[y],s[k])>u&&(p.push(s[y]),k=y);return k<T-1&&p.push(s[T-1]),p}var T_;function A_(s,u,p,y,k){var T=y?T_:la(s,p),M=la(u,p),W,Z,q;for(T_=M;;){if(!(T|M))return[s,u];if(T&M)return!1;W=T||M,Z=Gc(s,u,W,p,k),q=la(Z,p),W===T?(s=Z,T=q):(u=Z,M=q)}}function Gc(s,u,p,y,k){var T=u.x-s.x,M=u.y-s.y,W=y.min,Z=y.max,q,re;return p&8?(q=s.x+T*(Z.y-s.y)/M,re=Z.y):p&4?(q=s.x+T*(W.y-s.y)/M,re=W.y):p&2?(q=Z.x,re=s.y+M*(Z.x-s.x)/T):p&1&&(q=W.x,re=s.y+M*(W.x-s.x)/T),new F(q,re,k)}function la(s,u){var p=0;return s.x<u.min.x?p|=1:s.x>u.max.x&&(p|=2),s.y<u.min.y?p|=4:s.y>u.max.y&&(p|=8),p}function cA(s,u){var p=u.x-s.x,y=u.y-s.y;return p*p+y*y}function Ho(s,u,p,y){var k=u.x,T=u.y,M=p.x-k,W=p.y-T,Z=M*M+W*W,q;return Z>0&&(q=((s.x-k)*M+(s.y-T)*W)/Z,q>1?(k=p.x,T=p.y):q>0&&(k+=M*q,T+=W*q)),M=s.x-k,W=s.y-T,y?M*M+W*W:new F(k,T)}function Or(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function M_(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Or(s)}function L_(s,u){var p,y,k,T,M,W,Z,q;if(!s||s.length===0)throw new Error("latlngs not passed");Or(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var re=oe([0,0]),fe=te(s),ye=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());ye<1700&&(re=pm(s));var Zt=s.length,bt=[];for(p=0;p<Zt;p++){var Tr=oe(s[p]);bt.push(u.project(oe([Tr.lat-re.lat,Tr.lng-re.lng])))}for(p=0,y=0;p<Zt-1;p++)y+=bt[p].distanceTo(bt[p+1])/2;if(y===0)q=bt[0];else for(p=0,T=0;p<Zt-1;p++)if(M=bt[p],W=bt[p+1],k=M.distanceTo(W),T+=k,T>y){Z=(T-y)/k,q=[W.x-Z*(W.x-M.x),W.y-Z*(W.y-M.y)];break}var tr=u.unproject(V(q));return oe([tr.lat+re.lat,tr.lng+re.lng])}var uA={__proto__:null,simplify:E_,pointToSegmentDistance:O_,closestPointOnSegment:sA,clipSegment:A_,_getEdgeIntersection:Gc,_getBitCode:la,_sqClosestPointOnSegment:Ho,isFlat:Or,_flat:M_,polylineCenter:L_},vm={project:function(s){return new F(s.lng,s.lat)},unproject:function(s){return new ae(s.y,s.x)},bounds:new ce([-180,-90],[180,90])},ym={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var u=Math.PI/180,p=this.R,y=s.lat*u,k=this.R_MINOR/p,T=Math.sqrt(1-k*k),M=T*Math.sin(y),W=Math.tan(Math.PI/4-y/2)/Math.pow((1-M)/(1+M),T/2);return y=-p*Math.log(Math.max(W,1e-10)),new F(s.lng*u*p,y)},unproject:function(s){for(var u=180/Math.PI,p=this.R,y=this.R_MINOR/p,k=Math.sqrt(1-y*y),T=Math.exp(-s.y/p),M=Math.PI/2-2*Math.atan(T),W=0,Z=.1,q;W<15&&Math.abs(Z)>1e-7;W++)q=k*Math.sin(M),q=Math.pow((1-q)/(1+q),k/2),Z=Math.PI/2-2*Math.atan(T*q)-M,M+=Z;return new ae(M*u,s.x*u/p)}},dA={__proto__:null,LonLat:vm,Mercator:ym,SphericalMercator:ge},fA=i({},fr,{code:"EPSG:3395",projection:ym,transformation:function(){var s=.5/(Math.PI*ym.R);return J(s,.5,-s,.5)}()}),D_=i({},fr,{code:"EPSG:4326",projection:vm,transformation:J(1/180,1,-1/180,.5)}),hA=i({},Qe,{projection:vm,transformation:J(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,u){var p=u.lng-s.lng,y=u.lat-s.lat;return Math.sqrt(p*p+y*y)},infinite:!0});Qe.Earth=fr,Qe.EPSG3395=fA,Qe.EPSG3857=_t,Qe.EPSG900913=Te,Qe.EPSG4326=D_,Qe.Simple=hA;var en=G.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var u=s.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});we.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var u=d(s);return this._layers[u]?this:(this._layers[u]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var u=d(s);return this._layers[u]?(this._loaded&&s.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,u){for(var p in this._layers)s.call(u,this._layers[p]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var u=0,p=s.length;u<p;u++)this.addLayer(s[u])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var u=d(s);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,u=-1/0,p=this._getZoomSpan();for(var y in this._zoomBoundLayers){var k=this._zoomBoundLayers[y].options;s=k.minZoom===void 0?s:Math.min(s,k.minZoom),u=k.maxZoom===void 0?u:Math.max(u,k.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=s===1/0?void 0:s,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var as=en.extend({initialize:function(s,u){w(this,u),this._layers={};var p,y;if(s)for(p=0,y=s.length;p<y;p++)this.addLayer(s[p])},addLayer:function(s){var u=this.getLayerId(s);return this._layers[u]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var u=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(s){var u=typeof s=="number"?s:this.getLayerId(s);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var u=Array.prototype.slice.call(arguments,1),p,y;for(p in this._layers)y=this._layers[p],y[s]&&y[s].apply(y,u);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,u){for(var p in this._layers)s.call(u,this._layers[p]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),mA=function(s,u){return new as(s,u)},In=as.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),as.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),as.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new X;for(var u in this._layers){var p=this._layers[u];s.extend(p.getBounds?p.getBounds():p.getLatLng())}return s}}),pA=function(s,u){return new In(s,u)},ss=D.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){w(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,u){var p=this._getIconUrl(s);if(!p){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(p,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(y,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(s,u){var p=this.options,y=p[u+"Size"];typeof y=="number"&&(y=[y,y]);var k=V(y),T=V(u==="shadow"&&p.shadowAnchor||p.iconAnchor||k&&k.divideBy(2,!0));s.className="leaflet-marker-"+u+" "+(p.className||""),T&&(s.style.marginLeft=-T.x+"px",s.style.marginTop=-T.y+"px"),k&&(s.style.width=k.x+"px",s.style.height=k.y+"px")},_createImg:function(s,u){return u=u||document.createElement("img"),u.src=s,u},_getIconUrl:function(s){return ue.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function gA(s){return new ss(s)}var Ko=ss.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ko.imagePath!="string"&&(Ko.imagePath=this._detectIconPath()),(this.options.imagePath||Ko.imagePath)+ss.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var u=function(p,y,k){var T=y.exec(p);return T&&T[k]};return s=u(s,/^url\((['"])?(.+)\1\)$/,2),s&&u(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Se("div","leaflet-default-icon-path",document.body),u=$o(s,"background-image")||$o(s,"backgroundImage");if(document.body.removeChild(s),u=this._stripUrl(u),u)return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),I_=xn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new mi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var u=this._marker,p=u._map,y=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,T=aa(u._icon),M=p.getPixelBounds(),W=p.getPixelOrigin(),Z=ee(M.min._subtract(W).add(k),M.max._subtract(W).subtract(k));if(!Z.contains(T)){var q=V((Math.max(Z.max.x,T.x)-Z.max.x)/(M.max.x-Z.max.x)-(Math.min(Z.min.x,T.x)-Z.min.x)/(M.min.x-Z.min.x),(Math.max(Z.max.y,T.y)-Z.max.y)/(M.max.y-Z.max.y)-(Math.min(Z.min.y,T.y)-Z.min.y)/(M.min.y-Z.min.y)).multiplyBy(y);p.panBy(q,{animate:!1}),this._draggable._newPos._add(q),this._draggable._startPos._add(q),at(u._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=R(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,s)))},_onDrag:function(s){var u=this._marker,p=u._shadow,y=aa(u._icon),k=u._map.layerPointToLatLng(y);p&&at(p,y),u._latlng=k,s.latlng=k,s.oldLatLng=this._oldLatLng,u.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Yc=en.extend({options:{icon:new Ko,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,u){w(this,u),this._latlng=oe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var u=this._latlng;return this._latlng=oe(s),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=s.icon.createIcon(this._icon),y=!1;p!==this._icon&&(this._icon&&this._removeIcon(),y=!0,s.title&&(p.title=s.title),p.tagName==="IMG"&&(p.alt=s.alt||"")),ve(p,u),s.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&he(p,"focus",this._panOnFocus,this);var k=s.icon.createShadow(this._shadow),T=!1;k!==this._shadow&&(this._removeShadow(),T=!0),k&&(ve(k,u),k.alt=""),this._shadow=k,s.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&T&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Le(this._icon,"focus",this._panOnFocus,this),Ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ke(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&at(this._icon,s),this._shadow&&at(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),I_)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new I_(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Er(this._icon,s),this._shadow&&Er(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var u=this.options.icon.options,p=u.iconSize?V(u.iconSize):V(0,0),y=u.iconAnchor?V(u.iconAnchor):V(0,0);s.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:p.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vA(s,u){return new Yc(s,u)}var pi=en.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return w(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xc=pi.extend({options:{fill:!0,radius:10},initialize:function(s,u){w(this,u),this._latlng=oe(s),this._radius=this.options.radius},setLatLng:function(s){var u=this._latlng;return this._latlng=oe(s),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var u=s&&s.radius||this._radius;return pi.prototype.setStyle.call(this,s),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,u=this._radiusY||s,p=this._clickTolerance(),y=[s+p,u+p];this._pxBounds=new ce(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yA(s,u){return new Xc(s,u)}var xm=Xc.extend({initialize:function(s,u,p){if(typeof u=="number"&&(u=i({},p,{radius:u})),w(this,u),this._latlng=oe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new X(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:pi.prototype.setStyle,_project:function(){var s=this._latlng.lng,u=this._latlng.lat,p=this._map,y=p.options.crs;if(y.distance===fr.distance){var k=Math.PI/180,T=this._mRadius/fr.R/k,M=p.project([u+T,s]),W=p.project([u-T,s]),Z=M.add(W).divideBy(2),q=p.unproject(Z).lat,re=Math.acos((Math.cos(T*k)-Math.sin(u*k)*Math.sin(q*k))/(Math.cos(u*k)*Math.cos(q*k)))/k;(isNaN(re)||re===0)&&(re=T/Math.cos(Math.PI/180*u)),this._point=Z.subtract(p.getPixelOrigin()),this._radius=isNaN(re)?0:Z.x-p.project([q,s-re]).x,this._radiusY=Z.y-M.y}else{var fe=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(fe).x}this._updateBounds()}});function xA(s,u,p){return new xm(s,u,p)}var Rn=pi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,u){w(this,u),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var u=1/0,p=null,y=Ho,k,T,M=0,W=this._parts.length;M<W;M++)for(var Z=this._parts[M],q=1,re=Z.length;q<re;q++){k=Z[q-1],T=Z[q];var fe=y(s,k,T,!0);fe<u&&(u=fe,p=y(s,k,T))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return L_(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,u){return u=u||this._defaultShape(),s=oe(s),u.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new X,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Or(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var u=[],p=Or(s),y=0,k=s.length;y<k;y++)p?(u[y]=oe(s[y]),this._bounds.extend(u[y])):u[y]=this._convertLatLngs(s[y]);return u},_project:function(){var s=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),u=new F(s,s);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(s,u,p){var y=s[0]instanceof ae,k=s.length,T,M;if(y){for(M=[],T=0;T<k;T++)M[T]=this._map.latLngToLayerPoint(s[T]),p.extend(M[T]);u.push(M)}else for(T=0;T<k;T++)this._projectLatlngs(s[T],u,p)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,p,y,k,T,M,W,Z;for(p=0,k=0,T=this._rings.length;p<T;p++)for(Z=this._rings[p],y=0,M=Z.length;y<M-1;y++)W=A_(Z[y],Z[y+1],s,y,!0),W&&(u[k]=u[k]||[],u[k].push(W[0]),(W[1]!==Z[y+1]||y===M-2)&&(u[k].push(W[1]),k++))}},_simplifyPoints:function(){for(var s=this._parts,u=this.options.smoothFactor,p=0,y=s.length;p<y;p++)s[p]=E_(s[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,u){var p,y,k,T,M,W,Z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(p=0,T=this._parts.length;p<T;p++)for(W=this._parts[p],y=0,M=W.length,k=M-1;y<M;k=y++)if(!(!u&&y===0)&&O_(s,W[k],W[y])<=Z)return!0;return!1}});function _A(s,u){return new Rn(s,u)}Rn._flat=M_;var os=Rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return C_(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var u=Rn.prototype._convertLatLngs.call(this,s),p=u.length;return p>=2&&u[0]instanceof ae&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(s){Rn.prototype._setLatLngs.call(this,s),Or(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Or(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,u=this.options.weight,p=new F(u,u);if(s=new ce(s.min.subtract(p),s.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,k=this._rings.length,T;y<k;y++)T=N_(this._rings[y],s,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var u=!1,p,y,k,T,M,W,Z,q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(T=0,Z=this._parts.length;T<Z;T++)for(p=this._parts[T],M=0,q=p.length,W=q-1;M<q;W=M++)y=p[M],k=p[W],y.y>s.y!=k.y>s.y&&s.x<(k.x-y.x)*(s.y-y.y)/(k.y-y.y)+y.x&&(u=!u);return u||Rn.prototype._containsPoint.call(this,s,!0)}});function bA(s,u){return new os(s,u)}var $n=In.extend({initialize:function(s,u){w(this,u),this._layers={},s&&this.addData(s)},addData:function(s){var u=S(s)?s:s.features,p,y,k;if(u){for(p=0,y=u.length;p<y;p++)k=u[p],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var T=this.options;if(T.filter&&!T.filter(s))return this;var M=Jc(s,T);return M?(M.feature=tu(s),M.defaultOptions=M.options,this.resetStyle(M),T.onEachFeature&&T.onEachFeature(s,M),this.addLayer(M)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(u){this._setLayerStyle(u,s)},this)},_setLayerStyle:function(s,u){s.setStyle&&(typeof u=="function"&&(u=u(s.feature)),s.setStyle(u))}});function Jc(s,u){var p=s.type==="Feature"?s.geometry:s,y=p?p.coordinates:null,k=[],T=u&&u.pointToLayer,M=u&&u.coordsToLatLng||_m,W,Z,q,re;if(!y&&!p)return null;switch(p.type){case"Point":return W=M(y),R_(T,s,W,u);case"MultiPoint":for(q=0,re=y.length;q<re;q++)W=M(y[q]),k.push(R_(T,s,W,u));return new In(k);case"LineString":case"MultiLineString":return Z=Qc(y,p.type==="LineString"?0:1,M),new Rn(Z,u);case"Polygon":case"MultiPolygon":return Z=Qc(y,p.type==="Polygon"?1:2,M),new os(Z,u);case"GeometryCollection":for(q=0,re=p.geometries.length;q<re;q++){var fe=Jc({geometry:p.geometries[q],type:"Feature",properties:s.properties},u);fe&&k.push(fe)}return new In(k);case"FeatureCollection":for(q=0,re=p.features.length;q<re;q++){var ye=Jc(p.features[q],u);ye&&k.push(ye)}return new In(k);default:throw new Error("Invalid GeoJSON object.")}}function R_(s,u,p,y){return s?s(u,p):new Yc(p,y&&y.markersInheritOptions&&y)}function _m(s){return new ae(s[1],s[0],s[2])}function Qc(s,u,p){for(var y=[],k=0,T=s.length,M;k<T;k++)M=u?Qc(s[k],u-1,p):(p||_m)(s[k]),y.push(M);return y}function bm(s,u){return s=oe(s),s.alt!==void 0?[g(s.lng,u),g(s.lat,u),g(s.alt,u)]:[g(s.lng,u),g(s.lat,u)]}function eu(s,u,p,y){for(var k=[],T=0,M=s.length;T<M;T++)k.push(u?eu(s[T],Or(s[T])?0:u-1,p,y):bm(s[T],y));return!u&&p&&k.length>0&&k.push(k[0].slice()),k}function ls(s,u){return s.feature?i({},s.feature,{geometry:u}):tu(u)}function tu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var wm={toGeoJSON:function(s){return ls(this,{type:"Point",coordinates:bm(this.getLatLng(),s)})}};Yc.include(wm),xm.include(wm),Xc.include(wm),Rn.include({toGeoJSON:function(s){var u=!Or(this._latlngs),p=eu(this._latlngs,u?1:0,!1,s);return ls(this,{type:(u?"Multi":"")+"LineString",coordinates:p})}}),os.include({toGeoJSON:function(s){var u=!Or(this._latlngs),p=u&&!Or(this._latlngs[0]),y=eu(this._latlngs,p?2:u?1:0,!0,s);return u||(y=[y]),ls(this,{type:(p?"Multi":"")+"Polygon",coordinates:y})}}),as.include({toMultiPoint:function(s){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(s).geometry.coordinates)}),ls(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(s){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(s);var p=u==="GeometryCollection",y=[];return this.eachLayer(function(k){if(k.toGeoJSON){var T=k.toGeoJSON(s);if(p)y.push(T.geometry);else{var M=tu(T);M.type==="FeatureCollection"?y.push.apply(y,M.features):y.push(M)}}}),p?ls(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function $_(s,u){return new $n(s,u)}var wA=$_,ru=en.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,u,p){this._url=s,this._bounds=te(u),w(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&ns(this._image),this},bringToBack:function(){return this._map&&is(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=te(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",u=this._image=s?this._url:Se("img");if(ve(u,"leaflet-image-layer"),this._zoomAnimated&&ve(u,"leaflet-zoom-animated"),this.options.className&&ve(u,this.options.className),u.onselectstart=m,u.onmousemove=m,u.onload=o(this.fire,this,"load"),u.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(s){var u=this._map.getZoomScale(s.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ia(this._image,p,u)},_reset:function(){var s=this._image,u=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();at(s,u.min),s.style.width=p.x+"px",s.style.height=p.y+"px"},_updateOpacity:function(){Er(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),jA=function(s,u,p){return new ru(s,u,p)},z_=ru.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",u=this._image=s?this._url:Se("video");if(ve(u,"leaflet-image-layer"),this._zoomAnimated&&ve(u,"leaflet-zoom-animated"),this.options.className&&ve(u,this.options.className),u.onselectstart=m,u.onmousemove=m,u.onloadeddata=o(this.fire,this,"load"),s){for(var p=u.getElementsByTagName("source"),y=[],k=0;k<p.length;k++)y.push(p[k].src);this._url=p.length>0?y:[u.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var M=Se("source");M.src=this._url[T],u.appendChild(M)}}});function SA(s,u,p){return new z_(s,u,p)}var B_=ru.extend({_initImage:function(){var s=this._image=this._url;ve(s,"leaflet-image-layer"),this._zoomAnimated&&ve(s,"leaflet-zoom-animated"),this.options.className&&ve(s,this.options.className),s.onselectstart=m,s.onmousemove=m}});function PA(s,u,p){return new B_(s,u,p)}var _n=en.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,u){s&&(s instanceof ae||S(s))?(this._latlng=oe(s),w(this,u)):(w(this,s),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Er(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Er(this._container,1),this.bringToFront(),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Er(this._container,0),this._removeTimeout=setTimeout(o(Ke,void 0,this._container),200)):Ke(this._container),this.options.interactive&&(et(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=oe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ns(this._container),this},bringToBack:function(){return this._map&&is(this._container),this},_prepareOpen:function(s){var u=this._source;if(!u._map)return!1;if(u instanceof In){u=null;var p=this._source._layers;for(var y in p)if(p[y]._map){u=p[y];break}if(!u)return!1;this._source=u}if(!s)if(u.getCenter)s=u.getCenter();else if(u.getLatLng)s=u.getLatLng();else if(u.getBounds)s=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")s.innerHTML=u;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),u=V(this.options.offset),p=this._getAnchor();this._zoomAnimated?at(this._container,s.add(p)):u=u.add(s).add(p);var y=this._containerBottom=-u.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=y+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});we.include({_initOverlay:function(s,u,p,y){var k=u;return k instanceof s||(k=new s(y).setContent(u)),p&&k.setLatLng(p),k}}),en.include({_initOverlay:function(s,u,p,y){var k=p;return k instanceof s?(w(k,y),k._source=this):(k=u&&!y?u:new s(y,this),k.setContent(p)),k}});var nu=_n.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,_n.prototype.openOn.call(this,s)},onAdd:function(s){_n.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof pi||this._source.on("preclick",sa))},onRemove:function(s){_n.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof pi||this._source.off("preclick",sa))},getEvents:function(){var s=_n.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",u=this._container=Se("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Se("div",s+"-content-wrapper",u);if(this._contentNode=Se("div",s+"-content",p),Uo(u),dm(this._contentNode),he(u,"contextmenu",sa),this._tipContainer=Se("div",s+"-tip-container",u),this._tip=Se("div",s+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=Se("a",s+"-close-button",u);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',he(y,"click",function(k){Et(k),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,u=s.style;u.width="",u.whiteSpace="nowrap";var p=s.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var y=s.offsetHeight,k=this.options.maxHeight,T="leaflet-popup-scrolled";k&&y>k?(u.height=k+"px",ve(s,T)):et(s,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),p=this._getAnchor();at(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,u=parseInt($o(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,y=this._containerWidth,k=new F(this._containerLeft,-p-this._containerBottom);k._add(aa(this._container));var T=s.layerPointToContainerPoint(k),M=V(this.options.autoPanPadding),W=V(this.options.autoPanPaddingTopLeft||M),Z=V(this.options.autoPanPaddingBottomRight||M),q=s.getSize(),re=0,fe=0;T.x+y+Z.x>q.x&&(re=T.x+y-q.x+Z.x),T.x-re-W.x<0&&(re=T.x-W.x),T.y+p+Z.y>q.y&&(fe=T.y+p-q.y+Z.y),T.y-fe-W.y<0&&(fe=T.y-W.y),(re||fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([re,fe]))}},_getAnchor:function(){return V(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),kA=function(s,u){return new nu(s,u)};we.mergeOptions({closePopupOnClick:!0}),we.include({openPopup:function(s,u,p){return this._initOverlay(nu,s,u,p).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),en.include({bindPopup:function(s,u){return this._popup=this._initOverlay(nu,this._popup,s,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof In||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){oa(s);var u=s.layer||s.target;if(this._popup._source===u&&!(u instanceof pi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=u,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var iu=_n.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){_n.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){_n.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=_n.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",u=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Se("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var u,p,y=this._map,k=this._container,T=y.latLngToContainerPoint(y.getCenter()),M=y.layerPointToContainerPoint(s),W=this.options.direction,Z=k.offsetWidth,q=k.offsetHeight,re=V(this.options.offset),fe=this._getAnchor();W==="top"?(u=Z/2,p=q):W==="bottom"?(u=Z/2,p=0):W==="center"?(u=Z/2,p=q/2):W==="right"?(u=0,p=q/2):W==="left"?(u=Z,p=q/2):M.x<T.x?(W="right",u=0,p=q/2):(W="left",u=Z+(re.x+fe.x)*2,p=q/2),s=s.subtract(V(u,p,!0)).add(re).add(fe),et(k,"leaflet-tooltip-right"),et(k,"leaflet-tooltip-left"),et(k,"leaflet-tooltip-top"),et(k,"leaflet-tooltip-bottom"),ve(k,"leaflet-tooltip-"+W),at(k,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Er(this._container,s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(u)},_getAnchor:function(){return V(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),NA=function(s,u){return new iu(s,u)};we.include({openTooltip:function(s,u,p){return this._initOverlay(iu,s,u,p).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),en.include({bindTooltip:function(s,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(iu,this._tooltip,s,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var u=s?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof In||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&(he(u,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),he(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var u=s.latlng,p,y;this._tooltip.options.sticky&&s.originalEvent&&(p=this._map.mouseEventToContainerPoint(s.originalEvent),y=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(u)}});var F_=ss.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var u=s&&s.tagName==="DIV"?s:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Hc(u),u.appendChild(p.html)):u.innerHTML=p.html!==!1?p.html:"",p.bgPos){var y=V(p.bgPos);u.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function CA(s){return new F_(s)}ss.Default=Ko;var Zo=en.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){w(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ke(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ns(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(is(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof F?s:new F(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var u=this.getPane().children,p=-s(-1/0,1/0),y=0,k=u.length,T;y<k;y++)T=u[y].style.zIndex,u[y]!==this._container&&T&&(p=s(p,+T));isFinite(p)&&(this.options.zIndex=p+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){Er(this._container,this.options.opacity);var s=+new Date,u=!1,p=!1;for(var y in this._tiles){var k=this._tiles[y];if(!(!k.current||!k.loaded)){var T=Math.min(1,(s-k.loaded)/200);Er(k.el,T),T<1?u=!0:(k.active?p=!0:this._onOpaqueTile(k),k.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(U(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Se("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,u=this.options.maxZoom;if(s!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===s?(this._levels[p].el.style.zIndex=u-Math.abs(s-p),this._onUpdateLevel(p)):(Ke(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var y=this._levels[s],k=this._map;return y||(y=this._levels[s]={},y.el=Se("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=u,y.origin=k.project(k.unproject(k.getPixelOrigin()),s).round(),y.zoom=s,this._setZoomTransform(y,k.getCenter(),k.getZoom()),m(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var s,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)u=this._tiles[s],u.retain=u.current;for(s in this._tiles)if(u=this._tiles[s],u.current&&!u.active){var y=u.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var u in this._tiles)this._tiles[u].coords.z===s&&this._removeTile(u)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ke(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,u,p,y){var k=Math.floor(s/2),T=Math.floor(u/2),M=p-1,W=new F(+k,+T);W.z=+M;var Z=this._tileCoordsToKey(W),q=this._tiles[Z];return q&&q.active?(q.retain=!0,!0):(q&&q.loaded&&(q.retain=!0),M>y?this._retainParent(k,T,M,y):!1)},_retainChildren:function(s,u,p,y){for(var k=2*s;k<2*s+2;k++)for(var T=2*u;T<2*u+2;T++){var M=new F(k,T);M.z=p+1;var W=this._tileCoordsToKey(M),Z=this._tiles[W];if(Z&&Z.active){Z.retain=!0;continue}else Z&&Z.loaded&&(Z.retain=!0);p+1<y&&this._retainChildren(k,T,p+1,y)}},_resetView:function(s){var u=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var u=this.options;return u.minNativeZoom!==void 0&&s<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<s?u.maxNativeZoom:s},_setView:function(s,u,p,y){var k=Math.round(u);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var T=this.options.updateWhenZooming&&k!==this._tileZoom;(!y||T)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(s),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(s,u)},_setZoomTransforms:function(s,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],s,u)},_setZoomTransform:function(s,u,p){var y=this._map.getZoomScale(p,s.zoom),k=s.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(u,p)).round();ue.any3d?ia(s.el,k,y):at(s.el,k)},_resetGrid:function(){var s=this._map,u=s.options.crs,p=this._tileSize=this.getTileSize(),y=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,u.wrapLng[0]],y).x/p.x),Math.ceil(s.project([0,u.wrapLng[1]],y).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([u.wrapLat[0],0],y).y/p.x),Math.ceil(s.project([u.wrapLat[1],0],y).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),y=u.getZoomScale(p,this._tileZoom),k=u.project(s,this._tileZoom).floor(),T=u.getSize().divideBy(y*2);return new ce(k.subtract(T),k.add(T))},_update:function(s){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(s===void 0&&(s=u.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(s),k=this._pxBoundsToTileRange(y),T=k.getCenter(),M=[],W=this.options.keepBuffer,Z=new ce(k.getBottomLeft().subtract([W,-W]),k.getTopRight().add([W,-W]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var q in this._tiles){var re=this._tiles[q].coords;(re.z!==this._tileZoom||!Z.contains(new F(re.x,re.y)))&&(this._tiles[q].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(s,p);return}for(var fe=k.min.y;fe<=k.max.y;fe++)for(var ye=k.min.x;ye<=k.max.x;ye++){var Zt=new F(ye,fe);if(Zt.z=this._tileZoom,!!this._isValidTile(Zt)){var bt=this._tiles[this._tileCoordsToKey(Zt)];bt?bt.current=!0:M.push(Zt)}}if(M.sort(function(tr,us){return tr.distanceTo(T)-us.distanceTo(T)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tr=document.createDocumentFragment();for(ye=0;ye<M.length;ye++)this._addTile(M[ye],Tr);this._level.el.appendChild(Tr)}}}},_isValidTile:function(s){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(s.x<p.min.x||s.x>p.max.x)||!u.wrapLat&&(s.y<p.min.y||s.y>p.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(s);return te(this.options.bounds).overlaps(y)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var u=this._map,p=this.getTileSize(),y=s.scaleBy(p),k=y.add(p),T=u.unproject(y,s.z),M=u.unproject(k,s.z);return[T,M]},_tileCoordsToBounds:function(s){var u=this._tileCoordsToNwSe(s),p=new X(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var u=s.split(":"),p=new F(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(s){var u=this._tiles[s];u&&(Ke(u.el),delete this._tiles[s],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ve(s,"leaflet-tile");var u=this.getTileSize();s.style.width=u.x+"px",s.style.height=u.y+"px",s.onselectstart=m,s.onmousemove=m,ue.ielt9&&this.options.opacity<1&&Er(s,this.options.opacity)},_addTile:function(s,u){var p=this._getTilePos(s),y=this._tileCoordsToKey(s),k=this.createTile(this._wrapCoords(s),o(this._tileReady,this,s));this._initTile(k),this.createTile.length<2&&R(o(this._tileReady,this,s,null,k)),at(k,p),this._tiles[y]={el:k,coords:s,current:!0},u.appendChild(k),this.fire("tileloadstart",{tile:k,coords:s})},_tileReady:function(s,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:s});var y=this._tileCoordsToKey(s);p=this._tiles[y],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Er(p.el,0),U(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(ve(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var u=new F(this._wrapX?h(s.x,this._wrapX):s.x,this._wrapY?h(s.y,this._wrapY):s.y);return u.z=s.z,u},_pxBoundsToTileRange:function(s){var u=this.getTileSize();return new ce(s.min.unscaleBy(u).floor(),s.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function EA(s){return new Zo(s)}var cs=Zo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,u){this._url=s,u=w(this,u),u.detectRetina&&ue.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,u){return this._url===s&&u===void 0&&(u=!0),this._url=s,u||this.redraw(),this},createTile:function(s,u){var p=document.createElement("img");return he(p,"load",o(this._tileOnLoad,this,u,p)),he(p,"error",o(this._tileOnError,this,u,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(s),p},getTileUrl:function(s){var u={r:ue.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-s.y;this.options.tms&&(u.y=p),u["-y"]=p}return x(this._url,i(u,this.options))},_tileOnLoad:function(s,u){ue.ielt9?setTimeout(o(s,this,null,u),0):s(null,u)},_tileOnError:function(s,u,p){var y=this.options.errorTileUrl;y&&u.getAttribute("src")!==y&&(u.src=y),s(p,u)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,u=this.options.maxZoom,p=this.options.zoomReverse,y=this.options.zoomOffset;return p&&(s=u-s),s+y},_getSubdomain:function(s){var u=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var s,u;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(u=this._tiles[s].el,u.onload=m,u.onerror=m,!u.complete)){u.src=N;var p=this._tiles[s].coords;Ke(u),delete this._tiles[s],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(s){var u=this._tiles[s];if(u)return u.el.setAttribute("src",N),Zo.prototype._removeTile.call(this,s)},_tileReady:function(s,u,p){if(!(!this._map||p&&p.getAttribute("src")===N))return Zo.prototype._tileReady.call(this,s,u,p)}});function U_(s,u){return new cs(s,u)}var W_=cs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,u){this._url=s;var p=i({},this.defaultWmsParams);for(var y in u)y in this.options||(p[y]=u[y]);u=w(this,u);var k=u.detectRetina&&ue.retina?2:1,T=this.getTileSize();p.width=T.x*k,p.height=T.y*k,this.wmsParams=p},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,cs.prototype.onAdd.call(this,s)},getTileUrl:function(s){var u=this._tileCoordsToNwSe(s),p=this._crs,y=ee(p.project(u[0]),p.project(u[1])),k=y.min,T=y.max,M=(this._wmsVersion>=1.3&&this._crs===D_?[k.y,k.x,T.y,T.x]:[k.x,k.y,T.x,T.y]).join(","),W=cs.prototype.getTileUrl.call(this,s);return W+P(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(s,u){return i(this.wmsParams,s),u||this.redraw(),this}});function OA(s,u){return new W_(s,u)}cs.WMS=W_,U_.wms=OA;var zn=en.extend({options:{padding:.1},initialize:function(s){w(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,u){var p=this._map.getZoomScale(u,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,u),T=y.multiplyBy(-p).add(k).subtract(this._map._getNewPixelOrigin(s,u));ue.any3d?ia(this._container,T,p):at(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-s)).round();this._bounds=new ce(p,p.add(u.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),H_=zn.extend({options:{tolerance:0},getEvents:function(){var s=zn.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");he(s,"mousemove",this._onMouseMove,this),he(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),he(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Ke(this._container),Le(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var u in this._layers)s=this._layers[u],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zn.prototype._update.call(this);var s=this._bounds,u=this._container,p=s.getSize(),y=ue.retina?2:1;at(u,s.min),u.width=y*p.x,u.height=y*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){zn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var u=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var u=s._order,p=u.next,y=u.prev;p?p.prev=y:this._drawLast=y,y?y.next=p:this._drawFirst=p,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var u=s.options.dashArray.split(/[, ]+/),p=[],y,k;for(k=0;k<u.length;k++){if(y=Number(u[k]),isNaN(y))return;p.push(y)}s.options._dashArray=p}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var u=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(s._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(s._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var u=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)s=y.layer,(!u||s._pxBounds&&s._pxBounds.intersects(u))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,u){if(this._drawing){var p,y,k,T,M=s._parts,W=M.length,Z=this._ctx;if(W){for(Z.beginPath(),p=0;p<W;p++){for(y=0,k=M[p].length;y<k;y++)T=M[p][y],Z[y?"lineTo":"moveTo"](T.x,T.y);u&&Z.closePath()}this._fillStroke(Z,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var u=s._point,p=this._ctx,y=Math.max(Math.round(s._radius),1),k=(Math.max(Math.round(s._radiusY),1)||y)/y;k!==1&&(p.save(),p.scale(1,k)),p.beginPath(),p.arc(u.x,u.y/k,y,0,Math.PI*2,!1),k!==1&&p.restore(),this._fillStroke(p,s)}},_fillStroke:function(s,u){var p=u.options;p.fill&&(s.globalAlpha=p.fillOpacity,s.fillStyle=p.fillColor||p.color,s.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(s.setLineDash&&s.setLineDash(u.options&&u.options._dashArray||[]),s.globalAlpha=p.opacity,s.lineWidth=p.weight,s.strokeStyle=p.color,s.lineCap=p.lineCap,s.lineJoin=p.lineJoin,s.stroke())},_onClick:function(s){for(var u=this._map.mouseEventToLayerPoint(s),p,y,k=this._drawFirst;k;k=k.next)p=k.layer,p.options.interactive&&p._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(p))&&(y=p);this._fireEvent(y?[y]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,u)}},_handleMouseOut:function(s){var u=this._hoveredLayer;u&&(et(this._container,"leaflet-interactive"),this._fireEvent([u],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,u){if(!this._mouseHoverThrottled){for(var p,y,k=this._drawFirst;k;k=k.next)p=k.layer,p.options.interactive&&p._containsPoint(u)&&(y=p);y!==this._hoveredLayer&&(this._handleMouseOut(s),y&&(ve(this._container,"leaflet-interactive"),this._fireEvent([y],s,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,u,p){this._map._fireDOMEvent(u,p||u.type,s)},_bringToFront:function(s){var u=s._order;if(u){var p=u.next,y=u.prev;if(p)p.prev=y;else return;y?y.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(s)}},_bringToBack:function(s){var u=s._order;if(u){var p=u.next,y=u.prev;if(y)y.next=p;else return;p?p.prev=y:y&&(this._drawLast=y),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(s)}}});function K_(s){return ue.canvas?new H_(s):null}var Vo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),TA={_initContainer:function(){this._container=Se("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zn.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var u=s._container=Vo("shape");ve(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",s._path=Vo("path"),u.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var u=s._container;this._container.appendChild(u),s.options.interactive&&s.addInteractiveTarget(u)},_removePath:function(s){var u=s._container;Ke(u),s.removeInteractiveTarget(u),delete this._layers[d(s)]},_updateStyle:function(s){var u=s._stroke,p=s._fill,y=s.options,k=s._container;k.stroked=!!y.stroke,k.filled=!!y.fill,y.stroke?(u||(u=s._stroke=Vo("stroke")),k.appendChild(u),u.weight=y.weight+"px",u.color=y.color,u.opacity=y.opacity,y.dashArray?u.dashStyle=S(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=y.lineCap.replace("butt","flat"),u.joinstyle=y.lineJoin):u&&(k.removeChild(u),s._stroke=null),y.fill?(p||(p=s._fill=Vo("fill")),k.appendChild(p),p.color=y.fillColor||y.color,p.opacity=y.fillOpacity):p&&(k.removeChild(p),s._fill=null)},_updateCircle:function(s){var u=s._point.round(),p=Math.round(s._radius),y=Math.round(s._radiusY||p);this._setPath(s,s._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+y+" 0,"+65535*360)},_setPath:function(s,u){s._path.v=u},_bringToFront:function(s){ns(s._container)},_bringToBack:function(s){is(s._container)}},au=ue.vml?Vo:It,qo=zn.extend({_initContainer:function(){this._container=au("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=au("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ke(this._container),Le(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zn.prototype._update.call(this);var s=this._bounds,u=s.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),at(p,s.min),p.setAttribute("viewBox",[s.min.x,s.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(s){var u=s._path=au("path");s.options.className&&ve(u,s.options.className),s.options.interactive&&ve(u,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ke(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var u=s._path,p=s.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(s,u){this._setPath(s,Rt(s._parts,u))},_updateCircle:function(s){var u=s._point,p=Math.max(Math.round(s._radius),1),y=Math.max(Math.round(s._radiusY),1)||p,k="a"+p+","+y+" 0 1,0 ",T=s._empty()?"M0 0":"M"+(u.x-p)+","+u.y+k+p*2+",0 "+k+-p*2+",0 ";this._setPath(s,T)},_setPath:function(s,u){s._path.setAttribute("d",u)},_bringToFront:function(s){ns(s._path)},_bringToBack:function(s){is(s._path)}});ue.vml&&qo.include(TA);function Z_(s){return ue.svg||ue.vml?new qo(s):null}we.include({getRenderer:function(s){var u=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var u=this._paneRenderers[s];return u===void 0&&(u=this._createRenderer({pane:s}),this._paneRenderers[s]=u),u},_createRenderer:function(s){return this.options.preferCanvas&&K_(s)||Z_(s)}});var V_=os.extend({initialize:function(s,u){os.prototype.initialize.call(this,this._boundsToLatLngs(s),u)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=te(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function AA(s,u){return new V_(s,u)}qo.create=au,qo.pointsToPath=Rt,$n.geometryToLayer=Jc,$n.coordsToLatLng=_m,$n.coordsToLatLngs=Qc,$n.latLngToCoords=bm,$n.latLngsToCoords=eu,$n.getFeature=ls,$n.asFeature=tu,we.mergeOptions({boxZoom:!0});var q_=xn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),zo(),nm(),this._startPoint=this._map.mouseEventToContainerPoint(s),he(document,{contextmenu:oa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Se("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var u=new ce(this._point,this._startPoint),p=u.getSize();at(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Ke(this._box),et(this._container,"leaflet-crosshair")),Bo(),im(),Le(document,{contextmenu:oa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var u=new X(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});we.addInitHook("addHandler","boxZoom",q_),we.mergeOptions({doubleClickZoom:!0});var G_=xn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var u=this._map,p=u.getZoom(),y=u.options.zoomDelta,k=s.originalEvent.shiftKey?p-y:p+y;u.options.doubleClickZoom==="center"?u.setZoom(k):u.setZoomAround(s.containerPoint,k)}});we.addInitHook("addHandler","doubleClickZoom",G_),we.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Y_=xn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new mi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){et(this._map._container,"leaflet-grab"),et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=te(this._map.options.maxBounds);this._offsetLimit=ee(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,u){return s-(s-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;s.x<u.min.x&&(s.x=this._viscousLimit(s.x,u.min.x)),s.y<u.min.y&&(s.y=this._viscousLimit(s.y,u.min.y)),s.x>u.max.x&&(s.x=this._viscousLimit(s.x,u.max.x)),s.y>u.max.y&&(s.y=this._viscousLimit(s.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,u=Math.round(s/2),p=this._initialWorldOffset,y=this._draggable._newPos.x,k=(y-u+p)%s+u-p,T=(y+u+p)%s-u-p,M=Math.abs(k+p)<Math.abs(T+p)?k:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(s){var u=this._map,p=u.options,y=!p.inertia||s.noInertia||this._times.length<2;if(u.fire("dragend",s),y)u.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,M=p.easeLinearity,W=k.multiplyBy(M/T),Z=W.distanceTo([0,0]),q=Math.min(p.inertiaMaxSpeed,Z),re=W.multiplyBy(q/Z),fe=q/(p.inertiaDeceleration*M),ye=re.multiplyBy(-fe/2).round();!ye.x&&!ye.y?u.fire("moveend"):(ye=u._limitOffset(ye,u.options.maxBounds),R(function(){u.panBy(ye,{duration:fe,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});we.addInitHook("addHandler","dragging",Y_),we.mergeOptions({keyboard:!0,keyboardPanDelta:80});var X_=xn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),he(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Le(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,u=document.documentElement,p=s.scrollTop||u.scrollTop,y=s.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(y,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var u=this._panKeys={},p=this.keyCodes,y,k;for(y=0,k=p.left.length;y<k;y++)u[p.left[y]]=[-1*s,0];for(y=0,k=p.right.length;y<k;y++)u[p.right[y]]=[s,0];for(y=0,k=p.down.length;y<k;y++)u[p.down[y]]=[0,s];for(y=0,k=p.up.length;y<k;y++)u[p.up[y]]=[0,-1*s]},_setZoomDelta:function(s){var u=this._zoomKeys={},p=this.keyCodes,y,k;for(y=0,k=p.zoomIn.length;y<k;y++)u[p.zoomIn[y]]=s;for(y=0,k=p.zoomOut.length;y<k;y++)u[p.zoomOut[y]]=-s},_addHooks:function(){he(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var u=s.keyCode,p=this._map,y;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(y=this._panKeys[u],s.shiftKey&&(y=V(y).multiplyBy(3)),p.options.maxBounds&&(y=p._limitOffset(V(y),p.options.maxBounds)),p.options.worldCopyJump){var k=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(y)));p.panTo(k)}else p.panBy(y)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;oa(s)}}});we.addInitHook("addHandler","keyboard",X_),we.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var J_=xn.extend({addHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Le(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var u=w_(s),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var y=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),y),oa(s)},_performZoom:function(){var s=this._map,u=s.getZoom(),p=this._map.options.zoomSnap||0;s._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,T=p?Math.ceil(k/p)*p:k,M=s._limitZoom(u+(this._delta>0?T:-T))-u;this._delta=0,this._startTime=null,M&&(s.options.scrollWheelZoom==="center"?s.setZoom(u+M):s.setZoomAround(this._lastMousePos,u+M))}});we.addInitHook("addHandler","scrollWheelZoom",J_);var MA=600;we.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var Q_=xn.extend({addHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var u=s.touches[0];this._startPos=this._newPos=new F(u.clientX,u.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(he(document,"touchend",Et),he(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),MA),he(document,"touchend touchcancel contextmenu",this._cancel,this),he(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Le(document,"touchend",Et),Le(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Le(document,"touchend touchcancel contextmenu",this._cancel,this),Le(document,"touchmove",this._onMove,this)},_onMove:function(s){var u=s.touches[0];this._newPos=new F(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,u){var p=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});we.addInitHook("addHandler","tapHold",Q_),we.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var eb=xn.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){et(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var u=this._map;if(!(!s.touches||s.touches.length!==2||u._animatingZoom||this._zooming)){var p=u.mouseEventToContainerPoint(s.touches[0]),y=u.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(y)._divideBy(2))),this._startDist=p.distanceTo(y),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend touchcancel",this._onTouchEnd,this),Et(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var u=this._map,p=u.mouseEventToContainerPoint(s.touches[0]),y=u.mouseEventToContainerPoint(s.touches[1]),k=p.distanceTo(y)/this._startDist;if(this._zoom=u.getScaleZoom(k,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&k<1||this._zoom>u.getMaxZoom()&&k>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var T=p._add(y)._divideBy(2)._subtract(this._centerPoint);if(k===1&&T.x===0&&T.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var M=o(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(M,this,!0),Et(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),Le(document,"touchmove",this._onTouchMove,this),Le(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});we.addInitHook("addHandler","touchZoom",eb),we.BoxZoom=q_,we.DoubleClickZoom=G_,we.Drag=Y_,we.Keyboard=X_,we.ScrollWheelZoom=J_,we.TapHold=Q_,we.TouchZoom=eb,r.Bounds=ce,r.Browser=ue,r.CRS=Qe,r.Canvas=H_,r.Circle=xm,r.CircleMarker=Xc,r.Class=D,r.Control=Qr,r.DivIcon=F_,r.DivOverlay=_n,r.DomEvent=XT,r.DomUtil=GT,r.Draggable=mi,r.Evented=G,r.FeatureGroup=In,r.GeoJSON=$n,r.GridLayer=Zo,r.Handler=xn,r.Icon=ss,r.ImageOverlay=ru,r.LatLng=ae,r.LatLngBounds=X,r.Layer=en,r.LayerGroup=as,r.LineUtil=uA,r.Map=we,r.Marker=Yc,r.Mixin=iA,r.Path=pi,r.Point=F,r.PolyUtil=aA,r.Polygon=os,r.Polyline=Rn,r.Popup=nu,r.PosAnimation=j_,r.Projection=dA,r.Rectangle=V_,r.Renderer=zn,r.SVG=qo,r.SVGOverlay=B_,r.TileLayer=cs,r.Tooltip=iu,r.Transformation=be,r.Util=I,r.VideoOverlay=z_,r.bind=o,r.bounds=ee,r.canvas=K_,r.circle=xA,r.circleMarker=yA,r.control=Wo,r.divIcon=CA,r.extend=i,r.featureGroup=pA,r.geoJSON=$_,r.geoJson=wA,r.gridLayer=EA,r.icon=gA,r.imageOverlay=jA,r.latLng=oe,r.latLngBounds=te,r.layerGroup=mA,r.map=JT,r.marker=vA,r.point=V,r.polygon=bA,r.polyline=_A,r.popup=kA,r.rectangle=AA,r.setOptions=w,r.stamp=d,r.svg=Z_,r.svgOverlay=PA,r.tileLayer=U_,r.tooltip=NA,r.transformation=J,r.version=n,r.videoOverlay=SA;var LA=window.L;r.noConflict=function(){return window.L=LA,this},window.L=r})})(wv,wv.exports);var ta=wv.exports;const bf=Dn(ta);function Mo(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function Bh(e,t){return t==null?function(n,i){const a=_.useRef();return a.current||(a.current=e(n,i)),a}:function(n,i){const a=_.useRef();a.current||(a.current=e(n,i));const o=_.useRef(n),{instance:c}=a.current;return _.useEffect(function(){o.current!==n&&(t(c,n,o.current),o.current=n)},[c,n,i]),a}}function ZO(e,t){_.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function VO(e){return function(r){const n=$h(),i=e(zh(r,n),n);return FO(n.map,r.attribution),Fx(i.current,r.eventHandlers),ZO(i.current,n),i}}function mZ(e,t){const r=_.useRef();_.useEffect(function(){if(t.pathOptions!==r.current){const i=t.pathOptions??{};e.instance.setStyle(i),r.current=i}},[e,t])}function pZ(e){return function(r){const n=$h(),i=e(zh(r,n),n);return Fx(i.current,r.eventHandlers),ZO(i.current,n),mZ(i.current,r),i}}function gZ(e,t){const r=Bh(e,t),n=VO(r);return KO(n)}function vZ(e,t){const r=Bh(e),n=hZ(r,t);return dZ(n)}function Ux(e,t){const r=Bh(e,t),n=pZ(r);return KO(n)}function yZ(e,t){const r=Bh(e,t),n=VO(r);return fZ(n)}function xZ(e,t,r){const{opacity:n,zIndex:i}=t;n!=null&&n!==r.opacity&&e.setOpacity(n),i!=null&&i!==r.zIndex&&e.setZIndex(i)}function Wx(){return $h().map}function Hx(e){const t=Wx();return _.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const _Z=Ux(function({center:t,children:r,...n},i){const a=new ta.Circle(t,n);return Mo(a,Rh(i,{overlayContainer:a}))},UO),qO=Ux(function({center:t,children:r,...n},i){const a=new ta.CircleMarker(t,n);return Mo(a,Rh(i,{overlayContainer:a}))},UO);function jv(){return jv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jv.apply(this,arguments)}function bZ({bounds:e,boundsOptions:t,center:r,children:n,className:i,id:a,placeholder:o,style:c,whenReady:d,zoom:f,...h},m){const[g]=_.useState({className:i,id:a,style:c}),[v,j]=_.useState(null);_.useImperativeHandle(m,()=>(v==null?void 0:v.map)??null,[v]);const w=_.useCallback(b=>{if(b!==null&&v===null){const x=new ta.Map(b,h);r!=null&&f!=null?x.setView(r,f):e!=null&&x.fitBounds(e,t),d!=null&&x.whenReady(d),j(uZ(x))}},[]);_.useEffect(()=>()=>{v==null||v.map.remove()},[v]);const P=v?od.createElement(HO,{value:v},n):o??null;return od.createElement("div",jv({},g,{ref:w}),P)}const Fh=_.forwardRef(bZ),wf=gZ(function({position:t,...r},n){const i=new ta.Marker(t,r);return Mo(i,Rh(n,{overlayContainer:i}))},function(t,r,n){r.position!==n.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==n.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==n.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==n.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==n.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),jf=Ux(function({positions:t,...r},n){const i=new ta.Polygon(t,r);return Mo(i,Rh(n,{overlayContainer:i}))},function(t,r,n){r.positions!==n.positions&&t.setLatLngs(r.positions)}),_l=vZ(function(t,r){const n=new ta.Popup(t,r.overlayContainer);return Mo(n,r)},function(t,r,{position:n},i){_.useEffect(function(){const{instance:o}=t;function c(f){f.popup===o&&(o.update(),i(!0))}function d(f){f.popup===o&&i(!1)}return r.map.on({popupopen:c,popupclose:d}),r.overlayContainer==null?(n!=null&&o.setLatLng(n),o.openOn(r.map)):r.overlayContainer.bindPopup(o),function(){var h;r.map.off({popupopen:c,popupclose:d}),(h=r.overlayContainer)==null||h.unbindPopup(),r.map.removeLayer(o)}},[t,r,i,n])}),Uh=yZ(function({url:t,...r},n){const i=new ta.TileLayer(t,zh(r,n));return Mo(i,n)},function(t,r,n){xZ(t,r,n);const{url:i}=r;i!=null&&i!==n.url&&t.setUrl(i)}),wZ=({patient:e,onClose:t})=>{const{user:r}=Ye(),[n,i]=_.useState(!1),[a,o]=_.useState({name:"",doe:"",gender:"male",address:"",province:"",district:"",subdistrict:"",addressLine:"",phone_number:"",caregivers_contact:"",caregiver_name:"",caregiver_phone:"",assigned_doctor:"",last_record_date:"",today_date:new Date().toISOString().split("T")[0],assigned_vhv_name:"",medical_record_number:"",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"",doctor_diagnosed:"",medications_history:"",food_allergies:"",medication_allergies:"",height:"",weight:"",bmi:"",temperature:"",pulse:"",blood_pressure:"",diabetes:"",mental_health_status:"",other_symptoms:"",pregnancy_details:"",smoker:!1,doctors_note:"",photo_url:"",lat:void 0,lng:void 0,patient_email:""}),[c,d]=_.useState([]),[f,h]=_.useState([]);_.useEffect(()=>{var b,x,S;(async()=>{const{data:O}=await Ga(),N=(O||[]).filter(E=>E.role==="doctor").map(E=>({id:E.id,full_name:E.full_name}));d(N);const C=await Hf();h(C.data||[])})(),e&&o({name:e.name,doe:e.doe,gender:e.gender,address:e.address,province:e.address.split(",").map(O=>O.trim()).slice(-1)[0]||"",district:e.address.split(",").map(O=>O.trim()).slice(-2,-1)[0]||"",subdistrict:e.address.split(",").map(O=>O.trim()).slice(-3,-2)[0]||"",addressLine:e.address.split(",").slice(0,-3).join(", ").trim(),phone_number:e.phone_number||"",caregivers_contact:e.caregivers_contact,caregiver_name:((b=e.caregivers_contact.split("-")[0])==null?void 0:b.trim())||"",caregiver_phone:((x=e.caregivers_contact.split("-")[1])==null?void 0:x.trim())||"",assigned_doctor:e.assigned_doctor,last_record_date:e.last_record_date,today_date:e.today_date,assigned_vhv_name:e.assigned_vhv_name,medical_record_number:e.medical_record_number,patient_categories:e.patient_categories,personal_health_history:e.personal_health_history,doctor_diagnosed:e.doctor_diagnosed,medications_history:e.medications_history,food_allergies:e.food_allergies,medication_allergies:e.medication_allergies,height:e.height,weight:e.weight,bmi:e.bmi,temperature:e.temperature,pulse:e.pulse,blood_pressure:e.blood_pressure,diabetes:e.diabetes,mental_health_status:e.mental_health_status,other_symptoms:e.other_symptoms,pregnancy_details:e.pregnancy_details,smoker:e.smoker,doctors_note:e.doctors_note,lat:e.lat,lng:e.lng,patient_email:e.user_id&&((S=ro(e.user_id))==null?void 0:S.email)||""})},[e]),_.useEffect(()=>{e||(async()=>{const b=await U2();o(x=>({...x,medical_record_number:b}))})()},[e]),_.useEffect(()=>{const b=parseFloat(a.height),x=parseFloat(a.weight);if(b>0&&x>0&&!Number.isNaN(b)&&!Number.isNaN(x)){const S=x/Math.pow(b/100,2);o(O=>({...O,bmi:S.toFixed(1)}))}},[a.height,a.weight]);const m=async b=>{b.preventDefault(),i(!0);try{const x=[a.addressLine,a.subdistrict,a.district,a.province].filter(Boolean).join(", "),S=[a.caregiver_name,a.caregiver_phone].filter(Boolean).join(" - "),O={name:a.name,doe:a.doe,gender:a.gender,address:x||a.address,phone_number:a.phone_number,caregivers_contact:S||a.caregivers_contact,assigned_doctor:a.assigned_doctor,last_record_date:a.last_record_date,today_date:a.today_date,assigned_vhv_name:a.assigned_vhv_name,medical_record_number:a.medical_record_number,patient_categories:a.patient_categories,personal_health_history:a.personal_health_history,doctor_diagnosed:a.doctor_diagnosed,medications_history:a.medications_history,food_allergies:a.food_allergies,medication_allergies:a.medication_allergies,height:a.height,weight:a.weight,bmi:a.bmi,temperature:a.temperature,pulse:a.pulse,blood_pressure:a.blood_pressure,diabetes:a.diabetes,mental_health_status:a.mental_health_status,other_symptoms:a.other_symptoms,pregnancy_details:a.pregnancy_details,smoker:a.smoker,doctors_note:a.doctors_note,lat:a.lat,lng:a.lng,photo_url:a.photo_url};if(e){let N={...O};if((!e.user_id||!ro(e.user_id))&&a.patient_email){const{data:E}=await mw(a.patient_email,a.name);E!=null&&E.id&&(N.user_id=E.id)}const{error:C}=await JD(e.id,N);if(C){console.error("Error updating patient:",C);return}}else{const{data:N}=await mw(a.patient_email,a.name),{error:C}=await XD({...O,created_by:(r==null?void 0:r.id)||"",user_id:(N==null?void 0:N.id)||""});if(C){console.error("Error creating patient:",C);return}}t()}catch(x){console.error("Error saving patient:",x)}finally{i(!1)}},g=b=>{const{name:x,value:S,type:O}=b.target;if(O==="checkbox"){const N=b.target;if(x.startsWith("patient_categories.")){const C=x.split(".")[1];o({...a,patient_categories:{...a.patient_categories,[C]:N.checked}})}else o({...a,[x]:N.checked})}else o({...a,[x]:S})},v=!1,j=_.useMemo(()=>a.lat&&a.lng?[a.lat,a.lng]:[13.793,100.321],[a.lat,a.lng]),w=_.useMemo(()=>bf.divIcon({className:"patient-pin",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#a21caf;border:2px solid #fff;box-shadow:0 0 0 3px rgba(162,28,175,0.25);color:#fff;font-size:14px;line-height:1">👤</div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),[]),P=()=>(Hx({click(b){o(x=>({...x,lat:b.latlng.lat,lng:b.latlng.lng}))}}),null);return l.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[l.jsx("div",{className:"border-b border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:l.jsx(Wf,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:l.jsx(nt,{className:"w-6 h-6 text-blue-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Patient":"New Patient"})]})]})}),l.jsxs("form",{onSubmit:m,className:"p-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Basic Information"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),l.jsx("input",{type:"text",name:"name",required:!0,value:a.name,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Entry (DOE) *"}),l.jsx("input",{type:"date",name:"doe",required:!0,value:a.doe,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),l.jsxs("select",{name:"gender",required:!0,value:a.gender,onChange:g,disabled:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",children:[l.jsx("option",{value:"male",children:"Male"}),l.jsx("option",{value:"female",children:"Female"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Record Number (auto)"}),l.jsx("input",{type:"text",name:"medical_record_number",required:!0,value:a.medical_record_number,onChange:g,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province"}),l.jsxs("select",{name:"province",value:a.province,onChange:g,disabled:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{value:"Nakhon Pathom",children:"Nakhon Pathom"}),l.jsx("option",{value:"Bangkok",children:"Bangkok"}),l.jsx("option",{value:"Nonthaburi",children:"Nonthaburi"}),l.jsx("option",{value:"Pathum Thani",children:"Pathum Thani"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District/ Area"}),l.jsxs("select",{name:"district",value:a.district,onChange:g,disabled:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{value:"Phutthamonthon",children:"Phutthamonthon"}),l.jsx("option",{value:"Salaya",children:"Salaya"}),l.jsx("option",{value:"Bang Khae",children:"Bang Khae"}),l.jsx("option",{value:"Mueang",children:"Mueang"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-District/ Sub-Area"}),l.jsxs("select",{name:"subdistrict",value:a.subdistrict,onChange:g,disabled:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{value:"Phra Khanong Tai",children:"Phra Khanong Tai"}),l.jsx("option",{value:"Maha Sawat",children:"Maha Sawat"}),l.jsx("option",{value:"Salaya",children:"Salaya"})]})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),l.jsx("input",{type:"text",name:"addressLine",placeholder:"House number, street, village",value:a.addressLine,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"file",accept:"image/*",onChange:b=>{var O;const x=(O=b.target.files)==null?void 0:O[0];if(!x)return;const S=new FileReader;S.onload=()=>o(N=>({...N,photo_url:String(S.result)})),S.readAsDataURL(x)},disabled:v}),l.jsx("span",{className:"text-sm text-gray-500",children:"or"}),l.jsx("input",{type:"text",name:"photo_url",placeholder:"Image URL",value:a.photo_url||"",onChange:g,readOnly:v,className:"flex-1 px-3 py-2 border rounded"})]}),a.photo_url&&l.jsx("img",{src:a.photo_url,alt:"preview",className:"mt-2 w-20 h-20 rounded-full object-cover"})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Email (for login)"}),l.jsx("input",{type:"email",name:"patient_email",value:a.patient_email,onChange:g,readOnly:v,required:!e,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caregiver's Name"}),l.jsx("input",{type:"text",name:"caregiver_name",value:a.caregiver_name,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caregiver's Contact Number"}),l.jsx("input",{type:"text",name:"caregiver_phone",value:a.caregiver_phone,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),l.jsx("input",{type:"text",name:"phone_number",value:a.phone_number,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Doctor *"}),l.jsxs("select",{name:"assigned_doctor",required:!0,value:a.assigned_doctor,onChange:g,disabled:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[l.jsx("option",{value:"",children:"Select"}),c.map(b=>l.jsx("option",{value:b.full_name,children:b.full_name},b.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned VHV"}),l.jsxs("select",{name:"assigned_vhv_name",value:a.assigned_vhv_name,onChange:g,disabled:!a.subdistrict,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[l.jsx("option",{value:"",children:a.subdistrict?"Select":"Select sub-district first"}),(()=>{const b=C=>{if(!C)return"";const E=C.split(",").map(A=>A.trim()).filter(Boolean);return E.length>=3?E[E.length-3]:""},x=a.subdistrict,O=(f||[]).filter(C=>b(C.address)===x).map(C=>{var E;return{id:C.user_id||C.id,name:((E=C.user)==null?void 0:E.full_name)||C.name}}),N=new Set(O.map(C=>C.name));return a.assigned_vhv_name&&!N.has(a.assigned_vhv_name)&&O.unshift({id:"current",name:a.assigned_vhv_name}),O.map(C=>l.jsx("option",{value:C.name,children:C.name},C.id+C.name))})()]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Today's Date"}),l.jsx("input",{type:"date",name:"today_date",value:a.today_date,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Record Date"}),l.jsx("input",{type:"date",name:"last_record_date",value:a.last_record_date,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Location"}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Click on the map to set the patient's exact location."}),l.jsx("div",{className:"h-72 w-full border border-gray-200 rounded-lg overflow-hidden",children:l.jsxs(Fh,{center:j,zoom:14,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[l.jsx(Uh,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),l.jsx(P,{}),typeof a.lat=="number"&&typeof a.lng=="number"&&l.jsx(wf,{position:[a.lat,a.lng],icon:w})]})}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700",children:"Latitude"}),l.jsx("input",{type:"number",step:"any",name:"lat",value:a.lat??"",onChange:g,className:"w-full px-3 py-2 border rounded"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700",children:"Longitude"}),l.jsx("input",{type:"number",step:"any",name:"lng",value:a.lng??"",onChange:g,className:"w-full px-3 py-2 border rounded"})]})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Medical Information"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Categories"}),l.jsxs("div",{className:"flex space-x-6",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",name:"patient_categories.critical",checked:a.patient_categories.critical,onChange:g,disabled:v,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Critical"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",name:"patient_categories.elderly",checked:a.patient_categories.elderly,onChange:g,disabled:v,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Elderly"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",name:"patient_categories.pregnant",checked:a.patient_categories.pregnant,onChange:g,disabled:v,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Pregnant"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personal Health History"}),l.jsx("textarea",{name:"personal_health_history",rows:3,value:a.personal_health_history,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor Diagnosed"}),l.jsx("textarea",{name:"doctor_diagnosed",rows:3,value:a.doctor_diagnosed,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medications History"}),l.jsx("textarea",{name:"medications_history",rows:3,value:a.medications_history,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Food Allergies"}),l.jsx("input",{type:"text",name:"food_allergies",value:a.food_allergies,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medication Allergies"}),l.jsx("input",{type:"text",name:"medication_allergies",value:a.medication_allergies,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Height"}),l.jsx("input",{type:"text",name:"height",value:a.height,onChange:g,readOnly:v,placeholder:"e.g., 175 cm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight"}),l.jsx("input",{type:"text",name:"weight",value:a.weight,onChange:g,readOnly:v,placeholder:"e.g., 70 kg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BMI"}),l.jsx("input",{type:"text",name:"bmi",value:a.bmi,onChange:g,readOnly:!0,placeholder:"Auto-calculated",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),l.jsx("input",{type:"text",name:"temperature",value:a.temperature,onChange:g,readOnly:v,placeholder:"e.g., 98.6°F",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pulse"}),l.jsx("input",{type:"text",name:"pulse",value:a.pulse,onChange:g,readOnly:v,placeholder:"e.g., 72 bpm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Pressure"}),l.jsx("input",{type:"text",name:"blood_pressure",value:a.blood_pressure,onChange:g,readOnly:v,placeholder:"e.g., 120/80 mmHg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diabetes"}),l.jsx("input",{type:"text",name:"diabetes",value:a.diabetes,onChange:g,readOnly:v,placeholder:"e.g., Type 2, HbA1c: 7.2%",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mental Health Status"}),l.jsx("div",{className:"flex flex-wrap gap-4",children:["Normal","Anxiety","Depression","Stress","Other"].map(b=>{const x=(a.mental_health_status||"").split(",").map(S=>S.trim()).includes(b);return l.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[l.jsx("input",{type:"checkbox",checked:x,onChange:S=>{const O=new Set((a.mental_health_status||"").split(",").map(N=>N.trim()).filter(Boolean));S.target.checked?O.add(b):O.delete(b),o(N=>({...N,mental_health_status:Array.from(O).join(", ")}))},disabled:v,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),b]},b)})})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Any Other Symptoms"}),l.jsx("textarea",{name:"other_symptoms",rows:2,value:a.other_symptoms,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pregnancy Details"}),l.jsx("textarea",{name:"pregnancy_details",rows:3,value:a.pregnancy_details,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",placeholder:"Include gestational age, due date, complications, etc."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Smoker"}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"radio",name:"smoker",checked:a.smoker===!0,onChange:()=>o(b=>({...b,smoker:!0})),disabled:v}),"Yes"]}),l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"radio",name:"smoker",checked:a.smoker===!1,onChange:()=>o(b=>({...b,smoker:!1})),disabled:v}),"No"]})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor's Notes"}),l.jsx("textarea",{name:"doctors_note",rows:4,value:a.doctors_note,onChange:g,readOnly:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",placeholder:"Doctor's observations, recommendations, and notes..."})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[l.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:n,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(wo,{className:"w-5 h-5"}),l.jsx("span",{children:e?"Update Patient":"Create Patient"})]})})]})]})]})})},jZ=()=>{const{user:e}=Ye(),[t,r]=_.useState([]),[n,i]=_.useState(!0),[a,o]=_.useState(""),[c,d]=_.useState(!1),[f,h]=_.useState(null),[m,g]=_.useState(!1),[v,j]=_.useState(""),[w,P]=_.useState("");_.useEffect(()=>{b(),(async()=>{var G;if((e==null?void 0:e.role)!=="volunteer")return;const{data:$}=await Hf(),z=($||[]).find(F=>F.user_id===e.id);if(z){j(((G=z.user)==null?void 0:G.full_name)||z.name);const F=(z.address||"").split(",").map(V=>V.trim()).filter(Boolean),Y=F.length>=3?F[F.length-3]:"";P(Y)}})()},[]);const b=async()=>{try{const{data:$,error:z}=await jo();z?console.error("Error fetching patients:",z):r(($||[]).map(G=>({...G,created_by_user:G.created_by_user})))}catch($){console.error("Error fetching patients:",$)}finally{i(!1)}},x=_.useMemo(()=>{const $=a.toLowerCase();let z=t;if((e==null?void 0:e.role)==="volunteer"&&w){const G=F=>{if(!F)return"";const Y=F.split(",").map(V=>V.trim()).filter(Boolean);return Y.length>=3?Y[Y.length-3]:""};z=z.filter(F=>G(F.address)===w)}return(e==null?void 0:e.role)==="volunteer"&&m&&v&&(z=z.filter(G=>(G.assigned_vhv_name||"").toLowerCase().includes(v.toLowerCase()))),z.filter(G=>{var F,Y;return G.name.toLowerCase().includes($)||G.medical_record_number.toLowerCase().includes($)||((F=G.assigned_vhv_name)==null?void 0:F.toLowerCase().includes($))||((Y=G.assigned_doctor)==null?void 0:Y.toLowerCase().includes($))||G.doctor_diagnosed.toLowerCase().includes($)})},[t,a,e==null?void 0:e.role,m,v,w]),[S,O]=_.useState(1),N=10,C=Math.max(1,Math.ceil(x.length/N)),E=_.useMemo(()=>{const $=(S-1)*N;return x.slice($,$+N)},[x,S]);_.useEffect(()=>{O(1)},[a]);const A=$=>$.patient_categories.critical?"Critical":$.patient_categories.elderly?"Elderly":$.patient_categories.pregnant?"Pregnant":"Normal",H=$=>{try{if(!$.last_record_date)return"New";const z=new Date($.last_record_date),G=new Date;return z.toDateString()===G.toDateString()?"New":"Follow-Up"}catch{return"Follow-Up"}},B=$=>{const z=($.address||"").split(",").map(G=>G.trim()).filter(Boolean);return z.length>=3?z[z.length-3]:z.length>=2?z[z.length-2]:z.length>=1?z[z.length-1]:""},R=$=>{h($),d(!0)},U=()=>{d(!1),h(null),b()};if(n)return l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})});if(c)return l.jsx(wZ,{patient:f,onClose:U});const I=(e==null?void 0:e.role)==="doctor",D=(e==null?void 0:e.role)==="volunteer";return I||D?l.jsxs("div",{className:"py-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"relative w-full max-w-xl",children:[l.jsx(za,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search",value:a,onChange:$=>o($.target.value),className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"ml-3 flex items-center gap-3",children:[D&&l.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[l.jsx("input",{type:"checkbox",checked:m,onChange:$=>g($.target.checked)}),"Assigned to me"]}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer")&&l.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[l.jsx(An,{className:"w-4 h-4"}),l.jsx("span",{children:"create new patient"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-sky-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Patient ID"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Sub District/Sub-Area"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Assigned VHV"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[E.map($=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:$.medical_record_number}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:$.name}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${A($)==="Critical"?"bg-red-100 text-red-700":A($)==="Elderly"?"bg-orange-100 text-orange-700":A($)==="Pregnant"?"bg-pink-100 text-pink-700":"bg-gray-100 text-gray-700"}`,children:A($)})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:H($)}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B($)}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:$.assigned_vhv_name||"-"}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsxs("button",{onClick:()=>R($),className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[l.jsx($2,{className:"w-4 h-4"}),"View Detail"]})})]},$.id)),E.length===0&&l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:7,children:"No patients found."})})]})]})}),l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200",children:[l.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Math.min(S*N,x.length)," of ",x.length," patients"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>O($=>Math.max(1,$-1)),disabled:S===1,"aria-label":"Previous page",children:"<"}),l.jsx("button",{className:`px-3 py-1 rounded ${S===1?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>O(1),children:"1"}),C>2&&l.jsxs(l.Fragment,{children:[S>2&&l.jsx("span",{className:"px-1",children:"…"}),S>1&&S<C&&l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200",children:S}),S<C-1&&l.jsx("span",{className:"px-1",children:"…"})]}),C>1&&l.jsx("button",{className:`px-3 py-1 rounded ${S===C?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>O(C),children:C}),l.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>O($=>Math.min(C,$+1)),disabled:S===C,"aria-label":"Next page",children:">"})]})]})]})]}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Patient Management"}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer")&&l.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[l.jsx(An,{className:"w-5 h-5"}),l.jsx("span",{children:"Add Patient"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(za,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search patients by name, MRN, or condition...",value:a,onChange:$=>o($.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map($=>{var z,G;return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all cursor-pointer",onClick:()=>R($),children:[l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:l.jsx(nt,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:$.name}),l.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["MRN: ",$.medical_record_number]}),l.jsx("p",{className:"text-sm text-gray-600 truncate",children:$.doctor_diagnosed})]})]}),l.jsxs("div",{className:"mt-4 space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[l.jsx(Pn,{className:"w-4 h-4"}),l.jsxs("span",{children:["Gender: ",$.gender]})]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[l.jsx(Ld,{className:"w-4 h-4"}),l.jsx("span",{children:$.caregivers_contact})]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[l.jsx(nt,{className:"w-4 h-4"}),l.jsxs("span",{children:["Dr: ",$.assigned_doctor]})]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-3",children:["Created by: ",(z=$.created_by_user)==null?void 0:z.full_name," (",(G=$.created_by_user)==null?void 0:G.role,")"]}),($.patient_categories.critical||$.patient_categories.elderly||$.patient_categories.pregnant)&&l.jsxs("div",{className:"flex space-x-1 mt-2",children:[$.patient_categories.critical&&l.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Critical"}),$.patient_categories.elderly&&l.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:"Elderly"}),$.patient_categories.pregnant&&l.jsx("span",{className:"px-2 py-1 bg-pink-100 text-pink-800 text-xs rounded-full",children:"Pregnant"})]})]})]},$.id)})}),x.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx(nt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:a?"No patients found matching your search.":"No patients found."})]})]})},SZ=()=>{var o,c;const{user:e}=Ye(),[t,r]=_.useState(null),[n,i]=_.useState(!0);_.useEffect(()=>{a()},[e]);const a=async()=>{if(e)try{const{data:d,error:f}=await bc(e.id);f&&f.code!=="PGRST116"?console.error("Error fetching patient profile:",f):r(d)}catch(d){console.error("Error fetching patient profile:",d)}finally{i(!1)}};return n?l.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t?l.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[l.jsx("div",{className:"border-b border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:l.jsx(nt,{className:"w-8 h-8 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),l.jsxs("p",{className:"text-gray-600",children:["Medical Record: ",t.medical_record_number]})]})]})}),l.jsxs("div",{className:"p-6",children:[(t.patient_categories.critical||t.patient_categories.elderly||t.patient_categories.pregnant)&&l.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Patient Categories"}),l.jsxs("div",{className:"flex space-x-2",children:[t.patient_categories.critical&&l.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:"Critical"}),t.patient_categories.elderly&&l.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 text-sm rounded-full",children:"Elderly"}),t.patient_categories.pregnant&&l.jsx("span",{className:"px-3 py-1 bg-pink-100 text-pink-800 text-sm rounded-full",children:"Pregnant"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[l.jsx(nt,{className:"w-5 h-5"}),l.jsx("span",{children:"Basic Information"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Pn,{className:"w-5 h-5 text-gray-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Gender"}),l.jsx("p",{className:"text-gray-900 capitalize",children:t.gender})]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Ti,{className:"w-5 h-5 text-gray-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Address"}),l.jsx("p",{className:"text-gray-900",children:t.address})]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Ld,{className:"w-5 h-5 text-gray-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Caregiver's Contact"}),l.jsx("p",{className:"text-gray-900",children:t.caregivers_contact})]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(nt,{className:"w-5 h-5 text-gray-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Assigned Doctor"}),l.jsx("p",{className:"text-gray-900",children:t.assigned_doctor})]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(nt,{className:"w-5 h-5 text-gray-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Assigned VHV"}),l.jsx("p",{className:"text-gray-900",children:t.assigned_vhv_name||"Not assigned"})]})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[l.jsx(En,{className:"w-5 h-5"}),l.jsx("span",{children:"Vital Signs"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Height / Weight / BMI"}),l.jsxs("p",{className:"text-gray-900",children:[t.height," / ",t.weight," / ",t.bmi]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Temperature"}),l.jsx("p",{className:"text-gray-900",children:t.temperature})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Pulse"}),l.jsx("p",{className:"text-gray-900",children:t.pulse})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Blood Pressure"}),l.jsx("p",{className:"text-gray-900",children:t.blood_pressure})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Diabetes Status"}),l.jsx("p",{className:"text-gray-900",children:t.diabetes||"None"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Smoker"}),l.jsx("p",{className:"text-gray-900",children:t.smoker?"Yes":"No"})]})]})]})]}),t.personal_health_history&&l.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[l.jsxs("h4",{className:"text-lg font-semibold text-blue-800 flex items-center space-x-2 mb-3",children:[l.jsx(Ti,{className:"w-5 h-5"}),l.jsx("span",{children:"Personal Health History"})]}),l.jsx("p",{className:"text-blue-700",children:t.personal_health_history})]}),t.doctor_diagnosed&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[l.jsxs("h4",{className:"text-lg font-semibold text-green-800 flex items-center space-x-2 mb-3",children:[l.jsx(Ti,{className:"w-5 h-5"}),l.jsx("span",{children:"Doctor Diagnosed"})]}),l.jsx("p",{className:"text-green-700",children:t.doctor_diagnosed})]}),(t.food_allergies||t.medication_allergies)&&l.jsxs("div",{className:"mt-8 p-4 bg-red-50 rounded-lg border border-red-200",children:[l.jsxs("h4",{className:"text-lg font-semibold text-red-800 flex items-center space-x-2 mb-3",children:[l.jsx(Fi,{className:"w-5 h-5"}),l.jsx("span",{children:"Allergies"})]}),t.food_allergies&&l.jsxs("div",{className:"mb-2",children:[l.jsx("p",{className:"text-sm font-medium text-red-800",children:"Food Allergies:"}),l.jsx("p",{className:"text-red-700",children:t.food_allergies})]}),t.medication_allergies&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-red-800",children:"Medication Allergies:"}),l.jsx("p",{className:"text-red-700",children:t.medication_allergies})]})]}),t.medications_history&&l.jsxs("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[l.jsxs("h4",{className:"text-lg font-semibold text-purple-800 flex items-center space-x-2 mb-3",children:[l.jsx(WD,{className:"w-5 h-5"}),l.jsx("span",{children:"Medications History"})]}),l.jsx("p",{className:"text-purple-700",children:t.medications_history})]}),t.mental_health_status&&l.jsxs("div",{className:"mt-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[l.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 flex items-center space-x-2 mb-3",children:[l.jsx(En,{className:"w-5 h-5"}),l.jsx("span",{children:"Mental Health Status"})]}),l.jsx("p",{className:"text-indigo-700",children:t.mental_health_status})]}),t.other_symptoms&&l.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[l.jsxs("h4",{className:"text-lg font-semibold text-yellow-800 flex items-center space-x-2 mb-3",children:[l.jsx(Fi,{className:"w-5 h-5"}),l.jsx("span",{children:"Other Symptoms"})]}),l.jsx("p",{className:"text-yellow-700",children:t.other_symptoms})]}),t.pregnancy_details&&l.jsxs("div",{className:"mt-6 p-4 bg-pink-50 rounded-lg border border-pink-200",children:[l.jsxs("h4",{className:"text-lg font-semibold text-pink-800 flex items-center space-x-2 mb-3",children:[l.jsx(En,{className:"w-5 h-5"}),l.jsx("span",{children:"Pregnancy Details"})]}),l.jsx("p",{className:"text-pink-700",children:t.pregnancy_details})]}),t.doctors_note&&l.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center space-x-2 mb-3",children:[l.jsx(Ti,{className:"w-5 h-5"}),l.jsx("span",{children:"Doctor's Notes"})]}),l.jsx("p",{className:"text-gray-700",children:t.doctors_note})]}),l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 text-sm text-gray-500",children:[l.jsxs("p",{children:["Date of Entry: ",new Date(t.doe).toLocaleDateString()]}),l.jsxs("p",{children:["Last Record Date: ",t.last_record_date?new Date(t.last_record_date).toLocaleDateString():"N/A"]}),l.jsxs("p",{children:["Profile created by: ",(o=t.created_by_user)==null?void 0:o.full_name," (",(c=t.created_by_user)==null?void 0:c.role,")"]}),l.jsxs("p",{children:["Created: ",new Date(t.created_at).toLocaleDateString()]}),t.updated_at&&l.jsxs("p",{children:["Last updated: ",new Date(t.updated_at).toLocaleDateString()]})]})]})]})}):l.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[l.jsx(nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Profile Found"}),l.jsx("p",{className:"text-gray-600",children:"Your medical profile hasn't been created yet. Please contact your healthcare provider to set up your profile."})]})})},PZ=()=>{var G,F,Y,V,ce,ee;const{user:e}=Ye(),[t,r]=_.useState([]),[n,i]=_.useState([]),[a,o]=_.useState(null),[c,d]=_.useState(""),[f,h]=_.useState(!1),[m,g]=_.useState(""),[v,j]=_.useState(""),[w,P]=_.useState(!0),[b,x]=_.useState(""),[S,O]=_.useState(null),[N,C]=_.useState(null);_.useEffect(()=>{E(),A()},[e]);const E=async()=>{if(e)try{const{data:X,error:te}=await eI(e.id);te?console.error("Error fetching messages:",te):r(X||[])}catch(X){console.error("Error fetching messages:",X)}finally{P(!1)}},A=async()=>{try{const{data:X,error:te}=await Ga(e==null?void 0:e.id);te?console.error("Error fetching users:",te):i(X||[])}catch(X){console.error("Error fetching users:",X)}},H=()=>{const X=new Map;return t.forEach(te=>{const ae=te.sender_id===(e==null?void 0:e.id)?te.recipient_id:te.sender_id,oe=te.sender_id===(e==null?void 0:e.id)?te.recipient:te.sender;X.has(ae)||X.set(ae,{userId:ae,user:oe,lastMessage:te,messages:[]}),X.get(ae).messages.push(te)}),Array.from(X.values()).sort((te,ae)=>new Date(ae.lastMessage.created_at).getTime()-new Date(te.lastMessage.created_at).getTime())},B=X=>{var ae;const te=(ae=X.target.files)==null?void 0:ae[0];if(te){if(te.size>5*1024*1024){alert("Image size must be less than 5MB");return}if(!te.type.startsWith("image/")){alert("Please select an image file");return}O(te);const oe=new FileReader;oe.onload=Qe=>{var fr;C((fr=Qe.target)==null?void 0:fr.result)},oe.readAsDataURL(te)}},R=()=>{O(null),C(null)},U=async()=>{if(!c.trim()&&!S)return;const X=f?m:a;if(!X)return;let te,ae;S&&(te=N,ae=S.name);try{const{data:oe,error:Qe}=await Ay({sender_id:(e==null?void 0:e.id)||"",recipient_id:X,subject:f?v:"Re: Conversation",content:c||(S?`[Image: ${S.name}]`:""),image_url:te,image_name:ae,is_read:!1});Qe?(console.error("Error sending message:",Qe),alert("Failed to send message. Please try again.")):(d(""),R(),f&&(j(""),h(!1),g(""),x("")),await E())}catch(oe){console.error("Error sending message:",oe),alert("Failed to send message. Please try again.")}},I=async X=>{try{await tI(X,(e==null?void 0:e.id)||"")}catch(te){console.error("Error marking message as read:",te)}},D=H(),$=a?((G=D.find(X=>X.userId===a))==null?void 0:G.messages)||[]:[],z=n.filter(X=>X.full_name.toLowerCase().includes(b.toLowerCase())||X.email.toLowerCase().includes(b.toLowerCase()));return w?l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Messages"}),l.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[l.jsx(An,{className:"w-5 h-5"}),l.jsx("span",{children:"New Message"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:l.jsxs("div",{className:"flex h-[600px]",children:[l.jsxs("div",{className:"w-1/3 border-r border-gray-200",children:[l.jsx("div",{className:"p-4 border-b border-gray-200",children:l.jsx("h3",{className:"font-semibold text-gray-900",children:"Conversations"})}),l.jsx("div",{className:"overflow-y-auto",style:{height:"calc(600px - 60px)"},children:D.map(X=>{var te,ae;return l.jsx("div",{onClick:()=>{o(X.userId),h(!1),X.messages.filter(oe=>oe.recipient_id===(e==null?void 0:e.id)&&!oe.is_read).forEach(oe=>I(oe.id))},className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ${a===X.userId?"bg-blue-50":""}`,children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:l.jsx(nt,{className:"w-5 h-5 text-gray-600"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-gray-900 truncate",children:(te=X.user)==null?void 0:te.full_name}),l.jsx("p",{className:"text-sm text-gray-600 capitalize",children:(ae=X.user)==null?void 0:ae.role}),l.jsx("p",{className:"text-xs text-gray-500 truncate",children:X.lastMessage.content})]}),X.messages.some(oe=>oe.recipient_id===(e==null?void 0:e.id)&&!oe.is_read)&&l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})},X.userId)})})]}),l.jsx("div",{className:"flex-1",children:f?l.jsxs("div",{className:"p-4 h-full flex flex-col",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"New Message"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recipient"}),l.jsxs("div",{className:"relative",children:[l.jsx(za,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search users...",value:b,onChange:X=>x(X.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),l.jsx("div",{className:"mt-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg",children:z.map(X=>l.jsxs("div",{onClick:()=>{g(X.id),x(X.full_name)},className:`p-2 cursor-pointer hover:bg-gray-50 ${m===X.id?"bg-blue-50":""}`,children:[l.jsx("p",{className:"text-sm font-medium",children:X.full_name}),l.jsx("p",{className:"text-xs text-gray-600 capitalize",children:X.role})]},X.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),l.jsx("input",{type:"text",value:v,onChange:X=>j(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Message subject..."})]})]}),l.jsxs("div",{className:"flex-1 mt-4 flex flex-col",children:[N&&l.jsxs("div",{className:"mb-4 relative inline-block",children:[l.jsx("img",{src:N,alt:"Preview",className:"max-w-xs max-h-32 rounded-lg border border-gray-300"}),l.jsx("button",{onClick:R,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:l.jsx(io,{className:"w-3 h-3"})}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:S==null?void 0:S.name})]}),l.jsx("textarea",{value:c,onChange:X=>d(X.target.value),placeholder:S?"Add a caption (optional)...":"Type your message...",className:"flex-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none"}),l.jsxs("div",{className:"flex justify-between items-center mt-4",children:[l.jsx("div",{className:"flex space-x-2",children:l.jsxs("label",{className:"cursor-pointer",children:[l.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"hidden"}),l.jsxs("div",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all flex items-center space-x-1",children:[l.jsx(ID,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm",children:"Image"})]})]})}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm transition-colors",children:"Cancel"}),l.jsxs("button",{onClick:U,disabled:!c.trim()&&!S||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[l.jsx(hw,{className:"w-4 h-4"}),l.jsx("span",{children:"Send"})]})]})]})]})]}):a?l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"p-4 border-b border-gray-200",children:l.jsx("p",{className:"font-semibold text-gray-900",children:((F=$[0])==null?void 0:F.sender_id)===(e==null?void 0:e.id)?(V=(Y=$[0])==null?void 0:Y.recipient)==null?void 0:V.full_name:(ee=(ce=$[0])==null?void 0:ce.sender)==null?void 0:ee.full_name})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:$.sort((X,te)=>new Date(X.created_at).getTime()-new Date(te.created_at).getTime()).map(X=>l.jsx("div",{className:`flex ${X.sender_id===(e==null?void 0:e.id)?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${X.sender_id===(e==null?void 0:e.id)?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[X.image_url&&l.jsxs("div",{className:"mb-2",children:[l.jsx("img",{src:X.image_url,alt:X.image_name||"Shared image",className:"max-w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(X.image_url,"_blank")}),X.image_name&&l.jsx("p",{className:`text-xs mt-1 ${X.sender_id===(e==null?void 0:e.id)?"text-blue-200":"text-gray-500"}`,children:X.image_name})]}),X.content&&X.content!==`[Image: ${X.image_name}]`&&l.jsx("p",{className:"text-sm",children:X.content}),l.jsx("p",{className:`text-xs mt-1 ${X.sender_id===(e==null?void 0:e.id)?"text-blue-200":"text-gray-500"}`,children:new Date(X.created_at).toLocaleString()})]})},X.id))}),l.jsxs("div",{className:"p-4 border-t border-gray-200",children:[N&&l.jsxs("div",{className:"mb-3 relative inline-block",children:[l.jsx("img",{src:N,alt:"Preview",className:"max-w-xs max-h-24 rounded-lg border border-gray-300"}),l.jsx("button",{onClick:R,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:l.jsx(io,{className:"w-3 h-3"})}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:S==null?void 0:S.name})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("label",{className:"cursor-pointer self-end",children:[l.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"hidden"}),l.jsx("div",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",children:l.jsx(BD,{className:"w-5 h-5"})})]}),l.jsx("textarea",{value:c,onChange:X=>d(X.target.value),placeholder:S?"Add a caption (optional)...":"Type your reply...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none",rows:2,onKeyPress:X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),U())}}),l.jsx("button",{onClick:U,disabled:!c.trim()&&!S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l.jsx(hw,{className:"w-5 h-5"})})]})]})]}):l.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Zs,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),l.jsx("p",{children:"Select a conversation to start messaging"})]})})})]})})]})},GO=({task:e,onClose:t,rolesFilter:r,forceAssignedToUserId:n,hideAssignedTo:i})=>{const{user:a}=Ye(),[o,c]=_.useState(!1),[d,f]=_.useState([]),[h,m]=_.useState([]),[g,v]=_.useState([]),[j,w]=_.useState("general"),[P,b]=_.useState({title:"",description:"",priority:"medium",status:"pending",assigned_to:n||"",patient_id:"",due_date:""}),[x,S]=_.useState([]);_.useEffect(()=>{if(O(),C(),N(),e){const R=!!(e.patient_id&&e.due_date);w(R?"appointment":"general"),b({title:e.title,description:e.description,priority:e.priority,status:e.status,assigned_to:n||e.assigned_to,patient_id:e.patient_id||"",due_date:e.due_date||""}),e.form_fields&&Array.isArray(e.form_fields)&&S(e.form_fields.map(U=>{var I;return{...U,options:((I=U.options)==null?void 0:I.join(", "))||""}}))}},[e]);const O=async()=>{try{const{data:R,error:U}=await Ga();if(U)console.error("Error fetching users:",U);else{let I=(R||[]).filter(D=>D.role==="doctor"||D.role==="volunteer");r&&r.length&&(I=I.filter(D=>r.includes(D.role))),f(I)}}catch(R){console.error("Error fetching users:",R)}},N=async()=>{try{const{data:R,error:U}=await Hf();U||v(R||[])}catch(R){console.error("Error fetching volunteers:",R)}},C=async()=>{try{const{data:R,error:U}=await jo();U?console.error("Error fetching patients:",U):m(R||[])}catch(R){console.error("Error fetching patients:",R)}},E=async R=>{if(R.preventDefault(),c(!0),j==="appointment"){if(!P.patient_id){alert("Please select a patient for the appointment."),c(!1);return}if(!P.due_date){alert("Please select a date for the appointment."),c(!1);return}}try{const U=x.map(I=>({id:I.id,label:I.label,type:I.type,required:!!I.required,options:I.options?I.options.split(",").map(D=>D.trim()).filter(Boolean):void 0}));if(e){const{error:I}=await nc(e.id,{...P,form_fields:U});if(I){console.error("Error updating task:",I);return}}else{const I={...P,assigned_to:n||P.assigned_to,assigned_by:(a==null?void 0:a.id)||"",patient_id:j==="appointment"?P.patient_id:void 0,form_fields:U,form_responses:{}},{error:D}=await W2(I);if(D){console.error("Error creating task:",D);return}}t()}catch(U){console.error("Error saving task:",U)}finally{c(!1)}},A=R=>{const{name:U,value:I}=R.target;U==="assigned_to"&&n||b({...P,[U]:I})},H=R=>{w(R),R==="general"&&b({...P,patient_id:""})},B=(r==null?void 0:r.includes("volunteer"))&&!e;return l.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[l.jsx("div",{className:"border-b border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:l.jsx(Wf,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:l.jsx(Tl,{className:"w-6 h-6 text-blue-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Task":"Create New Task"})]})]})}),l.jsxs("form",{onSubmit:E,className:"p-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[B&&l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Type *"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"taskType",value:"general",checked:j==="general",onChange:()=>H("general"),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),l.jsx("span",{className:"text-sm text-gray-700",children:"General Task"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"taskType",value:"appointment",checked:j==="appointment",onChange:()=>H("appointment"),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Appointment"})]})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j==="appointment"?`Appointments require a patient and date, and will appear in the volunteer's "Today's Appointments" tab.`:`General tasks will appear in the volunteer's "Today's To-Do" tab when due today.`})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title *"}),l.jsx("input",{type:"text",name:"title",required:!0,value:P.title,onChange:A,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter task title..."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),l.jsx("textarea",{name:"description",required:!0,rows:4,value:P.description,onChange:A,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Describe the task in detail..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),l.jsxs("select",{name:"priority",required:!0,value:P.priority,onChange:A,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[l.jsx("option",{value:"low",children:"Low"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"urgent",children:"Urgent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),l.jsxs("select",{name:"status",required:!0,value:P.status,onChange:A,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[l.jsx("option",{value:"pending",children:"Pending"}),l.jsx("option",{value:"in_progress",children:"In Progress"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),l.jsxs("div",{className:j==="general"?"opacity-50":"",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j==="appointment"?"Patient *":"Related Patient (Optional)"}),l.jsxs("select",{name:"patient_id",value:P.patient_id,onChange:A,required:j==="appointment",disabled:j==="general",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[l.jsx("option",{value:"",children:"Select patient..."}),h.map(R=>l.jsxs("option",{value:R.id,children:[R.name," - ",R.medical_record_number]},R.id))]}),j==="general"&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"General tasks don't require a patient assignment"})]}),i?l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned To"}),l.jsx("div",{className:"px-4 py-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-700",children:"You"})]}):l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign To *"}),l.jsxs("select",{name:"assigned_to",required:!0,value:P.assigned_to,onChange:A,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[l.jsx("option",{value:"",children:"Select user..."}),(()=>{const R=I=>{if(!I)return"";const D=I.split(",").map($=>$.trim()).filter(Boolean);return D.length>=3?D[D.length-3].toLowerCase():""};let U=d;if(r!=null&&r.includes("volunteer")&&j==="appointment"&&P.patient_id){const I=h.find(z=>z.id===P.patient_id),D=R(I==null?void 0:I.address),$=g.filter(z=>R(z.address)===D).map(z=>z.user_id);U=d.filter(z=>z.role==="volunteer"&&$.includes(z.id))}return U.map(I=>l.jsxs("option",{value:I.id,children:[I.full_name," (",I.role,")"]},I.id))})()]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j==="appointment"?"Appointment Date *":"Due Date (Optional)"}),l.jsx("input",{type:"date",name:"due_date",value:P.due_date,onChange:A,required:j==="appointment",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),j==="appointment"&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Appointment date is required and will appear in the volunteer's appointment schedule"})]}),(r==null?void 0:r.includes("volunteer"))&&l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Form Fields (for volunteer to fill)"}),l.jsxs("div",{className:"space-y-3",children:[x.map((R,U)=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-center",children:[l.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Field label",value:R.label,onChange:I=>{const D=I.target.value;S($=>$.map((z,G)=>G===U?{...z,label:D}:z))}}),l.jsxs("select",{className:"px-3 py-2 border rounded",value:R.type,onChange:I=>{const D=I.target.value;S($=>$.map((z,G)=>G===U?{...z,type:D}:z))},children:[l.jsx("option",{value:"text",children:"Text"}),l.jsx("option",{value:"textarea",children:"Textarea"}),l.jsx("option",{value:"number",children:"Number"}),l.jsx("option",{value:"date",children:"Date"}),l.jsx("option",{value:"select",children:"Select"}),l.jsx("option",{value:"checkbox",children:"Checkbox"}),l.jsx("option",{value:"radio",children:"Radio"})]}),l.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Options (comma separated)",value:R.options||"",onChange:I=>{const D=I.target.value;S($=>$.map((z,G)=>G===U?{...z,options:D}:z))}}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:!!R.required,onChange:I=>{const D=I.target.checked;S($=>$.map((z,G)=>G===U?{...z,required:D}:z))}})," Required"]}),l.jsx("button",{type:"button",className:"text-red-600 text-sm",onClick:()=>S(I=>I.filter((D,$)=>$!==U)),children:"Remove"})]})]},R.id)),l.jsx("button",{type:"button",className:"px-3 py-2 border rounded text-sm",onClick:()=>S(R=>[...R,{id:"f-"+Math.random().toString(36).slice(2,9),label:"",type:"text",options:""}]),children:"+ Add Field"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"These fields will appear on the volunteer side when they open the task to complete it."})]})]}),l.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[l.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(wo,{className:"w-5 h-5"}),l.jsx("span",{children:e?"Update Task":"Create Task"})]})})]})]})]})})},eS=({personalOnly:e=!1,title:t})=>{const{user:r}=Ye(),[n,i]=_.useState([]),[a,o]=_.useState(!0),[c,d]=_.useState(""),[f,h]=_.useState("all"),[m,g]=_.useState("all"),[v,j]=_.useState(!1),[w,P]=_.useState(null);_.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:B,error:R}=await rc(r==null?void 0:r.id);if(R)console.error("Error fetching tasks:",R);else{let U=B||[];e&&(r!=null&&r.id)&&(U=U.filter(I=>I.assigned_to===r.id)),i(U)}}catch(B){console.error("Error fetching tasks:",B)}finally{o(!1)}},x=async(B,R)=>{try{const{error:U}=await nc(B,{status:R});U?console.error("Error updating task:",U):b()}catch(U){console.error("Error updating task:",U)}},S=async B=>{if(window.confirm("Are you sure you want to delete this task?"))try{const{error:R}=await H2(B);R?console.error("Error deleting task:",R):b()}catch(R){console.error("Error deleting task:",R)}},O=B=>{P(B),j(!0)},N=()=>{j(!1),P(null),b()},C=n.filter(B=>{var D;const R=B.title.toLowerCase().includes(c.toLowerCase())||B.description.toLowerCase().includes(c.toLowerCase())||((D=B.assigned_to_user)==null?void 0:D.full_name.toLowerCase().includes(c.toLowerCase())),U=f==="all"||B.status===f,I=m==="all"||B.priority===m;return R&&U&&I}),E=B=>{switch(B){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},A=B=>{switch(B){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},H=B=>{switch(B){case"completed":return l.jsx(ec,{className:"w-4 h-4"});case"in_progress":return l.jsx(Ad,{className:"w-4 h-4"});case"pending":return l.jsx(Fi,{className:"w-4 h-4"});default:return l.jsx(Ad,{className:"w-4 h-4"})}};return a?l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):v?l.jsx(GO,{task:w,onClose:N,forceAssignedToUserId:e?r==null?void 0:r.id:void 0,hideAssignedTo:e}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t||(e?"My Tasks":"Task Management")}),l.jsxs("button",{onClick:()=>j(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[l.jsx(An,{className:"w-5 h-5"}),l.jsx("span",{children:e?"Add Task":"Create Task"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(za,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search tasks...",value:c,onChange:B=>d(B.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("select",{value:f,onChange:B=>h(B.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"pending",children:"Pending"}),l.jsx("option",{value:"in_progress",children:"In Progress"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]}),l.jsxs("select",{value:m,onChange:B=>g(B.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:"All Priority"}),l.jsx("option",{value:"urgent",children:"Urgent"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"low",children:"Low"})]})]})}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:C.map(B=>{var R,U;return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:B.title}),l.jsx("p",{className:"text-gray-600 text-sm mb-3",children:B.description})]}),l.jsxs("div",{className:"flex space-x-2 ml-4",children:[l.jsx("button",{onClick:()=>O(B),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Task",children:l.jsx(B2,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>S(B.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Task",children:l.jsx(_c,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[l.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${E(B.priority)}`,children:[B.priority.charAt(0).toUpperCase()+B.priority.slice(1)," Priority"]}),l.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${A(B.status)}`,children:[H(B.status),l.jsx("span",{children:B.status.replace("_"," ").charAt(0).toUpperCase()+B.status.replace("_"," ").slice(1)})]})]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nt,{className:"w-4 h-4"}),l.jsxs("span",{children:["Assigned to: ",(R=B.assigned_to_user)==null?void 0:R.full_name]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nt,{className:"w-4 h-4"}),l.jsxs("span",{children:["Created by: ",(U=B.assigned_by_user)==null?void 0:U.full_name]})]}),B.patient&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nt,{className:"w-4 h-4"}),l.jsxs("span",{children:["Patient: ",B.patient.name]})]}),B.due_date&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Pn,{className:"w-4 h-4"}),l.jsxs("span",{children:["Due: ",new Date(B.due_date).toLocaleDateString()]})]})]}),B.status!=="completed"&&B.status!=="cancelled"&&l.jsxs("div",{className:"flex space-x-2",children:[B.status==="pending"&&l.jsx("button",{onClick:()=>x(B.id,"in_progress"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"Start Task"}),B.status==="in_progress"&&l.jsx("button",{onClick:()=>x(B.id,"completed"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:"Mark Complete"}),l.jsx("button",{onClick:()=>x(B.id,"cancelled"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Cancel"})]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",children:[l.jsxs("p",{children:["Created: ",new Date(B.created_at).toLocaleDateString()]}),B.completed_at&&l.jsxs("p",{children:["Completed: ",new Date(B.completed_at).toLocaleDateString()]})]})]},B.id)})}),C.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx(ec,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:c||f!=="all"||m!=="all"?"No tasks found matching your filters.":"No tasks found."})]})]})},kZ=()=>{const{user:e}=Ye(),[t,r]=_.useState([]),[n,i]=_.useState(!0),[a,o]=_.useState(""),[c,d]=_.useState("all"),[f,h]=_.useState("all"),[m,g]=_.useState(!1),[v,j]=_.useState(null);_.useEffect(()=>{w()},[]);const w=async()=>{try{const{data:A}=await rc(),H=(A||[]).filter(B=>{var R;return((R=B.assigned_to_user)==null?void 0:R.role)==="volunteer"});r(H)}finally{i(!1)}},P=async(A,H)=>{const{error:B}=await nc(A,{status:H});B||w()},b=async A=>{if(!window.confirm("Delete this task?"))return;const{error:H}=await H2(A);H||w()},x=A=>{j(A),g(!0)},S=()=>{g(!1),j(null),w()},O=t.filter(A=>{var U;const H=A.title.toLowerCase().includes(a.toLowerCase())||A.description.toLowerCase().includes(a.toLowerCase())||((U=A.assigned_to_user)==null?void 0:U.full_name.toLowerCase().includes(a.toLowerCase())),B=c==="all"||A.status===c,R=f==="all"||A.priority===f;return H&&B&&R}),N=A=>{switch(A){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},C=A=>{switch(A){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=A=>{switch(A){case"completed":return l.jsx(ec,{className:"w-4 h-4"});case"in_progress":return l.jsx(Ad,{className:"w-4 h-4"});case"pending":return l.jsx(Fi,{className:"w-4 h-4"});default:return l.jsx(Ad,{className:"w-4 h-4"})}};return n?l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):m?l.jsx(GO,{task:v,onClose:S,rolesFilter:["volunteer"]}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Volunteer Tasks"}),(e==null?void 0:e.role)==="doctor"&&l.jsxs("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[l.jsx(An,{className:"w-5 h-5"}),l.jsx("span",{children:"Assign Task"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(za,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search tasks...",value:a,onChange:A=>o(A.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("select",{value:c,onChange:A=>d(A.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"pending",children:"Pending"}),l.jsx("option",{value:"in_progress",children:"In Progress"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]}),l.jsxs("select",{value:f,onChange:A=>h(A.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:"All Priority"}),l.jsx("option",{value:"urgent",children:"Urgent"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"low",children:"Low"})]})]})}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:O.map(A=>{var H;return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:A.title}),l.jsx("p",{className:"text-gray-600 text-sm mb-3",children:A.description})]}),l.jsxs("div",{className:"flex space-x-2 ml-4",children:[l.jsx("button",{onClick:()=>x(A),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Task",children:l.jsx(B2,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>b(A.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Task",children:l.jsx(_c,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[l.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${N(A.priority)}`,children:[A.priority.charAt(0).toUpperCase()+A.priority.slice(1)," Priority"]}),l.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${C(A.status)}`,children:[E(A.status),l.jsx("span",{children:A.status.replace("_"," ").charAt(0).toUpperCase()+A.status.replace("_"," ").slice(1)})]})]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nt,{className:"w-4 h-4"}),l.jsxs("span",{children:["Volunteer: ",(H=A.assigned_to_user)==null?void 0:H.full_name]})]}),A.patient&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nt,{className:"w-4 h-4"}),l.jsxs("span",{children:["Patient: ",A.patient.name]})]}),A.due_date&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Pn,{className:"w-4 h-4"}),l.jsxs("span",{children:["Due: ",new Date(A.due_date).toLocaleDateString()]})]}),A.report&&l.jsxs("div",{className:"text-gray-700 bg-gray-50 border border-gray-200 rounded p-3",children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Volunteer Report"}),l.jsx("div",{children:A.report})]})]}),A.status!=="completed"&&A.status!=="cancelled"&&l.jsxs("div",{className:"flex space-x-2",children:[A.status==="pending"&&l.jsx("button",{onClick:()=>P(A.id,"in_progress"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"Start"}),A.status==="in_progress"&&l.jsx("button",{onClick:()=>P(A.id,"completed"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:"Mark Complete"}),l.jsx("button",{onClick:()=>P(A.id,"cancelled"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Cancel"})]})]},A.id)})}),O.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx(ec,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"No volunteer tasks found."})]})]})},tS=e=>{if(!e)return!1;const t=new Date(e),r=new Date;return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()},NZ=()=>{const{user:e}=Ye(),[t,r]=_.useState([]),[n,i]=_.useState(!0),[a,o]=_.useState("appointments"),[c,d]=_.useState(null),[f,h]=_.useState(""),[m,g]=_.useState({});_.useEffect(()=>{v()},[]);const v=async()=>{const{data:I}=await rc(e==null?void 0:e.id),D=(I||[]).filter($=>$.assigned_to===(e==null?void 0:e.id));r(D),i(!1)},j=_.useMemo(()=>t.filter(I=>tS(I.due_date)&&!!I.patient),[t]),w=_.useMemo(()=>t.filter(I=>tS(I.due_date)&&!I.patient),[t]),P=I=>{if(!I)return!1;const D=new Date(I),$=new Date;return D.setHours(0,0,0,0)>$.setHours(0,0,0,0)},b=I=>{if(!I)return!1;const D=new Date(I),$=new Date;return D.setHours(0,0,0,0)<$.setHours(0,0,0,0)},x=_.useMemo(()=>t.filter(I=>!!I.patient&&P(I.due_date)&&I.status!=="completed"&&I.status!=="cancelled"),[t]),S=_.useMemo(()=>t.filter(I=>!!I.patient&&b(I.due_date)&&I.status!=="completed"&&I.status!=="cancelled"),[t]),O=_.useMemo(()=>t.filter(I=>!!I.patient&&I.status==="completed"),[t]),N=_.useMemo(()=>t.filter(I=>!I.patient&&P(I.due_date)&&I.status!=="completed"&&I.status!=="cancelled"),[t]),C=_.useMemo(()=>t.filter(I=>!I.patient&&b(I.due_date)&&I.status!=="completed"&&I.status!=="cancelled"),[t]),E=_.useMemo(()=>t.filter(I=>!I.patient&&I.status==="completed"),[t]),A=async I=>{await nc(I.id,{status:"in_progress"}),v()},H=I=>{d(I),h(I.report||""),g(I.form_responses||{})},B=async()=>{c&&(await nc(c.id,{status:"completed",report:f,form_responses:m}),d(null),h(""),g({}),v())},R=a==="appointments"?j:w,U=({title:I,items:D})=>l.jsxs("div",{className:"mt-8",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:I}),D.length===0?l.jsx("div",{className:"text-gray-500 text-sm",children:"No items."}):l.jsx("div",{className:"space-y-3",children:D.map($=>l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"font-medium text-gray-900",children:$.title}),l.jsx("div",{className:"text-gray-600 mt-1",children:$.description}),l.jsxs("div",{className:"text-gray-700 mt-2",children:["Due ",$.due_date?new Date($.due_date).toLocaleDateString():"—"," ",$.patient&&l.jsxs("span",{children:["• Patient: ",$.patient.name]})]})]}),l.jsx("div",{className:"flex gap-2",children:$.status!=="completed"&&$.status!=="cancelled"&&l.jsx("button",{onClick:()=>H($),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Open"})})]})},$.id))})]});return n?l.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):l.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Tasks"}),l.jsxs("div",{className:"inline-flex rounded-lg overflow-hidden border border-gray-200",children:[l.jsxs("button",{className:`px-4 py-2 text-sm flex items-center gap-2 ${a==="appointments"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>o("appointments"),children:[l.jsx(Oy,{className:"w-4 h-4"})," Today’s Appointments"]}),l.jsxs("button",{className:`px-4 py-2 text-sm border-l border-gray-200 flex items-center gap-2 ${a==="todos"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>o("todos"),children:[l.jsx(FD,{className:"w-4 h-4"})," Today’s To‑Do"]})]})]}),R.length===0?l.jsxs("div",{className:"text-center py-12 text-gray-500",children:[l.jsx(Fi,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),"No tasks for today in this tab."]}):l.jsx("div",{className:"space-y-4",children:R.map(I=>l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-5 shadow-sm",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900",children:I.title}),l.jsx("div",{className:"text-sm text-gray-600 mt-1",children:I.description}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-3",children:[l.jsx(Pn,{className:"w-4 h-4"})," Due ",I.due_date?new Date(I.due_date).toLocaleDateString():"—",I.patient&&l.jsxs("span",{children:["• Patient: ",I.patient.name]})]}),I.report&&l.jsxs("div",{className:"text-gray-700 bg-gray-50 border border-gray-200 rounded p-3 mt-3",children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Submitted report"}),l.jsx("div",{children:I.report})]})]}),l.jsxs("div",{className:"flex gap-2",children:[I.status==="pending"&&l.jsx("button",{onClick:()=>A(I),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Start"}),(I.status==="in_progress"||I.status==="pending")&&l.jsxs("button",{onClick:()=>H(I),className:"px-3 py-1 rounded-lg bg-green-600 text-white text-sm hover:bg-green-700 flex items-center gap-1",children:[l.jsx(ec,{className:"w-4 h-4"})," Complete"]})]})]})},I.id))}),a==="appointments"?l.jsxs(l.Fragment,{children:[l.jsx(U,{title:"Upcoming Appointments",items:x}),l.jsx(U,{title:"Overdue Appointments",items:S}),l.jsx(U,{title:"Finished Appointments",items:O})]}):l.jsxs(l.Fragment,{children:[l.jsx(U,{title:"Upcoming To‑Do",items:N}),l.jsx(U,{title:"Overdue To‑Do",items:C}),l.jsx(U,{title:"Finished To‑Do",items:E})]}),l.jsx(Bx,{open:!!c,title:c?`Complete Task: ${c.title}`:"",onClose:()=>d(null),children:l.jsxs("div",{className:"space-y-4",children:[(c==null?void 0:c.form_fields)&&c.form_fields.length>0&&l.jsx("div",{className:"space-y-3",children:c.form_fields.map(I=>{const D=m[I.id]??"",$=z=>g(G=>({...G,[I.id]:z}));switch(I.type){case"textarea":return l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[I.label,I.required&&" *"]}),l.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-lg p-2",value:D,onChange:z=>$(z.target.value)})]},I.id);case"number":case"date":case"text":return l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[I.label,I.required&&" *"]}),l.jsx("input",{type:I.type,className:"w-full border border-gray-300 rounded-lg p-2",value:D,onChange:z=>$(z.target.value)})]},I.id);case"select":return l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[I.label,I.required&&" *"]}),l.jsxs("select",{className:"w-full border border-gray-300 rounded-lg p-2",value:D,onChange:z=>$(z.target.value),children:[l.jsx("option",{value:"",children:"Select…"}),(I.options||[]).map(z=>l.jsx("option",{value:z,children:z},z))]})]},I.id);case"checkbox":return l.jsxs("div",{children:[l.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-1",children:[I.label,I.required&&" *"]}),l.jsx("div",{className:"flex flex-wrap gap-3",children:(I.options||[]).map(z=>{const G=Array.isArray(D)?D:[],F=G.includes(z);return l.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:F,onChange:Y=>{const V=new Set(G);Y.target.checked?V.add(z):V.delete(z),$(Array.from(V))}})," ",z]},z)})})]},I.id);case"radio":return l.jsxs("div",{children:[l.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-1",children:[I.label,I.required&&" *"]}),l.jsx("div",{className:"flex flex-wrap gap-3",children:(I.options||[]).map(z=>l.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[l.jsx("input",{type:"radio",name:I.id,checked:D===z,onChange:()=>$(z)})," ",z]},z))})]},I.id);default:return null}})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Report / Notes"}),l.jsx("textarea",{value:f,onChange:I=>h(I.target.value),rows:4,className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500",placeholder:"Write your visit notes, actions taken, observations, etc."})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-lg",onClick:()=>d(null),children:"Cancel"}),l.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg",onClick:B,children:"Submit & Complete"})]})]})})]})},CZ="modulepreload",EZ=function(e){return"/"+e},rS={},Bc=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(d=>{if(d=EZ(d),d in rS)return;rS[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":CZ,f||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})},OZ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Bc(async()=>{const{default:n}=await Promise.resolve().then(()=>Lo);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Kx extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class TZ extends Kx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class nS extends Kx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class iS extends Kx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sv||(Sv={}));var AZ=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(h){try{f(n.next(h))}catch(m){o(m)}}function d(h){try{f(n.throw(h))}catch(m){o(m)}}function f(h){h.done?a(h.value):i(h.value).then(c,d)}f((n=n.apply(e,t||[])).next())})};class MZ{constructor(t,{headers:r={},customFetch:n,region:i=Sv.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=OZ(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return AZ(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=r;let c={},{region:d}=r;d||(d=this.region);const f=new URL(`${this.url}/${t}`);d&&d!=="any"&&(c["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)));const m=yield this.fetch(f.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h}).catch(w=>{throw new TZ(w)}),g=m.headers.get("x-relay-error");if(g&&g==="true")throw new nS(m);if(!m.ok)throw new iS(m);let v=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),j;return v==="application/json"?j=yield m.json():v==="application/octet-stream"?j=yield m.blob():v==="text/event-stream"?j=m:v==="multipart/form-data"?j=yield m.formData():j=yield m.text(),{data:j,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof iS||i instanceof nS?i.context:void 0}}})}}var ir={},Zx={},Wh={},Fc={},Hh={},Kh={},LZ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yo=LZ();const DZ=yo.fetch,YO=yo.fetch.bind(yo),XO=yo.Headers,IZ=yo.Request,RZ=yo.Response,Lo=Object.freeze(Object.defineProperty({__proto__:null,Headers:XO,Request:IZ,Response:RZ,default:YO,fetch:DZ},Symbol.toStringTag,{value:"Module"})),$Z=ZA(Lo);var Zh={};Object.defineProperty(Zh,"__esModule",{value:!0});let zZ=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Zh.default=zZ;var JO=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kh,"__esModule",{value:!0});const BZ=JO($Z),FZ=JO(Zh);let UZ=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=BZ.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,c,d,f;let h=null,m=null,g=null,v=a.status,j=a.statusText;if(a.ok){if(this.method!=="HEAD"){const x=await a.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?m=x:m=JSON.parse(x))}const P=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),b=(d=a.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");P&&b&&b.length>1&&(g=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(h={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,v=406,j="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const P=await a.text();try{h=JSON.parse(P),Array.isArray(h)&&a.status===404&&(m=[],h=null,v=200,j="OK")}catch{a.status===404&&P===""?(v=204,j="No Content"):h={message:P}}if(h&&this.isMaybeSingle&&(!((f=h==null?void 0:h.details)===null||f===void 0)&&f.includes("0 rows"))&&(h=null,v=200,j="OK"),h&&this.shouldThrowOnError)throw new FZ.default(h)}return{error:h,data:m,count:g,status:v,statusText:j}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,c,d;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(c=a==null?void 0:a.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(d=a==null?void 0:a.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,r)}returns(){return this}overrideTypes(){return this}};Kh.default=UZ;var WZ=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hh,"__esModule",{value:!0});const HZ=WZ(Kh);let KZ=class extends HZ.default{select(t){let r=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var c;const d=[t?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${f}"; options=${d};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Hh.default=KZ;var ZZ=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fc,"__esModule",{value:!0});const VZ=ZZ(Hh);let qZ=class extends VZ.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Fc.default=qZ;var GZ=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wh,"__esModule",{value:!0});const dl=GZ(Fc);let YZ=class{constructor(t,{headers:r={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=i}select(t,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new dl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var i;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(o.length>0){const c=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new dl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var o;const c="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(d.length>0){const f=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new dl.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new dl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new dl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Wh.default=YZ;var QO=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zx,"__esModule",{value:!0});const XZ=QO(Wh),JZ=QO(Fc);let QZ=class eT{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(t){const r=new URL(`${this.url}/${t}`);return new XZ.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new eT(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:a}={}){var o;let c;const d=new URL(`${this.url}/rpc/${t}`);let f;n||i?(c=n?"HEAD":"GET",Object.entries(r).filter(([m,g])=>g!==void 0).map(([m,g])=>[m,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([m,g])=>{d.searchParams.append(m,g)})):(c="POST",f=r);const h=new Headers(this.headers);return a&&h.set("Prefer",`count=${a}`),new JZ.default({method:c,url:d,headers:h,schema:this.schemaName,body:f,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Zx.default=QZ;var Do=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ir,"__esModule",{value:!0});ir.PostgrestError=ir.PostgrestBuilder=ir.PostgrestTransformBuilder=ir.PostgrestFilterBuilder=ir.PostgrestQueryBuilder=ir.PostgrestClient=void 0;const tT=Do(Zx);ir.PostgrestClient=tT.default;const rT=Do(Wh);ir.PostgrestQueryBuilder=rT.default;const nT=Do(Fc);ir.PostgrestFilterBuilder=nT.default;const iT=Do(Hh);ir.PostgrestTransformBuilder=iT.default;const aT=Do(Kh);ir.PostgrestBuilder=aT.default;const sT=Do(Zh);ir.PostgrestError=sT.default;var eV=ir.default={PostgrestClient:tT.default,PostgrestQueryBuilder:rT.default,PostgrestFilterBuilder:nT.default,PostgrestTransformBuilder:iT.default,PostgrestBuilder:aT.default,PostgrestError:sT.default};const{PostgrestClient:tV,PostgrestQueryBuilder:jG,PostgrestFilterBuilder:SG,PostgrestTransformBuilder:PG,PostgrestBuilder:kG,PostgrestError:NG}=eV;class rV{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const nV="2.15.5",iV=`realtime-js/${nV}`,aV="1.0.0",Pv=1e4,sV=1e3,oV=100;var Ll;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ll||(Ll={}));var dt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(dt||(dt={}));var sn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(sn||(sn={}));var kv;(function(e){e.websocket="websocket"})(kv||(kv={}));var ya;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ya||(ya={}));class lV{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const c=n.decode(t.slice(o,o+i));o=o+i;const d=n.decode(t.slice(o,o+a));o=o+a;const f=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:c,event:d,payload:f}}}class oT{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(De||(De={}));const aS=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,o)=>(a[o]=cV(o,e,t,i),a),{})},cV=(e,t,r,n)=>{const i=t.find(c=>c.name===e),a=i==null?void 0:i.type,o=r[e];return a&&!n.includes(a)?lT(a,o):Nv(o)},lT=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return hV(t,r)}switch(e){case De.bool:return uV(t);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return dV(t);case De.json:case De.jsonb:return fV(t);case De.timestamp:return mV(t);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return Nv(t);default:return Nv(t)}},Nv=e=>e,uV=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},dV=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},fV=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},hV=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(c=>lT(t,c))}return e},mV=e=>typeof e=="string"?e.replace(" ","T"):e,cT=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class kp{constructor(t,r,n={},i=Pv){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var sS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(sS||(sS={}));class Dl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dl.syncState(this.state,i,a,o),this.pendingDiffs.forEach(d=>{this.state=Dl.syncDiff(this.state,d,a,o)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Dl.syncDiff(this.state,i,a,o),c())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),o=this.transformState(r),c={},d={};return this.map(a,(f,h)=>{o[f]||(d[f]=h)}),this.map(o,(f,h)=>{const m=a[f];if(m){const g=h.map(P=>P.presence_ref),v=m.map(P=>P.presence_ref),j=h.filter(P=>v.indexOf(P.presence_ref)<0),w=m.filter(P=>g.indexOf(P.presence_ref)<0);j.length>0&&(c[f]=j),w.length>0&&(d[f]=w)}else c[f]=h}),this.syncDiff(a,{joins:c,leaves:d},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(c,d)=>{var f;const h=(f=t[c])!==null&&f!==void 0?f:[];if(t[c]=this.cloneDeep(d),h.length>0){const m=t[c].map(v=>v.presence_ref),g=h.filter(v=>m.indexOf(v.presence_ref)<0);t[c].unshift(...g)}n(c,h,d)}),this.map(o,(c,d)=>{let f=t[c];if(!f)return;const h=d.map(m=>m.presence_ref);f=f.filter(m=>h.indexOf(m.presence_ref)<0),t[c]=f,i(c,f,d),f.length===0&&delete t[c]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var oS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(oS||(oS={}));var Il;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Il||(Il={}));var Un;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Un||(Un={}));class Vx{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new kp(this,sn.join,this.params,this.timeout),this.rejoinTimer=new oT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(sn.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Dl(this),this.broadcastEndpointURL=cT(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==dt.closed){const{config:{broadcast:o,presence:c,private:d}}=this.params,f=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Il.PRESENCE]&&this.bindings[Il.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},g={broadcast:o,presence:Object.assign(Object.assign({},c),{enabled:h}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(Un.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(Un.CLOSED)),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var j;if(this.socket.setAuth(),v===void 0){t==null||t(Un.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,P=(j=w==null?void 0:w.length)!==null&&j!==void 0?j:0,b=[];for(let x=0;x<P;x++){const S=w[x],{filter:{event:O,schema:N,table:C,filter:E}}=S,A=v&&v[x];if(A&&A.event===O&&A.schema===N&&A.table===C&&A.filter===E)b.push(Object.assign(Object.assign({},S),{id:A.id}));else{this.unsubscribe(),this.state=dt.errored,t==null||t(Un.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Un.SUBSCRIBED);return}}).receive("error",v=>{this.state=dt.errored,t==null||t(Un.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Un.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===dt.joined&&t===Il.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,c,d;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=dt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(sn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new kp(this,sn.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new kp(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>oV){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const o=t.toLocaleLowerCase(),{close:c,error:d,leave:f,join:h}=sn;if(n&&[c,d,f,h].indexOf(o)>=0&&n!==this._joinRef())return;let g=this._onMessage(o,r,n);if(r&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var j,w,P;return((j=v.filter)===null||j===void 0?void 0:j.event)==="*"||((P=(w=v.filter)===null||w===void 0?void 0:w.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===o}).map(v=>v.callback(g,n)):(a=this.bindings[o])===null||a===void 0||a.filter(v=>{var j,w,P,b,x,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const O=v.id,N=(j=v.filter)===null||j===void 0?void 0:j.event;return O&&((w=r.ids)===null||w===void 0?void 0:w.includes(O))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((P=r.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const O=(x=(b=v==null?void 0:v.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return O==="*"||O===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof g=="object"&&"ids"in g){const j=g.data,{schema:w,table:P,commit_timestamp:b,type:x,errors:S}=j;g=Object.assign(Object.assign({},{schema:w,table:P,commit_timestamp:b,eventType:x,new:{},old:{},errors:S}),this._getPayloadRecords(j))}v.callback(g,n)})}_isClosed(){return this.state===dt.closed}_isJoined(){return this.state===dt.joined}_isJoining(){return this.state===dt.joining}_isLeaving(){return this.state===dt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Vx.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(sn.close,{},t)}_onError(t){this._on(sn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=aS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=aS(t.columns,t.old_record)),r}}const Np=()=>{},Fu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pV=[1e3,2e3,5e3,1e4],gV=1e4,vV=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yV{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pv,this.transport=null,this.heartbeatIntervalMs=Fu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Np,this.ref=0,this.reconnectTimer=null,this.logger=Np,this.conn=null,this.sendBuffer=[],this.serializer=new lV,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Bc(async()=>{const{default:c}=await Promise.resolve().then(()=>Lo);return{default:c}},void 0).then(({default:c})=>c(...o)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${kv.websocket}`,this.httpEndpoint=cT(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rV.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:aV}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ll.connecting:return ya.Connecting;case Ll.open:return ya.Open;case Ll.closing:return ya.Closing;default:return ya.Closed}}isConnected(){return this.connectionState()===ya.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Vx(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,o=()=>{this.encode(t,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(sV,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:o}=r,c=o?`(${o})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${i} ${c}`.trim(),a),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(sn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([vV],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:iV};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(sn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new oT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,o,c,d,f,h;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Pv,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Fu.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(c=t==null?void 0:t.heartbeatCallback)!==null&&c!==void 0?c:Np,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:m=>pV[m-1]||gV,this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:(m,g)=>g(JSON.stringify(m)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class qx extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ft(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class xV extends qx{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cv extends qx{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var _V=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(h){try{f(n.next(h))}catch(m){o(m)}}function d(h){try{f(n.throw(h))}catch(m){o(m)}}function f(h){h.done?a(h.value):i(h.value).then(c,d)}f((n=n.apply(e,t||[])).next())})};const uT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Bc(async()=>{const{default:n}=await Promise.resolve().then(()=>Lo);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},bV=()=>_V(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bc(()=>Promise.resolve().then(()=>Lo),void 0)).Response:Response}),Ev=e=>{if(Array.isArray(e))return e.map(r=>Ev(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Ev(n)}),t},wV=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ts=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(h){try{f(n.next(h))}catch(m){o(m)}}function d(h){try{f(n.throw(h))}catch(m){o(m)}}function f(h){h.done?a(h.value):i(h.value).then(c,d)}f((n=n.apply(e,t||[])).next())})};const Cp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jV=(e,t,r)=>ts(void 0,void 0,void 0,function*(){const n=yield bV();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{const a=e.status||500,o=(i==null?void 0:i.statusCode)||a+"";t(new xV(Cp(i),a,o))}).catch(i=>{t(new Cv(Cp(i),i))}):t(new Cv(Cp(e),e))}),SV=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(wV(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function Uc(e,t,r,n,i,a){return ts(this,void 0,void 0,function*(){return new Promise((o,c)=>{e(r,SV(t,n,i,a)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>jV(d,c,n))})})}function Sf(e,t,r,n){return ts(this,void 0,void 0,function*(){return Uc(e,"GET",t,r,n)})}function jn(e,t,r,n,i){return ts(this,void 0,void 0,function*(){return Uc(e,"POST",t,n,i,r)})}function Ov(e,t,r,n,i){return ts(this,void 0,void 0,function*(){return Uc(e,"PUT",t,n,i,r)})}function PV(e,t,r,n){return ts(this,void 0,void 0,function*(){return Uc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function dT(e,t,r,n,i){return ts(this,void 0,void 0,function*(){return Uc(e,"DELETE",t,n,i,r)})}var Vt=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(h){try{f(n.next(h))}catch(m){o(m)}}function d(h){try{f(n.throw(h))}catch(m){o(m)}}function f(h){h.done?a(h.value):i(h.value).then(c,d)}f((n=n.apply(e,t||[])).next())})};const kV={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class NV{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=uT(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return Vt(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},lS),i);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=n,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const f=this._removeEmptyFolders(r),h=this._getFinalPath(f),m=yield(t=="PUT"?Ov:jn)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:f,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return Vt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",r);try{let d;const f=Object.assign({upsert:lS.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",f.cacheControl)):(d=n,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const m=yield Ov(this.fetch,c.toString(),d,{headers:h});return{data:{path:a,fullPath:m.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(ft(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Vt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield jn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),c=o.searchParams.get("token");if(!c)throw new qx("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:c},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}update(t,r,n){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Vt(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}copy(t,r,n){return Vt(this,void 0,void 0,function*(){try{return{data:{path:(yield jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return Vt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield jn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return Vt(this,void 0,void 0,function*(){try{const i=yield jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}download(t,r){return Vt(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const c=this._getFinalPath(t);return{data:yield(yield Sf(this.fetch,`${this.url}/${i}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ft(c))return{data:null,error:c};throw c}})}info(t){return Vt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Sf(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ev(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}exists(t){return Vt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield PV(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n)&&n instanceof Cv){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const c=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&i.push(d);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${f}`)}}}remove(t){return Vt(this,void 0,void 0,function*(){try{return{data:yield dT(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}list(t,r,n){return Vt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},kV),r),{prefix:t||""});return{data:yield jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}listV2(t,r){return Vt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield jn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const CV="2.12.1",EV={"X-Client-Info":`storage-js/${CV}`};var gs=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(h){try{f(n.next(h))}catch(m){o(m)}}function d(h){try{f(n.throw(h))}catch(m){o(m)}}function f(h){h.done?a(h.value):i(h.value).then(c,d)}f((n=n.apply(e,t||[])).next())})};class OV{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},EV),r),this.fetch=uT(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return gs(this,void 0,void 0,function*(){try{return{data:yield Sf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}getBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield Sf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return gs(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return gs(this,void 0,void 0,function*(){try{return{data:yield Ov(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}emptyBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}deleteBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield dT(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}}class TV extends OV{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new NV(this.url,this.headers,t,this.fetch)}}const AV="2.57.4";let bl="";typeof Deno<"u"?bl="deno":typeof document<"u"?bl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bl="react-native":bl="node";const MV={"X-Client-Info":`supabase-js-${bl}/${AV}`},LV={headers:MV},DV={schema:"public"},IV={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RV={};var $V=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(h){try{f(n.next(h))}catch(m){o(m)}}function d(h){try{f(n.throw(h))}catch(m){o(m)}}function f(h){h.done?a(h.value):i(h.value).then(c,d)}f((n=n.apply(e,t||[])).next())})};const zV=e=>{let t;return e?t=e:typeof fetch>"u"?t=YO:t=fetch,(...r)=>t(...r)},BV=()=>typeof Headers>"u"?XO:Headers,FV=(e,t,r)=>{const n=zV(r),i=BV();return(a,o)=>$V(void 0,void 0,void 0,function*(){var c;const d=(c=yield t())!==null&&c!==void 0?c:e;let f=new i(o==null?void 0:o.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},o),{headers:f}))})};var UV=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(h){try{f(n.next(h))}catch(m){o(m)}}function d(h){try{f(n.throw(h))}catch(m){o(m)}}function f(h){h.done?a(h.value):i(h.value).then(c,d)}f((n=n.apply(e,t||[])).next())})};function WV(e){return e.endsWith("/")?e:e+"/"}function HV(e,t){var r,n;const{db:i,auth:a,realtime:o,global:c}=e,{db:d,auth:f,realtime:h,global:m}=t,g={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},m),c),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=c==null?void 0:c.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>UV(this,void 0,void 0,function*(){return""})};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function KV(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(WV(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const fT="2.71.1",bs=30*1e3,Tv=3,Ep=Tv*bs,ZV="http://localhost:9999",VV="supabase.auth.token",qV={"X-Client-Info":`gotrue-js/${fT}`},Av="X-Supabase-Api-Version",hT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},GV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,YV=10*60*1e3;class Gx extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class XV extends Gx{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function JV(e){return me(e)&&e.name==="AuthApiError"}class mT extends Gx{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ra extends Gx{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class yi extends ra{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function QV(e){return me(e)&&e.name==="AuthSessionMissingError"}class Uu extends ra{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wu extends ra{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Hu extends ra{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eq(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class cS extends ra{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mv extends ra{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Op(e){return me(e)&&e.name==="AuthRetryableFetchError"}class uS extends ra{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Lv extends ra{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dS=` 	
\r=`.split(""),tq=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dS.length;t+=1)e[dS[t].charCodeAt(0)]=-2;for(let t=0;t<Pf.length;t+=1)e[Pf[t].charCodeAt(0)]=t;return e})();function fS(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Pf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Pf[n]),t.queuedBits-=6}}function pT(e,t,r){const n=tq[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function hS(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{iq(o,n,r)};for(let o=0;o<e.length;o+=1)pT(e.charCodeAt(o),i,a);return t.join("")}function rq(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function nq(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}rq(n,t)}}function iq(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function aq(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)pT(e.charCodeAt(i),r,n);return new Uint8Array(t)}function sq(e){const t=[];return nq(e,r=>t.push(r)),new Uint8Array(t)}function oq(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>fS(i,r,n)),fS(null,r,n),t.join("")}function lq(e){return Math.round(Date.now()/1e3)+e}function cq(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const rn=()=>typeof window<"u"&&typeof document<"u",ua={tested:!1,writable:!1},gT=()=>{if(!rn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ua.tested)return ua.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ua.tested=!0,ua.writable=!0}catch{ua.tested=!0,ua.writable=!1}return ua.writable};function uq(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const vT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Bc(async()=>{const{default:n}=await Promise.resolve().then(()=>Lo);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},dq=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ws=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},da=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},vi=async(e,t)=>{await e.removeItem(t)};class Vh{constructor(){this.promise=new Vh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Vh.promiseConstructor=Promise;function Tp(e){const t=e.split(".");if(t.length!==3)throw new Lv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!GV.test(t[n]))throw new Lv("JWT not in base64url format");return{header:JSON.parse(hS(t[0])),payload:JSON.parse(hS(t[1])),signature:aq(t[2]),raw:{header:t[0],payload:t[1]}}}async function fq(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function hq(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function mq(e){return("0"+e.toString(16)).substr(-2)}function pq(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,mq).join("")}async function gq(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function vq(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await gq(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vs(e,t,r=!1){const n=pq();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await ws(e,`${t}-code-verifier`,i);const a=await vq(n);return[a,n===a?"plain":"s256"]}const yq=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xq(e){const t=e.headers.get(Av);if(!t||!t.match(yq))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _q(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function bq(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wq=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ys(e){if(!wq.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ap(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mS(e){return JSON.parse(JSON.stringify(e))}var jq=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const va=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Sq=[502,503,504];async function pS(e){var t;if(!dq(e))throw new Mv(va(e),0);if(Sq.includes(e.status))throw new Mv(va(e),e.status);let r;try{r=await e.json()}catch(a){throw new mT(va(a),a)}let n;const i=xq(e);if(i&&i.getTime()>=hT["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new uS(va(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new yi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new uS(va(r),e.status,r.weak_password.reasons);throw new XV(va(r),e.status||500,n)}const Pq=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function xe(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[Av]||(a[Av]=hT["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await kq(e,t,r+c,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function kq(e,t,r,n,i,a){const o=Pq(t,n,i,a);let c;try{c=await e(r,Object.assign({},o))}catch(d){throw console.error(d),new Mv(va(d),0)}if(c.ok||await pS(c),n!=null&&n.noResolveJson)return c;try{return await c.json()}catch(d){await pS(d)}}function Bn(e){var t;let r=null;Oq(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=lq(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function gS(e){const t=Bn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ci(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Nq(e){return{data:e,error:null}}function Cq(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,o=jq(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},d=Object.assign({},o);return{data:{properties:c,user:d},error:null}}function Eq(e){return e}function Oq(e){return e.access_token&&e.refresh_token&&e.expires_in}const Mp=["global","local","others"];var Tq=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class Aq{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=vT(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Mp[0]){if(Mp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mp.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ci})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Tq(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Cq,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ci})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,o,c,d;try{const f={nextPage:null,lastPage:0,total:0},h=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Eq});if(h.error)throw h.error;const m=await h.json(),g=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(d=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return v.length>0&&(v.forEach(j=>{const w=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(j.split(";")[1].split("=")[1]);f[`${P}Page`]=w}),f.total=parseInt(g)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(me(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){ys(t);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ci})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ys(t);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ci})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ys(t);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ci})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ys(t.userId);try{const{data:r,error:n}=await xe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ys(t.userId),ys(t.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}}function vS(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Mq(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xs={debug:!!(globalThis&&gT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yT extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Lq extends yT{}async function Dq(e,t,r){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),xs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Lq(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xs.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Mq();const Iq={url:ZV,storageKey:VV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function yS(e,t,r){return await r()}const _s={};class mc{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mc.nextInstanceID,mc.nextInstanceID+=1,this.instanceID>0&&rn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Iq),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Aq({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=vT(i.fetch),this.lock=i.lock||yS,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:rn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Dq:this.lock=yS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:gT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vS(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=vS(this.memoryStorage)),rn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=_s[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){_s[this.storageKey]=Object.assign(Object.assign({},_s[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=_s[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){_s[this.storageKey]=Object.assign(Object.assign({},_s[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fT}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=uq(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),rn()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),eq(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?{error:r}:{error:new mT("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Bn}),{data:o,error:c}=a;if(c||!o)return{data:{user:null,session:null},error:c};const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(me(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:h,password:m,options:g}=t;let v=null,j=null;this.flowType==="pkce"&&([v,j]=await vs(this.storage,this.storageKey)),a=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:h,password:m,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:j},xform:Bn})}else if("phone"in t){const{phone:h,password:m,options:g}=t;a=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:m,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},channel:(i=g==null?void 0:g.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Bn})}else throw new Wu("You must provide either an email or phone number and a password");const{data:o,error:c}=a;if(c||!o)return{data:{user:null,session:null},error:c};const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(me(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:c}=t;r=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:gS})}else if("phone"in t){const{phone:a,password:o,options:c}=t;r=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:gS})}else throw new Wu("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Uu}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,i,a,o,c,d,f,h,m,g,v;let j,w;if("message"in t)j=t.message,w=t.signature;else{const{chain:P,wallet:b,statement:x,options:S}=t;let O;if(rn())if(typeof b=="object")O=b;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))O=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=b}const N=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){const C=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),x?{statement:x}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)j=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${N.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(n=S==null?void 0:S.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((d=S==null?void 0:S.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((f=S==null?void 0:S.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((m=(h=S==null?void 0:S.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||m===void 0)&&m.length?["Resources",...S.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await O.signMessage(new TextEncoder().encode(j),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=C}}try{const{data:P,error:b}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:oq(w)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Bn});if(b)throw b;return!P||!P.session||!P.user?{data:{user:null,session:null},error:new Uu}:(P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),{data:Object.assign({},P),error:b})}catch(P){if(me(P))return{data:{user:null,session:null},error:P};throw P}}async _exchangeCodeForSession(t){const r=await da(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Bn});if(await vi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Uu}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(me(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=t,c=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Bn}),{data:d,error:f}=c;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Uu}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,a,o;try{if("email"in t){const{email:c,options:d}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await vs(this.storage,this.storageKey));const{error:m}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:c,options:d}=t,{data:f,error:h}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new Wu("You must provide either an email or phone number.")}catch(c){if(me(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:c}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Bn});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,f=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await vs(this.storage,this.storageKey)),await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Nq})}catch(a){if(me(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new yi;const{error:i}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:o}=await xe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:o,error:c}=await xe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new Wu("You must provide either an email or phone number and a type")}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await da(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ep:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await da(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ap()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,f,h)=>(!o&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,h))})}return{data:{session:t},error:null}}const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ci}):await this._useSession(async r=>{var n,i,a;const{data:o,error:c}=r;if(c)throw c;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yi}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Ci})})}catch(r){if(me(r))return QV(r)&&(await this._removeSession(),await vi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new yi;const o=i.session;let c=null,d=null;this.flowType==="pkce"&&t.email!=null&&([c,d]=await vs(this.storage,this.storageKey));const{data:f,error:h}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:d}),jwt:o.access_token,xform:Ci});if(h)throw h;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new yi;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=Tp(t.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{session:c,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(me(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:c}=r;if(c)throw c;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new yi;const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!rn())throw new Hu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Hu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new cS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new cS("No code detected.");const{data:x,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:c,expires_at:d,token_type:f}=t;if(!a||!c||!o||!f)throw new Hu("No session defined in URL");const h=Math.round(Date.now()/1e3),m=parseInt(c);let g=h+m;d&&(g=parseInt(d));const v=g-h;v*1e3<=bs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const j=g-m;h-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,g,h):h-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,g,h);const{data:w,error:P}=await this._getUser(a);if(P)throw P;const b={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:g,refresh_token:o,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(n){if(me(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await da(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:c}=await this.admin.signOut(o,t);if(c&&!(JV(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(await this._removeSession(),await vi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=cq(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await vs(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(me(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,c,d,f,h;const{data:m,error:g}=a;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return rn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(me(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await hq(async i=>(i>0&&await fq(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Bn})),(i,a)=>{const o=200*Math.pow(2,i);return a&&Op(a)&&Date.now()+o-n<bs})}catch(n){if(this._debug(r,"error",n),me(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),rn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await da(this.storage,this.storageKey);if(i&&this.userStorage){let o=await da(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await ws(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ap()}else if(i&&!i.user&&!i.user){const o=await da(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await vi(this.storage,this.storageKey+"-user"),await ws(this.storage,this.storageKey,i)):i.user=Ap()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ep;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Ep}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Op(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(i.access_token);!c&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new yi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Vh;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new yi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),me(a)){const o={session:null,error:a};return Op(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(o),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ws(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=mS(i);await ws(this.storage,this.storageKey,a)}else{const i=mS(r);await ws(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await vi(this.storage,this.storageKey),await vi(this.storage,this.storageKey+"-code-verifier"),await vi(this.storage,this.storageKey+"-user"),this.userStorage&&await vi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&rn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),bs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/bs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${bs}ms, refresh threshold is ${Tv} ticks`),i<=Tv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof yT)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await vs(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(c.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await xe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:f}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:c}=await xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Tp(i.access_token);let c=null;o.aal&&(c=o.aal);let d=c;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const h=o.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(c=>c.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(c=>c.kid===t),n&&this.jwks_cached_at+YV>i)return n;const{data:a,error:o}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(c=>c.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:j}=await this.getSession();if(j||!v.session)return{data:null,error:j};n=v.session.access_token}const{header:i,payload:a,signature:o,raw:{header:c,payload:d}}=Tp(n);r!=null&&r.allowExpired||_q(a.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!f){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:a,header:i,signature:o},error:null}}const h=bq(i.alg),m=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,o,sq(`${c}.${d}`)))throw new Lv("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}}mc.nextInstanceID=0;const Rq=mc;class $q extends Rq{constructor(t){super(t)}}var zq=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(h){try{f(n.next(h))}catch(m){o(m)}}function d(h){try{f(n.throw(h))}catch(m){o(m)}}function f(h){h.done?a(h.value):i(h.value).then(c,d)}f((n=n.apply(e,t||[])).next())})};class Bq{constructor(t,r,n){var i,a,o;this.supabaseUrl=t,this.supabaseKey=r;const c=KV(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:DV,realtime:RV,auth:Object.assign(Object.assign({},IV),{storageKey:d}),global:LV},h=HV(n??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=FV(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new tV(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new TV(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new MZ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return zq(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:c,lock:d,debug:f},h,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $q({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:c,lock:d,debug:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new yV(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Fq=(e,t,r)=>new Bq(e,t,r);function Uq(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Uq()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Wq="https://thkrbearnvaqftwwtoyp.supabase.co",Hq="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRoa3JiZWFybnZhcWZ0d3d0b3lwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0MjQ0MDEsImV4cCI6MjA3NjAwMDQwMX0.B4vRboW6wPN2CUwb9qDvEosctCEgszZEnMjfOAsuwp4",pn=Fq(Wq,Hq),Yx=async()=>{const{data:e,error:t}=await pn.from("map_areas").select("*").order("name",{ascending:!0});return{data:e,error:t}},Kq=async e=>{const{data:t,error:r}=await pn.from("map_areas").insert([e]).select().maybeSingle();return{data:t,error:r}},Zq=async(e,t)=>{const{data:r,error:n}=await pn.from("map_areas").update(t).eq("id",e).select().maybeSingle();return{data:r,error:n}},Vq=async e=>{const{error:t}=await pn.from("map_areas").delete().eq("id",e);return{error:t}},qq=async e=>{const t=pn.from("volunteers").select("id",{count:"exact",head:!0}).eq("area_id",e),r=pn.from("patient_profiles").select("id",{count:"exact",head:!0}).eq("area_id",e),[n,i]=await Promise.all([t,r]);return{volunteerCount:n.count||0,patientCount:i.count||0,error:n.error||i.error}},Lp=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16"],Gq=({onClose:e,onAreaChanged:t})=>{const{user:r}=Ye(),[n,i]=_.useState([]),[a,o]=_.useState(!0),[c,d]=_.useState(!1),[f,h]=_.useState([]);_.useState(null);const[m,g]=_.useState(!1),[v,j]=_.useState(""),[w,P]=_.useState(Lp[0]),[b,x]=_.useState(null),[S,O]=_.useState(null),N=_.useCallback(async()=>{o(!0);const{data:D,error:$}=await Yx();!$&&D&&i(D),o(!1)},[]);_.useEffect(()=>{N()},[N]),_.useEffect(()=>{b?qq(b.id).then(D=>{O(D)}):O(null)},[b]);const C=()=>{d(!0),h([])},E=()=>{f.length>=3?g(!0):(alert("Please draw at least 3 points to create an area"),d(!1),h([]))},A=()=>{d(!1),h([])},H=async()=>{if(!v.trim()){alert("Please enter a name for the area");return}if(f.length<3){alert("Area must have at least 3 points");return}const D={type:"Polygon",coordinates:[[...f.map(G=>[G[0],G[1]]),f[0]].map(G=>[G[0],G[1]])]},{data:$,error:z}=await Kq({name:v,color:w,geometry:D,created_by:(r==null?void 0:r.id)||null});if(z){console.error("Error creating area:",z),alert("Failed to create area: "+z.message);return}g(!1),d(!1),h([]),j(""),P(Lp[0]),await N(),t&&t()},B=async D=>{if(!confirm("Are you sure you want to delete this area? Volunteers and patients will be unassigned."))return;const{error:$}=await Vq(D);if($){console.error("Error deleting area:",$),alert("Failed to delete area: "+$.message);return}x(null),await N(),t&&t()},R=async(D,$)=>{const{error:z}=await Zq(D,{color:$});if(z){console.error("Error updating area color:",z);return}await N(),t&&t()},U=()=>(Hx({click(D){c&&h($=>[...$,[D.latlng.lat,D.latlng.lng]])}}),null),I=()=>{const D=Wx();return _.useEffect(()=>{D.setView([13.793,100.321],13)},[D]),null};return a?l.jsx("div",{className:"py-10 text-center",children:"Loading areas..."}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[l.jsx("div",{className:"border-b border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Map Area Management"}),l.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:l.jsx(io,{className:"w-5 h-5"})})]})}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"mb-4 flex items-center gap-3",children:c?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:E,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[l.jsx(wo,{className:"w-4 h-4"}),"Finish Drawing"]}),l.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:[l.jsx(io,{className:"w-4 h-4"}),"Cancel"]}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Click on map to add points (",f.length," points)"]})]}):l.jsxs("button",{onClick:C,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[l.jsx(An,{className:"w-4 h-4"}),"Draw New Area"]})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[l.jsx("div",{className:"lg:col-span-3",children:l.jsx("div",{className:"h-[600px] w-full border border-gray-200 rounded-lg overflow-hidden",children:l.jsxs(Fh,{center:[13.793,100.321],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[l.jsx(I,{}),l.jsx(Uh,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),l.jsx(U,{}),n.map(D=>{var z,G;if(!((G=(z=D.geometry)==null?void 0:z.coordinates)!=null&&G[0]))return null;const $=D.geometry.coordinates[0].map(F=>[F[0],F[1]]);return l.jsx(jf,{positions:$,pathOptions:{color:D.color,fillColor:D.color,fillOpacity:(b==null?void 0:b.id)===D.id?.4:.2,weight:(b==null?void 0:b.id)===D.id?3:2},eventHandlers:{click:()=>x(D)},children:l.jsx(_l,{children:l.jsxs("div",{className:"p-2",children:[l.jsx("div",{className:"font-semibold text-lg mb-2",children:D.name}),S&&(b==null?void 0:b.id)===D.id&&l.jsxs("div",{className:"text-sm space-y-1",children:[l.jsxs("div",{children:["Volunteers: ",S.volunteerCount]}),l.jsxs("div",{children:["Patients: ",S.patientCount]})]})]})})},`area-polygon-${D.id}`)}),c&&f.length>0&&l.jsxs(l.Fragment,{children:[f.length>=2&&l.jsx(jf,{positions:f,pathOptions:{color:w,fillColor:w,fillOpacity:.3,weight:2,dashArray:"5, 5"}}),f.map((D,$)=>l.jsx(qO,{center:D,radius:8,pathOptions:{color:w,fillColor:w,fillOpacity:.8,weight:2}},`drawing-point-${$}`))]})]})})}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Areas (",n.length,")"]}),l.jsxs("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:[n.map(D=>l.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-all ${(b==null?void 0:b.id)===D.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>x(D),children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:D.color}}),l.jsx("span",{className:"font-medium text-sm",children:D.name})]})}),(b==null?void 0:b.id)===D.id&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-xs text-gray-600",children:"Color:"}),l.jsx("input",{type:"color",value:D.color,onChange:$=>R(D.id,$.target.value),className:"w-8 h-6 rounded cursor-pointer"})]}),l.jsxs("button",{onClick:$=>{$.stopPropagation(),B(D.id)},className:"w-full inline-flex items-center justify-center gap-2 px-3 py-1.5 text-xs bg-red-50 text-red-700 rounded hover:bg-red-100",children:[l.jsx(_c,{className:"w-3 h-3"}),"Delete Area"]})]})]},D.id)),n.length===0&&l.jsx("div",{className:"text-sm text-gray-500 text-center py-8",children:'No areas yet. Click "Draw New Area" to create one.'})]})]})})]})]})]}),m&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Name Your Area"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area Name"}),l.jsx("input",{type:"text",value:v,onChange:D=>j(D.target.value),placeholder:"e.g., North District Zone 1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area Color"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"color",value:w,onChange:D=>P(D.target.value),className:"w-12 h-10 rounded cursor-pointer"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Lp.map(D=>l.jsx("button",{onClick:()=>P(D),className:`w-8 h-8 rounded ${w===D?"ring-2 ring-blue-500":""}`,style:{backgroundColor:D}},D))})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{g(!1),d(!1),h([])},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),l.jsx("button",{onClick:H,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Area"})]})]})]})})]})},Ku=[13.793,100.321];function xS(e,t){const r=f=>f*Math.PI/180,i=r(t[0]-e[0]),a=r(t[1]-e[1]),o=r(e[0]),c=r(t[0]),d=Math.sin(i/2)*Math.sin(i/2)+Math.cos(o)*Math.cos(c)*Math.sin(a/2)*Math.sin(a/2);return 2*6371*Math.asin(Math.sqrt(d))}const Yq=({onBack:e})=>{const{user:t}=Ye(),[r,n]=_.useState("all"),[i,a]=_.useState(10),[o,c]=_.useState([]),[d,f]=_.useState(null),[h,m]=_.useState(null),[g,v]=_.useState(Ku),[j,w]=_.useState([]),[P,b]=_.useState(""),[x,S]=_.useState([]),[O,N]=_.useState(!0),[C,E]=_.useState(!1);_.useEffect(()=>{(async()=>{const{data:z}=await nI();c(z||[])})()},[]);const A=_.useCallback(async()=>{const{data:z}=await Yx();S(z||[])},[]);_.useEffect(()=>{A()},[A]),_.useEffect(()=>{(async()=>{if((t==null?void 0:t.role)!=="volunteer")return;const{data:z}=await jo(),G=t.full_name,F=(z||[]).filter(te=>typeof te.assigned_vhv_name=="string"&&te.assigned_vhv_name.toLowerCase().includes(G.toLowerCase())),V=((await Hf()).data||[]).find(te=>te.user_id===t.id),ce=te=>{if(!te)return"";const ae=te.split(",").map(oe=>oe.trim()).filter(Boolean);return ae.length>=3?ae[ae.length-3]:""},ee=ce(V==null?void 0:V.address);b(ee);const X=F.filter(te=>ce(te.address)===ee);w(X)})()},[t]);const H=_.useMemo(()=>(o||[]).filter(z=>r!=="all"&&r!=="patients"&&z.type!==r?!1:xS(d||Ku,[z.lat,z.lng])<=i),[o,r,i,d]),B=_.useMemo(()=>{if((t==null?void 0:t.role)!=="volunteer")return[];const z=d||Ku,G=F=>{if(!F)return"";const Y=F.split(",").map(V=>V.trim()).filter(Boolean);return Y.length>=3?Y[Y.length-3]:""};return(j||[]).filter(F=>G(F.address)===P).filter(F=>typeof F.lat=="number"&&typeof F.lng=="number").filter(F=>xS(z,[F.lat,F.lng])<=i)},[j,P,d,i,t]),R=z=>z==="volunteer"?"#22c55e":z==="center"?"#0ea5e9":"#ef4444",U=_.useMemo(()=>bf.divIcon({className:"custom-my-location-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;background:#2563eb;border:2px solid #fff;box-shadow:0 0 0 3px rgba(37,99,235,0.25);color:#fff;font-size:16px;line-height:1">🧍</div>',iconSize:[28,28],iconAnchor:[14,14],popupAnchor:[0,-14]}),[]),I=()=>{if(m(null),!("geolocation"in navigator)){m("Geolocation not supported by this browser");return}navigator.geolocation.getCurrentPosition(z=>{const G=[z.coords.latitude,z.coords.longitude];f(G),v(G)},z=>{m(z.message||"Unable to get current location")},{enableHighAccuracy:!0,timeout:1e4})},D=()=>{v(Ku)},$=({center:z})=>{const G=Wx();return _.useEffect(()=>{G.setView(z)},[z]),null};return C?l.jsx(Gq,{onClose:()=>E(!1),onAreaChanged:A}):l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[l.jsx("div",{className:"border-b border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:l.jsx(Wf,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:l.jsx(Ty,{className:"w-6 h-6 text-green-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Nearby Care Network"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:r,onChange:z=>n(z.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"volunteer",children:"Volunteers"}),l.jsx("option",{value:"center",children:"Centers"}),l.jsx("option",{value:"hospital",children:"Hospitals"}),(t==null?void 0:t.role)==="volunteer"&&l.jsx("option",{value:"patients",children:"My Patients"})]}),l.jsxs("select",{value:i,onChange:z=>a(parseInt(z.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[l.jsx("option",{value:5,children:"5 km"}),l.jsx("option",{value:10,children:"10 km"}),l.jsx("option",{value:20,children:"20 km"})]}),l.jsx("button",{onClick:I,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",children:"Use My Location"}),l.jsx("button",{onClick:D,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",children:"Reset"}),l.jsxs("button",{onClick:()=>N(!O),className:`px-3 py-2 text-sm rounded-lg border ${O?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 hover:bg-gray-50"}`,children:[O?"Hide":"Show"," Areas"]}),(t==null?void 0:t.role)==="doctor"&&l.jsxs("button",{onClick:()=>E(!0),className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 inline-flex items-center gap-2",children:[l.jsx(HD,{className:"w-4 h-4"}),"Manage Areas"]})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"h-[600px] w-full border border-gray-200 rounded-lg overflow-hidden",children:l.jsxs(Fh,{center:g,zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[l.jsx($,{center:g}),l.jsx(Uh,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),l.jsx(_Z,{center:g,radius:i*1e3,pathOptions:{color:"#0ea5e9",weight:1}}),O&&x.map(z=>{var F,Y;if(!((Y=(F=z.geometry)==null?void 0:F.coordinates)!=null&&Y[0]))return null;const G=z.geometry.coordinates[0].map(V=>[V[0],V[1]]);return l.jsx(jf,{positions:G,pathOptions:{color:z.color,fillColor:z.color,fillOpacity:.15,weight:2},children:l.jsx(_l,{children:l.jsx("div",{className:"font-semibold",children:z.name})})},`area-${z.id}`)}),d&&l.jsx(wf,{position:d,icon:U,children:l.jsx(_l,{children:l.jsx("div",{className:"font-semibold",children:"You are here"})})}),H.map(z=>l.jsx(qO,{center:[z.lat,z.lng],radius:10,pathOptions:{color:R(z.type),weight:2,fillOpacity:.6},children:l.jsx(_l,{children:l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"font-semibold",children:z.name}),l.jsx("div",{className:"text-xs text-gray-600 capitalize",children:z.type}),z.address&&l.jsx("div",{className:"text-xs text-gray-700",children:z.address}),z.phone&&l.jsxs("div",{className:"text-xs text-gray-700",children:["📞 ",z.phone]})]})})},z.id)),(t==null?void 0:t.role)==="volunteer"&&(r==="all"||r==="patients")&&B.map(z=>l.jsx(wf,{position:[z.lat,z.lng],icon:bf.divIcon({className:"custom-patient-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#a21caf;border:2px solid #fff;box-shadow:0 0 0 3px rgba(162,28,175,0.25);color:#fff;font-size:14px;line-height:1">👤</div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),children:l.jsx(_l,{children:l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"font-semibold",children:z.name}),l.jsx("div",{className:"text-xs text-gray-600",children:"Patient"}),l.jsxs("div",{className:"text-xs text-gray-700",children:["MRN: ",z.medical_record_number]}),z.phone_number&&l.jsxs("div",{className:"text-xs text-gray-700",children:["📞 ",z.phone_number]})]})})},`pat-${z.id}`))]})}),l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"About this map"}),l.jsxs("div",{className:"text-blue-700 text-sm space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Center:"})," Salaya, Nakhon Pathom"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Filters:"})," ",r," • ",i," km radius"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Legend:"})," ",l.jsx("span",{className:"text-green-700",children:"Volunteers"}),", ",l.jsx("span",{className:"text-sky-700",children:"Centers"}),", ",l.jsx("span",{className:"text-red-700",children:"Hospitals"})]}),h&&l.jsxs("p",{className:"text-red-700",children:["Location error: ",h]})]})]})]})]})})},Xq=({record:e,patientId:t,onClose:r})=>{const{user:n}=Ye(),[i,a]=_.useState(!1),[o,c]=_.useState(null),[d,f]=_.useState([]),[h,m]=_.useState({patient_id:t||"",record_date:new Date().toISOString().split("T")[0],temperature:"",pulse:"",blood_pressure:"",weight:"",blood_sugar:"",oxygen_saturation:"",pain_level:0,fatigue_level:0,mood:"good",appetite:"good",sleep_quality:"good",symptoms_description:"",medications_taken:"",activities:"",notes:""});_.useEffect(()=>{(n==null?void 0:n.role)==="patient"?g():((n==null?void 0:n.role)==="doctor"||(n==null?void 0:n.role)==="volunteer")&&v(),e&&m({patient_id:e.patient_id,record_date:e.record_date,temperature:e.temperature||"",pulse:e.pulse||"",blood_pressure:e.blood_pressure||"",weight:e.weight||"",blood_sugar:e.blood_sugar||"",oxygen_saturation:e.oxygen_saturation||"",pain_level:e.pain_level||0,fatigue_level:e.fatigue_level||0,mood:e.mood||"good",appetite:e.appetite||"good",sleep_quality:e.sleep_quality||"good",symptoms_description:e.symptoms_description||"",medications_taken:e.medications_taken||"",activities:e.activities||"",notes:e.notes||""})},[e,n]);const g=async()=>{if(n)try{const{data:x,error:S}=await bc(n.id);!S&&x&&(c(x),m(O=>({...O,patient_id:x.id})))}catch(x){console.error("Error fetching patient profile:",x)}},v=async()=>{try{const{data:x,error:S}=await jo();!S&&x&&(f(x),t&&m(O=>({...O,patient_id:t})))}catch(x){console.error("Error fetching patients:",x)}},j=async x=>{x.preventDefault(),a(!0);try{const S=h.patient_id||t||(o==null?void 0:o.id);if(!S){alert("Please select a patient before saving the record."),a(!1);return}if(e){const{error:O}=await uI(e.id,h);if(O){console.error("Error updating daily record:",O);return}}else{const{error:O}=await cI({...h,patient_id:S,recorded_by:(n==null?void 0:n.id)||""});if(O){console.error("Error creating daily record:",O);return}}r()}catch(S){console.error("Error saving daily record:",S)}finally{a(!1)}},w=x=>{const{name:S,value:O,type:N}=x.target;m(N==="range"||N==="number"?{...h,[S]:parseInt(O)||0}:{...h,[S]:O})},P=x=>x===0?"None":x<=3?"Mild":x<=6?"Moderate":x<=8?"Severe":"Extreme",b=x=>x===0?"text-green-600":x<=3?"text-yellow-600":x<=6?"text-orange-600":x<=8?"text-red-600":"text-red-800";return l.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[l.jsx("div",{className:"border-b border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:l.jsx(Wf,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:l.jsx(no,{className:"w-6 h-6 text-green-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Daily Record":"New Daily Record"})]})]})}),l.jsxs("form",{onSubmit:j,className:"p-6",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 pb-2 border-b border-gray-200",children:"Basic Information"}),((n==null?void 0:n.role)==="doctor"||(n==null?void 0:n.role)==="volunteer")&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Patient *"}),l.jsxs("select",{name:"patient_id",required:!0,value:h.patient_id,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[l.jsx("option",{value:"",children:"Choose a patient..."}),d.map(x=>l.jsxs("option",{value:x.id,children:[x.first_name," ",x.last_name]},x.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Record Date *"}),l.jsx("input",{type:"date",name:"record_date",required:!0,value:h.record_date,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),l.jsx("h4",{className:"text-md font-semibold text-gray-800 mt-6",children:"Vital Signs"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),l.jsx("input",{type:"text",name:"temperature",value:h.temperature,onChange:w,placeholder:"e.g., 98.6°F",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pulse"}),l.jsx("input",{type:"text",name:"pulse",value:h.pulse,onChange:w,placeholder:"e.g., 72 bpm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Pressure"}),l.jsx("input",{type:"text",name:"blood_pressure",value:h.blood_pressure,onChange:w,placeholder:"e.g., 120/80 mmHg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight"}),l.jsx("input",{type:"text",name:"weight",value:h.weight,onChange:w,placeholder:"e.g., 70 kg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Sugar"}),l.jsx("input",{type:"text",name:"blood_sugar",value:h.blood_sugar,onChange:w,placeholder:"e.g., 110 mg/dL",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Oxygen Saturation"}),l.jsx("input",{type:"text",name:"oxygen_saturation",value:h.oxygen_saturation,onChange:w,placeholder:"e.g., 98%",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 pb-2 border-b border-gray-200",children:"Symptoms & Well-being"}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Pain Level: ",l.jsxs("span",{className:`font-semibold ${b(h.pain_level)}`,children:[h.pain_level," - ",P(h.pain_level)]})]}),l.jsx("input",{type:"range",name:"pain_level",min:"0",max:"10",value:h.pain_level,onChange:w,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"0 - No Pain"}),l.jsx("span",{children:"10 - Extreme Pain"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Fatigue Level: ",l.jsxs("span",{className:`font-semibold ${b(h.fatigue_level)}`,children:[h.fatigue_level," - ",P(h.fatigue_level)]})]}),l.jsx("input",{type:"range",name:"fatigue_level",min:"0",max:"10",value:h.fatigue_level,onChange:w,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"0 - No Fatigue"}),l.jsx("span",{children:"10 - Extreme Fatigue"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mood"}),l.jsxs("select",{name:"mood",value:h.mood,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[l.jsx("option",{value:"excellent",children:"Excellent"}),l.jsx("option",{value:"good",children:"Good"}),l.jsx("option",{value:"fair",children:"Fair"}),l.jsx("option",{value:"poor",children:"Poor"}),l.jsx("option",{value:"very_poor",children:"Very Poor"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appetite"}),l.jsxs("select",{name:"appetite",value:h.appetite,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[l.jsx("option",{value:"excellent",children:"Excellent"}),l.jsx("option",{value:"good",children:"Good"}),l.jsx("option",{value:"fair",children:"Fair"}),l.jsx("option",{value:"poor",children:"Poor"}),l.jsx("option",{value:"very_poor",children:"Very Poor"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sleep Quality"}),l.jsxs("select",{name:"sleep_quality",value:h.sleep_quality,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[l.jsx("option",{value:"excellent",children:"Excellent"}),l.jsx("option",{value:"good",children:"Good"}),l.jsx("option",{value:"fair",children:"Fair"}),l.jsx("option",{value:"poor",children:"Poor"}),l.jsx("option",{value:"very_poor",children:"Very Poor"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Symptoms Description"}),l.jsx("textarea",{name:"symptoms_description",rows:3,value:h.symptoms_description,onChange:w,placeholder:"Describe any symptoms you're experiencing...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medications Taken"}),l.jsx("textarea",{name:"medications_taken",rows:2,value:h.medications_taken,onChange:w,placeholder:"List medications taken today...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activities"}),l.jsx("textarea",{name:"activities",rows:2,value:h.activities,onChange:w,placeholder:"Describe your activities today...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),l.jsx("textarea",{name:"notes",rows:3,value:h.notes,onChange:w,placeholder:"Any additional notes or observations...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[l.jsx("button",{type:"button",onClick:r,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(wo,{className:"w-5 h-5"}),l.jsx("span",{children:e?"Update Record":"Save Record"})]})})]})]})]})})},Jq=()=>{const{user:e}=Ye(),[t,r]=_.useState([]),[n,i]=_.useState([]),[a,o]=_.useState(!0),[c,d]=_.useState(""),[f,h]=_.useState("all"),[m,g]=_.useState(!1),[v,j]=_.useState(null);_.useEffect(()=>{w(),(e==null?void 0:e.role)!=="patient"&&P()},[e]);const w=async()=>{try{const{data:E,error:A}=await lI(void 0,(e==null?void 0:e.role)==="patient"?e.id:void 0);A?console.error("Error fetching daily records:",A):r(E||[])}catch(E){console.error("Error fetching daily records:",E)}finally{o(!1)}},P=async()=>{try{const{data:E,error:A}=await jo();A?console.error("Error fetching patients:",A):i(E||[])}catch(E){console.error("Error fetching patients:",E)}},b=E=>{j(E),g(!0)},x=async E=>{if(window.confirm("Are you sure you want to delete this daily record?"))try{const{error:A}=await dI(E);A?console.error("Error deleting record:",A):w()}catch(A){console.error("Error deleting record:",A)}},S=()=>{g(!1),j(null),w()},O=t.filter(E=>{var B,R,U;const A=((B=E.patient)==null?void 0:B.name.toLowerCase().includes(c.toLowerCase()))||((R=E.symptoms_description)==null?void 0:R.toLowerCase().includes(c.toLowerCase()))||((U=E.notes)==null?void 0:U.toLowerCase().includes(c.toLowerCase())),H=f==="all"||E.patient_id===f;return A&&H}),N=E=>{switch(E){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";case"poor":return"bg-orange-100 text-orange-800";case"very_poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=E=>!E||E===0?"text-green-600":E<=3?"text-yellow-600":E<=6?"text-orange-600":E<=8?"text-red-600":"text-red-800";return a?l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin"})})}):m?l.jsx(Xq,{record:v,onClose:S}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Daily Records"}),l.jsxs("button",{onClick:()=>g(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2 transition-colors",children:[l.jsx(An,{className:"w-5 h-5"}),l.jsx("span",{children:"Add Record"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(za,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search records...",value:c,onChange:E=>d(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(e==null?void 0:e.role)!=="patient"&&l.jsxs("select",{value:f,onChange:E=>h(E.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:"All Patients"}),n.map(E=>l.jsxs("option",{value:E.id,children:[E.name," - ",E.medical_record_number]},E.id))]})]})}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:O.map(E=>{var A,H,B,R;return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:l.jsx(no,{className:"w-5 h-5 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:(e==null?void 0:e.role)==="patient"?"My Record":(A=E.patient)==null?void 0:A.name}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[l.jsx(Pn,{className:"w-4 h-4"}),l.jsx("span",{children:new Date(E.record_date).toLocaleDateString()})]})]})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>b(E),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit Record",children:l.jsx(R2,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>x(E.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Record",children:l.jsx(_c,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Vital Signs"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[E.temperature&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Temp:"}),l.jsx("span",{className:"ml-1 font-medium",children:E.temperature})]}),E.pulse&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Pulse:"}),l.jsx("span",{className:"ml-1 font-medium",children:E.pulse})]}),E.blood_pressure&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"BP:"}),l.jsx("span",{className:"ml-1 font-medium",children:E.blood_pressure})]}),E.weight&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Weight:"}),l.jsx("span",{className:"ml-1 font-medium",children:E.weight})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Mood:"}),l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(E.mood)}`,children:((H=E.mood)==null?void 0:H.replace("_"," ").charAt(0).toUpperCase())+((B=E.mood)==null?void 0:B.replace("_"," ").slice(1))})]}),E.pain_level!==void 0&&E.pain_level>0&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Pain Level:"}),l.jsxs("span",{className:`font-medium ${C(E.pain_level)}`,children:[E.pain_level,"/10"]})]}),E.fatigue_level!==void 0&&E.fatigue_level>0&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Fatigue:"}),l.jsxs("span",{className:`font-medium ${C(E.fatigue_level)}`,children:[E.fatigue_level,"/10"]})]}),E.symptoms_description&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Symptoms:"}),l.jsx("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:E.symptoms_description})]}),E.notes&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Notes:"}),l.jsx("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:E.notes})]})]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nt,{className:"w-3 h-3"}),l.jsxs("span",{children:["Recorded by: ",(R=E.recorded_by_user)==null?void 0:R.full_name]})]}),l.jsxs("p",{className:"mt-1",children:["Created: ",new Date(E.created_at).toLocaleDateString()]})]})]},E.id)})}),O.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx(no,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:c||f!=="all"?"No records found matching your filters.":"No daily records found."}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Start tracking daily symptoms and vital signs by creating your first record."})]})]})},Qq=()=>{const{user:e}=Ye(),[t,r]=_.useState(!0),[n,i]=_.useState(null),[a,o]=_.useState([]),[c,d]=_.useState(!1),[f,h]=_.useState([]),[m,g]=_.useState({doctorId:"",date:"",message:""}),[v,j]=_.useState(!1);_.useEffect(()=>{(async()=>{try{if(!(e!=null&&e.id))return;const[{data:x},{data:S}]=await Promise.all([bc(e.id),Ga()]),O=(x==null?void 0:x.id)||null;i(O);const N=(S||[]).filter(A=>A.role==="doctor");h(N);const{data:C}=await rc(),E=(C||[]).filter(A=>A.patient_id===O);o(E)}finally{r(!1)}})()},[e]);const w=_.useMemo(()=>{const x=new Date;return x.setHours(0,0,0,0),x.getTime()},[]),P=_.useMemo(()=>{const x=[],S=[],O=[];for(const C of a){if(!C.due_date){O.push(C);continue}const E=new Date(C.due_date).getTime();!(C.status==="completed"||C.status==="cancelled")&&E<w?x.push(C):S.push(C)}const N=(C,E)=>{const A=C.due_date?new Date(C.due_date).getTime():0,H=E.due_date?new Date(E.due_date).getTime():0;return A-H};return{overdue:x.sort(N),upcoming:S.sort(N),undated:O}},[a,w]),b=async x=>{if(x.preventDefault(),!(!n||!(e!=null&&e.id))&&!(!m.doctorId||!m.date)){j(!0);try{await W2({title:"Appointment Request",description:m.message||"Patient requested an appointment",priority:"medium",status:"pending",assigned_to:m.doctorId,assigned_by:e.id,patient_id:n,due_date:m.date}),await Ay({sender_id:e.id,recipient_id:m.doctorId,subject:"Appointment Request",content:`Patient requests an appointment on ${m.date}.

Message: ${m.message||"(no additional message)"}
`}),d(!1),g({doctorId:"",date:"",message:""});const{data:S}=await rc(),O=(S||[]).filter(N=>N.patient_id===n);o(O),alert("Appointment request sent")}finally{j(!1)}}};return t?l.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):l.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[l.jsx(Oy,{className:"w-6 h-6 text-blue-600"})," Appointments"]}),l.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",onClick:()=>d(!0),children:[l.jsx(An,{className:"w-4 h-4"})," Request Appointment"]})]}),a.length===0?l.jsxs("div",{className:"text-center py-12 text-gray-500",children:[l.jsx(Pn,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),"No appointments found."]}):l.jsxs("div",{className:"space-y-6",children:[P.overdue.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold text-red-700 mb-2",children:"Overdue"}),l.jsx("div",{className:"space-y-3",children:P.overdue.map(x=>l.jsx("div",{className:"bg-white border border-red-200 rounded-xl p-4 shadow-sm",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900",children:x.title||"Appointment"}),l.jsx("div",{className:"text-sm text-gray-600 mt-1",children:x.description}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[l.jsx(Pn,{className:"w-4 h-4"})," ",x.due_date?new Date(x.due_date).toLocaleDateString():"—",x.assigned_to_user&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"•"}),l.jsx(nt,{className:"w-4 h-4"})," ",x.assigned_to_user.full_name]})]})]}),l.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-red-50 text-red-800 border-red-200 h-fit",children:"Overdue"})]})},x.id))})]}),P.upcoming.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Upcoming"}),l.jsx("div",{className:"space-y-3",children:P.upcoming.map(x=>l.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900",children:x.title||"Appointment"}),l.jsx("div",{className:"text-sm text-gray-600 mt-1",children:x.description}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[l.jsx(Pn,{className:"w-4 h-4"})," ",x.due_date?new Date(x.due_date).toLocaleDateString():"—",x.assigned_to_user&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"•"}),l.jsx(nt,{className:"w-4 h-4"})," ",x.assigned_to_user.full_name]})]})]}),l.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-blue-50 text-blue-800 border-blue-200 h-fit",children:x.status.replace("_"," ")})]})},x.id))})]}),P.undated.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Other"}),l.jsx("div",{className:"space-y-3",children:P.undated.map(x=>l.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900",children:x.title||"Appointment"}),l.jsx("div",{className:"text-sm text-gray-600 mt-1",children:x.description}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[l.jsx(Pn,{className:"w-4 h-4"})," —",x.assigned_to_user&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"•"}),l.jsx(nt,{className:"w-4 h-4"})," ",x.assigned_to_user.full_name]})]})]}),l.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-blue-50 text-blue-800 border-blue-200 h-fit",children:x.status.replace("_"," ")})]})},x.id))})]})]}),c&&l.jsxs("div",{className:"mt-8 bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[l.jsx(Zs,{className:"w-5 h-5 text-blue-600"})," New Appointment Request"]}),l.jsxs("form",{onSubmit:b,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor"}),l.jsxs("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.doctorId,onChange:x=>g({...m,doctorId:x.target.value}),required:!0,children:[l.jsx("option",{value:"",children:"Select doctor…"}),f.map(x=>l.jsx("option",{value:x.id,children:x.full_name},x.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),l.jsx("input",{type:"date",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.date,onChange:x=>g({...m,date:x.target.value}),required:!0})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (optional)"}),l.jsx("textarea",{rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.message,onChange:x=>g({...m,message:x.target.value}),placeholder:"Additional details…"})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-lg",onClick:()=>d(!1),children:"Cancel"}),l.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50",children:v?"Sending…":"Send Request"})]})]})]})]})},eG=async()=>{const{data:e,error:t}=await pn.from("volunteers").select("*, area:map_areas(*)").order("name",{ascending:!0});return{data:e,error:t}},tG=async e=>{const{data:t,error:r}=await pn.from("volunteers").insert([e]).select("*, area:map_areas(*)").maybeSingle();return{data:t,error:r}},rG=async(e,t)=>{const r={...t};delete r.area;const{data:n,error:i}=await pn.from("volunteers").update(r).eq("id",e).select("*, area:map_areas(*)").maybeSingle();return{data:n,error:i}},nG=async()=>{const{data:e}=await pn.from("volunteers").select("volunteer_code").order("volunteer_code",{ascending:!1}).limit(1).maybeSingle();if(!e||!e.volunteer_code)return"VHV-000001";const t=e.volunteer_code.match(/(\d+)/),n=(t?parseInt(t[1],10):0)+1;return`VHV-${String(n).padStart(6,"0")}`},Dp=new Map,iG=async e=>{if(!e||e.trim().length===0)return null;const t=e.toLowerCase().trim();if(Dp.has(t))return Dp.get(t);try{const r=encodeURIComponent(e),n=await fetch(`https://nominatim.openstreetmap.org/search?q=${r}&format=json&limit=1`,{headers:{"User-Agent":"HealthcareApp/1.0"}});if(!n.ok)return console.error("Geocoding API error:",n.statusText),null;const i=await n.json();if(!i||i.length===0)return console.warn("No geocoding results for address:",e),null;const a={lat:parseFloat(i[0].lat),lng:parseFloat(i[0].lon),display_name:i[0].display_name,confidence:parseFloat(i[0].importance||"0.5")};return Dp.set(t,a),a}catch(r){return console.error("Error geocoding address:",r),null}},aG=(e,t)=>{const[r,n]=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const c=t[a][1],d=t[a][0],f=t[o][1],h=t[o][0];d>n!=h>n&&r<(f-c)*(n-d)/(h-d)+c&&(i=!i)}return i},xT=(e,t,r)=>{const n=[e,t];for(const i of r)if(i.geometry&&i.geometry.coordinates&&i.geometry.coordinates.length>0){const a=i.geometry.coordinates[0];if(aG(n,a))return i}return null},sG=async(e,t,r)=>{if(typeof e!="number"||typeof t!="number")return{area:null,method:"none",confidence:"low"};const n=xT(e,t,r);return n?{area:n,method:"gps",confidence:"high"}:{area:null,method:"none",confidence:"low"}},oG=async(e,t)=>{const r=await iG(e);if(!r)return{area:null,method:"none",confidence:"low"};const n=xT(r.lat,r.lng,t);return n?{area:n,method:"address",confidence:r.confidence>.7?"high":r.confidence>.4?"medium":"low",geocodedLat:r.lat,geocodedLng:r.lng}:{area:null,method:"none",confidence:"low",geocodedLat:r.lat,geocodedLng:r.lng}},lG=async(e,t,r,n)=>{const i=await sG(e,t,n);if(i.area&&i.confidence==="high")return i;const a=await oG(r,n);return a.area?a:i.area?i:{area:null,method:"none",confidence:"low"}},cG=({record:e,onClose:t})=>{const r=!!e,[n,i]=_.useState(!1),[a,o]=_.useState([]),[c,d]=_.useState(null),[f,h]=_.useState(!1),[m,g]=_.useState({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",dob:(e==null?void 0:e.dob)||"",photo_url:(e==null?void 0:e.photo_url)||"",volunteer_code:(e==null?void 0:e.volunteer_code)||"",province:"",district:"",subdistrict:"",addressLine:"",lat:e==null?void 0:e.lat,lng:e==null?void 0:e.lng});_.useEffect(()=>{if((async()=>{const{data:b}=await Yx();o(b||[])})(),e!=null&&e.address){const b=e.address.split(",").map(x=>x.trim()).filter(Boolean);g(x=>({...x,province:b.slice(-1)[0]||"",district:b.slice(-2,-1)[0]||"",subdistrict:b.slice(-3,-2)[0]||"",addressLine:b.slice(0,-3).join(", ")}))}e||nG().then(b=>{g(x=>({...x,volunteer_code:b}))})},[e]),_.useEffect(()=>{const b=[m.addressLine,m.subdistrict,m.district,m.province].filter(Boolean).join(", ");if(m.lat&&m.lng||b.length>5){const x=setTimeout(async()=>{h(!0);const S=await lG(m.lat,m.lng,b,a);d(S),S.geocodedLat&&S.geocodedLng&&!m.lat&&!m.lng&&g(O=>({...O,lat:S.geocodedLat,lng:S.geocodedLng})),h(!1)},1e3);return()=>clearTimeout(x)}},[m.lat,m.lng,m.addressLine,m.subdistrict,m.district,m.province,a]);const v=async b=>{var x,S;b.preventDefault(),i(!0);try{const O=[m.addressLine,m.subdistrict,m.district,m.province].filter(Boolean).join(", "),N={name:m.name,email:m.email,phone:m.phone,address:O,lat:m.lat,lng:m.lng,dob:m.dob,photo_url:m.photo_url,area_id:((x=c==null?void 0:c.area)==null?void 0:x.id)||null,area_name:((S=c==null?void 0:c.area)==null?void 0:S.name)||null};if(r&&e){N.volunteer_code=m.volunteer_code;const{error:C}=await rG(e.id,N);if(C)throw C}else{const{data:C}=await pn.auth.admin.createUser({email:m.email,password:"TempPass123!",email_confirm:!0,user_metadata:{full_name:m.name,role:"volunteer"}});if(!C.user)throw new Error("Failed to create user account");N.user_id=C.user.id,N.volunteer_code=m.volunteer_code;const{error:E}=await tG(N);if(E)throw E}t()}catch(O){console.error("Error saving volunteer:",O),alert("Failed to save volunteer: "+O.message)}finally{i(!1)}},j=_.useMemo(()=>bf.divIcon({className:"vol-pin",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#22c55e;border:2px solid #fff;box-shadow:0 0 0 3px rgba(34,197,94,0.25);color:#fff;font-size:14px;line-height:1">🤝</div>',iconSize:[26,26],iconAnchor:[13,13]}),[]),w=m.lat&&m.lng?[m.lat,m.lng]:[13.793,100.321],P=()=>(Hx({click(b){g(x=>({...x,lat:b.latlng.lat,lng:b.latlng.lng}))}}),null);return l.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:r?"Edit Volunteer":"Create Volunteer"}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),l.jsx("input",{required:!0,className:"w-full px-4 py-3 border rounded-lg",value:m.name,onChange:b=>g(x=>({...x,name:b.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),l.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 border rounded-lg",value:m.email,onChange:b=>g(x=>({...x,email:b.target.value})),disabled:r})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),l.jsx("input",{className:"w-full px-4 py-3 border rounded-lg",value:m.phone,onChange:b=>g(x=>({...x,phone:b.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),l.jsx("input",{type:"date",className:"w-full px-4 py-3 border rounded-lg",value:m.dob,onChange:b=>g(x=>({...x,dob:b.target.value}))})]}),r&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Volunteer ID"}),l.jsx("input",{className:"w-full px-4 py-3 border rounded-lg bg-gray-50",value:m.volunteer_code,readOnly:!0})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),l.jsx("input",{placeholder:"Image URL",className:"w-full px-4 py-3 border rounded-lg",value:m.photo_url,onChange:b=>g(x=>({...x,photo_url:b.target.value}))})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Address Information"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province"}),l.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:m.province,onChange:b=>g(x=>({...x,province:b.target.value})),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{value:"Nakhon Pathom",children:"Nakhon Pathom"}),l.jsx("option",{value:"Bangkok",children:"Bangkok"}),l.jsx("option",{value:"Nonthaburi",children:"Nonthaburi"}),l.jsx("option",{value:"Pathum Thani",children:"Pathum Thani"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District"}),l.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:m.district,onChange:b=>g(x=>({...x,district:b.target.value})),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{value:"Phutthamonthon",children:"Phutthamonthon"}),l.jsx("option",{value:"Salaya",children:"Salaya"}),l.jsx("option",{value:"Bang Khae",children:"Bang Khae"}),l.jsx("option",{value:"Mueang",children:"Mueang"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-District"}),l.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:m.subdistrict,onChange:b=>g(x=>({...x,subdistrict:b.target.value})),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{value:"Phra Khanong Tai",children:"Phra Khanong Tai"}),l.jsx("option",{value:"Maha Sawat",children:"Maha Sawat"}),l.jsx("option",{value:"Salaya",children:"Salaya"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line"}),l.jsx("input",{className:"w-full px-4 py-3 border rounded-lg",placeholder:"House number, street, village",value:m.addressLine,onChange:b=>g(x=>({...x,addressLine:b.target.value}))})]})]})]}),c&&l.jsx("div",{className:`p-4 rounded-lg border-2 ${c.area?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:l.jsx("div",{className:"flex items-start gap-3",children:c.area?l.jsxs(l.Fragment,{children:[l.jsx(RD,{className:"w-5 h-5 text-green-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-green-900",children:"Area Assigned"}),l.jsxs("div",{className:"text-sm text-green-700 mt-1",children:["This volunteer will be assigned to: ",l.jsx("strong",{children:c.area.name})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:c.area.color}}),l.jsxs("span",{className:"text-xs text-green-600",children:["Confidence: ",c.confidence," (",c.method,")"]})]})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(DD,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-yellow-900",children:"No Area Match"}),l.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"This location is not within any defined area. The volunteer will be unassigned."})]})]})})}),f&&l.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[l.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"}),"Determining area assignment..."]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (click map to set)"}),l.jsx("div",{className:"h-80 w-full border rounded-lg overflow-hidden",children:l.jsxs(Fh,{center:w,zoom:14,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[l.jsx(Uh,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),l.jsx(P,{}),a.map(b=>{var O,N,C;if(!((N=(O=b.geometry)==null?void 0:O.coordinates)!=null&&N[0]))return null;const x=b.geometry.coordinates[0].map(E=>[E[0],E[1]]),S=((C=c==null?void 0:c.area)==null?void 0:C.id)===b.id;return l.jsx(jf,{positions:x,pathOptions:{color:b.color,fillColor:b.color,fillOpacity:S?.3:.1,weight:S?3:2}},b.id)}),m.lat&&m.lng&&l.jsx(wf,{position:[m.lat,m.lng],icon:j})]})}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700",children:"Latitude"}),l.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded",value:m.lat??"",onChange:b=>g(x=>({...x,lat:parseFloat(b.target.value)}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700",children:"Longitude"}),l.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded",value:m.lng??"",onChange:b=>g(x=>({...x,lng:parseFloat(b.target.value)}))})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border rounded-lg hover:bg-gray-50",children:"Cancel"}),l.jsxs("button",{type:"submit",disabled:n,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50",children:[n?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsx(wo,{className:"w-5 h-5"}),n?"Saving...":"Save Volunteer"]})]})]})]})},uG=()=>{const{user:e}=Ye(),t=(e==null?void 0:e.role)==="doctor",[r,n]=_.useState([]),[i,a]=_.useState(!0),[o,c]=_.useState(""),[d,f]=_.useState(!1),[h,m]=_.useState(null),g=async()=>{const{data:j}=await eG();n(j||[]),a(!1)};_.useEffect(()=>{g()},[]);const v=_.useMemo(()=>{const j=o.toLowerCase();return r.filter(w=>w.name.toLowerCase().includes(j)||(w.volunteer_code||"").toLowerCase().includes(j)||(w.email||"").toLowerCase().includes(j)||(w.phone||"").toLowerCase().includes(j)||(w.area_name||"").toLowerCase().includes(j))},[r,o]);return i?l.jsx("div",{className:"py-10 text-center",children:"Loading…"}):d?l.jsx(cG,{record:h,onClose:()=>{f(!1),m(null),g()}}):l.jsxs("div",{className:"py-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"relative w-full max-w-xl",children:[l.jsx(za,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),l.jsx("input",{value:o,onChange:j=>c(j.target.value),placeholder:"Search volunteers...",className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t&&l.jsxs("button",{onClick:()=>f(!0),className:"ml-3 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[l.jsx(An,{className:"w-4 h-4"}),"Create Volunteer"]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-sky-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Volunteer ID"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Phone"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Area"}),l.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[v.map(j=>{var w;return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm",children:j.volunteer_code}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[j.photo_url?l.jsx("img",{src:j.photo_url,alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}):l.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100"}),l.jsx("span",{children:j.name})]})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:j.email}),l.jsx("td",{className:"px-4 py-3 text-sm",children:j.phone||"-"}),l.jsx("td",{className:"px-4 py-3 text-sm",children:j.area_name?l.jsxs("div",{className:"flex items-center gap-2",children:[((w=j.area)==null?void 0:w.color)&&l.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:j.area.color}}),l.jsx("span",{children:j.area_name})]}):l.jsx("span",{className:"text-gray-400 text-xs",children:"Not assigned"})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsxs("button",{onClick:()=>{m(j),f(!0)},className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[l.jsx($2,{className:"w-4 h-4"}),"View Detail"]})})]},j.id)}),v.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No volunteers found"})})]})]})})})]})},dG=()=>{const{user:e}=Ye(),[t,r]=_.useState((e==null?void 0:e.full_name)||""),[n,i]=_.useState((e==null?void 0:e.photo_url)||""),[a,o]=_.useState(!1),[c,d]=_.useState((e==null?void 0:e.email)||""),[f,h]=_.useState(""),[m,g]=_.useState(""),[v,j]=_.useState(""),[w,P]=_.useState(""),[b,x]=_.useState(""),[S,O]=_.useState("");_.useEffect(()=>{r((e==null?void 0:e.full_name)||""),i((e==null?void 0:e.photo_url)||""),d((e==null?void 0:e.email)||"")},[e]);const N=E=>{if(!E)return;const A=new FileReader;A.onload=()=>i(String(A.result)),A.readAsDataURL(E)},C=async()=>{e&&(o(!0),await rI(e.id,{full_name:t,photo_url:n,email:c,phone:v,gender:f,dob:m,address:w}),o(!1),alert("Profile updated"))};return l.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"My Profile"}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[l.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-100",children:n?l.jsx("img",{src:n,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"👤"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-500",children:"Role"}),l.jsx("div",{className:"font-medium text-gray-900 capitalize",children:e==null?void 0:e.role})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),l.jsx("input",{className:"w-full px-4 py-3 border rounded",value:t,onChange:E=>r(E.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx("input",{type:"file",accept:"image/*",onChange:E=>{var A;return N((A=E.target.files)==null?void 0:A[0])}}),l.jsx("span",{className:"text-sm text-gray-500",children:"or"}),l.jsx("input",{className:"w-full md:flex-1 px-3 py-2 border rounded",placeholder:"Image URL",value:n,onChange:E=>i(E.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),l.jsx("input",{className:"w-full px-4 py-3 border rounded",type:"email",value:c,onChange:E=>d(E.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),l.jsx("input",{className:"w-full px-4 py-3 border rounded",value:v,onChange:E=>j(E.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),l.jsxs("select",{className:"w-full px-4 py-3 border rounded",value:f,onChange:E=>h(E.target.value),children:[l.jsx("option",{value:"",children:"Select"}),l.jsx("option",{value:"male",children:"Male"}),l.jsx("option",{value:"female",children:"Female"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),l.jsx("input",{className:"w-full px-4 py-3 border rounded",type:"date",value:m,onChange:E=>g(E.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),l.jsx("input",{className:"w-full px-4 py-3 border rounded",value:w,onChange:E=>P(E.target.value)})]})]}),l.jsx("div",{className:"flex justify-end mt-6",children:l.jsx("button",{onClick:C,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded",children:a?"Saving…":"Save Changes"})}),l.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Password"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),l.jsx("input",{type:"password",className:"w-full px-4 py-3 border rounded",value:b,onChange:E=>x(E.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),l.jsx("input",{type:"password",className:"w-full px-4 py-3 border rounded",value:S,onChange:E=>O(E.target.value)})]})]}),l.jsx("div",{className:"flex justify-end mt-4",children:l.jsx("button",{className:"px-4 py-2 border rounded",onClick:async()=>{if(!e)return;if(b.length<6)return alert("Password must be at least 6 characters");if(b!==S)return alert("Passwords do not match");const{error:E}=await Ey(e.id,b);if(E)return alert(E.message);x(""),O(""),alert("Password updated")},children:"Update Password"})})]})]})]})};function fG(){const{user:e,loading:t}=Ye(),[r,n]=_.useState("dashboard"),[i,a]=_.useState(!1);if(_.useEffect(()=>{PD()},[]),t)return l.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})});if(!e)return l.jsx(mI,{});const o=()=>{switch(r){case"dashboard":return l.jsx(ps,{});case"patients":return e.role==="doctor"||e.role==="volunteer"?l.jsx(jZ,{}):l.jsx(ps,{});case"profile":return e.role==="patient"?l.jsx(SZ,{}):l.jsx(ps,{});case"messages":return l.jsx(PZ,{});case"tasks":return e.role==="volunteer"?l.jsx(NZ,{}):l.jsx(eS,{personalOnly:!0,title:"My Tasks"});case"volunteer-tasks":return e.role==="doctor"?l.jsx(kZ,{}):l.jsx(eS,{});case"volunteers":return e.role==="doctor"?l.jsx(uG,{}):l.jsx(ps,{});case"map":return l.jsx(Yq,{onBack:()=>n("dashboard")});case"records":return l.jsx(Jq,{});case"appointments":return e.role==="patient"?l.jsx(Qq,{}):l.jsx(ps,{});case"user-profile":return l.jsx(dG,{});default:return l.jsx(ps,{})}};return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[l.jsx(gI,{currentView:r,onViewChange:n,mobileOpen:i,setMobileOpen:a}),l.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[l.jsx(pI,{currentView:r,onViewChange:n,onMenuClick:()=>a(!0)}),l.jsx("main",{className:"p-4 md:p-6 max-w-7xl w-full mx-auto",children:o()})]})]})}function hG(){return l.jsx(AD,{children:l.jsx(fG,{})})}A2(document.getElementById("root")).render(l.jsx(_.StrictMode,{children:l.jsx(hG,{})}));
