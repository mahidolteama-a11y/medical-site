var _O=Object.defineProperty;var wO=(e,t,n)=>t in e?_O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Eh=(e,t,n)=>wO(e,typeof t!="symbol"?t+"":t,n);function jO(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var NO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var b1={exports:{}},Dd={},_1={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tl=Symbol.for("react.element"),SO=Symbol.for("react.portal"),PO=Symbol.for("react.fragment"),kO=Symbol.for("react.strict_mode"),CO=Symbol.for("react.profiler"),EO=Symbol.for("react.provider"),OO=Symbol.for("react.context"),AO=Symbol.for("react.forward_ref"),TO=Symbol.for("react.suspense"),MO=Symbol.for("react.memo"),LO=Symbol.for("react.lazy"),Sx=Symbol.iterator;function DO(e){return e===null||typeof e!="object"?null:(e=Sx&&e[Sx]||e["@@iterator"],typeof e=="function"?e:null)}var w1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j1=Object.assign,N1={};function Ws(e,t,n){this.props=e,this.context=t,this.refs=N1,this.updater=n||w1}Ws.prototype.isReactComponent={};Ws.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ws.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function S1(){}S1.prototype=Ws.prototype;function Pg(e,t,n){this.props=e,this.context=t,this.refs=N1,this.updater=n||w1}var kg=Pg.prototype=new S1;kg.constructor=Pg;j1(kg,Ws.prototype);kg.isPureReactComponent=!0;var Px=Array.isArray,P1=Object.prototype.hasOwnProperty,Cg={current:null},k1={key:!0,ref:!0,__self:!0,__source:!0};function C1(e,t,n){var r,i={},s=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(s=""+t.key),t)P1.call(t,r)&&!k1.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var d=Array(u),h=0;h<u;h++)d[h]=arguments[h+2];i.children=d}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Tl,type:e,key:s,ref:l,props:i,_owner:Cg.current}}function IO(e,t){return{$$typeof:Tl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Eg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tl}function RO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var kx=/\/+/g;function Oh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RO(""+e.key):t.toString(36)}function tu(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Tl:case SO:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+Oh(l,0):r,Px(i)?(n="",e!=null&&(n=e.replace(kx,"$&/")+"/"),tu(i,t,n,"",function(h){return h})):i!=null&&(Eg(i)&&(i=IO(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(kx,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",Px(e))for(var u=0;u<e.length;u++){s=e[u];var d=r+Oh(s,u);l+=tu(s,t,n,d,i)}else if(d=DO(e),typeof d=="function")for(e=d.call(e),u=0;!(s=e.next()).done;)s=s.value,d=r+Oh(s,u++),l+=tu(s,t,n,d,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function _c(e,t,n){if(e==null)return e;var r=[],i=0;return tu(e,r,"","",function(s){return t.call(n,s,i++)}),r}function zO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Yt={current:null},nu={transition:null},$O={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:nu,ReactCurrentOwner:Cg};function E1(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:_c,forEach:function(e,t,n){_c(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _c(e,function(){t++}),t},toArray:function(e){return _c(e,function(t){return t})||[]},only:function(e){if(!Eg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Ws;je.Fragment=PO;je.Profiler=CO;je.PureComponent=Pg;je.StrictMode=kO;je.Suspense=TO;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$O;je.act=E1;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=j1({},e.props),i=e.key,s=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,l=Cg.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)P1.call(t,d)&&!k1.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Tl,type:e.type,key:i,ref:s,props:r,_owner:l}};je.createContext=function(e){return e={$$typeof:OO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:EO,_context:e},e.Consumer=e};je.createElement=C1;je.createFactory=function(e){var t=C1.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:AO,render:e}};je.isValidElement=Eg;je.lazy=function(e){return{$$typeof:LO,_payload:{_status:-1,_result:e},_init:zO}};je.memo=function(e,t){return{$$typeof:MO,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=nu.transition;nu.transition={};try{e()}finally{nu.transition=t}};je.unstable_act=E1;je.useCallback=function(e,t){return Yt.current.useCallback(e,t)};je.useContext=function(e){return Yt.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return Yt.current.useDeferredValue(e)};je.useEffect=function(e,t){return Yt.current.useEffect(e,t)};je.useId=function(){return Yt.current.useId()};je.useImperativeHandle=function(e,t,n){return Yt.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return Yt.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return Yt.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return Yt.current.useMemo(e,t)};je.useReducer=function(e,t,n){return Yt.current.useReducer(e,t,n)};je.useRef=function(e){return Yt.current.useRef(e)};je.useState=function(e){return Yt.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return Yt.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return Yt.current.useTransition()};je.version="18.3.1";_1.exports=je;var x=_1.exports;const yu=Mr(x),BO=jO({__proto__:null,default:yu},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FO=x,UO=Symbol.for("react.element"),HO=Symbol.for("react.fragment"),ZO=Object.prototype.hasOwnProperty,WO=FO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VO={key:!0,ref:!0,__self:!0,__source:!0};function O1(e,t,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)ZO.call(t,r)&&!VO.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:UO,type:e,key:s,ref:l,props:i,_owner:WO.current}}Dd.Fragment=HO;Dd.jsx=O1;Dd.jsxs=O1;b1.exports=Dd;var a=b1.exports,A1={exports:{}},kn={},T1={exports:{}},M1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,Q){var G=D.length;D.push(Q);e:for(;0<G;){var V=G-1>>>1,Y=D[V];if(0<i(Y,Q))D[V]=Q,D[G]=Y,G=V;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var Q=D[0],G=D.pop();if(G!==Q){D[0]=G;e:for(var V=0,Y=D.length,H=Y>>>1;V<H;){var J=2*(V+1)-1,re=D[J],le=J+1,Ne=D[le];if(0>i(re,G))le<Y&&0>i(Ne,re)?(D[V]=Ne,D[le]=G,V=le):(D[V]=re,D[J]=G,V=J);else if(le<Y&&0>i(Ne,G))D[V]=Ne,D[le]=G,V=le;else break e}}return Q}function i(D,Q){var G=D.sortIndex-Q.sortIndex;return G!==0?G:D.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],h=[],f=1,m=null,g=3,v=!1,N=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(D){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=D)r(h),Q.sortIndex=Q.expirationTime,t(d,Q);else break;Q=n(h)}}function k(D){if(w=!1,_(D),!N)if(n(d)!==null)N=!0,z(C);else{var Q=n(h);Q!==null&&K(k,Q.startTime-D)}}function C(D,Q){N=!1,w&&(w=!1,b(R),R=-1),v=!0;var G=g;try{for(_(Q),m=n(d);m!==null&&(!(m.expirationTime>Q)||D&&!M());){var V=m.callback;if(typeof V=="function"){m.callback=null,g=m.priorityLevel;var Y=V(m.expirationTime<=Q);Q=e.unstable_now(),typeof Y=="function"?m.callback=Y:m===n(d)&&r(d),_(Q)}else r(d);m=n(d)}if(m!==null)var H=!0;else{var J=n(h);J!==null&&K(k,J.startTime-Q),H=!1}return H}finally{m=null,g=G,v=!1}}var A=!1,T=null,R=-1,B=5,I=-1;function M(){return!(e.unstable_now()-I<B)}function $(){if(T!==null){var D=e.unstable_now();I=D;var Q=!0;try{Q=T(!0,D)}finally{Q?F():(A=!1,T=null)}}else A=!1}var F;if(typeof j=="function")F=function(){j($)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,Z=E.port2;E.port1.onmessage=$,F=function(){Z.postMessage(null)}}else F=function(){S($,0)};function z(D){T=D,A||(A=!0,F())}function K(D,Q){R=S(function(){D(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){N||v||(N=!0,z(C))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(D){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var G=g;g=Q;try{return D()}finally{g=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,Q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=g;g=D;try{return Q()}finally{g=G}},e.unstable_scheduleCallback=function(D,Q,G){var V=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?V+G:V):G=V,D){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=G+Y,D={id:f++,callback:Q,priorityLevel:D,startTime:G,expirationTime:Y,sortIndex:-1},G>V?(D.sortIndex=G,t(h,D),n(d)===null&&D===n(h)&&(w?(b(R),R=-1):w=!0,K(k,G-V))):(D.sortIndex=Y,t(d,D),N||v||(N=!0,z(C))),D},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(D){var Q=g;return function(){var G=g;g=Q;try{return D.apply(this,arguments)}finally{g=G}}}})(M1);T1.exports=M1;var KO=T1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qO=x,jn=KO;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L1=new Set,nl={};function Ta(e,t){_s(e,t),_s(e+"Capture",t)}function _s(e,t){for(nl[e]=t,e=0;e<t.length;e++)L1.add(t[e])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lm=Object.prototype.hasOwnProperty,GO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cx={},Ex={};function YO(e){return Lm.call(Ex,e)?!0:Lm.call(Cx,e)?!1:GO.test(e)?Ex[e]=!0:(Cx[e]=!0,!1)}function XO(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function QO(e,t,n,r){if(t===null||typeof t>"u"||XO(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xt(e,t,n,r,i,s,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=l}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new Xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new Xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new Xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new Xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new Xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new Xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new Xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new Xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new Xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Og=/[\-:]([a-z])/g;function Ag(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Og,Ag);Et[t]=new Xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Og,Ag);Et[t]=new Xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Og,Ag);Et[t]=new Xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new Xt(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new Xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tg(e,t,n,r){var i=Et.hasOwnProperty(t)?Et[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(QO(t,n,i,r)&&(n=null),r||i===null?YO(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ai=qO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wc=Symbol.for("react.element"),Xa=Symbol.for("react.portal"),Qa=Symbol.for("react.fragment"),Mg=Symbol.for("react.strict_mode"),Dm=Symbol.for("react.profiler"),D1=Symbol.for("react.provider"),I1=Symbol.for("react.context"),Lg=Symbol.for("react.forward_ref"),Im=Symbol.for("react.suspense"),Rm=Symbol.for("react.suspense_list"),Dg=Symbol.for("react.memo"),pi=Symbol.for("react.lazy"),R1=Symbol.for("react.offscreen"),Ox=Symbol.iterator;function bo(e){return e===null||typeof e!="object"?null:(e=Ox&&e[Ox]||e["@@iterator"],typeof e=="function"?e:null)}var Ge=Object.assign,Ah;function zo(e){if(Ah===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ah=t&&t[1]||""}return`
`+Ah+e}var Th=!1;function Mh(e,t){if(!e||Th)return"";Th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,u=s.length-1;1<=l&&0<=u&&i[l]!==s[u];)u--;for(;1<=l&&0<=u;l--,u--)if(i[l]!==s[u]){if(l!==1||u!==1)do if(l--,u--,0>u||i[l]!==s[u]){var d=`
`+i[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=u);break}}}finally{Th=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zo(e):""}function JO(e){switch(e.tag){case 5:return zo(e.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return e=Mh(e.type,!1),e;case 11:return e=Mh(e.type.render,!1),e;case 1:return e=Mh(e.type,!0),e;default:return""}}function zm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qa:return"Fragment";case Xa:return"Portal";case Dm:return"Profiler";case Mg:return"StrictMode";case Im:return"Suspense";case Rm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case I1:return(e.displayName||"Context")+".Consumer";case D1:return(e._context.displayName||"Context")+".Provider";case Lg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dg:return t=e.displayName||null,t!==null?t:zm(e.type)||"Memo";case pi:t=e._payload,e=e._init;try{return zm(e(t))}catch{}}return null}function eA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zm(t);case 8:return t===Mg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Di(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function z1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tA(e){var t=z1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jc(e){e._valueTracker||(e._valueTracker=tA(e))}function $1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z1(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $m(e,t){var n=t.checked;return Ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ax(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Di(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function B1(e,t){t=t.checked,t!=null&&Tg(e,"checked",t,!1)}function Bm(e,t){B1(e,t);var n=Di(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fm(e,t.type,n):t.hasOwnProperty("defaultValue")&&Fm(e,t.type,Di(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Tx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Fm(e,t,n){(t!=="number"||xu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $o=Array.isArray;function fs(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Di(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Um(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ne(92));if($o(n)){if(1<n.length)throw Error(ne(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Di(n)}}function F1(e,t){var n=Di(t.value),r=Di(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Lx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function U1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?U1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Nc,H1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Nc=Nc||document.createElement("div"),Nc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Nc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nA=["Webkit","ms","Moz","O"];Object.keys(Zo).forEach(function(e){nA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zo[t]=Zo[e]})});function Z1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zo.hasOwnProperty(e)&&Zo[e]?(""+t).trim():t+"px"}function W1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Z1(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var rA=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zm(e,t){if(t){if(rA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function Wm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vm=null;function Ig(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Km=null,hs=null,ms=null;function Dx(e){if(e=Dl(e)){if(typeof Km!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=Bd(t),Km(e.stateNode,e.type,t))}}function V1(e){hs?ms?ms.push(e):ms=[e]:hs=e}function K1(){if(hs){var e=hs,t=ms;if(ms=hs=null,Dx(e),t)for(e=0;e<t.length;e++)Dx(t[e])}}function q1(e,t){return e(t)}function G1(){}var Lh=!1;function Y1(e,t,n){if(Lh)return e(t,n);Lh=!0;try{return q1(e,t,n)}finally{Lh=!1,(hs!==null||ms!==null)&&(G1(),K1())}}function il(e,t){var n=e.stateNode;if(n===null)return null;var r=Bd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ne(231,t,typeof n));return n}var qm=!1;if(Xr)try{var _o={};Object.defineProperty(_o,"passive",{get:function(){qm=!0}}),window.addEventListener("test",_o,_o),window.removeEventListener("test",_o,_o)}catch{qm=!1}function iA(e,t,n,r,i,s,l,u,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(f){this.onError(f)}}var Wo=!1,bu=null,_u=!1,Gm=null,aA={onError:function(e){Wo=!0,bu=e}};function sA(e,t,n,r,i,s,l,u,d){Wo=!1,bu=null,iA.apply(aA,arguments)}function oA(e,t,n,r,i,s,l,u,d){if(sA.apply(this,arguments),Wo){if(Wo){var h=bu;Wo=!1,bu=null}else throw Error(ne(198));_u||(_u=!0,Gm=h)}}function Ma(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function X1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ix(e){if(Ma(e)!==e)throw Error(ne(188))}function lA(e){var t=e.alternate;if(!t){if(t=Ma(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ix(i),e;if(s===r)return Ix(i),t;s=s.sibling}throw Error(ne(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,u=i.child;u;){if(u===n){l=!0,n=i,r=s;break}if(u===r){l=!0,r=i,n=s;break}u=u.sibling}if(!l){for(u=s.child;u;){if(u===n){l=!0,n=s,r=i;break}if(u===r){l=!0,r=s,n=i;break}u=u.sibling}if(!l)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?e:t}function Q1(e){return e=lA(e),e!==null?J1(e):null}function J1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=J1(e);if(t!==null)return t;e=e.sibling}return null}var ej=jn.unstable_scheduleCallback,Rx=jn.unstable_cancelCallback,cA=jn.unstable_shouldYield,uA=jn.unstable_requestPaint,Je=jn.unstable_now,dA=jn.unstable_getCurrentPriorityLevel,Rg=jn.unstable_ImmediatePriority,tj=jn.unstable_UserBlockingPriority,wu=jn.unstable_NormalPriority,fA=jn.unstable_LowPriority,nj=jn.unstable_IdlePriority,Id=null,Cr=null;function hA(e){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(Id,e,void 0,(e.current.flags&128)===128)}catch{}}var hr=Math.clz32?Math.clz32:gA,mA=Math.log,pA=Math.LN2;function gA(e){return e>>>=0,e===0?32:31-(mA(e)/pA|0)|0}var Sc=64,Pc=4194304;function Bo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ju(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,l=n&268435455;if(l!==0){var u=l&~i;u!==0?r=Bo(u):(s&=l,s!==0&&(r=Bo(s)))}else l=n&~i,l!==0?r=Bo(l):s!==0&&(r=Bo(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-hr(t),i=1<<n,r|=e[n],t&=~i;return r}function vA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-hr(s),u=1<<l,d=i[l];d===-1?(!(u&n)||u&r)&&(i[l]=vA(u,t)):d<=t&&(e.expiredLanes|=u),s&=~u}}function Ym(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rj(){var e=Sc;return Sc<<=1,!(Sc&4194240)&&(Sc=64),e}function Dh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ml(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hr(t),e[t]=n}function xA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-hr(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function zg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-hr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ae=0;function ij(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var aj,$g,sj,oj,lj,Xm=!1,kc=[],Si=null,Pi=null,ki=null,al=new Map,sl=new Map,xi=[],bA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zx(e,t){switch(e){case"focusin":case"focusout":Si=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":al.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(t.pointerId)}}function wo(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Dl(t),t!==null&&$g(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function _A(e,t,n,r,i){switch(t){case"focusin":return Si=wo(Si,e,t,n,r,i),!0;case"dragenter":return Pi=wo(Pi,e,t,n,r,i),!0;case"mouseover":return ki=wo(ki,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return al.set(s,wo(al.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,sl.set(s,wo(sl.get(s)||null,e,t,n,r,i)),!0}return!1}function cj(e){var t=aa(e.target);if(t!==null){var n=Ma(t);if(n!==null){if(t=n.tag,t===13){if(t=X1(n),t!==null){e.blockedOn=t,lj(e.priority,function(){sj(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ru(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Vm=r,n.target.dispatchEvent(r),Vm=null}else return t=Dl(n),t!==null&&$g(t),e.blockedOn=n,!1;t.shift()}return!0}function $x(e,t,n){ru(e)&&n.delete(t)}function wA(){Xm=!1,Si!==null&&ru(Si)&&(Si=null),Pi!==null&&ru(Pi)&&(Pi=null),ki!==null&&ru(ki)&&(ki=null),al.forEach($x),sl.forEach($x)}function jo(e,t){e.blockedOn===t&&(e.blockedOn=null,Xm||(Xm=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,wA)))}function ol(e){function t(i){return jo(i,e)}if(0<kc.length){jo(kc[0],e);for(var n=1;n<kc.length;n++){var r=kc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Si!==null&&jo(Si,e),Pi!==null&&jo(Pi,e),ki!==null&&jo(ki,e),al.forEach(t),sl.forEach(t),n=0;n<xi.length;n++)r=xi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xi.length&&(n=xi[0],n.blockedOn===null);)cj(n),n.blockedOn===null&&xi.shift()}var ps=ai.ReactCurrentBatchConfig,Nu=!0;function jA(e,t,n,r){var i=Ae,s=ps.transition;ps.transition=null;try{Ae=1,Bg(e,t,n,r)}finally{Ae=i,ps.transition=s}}function NA(e,t,n,r){var i=Ae,s=ps.transition;ps.transition=null;try{Ae=4,Bg(e,t,n,r)}finally{Ae=i,ps.transition=s}}function Bg(e,t,n,r){if(Nu){var i=Qm(e,t,n,r);if(i===null)Wh(e,t,r,Su,n),zx(e,r);else if(_A(i,e,t,n,r))r.stopPropagation();else if(zx(e,r),t&4&&-1<bA.indexOf(e)){for(;i!==null;){var s=Dl(i);if(s!==null&&aj(s),s=Qm(e,t,n,r),s===null&&Wh(e,t,r,Su,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wh(e,t,r,null,n)}}var Su=null;function Qm(e,t,n,r){if(Su=null,e=Ig(r),e=aa(e),e!==null)if(t=Ma(e),t===null)e=null;else if(n=t.tag,n===13){if(e=X1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Su=e,null}function uj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dA()){case Rg:return 1;case tj:return 4;case wu:case fA:return 16;case nj:return 536870912;default:return 16}default:return 16}}var ji=null,Fg=null,iu=null;function dj(){if(iu)return iu;var e,t=Fg,n=t.length,r,i="value"in ji?ji.value:ji.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[s-r];r++);return iu=i.slice(e,1<r?1-r:void 0)}function au(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cc(){return!0}function Bx(){return!1}function Cn(e){function t(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Cc:Bx,this.isPropagationStopped=Bx,this}return Ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cc)},persist:function(){},isPersistent:Cc}),t}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ug=Cn(Vs),Ll=Ge({},Vs,{view:0,detail:0}),SA=Cn(Ll),Ih,Rh,No,Rd=Ge({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==No&&(No&&e.type==="mousemove"?(Ih=e.screenX-No.screenX,Rh=e.screenY-No.screenY):Rh=Ih=0,No=e),Ih)},movementY:function(e){return"movementY"in e?e.movementY:Rh}}),Fx=Cn(Rd),PA=Ge({},Rd,{dataTransfer:0}),kA=Cn(PA),CA=Ge({},Ll,{relatedTarget:0}),zh=Cn(CA),EA=Ge({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),OA=Cn(EA),AA=Ge({},Vs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),TA=Cn(AA),MA=Ge({},Vs,{data:0}),Ux=Cn(MA),LA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=IA[e])?!!t[e]:!1}function Hg(){return RA}var zA=Ge({},Ll,{key:function(e){if(e.key){var t=LA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=au(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hg,charCode:function(e){return e.type==="keypress"?au(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?au(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$A=Cn(zA),BA=Ge({},Rd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hx=Cn(BA),FA=Ge({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hg}),UA=Cn(FA),HA=Ge({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZA=Cn(HA),WA=Ge({},Rd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),VA=Cn(WA),KA=[9,13,27,32],Zg=Xr&&"CompositionEvent"in window,Vo=null;Xr&&"documentMode"in document&&(Vo=document.documentMode);var qA=Xr&&"TextEvent"in window&&!Vo,fj=Xr&&(!Zg||Vo&&8<Vo&&11>=Vo),Zx=" ",Wx=!1;function hj(e,t){switch(e){case"keyup":return KA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ja=!1;function GA(e,t){switch(e){case"compositionend":return mj(t);case"keypress":return t.which!==32?null:(Wx=!0,Zx);case"textInput":return e=t.data,e===Zx&&Wx?null:e;default:return null}}function YA(e,t){if(Ja)return e==="compositionend"||!Zg&&hj(e,t)?(e=dj(),iu=Fg=ji=null,Ja=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fj&&t.locale!=="ko"?null:t.data;default:return null}}var XA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XA[e.type]:t==="textarea"}function pj(e,t,n,r){V1(r),t=Pu(t,"onChange"),0<t.length&&(n=new Ug("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ko=null,ll=null;function QA(e){Pj(e,0)}function zd(e){var t=ns(e);if($1(t))return e}function JA(e,t){if(e==="change")return t}var gj=!1;if(Xr){var $h;if(Xr){var Bh="oninput"in document;if(!Bh){var Kx=document.createElement("div");Kx.setAttribute("oninput","return;"),Bh=typeof Kx.oninput=="function"}$h=Bh}else $h=!1;gj=$h&&(!document.documentMode||9<document.documentMode)}function qx(){Ko&&(Ko.detachEvent("onpropertychange",vj),ll=Ko=null)}function vj(e){if(e.propertyName==="value"&&zd(ll)){var t=[];pj(t,ll,e,Ig(e)),Y1(QA,t)}}function eT(e,t,n){e==="focusin"?(qx(),Ko=t,ll=n,Ko.attachEvent("onpropertychange",vj)):e==="focusout"&&qx()}function tT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zd(ll)}function nT(e,t){if(e==="click")return zd(t)}function rT(e,t){if(e==="input"||e==="change")return zd(t)}function iT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pr=typeof Object.is=="function"?Object.is:iT;function cl(e,t){if(pr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lm.call(t,i)||!pr(e[i],t[i]))return!1}return!0}function Gx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yx(e,t){var n=Gx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gx(n)}}function yj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xj(){for(var e=window,t=xu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xu(e.document)}return t}function Wg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function aT(e){var t=xj(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&yj(n.ownerDocument.documentElement,n)){if(r!==null&&Wg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Yx(n,s);var l=Yx(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sT=Xr&&"documentMode"in document&&11>=document.documentMode,es=null,Jm=null,qo=null,ep=!1;function Xx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ep||es==null||es!==xu(r)||(r=es,"selectionStart"in r&&Wg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qo&&cl(qo,r)||(qo=r,r=Pu(Jm,"onSelect"),0<r.length&&(t=new Ug("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=es)))}function Ec(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ts={animationend:Ec("Animation","AnimationEnd"),animationiteration:Ec("Animation","AnimationIteration"),animationstart:Ec("Animation","AnimationStart"),transitionend:Ec("Transition","TransitionEnd")},Fh={},bj={};Xr&&(bj=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function $d(e){if(Fh[e])return Fh[e];if(!ts[e])return e;var t=ts[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bj)return Fh[e]=t[n];return e}var _j=$d("animationend"),wj=$d("animationiteration"),jj=$d("animationstart"),Nj=$d("transitionend"),Sj=new Map,Qx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $i(e,t){Sj.set(e,t),Ta(t,[e])}for(var Uh=0;Uh<Qx.length;Uh++){var Hh=Qx[Uh],oT=Hh.toLowerCase(),lT=Hh[0].toUpperCase()+Hh.slice(1);$i(oT,"on"+lT)}$i(_j,"onAnimationEnd");$i(wj,"onAnimationIteration");$i(jj,"onAnimationStart");$i("dblclick","onDoubleClick");$i("focusin","onFocus");$i("focusout","onBlur");$i(Nj,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fo));function Jx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,oA(r,t,void 0,e),e.currentTarget=null}function Pj(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var l=r.length-1;0<=l;l--){var u=r[l],d=u.instance,h=u.currentTarget;if(u=u.listener,d!==s&&i.isPropagationStopped())break e;Jx(i,u,h),s=d}else for(l=0;l<r.length;l++){if(u=r[l],d=u.instance,h=u.currentTarget,u=u.listener,d!==s&&i.isPropagationStopped())break e;Jx(i,u,h),s=d}}}if(_u)throw e=Gm,_u=!1,Gm=null,e}function Be(e,t){var n=t[ap];n===void 0&&(n=t[ap]=new Set);var r=e+"__bubble";n.has(r)||(kj(t,e,2,!1),n.add(r))}function Zh(e,t,n){var r=0;t&&(r|=4),kj(n,e,r,t)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function ul(e){if(!e[Oc]){e[Oc]=!0,L1.forEach(function(n){n!=="selectionchange"&&(cT.has(n)||Zh(n,!1,e),Zh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Oc]||(t[Oc]=!0,Zh("selectionchange",!1,t))}}function kj(e,t,n,r){switch(uj(t)){case 1:var i=jA;break;case 4:i=NA;break;default:i=Bg}n=i.bind(null,t,n,e),i=void 0,!qm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wh(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;u!==null;){if(l=aa(u),l===null)return;if(d=l.tag,d===5||d===6){r=s=l;continue e}u=u.parentNode}}r=r.return}Y1(function(){var h=s,f=Ig(n),m=[];e:{var g=Sj.get(e);if(g!==void 0){var v=Ug,N=e;switch(e){case"keypress":if(au(n)===0)break e;case"keydown":case"keyup":v=$A;break;case"focusin":N="focus",v=zh;break;case"focusout":N="blur",v=zh;break;case"beforeblur":case"afterblur":v=zh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Fx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=kA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=UA;break;case _j:case wj:case jj:v=OA;break;case Nj:v=ZA;break;case"scroll":v=SA;break;case"wheel":v=VA;break;case"copy":case"cut":case"paste":v=TA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Hx}var w=(t&4)!==0,S=!w&&e==="scroll",b=w?g!==null?g+"Capture":null:g;w=[];for(var j=h,_;j!==null;){_=j;var k=_.stateNode;if(_.tag===5&&k!==null&&(_=k,b!==null&&(k=il(j,b),k!=null&&w.push(dl(j,k,_)))),S)break;j=j.return}0<w.length&&(g=new v(g,N,null,n,f),m.push({event:g,listeners:w}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==Vm&&(N=n.relatedTarget||n.fromElement)&&(aa(N)||N[Qr]))break e;if((v||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,v?(N=n.relatedTarget||n.toElement,v=h,N=N?aa(N):null,N!==null&&(S=Ma(N),N!==S||N.tag!==5&&N.tag!==6)&&(N=null)):(v=null,N=h),v!==N)){if(w=Fx,k="onMouseLeave",b="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(w=Hx,k="onPointerLeave",b="onPointerEnter",j="pointer"),S=v==null?g:ns(v),_=N==null?g:ns(N),g=new w(k,j+"leave",v,n,f),g.target=S,g.relatedTarget=_,k=null,aa(f)===h&&(w=new w(b,j+"enter",N,n,f),w.target=_,w.relatedTarget=S,k=w),S=k,v&&N)t:{for(w=v,b=N,j=0,_=w;_;_=qa(_))j++;for(_=0,k=b;k;k=qa(k))_++;for(;0<j-_;)w=qa(w),j--;for(;0<_-j;)b=qa(b),_--;for(;j--;){if(w===b||b!==null&&w===b.alternate)break t;w=qa(w),b=qa(b)}w=null}else w=null;v!==null&&eb(m,g,v,w,!1),N!==null&&S!==null&&eb(m,S,N,w,!0)}}e:{if(g=h?ns(h):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var C=JA;else if(Vx(g))if(gj)C=rT;else{C=tT;var A=eT}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(C=nT);if(C&&(C=C(e,h))){pj(m,C,n,f);break e}A&&A(e,g,h),e==="focusout"&&(A=g._wrapperState)&&A.controlled&&g.type==="number"&&Fm(g,"number",g.value)}switch(A=h?ns(h):window,e){case"focusin":(Vx(A)||A.contentEditable==="true")&&(es=A,Jm=h,qo=null);break;case"focusout":qo=Jm=es=null;break;case"mousedown":ep=!0;break;case"contextmenu":case"mouseup":case"dragend":ep=!1,Xx(m,n,f);break;case"selectionchange":if(sT)break;case"keydown":case"keyup":Xx(m,n,f)}var T;if(Zg)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ja?hj(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(fj&&n.locale!=="ko"&&(Ja||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ja&&(T=dj()):(ji=f,Fg="value"in ji?ji.value:ji.textContent,Ja=!0)),A=Pu(h,R),0<A.length&&(R=new Ux(R,e,null,n,f),m.push({event:R,listeners:A}),T?R.data=T:(T=mj(n),T!==null&&(R.data=T)))),(T=qA?GA(e,n):YA(e,n))&&(h=Pu(h,"onBeforeInput"),0<h.length&&(f=new Ux("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:h}),f.data=T))}Pj(m,t)})}function dl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Pu(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=il(e,n),s!=null&&r.unshift(dl(e,s,i)),s=il(e,t),s!=null&&r.push(dl(e,s,i))),e=e.return}return r}function qa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function eb(e,t,n,r,i){for(var s=t._reactName,l=[];n!==null&&n!==r;){var u=n,d=u.alternate,h=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&h!==null&&(u=h,i?(d=il(n,s),d!=null&&l.unshift(dl(n,d,u))):i||(d=il(n,s),d!=null&&l.push(dl(n,d,u)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var uT=/\r\n?/g,dT=/\u0000|\uFFFD/g;function tb(e){return(typeof e=="string"?e:""+e).replace(uT,`
`).replace(dT,"")}function Ac(e,t,n){if(t=tb(t),tb(e)!==t&&n)throw Error(ne(425))}function ku(){}var tp=null,np=null;function rp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ip=typeof setTimeout=="function"?setTimeout:void 0,fT=typeof clearTimeout=="function"?clearTimeout:void 0,nb=typeof Promise=="function"?Promise:void 0,hT=typeof queueMicrotask=="function"?queueMicrotask:typeof nb<"u"?function(e){return nb.resolve(null).then(e).catch(mT)}:ip;function mT(e){setTimeout(function(){throw e})}function Vh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ol(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ol(t)}function Ci(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ks=Math.random().toString(36).slice(2),Sr="__reactFiber$"+Ks,fl="__reactProps$"+Ks,Qr="__reactContainer$"+Ks,ap="__reactEvents$"+Ks,pT="__reactListeners$"+Ks,gT="__reactHandles$"+Ks;function aa(e){var t=e[Sr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qr]||n[Sr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=rb(e);e!==null;){if(n=e[Sr])return n;e=rb(e)}return t}e=n,n=e.parentNode}return null}function Dl(e){return e=e[Sr]||e[Qr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ns(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function Bd(e){return e[fl]||null}var sp=[],rs=-1;function Bi(e){return{current:e}}function Ue(e){0>rs||(e.current=sp[rs],sp[rs]=null,rs--)}function ze(e,t){rs++,sp[rs]=e.current,e.current=t}var Ii={},Ft=Bi(Ii),ln=Bi(!1),_a=Ii;function ws(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function cn(e){return e=e.childContextTypes,e!=null}function Cu(){Ue(ln),Ue(Ft)}function ib(e,t,n){if(Ft.current!==Ii)throw Error(ne(168));ze(Ft,t),ze(ln,n)}function Cj(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ne(108,eA(e)||"Unknown",i));return Ge({},n,r)}function Eu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,_a=Ft.current,ze(Ft,e),ze(ln,ln.current),!0}function ab(e,t,n){var r=e.stateNode;if(!r)throw Error(ne(169));n?(e=Cj(e,t,_a),r.__reactInternalMemoizedMergedChildContext=e,Ue(ln),Ue(Ft),ze(Ft,e)):Ue(ln),ze(ln,n)}var Br=null,Fd=!1,Kh=!1;function Ej(e){Br===null?Br=[e]:Br.push(e)}function vT(e){Fd=!0,Ej(e)}function Fi(){if(!Kh&&Br!==null){Kh=!0;var e=0,t=Ae;try{var n=Br;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Br=null,Fd=!1}catch(i){throw Br!==null&&(Br=Br.slice(e+1)),ej(Rg,Fi),i}finally{Ae=t,Kh=!1}}return null}var is=[],as=0,Ou=null,Au=0,$n=[],Bn=0,wa=null,Hr=1,Zr="";function Ji(e,t){is[as++]=Au,is[as++]=Ou,Ou=e,Au=t}function Oj(e,t,n){$n[Bn++]=Hr,$n[Bn++]=Zr,$n[Bn++]=wa,wa=e;var r=Hr;e=Zr;var i=32-hr(r)-1;r&=~(1<<i),n+=1;var s=32-hr(t)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Hr=1<<32-hr(t)+i|n<<i|r,Zr=s+e}else Hr=1<<s|n<<i|r,Zr=e}function Vg(e){e.return!==null&&(Ji(e,1),Oj(e,1,0))}function Kg(e){for(;e===Ou;)Ou=is[--as],is[as]=null,Au=is[--as],is[as]=null;for(;e===wa;)wa=$n[--Bn],$n[Bn]=null,Zr=$n[--Bn],$n[Bn]=null,Hr=$n[--Bn],$n[Bn]=null}var _n=null,xn=null,He=!1,lr=null;function Aj(e,t){var n=Zn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function sb(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_n=e,xn=Ci(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_n=e,xn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=wa!==null?{id:Hr,overflow:Zr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Zn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,_n=e,xn=null,!0):!1;default:return!1}}function op(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lp(e){if(He){var t=xn;if(t){var n=t;if(!sb(e,t)){if(op(e))throw Error(ne(418));t=Ci(n.nextSibling);var r=_n;t&&sb(e,t)?Aj(r,n):(e.flags=e.flags&-4097|2,He=!1,_n=e)}}else{if(op(e))throw Error(ne(418));e.flags=e.flags&-4097|2,He=!1,_n=e}}}function ob(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_n=e}function Tc(e){if(e!==_n)return!1;if(!He)return ob(e),He=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rp(e.type,e.memoizedProps)),t&&(t=xn)){if(op(e))throw Tj(),Error(ne(418));for(;t;)Aj(e,t),t=Ci(t.nextSibling)}if(ob(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xn=Ci(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xn=null}}else xn=_n?Ci(e.stateNode.nextSibling):null;return!0}function Tj(){for(var e=xn;e;)e=Ci(e.nextSibling)}function js(){xn=_n=null,He=!1}function qg(e){lr===null?lr=[e]:lr.push(e)}var yT=ai.ReactCurrentBatchConfig;function So(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(l){var u=i.refs;l===null?delete u[s]:u[s]=l},t._stringRef=s,t)}if(typeof e!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,e))}return e}function Mc(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lb(e){var t=e._init;return t(e._payload)}function Mj(e){function t(b,j){if(e){var _=b.deletions;_===null?(b.deletions=[j],b.flags|=16):_.push(j)}}function n(b,j){if(!e)return null;for(;j!==null;)t(b,j),j=j.sibling;return null}function r(b,j){for(b=new Map;j!==null;)j.key!==null?b.set(j.key,j):b.set(j.index,j),j=j.sibling;return b}function i(b,j){return b=Ti(b,j),b.index=0,b.sibling=null,b}function s(b,j,_){return b.index=_,e?(_=b.alternate,_!==null?(_=_.index,_<j?(b.flags|=2,j):_):(b.flags|=2,j)):(b.flags|=1048576,j)}function l(b){return e&&b.alternate===null&&(b.flags|=2),b}function u(b,j,_,k){return j===null||j.tag!==6?(j=em(_,b.mode,k),j.return=b,j):(j=i(j,_),j.return=b,j)}function d(b,j,_,k){var C=_.type;return C===Qa?f(b,j,_.props.children,k,_.key):j!==null&&(j.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===pi&&lb(C)===j.type)?(k=i(j,_.props),k.ref=So(b,j,_),k.return=b,k):(k=fu(_.type,_.key,_.props,null,b.mode,k),k.ref=So(b,j,_),k.return=b,k)}function h(b,j,_,k){return j===null||j.tag!==4||j.stateNode.containerInfo!==_.containerInfo||j.stateNode.implementation!==_.implementation?(j=tm(_,b.mode,k),j.return=b,j):(j=i(j,_.children||[]),j.return=b,j)}function f(b,j,_,k,C){return j===null||j.tag!==7?(j=pa(_,b.mode,k,C),j.return=b,j):(j=i(j,_),j.return=b,j)}function m(b,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return j=em(""+j,b.mode,_),j.return=b,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case wc:return _=fu(j.type,j.key,j.props,null,b.mode,_),_.ref=So(b,null,j),_.return=b,_;case Xa:return j=tm(j,b.mode,_),j.return=b,j;case pi:var k=j._init;return m(b,k(j._payload),_)}if($o(j)||bo(j))return j=pa(j,b.mode,_,null),j.return=b,j;Mc(b,j)}return null}function g(b,j,_,k){var C=j!==null?j.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:u(b,j,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case wc:return _.key===C?d(b,j,_,k):null;case Xa:return _.key===C?h(b,j,_,k):null;case pi:return C=_._init,g(b,j,C(_._payload),k)}if($o(_)||bo(_))return C!==null?null:f(b,j,_,k,null);Mc(b,_)}return null}function v(b,j,_,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(_)||null,u(j,b,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case wc:return b=b.get(k.key===null?_:k.key)||null,d(j,b,k,C);case Xa:return b=b.get(k.key===null?_:k.key)||null,h(j,b,k,C);case pi:var A=k._init;return v(b,j,_,A(k._payload),C)}if($o(k)||bo(k))return b=b.get(_)||null,f(j,b,k,C,null);Mc(j,k)}return null}function N(b,j,_,k){for(var C=null,A=null,T=j,R=j=0,B=null;T!==null&&R<_.length;R++){T.index>R?(B=T,T=null):B=T.sibling;var I=g(b,T,_[R],k);if(I===null){T===null&&(T=B);break}e&&T&&I.alternate===null&&t(b,T),j=s(I,j,R),A===null?C=I:A.sibling=I,A=I,T=B}if(R===_.length)return n(b,T),He&&Ji(b,R),C;if(T===null){for(;R<_.length;R++)T=m(b,_[R],k),T!==null&&(j=s(T,j,R),A===null?C=T:A.sibling=T,A=T);return He&&Ji(b,R),C}for(T=r(b,T);R<_.length;R++)B=v(T,b,R,_[R],k),B!==null&&(e&&B.alternate!==null&&T.delete(B.key===null?R:B.key),j=s(B,j,R),A===null?C=B:A.sibling=B,A=B);return e&&T.forEach(function(M){return t(b,M)}),He&&Ji(b,R),C}function w(b,j,_,k){var C=bo(_);if(typeof C!="function")throw Error(ne(150));if(_=C.call(_),_==null)throw Error(ne(151));for(var A=C=null,T=j,R=j=0,B=null,I=_.next();T!==null&&!I.done;R++,I=_.next()){T.index>R?(B=T,T=null):B=T.sibling;var M=g(b,T,I.value,k);if(M===null){T===null&&(T=B);break}e&&T&&M.alternate===null&&t(b,T),j=s(M,j,R),A===null?C=M:A.sibling=M,A=M,T=B}if(I.done)return n(b,T),He&&Ji(b,R),C;if(T===null){for(;!I.done;R++,I=_.next())I=m(b,I.value,k),I!==null&&(j=s(I,j,R),A===null?C=I:A.sibling=I,A=I);return He&&Ji(b,R),C}for(T=r(b,T);!I.done;R++,I=_.next())I=v(T,b,R,I.value,k),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?R:I.key),j=s(I,j,R),A===null?C=I:A.sibling=I,A=I);return e&&T.forEach(function($){return t(b,$)}),He&&Ji(b,R),C}function S(b,j,_,k){if(typeof _=="object"&&_!==null&&_.type===Qa&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case wc:e:{for(var C=_.key,A=j;A!==null;){if(A.key===C){if(C=_.type,C===Qa){if(A.tag===7){n(b,A.sibling),j=i(A,_.props.children),j.return=b,b=j;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===pi&&lb(C)===A.type){n(b,A.sibling),j=i(A,_.props),j.ref=So(b,A,_),j.return=b,b=j;break e}n(b,A);break}else t(b,A);A=A.sibling}_.type===Qa?(j=pa(_.props.children,b.mode,k,_.key),j.return=b,b=j):(k=fu(_.type,_.key,_.props,null,b.mode,k),k.ref=So(b,j,_),k.return=b,b=k)}return l(b);case Xa:e:{for(A=_.key;j!==null;){if(j.key===A)if(j.tag===4&&j.stateNode.containerInfo===_.containerInfo&&j.stateNode.implementation===_.implementation){n(b,j.sibling),j=i(j,_.children||[]),j.return=b,b=j;break e}else{n(b,j);break}else t(b,j);j=j.sibling}j=tm(_,b.mode,k),j.return=b,b=j}return l(b);case pi:return A=_._init,S(b,j,A(_._payload),k)}if($o(_))return N(b,j,_,k);if(bo(_))return w(b,j,_,k);Mc(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,j!==null&&j.tag===6?(n(b,j.sibling),j=i(j,_),j.return=b,b=j):(n(b,j),j=em(_,b.mode,k),j.return=b,b=j),l(b)):n(b,j)}return S}var Ns=Mj(!0),Lj=Mj(!1),Tu=Bi(null),Mu=null,ss=null,Gg=null;function Yg(){Gg=ss=Mu=null}function Xg(e){var t=Tu.current;Ue(Tu),e._currentValue=t}function cp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function gs(e,t){Mu=e,Gg=ss=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(an=!0),e.firstContext=null)}function Kn(e){var t=e._currentValue;if(Gg!==e)if(e={context:e,memoizedValue:t,next:null},ss===null){if(Mu===null)throw Error(ne(308));ss=e,Mu.dependencies={lanes:0,firstContext:e}}else ss=ss.next=e;return t}var sa=null;function Qg(e){sa===null?sa=[e]:sa.push(e)}function Dj(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Qg(t)):(n.next=i.next,i.next=n),t.interleaved=n,Jr(e,r)}function Jr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var gi=!1;function Jg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ij(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ei(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Jr(e,n)}return i=r.interleaved,i===null?(t.next=t,Qg(r)):(t.next=i.next,i.next=t),r.interleaved=t,Jr(e,n)}function su(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zg(e,n)}}function cb(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Lu(e,t,n,r){var i=e.updateQueue;gi=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,h=d.next;d.next=null,l===null?s=h:l.next=h,l=d;var f=e.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==l&&(u===null?f.firstBaseUpdate=h:u.next=h,f.lastBaseUpdate=d))}if(s!==null){var m=i.baseState;l=0,f=h=d=null,u=s;do{var g=u.lane,v=u.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:v,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,w=u;switch(g=t,v=n,w.tag){case 1:if(N=w.payload,typeof N=="function"){m=N.call(v,m,g);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=w.payload,g=typeof N=="function"?N.call(v,m,g):N,g==null)break e;m=Ge({},m,g);break e;case 2:gi=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[u]:g.push(u))}else v={eventTime:v,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(h=f=v,d=m):f=f.next=v,l|=g;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;g=u,u=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(d=m),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Na|=l,e.lanes=l,e.memoizedState=m}}function ub(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ne(191,i));i.call(r)}}}var Il={},Er=Bi(Il),hl=Bi(Il),ml=Bi(Il);function oa(e){if(e===Il)throw Error(ne(174));return e}function ev(e,t){switch(ze(ml,t),ze(hl,e),ze(Er,Il),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Hm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Hm(t,e)}Ue(Er),ze(Er,t)}function Ss(){Ue(Er),Ue(hl),Ue(ml)}function Rj(e){oa(ml.current);var t=oa(Er.current),n=Hm(t,e.type);t!==n&&(ze(hl,e),ze(Er,n))}function tv(e){hl.current===e&&(Ue(Er),Ue(hl))}var Ke=Bi(0);function Du(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qh=[];function nv(){for(var e=0;e<qh.length;e++)qh[e]._workInProgressVersionPrimary=null;qh.length=0}var ou=ai.ReactCurrentDispatcher,Gh=ai.ReactCurrentBatchConfig,ja=0,qe=null,lt=null,pt=null,Iu=!1,Go=!1,pl=0,xT=0;function Lt(){throw Error(ne(321))}function rv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pr(e[n],t[n]))return!1;return!0}function iv(e,t,n,r,i,s){if(ja=s,qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ou.current=e===null||e.memoizedState===null?jT:NT,e=n(r,i),Go){s=0;do{if(Go=!1,pl=0,25<=s)throw Error(ne(301));s+=1,pt=lt=null,t.updateQueue=null,ou.current=ST,e=n(r,i)}while(Go)}if(ou.current=Ru,t=lt!==null&&lt.next!==null,ja=0,pt=lt=qe=null,Iu=!1,t)throw Error(ne(300));return e}function av(){var e=pl!==0;return pl=0,e}function Nr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?qe.memoizedState=pt=e:pt=pt.next=e,pt}function qn(){if(lt===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=pt===null?qe.memoizedState:pt.next;if(t!==null)pt=t,lt=e;else{if(e===null)throw Error(ne(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},pt===null?qe.memoizedState=pt=e:pt=pt.next=e}return pt}function gl(e,t){return typeof t=="function"?t(e):t}function Yh(e){var t=qn(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var r=lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=l=null,d=null,h=s;do{var f=h.lane;if((ja&f)===f)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(u=d=m,l=r):d=d.next=m,qe.lanes|=f,Na|=f}h=h.next}while(h!==null&&h!==s);d===null?l=r:d.next=u,pr(r,t.memoizedState)||(an=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,qe.lanes|=s,Na|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xh(e){var t=qn(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=e(s,l.action),l=l.next;while(l!==i);pr(s,t.memoizedState)||(an=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function zj(){}function $j(e,t){var n=qe,r=qn(),i=t(),s=!pr(r.memoizedState,i);if(s&&(r.memoizedState=i,an=!0),r=r.queue,sv(Uj.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,vl(9,Fj.bind(null,n,r,i,t),void 0,null),gt===null)throw Error(ne(349));ja&30||Bj(n,t,i)}return i}function Bj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Fj(e,t,n,r){t.value=n,t.getSnapshot=r,Hj(t)&&Zj(e)}function Uj(e,t,n){return n(function(){Hj(t)&&Zj(e)})}function Hj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pr(e,n)}catch{return!0}}function Zj(e){var t=Jr(e,1);t!==null&&mr(t,e,1,-1)}function db(e){var t=Nr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:e},t.queue=e,e=e.dispatch=wT.bind(null,qe,e),[t.memoizedState,e]}function vl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Wj(){return qn().memoizedState}function lu(e,t,n,r){var i=Nr();qe.flags|=e,i.memoizedState=vl(1|t,n,void 0,r===void 0?null:r)}function Ud(e,t,n,r){var i=qn();r=r===void 0?null:r;var s=void 0;if(lt!==null){var l=lt.memoizedState;if(s=l.destroy,r!==null&&rv(r,l.deps)){i.memoizedState=vl(t,n,s,r);return}}qe.flags|=e,i.memoizedState=vl(1|t,n,s,r)}function fb(e,t){return lu(8390656,8,e,t)}function sv(e,t){return Ud(2048,8,e,t)}function Vj(e,t){return Ud(4,2,e,t)}function Kj(e,t){return Ud(4,4,e,t)}function qj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gj(e,t,n){return n=n!=null?n.concat([e]):null,Ud(4,4,qj.bind(null,t,e),n)}function ov(){}function Yj(e,t){var n=qn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xj(e,t){var n=qn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qj(e,t,n){return ja&21?(pr(n,t)||(n=rj(),qe.lanes|=n,Na|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,an=!0),e.memoizedState=n)}function bT(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=Gh.transition;Gh.transition={};try{e(!1),t()}finally{Ae=n,Gh.transition=r}}function Jj(){return qn().memoizedState}function _T(e,t,n){var r=Ai(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eN(e))tN(t,n);else if(n=Dj(e,t,n,r),n!==null){var i=qt();mr(n,e,r,i),nN(n,t,r)}}function wT(e,t,n){var r=Ai(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eN(e))tN(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var l=t.lastRenderedState,u=s(l,n);if(i.hasEagerState=!0,i.eagerState=u,pr(u,l)){var d=t.interleaved;d===null?(i.next=i,Qg(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}n=Dj(e,t,i,r),n!==null&&(i=qt(),mr(n,e,r,i),nN(n,t,r))}}function eN(e){var t=e.alternate;return e===qe||t!==null&&t===qe}function tN(e,t){Go=Iu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nN(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zg(e,n)}}var Ru={readContext:Kn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},jT={readContext:Kn,useCallback:function(e,t){return Nr().memoizedState=[e,t===void 0?null:t],e},useContext:Kn,useEffect:fb,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,lu(4194308,4,qj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return lu(4194308,4,e,t)},useInsertionEffect:function(e,t){return lu(4,2,e,t)},useMemo:function(e,t){var n=Nr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Nr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=_T.bind(null,qe,e),[r.memoizedState,e]},useRef:function(e){var t=Nr();return e={current:e},t.memoizedState=e},useState:db,useDebugValue:ov,useDeferredValue:function(e){return Nr().memoizedState=e},useTransition:function(){var e=db(!1),t=e[0];return e=bT.bind(null,e[1]),Nr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=qe,i=Nr();if(He){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=t(),gt===null)throw Error(ne(349));ja&30||Bj(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,fb(Uj.bind(null,r,s,e),[e]),r.flags|=2048,vl(9,Fj.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Nr(),t=gt.identifierPrefix;if(He){var n=Zr,r=Hr;n=(r&~(1<<32-hr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=pl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=xT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},NT={readContext:Kn,useCallback:Yj,useContext:Kn,useEffect:sv,useImperativeHandle:Gj,useInsertionEffect:Vj,useLayoutEffect:Kj,useMemo:Xj,useReducer:Yh,useRef:Wj,useState:function(){return Yh(gl)},useDebugValue:ov,useDeferredValue:function(e){var t=qn();return Qj(t,lt.memoizedState,e)},useTransition:function(){var e=Yh(gl)[0],t=qn().memoizedState;return[e,t]},useMutableSource:zj,useSyncExternalStore:$j,useId:Jj,unstable_isNewReconciler:!1},ST={readContext:Kn,useCallback:Yj,useContext:Kn,useEffect:sv,useImperativeHandle:Gj,useInsertionEffect:Vj,useLayoutEffect:Kj,useMemo:Xj,useReducer:Xh,useRef:Wj,useState:function(){return Xh(gl)},useDebugValue:ov,useDeferredValue:function(e){var t=qn();return lt===null?t.memoizedState=e:Qj(t,lt.memoizedState,e)},useTransition:function(){var e=Xh(gl)[0],t=qn().memoizedState;return[e,t]},useMutableSource:zj,useSyncExternalStore:$j,useId:Jj,unstable_isNewReconciler:!1};function sr(e,t){if(e&&e.defaultProps){t=Ge({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function up(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ge({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hd={isMounted:function(e){return(e=e._reactInternals)?Ma(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qt(),i=Ai(e),s=qr(r,i);s.payload=t,n!=null&&(s.callback=n),t=Ei(e,s,i),t!==null&&(mr(t,e,i,r),su(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qt(),i=Ai(e),s=qr(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Ei(e,s,i),t!==null&&(mr(t,e,i,r),su(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qt(),r=Ai(e),i=qr(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ei(e,i,r),t!==null&&(mr(t,e,r,n),su(t,e,r))}};function hb(e,t,n,r,i,s,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,l):t.prototype&&t.prototype.isPureReactComponent?!cl(n,r)||!cl(i,s):!0}function rN(e,t,n){var r=!1,i=Ii,s=t.contextType;return typeof s=="object"&&s!==null?s=Kn(s):(i=cn(t)?_a:Ft.current,r=t.contextTypes,s=(r=r!=null)?ws(e,i):Ii),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function mb(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hd.enqueueReplaceState(t,t.state,null)}function dp(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Jg(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Kn(s):(s=cn(t)?_a:Ft.current,i.context=ws(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(up(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Hd.enqueueReplaceState(i,i.state,null),Lu(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ps(e,t){try{var n="",r=t;do n+=JO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Qh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function fp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var PT=typeof WeakMap=="function"?WeakMap:Map;function iN(e,t,n){n=qr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$u||($u=!0,wp=r),fp(e,t)},n}function aN(e,t,n){n=qr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fp(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fp(e,t),typeof r!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function pb(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new PT;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=BT.bind(null,e,t,n),t.then(e,e))}function gb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vb(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qr(-1,1),t.tag=2,Ei(n,t,1))),n.lanes|=1),e)}var kT=ai.ReactCurrentOwner,an=!1;function Zt(e,t,n,r){t.child=e===null?Lj(t,null,n,r):Ns(t,e.child,n,r)}function yb(e,t,n,r,i){n=n.render;var s=t.ref;return gs(t,i),r=iv(e,t,n,r,s,i),n=av(),e!==null&&!an?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ei(e,t,i)):(He&&n&&Vg(t),t.flags|=1,Zt(e,t,r,i),t.child)}function xb(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!pv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,sN(e,t,s,r,i)):(e=fu(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:cl,n(l,r)&&e.ref===t.ref)return ei(e,t,i)}return t.flags|=1,e=Ti(s,r),e.ref=t.ref,e.return=t,t.child=e}function sN(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(cl(s,r)&&e.ref===t.ref)if(an=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(an=!0);else return t.lanes=e.lanes,ei(e,t,i)}return hp(e,t,n,r,i)}function oN(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(ls,pn),pn|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(ls,pn),pn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ze(ls,pn),pn|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ze(ls,pn),pn|=r;return Zt(e,t,i,n),t.child}function lN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function hp(e,t,n,r,i){var s=cn(n)?_a:Ft.current;return s=ws(t,s),gs(t,i),n=iv(e,t,n,r,s,i),r=av(),e!==null&&!an?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ei(e,t,i)):(He&&r&&Vg(t),t.flags|=1,Zt(e,t,n,i),t.child)}function bb(e,t,n,r,i){if(cn(n)){var s=!0;Eu(t)}else s=!1;if(gs(t,i),t.stateNode===null)cu(e,t),rN(t,n,r),dp(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var d=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=Kn(h):(h=cn(n)?_a:Ft.current,h=ws(t,h));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||d!==h)&&mb(t,l,r,h),gi=!1;var g=t.memoizedState;l.state=g,Lu(t,r,l,i),d=t.memoizedState,u!==r||g!==d||ln.current||gi?(typeof f=="function"&&(up(t,n,f,r),d=t.memoizedState),(u=gi||hb(t,n,u,r,g,d,h))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),l.props=r,l.state=d,l.context=h,r=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Ij(e,t),u=t.memoizedProps,h=t.type===t.elementType?u:sr(t.type,u),l.props=h,m=t.pendingProps,g=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Kn(d):(d=cn(n)?_a:Ft.current,d=ws(t,d));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==m||g!==d)&&mb(t,l,r,d),gi=!1,g=t.memoizedState,l.state=g,Lu(t,r,l,i);var N=t.memoizedState;u!==m||g!==N||ln.current||gi?(typeof v=="function"&&(up(t,n,v,r),N=t.memoizedState),(h=gi||hb(t,n,h,r,g,N,d)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,N,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,N,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),l.props=r,l.state=N,l.context=d,r=h):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return mp(e,t,n,r,s,i)}function mp(e,t,n,r,i,s){lN(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&ab(t,n,!1),ei(e,t,s);r=t.stateNode,kT.current=t;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Ns(t,e.child,null,s),t.child=Ns(t,null,u,s)):Zt(e,t,u,s),t.memoizedState=r.state,i&&ab(t,n,!0),t.child}function cN(e){var t=e.stateNode;t.pendingContext?ib(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ib(e,t.context,!1),ev(e,t.containerInfo)}function _b(e,t,n,r,i){return js(),qg(i),t.flags|=256,Zt(e,t,n,r),t.child}var pp={dehydrated:null,treeContext:null,retryLane:0};function gp(e){return{baseLanes:e,cachePool:null,transitions:null}}function uN(e,t,n){var r=t.pendingProps,i=Ke.current,s=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ze(Ke,i&1),e===null)return lp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Vd(l,r,0,null),e=pa(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=gp(n),t.memoizedState=pp,e):lv(t,l));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return CT(e,t,l,r,u,i,n);if(s){s=r.fallback,l=t.mode,i=e.child,u=i.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Ti(i,d),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=Ti(u,s):(s=pa(s,l,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=e.child.memoizedState,l=l===null?gp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=pp,r}return s=e.child,e=s.sibling,r=Ti(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function lv(e,t){return t=Vd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Lc(e,t,n,r){return r!==null&&qg(r),Ns(t,e.child,null,n),e=lv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function CT(e,t,n,r,i,s,l){if(n)return t.flags&256?(t.flags&=-257,r=Qh(Error(ne(422))),Lc(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Vd({mode:"visible",children:r.children},i,0,null),s=pa(s,i,l,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ns(t,e.child,null,l),t.child.memoizedState=gp(l),t.memoizedState=pp,s);if(!(t.mode&1))return Lc(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(ne(419)),r=Qh(s,r,void 0),Lc(e,t,l,r)}if(u=(l&e.childLanes)!==0,an||u){if(r=gt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Jr(e,i),mr(r,e,i,-1))}return mv(),r=Qh(Error(ne(421))),Lc(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=FT.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,xn=Ci(i.nextSibling),_n=t,He=!0,lr=null,e!==null&&($n[Bn++]=Hr,$n[Bn++]=Zr,$n[Bn++]=wa,Hr=e.id,Zr=e.overflow,wa=t),t=lv(t,r.children),t.flags|=4096,t)}function wb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),cp(e.return,t,n)}function Jh(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function dN(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Zt(e,t,r.children,n),r=Ke.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wb(e,n,t);else if(e.tag===19)wb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze(Ke,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Du(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Jh(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Du(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Jh(t,!0,n,null,s);break;case"together":Jh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ei(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Na|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,n=Ti(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ti(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ET(e,t,n){switch(t.tag){case 3:cN(t),js();break;case 5:Rj(t);break;case 1:cn(t.type)&&Eu(t);break;case 4:ev(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ze(Tu,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze(Ke,Ke.current&1),t.flags|=128,null):n&t.child.childLanes?uN(e,t,n):(ze(Ke,Ke.current&1),e=ei(e,t,n),e!==null?e.sibling:null);ze(Ke,Ke.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return dN(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(Ke,Ke.current),r)break;return null;case 22:case 23:return t.lanes=0,oN(e,t,n)}return ei(e,t,n)}var fN,vp,hN,mN;fN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vp=function(){};hN=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,oa(Er.current);var s=null;switch(n){case"input":i=$m(e,i),r=$m(e,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=Um(e,i),r=Um(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ku)}Zm(n,r);var l;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var u=i[h];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(nl.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var d=r[h];if(u=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&d!==u&&(d!=null||u!=null))if(h==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(s||(s=[]),s.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(s=s||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(nl.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&Be("scroll",e),s||u===d||(s=[])):(s=s||[]).push(h,d))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};mN=function(e,t,n,r){n!==r&&(t.flags|=4)};function Po(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function OT(e,t,n){var r=t.pendingProps;switch(Kg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(t),null;case 1:return cn(t.type)&&Cu(),Dt(t),null;case 3:return r=t.stateNode,Ss(),Ue(ln),Ue(Ft),nv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Tc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,lr!==null&&(Sp(lr),lr=null))),vp(e,t),Dt(t),null;case 5:tv(t);var i=oa(ml.current);if(n=t.type,e!==null&&t.stateNode!=null)hN(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ne(166));return Dt(t),null}if(e=oa(Er.current),Tc(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Sr]=t,r[fl]=s,e=(t.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<Fo.length;i++)Be(Fo[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Ax(r,s),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Be("invalid",r);break;case"textarea":Mx(r,s),Be("invalid",r)}Zm(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var u=s[l];l==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Ac(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Ac(r.textContent,u,e),i=["children",""+u]):nl.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Be("scroll",r)}switch(n){case"input":jc(r),Tx(r,s,!0);break;case"textarea":jc(r),Lx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ku)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=U1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Sr]=t,e[fl]=r,fN(e,t,!1,!1),t.stateNode=e;e:{switch(l=Wm(n,r),n){case"dialog":Be("cancel",e),Be("close",e),i=r;break;case"iframe":case"object":case"embed":Be("load",e),i=r;break;case"video":case"audio":for(i=0;i<Fo.length;i++)Be(Fo[i],e);i=r;break;case"source":Be("error",e),i=r;break;case"img":case"image":case"link":Be("error",e),Be("load",e),i=r;break;case"details":Be("toggle",e),i=r;break;case"input":Ax(e,r),i=$m(e,r),Be("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Be("invalid",e);break;case"textarea":Mx(e,r),i=Um(e,r),Be("invalid",e);break;default:i=r}Zm(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var d=u[s];s==="style"?W1(e,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&H1(e,d)):s==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&rl(e,d):typeof d=="number"&&rl(e,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nl.hasOwnProperty(s)?d!=null&&s==="onScroll"&&Be("scroll",e):d!=null&&Tg(e,s,d,l))}switch(n){case"input":jc(e),Tx(e,r,!1);break;case"textarea":jc(e),Lx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Di(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?fs(e,!!r.multiple,s,!1):r.defaultValue!=null&&fs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ku)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dt(t),null;case 6:if(e&&t.stateNode!=null)mN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ne(166));if(n=oa(ml.current),oa(Er.current),Tc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Sr]=t,(s=r.nodeValue!==n)&&(e=_n,e!==null))switch(e.tag){case 3:Ac(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ac(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sr]=t,t.stateNode=r}return Dt(t),null;case 13:if(Ue(Ke),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(He&&xn!==null&&t.mode&1&&!(t.flags&128))Tj(),js(),t.flags|=98560,s=!1;else if(s=Tc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ne(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ne(317));s[Sr]=t}else js(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Dt(t),s=!1}else lr!==null&&(Sp(lr),lr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ke.current&1?ut===0&&(ut=3):mv())),t.updateQueue!==null&&(t.flags|=4),Dt(t),null);case 4:return Ss(),vp(e,t),e===null&&ul(t.stateNode.containerInfo),Dt(t),null;case 10:return Xg(t.type._context),Dt(t),null;case 17:return cn(t.type)&&Cu(),Dt(t),null;case 19:if(Ue(Ke),s=t.memoizedState,s===null)return Dt(t),null;if(r=(t.flags&128)!==0,l=s.rendering,l===null)if(r)Po(s,!1);else{if(ut!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Du(e),l!==null){for(t.flags|=128,Po(s,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze(Ke,Ke.current&1|2),t.child}e=e.sibling}s.tail!==null&&Je()>ks&&(t.flags|=128,r=!0,Po(s,!1),t.lanes=4194304)}else{if(!r)if(e=Du(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Po(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!He)return Dt(t),null}else 2*Je()-s.renderingStartTime>ks&&n!==1073741824&&(t.flags|=128,r=!0,Po(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(n=s.last,n!==null?n.sibling=l:t.child=l,s.last=l)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=Ke.current,ze(Ke,r?n&1|2:n&1),t):(Dt(t),null);case 22:case 23:return hv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pn&1073741824&&(Dt(t),t.subtreeFlags&6&&(t.flags|=8192)):Dt(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function AT(e,t){switch(Kg(t),t.tag){case 1:return cn(t.type)&&Cu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ss(),Ue(ln),Ue(Ft),nv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tv(t),null;case 13:if(Ue(Ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));js()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Ke),null;case 4:return Ss(),null;case 10:return Xg(t.type._context),null;case 22:case 23:return hv(),null;case 24:return null;default:return null}}var Dc=!1,Rt=!1,TT=typeof WeakSet=="function"?WeakSet:Set,se=null;function os(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(e,t,r)}else n.current=null}function yp(e,t,n){try{n()}catch(r){Ye(e,t,r)}}var jb=!1;function MT(e,t){if(tp=Nu,e=xj(),Wg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,u=-1,d=-1,h=0,f=0,m=e,g=null;t:for(;;){for(var v;m!==n||i!==0&&m.nodeType!==3||(u=l+i),m!==s||r!==0&&m.nodeType!==3||(d=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===e)break t;if(g===n&&++h===i&&(u=l),g===s&&++f===r&&(d=l),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(np={focusedElem:e,selectionRange:n},Nu=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var w=N.memoizedProps,S=N.memoizedState,b=t.stateNode,j=b.getSnapshotBeforeUpdate(t.elementType===t.type?w:sr(t.type,w),S);b.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(k){Ye(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return N=jb,jb=!1,N}function Yo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&yp(t,n,s)}i=i.next}while(i!==r)}}function Zd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function xp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function pN(e){var t=e.alternate;t!==null&&(e.alternate=null,pN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sr],delete t[fl],delete t[ap],delete t[pT],delete t[gT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gN(e){return e.tag===5||e.tag===3||e.tag===4}function Nb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ku));else if(r!==4&&(e=e.child,e!==null))for(bp(e,t,n),e=e.sibling;e!==null;)bp(e,t,n),e=e.sibling}function _p(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(_p(e,t,n),e=e.sibling;e!==null;)_p(e,t,n),e=e.sibling}var jt=null,or=!1;function mi(e,t,n){for(n=n.child;n!==null;)vN(e,t,n),n=n.sibling}function vN(e,t,n){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(Id,n)}catch{}switch(n.tag){case 5:Rt||os(n,t);case 6:var r=jt,i=or;jt=null,mi(e,t,n),jt=r,or=i,jt!==null&&(or?(e=jt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(or?(e=jt,n=n.stateNode,e.nodeType===8?Vh(e.parentNode,n):e.nodeType===1&&Vh(e,n),ol(e)):Vh(jt,n.stateNode));break;case 4:r=jt,i=or,jt=n.stateNode.containerInfo,or=!0,mi(e,t,n),jt=r,or=i;break;case 0:case 11:case 14:case 15:if(!Rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&yp(n,t,l),i=i.next}while(i!==r)}mi(e,t,n);break;case 1:if(!Rt&&(os(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ye(n,t,u)}mi(e,t,n);break;case 21:mi(e,t,n);break;case 22:n.mode&1?(Rt=(r=Rt)||n.memoizedState!==null,mi(e,t,n),Rt=r):mi(e,t,n);break;default:mi(e,t,n)}}function Sb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new TT),t.forEach(function(r){var i=UT.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ar(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:jt=u.stateNode,or=!1;break e;case 3:jt=u.stateNode.containerInfo,or=!0;break e;case 4:jt=u.stateNode.containerInfo,or=!0;break e}u=u.return}if(jt===null)throw Error(ne(160));vN(s,l,i),jt=null,or=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){Ye(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yN(t,e),t=t.sibling}function yN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ar(t,e),jr(e),r&4){try{Yo(3,e,e.return),Zd(3,e)}catch(w){Ye(e,e.return,w)}try{Yo(5,e,e.return)}catch(w){Ye(e,e.return,w)}}break;case 1:ar(t,e),jr(e),r&512&&n!==null&&os(n,n.return);break;case 5:if(ar(t,e),jr(e),r&512&&n!==null&&os(n,n.return),e.flags&32){var i=e.stateNode;try{rl(i,"")}catch(w){Ye(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,l=n!==null?n.memoizedProps:s,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&B1(i,s),Wm(u,l);var h=Wm(u,s);for(l=0;l<d.length;l+=2){var f=d[l],m=d[l+1];f==="style"?W1(i,m):f==="dangerouslySetInnerHTML"?H1(i,m):f==="children"?rl(i,m):Tg(i,f,m,h)}switch(u){case"input":Bm(i,s);break;case"textarea":F1(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?fs(i,!!s.multiple,v,!1):g!==!!s.multiple&&(s.defaultValue!=null?fs(i,!!s.multiple,s.defaultValue,!0):fs(i,!!s.multiple,s.multiple?[]:"",!1))}i[fl]=s}catch(w){Ye(e,e.return,w)}}break;case 6:if(ar(t,e),jr(e),r&4){if(e.stateNode===null)throw Error(ne(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(w){Ye(e,e.return,w)}}break;case 3:if(ar(t,e),jr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ol(t.containerInfo)}catch(w){Ye(e,e.return,w)}break;case 4:ar(t,e),jr(e);break;case 13:ar(t,e),jr(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dv=Je())),r&4&&Sb(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Rt=(h=Rt)||f,ar(t,e),Rt=h):ar(t,e),jr(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!f&&e.mode&1)for(se=e,f=e.child;f!==null;){for(m=se=f;se!==null;){switch(g=se,v=g.child,g.tag){case 0:case 11:case 14:case 15:Yo(4,g,g.return);break;case 1:os(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(w){Ye(r,n,w)}}break;case 5:os(g,g.return);break;case 22:if(g.memoizedState!==null){kb(m);continue}}v!==null?(v.return=g,se=v):kb(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=m.stateNode,d=m.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=Z1("display",l))}catch(w){Ye(e,e.return,w)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(w){Ye(e,e.return,w)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ar(t,e),jr(e),r&4&&Sb(e);break;case 21:break;default:ar(t,e),jr(e)}}function jr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(gN(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rl(i,""),r.flags&=-33);var s=Nb(e);_p(e,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,u=Nb(e);bp(e,u,l);break;default:throw Error(ne(161))}}catch(d){Ye(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function LT(e,t,n){se=e,xN(e)}function xN(e,t,n){for(var r=(e.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Dc;if(!l){var u=i.alternate,d=u!==null&&u.memoizedState!==null||Rt;u=Dc;var h=Rt;if(Dc=l,(Rt=d)&&!h)for(se=i;se!==null;)l=se,d=l.child,l.tag===22&&l.memoizedState!==null?Cb(i):d!==null?(d.return=l,se=d):Cb(i);for(;s!==null;)se=s,xN(s),s=s.sibling;se=i,Dc=u,Rt=h}Pb(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):Pb(e)}}function Pb(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Rt||Zd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Rt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:sr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ub(t,s,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ub(t,l,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&ol(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Rt||t.flags&512&&xp(t)}catch(g){Ye(t,t.return,g)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function kb(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function Cb(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zd(4,t)}catch(d){Ye(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){Ye(t,i,d)}}var s=t.return;try{xp(t)}catch(d){Ye(t,s,d)}break;case 5:var l=t.return;try{xp(t)}catch(d){Ye(t,l,d)}}}catch(d){Ye(t,t.return,d)}if(t===e){se=null;break}var u=t.sibling;if(u!==null){u.return=t.return,se=u;break}se=t.return}}var DT=Math.ceil,zu=ai.ReactCurrentDispatcher,cv=ai.ReactCurrentOwner,Vn=ai.ReactCurrentBatchConfig,ke=0,gt=null,it=null,kt=0,pn=0,ls=Bi(0),ut=0,yl=null,Na=0,Wd=0,uv=0,Xo=null,tn=null,dv=0,ks=1/0,$r=null,$u=!1,wp=null,Oi=null,Ic=!1,Ni=null,Bu=0,Qo=0,jp=null,uu=-1,du=0;function qt(){return ke&6?Je():uu!==-1?uu:uu=Je()}function Ai(e){return e.mode&1?ke&2&&kt!==0?kt&-kt:yT.transition!==null?(du===0&&(du=rj()),du):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:uj(e.type)),e):1}function mr(e,t,n,r){if(50<Qo)throw Qo=0,jp=null,Error(ne(185));Ml(e,n,r),(!(ke&2)||e!==gt)&&(e===gt&&(!(ke&2)&&(Wd|=n),ut===4&&bi(e,kt)),un(e,r),n===1&&ke===0&&!(t.mode&1)&&(ks=Je()+500,Fd&&Fi()))}function un(e,t){var n=e.callbackNode;yA(e,t);var r=ju(e,e===gt?kt:0);if(r===0)n!==null&&Rx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Rx(n),t===1)e.tag===0?vT(Eb.bind(null,e)):Ej(Eb.bind(null,e)),hT(function(){!(ke&6)&&Fi()}),n=null;else{switch(ij(r)){case 1:n=Rg;break;case 4:n=tj;break;case 16:n=wu;break;case 536870912:n=nj;break;default:n=wu}n=kN(n,bN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function bN(e,t){if(uu=-1,du=0,ke&6)throw Error(ne(327));var n=e.callbackNode;if(vs()&&e.callbackNode!==n)return null;var r=ju(e,e===gt?kt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fu(e,r);else{t=r;var i=ke;ke|=2;var s=wN();(gt!==e||kt!==t)&&($r=null,ks=Je()+500,ma(e,t));do try{zT();break}catch(u){_N(e,u)}while(!0);Yg(),zu.current=s,ke=i,it!==null?t=0:(gt=null,kt=0,t=ut)}if(t!==0){if(t===2&&(i=Ym(e),i!==0&&(r=i,t=Np(e,i))),t===1)throw n=yl,ma(e,0),bi(e,r),un(e,Je()),n;if(t===6)bi(e,r);else{if(i=e.current.alternate,!(r&30)&&!IT(i)&&(t=Fu(e,r),t===2&&(s=Ym(e),s!==0&&(r=s,t=Np(e,s))),t===1))throw n=yl,ma(e,0),bi(e,r),un(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ne(345));case 2:ea(e,tn,$r);break;case 3:if(bi(e,r),(r&130023424)===r&&(t=dv+500-Je(),10<t)){if(ju(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){qt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ip(ea.bind(null,e,tn,$r),t);break}ea(e,tn,$r);break;case 4:if(bi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-hr(r);s=1<<l,l=t[l],l>i&&(i=l),r&=~s}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DT(r/1960))-r,10<r){e.timeoutHandle=ip(ea.bind(null,e,tn,$r),r);break}ea(e,tn,$r);break;case 5:ea(e,tn,$r);break;default:throw Error(ne(329))}}}return un(e,Je()),e.callbackNode===n?bN.bind(null,e):null}function Np(e,t){var n=Xo;return e.current.memoizedState.isDehydrated&&(ma(e,t).flags|=256),e=Fu(e,t),e!==2&&(t=tn,tn=n,t!==null&&Sp(t)),e}function Sp(e){tn===null?tn=e:tn.push.apply(tn,e)}function IT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pr(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bi(e,t){for(t&=~uv,t&=~Wd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hr(t),r=1<<n;e[n]=-1,t&=~r}}function Eb(e){if(ke&6)throw Error(ne(327));vs();var t=ju(e,0);if(!(t&1))return un(e,Je()),null;var n=Fu(e,t);if(e.tag!==0&&n===2){var r=Ym(e);r!==0&&(t=r,n=Np(e,r))}if(n===1)throw n=yl,ma(e,0),bi(e,t),un(e,Je()),n;if(n===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ea(e,tn,$r),un(e,Je()),null}function fv(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(ks=Je()+500,Fd&&Fi())}}function Sa(e){Ni!==null&&Ni.tag===0&&!(ke&6)&&vs();var t=ke;ke|=1;var n=Vn.transition,r=Ae;try{if(Vn.transition=null,Ae=1,e)return e()}finally{Ae=r,Vn.transition=n,ke=t,!(ke&6)&&Fi()}}function hv(){pn=ls.current,Ue(ls)}function ma(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,fT(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(Kg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cu();break;case 3:Ss(),Ue(ln),Ue(Ft),nv();break;case 5:tv(r);break;case 4:Ss();break;case 13:Ue(Ke);break;case 19:Ue(Ke);break;case 10:Xg(r.type._context);break;case 22:case 23:hv()}n=n.return}if(gt=e,it=e=Ti(e.current,null),kt=pn=t,ut=0,yl=null,uv=Wd=Na=0,tn=Xo=null,sa!==null){for(t=0;t<sa.length;t++)if(n=sa[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}sa=null}return e}function _N(e,t){do{var n=it;try{if(Yg(),ou.current=Ru,Iu){for(var r=qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Iu=!1}if(ja=0,pt=lt=qe=null,Go=!1,pl=0,cv.current=null,n===null||n.return===null){ut=1,yl=t,it=null;break}e:{var s=e,l=n.return,u=n,d=t;if(t=kt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,f=u,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=gb(l);if(v!==null){v.flags&=-257,vb(v,l,u,s,t),v.mode&1&&pb(s,h,t),t=v,d=h;var N=t.updateQueue;if(N===null){var w=new Set;w.add(d),t.updateQueue=w}else N.add(d);break e}else{if(!(t&1)){pb(s,h,t),mv();break e}d=Error(ne(426))}}else if(He&&u.mode&1){var S=gb(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),vb(S,l,u,s,t),qg(Ps(d,u));break e}}s=d=Ps(d,u),ut!==4&&(ut=2),Xo===null?Xo=[s]:Xo.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=iN(s,d,t);cb(s,b);break e;case 1:u=d;var j=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof j.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Oi===null||!Oi.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var k=aN(s,u,t);cb(s,k);break e}}s=s.return}while(s!==null)}NN(n)}catch(C){t=C,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function wN(){var e=zu.current;return zu.current=Ru,e===null?Ru:e}function mv(){(ut===0||ut===3||ut===2)&&(ut=4),gt===null||!(Na&268435455)&&!(Wd&268435455)||bi(gt,kt)}function Fu(e,t){var n=ke;ke|=2;var r=wN();(gt!==e||kt!==t)&&($r=null,ma(e,t));do try{RT();break}catch(i){_N(e,i)}while(!0);if(Yg(),ke=n,zu.current=r,it!==null)throw Error(ne(261));return gt=null,kt=0,ut}function RT(){for(;it!==null;)jN(it)}function zT(){for(;it!==null&&!cA();)jN(it)}function jN(e){var t=PN(e.alternate,e,pn);e.memoizedProps=e.pendingProps,t===null?NN(e):it=t,cv.current=null}function NN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=AT(n,t),n!==null){n.flags&=32767,it=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ut=6,it=null;return}}else if(n=OT(n,t,pn),n!==null){it=n;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);ut===0&&(ut=5)}function ea(e,t,n){var r=Ae,i=Vn.transition;try{Vn.transition=null,Ae=1,$T(e,t,n,r)}finally{Vn.transition=i,Ae=r}return null}function $T(e,t,n,r){do vs();while(Ni!==null);if(ke&6)throw Error(ne(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(xA(e,s),e===gt&&(it=gt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ic||(Ic=!0,kN(wu,function(){return vs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vn.transition,Vn.transition=null;var l=Ae;Ae=1;var u=ke;ke|=4,cv.current=null,MT(e,n),yN(n,e),aT(np),Nu=!!tp,np=tp=null,e.current=n,LT(n),uA(),ke=u,Ae=l,Vn.transition=s}else e.current=n;if(Ic&&(Ic=!1,Ni=e,Bu=i),s=e.pendingLanes,s===0&&(Oi=null),hA(n.stateNode),un(e,Je()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($u)throw $u=!1,e=wp,wp=null,e;return Bu&1&&e.tag!==0&&vs(),s=e.pendingLanes,s&1?e===jp?Qo++:(Qo=0,jp=e):Qo=0,Fi(),null}function vs(){if(Ni!==null){var e=ij(Bu),t=Vn.transition,n=Ae;try{if(Vn.transition=null,Ae=16>e?16:e,Ni===null)var r=!1;else{if(e=Ni,Ni=null,Bu=0,ke&6)throw Error(ne(331));var i=ke;for(ke|=4,se=e.current;se!==null;){var s=se,l=s.child;if(se.flags&16){var u=s.deletions;if(u!==null){for(var d=0;d<u.length;d++){var h=u[d];for(se=h;se!==null;){var f=se;switch(f.tag){case 0:case 11:case 15:Yo(8,f,s)}var m=f.child;if(m!==null)m.return=f,se=m;else for(;se!==null;){f=se;var g=f.sibling,v=f.return;if(pN(f),f===h){se=null;break}if(g!==null){g.return=v,se=g;break}se=v}}}var N=s.alternate;if(N!==null){var w=N.child;if(w!==null){N.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}se=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,se=l;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yo(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,se=b;break e}se=s.return}}var j=e.current;for(se=j;se!==null;){l=se;var _=l.child;if(l.subtreeFlags&2064&&_!==null)_.return=l,se=_;else e:for(l=j;se!==null;){if(u=se,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Zd(9,u)}}catch(C){Ye(u,u.return,C)}if(u===l){se=null;break e}var k=u.sibling;if(k!==null){k.return=u.return,se=k;break e}se=u.return}}if(ke=i,Fi(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(Id,e)}catch{}r=!0}return r}finally{Ae=n,Vn.transition=t}}return!1}function Ob(e,t,n){t=Ps(n,t),t=iN(e,t,1),e=Ei(e,t,1),t=qt(),e!==null&&(Ml(e,1,t),un(e,t))}function Ye(e,t,n){if(e.tag===3)Ob(e,e,n);else for(;t!==null;){if(t.tag===3){Ob(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oi===null||!Oi.has(r))){e=Ps(n,e),e=aN(t,e,1),t=Ei(t,e,1),e=qt(),t!==null&&(Ml(t,1,e),un(t,e));break}}t=t.return}}function BT(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qt(),e.pingedLanes|=e.suspendedLanes&n,gt===e&&(kt&n)===n&&(ut===4||ut===3&&(kt&130023424)===kt&&500>Je()-dv?ma(e,0):uv|=n),un(e,t)}function SN(e,t){t===0&&(e.mode&1?(t=Pc,Pc<<=1,!(Pc&130023424)&&(Pc=4194304)):t=1);var n=qt();e=Jr(e,t),e!==null&&(Ml(e,t,n),un(e,n))}function FT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),SN(e,n)}function UT(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(t),SN(e,n)}var PN;PN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ln.current)an=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return an=!1,ET(e,t,n);an=!!(e.flags&131072)}else an=!1,He&&t.flags&1048576&&Oj(t,Au,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;cu(e,t),e=t.pendingProps;var i=ws(t,Ft.current);gs(t,n),i=iv(null,t,r,e,i,n);var s=av();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cn(r)?(s=!0,Eu(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jg(t),i.updater=Hd,t.stateNode=i,i._reactInternals=t,dp(t,r,e,n),t=mp(null,t,r,!0,s,n)):(t.tag=0,He&&s&&Vg(t),Zt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(cu(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=ZT(r),e=sr(r,e),i){case 0:t=hp(null,t,r,e,n);break e;case 1:t=bb(null,t,r,e,n);break e;case 11:t=yb(null,t,r,e,n);break e;case 14:t=xb(null,t,r,sr(r.type,e),n);break e}throw Error(ne(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sr(r,i),hp(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sr(r,i),bb(e,t,r,i,n);case 3:e:{if(cN(t),e===null)throw Error(ne(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Ij(e,t),Lu(t,r,null,n);var l=t.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ps(Error(ne(423)),t),t=_b(e,t,r,n,i);break e}else if(r!==i){i=Ps(Error(ne(424)),t),t=_b(e,t,r,n,i);break e}else for(xn=Ci(t.stateNode.containerInfo.firstChild),_n=t,He=!0,lr=null,n=Lj(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(js(),r===i){t=ei(e,t,n);break e}Zt(e,t,r,n)}t=t.child}return t;case 5:return Rj(t),e===null&&lp(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,l=i.children,rp(r,i)?l=null:s!==null&&rp(r,s)&&(t.flags|=32),lN(e,t),Zt(e,t,l,n),t.child;case 6:return e===null&&lp(t),null;case 13:return uN(e,t,n);case 4:return ev(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ns(t,null,r,n):Zt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sr(r,i),yb(e,t,r,i,n);case 7:return Zt(e,t,t.pendingProps,n),t.child;case 8:return Zt(e,t,t.pendingProps.children,n),t.child;case 12:return Zt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,l=i.value,ze(Tu,r._currentValue),r._currentValue=l,s!==null)if(pr(s.value,l)){if(s.children===i.children&&!ln.current){t=ei(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var u=s.dependencies;if(u!==null){l=s.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(s.tag===1){d=qr(-1,n&-n),d.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?d.next=d:(d.next=f.next,f.next=d),h.pending=d}}s.lanes|=n,d=s.alternate,d!==null&&(d.lanes|=n),cp(s.return,n,t),u.lanes|=n;break}d=d.next}}else if(s.tag===10)l=s.type===t.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(ne(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),cp(l,n,t),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===t){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Zt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,gs(t,n),i=Kn(i),r=r(i),t.flags|=1,Zt(e,t,r,n),t.child;case 14:return r=t.type,i=sr(r,t.pendingProps),i=sr(r.type,i),xb(e,t,r,i,n);case 15:return sN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sr(r,i),cu(e,t),t.tag=1,cn(r)?(e=!0,Eu(t)):e=!1,gs(t,n),rN(t,r,i),dp(t,r,i,n),mp(null,t,r,!0,e,n);case 19:return dN(e,t,n);case 22:return oN(e,t,n)}throw Error(ne(156,t.tag))};function kN(e,t){return ej(e,t)}function HT(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(e,t,n,r){return new HT(e,t,n,r)}function pv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ZT(e){if(typeof e=="function")return pv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Lg)return 11;if(e===Dg)return 14}return 2}function Ti(e,t){var n=e.alternate;return n===null?(n=Zn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fu(e,t,n,r,i,s){var l=2;if(r=e,typeof e=="function")pv(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Qa:return pa(n.children,i,s,t);case Mg:l=8,i|=8;break;case Dm:return e=Zn(12,n,t,i|2),e.elementType=Dm,e.lanes=s,e;case Im:return e=Zn(13,n,t,i),e.elementType=Im,e.lanes=s,e;case Rm:return e=Zn(19,n,t,i),e.elementType=Rm,e.lanes=s,e;case R1:return Vd(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D1:l=10;break e;case I1:l=9;break e;case Lg:l=11;break e;case Dg:l=14;break e;case pi:l=16,r=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=Zn(l,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function pa(e,t,n,r){return e=Zn(7,e,r,t),e.lanes=n,e}function Vd(e,t,n,r){return e=Zn(22,e,r,t),e.elementType=R1,e.lanes=n,e.stateNode={isHidden:!1},e}function em(e,t,n){return e=Zn(6,e,null,t),e.lanes=n,e}function tm(e,t,n){return t=Zn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WT(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dh(0),this.expirationTimes=Dh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gv(e,t,n,r,i,s,l,u,d){return e=new WT(e,t,n,u,d),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Zn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jg(s),e}function VT(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xa,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function CN(e){if(!e)return Ii;e=e._reactInternals;e:{if(Ma(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(cn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var n=e.type;if(cn(n))return Cj(e,n,t)}return t}function EN(e,t,n,r,i,s,l,u,d){return e=gv(n,r,!0,e,i,s,l,u,d),e.context=CN(null),n=e.current,r=qt(),i=Ai(n),s=qr(r,i),s.callback=t??null,Ei(n,s,i),e.current.lanes=i,Ml(e,i,r),un(e,r),e}function Kd(e,t,n,r){var i=t.current,s=qt(),l=Ai(i);return n=CN(n),t.context===null?t.context=n:t.pendingContext=n,t=qr(s,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ei(i,t,l),e!==null&&(mr(e,i,l,s),su(e,i,l)),l}function Uu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ab(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vv(e,t){Ab(e,t),(e=e.alternate)&&Ab(e,t)}function KT(){return null}var ON=typeof reportError=="function"?reportError:function(e){console.error(e)};function yv(e){this._internalRoot=e}qd.prototype.render=yv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));Kd(e,t,null,null)};qd.prototype.unmount=yv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sa(function(){Kd(null,e,null,null)}),t[Qr]=null}};function qd(e){this._internalRoot=e}qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=oj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xi.length&&t!==0&&t<xi[n].priority;n++);xi.splice(n,0,e),n===0&&cj(e)}};function xv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tb(){}function qT(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Uu(l);s.call(h)}}var l=EN(t,r,e,0,null,!1,!1,"",Tb);return e._reactRootContainer=l,e[Qr]=l.current,ul(e.nodeType===8?e.parentNode:e),Sa(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var h=Uu(d);u.call(h)}}var d=gv(e,0,!1,null,null,!1,!1,"",Tb);return e._reactRootContainer=d,e[Qr]=d.current,ul(e.nodeType===8?e.parentNode:e),Sa(function(){Kd(t,d,n,r)}),d}function Yd(e,t,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var u=i;i=function(){var d=Uu(l);u.call(d)}}Kd(t,l,e,i)}else l=qT(n,t,e,i,r);return Uu(l)}aj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bo(t.pendingLanes);n!==0&&(zg(t,n|1),un(t,Je()),!(ke&6)&&(ks=Je()+500,Fi()))}break;case 13:Sa(function(){var r=Jr(e,1);if(r!==null){var i=qt();mr(r,e,1,i)}}),vv(e,1)}};$g=function(e){if(e.tag===13){var t=Jr(e,134217728);if(t!==null){var n=qt();mr(t,e,134217728,n)}vv(e,134217728)}};sj=function(e){if(e.tag===13){var t=Ai(e),n=Jr(e,t);if(n!==null){var r=qt();mr(n,e,t,r)}vv(e,t)}};oj=function(){return Ae};lj=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};Km=function(e,t,n){switch(t){case"input":if(Bm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Bd(r);if(!i)throw Error(ne(90));$1(r),Bm(r,i)}}}break;case"textarea":F1(e,n);break;case"select":t=n.value,t!=null&&fs(e,!!n.multiple,t,!1)}};q1=fv;G1=Sa;var GT={usingClientEntryPoint:!1,Events:[Dl,ns,Bd,V1,K1,fv]},ko={findFiberByHostInstance:aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YT={bundleType:ko.bundleType,version:ko.version,rendererPackageName:ko.rendererPackageName,rendererConfig:ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Q1(e),e===null?null:e.stateNode},findFiberByHostInstance:ko.findFiberByHostInstance||KT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rc.isDisabled&&Rc.supportsFiber)try{Id=Rc.inject(YT),Cr=Rc}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GT;kn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xv(t))throw Error(ne(200));return VT(e,t,null,n)};kn.createRoot=function(e,t){if(!xv(e))throw Error(ne(299));var n=!1,r="",i=ON;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=gv(e,1,!1,null,null,n,!1,r,i),e[Qr]=t.current,ul(e.nodeType===8?e.parentNode:e),new yv(t)};kn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=Q1(t),e=e===null?null:e.stateNode,e};kn.flushSync=function(e){return Sa(e)};kn.hydrate=function(e,t,n){if(!Gd(t))throw Error(ne(200));return Yd(null,e,t,!0,n)};kn.hydrateRoot=function(e,t,n){if(!xv(e))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=ON;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=EN(t,null,e,1,n??null,i,!1,s,l),e[Qr]=t.current,ul(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new qd(t)};kn.render=function(e,t,n){if(!Gd(t))throw Error(ne(200));return Yd(null,e,t,!1,n)};kn.unmountComponentAtNode=function(e){if(!Gd(e))throw Error(ne(40));return e._reactRootContainer?(Sa(function(){Yd(null,null,e,!1,function(){e._reactRootContainer=null,e[Qr]=null})}),!0):!1};kn.unstable_batchedUpdates=fv;kn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gd(n))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return Yd(e,t,n,!1,r)};kn.version="18.3.1-next-f1338f8080-20240426";function AN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AN)}catch(e){console.error(e)}}AN(),A1.exports=kn;var Xd=A1.exports,TN,Mb=Xd;TN=Mb.createRoot,Mb.hydrateRoot;const XT=[],QT=[],JT=[],eM=[],tM=[],nm=new Date().toISOString().slice(0,10),rm=e=>{const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().slice(0,10)};function et(){return crypto.randomUUID()}function fe(){return new Date().toISOString()}const Pp=[{id:"550e8400-e29b-41d4-a716-446655440001",email:"dr.smith@hospital.com",password:"password321",full_name:"Dr. Sarah Smith",role:"doctor",created_at:"2024-01-15T08:00:00Z"},{id:"550e8400-e29b-41d4-a716-446655440002",email:"john.doe@email.com",password:"password321",full_name:"John Doe",role:"patient",created_at:"2024-01-16T09:30:00Z"},{id:"550e8400-e29b-41d4-a716-446655440003",email:"volunteer@hospital.com",password:"password321",full_name:"Maria Garcia",role:"volunteer",created_at:"2024-01-17T10:15:00Z"},{id:"550e8400-e29b-41d4-a716-446655440004",email:"jane.wilson@email.com",password:"password321",full_name:"Jane Wilson",role:"patient",created_at:"2024-01-18T11:00:00Z"},{id:"550e8400-e29b-41d4-a716-446655440005",email:"dr.johnson@hospital.com",password:"password321",full_name:"Dr. Michael Johnson",role:"doctor",created_at:"2024-01-19T07:45:00Z"}],Hu=[{id:"area-default-salaya",name:"Mahidol University Salaya",color:"#F97316",geometry:{type:"Polygon",coordinates:[[[13.807,100.3198],[13.8068,100.3278],[13.8002,100.3318],[13.7915,100.3306],[13.787,100.323],[13.79,100.316],[13.797,100.3135]]]},created_by:"550e8400-e29b-41d4-a716-446655440001",created_at:"2024-01-20T08:00:00Z",updated_at:"2024-01-20T08:00:00Z"}],nM=[{id:"patient-3",user_id:"user-6",name:"Robert Chen",doe:"2024-01-10",gender:"male",address:"789 Pine Street, Springfield, IL 62703",caregivers_contact:"Linda Chen - (555) 456-7890",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-24",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-009876",lat:13.804,lng:100.326,phone_number:"+66 80 777 8899",patient_categories:{critical:!0,elderly:!0,pregnant:!1},personal_health_history:"History of heart disease, stroke in 2019, diabetes since 2015",doctor_diagnosed:"Congestive Heart Failure, Type 2 Diabetes, Hypertension",medications_history:"Metoprolol 50mg daily, Lisinopril 20mg daily, Insulin glargine",food_allergies:"Dairy products",medication_allergies:"Sulfa drugs",height:"168 cm",weight:"85 kg",bmi:"30.1",temperature:"99.2F",pulse:"88 bpm",blood_pressure:"145/92 mmHg",diabetes:"Type 2 - HbA1c: 8.1%",mental_health_status:"Mild depression, receiving counseling",other_symptoms:"Shortness of breath, swelling in legs",pregnancy_details:"N/A",smoker:!0,doctors_note:"Critical patient requiring close monitoring. Heart failure symptoms worsening.",created_by:"user-1",created_at:"2024-01-15T11:20:00Z",updated_at:"2024-01-26T14:30:00Z"},{id:"patient-11",user_id:"user-14",name:"Olivia Brown",doe:"2025-08-15",gender:"female",address:"22 Meadow Ln, Springfield, IL 62701",caregivers_contact:"Mark Brown - (555) 777-8899",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2025-09-25",today_date:"2025-09-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-202509-01",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2025-09-20",personal_health_history:"Uncomplicated pregnancy and delivery",doctor_diagnosed:"Postpartum recovery",medications_history:"Prenatal vitamins",food_allergies:"None known",medication_allergies:"None known",height:"165 cm",weight:"68 kg",bmi:"25.0",temperature:"98.6F",pulse:"76 bpm",blood_pressure:"118/76 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Mild fatigue",pregnancy_details:"Delivered a healthy baby",smoker:!1,doctors_note:"Routine postpartum follow-up in 6 weeks",created_by:"user-5",created_at:"2025-09-21T10:00:00Z",updated_at:"2025-09-26T09:00:00Z"},{id:"patient-12",user_id:"user-15",name:"Ava Nguyen",doe:"2025-08-28",gender:"female",address:"90 Hillcrest Rd, Springfield, IL 62702",caregivers_contact:"Tom Nguyen - (555) 222-3344",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2025-09-24",today_date:"2025-09-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-202509-02",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2025-08-30",personal_health_history:"Gestational diabetes, controlled",doctor_diagnosed:"Postpartum monitoring",medications_history:"Insulin during pregnancy",food_allergies:"None",medication_allergies:"None",height:"162 cm",weight:"67 kg",bmi:"25.5",temperature:"98.4F",pulse:"74 bpm",blood_pressure:"120/78 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"None",pregnancy_details:"Delivered a healthy baby",smoker:!1,doctors_note:"Blood sugar normalized postpartum",created_by:"user-5",created_at:"2025-09-01T11:00:00Z",updated_at:"2025-09-26T08:30:00Z"},{id:"patient-9",user_id:"user-12",name:"Sofia Martinez",doe:"2024-01-18",gender:"female",address:"12 River Park, Springfield, IL 62701",caregivers_contact:"Daniel Martinez - (555) 111-2233",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-889900",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2024-01-20",personal_health_history:"Healthy pregnancy, normal delivery",doctor_diagnosed:"Postpartum recovery",medications_history:"Prenatal vitamins, iron supplements",food_allergies:"None known",medication_allergies:"None known",height:"164 cm",weight:"66 kg",bmi:"24.5",temperature:"98.6F",pulse:"76 bpm",blood_pressure:"120/78 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Mild fatigue",pregnancy_details:"Delivered a healthy baby boy",smoker:!1,doctors_note:"Recovering well postpartum. Routine follow-up in 6 weeks.",created_by:"user-5",created_at:"2024-01-20T12:30:00Z",updated_at:"2024-01-26T09:30:00Z"},{id:"patient-10",user_id:"user-13",name:"Hannah Lee",doe:"2023-12-28",gender:"female",address:"98 Lake View, Springfield, IL 62702",caregivers_contact:"Eric Lee - (555) 333-4455",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-991122",patient_categories:{critical:!1,elderly:!1,pregnant:!1},pregnancy_status:"postpartum",delivery_date:"2023-12-30",personal_health_history:"Gestational hypertension in late pregnancy",doctor_diagnosed:"Postpartum monitoring",medications_history:"Labetalol during pregnancy",food_allergies:"None known",medication_allergies:"None known",height:"168 cm",weight:"70 kg",bmi:"24.8",temperature:"98.4F",pulse:"74 bpm",blood_pressure:"124/80 mmHg",diabetes:"None",mental_health_status:"Some anxiety, improving",other_symptoms:"Occasional headaches",pregnancy_details:"Delivered a healthy baby girl",smoker:!1,doctors_note:"BP stable postpartum. Continue monitoring.",created_by:"user-5",created_at:"2024-01-01T11:20:00Z",updated_at:"2024-01-26T10:10:00Z"},{id:"patient-4",user_id:"user-7",name:"Emily Rodriguez",doe:"2024-01-12",gender:"female",address:"321 Oak Drive, Springfield, IL 62704",caregivers_contact:"Carlos Rodriguez - (555) 234-5678",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-112233",lat:13.786,lng:100.317,phone_number:"+66 80 222 3344",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-04-02",personal_health_history:"Second pregnancy, first child born healthy in 2020",doctor_diagnosed:"Pregnancy - 32 weeks, Mild Anemia",medications_history:"Prenatal vitamins, Iron supplements",food_allergies:"None known",medication_allergies:"None known",height:"162 cm",weight:"72 kg",bmi:"27.4",temperature:"98.2F",pulse:"82 bpm",blood_pressure:"125/78 mmHg",diabetes:"None",mental_health_status:"Good, excited about pregnancy",other_symptoms:"Mild fatigue, occasional heartburn",pregnancy_details:"32 weeks gestation, estimated due date: April 2, 2024. Baby developing normally, mild anemia being treated.",smoker:!1,doctors_note:"Pregnancy progressing well. Monitor iron levels and continue supplements.",created_by:"user-5",created_at:"2024-01-16T09:45:00Z",updated_at:"2024-01-26T10:15:00Z"},{id:"patient-5",user_id:"user-8",name:"Michael Thompson",doe:"2024-01-08",gender:"male",address:"654 Maple Avenue, Springfield, IL 62705",caregivers_contact:"Sarah Thompson - (555) 345-6789",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-445566",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"Generally healthy, occasional sports injuries",doctor_diagnosed:"Acute Bronchitis, Seasonal Allergies",medications_history:"Albuterol inhaler as needed, Claritin during allergy season",food_allergies:"None known",medication_allergies:"None known",height:"180 cm",weight:"75 kg",bmi:"23.1",temperature:"98.8F",pulse:"68 bpm",blood_pressure:"118/72 mmHg",diabetes:"None",mental_health_status:"Good",other_symptoms:"Persistent cough, mild congestion",pregnancy_details:"N/A",smoker:!1,doctors_note:"Recovering from bronchitis. Should improve with current treatment.",created_by:"user-1",created_at:"2024-01-12T13:30:00Z",updated_at:"2024-01-26T16:20:00Z"},{id:"patient-6",user_id:"user-9",name:"Margaret Foster",doe:"2024-01-05",gender:"female",address:"987 Cedar Lane, Springfield, IL 62706",caregivers_contact:"David Foster - (555) 567-8901",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-778899",patient_categories:{critical:!1,elderly:!0,pregnant:!1},personal_health_history:"Osteoporosis, mild cognitive decline, history of falls",doctor_diagnosed:"Osteoporosis, Mild Dementia, Hypertension",medications_history:"Alendronate weekly, Amlodipine 5mg daily, Donepezil 10mg daily",food_allergies:"None known",medication_allergies:"Aspirin",height:"155 cm",weight:"58 kg",bmi:"24.1",temperature:"98.4F",pulse:"76 bpm",blood_pressure:"138/82 mmHg",diabetes:"None",mental_health_status:"Mild anxiety, some confusion",other_symptoms:"Occasional dizziness, memory issues",pregnancy_details:"N/A",smoker:!1,doctors_note:"Stable condition. Family support is excellent. Continue current medications.",created_by:"user-5",created_at:"2024-01-10T08:15:00Z",updated_at:"2024-01-26T11:45:00Z"},{id:"patient-7",user_id:"user-10",name:"James Patterson",doe:"2024-01-14",gender:"male",address:"147 Birch Street, Springfield, IL 62707",caregivers_contact:"Helen Patterson - (555) 678-9012",assigned_doctor:"Dr. Sarah Smith",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-334455",patient_categories:{critical:!0,elderly:!0,pregnant:!1},personal_health_history:"COPD, former heavy smoker, multiple hospitalizations",doctor_diagnosed:"Chronic Obstructive Pulmonary Disease (COPD), Chronic Kidney Disease",medications_history:"Tiotropium inhaler daily, Prednisone 10mg daily, Furosemide 40mg daily",food_allergies:"None known",medication_allergies:"Penicillin, Codeine",height:"175 cm",weight:"62 kg",bmi:"20.2",temperature:"99.4F",pulse:"92 bpm",blood_pressure:"152/88 mmHg",diabetes:"None",mental_health_status:"Moderate depression due to chronic illness",other_symptoms:"Severe shortness of breath, chronic fatigue, frequent coughing",pregnancy_details:"N/A",smoker:!1,doctors_note:"Critical patient with advanced COPD. Requires frequent monitoring and possible hospitalization.",created_by:"user-1",created_at:"2024-01-18T15:20:00Z",updated_at:"2024-01-26T17:10:00Z"},{id:"patient-8",user_id:"user-11",name:"Lisa Wang",doe:"2024-01-20",gender:"female",address:"258 Elm Court, Springfield, IL 62708",caregivers_contact:"Kevin Wang - (555) 789-0123",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-26",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-556677",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-05-20",personal_health_history:"First pregnancy, generally healthy",doctor_diagnosed:"Pregnancy - 24 weeks, Gestational Hypertension",medications_history:"Prenatal vitamins, Labetalol 200mg twice daily",food_allergies:"Shellfish",medication_allergies:"None known",height:"158 cm",weight:"65 kg",bmi:"26.0",temperature:"98.6F",pulse:"85 bpm",blood_pressure:"142/85 mmHg",diabetes:"None",mental_health_status:"Some anxiety about pregnancy complications",other_symptoms:"Mild headaches, swelling in hands and feet",pregnancy_details:"24 weeks gestation, estimated due date: May 20, 2024. Developing gestational hypertension, requires close monitoring.",smoker:!1,doctors_note:"Monitor blood pressure closely. May need to consider early delivery if hypertension worsens.",created_by:"user-5",created_at:"2024-01-22T12:30:00Z",updated_at:"2024-01-26T13:45:00Z"}],rM=[{id:"patient-1",user_id:"user-2",name:"John Doe",doe:"2024-01-15",gender:"male",address:"123 Main Street, Springfield, IL 62701",caregivers_contact:"Mary Doe - (555) 123-4567",assigned_doctor:"Dr. Sarah Smith - (111) 123-4567",last_record_date:"2024-01-20",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia - (111) 123-4567",medical_record_number:"MRN-001234",lat:13.7992,lng:100.3195,phone_number:"+66 80 111 2233",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"Family history of cardiovascular disease. Previous surgery for appendectomy in 2010.",doctor_diagnosed:"Hypertension, Type 2 Diabetes Mellitus",medications_history:"Lisinopril 10mg daily since 2020, Metformin 500mg twice daily since 2021",food_allergies:"Shellfish, Nuts",medication_allergies:"Penicillin",height:"175 cm",weight:"80 kg",bmi:"26.1",temperature:"98.6F",pulse:"72 bpm",blood_pressure:"130/85 mmHg",diabetes:"Type 2 - HbA1c: 7.2%",mental_health_status:"Stable, no current concerns",other_symptoms:"Occasional headaches, mild fatigue",pregnancy_details:"N/A",smoker:!1,doctors_note:"Patient shows good compliance with medication. Blood pressure slightly elevated, recommend lifestyle modifications and regular monitoring.",created_by:"user-1",created_at:"2024-01-20T14:30:00Z",updated_at:"2024-01-25T16:45:00Z"},{id:"patient-2",user_id:"user-4",name:"Jane Wilson",doe:"2024-01-18",gender:"female",address:"456 Oak Avenue, Springfield, IL 62702",caregivers_contact:"Robert Wilson - (555) 987-6543",assigned_doctor:"Dr. Michael Johnson",last_record_date:"2024-01-25",today_date:"2024-01-26",assigned_vhv_name:"Maria Garcia",medical_record_number:"MRN-005678",lat:13.7901,lng:100.3282,phone_number:"+66 80 444 5566",patient_categories:{critical:!1,elderly:!1,pregnant:!0},pregnancy_status:"pregnant",due_date:"2024-03-15",personal_health_history:"No significant past medical history. First pregnancy.",doctor_diagnosed:"Gestational Diabetes, Pregnancy - 28 weeks",medications_history:"Prenatal vitamins, Insulin as needed for glucose control",food_allergies:"None known",medication_allergies:"None known",height:"165 cm",weight:"68 kg",bmi:"25.0",temperature:"98.4F",pulse:"78 bpm",blood_pressure:"118/75 mmHg",diabetes:"Gestational - Fasting glucose: 95 mg/dL",mental_health_status:"Mild anxiety related to pregnancy, receiving counseling",other_symptoms:"Morning sickness (resolved), mild back pain",pregnancy_details:"28 weeks gestation, estimated due date: March 15, 2024. Regular prenatal checkups, baby developing normally.",smoker:!1,doctors_note:"Pregnancy progressing well. Gestational diabetes well controlled with diet and occasional insulin. Continue regular monitoring.",created_by:"user-3",created_at:"2024-01-21T10:15:00Z",updated_at:"2024-01-26T09:20:00Z"},{name:"Zach",doe:"2025-09-25",gender:"male",address:"Bangkok",caregivers_contact:"111",assigned_doctor:"Strange",last_record_date:"2025-09-25",today_date:"2025-09-25",assigned_vhv_name:"Ironman",medical_record_number:"12345",patient_categories:{critical:!1,elderly:!0,pregnant:!1},personal_health_history:"Good Healthy",doctor_diagnosed:"Lack of sleep",medications_history:"Sleeping pills",food_allergies:"prawns",medication_allergies:"none",height:"170cm",weight:"70kg",bmi:"22.9",temperature:"98.6",pulse:"72",blood_pressure:"120/80",diabetes:"Type2",mental_health_status:"Sound Mind",other_symptoms:"Dream walking",pregnancy_details:"",smoker:!1,doctors_note:"Good To Go",created_by:"user-1",user_id:"user-1",id:"id-uqy6ynvpa",created_at:"2025-09-24T18:14:30.861Z",updated_at:"2025-09-24T18:16:35.460Z"},...nM],iM=[{id:"task-1",title:"Follow-up Blood Pressure Check",description:"Schedule and conduct follow-up blood pressure monitoring for patient John Doe. Check medication compliance and adjust dosage if necessary.",priority:"high",status:"pending",assigned_to:"user-3",assigned_by:"user-1",patient_id:"patient-1",due_date:"2024-01-28",created_at:"2024-01-25T10:30:00Z",updated_at:"2024-01-25T10:30:00Z"},{id:"task-v1",title:"Home Visit - John Doe",description:"Check blood pressure, confirm medications, record vitals.",priority:"high",status:"pending",assigned_to:"user-3",assigned_by:"user-1",patient_id:"patient-1",due_date:nm,created_at:fe(),updated_at:fe()},{id:"task-v2",title:"Follow-up Call - Jane Wilson",description:"Call to review glucose logs and confirm prenatal visit.",priority:"medium",status:"pending",assigned_to:"user-3",assigned_by:"user-5",patient_id:"patient-2",due_date:nm,created_at:fe(),updated_at:fe()},{id:"task-v3",title:"Supply Check - Outreach Kits",description:"Verify stock of glucose strips and BP cuffs for field work.",priority:"low",status:"pending",assigned_to:"user-3",assigned_by:"user-1",due_date:nm,created_at:fe(),updated_at:fe()},{id:"task-2",title:"Prenatal Care Coordination",description:"Coordinate prenatal care appointments and ensure all necessary tests are scheduled for Jane Wilson. Monitor gestational diabetes management.",priority:"urgent",status:"in_progress",assigned_to:"user-3",assigned_by:"user-5",patient_id:"patient-2",due_date:"2024-01-27",created_at:"2024-01-24T14:15:00Z",updated_at:"2024-01-26T09:45:00Z"},{id:"task-3",title:"Medication Inventory Check",description:"Review and update medication inventory. Ensure adequate stock of diabetes medications and blood pressure medications.",priority:"medium",status:"completed",assigned_to:"user-3",assigned_by:"user-1",due_date:"2024-01-26",created_at:"2024-01-23T08:00:00Z",updated_at:"2024-01-26T16:30:00Z",completed_at:"2024-01-26T16:30:00Z"},{id:"task-4",title:"Patient Education Session",description:"Conduct diabetes management education session for newly diagnosed patients. Prepare educational materials and schedule group session.",priority:"medium",status:"pending",assigned_to:"user-1",assigned_by:"user-5",due_date:"2024-01-30",created_at:"2024-01-25T11:00:00Z",updated_at:"2024-01-25T11:00:00Z"},{id:"appt-jd-1",title:"Clinic Visit - BP Review",description:"Follow-up on blood pressure and medication adherence.",priority:"medium",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:rm(3),created_at:fe(),updated_at:fe()},{id:"appt-jd-2",title:"Lab Results Discussion",description:"Discuss recent lab results and adjust care plan as needed.",priority:"low",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:rm(10),created_at:fe(),updated_at:fe()},{id:"appt-jd-overdue",title:"Missed Appointment - Check-in",description:"Reschedule missed appointment and check symptoms.",priority:"high",status:"pending",assigned_to:"user-1",assigned_by:"user-1",patient_id:"patient-1",due_date:rm(-2),created_at:fe(),updated_at:fe()}],aM=[{id:"msg-1",sender_id:"user-1",recipient_id:"user-2",subject:"Follow-up Appointment",content:"Hi John, I wanted to follow up on your recent blood pressure readings. Please schedule an appointment for next week.",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-25T09:30:00Z"},{id:"msg-2",sender_id:"user-2",recipient_id:"user-1",subject:"Re: Follow-up Appointment",content:"Thank you Dr. Smith. I will call the office today to schedule the appointment.",image_url:void 0,image_name:void 0,is_read:!0,created_at:"2024-01-25T14:15:00Z"},{id:"msg-3",sender_id:"user-3",recipient_id:"user-4",subject:"Medication Reminder",content:"Hi Jane, this is a friendly reminder to take your evening insulin. Let me know if you have any questions!",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-26T19:00:00Z"},{id:"msg-4",sender_id:"user-5",recipient_id:"user-2",subject:"Lab Results Available",content:"Your recent lab results are now available. Overall looking good, but we should discuss a few items at your next visit.",image_url:void 0,image_name:void 0,is_read:!1,created_at:"2024-01-26T11:30:00Z"}],sM=[{id:"ann-1",title:"New Health Guidelines",content:"Please note the updated health and safety guidelines for patient care. All staff should review the new protocols for infection control and patient interaction.",priority:"high",created_by:"user-1",created_at:"2024-01-25T08:00:00Z",updated_at:"2024-01-25T08:00:00Z"},{id:"ann-2",title:"Medication Inventory Update",content:"The medication inventory has been updated. Please check the new stock levels and report any shortages immediately.",priority:"medium",created_by:"user-5",created_at:"2024-01-24T14:30:00Z",updated_at:"2024-01-24T14:30:00Z"},{id:"ann-3",title:"Emergency Contact Information",content:"Updated emergency contact information has been distributed. Please ensure all patients have current emergency contacts on file.",priority:"urgent",created_by:"user-1",created_at:"2024-01-26T10:15:00Z",updated_at:"2024-01-26T10:15:00Z"}],oM=[{id:"record-1",patient_id:"patient-1",recorded_by:"user-2",record_date:"2024-01-26",temperature:"98.6F",pulse:"75 bpm",blood_pressure:"128/82 mmHg",weight:"79.5 kg",blood_sugar:"110 mg/dL",pain_level:3,fatigue_level:4,mood:"good",appetite:"good",sleep_quality:"fair",symptoms_description:"Mild headache in the morning, feeling better now",medications_taken:"Lisinopril 10mg, Metformin 500mg",activities:"Light walking for 30 minutes",notes:"Feeling overall better than yesterday",created_at:"2024-01-26T08:30:00Z",updated_at:"2024-01-26T08:30:00Z"},{id:"record-2",patient_id:"patient-2",recorded_by:"user-4",record_date:"2024-01-26",temperature:"98.4F",pulse:"80 bpm",blood_pressure:"115/70 mmHg",weight:"68.2 kg",blood_sugar:"92 mg/dL",pain_level:2,fatigue_level:3,mood:"excellent",appetite:"excellent",sleep_quality:"good",symptoms_description:"Baby is very active today, no morning sickness",medications_taken:"Prenatal vitamins",activities:"Prenatal yoga, light housework",notes:"Feeling great, baby movements are strong",created_at:"2024-01-26T09:15:00Z",updated_at:"2024-01-26T09:15:00Z"},{id:"record-3",patient_id:"patient-1",recorded_by:"user-2",record_date:"2024-01-25",temperature:"99.1F",pulse:"78 bpm",blood_pressure:"132/85 mmHg",weight:"80 kg",blood_sugar:"125 mg/dL",pain_level:5,fatigue_level:6,mood:"fair",appetite:"poor",sleep_quality:"poor",symptoms_description:"Persistent headache, feeling tired",medications_taken:"Lisinopril 10mg, Metformin 500mg, Tylenol for headache",activities:"Mostly resting",notes:"Not feeling well today, headache is bothering me",created_at:"2024-01-25T19:00:00Z",updated_at:"2024-01-25T19:00:00Z"}],MN=[{id:"loc-v-1",type:"volunteer",name:"Maria Garcia (Volunteer)",lat:13.8005,lng:100.3231,address:"Near Salaya Market",user_id:"user-3"},{id:"loc-c-1",type:"center",name:"Community Health Center - Salaya",lat:13.7963,lng:100.3127,address:"Salaya Rd",phone:"+66 2 555 0101"},{id:"loc-c-2",type:"center",name:"Phutthamonthon Health Center",lat:13.8048,lng:100.3342,address:"Phutthamonthon",phone:"+66 2 555 0202"},{id:"loc-h-1",type:"hospital",name:"Nakhon Pathom Hospital (Annex)",lat:13.7769,lng:100.3186,address:"Near Salaya",phone:"+66 2 555 0303"}],LN=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),lM=()=>{var t;const e="medical_portal_session";try{const n=localStorage.getItem(e);if(n){const r=JSON.parse(n);if((t=r==null?void 0:r.user)!=null&&t.id&&!LN(r.user.id))return console.warn("Detected invalid user ID format in session. Clearing..."),localStorage.removeItem(e),!0}}catch(n){console.error("Error validating session:",n)}return!1},la="medical_portal_session",DN="dummyUsers",cM=e=>{try{localStorage.setItem(DN,JSON.stringify(e))}catch(t){console.error("Error saving users to localStorage:",t)}},IN=()=>{try{const e=localStorage.getItem(DN);return e?JSON.parse(e):[...Pp]}catch(e){return console.error("Error loading users from localStorage:",e),[...Pp]}};let bn=IN();const bv=()=>{bn=IN()},uM=async(e,t,n,r)=>{if(bn.find(u=>u.email===e))return{data:null,error:{message:"User already exists with this email"}};const s={id:et(),email:e,password:t,full_name:n,role:r,created_at:fe()};bn.push(s),cM(bn);const l={user:s,token:et(),expires_at:new Date(Date.now()+24*60*60*1e3).toISOString()};return localStorage.setItem(la,JSON.stringify(l)),{data:{user:s,session:l},error:null}},dM=async(e,t)=>{bv();const n=bn.find(i=>i.email===e&&i.password===t);if(!n)return{data:null,error:{message:"Invalid email or password"}};const r={user:n,token:et(),expires_at:new Date(Date.now()+24*60*60*1e3).toISOString()};return localStorage.setItem(la,JSON.stringify(r)),{data:{user:n,session:r},error:null}},fM=async()=>(localStorage.removeItem(la),{error:null}),hM=()=>{const e=localStorage.getItem(la);if(!e)return null;try{const t=JSON.parse(e);return new Date(t.expires_at)<new Date?(localStorage.removeItem(la),null):LN(t.user.id)?t:(console.warn("Invalid user ID format detected. Clearing session. Please log in again."),localStorage.removeItem(la),null)}catch{return localStorage.removeItem(la),null}},Mi=e=>(bv(),bn.find(t=>t.id===e)),Qd=async(e,t)=>{const n=bn.findIndex(r=>r.id===e);if(n===-1)return{error:{message:"User not found"}};bn[n].password=t||"";try{localStorage.setItem("dummyUsers",JSON.stringify(bn))}catch{}return{error:null}},mM=async(e,t)=>{bv();const n=bn.findIndex(i=>i.id===e);if(n===-1)return{error:{message:"User not found"}};if(bn.find((i,s)=>s!==n&&i.email.toLowerCase()===t.toLowerCase()))return{error:{message:"Email already in use"}};bn[n].email=t;try{localStorage.setItem("dummyUsers",JSON.stringify(bn))}catch{}return{error:null}},RN=x.createContext(void 0),Pe=()=>{const e=x.useContext(RN);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},pM=({children:e})=>{const[t,n]=x.useState(null),[r,i]=x.useState(null),[s,l]=x.useState(!0);x.useEffect(()=>{const m=hM();m&&(i(m),n(m.user)),l(!1)},[]);const f={user:t,session:r,loading:s,signUp:async(m,g,v,N)=>{const{data:w,error:S}=await uM(m,g,v,N);return w&&!S&&(i(w.session),n(w.user)),{data:w,error:S}},signIn:async(m,g)=>{const{data:v,error:N}=await dM(m,g);return v&&!N&&(i(v.session),n(v.user)),{data:v,error:N}},signOut:async()=>{const{error:m}=await fM();return m||(i(null),n(null)),{error:m}}};return a.jsx(RN.Provider,{value:f,children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(e,t)=>{const n=x.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:u="",children:d,...h},f)=>x.createElement("svg",{ref:f,...gM,width:i,height:i,stroke:r,strokeWidth:l?Number(s)*24/Number(i):s,className:["lucide",`lucide-${vM(e)}`,u].join(" "),...h},[...t.map(([m,g])=>x.createElement(m,g)),...Array.isArray(d)?d:[d]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=pe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=pe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=pe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=pe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=pe("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=pe("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=pe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=pe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=pe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=pe("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=pe("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=pe("UserSearch",[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=pe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_e=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t)),console.log(` Data saved to LOCALSTORAGE with key: ${e}`,t.length||Object.keys(t).length),console.log(" This data is stored in your BROWSER, not in actual files")}catch(n){console.error("Error saving to localStorage:",n)}},En=(e,t)=>{try{const n=localStorage.getItem(e),r=n?JSON.parse(n):t;return console.log(` Data loaded from LOCALSTORAGE with key: ${e}`,r.length||Object.keys(r).length),console.log(" This data comes from your BROWSER storage, not actual files"),r}catch(n){return console.error("Error loading from localStorage:",n),t}};let Ze=En("dummyPatientProfiles",[...rM]),Un=En("dummyMessages",[...aM]),ye=En("dummyUsers",[...Pp]),St=En("dummyTasks",[...iM]),cr=En("dummyAnnouncements",[...sM]),$t=En("dummyDailyRecords",[...oM]),Bt=En("dummyDoctorRecords",[...eM]),Ya=En("dummyLocations",[...MN]),rn=En("dummyVolunteers",[]),Ep=En("dummyMentalAssessments",[...XT]),Hn=En("dummyMedications",[...QT]),pu=En("dummyMedicationIntakes",[...JT]),_i=En("dummyMedicationRequests",[...tM]);try{const e=[];for(const t of Ze)if(!ye.find(r=>r.id===t.user_id)){const r={id:t.user_id||et(),email:`patient+${(t.user_id||"").toLowerCase()||Math.random().toString(36).slice(2)}@example.local`,password:"",full_name:t.name||"Patient",role:"patient",created_at:fe()};ye.push(r),e.push(r)}e.length>0&&(_e("dummyUsers",ye),console.log(`Seeded ${e.length} user(s) from patient profiles`))}catch(e){console.warn("Unable to seed users from patient profiles",e)}try{const e=new Map((ye||[]).map(g=>[g.id,g])),t=(ye||[]).filter(g=>g.role==="doctor"),n=t[0];for(const g of t)if(!g.doctor_code){const v=t.indexOf(g);g.doctor_code=`DR-${String(v+1).padStart(6,"0")}`}_e("dummyUsers",ye);const r=(Hu||[])[0],i=r?(()=>{const g=r.geometry.coordinates[0]||[],v=g.reduce((w,S)=>w+((S==null?void 0:S[0])||0),0)/(g.length||1),N=g.reduce((w,S)=>w+((S==null?void 0:S[1])||0),0)/(g.length||1);return{lat:v,lng:N}})():{lat:13.793,lng:100.321};let s=!1;Ze=(Ze||[]).filter(g=>!!g&&!!g.name).map(g=>{const v={...g},N=t.map(j=>(j.full_name||"").toLowerCase()),w=(v.assigned_doctor||"").toLowerCase();!N.find(j=>w.includes(j))&&n&&(v.assigned_doctor=n.full_name,s=!0);const b="Maria Garcia";if((typeof v.assigned_vhv_name!="string"||v.assigned_vhv_name.length===0||/(ironman|unknown|n\/a)/i.test(v.assigned_vhv_name))&&(v.assigned_vhv_name=b,s=!0),!v.medical_record_number||!/^MRN-/.test(v.medical_record_number)){const j=Math.floor(1e5+Math.random()*899999);v.medical_record_number=`MRN-${String(j).padStart(6,"0")}`,s=!0}if(typeof v.lat!="number"||typeof v.lng!="number"){const j=()=>(Math.random()-.5)*.01;v.lat=i.lat+j(),v.lng=i.lng+j(),s=!0}if(!v.area_name&&r&&(v.area_name=r.name,s=!0),!v.user_id||!e.get(v.user_id)){const j=et();v.user_id=j,ye.push({id:j,email:`patient+${j.slice(0,6)}@example.local`,password:"",full_name:v.name,role:"patient",created_at:fe()}),_e("dummyUsers",ye),s=!0}return v}),s&&_e("dummyPatientProfiles",Ze),(rn||[]).length;const l=(Un||[]).length;Un=(Un||[]).filter(g=>e.has(g.sender_id)&&e.has(g.recipient_id)),Un.length!==l&&_e("dummyMessages",Un);const u=new Set((Ze||[]).map(g=>g.id)),d=(St||[]).length;St=(St||[]).filter(g=>e.has(g.assigned_to)&&e.has(g.assigned_by)&&(!g.patient_id||u.has(g.patient_id))),St.length!==d&&_e("dummyTasks",St);const h=($t||[]).length;$t=($t||[]).filter(g=>u.has(g.patient_id)&&e.has(g.recorded_by)),$t.length!==h&&_e("dummyDailyRecords",$t);const f=(Bt||[]).length;Bt=(Bt||[]).filter(g=>u.has(g.patient_id)&&e.has(g.recorded_by)),Bt.length!==f&&_e("dummyDoctorRecords",Bt);const m=(Ya||[]).length;Ya=(Ya||[]).filter(g=>!g.user_id||e.has(g.user_id)),Ya.length!==m&&_e("dummyLocations",Ya)}catch(e){console.warn("Normalization pass skipped:",e)}const OM=e=>{if(!e)return 0;const t=(e.match(/(\d+)/)||[])[1];return t?parseInt(t,10):0},AM=e=>`MRN-${String(e).padStart(6,"0")}`,UN=async()=>{await new Promise(t=>setTimeout(t,50));const e=Ze.reduce((t,n)=>Math.max(t,OM(n.medical_record_number)),0);return AM(e+1)},TM=e=>{if(!e)return 0;const t=(e.match(/(\d+)/)||[])[1];return t?parseInt(t,10):0},HN=e=>`VHV-${String(e).padStart(6,"0")}`,ZN=async()=>{await new Promise(t=>setTimeout(t,20));const e=rn.reduce((t,n)=>Math.max(t,TM(n.volunteer_code)),0);return HN(e+1)},MM=e=>{if(!e)return 0;const t=(e.match(/(\d+)/)||[])[1];return t?parseInt(t,10):0},LM=e=>`DR-${String(e).padStart(6,"0")}`,DM=async()=>{await new Promise(t=>setTimeout(t,20));const e=ye.filter(t=>t.role==="doctor").reduce((t,n)=>Math.max(t,MM(n.doctor_code)),0);return LM(e+1)},Ot=async()=>(await new Promise(e=>setTimeout(e,500)),{data:Ze.map(e=>({...e,created_by_user:ye.find(t=>t.id===e.created_by)})),error:null}),IM=async e=>{await new Promise(n=>setTimeout(n,200));const t=Ze.find(n=>(n.medical_record_number||"").toLowerCase()===(e||"").toLowerCase());return t?{data:t,error:null}:{data:null,error:{message:"No patient with that ID"}}},Lr=async e=>{await new Promise(n=>setTimeout(n,300));const t=Ze.find(n=>n.user_id===e);return t?{data:{...t,created_by_user:ye.find(n=>n.id===t.created_by)},error:null}:{data:null,error:{code:"PGRST116",message:"No profile found"}}},RM=async e=>{await new Promise(r=>setTimeout(r,400));let t=e.medical_record_number;t||(t=await UN());const n={...e,medical_record_number:t,id:et(),created_at:fe(),updated_at:fe()};return Ze.push(n),_e("dummyPatientProfiles",Ze),{data:n,error:null}},Ku=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=Ze.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Profile not found"}}:(Ze[n]={...Ze[n],...t,updated_at:fe()},_e("dummyPatientProfiles",Ze),{data:Ze[n],error:null})},dn=async()=>{if(await new Promise(t=>setTimeout(t,200)),(rn||[]).length===0){const t=(ye||[]).filter(n=>n.role==="volunteer").map((n,r)=>{const i=(MN||[]).find(d=>d.user_id===n.id),s=(Hu||[])[0],l=s?(()=>{const d=s.geometry.coordinates[0]||[],h=d.reduce((m,g)=>m+((g==null?void 0:g[0])||0),0)/(d.length||1),f=d.reduce((m,g)=>m+((g==null?void 0:g[1])||0),0)/(d.length||1);return{lat:h,lng:f}})():void 0,u={id:et(),user_id:n.id,volunteer_code:HN(r+1),name:n.full_name,email:n.email,phone:void 0,address:i==null?void 0:i.address,lat:i==null?void 0:i.lat,lng:i==null?void 0:i.lng,created_at:fe(),updated_at:fe()};return(n.email||"").toLowerCase()==="volunteer@hospital.com"&&s&&(u.area_id=s.id,u.area_name=s.name,(!u.lat||!u.lng)&&(u.lat=l==null?void 0:l.lat,u.lng=l==null?void 0:l.lng)),u});t.length>0&&(rn=t,_e("dummyVolunteers",rn))}return{data:rn.map(t=>({...t,user:ye.find(n=>n.id===t.user_id)})),error:null}},zM=async e=>{await new Promise(n=>setTimeout(n,150));const t=rn.find(n=>(n.volunteer_code||"").toLowerCase()===e.toLowerCase());return{data:t||null,error:t?null:{message:"Not found"}}},$M=async e=>{await new Promise(r=>setTimeout(r,200));const t=e.volunteer_code||await ZN(),n={...e,volunteer_code:t,id:et(),created_at:fe(),updated_at:fe()};return rn.push(n),_e("dummyVolunteers",rn),{data:n,error:null}},WN=async(e,t)=>{await new Promise(r=>setTimeout(r,200));const n=rn.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Volunteer not found"}}:(rn[n]={...rn[n],...t,updated_at:fe()},_e("dummyVolunteers",rn),{data:rn[n],error:null})},BM=async e=>(await new Promise(n=>setTimeout(n,400)),{data:Un.filter(n=>n.sender_id===e||n.recipient_id===e).map(n=>({...n,sender:ye.find(r=>r.id===n.sender_id),recipient:ye.find(r=>r.id===n.recipient_id)})).sort((n,r)=>new Date(r.created_at).getTime()-new Date(n.created_at).getTime()),error:null}),gr=async e=>{await new Promise(n=>setTimeout(n,300));const t={...e,id:et(),created_at:fe()};return Un.push(t),_e("dummyMessages",Un),console.log(" Message saved to BROWSER LOCALSTORAGE:",t),console.log(" Total messages in BROWSER storage:",Un.length),console.log("  NOTE: Data is NOT saved to actual files, only in browser localStorage"),{data:t,error:null}},FM=async(e,t)=>{await new Promise(r=>setTimeout(r,200));const n=Un.findIndex(r=>r.id===e&&r.recipient_id===t);return n!==-1&&(Un[n].is_read=!0,_e("dummyMessages",Un)),{error:null}},Ct=async e=>(await new Promise(n=>setTimeout(n,300)),{data:e?ye.filter(n=>n.id!==e):ye,error:null}),Lb=async(e,t)=>{if(await new Promise(i=>setTimeout(i,150)),!e)return{data:null,error:{message:"Email is required"}};const n=ye.find(i=>i.email.toLowerCase()===e.toLowerCase());if(n)return{data:n,error:null};const r={id:et(),email:e,password:"",full_name:t||e.split("@")[0],role:"patient",created_at:fe()};return ye.push(r),_e("dummyUsers",ye),{data:r,error:null}},UM=async(e,t)=>{if(await new Promise(i=>setTimeout(i,150)),!e)return{data:null,error:{message:"Email is required"}};const n=ye.find(i=>i.email.toLowerCase()===e.toLowerCase());if(n)return{data:n,error:null};const r={id:et(),email:e,password:"",full_name:t||e.split("@")[0],role:"volunteer",created_at:fe()};return ye.push(r),_e("dummyUsers",ye),{data:r,error:null}},HM=async(e,t)=>{if(await new Promise(s=>setTimeout(s,150)),!e)return{data:null,error:{message:"Email is required"}};const n=ye.find(s=>s.email.toLowerCase()===e.toLowerCase());if(n)return{data:n,error:null};const r=await DM(),i={id:et(),email:e,password:"",full_name:t||e.split("@")[0],role:"doctor",created_at:fe(),doctor_code:r};return ye.push(i),_e("dummyUsers",ye),{data:i,error:null}},Op=async(e,t)=>{await new Promise(r=>setTimeout(r,150));const n=ye.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"User not found"}}:(ye[n]={...ye[n],...t},_e("dummyUsers",ye),{data:ye[n],error:null})},ZM=async e=>{await new Promise(r=>setTimeout(r,120));const t=ye.findIndex(r=>r.id===e);if(t===-1)return{data:null,error:{message:"User not found"}};const[n]=ye.splice(t,1);return _e("dummyUsers",ye),{data:n,error:null}},WM=async()=>(await new Promise(e=>setTimeout(e,200)),{data:Ya,error:null}),VM=async e=>{await new Promise(n=>setTimeout(n,120));const t=(ye||[]).find(n=>n.role==="doctor"&&(n.doctor_code||"").toLowerCase()===(e||"").toLowerCase());return{data:t||null,error:t?null:{message:"Not found"}}},fr=async e=>{await new Promise(n=>setTimeout(n,400));let t=St.map(n=>({...n,assigned_to_user:ye.find(r=>r.id===n.assigned_to),assigned_by_user:ye.find(r=>r.id===n.assigned_by),patient:n.patient_id?Ze.find(r=>r.id===n.patient_id):void 0}));return e&&(t=t.filter(n=>n.assigned_to===e||n.assigned_by===e)),{data:t.sort((n,r)=>new Date(r.created_at).getTime()-new Date(n.created_at).getTime()),error:null}},$l=async e=>{await new Promise(n=>setTimeout(n,400));const t={...e,id:et(),created_at:fe(),updated_at:fe()};return St.push(t),_e("dummyTasks",St),{data:t,error:null}},Pr=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=St.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Task not found"}}:(t.status==="completed"&&St[n].status!=="completed"&&(t.completed_at=fe()),St[n]={...St[n],...t,updated_at:fe()},_e("dummyTasks",St),{data:St[n],error:null})},VN=async e=>{await new Promise(n=>setTimeout(n,300));const t=St.findIndex(n=>n.id===e);return t===-1?{data:null,error:{message:"Task not found"}}:(St.splice(t,1),_e("dummyTasks",St),{data:null,error:null})},KM=async()=>(await new Promise(t=>setTimeout(t,300)),{data:cr.map(t=>({...t,created_by_user:ye.find(n=>n.id===t.created_by)})).sort((t,n)=>new Date(n.created_at).getTime()-new Date(t.created_at).getTime()),error:null}),qM=async e=>{await new Promise(n=>setTimeout(n,400));const t={...e,id:et(),created_at:fe(),updated_at:fe()};return cr.push(t),_e("dummyAnnouncements",cr),{data:t,error:null}},GM=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=cr.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Announcement not found"}}:(cr[n]={...cr[n],...t,updated_at:fe()},_e("dummyAnnouncements",cr),{data:cr[n],error:null})},YM=async e=>{await new Promise(n=>setTimeout(n,300));const t=cr.findIndex(n=>n.id===e);return t===-1?{data:null,error:{message:"Announcement not found"}}:(cr.splice(t,1),_e("dummyAnnouncements",cr),{data:null,error:null})},XM=async(e,t)=>{await new Promise(r=>setTimeout(r,400));let n=$t.map(r=>({...r,patient:Ze.find(i=>i.id===r.patient_id),recorded_by_user:ye.find(i=>i.id===r.recorded_by)}));if(t){const r=Ze.find(i=>i.user_id===t);r&&(n=n.filter(i=>i.patient_id===r.id))}return{data:n.sort((r,i)=>new Date(i.record_date).getTime()-new Date(r.record_date).getTime()),error:null}},QM=async e=>{await new Promise(n=>setTimeout(n,400));const t={...e,id:et(),created_at:fe(),updated_at:fe()};return $t.push(t),_e("dummyDailyRecords",$t),{data:t,error:null}},JM=async(e,t)=>{await new Promise(r=>setTimeout(r,400));const n=$t.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Daily record not found"}}:($t[n]={...$t[n],...t,updated_at:fe()},_e("dummyDailyRecords",$t),{data:$t[n],error:null})},e3=async e=>{await new Promise(n=>setTimeout(n,300));const t=$t.findIndex(n=>n.id===e);return t===-1?{data:null,error:{message:"Daily record not found"}}:($t.splice(t,1),_e("dummyDailyRecords",$t),{data:null,error:null})},t3=async(e,t)=>{await new Promise(r=>setTimeout(r,300));let n=(Bt||[]).map(r=>({...r,patient:Ze.find(i=>i.id===r.patient_id),recorded_by_user:ye.find(i=>i.id===r.recorded_by)}));if(t){const r=Ze.find(i=>i.user_id===t);r&&(n=n.filter(i=>i.patient_id===r.id))}return{data:n.sort((r,i)=>new Date(i.visit_date).getTime()-new Date(r.visit_date).getTime()),error:null}},n3=async e=>{await new Promise(n=>setTimeout(n,250));const t={...e,id:et(),created_at:fe(),updated_at:fe()};return Bt.push(t),_e("dummyDoctorRecords",Bt),{data:t,error:null}},r3=async(e,t)=>{await new Promise(r=>setTimeout(r,250));const n=Bt.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Record not found"}}:(Bt[n]={...Bt[n],...t,updated_at:fe()},_e("dummyDoctorRecords",Bt),{data:Bt[n],error:null})},i3=async e=>{await new Promise(n=>setTimeout(n,200));const t=Bt.findIndex(n=>n.id===e);return t===-1?{data:null,error:{message:"Record not found"}}:(Bt.splice(t,1),_e("dummyDoctorRecords",Bt),{data:null,error:null})},Ap=async(e,t)=>{await new Promise(r=>setTimeout(r,200));let n=Ep.map(r=>({...r,patient:Ze.find(i=>i.id===r.patient_id),recorded_by_user:ye.find(i=>i.id===r.recorded_by)}));return e&&(n=n.filter(r=>r.patient_id===e)),{data:n.sort((r,i)=>new Date(i.date).getTime()-new Date(r.date).getTime()),error:null}},a3=async e=>{await new Promise(n=>setTimeout(n,200));const t={...e,id:et(),created_at:fe()};return Ep.push(t),_e("dummyMentalAssessments",Ep),{data:t,error:null}},s3=async e=>{await new Promise(n=>setTimeout(n,100));let t=[...Hn];return e&&(t=t.filter(n=>n.patient_id===e)),{data:t,error:null}},KN=async e=>{await new Promise(n=>setTimeout(n,100));const t={...e,id:et(),created_at:fe(),updated_at:fe()};return Hn.push(t),_e("dummyMedications",Hn),{data:t,error:null}},o3=async(e,t)=>{await new Promise(r=>setTimeout(r,100));const n=Hn.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Medication not found"}}:(Hn[n]={...Hn[n],...t,updated_at:fe()},_e("dummyMedications",Hn),{data:Hn[n],error:null})},l3=async e=>{await new Promise(n=>setTimeout(n,100));const t=Hn.findIndex(n=>n.id===e);return t!==-1&&(Hn.splice(t,1),_e("dummyMedications",Hn)),{data:null,error:null}},c3=async(e,t,n)=>{await new Promise(i=>setTimeout(i,100));const r=pu.find(i=>i.medication_id===e&&i.scheduled_at===n);return r?(r.status="taken",r.taken_at=fe()):pu.push({id:et(),medication_id:e,patient_id:t,scheduled_at:n,taken_at:fe(),status:"taken"}),_e("dummyMedicationIntakes",pu),{data:!0,error:null}},u3=e=>{const[t,n]=(e||"00:00").split(":").map(i=>parseInt(i,10)||0),r=new Date;return r.setHours(t,n,0,0),r},d3=async e=>{await new Promise(u=>setTimeout(u,50));const t=Ze.find(u=>u.user_id===e);if(!t)return{data:[],error:null};const n=new Date,r=n.toISOString().slice(0,10),i=Hn.filter(u=>u.patient_id===t.id&&u.reminders_enabled!==!1).filter(u=>(!u.start_date||u.start_date<=r)&&(!u.end_date||u.end_date>=r)),s=[],l=5;for(const u of i)for(const d of u.times||[]){const h=u3(d);if(Math.abs((n.getTime()-h.getTime())/6e4)<=l){const m=new Date(h.getTime()).toISOString();pu.find(v=>v.medication_id===u.id&&v.scheduled_at===m&&v.status==="taken")||s.push({medication:u,scheduledAt:m})}}return{data:s,error:null}},qu=async e=>{await new Promise(n=>setTimeout(n,120));let t=(_i||[]).map(n=>({...n,patient:(Ze||[]).find(r=>r.id===n.patient_id)}));return e&&(t=t.filter(n=>n.patient_id===e)),{data:t.sort((n,r)=>new Date(r.created_at).getTime()-new Date(n.created_at).getTime()),error:null}},f3=async e=>{await new Promise(n=>setTimeout(n,120));const t={...e,status:e.status||"pending",id:et(),created_at:fe(),updated_at:fe()};return _i.push(t),_e("dummyMedicationRequests",_i),{data:t,error:null}},Db=async(e,t)=>{await new Promise(r=>setTimeout(r,120));const n=_i.findIndex(r=>r.id===e);return n===-1?{data:null,error:{message:"Request not found"}}:(_i[n]={..._i[n],...t,updated_at:fe()},_e("dummyMedicationRequests",_i),{data:_i[n],error:null})},h3=()=>{const{signIn:e}=Pe(),[t,n]=x.useState("identify"),[r,i]=x.useState(""),[s,l]=x.useState(""),[u,d]=x.useState(null),[h,f]=x.useState(!1),[m,g]=x.useState(""),[v,N]=x.useState(""),[w,S]=x.useState(!1),[b,j]=x.useState(""),_=async A=>{A.preventDefault(),j(""),S(!0);try{let T="",R=null;const B=r.trim();if(!B)throw new Error("Please enter patient ID or email");if(B.includes("@")){const{data:$}=await Ct(),F=($||[]).find(E=>E.role==="patient"&&E.email.toLowerCase()===B.toLowerCase());if(!F)throw new Error("No patient account with this email");R=F.id,T=F.email}else{const{data:$}=await IM(B);if(!$)throw new Error("Patient ID not found");if($.user_id){const F=Mi($.user_id);F&&F.role==="patient"&&(R=F.id,T=F.email)}if(!R)throw new Error("This patient has no account yet. Ask your care team to add an email for login.")}d(R),l(T);const I=R?Mi(R):void 0,M=!!(I&&I.password&&I.password.length>0);f(M),n(M?"password":"set-password")}catch(T){j(T.message||"Unable to identify patient")}finally{S(!1)}},k=async A=>{if(A.preventDefault(),j(""),m.length<6)return j("Password must be at least 6 characters");if(m!==v)return j("Passwords do not match");if(!u)return j("Missing user account");S(!0);try{const{error:T}=await Qd(u,m);if(T)throw new Error(T.message);const R=await e(s,m);R!=null&&R.error&&j(R.error.message)}catch(T){j(T.message||"Unable to set password")}finally{S(!1)}},C=async A=>{A.preventDefault(),j(""),S(!0);try{const{error:T}=await e(s,m);T&&j(T.message)}catch{j("Login failed")}finally{S(!1)}};return a.jsxs("div",{className:"w-full",children:[t==="identify"&&a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(FN,{className:"w-8 h-8 inline text-blue-600"}),a.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Patient Access"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Patient ID (MRN) or Email"})]}),a.jsx("input",{type:"text",value:r,onChange:A=>i(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"MRN-001234 or you@example.com"}),b&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:b}),a.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Pa,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:s,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsx("input",{type:"password",value:m,onChange:A=>g(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),b&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:b}),a.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Pa,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&a.jsxs("form",{onSubmit:k,className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Es,{className:"w-8 h-8 inline text-blue-600"}),a.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),a.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",s]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsx("input",{type:"password",value:m,onChange:A=>g(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),a.jsx("input",{type:"password",value:v,onChange:A=>N(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),b&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:b}),a.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[w?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Es,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},m3=()=>{const{signIn:e}=Pe(),[t,n]=x.useState("identify"),[r,i]=x.useState(""),[s,l]=x.useState(""),[u,d]=x.useState(null),[h,f]=x.useState(""),[m,g]=x.useState(""),[v,N]=x.useState(!1),[w,S]=x.useState(""),b=async k=>{k.preventDefault(),S(""),N(!0);try{let C=null,A="";const T=r.trim();if(!T)throw new Error("Enter Volunteer ID or Email");if(T.includes("@")){const{data:I}=await Ct(),M=(I||[]).find($=>$.role==="volunteer"&&$.email.toLowerCase()===T.toLowerCase());if(!M)throw new Error("Volunteer email not found");C=M.id,A=M.email}else{const{data:I}=await zM(T);if(!I)throw new Error("Volunteer ID not found");C=I.user_id;const M=C?Mi(C):void 0;if(!M)throw new Error("No user linked to this volunteer");A=M.email}d(C),l(A);const R=C?Mi(C):void 0,B=!!(R&&R.password&&R.password.length>0);n(B?"password":"set-password")}catch(C){S(C.message||"Unable to identify")}finally{N(!1)}},j=async k=>{if(k.preventDefault(),S(""),h.length<6)return S("Password must be at least 6 characters");if(h!==m)return S("Passwords do not match");if(!u)return S("Missing user account");N(!0);try{const{error:C}=await Qd(u,h);if(C)throw new Error(C.message);const A=await e(s,h);A!=null&&A.error&&S(A.error.message)}catch(C){S(C.message||"Unable to set password")}finally{N(!1)}},_=async k=>{k.preventDefault(),S(""),N(!0);try{const{error:C}=await e(s,h);C&&S(C.message)}finally{N(!1)}};return a.jsxs("div",{className:"w-full",children:[t==="identify"&&a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(FN,{className:"w-8 h-8 inline text-emerald-600"}),a.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Volunteer Access"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Volunteer ID or Email"})]}),a.jsx("input",{type:"text",value:r,onChange:k=>i(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"VHV-000123 or you@example.com"}),w&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),a.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[v?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Pa,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:s,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsx("input",{type:"password",value:h,onChange:k=>f(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),w&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),a.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[v?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Pa,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&a.jsxs("form",{onSubmit:j,className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Es,{className:"w-8 h-8 inline text-emerald-600"}),a.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),a.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",s]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsx("input",{type:"password",value:h,onChange:k=>f(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),a.jsx("input",{type:"password",value:m,onChange:k=>g(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),w&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),a.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-emerald-600 text-white py-3 rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[v?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Es,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},p3=()=>{const{signIn:e}=Pe(),[t,n]=x.useState("identify"),[r,i]=x.useState(""),[s,l]=x.useState(""),[u,d]=x.useState(null),[h,f]=x.useState(""),[m,g]=x.useState(""),[v,N]=x.useState(!1),[w,S]=x.useState(""),b=async k=>{k.preventDefault(),S(""),N(!0);try{let C=null,A="";const T=r.trim();if(!T)throw new Error("Enter Doctor ID or Email");if(T.includes("@")){const{data:I}=await Ct(),M=(I||[]).find($=>$.role==="doctor"&&($.email||"").toLowerCase()===T.toLowerCase());if(!M)throw new Error("Doctor email not found");C=M.id,A=M.email}else{const{data:I}=await VM(T);if(!I)throw new Error("Doctor ID not found");C=I.id,A=I.email}d(C),l(A);const R=C?Mi(C):void 0,B=!!(R&&R.password&&R.password.length>0);n(B?"password":"set-password")}catch(C){S(C.message||"Unable to identify")}finally{N(!1)}},j=async k=>{if(k.preventDefault(),S(""),h.length<6)return S("Password must be at least 6 characters");if(h!==m)return S("Passwords do not match");if(!u)return S("Missing user account");N(!0);try{const{error:C}=await Qd(u,h);if(C)throw new Error(C.message);const A=await e(s,h);A!=null&&A.error&&S(A.error.message)}catch(C){S(C.message||"Unable to set password")}finally{N(!1)}},_=async k=>{k.preventDefault(),S(""),N(!0);try{const{error:C}=await e(s,h);C&&S(C.message)}finally{N(!1)}};return a.jsxs("div",{className:"w-full",children:[t==="identify"&&a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(ka,{className:"w-8 h-8 inline text-blue-600"}),a.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Doctor Access"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your Doctor ID or Email"})]}),a.jsx("input",{type:"text",value:r,onChange:k=>i(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"DR-000123 or you@example.com"}),w&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),a.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[v?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Pa,{className:"w-5 h-5"}),"Continue"]})]}),t==="password"&&a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:s,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsx("input",{type:"password",value:h,onChange:k=>f(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),w&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),a.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[v?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Pa,{className:"w-5 h-5"}),"Sign In"]})]}),t==="set-password"&&a.jsxs("form",{onSubmit:j,className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Es,{className:"w-8 h-8 inline text-blue-600"}),a.jsx("h2",{className:"text-xl font-semibold mt-2",children:"Create Your Password"}),a.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",s]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsx("input",{type:"password",value:h,onChange:k=>f(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),a.jsx("input",{type:"password",value:m,onChange:k=>g(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),w&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:w}),a.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[v?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Es,{className:"w-5 h-5"}),"Save & Sign In"]})]})]})},g3=()=>{const[e,t]=x.useState("patient"),[n,r]=x.useState(!0),[i,s]=x.useState(""),[l,u]=x.useState(""),[d,h]=x.useState(""),[f,m]=x.useState("patient"),[g,v]=x.useState(!1),[N,w]=x.useState(""),{signIn:S,signUp:b}=Pe(),j=async _=>{_.preventDefault(),w(""),v(!0);try{if(n){const{error:k}=await S(i,l);k&&w(k.message)}else{const{error:k}=await b(i,l,d,f);k&&w(k.message)}}catch{w("An unexpected error occurred")}finally{v(!1)}};return e==="patient"?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"flex justify-center mb-3",children:a.jsx("img",{src:"/logo.png",alt:"Health Bride",className:"h-12"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Health Bride Patient Portal"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Access with your MRN or email"})]}),a.jsx(h3,{}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-4",children:[a.jsx("button",{onClick:()=>t("staff"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Staff login"}),a.jsx("span",{className:"text-gray-300",children:"|"}),a.jsx("button",{onClick:()=>t("volunteer"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Volunteer login"})]})})]})}):e==="volunteer"?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"flex justify-center mb-3",children:a.jsx("img",{src:"/logo.png",alt:"Health Bride",className:"h-12"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Health Bride Volunteer Portal"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Access with Volunteer ID or email"})]}),a.jsx(m3,{}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-4",children:[a.jsx("button",{onClick:()=>t("staff"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Staff login"}),a.jsx("span",{className:"text-gray-300",children:"|"}),a.jsx("button",{onClick:()=>t("patient"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Patient login"})]})})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("img",{src:"/logo.png",alt:"Health Bride",className:"h-12"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Health Bride Portal"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),a.jsx("div",{className:"mb-6",children:a.jsx(p3,{})}),a.jsxs("form",{onSubmit:j,className:"space-y-6 hidden",children:[!n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",required:!0,value:d,onChange:_=>h(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),a.jsxs("select",{value:f,onChange:_=>m(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"patient",children:"Patient"}),a.jsx("option",{value:"doctor",children:"Doctor"}),a.jsx("option",{value:"volunteer",children:"Volunteer"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",required:!0,value:i,onChange:_=>s(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your email"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsx("input",{type:"password",required:!0,value:l,onChange:_=>u(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your password"})]}),N&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:N}),a.jsx("button",{type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[n?a.jsx(Pa,{className:"w-5 h-5"}):a.jsx(EM,{className:"w-5 h-5"}),a.jsx("span",{children:n?"Sign In":"Sign Up"})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-4",children:[a.jsx("button",{onClick:()=>t("patient"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Patient login"}),a.jsx("span",{className:"text-gray-300",children:"|"}),a.jsx("button",{onClick:()=>t("volunteer"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Volunteer login"})]})})]})})},v3=({onMenuClick:e,onViewChange:t})=>{var d,h;const{user:n,signOut:r}=Pe(),[i,s]=x.useState(void 0);x.useEffect(()=>{let f=!0;return(async()=>{if(n){if(n.photo_url){s(n.photo_url);return}if(n.role==="patient"){const{data:g}=await Lr(n.id);f&&s(g==null?void 0:g.photo_url)}}})(),()=>{f=!1}},[n]);const l=async()=>{await r()},u=f=>{switch(f){case"doctor":return"bg-green-100 text-green-800";case"volunteer":return"bg-purple-100 text-purple-800";case"patient":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return a.jsx("nav",{className:"bg-white shadow-md border-b border-gray-200 sticky top-0 z-20",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100",onClick:e,"aria-label":"Open menu",children:a.jsx(BN,{className:"w-5 h-5"})})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("user-profile"),className:"w-9 h-9 rounded-full overflow-hidden border border-gray-200 bg-gray-50 flex items-center justify-center hover:ring-2 hover:ring-blue-500",title:"My Profile",children:i?a.jsx("img",{src:i,className:"w-full h-full object-cover"}):a.jsx(Me,{className:"w-5 h-5 text-gray-500"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:n==null?void 0:n.full_name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u((n==null?void 0:n.role)||"")}`,children:((d=n==null?void 0:n.role)==null?void 0:d.charAt(0).toUpperCase())+((h=n==null?void 0:n.role)==null?void 0:h.slice(1))})]}),a.jsx("button",{onClick:l,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",title:"Sign Out",children:a.jsx(SM,{className:"w-5 h-5"})})]})]})})})},y3=({currentView:e,onViewChange:t,mobileOpen:n,setMobileOpen:r})=>{const{user:i}=Pe(),[s,l]=x.useState(!1);x.useEffect(()=>{const m=localStorage.getItem("sidebar-collapsed");m&&l(m==="1")},[]);const u=()=>{const m=!s;l(m),localStorage.setItem("sidebar-collapsed",m?"1":"0")},d=()=>{const m=[{key:"dashboard",label:"Dashboard",icon:Me},{key:"messages",label:"Messages",icon:zl},{key:"tasks",label:"My Tasks",icon:hu},{key:"records",label:"Medical Records",icon:ga},{key:"map",label:"Map",icon:_v}];if((i==null?void 0:i.role)==="doctor"||(i==null?void 0:i.role)==="volunteer"){if(m.splice(1,0,{key:"patients",label:"Patients",icon:cs}),(i==null?void 0:i.role)==="doctor"&&(m.splice(2,0,{key:"volunteers",label:"Volunteers",icon:hu}),m.splice(3,0,{key:"doctors",label:"Doctors",icon:gn}),m.splice(5,0,{key:"med-requests",label:"Medication Requests",icon:gn})),(i==null?void 0:i.role)==="volunteer"){const g=m.findIndex(v=>v.key==="tasks");m.splice(g+1,0,{key:"appointments",label:"Appointments",icon:Cs}),m.splice(2,0,{key:"doctors",label:"Doctors",icon:gn}),m.splice(6,0,{key:"med-requests",label:"Medication Requests",icon:gn})}}else if((i==null?void 0:i.role)==="patient"){m.splice(1,0,{key:"profile",label:"My Profile",icon:cs}),m.splice(2,0,{key:"doctors",label:"Doctors",icon:gn}),m.splice(3,0,{key:"medication",label:"Medication Request",icon:qs}),m.splice(4,0,{key:"medications",label:"My Medications",icon:gn}),m.splice(4,0,{key:"mental",label:"Mental Assessment",icon:ga});const g=m.findIndex(v=>v.key==="tasks");g!==-1&&(m[g]={key:"appointments",label:"Appointments",icon:Cs})}return(i==null?void 0:i.role)==="doctor"&&(m.splice(3,0,{key:"volunteer-tasks",label:"Volunteer Tasks",icon:hu}),m.splice(4,0,{key:"mental-assessments",label:"Mental Assessments",icon:ga})),m},h=()=>a.jsx("ul",{className:"mt-4 space-y-1",children:d().map(m=>{const g=m.icon,v=e===m.key;return a.jsx("li",{children:a.jsxs("button",{onClick:()=>{t(m.key),r&&r(!1)},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${v?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[a.jsx(g,{className:"w-5 h-5 shrink-0"}),!s&&a.jsx("span",{className:"text-sm font-medium truncate",children:m.label})]})},m.key)})}),f=a.jsxs("div",{className:`h-full flex flex-col ${s?"items-center":""}`,children:[a.jsx("div",{className:`flex items-center ${s?"justify-center":"justify-start"} h-16 px-3 border-b border-gray-200`,children:s?a.jsx("img",{src:"/logo.png",alt:"logo",className:"h-8 object-contain"}):a.jsx("img",{src:"/logo.png",alt:"logo",className:"h-9 object-contain"})}),a.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:a.jsx(h,{})}),a.jsx("div",{className:"p-2 border-t border-gray-200",children:a.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg px-3 py-2",children:[s?a.jsx(BN,{className:"w-4 h-4"}):a.jsx(wM,{className:"w-4 h-4"}),!s&&a.jsx("span",{className:"text-sm",children:"Collapse"})]})})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:`hidden md:flex md:flex-col bg-white border-r border-gray-200 h-screen sticky top-0 z-30 transition-[width] duration-200 ${s?"w-20":"w-64"}`,children:f}),a.jsxs("div",{className:`md:hidden ${n?"fixed inset-0 z-40":"hidden"}`,children:[a.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>r&&r(!1)}),a.jsxs("aside",{className:"absolute left-0 top-0 h-full w-72 bg-white border-r border-gray-200 shadow-xl",children:[a.jsxs("div",{className:"h-16 flex items-center justify-between px-3 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:a.jsx(gn,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-lg font-bold text-gray-900",children:"HealthBridge"})]}),a.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100",onClick:()=>r&&r(!1),children:a.jsx(As,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"h-[calc(100%-4rem)] overflow-y-auto px-2",children:a.jsx(h,{})})]})]})]})},x3=({announcement:e,onClose:t,onSuccess:n})=>{const{user:r}=Pe(),[i,s]=x.useState(!1),[l,u]=x.useState({title:(e==null?void 0:e.title)||"",content:(e==null?void 0:e.content)||"",priority:(e==null?void 0:e.priority)||"medium"}),d=async f=>{f.preventDefault(),s(!0);try{if(e){const{error:m}=await GM(e.id,l);if(m){console.error("Error updating announcement:",m);return}}else{const{error:m}=await qM({...l,created_by:(r==null?void 0:r.id)||""});if(m){console.error("Error creating announcement:",m);return}}n(),t()}catch(m){console.error("Error saving announcement:",m)}finally{s(!1)}},h=f=>{const{name:m,value:g}=f.target;u({...l,[m]:g})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"border-b border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(mu,{className:"w-6 h-6 text-blue-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Edit Announcement":"Create New Announcement"})]}),a.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:a.jsx(As,{className:"w-5 h-5"})})]})}),a.jsxs("form",{onSubmit:d,className:"p-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),a.jsx("input",{type:"text",name:"title",required:!0,value:l.title,onChange:h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter announcement title..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),a.jsxs("select",{name:"priority",required:!0,value:l.priority,onChange:h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"urgent",children:"Urgent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),a.jsx("textarea",{name:"content",required:!0,rows:6,value:l.content,onChange:h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter announcement content..."})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(La,{className:"w-5 h-5"}),a.jsxs("span",{children:[e?"Update":"Create"," Announcement"]})]})})]})]})]})})};function qN(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=qN(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function $e(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=qN(e))&&(r&&(r+=" "),r+=t);return r}var Jd={},GN={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(GN);var wv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(wv);var jv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(jv);var ef={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",d=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const h=n[s];u?h==="\\"&&s+1<i?(s++,l+=n[s]):h===u?u="":l+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,r.push(l),l=""):l+=h:h==="["?(d=!0,l&&(r.push(l),l="")):h==="."?l&&(r.push(l),l=""):l+=h,s++}return l&&r.push(l),r}e.toPath=t})(ef);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GN,n=wv,r=jv,i=ef;function s(u,d,h){if(u==null)return h;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return h;const f=u[d];return f===void 0?n.isDeepKey(d)?s(u,i.toPath(d),h):h:f}case"number":case"symbol":{typeof d=="number"&&(d=r.toKey(d));const f=u[d];return f===void 0?h:f}default:{if(Array.isArray(d))return l(u,d,h);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return h;const f=u[d];return f===void 0?h:f}}}function l(u,d,h){if(d.length===0)return h;let f=u;for(let m=0;m<d.length;m++){if(f==null||t.isUnsafeProperty(d[m]))return h;f=f[d[m]]}return f===void 0?h:f}e.get=s})(Jd);var b3=Jd.get;const Ts=Mr(b3);var YN={exports:{}},De={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv=Symbol.for("react.transitional.element"),Sv=Symbol.for("react.portal"),tf=Symbol.for("react.fragment"),nf=Symbol.for("react.strict_mode"),rf=Symbol.for("react.profiler"),af=Symbol.for("react.consumer"),sf=Symbol.for("react.context"),of=Symbol.for("react.forward_ref"),lf=Symbol.for("react.suspense"),cf=Symbol.for("react.suspense_list"),uf=Symbol.for("react.memo"),df=Symbol.for("react.lazy"),_3=Symbol.for("react.view_transition"),w3=Symbol.for("react.client.reference");function Qn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Nv:switch(e=e.type,e){case tf:case rf:case nf:case lf:case cf:case _3:return e;default:switch(e=e&&e.$$typeof,e){case sf:case of:case df:case uf:return e;case af:return e;default:return t}}case Sv:return t}}}De.ContextConsumer=af;De.ContextProvider=sf;De.Element=Nv;De.ForwardRef=of;De.Fragment=tf;De.Lazy=df;De.Memo=uf;De.Portal=Sv;De.Profiler=rf;De.StrictMode=nf;De.Suspense=lf;De.SuspenseList=cf;De.isContextConsumer=function(e){return Qn(e)===af};De.isContextProvider=function(e){return Qn(e)===sf};De.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nv};De.isForwardRef=function(e){return Qn(e)===of};De.isFragment=function(e){return Qn(e)===tf};De.isLazy=function(e){return Qn(e)===df};De.isMemo=function(e){return Qn(e)===uf};De.isPortal=function(e){return Qn(e)===Sv};De.isProfiler=function(e){return Qn(e)===rf};De.isStrictMode=function(e){return Qn(e)===nf};De.isSuspense=function(e){return Qn(e)===lf};De.isSuspenseList=function(e){return Qn(e)===cf};De.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===tf||e===rf||e===nf||e===lf||e===cf||typeof e=="object"&&e!==null&&(e.$$typeof===df||e.$$typeof===uf||e.$$typeof===sf||e.$$typeof===af||e.$$typeof===of||e.$$typeof===w3||e.getModuleId!==void 0)};De.typeOf=Qn;YN.exports=De;var j3=YN.exports,sn=e=>e===0?0:e>0?1:-1,Nn=e=>typeof e=="number"&&e!=+e,ca=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,de=e=>(typeof e=="number"||e instanceof Number)&&!Nn(e),Ar=e=>de(e)||typeof e=="string",N3=0,bl=e=>{var t=++N3;return"".concat(e||"").concat(t)},vr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!de(t)&&typeof t!="string")return r;var s;if(ca(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return Nn(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},XN=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Wt(e,t,n){return de(e)&&de(t)?e+n*(t-e):t}function S3(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Ts(r,t))===n)}var vt=e=>e===null||typeof e>"u",Bl=e=>vt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),P3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Pv(e){if(typeof e!="string")return!1;var t=P3;return t.includes(e)}var k3=["viewBox","children"],Ib=["points","pathLength"],im={svg:k3,polygon:Ib,polyline:Ib},C3=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(x.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Pv(i)&&(r[i]=s=>n[i](n,s))}),r},E3=(e,t,n)=>r=>(e(t,n,r),null),ff=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];Pv(i)&&typeof s=="function"&&(r||(r={}),r[i]=E3(s,t,n))}),r},O3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function QN(e){if(typeof e!="string")return!1;var t=O3;return t.includes(e)}function Gs(e){var t=Object.entries(e).filter(n=>{var[r]=n;return QN(r)});return Object.fromEntries(t)}var Rb=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",zb=null,am=null,JN=e=>{if(e===zb&&Array.isArray(am))return am;var t=[];return x.Children.forEach(e,n=>{vt(n)||(j3.isFragment(n)?t=t.concat(JN(n.props.children)):t.push(n))}),am=t,zb=e,t};function A3(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>Rb(i)):r=[Rb(t)],JN(e).forEach(i=>{var s=Ts(i,"type.displayName")||Ts(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var T3=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&(im==null?void 0:im[r]))!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||QN(t)),d=!!n&&Pv(t);return l||u||d},At=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(x.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;T3((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},M3=["children","width","height","viewBox","className","style","title","desc"];function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tp.apply(null,arguments)}function L3(e,t){if(e==null)return{};var n,r,i=D3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function D3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var kv=x.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:d,desc:h}=e,f=L3(e,M3),m=s||{width:r,height:i,x:0,y:0},g=$e("recharts-surface",l);return x.createElement("svg",Tp({},At(f,!0,"svg"),{className:g,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),x.createElement("title",null,d),x.createElement("desc",null,h),n)}),I3=["children","className"];function Mp(){return Mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mp.apply(null,arguments)}function R3(e,t){if(e==null)return{};var n,r,i=z3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function z3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Ri=x.forwardRef((e,t)=>{var{children:n,className:r}=e,i=R3(e,I3),s=$e("recharts-layer",r);return x.createElement("g",Mp({className:s},At(i,!0),{ref:t}),n)}),e2=x.createContext(null),$3=()=>x.useContext(e2);function Re(e){return function(){return e}}const t2=Math.cos,Gu=Math.sin,yr=Math.sqrt,Yu=Math.PI,hf=2*Yu,Lp=Math.PI,Dp=2*Lp,ta=1e-6,B3=Dp-ta;function n2(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function F3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return n2;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class U3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?n2:F3(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,d=r-t,h=i-n,f=l-t,m=u-n,g=f*f+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>ta)if(!(Math.abs(m*d-h*f)>ta)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let v=r-l,N=i-u,w=d*d+h*h,S=v*v+N*N,b=Math.sqrt(w),j=Math.sqrt(g),_=s*Math.tan((Lp-Math.acos((w+g-S)/(2*b*j)))/2),k=_/j,C=_/b;Math.abs(k-1)>ta&&this._append`L${t+k*f},${n+k*m}`,this._append`A${s},${s},0,0,${+(m*v>f*N)},${this._x1=t+C*d},${this._y1=n+C*h}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),d=r*Math.sin(i),h=t+u,f=n+d,m=1^l,g=l?i-s:s-i;this._x1===null?this._append`M${h},${f}`:(Math.abs(this._x1-h)>ta||Math.abs(this._y1-f)>ta)&&this._append`L${h},${f}`,r&&(g<0&&(g=g%Dp+Dp),g>B3?this._append`A${r},${r},0,1,${m},${t-u},${n-d}A${r},${r},0,1,${m},${this._x1=h},${this._y1=f}`:g>ta&&this._append`A${r},${r},0,${+(g>=Lp)},${m},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Cv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new U3(t)}function Ev(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function r2(e){this._context=e}r2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function mf(e){return new r2(e)}function i2(e){return e[0]}function a2(e){return e[1]}function s2(e,t){var n=Re(!0),r=null,i=mf,s=null,l=Cv(u);e=typeof e=="function"?e:e===void 0?i2:Re(e),t=typeof t=="function"?t:t===void 0?a2:Re(t);function u(d){var h,f=(d=Ev(d)).length,m,g=!1,v;for(r==null&&(s=i(v=l())),h=0;h<=f;++h)!(h<f&&n(m=d[h],h,d))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+e(m,h,d),+t(m,h,d));if(v)return s=null,v+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Re(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Re(+d),u):t},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:Re(!!d),u):n},u.curve=function(d){return arguments.length?(i=d,r!=null&&(s=i(r)),u):i},u.context=function(d){return arguments.length?(d==null?r=s=null:s=i(r=d),u):r},u}function $c(e,t,n){var r=null,i=Re(!0),s=null,l=mf,u=null,d=Cv(h);e=typeof e=="function"?e:e===void 0?i2:Re(+e),t=typeof t=="function"?t:Re(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?a2:Re(+n);function h(m){var g,v,N,w=(m=Ev(m)).length,S,b=!1,j,_=new Array(w),k=new Array(w);for(s==null&&(u=l(j=d())),g=0;g<=w;++g){if(!(g<w&&i(S=m[g],g,m))===b)if(b=!b)v=g,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),N=g-1;N>=v;--N)u.point(_[N],k[N]);u.lineEnd(),u.areaEnd()}b&&(_[g]=+e(S,g,m),k[g]=+t(S,g,m),u.point(r?+r(S,g,m):_[g],n?+n(S,g,m):k[g]))}if(j)return u=null,j+""||null}function f(){return s2().defined(i).curve(l).context(s)}return h.x=function(m){return arguments.length?(e=typeof m=="function"?m:Re(+m),r=null,h):e},h.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Re(+m),h):e},h.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Re(+m),h):r},h.y=function(m){return arguments.length?(t=typeof m=="function"?m:Re(+m),n=null,h):t},h.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Re(+m),h):t},h.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Re(+m),h):n},h.lineX0=h.lineY0=function(){return f().x(e).y(t)},h.lineY1=function(){return f().x(e).y(n)},h.lineX1=function(){return f().x(r).y(t)},h.defined=function(m){return arguments.length?(i=typeof m=="function"?m:Re(!!m),h):i},h.curve=function(m){return arguments.length?(l=m,s!=null&&(u=l(s)),h):l},h.context=function(m){return arguments.length?(m==null?s=u=null:u=l(s=m),h):s},h}class o2{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function H3(e){return new o2(e,!0)}function Z3(e){return new o2(e,!1)}const Ov={draw(e,t){const n=yr(t/Yu);e.moveTo(n,0),e.arc(0,0,n,0,hf)}},W3={draw(e,t){const n=yr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},l2=yr(1/3),V3=l2*2,K3={draw(e,t){const n=yr(t/V3),r=n*l2;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},q3={draw(e,t){const n=yr(t),r=-n/2;e.rect(r,r,n,n)}},G3=.8908130915292852,c2=Gu(Yu/10)/Gu(7*Yu/10),Y3=Gu(hf/10)*c2,X3=-t2(hf/10)*c2,Q3={draw(e,t){const n=yr(t*G3),r=Y3*n,i=X3*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=hf*s/5,u=t2(l),d=Gu(l);e.lineTo(d*n,-u*n),e.lineTo(u*r-d*i,d*r+u*i)}e.closePath()}},sm=yr(3),J3={draw(e,t){const n=-yr(t/(sm*3));e.moveTo(0,n*2),e.lineTo(-sm*n,-n),e.lineTo(sm*n,-n),e.closePath()}},Ln=-.5,Dn=yr(3)/2,Ip=1/yr(12),e4=(Ip/2+1)*3,t4={draw(e,t){const n=yr(t/e4),r=n/2,i=n*Ip,s=r,l=n*Ip+n,u=-s,d=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,d),e.lineTo(Ln*r-Dn*i,Dn*r+Ln*i),e.lineTo(Ln*s-Dn*l,Dn*s+Ln*l),e.lineTo(Ln*u-Dn*d,Dn*u+Ln*d),e.lineTo(Ln*r+Dn*i,Ln*i-Dn*r),e.lineTo(Ln*s+Dn*l,Ln*l-Dn*s),e.lineTo(Ln*u+Dn*d,Ln*d-Dn*u),e.closePath()}};function n4(e,t){let n=null,r=Cv(i);e=typeof e=="function"?e:Re(e||Ov),t=typeof t=="function"?t:Re(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Re(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Re(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Xu(){}function Qu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function u2(e){this._context=e}u2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Qu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Qu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function r4(e){return new u2(e)}function d2(e){this._context=e}d2.prototype={areaStart:Xu,areaEnd:Xu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Qu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function i4(e){return new d2(e)}function f2(e){this._context=e}f2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Qu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function a4(e){return new f2(e)}function h2(e){this._context=e}h2.prototype={areaStart:Xu,areaEnd:Xu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function s4(e){return new h2(e)}function $b(e){return e<0?-1:1}function Bb(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return($b(s)+$b(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function Fb(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function om(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function Ju(e){this._context=e}Ju.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:om(this,this._t0,Fb(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,om(this,Fb(this,n=Bb(this,e,t)),n);break;default:om(this,this._t0,n=Bb(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function m2(e){this._context=new p2(e)}(m2.prototype=Object.create(Ju.prototype)).point=function(e,t){Ju.prototype.point.call(this,t,e)};function p2(e){this._context=e}p2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function o4(e){return new Ju(e)}function l4(e){return new m2(e)}function g2(e){this._context=e}g2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ub(e),i=Ub(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ub(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function c4(e){return new g2(e)}function pf(e,t){this._context=e,this._t=t}pf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function u4(e){return new pf(e,.5)}function d4(e){return new pf(e,0)}function f4(e){return new pf(e,1)}function Ms(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Rp(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function h4(e,t){return e[t]}function m4(e){const t=[];return t.key=e,t}function p4(){var e=Re([]),t=Rp,n=Ms,r=h4;function i(s){var l=Array.from(e.apply(this,arguments),m4),u,d=l.length,h=-1,f;for(const m of s)for(u=0,++h;u<d;++u)(l[u][h]=[0,+r(m,l[u].key,h,s)]).data=m;for(u=0,f=Ev(t(l));u<d;++u)l[f[u]].index=u;return n(l,f),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Re(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Re(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Rp:typeof s=="function"?s:Re(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Ms,i):n},i}function g4(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}Ms(e,t)}}function v4(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}Ms(e,t)}}function y4(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,d=0,h=0;u<l;++u){for(var f=e[t[u]],m=f[r][1]||0,g=f[r-1][1]||0,v=(m-g)/2,N=0;N<u;++N){var w=e[t[N]],S=w[r][1]||0,b=w[r-1][1]||0;v+=S-b}d+=m,h+=v*m}i[r-1][1]+=i[r-1][0]=n,d&&(n-=h/d)}i[r-1][1]+=i[r-1][0]=n,Ms(e,t)}}var x4=["type","size","sizeType"];function zp(){return zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zp.apply(null,arguments)}function Hb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hb(Object(n),!0).forEach(function(r){b4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function b4(e,t,n){return(t=_4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _4(e){var t=w4(e,"string");return typeof t=="symbol"?t:t+""}function w4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j4(e,t){if(e==null)return{};var n,r,i=N4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function N4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var v2={symbolCircle:Ov,symbolCross:W3,symbolDiamond:K3,symbolSquare:q3,symbolStar:Q3,symbolTriangle:J3,symbolWye:t4},S4=Math.PI/180,P4=e=>{var t="symbol".concat(Bl(e));return v2[t]||Ov},k4=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*S4;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},C4=(e,t)=>{v2["symbol".concat(Bl(e))]=t},Av=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=j4(e,x4),s=Zb(Zb({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var g=P4(l),v=n4().type(g).size(k4(n,r,l));return v()},{className:d,cx:h,cy:f}=s,m=At(s,!0);return h===+h&&f===+f&&n===+n?x.createElement("path",zp({},m,{className:$e("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(f,")"),d:u()})):null};Av.registerSymbol=C4;function $p(){return $p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$p.apply(null,arguments)}function Wb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function E4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wb(Object(n),!0).forEach(function(r){Tv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tv(e,t,n){return(t=O4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O4(e){var t=A4(e,"string");return typeof t=="symbol"?t:t+""}function A4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var In=32;class Mv extends x.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=In/2,s=In/6,l=In/3,u=t.inactive?r:t.color,d=n??t.type;if(d==="none")return null;if(d==="plainline")return x.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:In,y2:i,className:"recharts-legend-icon"});if(d==="line")return x.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(In,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(d==="rect")return x.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(In/8,"h").concat(In,"v").concat(In*3/4,"h").concat(-In,"z"),className:"recharts-legend-icon"});if(x.isValidElement(t.legendIcon)){var h=E4({},t);return delete h.legendIcon,x.cloneElement(t.legendIcon,h)}return x.createElement(Av,{fill:u,cx:i,cy:i,size:In,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:In,height:In},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((f,m)=>{var g=f.formatter||i,v=$e({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:f.inactive});if(f.type==="none")return null;var N=f.inactive?s:f.color,w=g?g(f.value,f,m):f.value;return x.createElement("li",$p({className:v,style:d,key:"legend-item-".concat(m)},ff(this.props,f,m)),x.createElement(kv,{width:n,height:n,viewBox:u,style:h,"aria-label":"".concat(w," legend icon")},this.renderIcon(f,l)),x.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},w))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return x.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Tv(Mv,"displayName","Legend");Tv(Mv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var y2={},x2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(x2);var Lv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Lv);var b2={},gf={},_2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(_2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_2;function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(gf);var w2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(w2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gf,n=w2;function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(b2);var j2={},N2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jd;function n(r){return function(i){return t.get(i,r)}}e.property=n})(N2);var S2={},lm={},cm={},Dv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Dv);var Iv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Iv);var Rv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Rv);var Vb;function T4(){return Vb||(Vb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zv(),n=Dv,r=Iv,i=Rv;function s(m,g,v){return typeof v!="function"?t.isMatch(m,g):l(m,g,function N(w,S,b,j,_,k){const C=v(w,S,b,j,_,k);return C!==void 0?!!C:l(w,S,N,k)},new Map)}function l(m,g,v,N){if(g===m)return!0;switch(typeof g){case"object":return u(m,g,v,N);case"function":return Object.keys(g).length>0?l(m,{...g},v,N):i.eq(m,g);default:return n.isObject(m)?typeof g=="string"?g==="":!0:i.eq(m,g)}}function u(m,g,v,N){if(g==null)return!0;if(Array.isArray(g))return h(m,g,v,N);if(g instanceof Map)return d(m,g,v,N);if(g instanceof Set)return f(m,g,v,N);const w=Object.keys(g);if(m==null)return w.length===0;if(w.length===0)return!0;if(N&&N.has(g))return N.get(g)===m;N&&N.set(g,m);try{for(let S=0;S<w.length;S++){const b=w[S];if(!r.isPrimitive(m)&&!(b in m)||g[b]===void 0&&m[b]!==void 0||g[b]===null&&m[b]!==null||!v(m[b],g[b],b,m,g,N))return!1}return!0}finally{N&&N.delete(g)}}function d(m,g,v,N){if(g.size===0)return!0;if(!(m instanceof Map))return!1;for(const[w,S]of g.entries()){const b=m.get(w);if(v(b,S,w,m,g,N)===!1)return!1}return!0}function h(m,g,v,N){if(g.length===0)return!0;if(!Array.isArray(m))return!1;const w=new Set;for(let S=0;S<g.length;S++){const b=g[S];let j=!1;for(let _=0;_<m.length;_++){if(w.has(_))continue;const k=m[_];let C=!1;if(v(k,b,S,m,g,N)&&(C=!0),C){w.add(_),j=!0;break}}if(!j)return!1}return!0}function f(m,g,v,N){return g.size===0?!0:m instanceof Set?h([...m],[...g],v,N):!1}e.isMatchWith=s,e.isSetMatch=f}(cm)),cm}var Kb;function zv(){return Kb||(Kb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T4();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n}(lm)),lm}var P2={},$v={},k2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(k2);var Bv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Bv);var Fv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",h="[object Set]",f="[object Array]",m="[object Function]",g="[object ArrayBuffer]",v="[object Object]",N="[object Error]",w="[object DataView]",S="[object Uint8Array]",b="[object Uint8ClampedArray]",j="[object Uint16Array]",_="[object Uint32Array]",k="[object BigUint64Array]",C="[object Int8Array]",A="[object Int16Array]",T="[object Int32Array]",R="[object BigInt64Array]",B="[object Float32Array]",I="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=g,e.arrayTag=f,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=w,e.dateTag=u,e.errorTag=N,e.float32ArrayTag=B,e.float64ArrayTag=I,e.functionTag=m,e.int16ArrayTag=A,e.int32ArrayTag=T,e.int8ArrayTag=C,e.mapTag=d,e.numberTag=r,e.objectTag=v,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=j,e.uint32ArrayTag=_,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=b})(Fv);var C2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(C2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k2,n=Bv,r=Fv,i=Iv,s=C2;function l(f,m){return u(f,void 0,f,new Map,m)}function u(f,m,g,v=new Map,N=void 0){const w=N==null?void 0:N(f,m,g,v);if(w!==void 0)return w;if(i.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const S=new Array(f.length);v.set(f,S);for(let b=0;b<f.length;b++)S[b]=u(f[b],b,g,v,N);return Object.hasOwn(f,"index")&&(S.index=f.index),Object.hasOwn(f,"input")&&(S.input=f.input),S}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const S=new RegExp(f.source,f.flags);return S.lastIndex=f.lastIndex,S}if(f instanceof Map){const S=new Map;v.set(f,S);for(const[b,j]of f)S.set(b,u(j,b,g,v,N));return S}if(f instanceof Set){const S=new Set;v.set(f,S);for(const b of f)S.add(u(b,void 0,g,v,N));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(s.isTypedArray(f)){const S=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,S);for(let b=0;b<f.length;b++)S[b]=u(f[b],b,g,v,N);return S}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const S=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,S),d(S,f,g,v,N),S}if(typeof File<"u"&&f instanceof File){const S=new File([f],f.name,{type:f.type});return v.set(f,S),d(S,f,g,v,N),S}if(f instanceof Blob){const S=new Blob([f],{type:f.type});return v.set(f,S),d(S,f,g,v,N),S}if(f instanceof Error){const S=new f.constructor;return v.set(f,S),S.message=f.message,S.name=f.name,S.stack=f.stack,S.cause=f.cause,d(S,f,g,v,N),S}if(typeof f=="object"&&h(f)){const S=Object.create(Object.getPrototypeOf(f));return v.set(f,S),d(S,f,g,v,N),S}return f}function d(f,m,g=f,v,N){const w=[...Object.keys(m),...t.getSymbols(m)];for(let S=0;S<w.length;S++){const b=w[S],j=Object.getOwnPropertyDescriptor(f,b);(j==null||j.writable)&&(f[b]=u(m[b],b,g,v,N))}}function h(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})($v);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$v;function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(P2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zv(),n=P2;function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(S2);var E2={},O2={},A2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$v,n=Fv;function r(i,s){return t.cloneDeepWith(i,(l,u,d,h)=>{const f=s==null?void 0:s(l,u,d,h);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(A2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A2;function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(O2);var T2={},Uv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Uv);var M2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bv;function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(M2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wv,n=Uv,r=M2,i=ef;function s(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=i.toPath(u):d=[u],d.length===0)return!1;let h=l;for(let f=0;f<d.length;f++){const m=d[f];if((h==null||!Object.hasOwn(h,m))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(m)&&m<h.length))return!1;h=h[m]}return!0}e.has=s})(T2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zv(),n=jv,r=O2,i=Jd,s=T2;function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return d=r.cloneDeep(d),function(h){const f=i.get(h,u);return f===void 0?s.has(h,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(E2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lv,n=N2,r=S2,i=E2;function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(j2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x2,n=Lv,r=b2,i=j2;function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(y2);var M4=y2.uniqBy;const qb=Mr(M4);function L2(e,t,n){return t===!0?qb(e,n):typeof t=="function"?qb(e,t):e}var D2={exports:{}},I2={},R2={exports:{}},z2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ls=x;function L4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var D4=typeof Object.is=="function"?Object.is:L4,I4=Ls.useState,R4=Ls.useEffect,z4=Ls.useLayoutEffect,$4=Ls.useDebugValue;function B4(e,t){var n=t(),r=I4({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return z4(function(){i.value=n,i.getSnapshot=t,um(i)&&s({inst:i})},[e,n,t]),R4(function(){return um(i)&&s({inst:i}),e(function(){um(i)&&s({inst:i})})},[e]),$4(n),n}function um(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!D4(e,n)}catch{return!0}}function F4(e,t){return t()}var U4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?F4:B4;z2.useSyncExternalStore=Ls.useSyncExternalStore!==void 0?Ls.useSyncExternalStore:U4;R2.exports=z2;var H4=R2.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=x,Z4=H4;function W4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var V4=typeof Object.is=="function"?Object.is:W4,K4=Z4.useSyncExternalStore,q4=vf.useRef,G4=vf.useEffect,Y4=vf.useMemo,X4=vf.useDebugValue;I2.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=q4(null);if(s.current===null){var l={hasValue:!1,value:null};s.current=l}else l=s.current;s=Y4(function(){function d(v){if(!h){if(h=!0,f=v,v=r(v),i!==void 0&&l.hasValue){var N=l.value;if(i(N,v))return m=N}return m=v}if(N=m,V4(f,v))return N;var w=r(v);return i!==void 0&&i(N,w)?(f=v,N):(f=v,m=w)}var h=!1,f,m,g=n===void 0?null:n;return[function(){return d(t())},g===null?void 0:function(){return d(g())}]},[t,n,r,i]);var u=K4(e,s[0],s[1]);return G4(function(){l.hasValue=!0,l.value=u},[u]),X4(u),u};D2.exports=I2;var Q4=D2.exports,Hv=x.createContext(null),J4=e=>e,st=()=>{var e=x.useContext(Hv);return e?e.store.dispatch:J4},gu=()=>{},eL=()=>gu,tL=(e,t)=>e===t;function ue(e){var t=x.useContext(Hv);return Q4.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:eL,t?t.store.getState:gu,t?t.store.getState:gu,t?e:gu,tL)}function nL(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function rL(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function iL(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Gb=e=>Array.isArray(e)?e:[e];function aL(e){const t=Array.isArray(e[0])?e[0]:e;return iL(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function sL(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var oL=class{constructor(e){this.value=e}deref(){return this.value}},lL=typeof WeakRef<"u"?WeakRef:oL,cL=0,Yb=1;function Bc(){return{s:cL,v:void 0,o:null,p:null}}function $2(e,t={}){let n=Bc();const{resultEqualityCheck:r}=t;let i,s=0;function l(){var m;let u=n;const{length:d}=arguments;for(let g=0,v=d;g<v;g++){const N=arguments[g];if(typeof N=="function"||typeof N=="object"&&N!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const S=w.get(N);S===void 0?(u=Bc(),w.set(N,u)):u=S}else{let w=u.p;w===null&&(u.p=w=new Map);const S=w.get(N);S===void 0?(u=Bc(),w.set(N,u)):u=S}}const h=u;let f;if(u.s===Yb)f=u.v;else if(f=e.apply(null,arguments),s++,r){const g=((m=i==null?void 0:i.deref)==null?void 0:m.call(i))??i;g!=null&&r(g,f)&&(f=g,s!==0&&s--),i=typeof f=="object"&&f!==null||typeof f=="function"?new lL(f):f}return h.s=Yb,h.v=f,f}return l.clearCache=()=>{n=Bc(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function uL(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,d={},h=i.pop();typeof h=="object"&&(d=h,h=i.pop()),nL(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const f={...n,...d},{memoize:m,memoizeOptions:g=[],argsMemoize:v=$2,argsMemoizeOptions:N=[],devModeChecks:w={}}=f,S=Gb(g),b=Gb(N),j=aL(i),_=m(function(){return s++,h.apply(null,arguments)},...S),k=v(function(){l++;const A=sL(j,arguments);return u=_.apply(null,A),u},...b);return Object.assign(k,{resultFunc:h,memoizedResultFunc:_,dependencies:j,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var X=uL($2),dL=Object.assign((e,t=X)=>{rL(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,d)=>(l[n[d]]=u,l),{}))},{withTypes:()=>dL}),B2={},F2={},U2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(U2);var H2={},Zv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Zv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zv,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(H2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U2,n=H2,r=ef;function i(s,l,u,d){if(s==null)return[];u=d?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(v=>String(v));const h=(v,N)=>{let w=v;for(let S=0;S<N.length&&w!=null;++S)w=w[N[S]];return w},f=(v,N)=>N==null||v==null?N:typeof v=="object"&&"key"in v?Object.hasOwn(N,v.key)?N[v.key]:h(N,v.path):typeof v=="function"?v(N):Array.isArray(v)?h(N,v):typeof N=="object"?N[v]:N,m=l.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return s.map(v=>({original:v,criteria:m.map(N=>f(N,v))})).slice().sort((v,N)=>{for(let w=0;w<m.length;w++){const S=t.compareValues(v.criteria[w],N.criteria[w],u[w]);if(S!==0)return S}return 0}).map(v=>v.original)}e.orderBy=i})(F2);var Z2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,d)=>{for(let h=0;h<u.length;h++){const f=u[h];Array.isArray(f)&&d<s?l(f,d+1):i.push(f)}};return l(n,0),i}e.flatten=t})(Z2);var Wv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uv,n=gf,r=Dv,i=Rv;function s(l,u,d){return r.isObject(d)&&(typeof u=="number"&&n.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?i.eq(d[u],l):!1}e.isIterateeCall=s})(Wv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F2,n=Z2,r=Wv;function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(B2);var fL=B2.sortBy;const yf=Mr(fL);var W2=e=>e.legend.settings,hL=e=>e.legend.size,mL=e=>e.legend.payload,pL=X([mL,W2],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?yf(r,n):r});function gL(){return ue(pL)}var Fc=1;function V2(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=x.useState({height:0,left:0,top:0,width:0}),r=x.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>Fc||Math.abs(l.left-t.left)>Fc||Math.abs(l.top-t.top)>Fc||Math.abs(l.width-t.width)>Fc)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function wt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var vL=typeof Symbol=="function"&&Symbol.observable||"@@observable",Xb=vL,dm=()=>Math.random().toString(36).substring(7).split("").join("."),yL={INIT:`@@redux/INIT${dm()}`,REPLACE:`@@redux/REPLACE${dm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${dm()}`},ed=yL;function Vv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function K2(e,t,n){if(typeof e!="function")throw new Error(wt(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(wt(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(wt(1));return n(K2)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,d=!1;function h(){l===s&&(l=new Map,s.forEach((S,b)=>{l.set(b,S)}))}function f(){if(d)throw new Error(wt(3));return i}function m(S){if(typeof S!="function")throw new Error(wt(4));if(d)throw new Error(wt(5));let b=!0;h();const j=u++;return l.set(j,S),function(){if(b){if(d)throw new Error(wt(6));b=!1,h(),l.delete(j),s=null}}}function g(S){if(!Vv(S))throw new Error(wt(7));if(typeof S.type>"u")throw new Error(wt(8));if(typeof S.type!="string")throw new Error(wt(17));if(d)throw new Error(wt(9));try{d=!0,i=r(i,S)}finally{d=!1}return(s=l).forEach(j=>{j()}),S}function v(S){if(typeof S!="function")throw new Error(wt(10));r=S,g({type:ed.REPLACE})}function N(){const S=m;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(wt(11));function j(){const k=b;k.next&&k.next(f())}return j(),{unsubscribe:S(j)}},[Xb](){return this}}}return g({type:ed.INIT}),{dispatch:g,subscribe:m,getState:f,replaceReducer:v,[Xb]:N}}function xL(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:ed.INIT})>"u")throw new Error(wt(12));if(typeof n(void 0,{type:ed.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(wt(13))})}function q2(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{xL(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let d=!1;const h={};for(let f=0;f<r.length;f++){const m=r[f],g=n[m],v=l[m],N=g(v,u);if(typeof N>"u")throw u&&u.type,new Error(wt(14));h[m]=N,d=d||N!==v}return d=d||r.length!==Object.keys(l).length,d?h:l}}function td(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function bL(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(wt(15))};const l={getState:i.getState,dispatch:(d,...h)=>s(d,...h)},u=e.map(d=>d(l));return s=td(...u)(i.dispatch),{...i,dispatch:s}}}function G2(e){return Vv(e)&&"type"in e&&typeof e.type=="string"}var Y2=Symbol.for("immer-nothing"),Qb=Symbol.for("immer-draftable"),Sn=Symbol.for("immer-state");function ur(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ds=Object.getPrototypeOf;function Ca(e){return!!e&&!!e[Sn]}function ti(e){var t;return e?X2(e)||Array.isArray(e)||!!e[Qb]||!!((t=e.constructor)!=null&&t[Qb])||Fl(e)||bf(e):!1}var _L=Object.prototype.constructor.toString();function X2(e){if(!e||typeof e!="object")return!1;const t=Ds(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===_L}function nd(e,t){xf(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function xf(e){const t=e[Sn];return t?t.type_:Array.isArray(e)?1:Fl(e)?2:bf(e)?3:0}function Bp(e,t){return xf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Q2(e,t,n){const r=xf(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function wL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Fl(e){return e instanceof Map}function bf(e){return e instanceof Set}function na(e){return e.copy_||e.base_}function Fp(e,t){if(Fl(e))return new Map(e);if(bf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=X2(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Sn];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Ds(e),r)}else{const r=Ds(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Kv(e,t=!1){return _f(e)||Ca(e)||!ti(e)||(xf(e)>1&&Object.defineProperties(e,{set:{value:Uc},add:{value:Uc},clear:{value:Uc},delete:{value:Uc}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Kv(n,!0))),e}function Uc(){ur(2)}function _f(e){return Object.isFrozen(e)}var jL={};function Ea(e){const t=jL[e];return t||ur(0,e),t}var _l;function J2(){return _l}function NL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Jb(e,t){t&&(Ea("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Up(e){Hp(e),e.drafts_.forEach(SL),e.drafts_=null}function Hp(e){e===_l&&(_l=e.parent_)}function e_(e){return _l=NL(_l,e)}function SL(e){const t=e[Sn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function t_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Sn].modified_&&(Up(t),ur(4)),ti(e)&&(e=rd(t,e),t.parent_||id(t,e)),t.patches_&&Ea("Patches").generateReplacementPatches_(n[Sn].base_,e,t.patches_,t.inversePatches_)):e=rd(t,n,[]),Up(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Y2?e:void 0}function rd(e,t,n){if(_f(t))return t;const r=t[Sn];if(!r)return nd(t,(i,s)=>n_(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return id(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),nd(s,(u,d)=>n_(e,r,i,u,d,n,l)),id(e,i,!1),n&&e.patches_&&Ea("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function n_(e,t,n,r,i,s,l){if(Ca(i)){const u=s&&t&&t.type_!==3&&!Bp(t.assigned_,r)?s.concat(r):void 0,d=rd(e,i,u);if(Q2(n,r,d),Ca(d))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(ti(i)&&!_f(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;rd(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Fl(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&id(e,i)}}function id(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Kv(t,n)}function PL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:J2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=qv;n&&(i=[r],s=wl);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var qv={get(e,t){if(t===Sn)return e;const n=na(e);if(!Bp(n,t))return kL(e,n,t);const r=n[t];return e.finalized_||!ti(r)?r:r===fm(e.base_,t)?(hm(e),e.copy_[t]=Wp(r,e)):r},has(e,t){return t in na(e)},ownKeys(e){return Reflect.ownKeys(na(e))},set(e,t,n){const r=eS(na(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=fm(na(e),t),s=i==null?void 0:i[Sn];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(wL(n,i)&&(n!==void 0||Bp(e.base_,t)))return!0;hm(e),Zp(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return fm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,hm(e),Zp(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=na(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ur(11)},getPrototypeOf(e){return Ds(e.base_)},setPrototypeOf(){ur(12)}},wl={};nd(qv,(e,t)=>{wl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});wl.deleteProperty=function(e,t){return wl.set.call(this,e,t,void 0)};wl.set=function(e,t,n){return qv.set.call(this,e[0],t,n,e[0])};function fm(e,t){const n=e[Sn];return(n?na(n):e)[t]}function kL(e,t,n){var i;const r=eS(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function eS(e,t){if(!(t in e))return;let n=Ds(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Ds(n)}}function Zp(e){e.modified_||(e.modified_=!0,e.parent_&&Zp(e.parent_))}function hm(e){e.copy_||(e.copy_=Fp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var CL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(d=s,...h){return l.produce(d,f=>n.call(this,f,...h))}}typeof n!="function"&&ur(6),r!==void 0&&typeof r!="function"&&ur(7);let i;if(ti(t)){const s=e_(this),l=Wp(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?Up(s):Hp(s)}return Jb(s,r),t_(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Y2&&(i=void 0),this.autoFreeze_&&Kv(i,!0),r){const s=[],l=[];Ea("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else ur(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ti(e)||ur(8),Ca(e)&&(e=Gr(e));const t=e_(this),n=Wp(e,void 0);return n[Sn].isManual_=!0,Hp(t),n}finishDraft(e,t){const n=e&&e[Sn];(!n||!n.isManual_)&&ur(9);const{scope_:r}=n;return Jb(r,t),t_(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Ea("Patches").applyPatches_;return Ca(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Wp(e,t){const n=Fl(e)?Ea("MapSet").proxyMap_(e,t):bf(e)?Ea("MapSet").proxySet_(e,t):PL(e,t);return(t?t.scope_:J2()).drafts_.push(n),n}function Gr(e){return Ca(e)||ur(10,e),tS(e)}function tS(e){if(!ti(e)||_f(e))return e;const t=e[Sn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Fp(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Fp(e,!0);return nd(n,(r,i)=>{Q2(n,r,tS(i))}),t&&(t.finalized_=!1),n}var EL=new CL,nS=EL.produce;function rS(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var OL=rS(),AL=rS,TL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?td:td.apply(null,arguments)};function Yn(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(wn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>G2(r)&&r.type===e,n}var iS=class Uo extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Uo.prototype)}static get[Symbol.species](){return Uo}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Uo(...t[0].concat(this)):new Uo(...t.concat(this))}};function r_(e){return ti(e)?nS(e,()=>{}):e}function Hc(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function ML(e){return typeof e=="boolean"}var LL=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new iS;return n&&(ML(n)?l.push(OL):l.push(AL(n.extraArgument))),l},DL="RTK_autoBatch",i_=e=>t=>{setTimeout(t,e)},IL=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:i_(10):e.type==="callback"?e.queueNotification:i_(e.timeout),h=()=>{l=!1,s&&(s=!1,u.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const m=()=>i&&f(),g=r.subscribe(m);return u.add(f),()=>{g(),u.delete(f)}},dispatch(f){var m;try{return i=!((m=f==null?void 0:f.meta)!=null&&m[DL]),s=!i,s&&(l||(l=!0,d(h))),r.dispatch(f)}finally{i=!0}}})},RL=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new iS(e);return r&&i.push(IL(typeof r=="object"?r:void 0)),i};function zL(e){const t=LL(),{reducer:n=void 0,middleware:r,devTools:i=!0,duplicateMiddlewareCheck:s=!0,preloadedState:l=void 0,enhancers:u=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(Vv(n))d=q2(n);else throw new Error(wn(1));let h;typeof r=="function"?h=r(t):h=t();let f=td;i&&(f=TL({trace:!1,...typeof i=="object"&&i}));const m=bL(...h),g=RL(m);let v=typeof u=="function"?u(g):g();const N=f(...v);return K2(d,l,N)}function aS(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(wn(28));if(u in t)throw new Error(wn(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function $L(e){return typeof e=="function"}function BL(e,t){let[n,r,i]=aS(t),s;if($L(e))s=()=>r_(e());else{const u=r_(e);s=()=>u}function l(u=s(),d){let h=[n[d.type],...r.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return h.filter(f=>!!f).length===0&&(h=[i]),h.reduce((f,m)=>{if(m)if(Ca(f)){const v=m(f,d);return v===void 0?f:v}else{if(ti(f))return nS(f,g=>m(g,d));{const g=m(f,d);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},u)}return l.getInitialState=s,l}var FL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",UL=(e=21)=>{let t="",n=e;for(;n--;)t+=FL[Math.random()*64|0];return t},HL=Symbol.for("rtk-slice-createasyncthunk");function ZL(e,t){return`${e}/${t}`}function WL({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[HL];return function(i){const{name:s,reducerPath:l=s}=i;if(!s)throw new Error(wn(11));typeof process<"u";const u=(typeof i.reducers=="function"?i.reducers(KL()):i.reducers)||{},d=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(k,C){const A=typeof k=="string"?k:k.type;if(!A)throw new Error(wn(12));if(A in h.sliceCaseReducersByType)throw new Error(wn(13));return h.sliceCaseReducersByType[A]=C,f},addMatcher(k,C){return h.sliceMatchers.push({matcher:k,reducer:C}),f},exposeAction(k,C){return h.actionCreators[k]=C,f},exposeCaseReducer(k,C){return h.sliceCaseReducersByName[k]=C,f}};d.forEach(k=>{const C=u[k],A={reducerName:k,type:ZL(s,k),createNotation:typeof i.reducers=="function"};GL(C)?XL(A,C,f,t):qL(A,C,f)});function m(){const[k={},C=[],A=void 0]=typeof i.extraReducers=="function"?aS(i.extraReducers):[i.extraReducers],T={...k,...h.sliceCaseReducersByType};return BL(i.initialState,R=>{for(let B in T)R.addCase(B,T[B]);for(let B of h.sliceMatchers)R.addMatcher(B.matcher,B.reducer);for(let B of C)R.addMatcher(B.matcher,B.reducer);A&&R.addDefaultCase(A)})}const g=k=>k,v=new Map,N=new WeakMap;let w;function S(k,C){return w||(w=m()),w(k,C)}function b(){return w||(w=m()),w.getInitialState()}function j(k,C=!1){function A(R){let B=R[k];return typeof B>"u"&&C&&(B=Hc(N,A,b)),B}function T(R=g){const B=Hc(v,C,()=>new WeakMap);return Hc(B,R,()=>{const I={};for(const[M,$]of Object.entries(i.selectors??{}))I[M]=VL($,R,()=>Hc(N,R,b),C);return I})}return{reducerPath:k,getSelectors:T,get selectors(){return T(A)},selectSlice:A}}const _={name:s,reducer:S,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:b,...j(l),injectInto(k,{reducerPath:C,...A}={}){const T=C??l;return k.inject({reducerPath:T,reducer:S},A),{..._,...j(T,!0)}}};return _}}function VL(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var On=WL();function KL(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function qL({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!YL(r))throw new Error(wn(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?Yn(e,l):Yn(e))}function GL(e){return e._reducerDefinitionType==="asyncThunk"}function YL(e){return e._reducerDefinitionType==="reducerWithPrepare"}function XL({type:e,reducerName:t},n,r,i){if(!i)throw new Error(wn(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:d,settled:h,options:f}=n,m=i(e,s,f);r.exposeAction(t,m),l&&r.addCase(m.fulfilled,l),u&&r.addCase(m.pending,u),d&&r.addCase(m.rejected,d),h&&r.addMatcher(m.settled,h),r.exposeCaseReducer(t,{fulfilled:l||Zc,pending:u||Zc,rejected:d||Zc,settled:h||Zc})}function Zc(){}var QL="task",sS="listener",oS="completed",Gv="cancelled",JL=`task-${Gv}`,eD=`task-${oS}`,Vp=`${sS}-${Gv}`,tD=`${sS}-${oS}`,wf=class{constructor(e){Eh(this,"name","TaskAbortError");Eh(this,"message");this.code=e,this.message=`${QL} ${Gv} (reason: ${e})`}},Yv=(e,t)=>{if(typeof e!="function")throw new TypeError(wn(32))},ad=()=>{},lS=(e,t=ad)=>(e.catch(t),e),cS=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),va=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ya=e=>{if(e.aborted){const{reason:t}=e;throw new wf(t)}};function uS(e,t){let n=ad;return new Promise((r,i)=>{const s=()=>i(new wf(e.reason));if(e.aborted){s();return}n=cS(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=ad})}var nD=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof wf?"cancelled":"rejected",error:n}}finally{t==null||t()}},sd=e=>t=>lS(uS(e,t).then(n=>(ya(e),n))),dS=e=>{const t=sd(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:xs}=Object,a_={},jf="listenerMiddleware",rD=(e,t)=>{const n=r=>cS(e,()=>va(r,e.reason));return(r,i)=>{Yv(r);const s=new AbortController;n(s);const l=nD(async()=>{ya(e),ya(s.signal);const u=await r({pause:sd(s.signal),delay:dS(s.signal),signal:s.signal});return ya(s.signal),u},()=>va(s,eD));return i!=null&&i.autoJoin&&t.push(l.catch(ad)),{result:sd(e)(l),cancel(){va(s,JL)}}}},iD=(e,t)=>{const n=async(r,i)=>{ya(t);let s=()=>{};const u=[new Promise((d,h)=>{let f=e({predicate:r,effect:(m,g)=>{g.unsubscribe(),d([m,g.getState(),g.getOriginalState()])}});s=()=>{f(),h()}})];i!=null&&u.push(new Promise(d=>setTimeout(d,i,null)));try{const d=await uS(t,Promise.race(u));return ya(t),d}finally{s()}};return(r,i)=>lS(n(r,i))},fS=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Yn(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(wn(21));return Yv(s),{predicate:i,type:t,effect:s}},hS=xs(e=>{const{type:t,predicate:n,effect:r}=fS(e);return{id:UL(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(wn(22))}}},{withTypes:()=>hS}),s_=(e,t)=>{const{type:n,effect:r,predicate:i}=fS(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},Kp=e=>{e.pending.forEach(t=>{va(t,Vp)})},aD=e=>()=>{e.forEach(Kp),e.clear()},o_=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},mS=xs(Yn(`${jf}/add`),{withTypes:()=>mS}),sD=Yn(`${jf}/removeAll`),pS=xs(Yn(`${jf}/remove`),{withTypes:()=>pS}),oD=(...e)=>{console.error(`${jf}/error`,...e)},Ul=(e={})=>{const t=new Map,{extra:n,onError:r=oD}=e;Yv(r);const i=f=>(f.unsubscribe=()=>t.delete(f.id),t.set(f.id,f),m=>{f.unsubscribe(),m!=null&&m.cancelActive&&Kp(f)}),s=f=>{const m=s_(t,f)??hS(f);return i(m)};xs(s,{withTypes:()=>s});const l=f=>{const m=s_(t,f);return m&&(m.unsubscribe(),f.cancelActive&&Kp(m)),!!m};xs(l,{withTypes:()=>l});const u=async(f,m,g,v)=>{const N=new AbortController,w=iD(s,N.signal),S=[];try{f.pending.add(N),await Promise.resolve(f.effect(m,xs({},g,{getOriginalState:v,condition:(b,j)=>w(b,j).then(Boolean),take:w,delay:dS(N.signal),pause:sd(N.signal),extra:n,signal:N.signal,fork:rD(N.signal,S),unsubscribe:f.unsubscribe,subscribe:()=>{t.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((b,j,_)=>{b!==N&&(va(b,Vp),_.delete(b))})},cancel:()=>{va(N,Vp),f.pending.delete(N)},throwIfCancelled:()=>{ya(N.signal)}})))}catch(b){b instanceof wf||o_(r,b,{raisedBy:"effect"})}finally{await Promise.all(S),va(N,tD),f.pending.delete(N)}},d=aD(t);return{middleware:f=>m=>g=>{if(!G2(g))return m(g);if(mS.match(g))return s(g.payload);if(sD.match(g)){d();return}if(pS.match(g))return l(g.payload);let v=f.getState();const N=()=>{if(v===a_)throw new Error(wn(23));return v};let w;try{if(w=m(g),t.size>0){const S=f.getState(),b=Array.from(t.values());for(const j of b){let _=!1;try{_=j.predicate(g,S,v)}catch(k){_=!1,o_(r,k,{raisedBy:"predicate"})}_&&u(j,g,f,N)}}}finally{v=a_}return w},startListening:s,stopListening:l,clearListeners:d}};function wn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var lD={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},gS=On({name:"chartLayout",initialState:lD,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:cD,setLayout:uD,setChartSize:dD,setScale:fD}=gS.actions,hD=gS.reducer;function l_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function c_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l_(Object(n),!0).forEach(function(r){mD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mD(e,t,n){return(t=pD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pD(e){var t=gD(e,"string");return typeof t=="symbol"?t:t+""}function gD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var od=Math.PI/180,vD=e=>e*180/Math.PI,Pt=(e,t,n,r)=>({x:e+Math.cos(-od*r)*n,y:t+Math.sin(-od*r)*n}),yD=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},xD=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},bD=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=xD({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,d=Math.acos(u);return r>s&&(d=2*Math.PI-d),{radius:l,angle:vD(d),angleInRadian:d}},_D=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},wD=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},jD=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=bD({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:d,endAngle:h}=_D(t),f=s,m;if(d<=h){for(;f>h;)f-=360;for(;f<d;)f+=360;m=f>=d&&f<=h}else{for(;f>d;)f-=360;for(;f<h;)f+=360;m=f>=h&&f<=d}return m?c_(c_({},t),{},{radius:i,angle:wD(f,t)}):null};function vS(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function u_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u_(Object(n),!0).forEach(function(r){ND(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ND(e,t,n){return(t=SD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SD(e){var t=PD(e,"string");return typeof t=="symbol"?t:t+""}function PD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gt(e,t,n){return vt(e)||vt(t)?n:Ar(t)?Ts(e,t,n):typeof t=="function"?t(e):n}var kD=(e,t,n,r,i)=>{var s,l=-1,u=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var d=0;d<u;d++){var h=d>0?n[d-1].coordinate:n[u-1].coordinate,f=n[d].coordinate,m=d>=u-1?n[0].coordinate:n[d+1].coordinate,g=void 0;if(sn(f-h)!==sn(m-f)){var v=[];if(sn(m-f)===sn(i[1]-i[0])){g=m;var N=f+i[1]-i[0];v[0]=Math.min(N,(N+h)/2),v[1]=Math.max(N,(N+h)/2)}else{g=h;var w=m+i[1]-i[0];v[0]=Math.min(f,(w+f)/2),v[1]=Math.max(f,(w+f)/2)}var S=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(e>S[0]&&e<=S[1]||e>=v[0]&&e<=v[1]){({index:l}=n[d]);break}}else{var b=Math.min(h,m),j=Math.max(h,m);if(e>(b+f)/2&&e<=(j+f)/2){({index:l}=n[d]);break}}}else if(t){for(var _=0;_<u;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===u-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:l}=t[_]);break}}return l},CD=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&de(e[s]))return Fn(Fn({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&de(e[l]))return Fn(Fn({},e),{},{[l]:e[l]+(i||0)})}return e},Da=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",yS=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},xS=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:d,categoricalDomain:h,tickCount:f,ticks:m,niceTicks:g,axisType:v}=e;if(!l)return null;var N=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,w=i==="category"&&l.bandwidth?l.bandwidth()/N:0;if(w=v==="angleAxis"&&s&&s.length>=2?sn(s[0]-s[1])*2*w:w,m||g){var S=(m||g||[]).map((b,j)=>{var _=r?r.indexOf(b):b;return{coordinate:l(_)+w,value:b,offset:w,index:j}});return S.filter(b=>!Nn(b.coordinate))}return d&&h?h.map((b,j)=>({coordinate:l(b)+w,value:b,index:j,offset:w})):l.ticks&&!n&&f!=null?l.ticks(f).map((b,j)=>({coordinate:l(b)+w,value:b,offset:w,index:j})):l.domain().map((b,j)=>({coordinate:l(b)+w,value:r?r[b]:b,index:j,offset:w}))},d_=1e-4,ED=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-d_,s=Math.max(r[0],r[1])+d_,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},OD=(e,t)=>{if(!t||t.length!==2||!de(t[0])||!de(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!de(e[0])||e[0]<n)&&(i[0]=n),(!de(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},AD=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=Nn(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},TD=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=Nn(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},MD={sign:AD,expand:g4,none:Ms,silhouette:v4,wiggle:y4,positive:TD},LD=(e,t,n)=>{var r=MD[n],i=p4().keys(t).value((s,l)=>+Gt(s,l,0)).order(Rp).offset(r);return i(e)};function DD(e){return e==null?void 0:String(e)}var f_=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=Gt(s,t.dataKey,t.scale.domain()[l]);return vt(u)?null:t.scale(u)-i/2+r},ID=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},RD=e=>{var t=e.flat(2).filter(de);return[Math.min(...t),Math.max(...t)]},zD=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],$D=(e,t,n)=>{if(e!=null)return zD(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((d,h)=>{var f=vS(h,t,n),m=RD(f);return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},h_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,m_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Xv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=yf(t,f=>f.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var d=i[l],h=i[l-1];s=Math.min((d.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function p_(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Fn(Fn({},t),{},{dataKey:n,payload:r,value:i,name:s})}function bS(e,t){if(e)return String(e);if(typeof t=="string")return t}function BD(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?jD({x:e,y:t},r):null}var FD=(e,t,n,r)=>{var i=t.find(h=>h&&h.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return Fn(Fn(Fn({},r),Pt(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:d}=r;return Fn(Fn(Fn({},r),Pt(r.cx,r.cy,u,d)),{},{angle:d,radius:u})}return{x:0,y:0}},UD=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,si=e=>e.layout.width,oi=e=>e.layout.height,HD=e=>e.layout.scale,_S=e=>e.layout.margin,Nf=X(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Sf=X(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),ZD="data-recharts-item-index",WD="data-recharts-item-data-key",Hl=60;function g_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g_(Object(n),!0).forEach(function(r){VD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VD(e,t,n){return(t=KD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KD(e){var t=qD(e,"string");return typeof t=="symbol"?t:t+""}function qD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GD=e=>e.brush.height;function YD(e){var t=Sf(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Hl;return n+i}return n},0)}function XD(e){var t=Sf(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Hl;return n+i}return n},0)}function QD(e){var t=Nf(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function JD(e){var t=Nf(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var yt=X([si,oi,_S,GD,YD,XD,QD,JD,W2,hL],(e,t,n,r,i,s,l,u,d,h)=>{var f={left:(n.left||0)+i,right:(n.right||0)+s},m={top:(n.top||0)+l,bottom:(n.bottom||0)+u},g=Wc(Wc({},m),f),v=g.bottom;g.bottom+=r,g=CD(g,d,h);var N=e-g.left-g.right,w=t-g.top-g.bottom;return Wc(Wc({brushBottom:v},g),{},{width:Math.max(N,0),height:Math.max(w,0)})}),eI=X(yt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Qv=X(si,oi,(e,t)=>({x:0,y:0,width:e,height:t})),tI=x.createContext(null),Jn=()=>x.useContext(tI)!=null,Pf=e=>e.brush,kf=X([Pf,yt,_S],(e,t,n)=>({height:e.height,x:de(e.x)?e.x:t.left,y:de(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:de(e.width)?e.width:t.width})),Jv=()=>{var e,t=Jn(),n=ue(eI),r=ue(kf),i=(e=ue(Pf))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},nI={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},wS=()=>{var e;return(e=ue(yt))!==null&&e!==void 0?e:nI},e0=()=>ue(si),t0=()=>ue(oi),rI=()=>ue(e=>e.layout.margin),Te=e=>e.layout.layoutType,n0=()=>ue(Te),iI={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},jS=On({name:"legend",initialState:iI,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Gr(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:v_,setLegendSettings:aI,addLegendPayload:sI,removeLegendPayload:oI}=jS.actions,lI=jS.reducer,cI=["contextPayload"];function qp(){return qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qp.apply(null,arguments)}function y_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y_(Object(n),!0).forEach(function(r){r0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r0(e,t,n){return(t=uI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uI(e){var t=dI(e,"string");return typeof t=="symbol"?t:t+""}function dI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fI(e,t){if(e==null)return{};var n,r,i=hI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function mI(e){return e.value}function pI(e){var{contextPayload:t}=e,n=fI(e,cI),r=L2(t,e.payloadUniqBy,mI),i=Is(Is({},n),{},{payload:r});return x.isValidElement(e.content)?x.cloneElement(e.content,i):typeof e.content=="function"?x.createElement(e.content,i):x.createElement(Mv,i)}function gI(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:d}=t,h,f;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?h={left:((r||0)-s.width)/2}:h=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?f={top:((i||0)-s.height)/2}:f=d==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Is(Is({},h),f)}function vI(e){var t=st();return x.useEffect(()=>{t(aI(e))},[t,e]),null}function yI(e){var t=st();return x.useEffect(()=>(t(v_(e)),()=>{t(v_({width:0,height:0}))}),[t,e]),null}function xI(e){var t=gL(),n=$3(),r=rI(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[d,h]=V2([t]),f=e0(),m=t0();if(f==null||m==null)return null;var g=f-(r.left||0)-(r.right||0),v=Cf.getWidthOrHeight(e.layout,s,i,g),N=u?l:Is(Is({position:"absolute",width:(v==null?void 0:v.width)||i||"auto",height:(v==null?void 0:v.height)||s||"auto"},gI(l,e,r,f,m,d)),l),w=u??n;if(w==null)return null;var S=x.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:h},x.createElement(vI,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),x.createElement(yI,{width:d.width,height:d.height}),x.createElement(pI,qp({},e,v,{margin:r,chartWidth:f,chartHeight:m,contextPayload:t})));return Xd.createPortal(S,w)}class Cf extends x.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&de(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return x.createElement(xI,this.props)}}r0(Cf,"displayName","Legend");r0(Cf,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gp.apply(null,arguments)}function x_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x_(Object(n),!0).forEach(function(r){bI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bI(e,t,n){return(t=_I(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _I(e){var t=wI(e,"string");return typeof t=="symbol"?t:t+""}function wI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jI(e){return Array.isArray(e)&&Ar(e[0])&&Ar(e[1])?e.join(" ~ "):e}var NI=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:h,label:f,labelFormatter:m,accessibilityLayer:g=!1}=e,v=()=>{if(s&&s.length){var C={padding:0,margin:0},A=(u?yf(s,u):s).map((T,R)=>{if(T.type==="none")return null;var B=T.formatter||l||jI,{value:I,name:M}=T,$=I,F=M;if(B){var E=B(I,M,T,R,s);if(Array.isArray(E))[$,F]=E;else if(E!=null)$=E;else return null}var Z=mm({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},r);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:Z},Ar(F)?x.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Ar(F)?x.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,x.createElement("span",{className:"recharts-tooltip-item-value"},$),x.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:C},A)}return null},N=mm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=mm({margin:0},i),S=!vt(f),b=S?f:"",j=$e("recharts-default-tooltip",d),_=$e("recharts-tooltip-label",h);S&&m&&s!==void 0&&s!==null&&(b=m(f,s));var k=g?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",Gp({className:j,style:N},k),x.createElement("p",{className:_,style:w},x.isValidElement(b)?b:"".concat(b)),v())},Co="recharts-tooltip-wrapper",SI={visibility:"hidden"};function PI(e){var{coordinate:t,translateX:n,translateY:r}=e;return $e(Co,{["".concat(Co,"-right")]:de(n)&&t&&de(t.x)&&n>=t.x,["".concat(Co,"-left")]:de(n)&&t&&de(t.x)&&n<t.x,["".concat(Co,"-bottom")]:de(r)&&t&&de(t.y)&&r>=t.y,["".concat(Co,"-top")]:de(r)&&t&&de(t.y)&&r<t.y})}function b_(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:h}=e;if(s&&de(s[r]))return s[r];var f=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return l[r]?f:m;var g=d[r];if(g==null)return 0;if(l[r]){var v=f,N=g;return v<N?Math.max(m,g):Math.max(f,g)}if(h==null)return 0;var w=m+u,S=g+h;return w>S?Math.max(f,g):Math.max(m,g)}function kI(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function CI(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,h,f,m;return l.height>0&&l.width>0&&n?(f=b_({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),m=b_({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),h=kI({translateX:f,translateY:m,useTranslate3d:u})):h=SI,{cssProperties:h,cssClasses:PI({translateX:f,translateY:m,coordinate:n})}}function __(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?__(Object(n),!0).forEach(function(r){Yp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):__(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yp(e,t,n){return(t=EI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EI(e){var t=OI(e,"string");return typeof t=="symbol"?t:t+""}function OI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class AI extends x.PureComponent{constructor(){super(...arguments),Yp(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Yp(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:d,offset:h,position:f,reverseDirection:m,useTranslate3d:g,viewBox:v,wrapperStyle:N,lastBoundingBox:w,innerRef:S,hasPortalFromProps:b}=this.props,{cssClasses:j,cssProperties:_}=CI({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:f,reverseDirection:m,tooltipBox:{height:w.height,width:w.width},useTranslate3d:g,viewBox:v}),k=b?{}:Vc(Vc({transition:d&&t?"transform ".concat(r,"ms ").concat(i):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),C=Vc(Vc({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},N);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:j,style:C,ref:S},s)}}var TI=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ys={devToolsEnabled:!1,isSsr:TI()},NS=()=>ue(e=>e.rootProps.accessibilityLayer);function Pn(e){return Number.isFinite(e)}function ld(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xp.apply(null,arguments)}function w_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function j_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w_(Object(n),!0).forEach(function(r){MI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MI(e,t,n){return(t=LI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LI(e){var t=DI(e,"string");return typeof t=="symbol"?t:t+""}function DI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N_={curveBasisClosed:i4,curveBasisOpen:a4,curveBasis:r4,curveBumpX:H3,curveBumpY:Z3,curveLinearClosed:s4,curveLinear:mf,curveMonotoneX:o4,curveMonotoneY:l4,curveNatural:c4,curveStep:u4,curveStepAfter:f4,curveStepBefore:d4},Kc=e=>Pn(e.x)&&Pn(e.y),Eo=e=>e.x,Oo=e=>e.y,II=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Bl(e));return(n==="curveMonotone"||n==="curveBump")&&t?N_["".concat(n).concat(t==="vertical"?"Y":"X")]:N_[n]||mf},RI=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=II(t,i),u=s?n.filter(Kc):n,d;if(Array.isArray(r)){var h=s?r.filter(m=>Kc(m)):r,f=u.map((m,g)=>j_(j_({},m),{},{base:h[g]}));return i==="vertical"?d=$c().y(Oo).x1(Eo).x0(m=>m.base.x):d=$c().x(Eo).y1(Oo).y0(m=>m.base.y),d.defined(Kc).curve(l),d(f)}return i==="vertical"&&de(r)?d=$c().y(Oo).x1(Eo).x0(r):de(r)?d=$c().x(Eo).y1(Oo).y0(r):d=s2().x(Eo).y(Oo),d.defined(Kc).curve(l),d(u)},zI=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?RI(e):r;return x.createElement("path",Xp({},Gs(e),C3(e),{className:$e("recharts-curve",t),d:s===null?void 0:s,ref:i}))},$I=["x","y","top","left","width","height","className"];function Qp(){return Qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qp.apply(null,arguments)}function S_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function BI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(n),!0).forEach(function(r){FI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FI(e,t,n){return(t=UI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UI(e){var t=HI(e,"string");return typeof t=="symbol"?t:t+""}function HI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZI(e,t){if(e==null)return{};var n,r,i=WI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var VI=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),KI=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,d=ZI(e,$I),h=BI({x:t,y:n,top:r,left:i,width:s,height:l},d);return!de(t)||!de(n)||!de(s)||!de(l)||!de(r)||!de(i)?null:x.createElement("path",Qp({},At(h,!0),{className:$e("recharts-cross",u),d:VI(t,n,s,l,r,i)}))};function qI(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function P_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function GI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P_(Object(n),!0).forEach(function(r){YI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YI(e,t,n){return(t=XI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XI(e){var t=QI(e,"string");return typeof t=="symbol"?t:t+""}function QI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function er(e,t){var n=GI({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function JI(){}function k_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function C_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k_(Object(n),!0).forEach(function(r){e5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e5(e,t,n){return(t=t5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t5(e){var t=n5(e,"string");return typeof t=="symbol"?t:t+""}function n5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r5=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),SS=(e,t,n)=>e.map(r=>"".concat(r5(r)," ").concat(t,"ms ").concat(n)).join(","),i5=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),jl=(e,t)=>Object.keys(t).reduce((n,r)=>C_(C_({},n),{},{[r]:e(r,t[r])}),{});function E_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E_(Object(n),!0).forEach(function(r){a5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a5(e,t,n){return(t=s5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s5(e){var t=o5(e,"string");return typeof t=="symbol"?t:t+""}function o5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cd=(e,t,n)=>e+(t-e)*n,Jp=e=>{var{from:t,to:n}=e;return t!==n},PS=(e,t,n)=>{var r=jl((i,s)=>{if(Jp(s)){var[l,u]=e(s.from,s.to,s.velocity);return Nt(Nt({},s),{},{from:l,velocity:u})}return s},t);return n<1?jl((i,s)=>Jp(s)?Nt(Nt({},s),{},{velocity:cd(s.velocity,r[i].velocity,n),from:cd(s.from,r[i].from,n)}):s,t):PS(e,r,n-1)};function l5(e,t,n,r,i,s){var l,u=r.reduce((g,v)=>Nt(Nt({},g),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),d=()=>jl((g,v)=>v.from,u),h=()=>!Object.values(u).filter(Jp).length,f=null,m=g=>{l||(l=g);var v=g-l,N=v/n.dt;u=PS(n,u,N),i(Nt(Nt(Nt({},e),t),d())),l=g,h()||(f=s.setTimeout(m))};return()=>(f=s.setTimeout(m),()=>{f()})}function c5(e,t,n,r,i,s,l){var u=null,d=i.reduce((m,g)=>Nt(Nt({},m),{},{[g]:[e[g],t[g]]}),{}),h,f=m=>{h||(h=m);var g=(m-h)/r,v=jl((w,S)=>cd(...S,n(g)),d);if(s(Nt(Nt(Nt({},e),t),v)),g<1)u=l.setTimeout(f);else{var N=jl((w,S)=>cd(...S,n(1)),d);s(Nt(Nt(Nt({},e),t),N))}};return()=>(u=l.setTimeout(f),()=>{u()})}const u5=(e,t,n,r,i,s)=>{var l=i5(e,t);return n.isStepper===!0?l5(e,t,n,l,i,s):c5(e,t,n,r,l,i,s)};var ud=1e-4,kS=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],CS=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),O_=(e,t)=>n=>{var r=kS(e,t);return CS(r,n)},d5=(e,t)=>n=>{var r=kS(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return CS(i,n)},A_=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var d=l[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,r,n,i]=d[1].split(")")[0].split(",").map(N=>parseFloat(N)))}}else l.length===4&&([t,r,n,i]=l);var h=O_(t,n),f=O_(r,i),m=d5(t,n),g=N=>N>1?1:N<0?0:N,v=N=>{for(var w=N>1?1:N,S=w,b=0;b<8;++b){var j=h(S)-w,_=m(S);if(Math.abs(j-w)<ud||_<ud)return f(S);S=g(S-j/_)}return f(S)};return v.isStepper=!1,v},f5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,d)=>{var h=-(l-u)*n,f=d*r,m=d+(h-f)*i/1e3,g=d*i/1e3+l;return Math.abs(g-u)<ud&&Math.abs(m)<ud?[u,0]:[g,m]};return s.isStepper=!0,s.dt=i,s},h5=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return A_(e);case"spring":return f5();default:if(e.split("(")[0]==="cubic-bezier")return A_(e)}return typeof e=="function"?e:null};function m5(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...h]=u;if(typeof d=="number"){i=e.setTimeout(s.bind(null,h),d);return}s(d),i=e.setTimeout(s.bind(null,h));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class p5{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function g5(){return m5(new p5)}var v5=x.createContext(g5);function y5(e,t){var n=x.useContext(v5);return x.useMemo(()=>t??n(e),[e,t,n])}var x5={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},T_={t:0},pm={t:1};function i0(e){var t=er(e,x5),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:d,children:h}=t,f=y5(t.animationId,t.animationManager),[m,g]=x.useState(n?T_:pm),v=x.useRef(null);return x.useEffect(()=>{n||g(pm)},[n]),x.useEffect(()=>{if(!n||!r)return JI;var N=u5(T_,pm,h5(s),i,g,f.getTimeoutController()),w=()=>{v.current=N()};return f.start([d,l,w,i,u]),()=>{f.stop(),v.current&&v.current(),u()}},[n,r,i,s,l,d,u,f]),h(m.t)}function a0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=x.useRef(bl(t)),r=x.useRef(e);return r.current!==e&&(n.current=bl(t),r.current=e),n.current}function M_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function L_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M_(Object(n),!0).forEach(function(r){b5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function b5(e,t,n){return(t=_5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _5(e){var t=w5(e,"string");return typeof t=="symbol"?t:t+""}function w5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dd(){return dd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dd.apply(null,arguments)}var D_=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,d=r>=0&&n>=0||r<0&&n<0?1:0,h;if(s>0&&i instanceof Array){for(var f=[0,0,0,0],m=0,g=4;m<g;m++)f[m]=i[m]>s?s:i[m];h="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(h+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),h+="L ".concat(e+n-u*f[1],",").concat(t),f[1]>0&&(h+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(t+l*f[1])),h+="L ".concat(e+n,",").concat(t+r-l*f[2]),f[2]>0&&(h+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+n-u*f[2],",").concat(t+r)),h+="L ".concat(e+u*f[3],",").concat(t+r),f[3]>0&&(h+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+r-l*f[3])),h+="Z"}else if(s>0&&i===+i&&i>0){var v=Math.min(s,i);h="M ".concat(e,",").concat(t+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+u*v,",").concat(t,`
            L `).concat(e+n-u*v,",").concat(t,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+n,",").concat(t+l*v,`
            L `).concat(e+n,",").concat(t+r-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+n-u*v,",").concat(t+r,`
            L `).concat(e+u*v,",").concat(t+r,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e,",").concat(t+r-l*v," Z")}else h="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},j5={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ES=e=>{var t=er(e,j5),n=x.useRef(null),[r,i]=x.useState(-1);x.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&i(E)}catch{}},[]);var{x:s,y:l,width:u,height:d,radius:h,className:f}=t,{animationEasing:m,animationDuration:g,animationBegin:v,isAnimationActive:N,isUpdateAnimationActive:w}=t,S=x.useRef(u),b=x.useRef(d),j=x.useRef(s),_=x.useRef(l),k=x.useMemo(()=>({x:s,y:l,width:u,height:d,radius:h}),[s,l,u,d,h]),C=a0(k,"rectangle-");if(s!==+s||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var A=$e("recharts-rectangle",f);if(!w)return x.createElement("path",dd({},At(t,!0),{className:A,d:D_(s,l,u,d,h)}));var T=S.current,R=b.current,B=j.current,I=_.current,M="0px ".concat(r===-1?1:r,"px"),$="".concat(r,"px 0px"),F=SS(["strokeDasharray"],g,typeof m=="string"?m:void 0);return x.createElement(i0,{animationId:C,key:C,canBegin:r>0,duration:g,easing:m,isActive:w,begin:v},E=>{var Z=Wt(T,u,E),z=Wt(R,d,E),K=Wt(B,s,E),D=Wt(I,l,E);n.current&&(S.current=Z,b.current=z,j.current=K,_.current=D);var Q;return N?E>0?Q={transition:F,strokeDasharray:$}:Q={strokeDasharray:M}:Q={strokeDasharray:$},x.createElement("path",dd({},At(t,!0),{className:A,d:D_(K,D,Z,z,h),ref:n,style:L_(L_({},Q),t.style)}))})};function OS(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=Pt(t,n,r,i),u=Pt(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function eg(){return eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eg.apply(null,arguments)}var N5=(e,t)=>{var n=sn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},qc=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,h=u*(l?1:-1)+r,f=Math.asin(u/h)/od,m=d?i:i+s*f,g=Pt(t,n,h,m),v=Pt(t,n,r,m),N=d?i-s*f:i,w=Pt(t,n,h*Math.cos(f*od),N);return{center:g,circleTangency:v,lineTangency:w,theta:f}},AS=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=N5(s,l),d=s+u,h=Pt(t,n,i,s),f=Pt(t,n,i,d),m="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(r>0){var g=Pt(t,n,r,s),v=Pt(t,n,r,d);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},S5=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}=e,f=sn(h-d),{circleTangency:m,lineTangency:g,theta:v}=qc({cx:t,cy:n,radius:i,angle:d,sign:f,cornerRadius:s,cornerIsExternal:u}),{circleTangency:N,lineTangency:w,theta:S}=qc({cx:t,cy:n,radius:i,angle:h,sign:-f,cornerRadius:s,cornerIsExternal:u}),b=u?Math.abs(d-h):Math.abs(d-h)-v-S;if(b<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):AS({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:d,endAngle:h});var j="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(f<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(r>0){var{circleTangency:_,lineTangency:k,theta:C}=qc({cx:t,cy:n,radius:r,angle:d,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:A,lineTangency:T,theta:R}=qc({cx:t,cy:n,radius:r,angle:h,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),B=u?Math.abs(d-h):Math.abs(d-h)-C-R;if(B<0&&s===0)return"".concat(j,"L").concat(t,",").concat(n,"Z");j+="L".concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(B>180),",").concat(+(f>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,"Z")}else j+="L".concat(t,",").concat(n,"Z");return j},P5={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},TS=e=>{var t=er(e,P5),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:f,className:m}=t;if(s<i||h===f)return null;var g=$e("recharts-sector",m),v=s-i,N=vr(l,v,0,!0),w;return N>0&&Math.abs(h-f)<360?w=S5({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(N,v/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:f}):w=AS({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:h,endAngle:f}),x.createElement("path",eg({},At(t,!0),{className:g,d:w}))};function k5(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:d,innerRadius:h,outerRadius:f,angle:m}=t,g=Pt(u,d,h,m),v=Pt(u,d,f,m);r=g.x,i=g.y,s=v.x,l=v.y}else return OS(t);return[{x:r,y:i},{x:s,y:l}]}var MS={},LS={},DS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zv;function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(DS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DS;function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(LS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wv,n=LS;function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),d=new Array(u);for(let h=0;h<u;h++)d[h]=i,i+=l;return d}e.range=r})(MS);var C5=MS.range;const IS=Mr(C5);function Li(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function E5(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function s0(e){let t,n,r;e.length!==2?(t=Li,n=(u,d)=>Li(e(u),d),r=(u,d)=>e(u)-d):(t=e===Li||e===E5?e:O5,n=e,r=e);function i(u,d,h=0,f=u.length){if(h<f){if(t(d,d)!==0)return f;do{const m=h+f>>>1;n(u[m],d)<0?h=m+1:f=m}while(h<f)}return h}function s(u,d,h=0,f=u.length){if(h<f){if(t(d,d)!==0)return f;do{const m=h+f>>>1;n(u[m],d)<=0?h=m+1:f=m}while(h<f)}return h}function l(u,d,h=0,f=u.length){const m=i(u,d,h,f-1);return m>h&&r(u[m-1],d)>-r(u[m],d)?m-1:m}return{left:i,center:l,right:s}}function O5(){return 0}function RS(e){return e===null?NaN:+e}function*A5(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const T5=s0(Li),Zl=T5.right;s0(RS).center;class I_ extends Map{constructor(t,n=D5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(R_(this,t))}has(t){return super.has(R_(this,t))}set(t,n){return super.set(M5(this,t),n)}delete(t){return super.delete(L5(this,t))}}function R_({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function M5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function L5({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function D5(e){return e!==null&&typeof e=="object"?e.valueOf():e}function I5(e=Li){if(e===Li)return zS;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function zS(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const R5=Math.sqrt(50),z5=Math.sqrt(10),$5=Math.sqrt(2);function fd(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=R5?10:s>=z5?5:s>=$5?2:1;let u,d,h;return i<0?(h=Math.pow(10,-i)/l,u=Math.round(e*h),d=Math.round(t*h),u/h<e&&++u,d/h>t&&--d,h=-h):(h=Math.pow(10,i)*l,u=Math.round(e/h),d=Math.round(t/h),u*h<e&&++u,d*h>t&&--d),d<u&&.5<=n&&n<2?fd(e,t,n*2):[u,d,h]}function tg(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?fd(t,e,n):fd(e,t,n);if(!(s>=i))return[];const u=s-i+1,d=new Array(u);if(r)if(l<0)for(let h=0;h<u;++h)d[h]=(s-h)/-l;else for(let h=0;h<u;++h)d[h]=(s-h)*l;else if(l<0)for(let h=0;h<u;++h)d[h]=(i+h)/-l;else for(let h=0;h<u;++h)d[h]=(i+h)*l;return d}function ng(e,t,n){return t=+t,e=+e,n=+n,fd(e,t,n)[2]}function rg(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?ng(t,e,n):ng(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function z_(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function $_(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function $S(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?zS:I5(i);r>n;){if(r-n>600){const d=r-n+1,h=t-n+1,f=Math.log(d),m=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*m*(d-m)/d)*(h-d/2<0?-1:1),v=Math.max(n,Math.floor(t-h*m/d+g)),N=Math.min(r,Math.floor(t+(d-h)*m/d+g));$S(e,t,v,N,i)}const s=e[t];let l=n,u=r;for(Ao(e,n,t),i(e[r],s)>0&&Ao(e,n,r);l<u;){for(Ao(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?Ao(e,n,u):(++u,Ao(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Ao(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function B5(e,t,n){if(e=Float64Array.from(A5(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return $_(e);if(t>=1)return z_(e);var r,i=(r-1)*t,s=Math.floor(i),l=z_($S(e,s).subarray(0,s+1)),u=$_(e.subarray(s+1));return l+(u-l)*(i-s)}}function F5(e,t,n=RS){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function U5(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function tr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function li(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ig=Symbol("implicit");function o0(){var e=new I_,t=[],n=[],r=ig;function i(s){let l=e.get(s);if(l===void 0){if(r!==ig)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new I_;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return o0(t,n).unknown(r)},tr.apply(i,arguments),i}function l0(){var e=o0().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,d=0,h=0,f=.5;delete e.unknown;function m(){var g=t().length,v=i<r,N=v?i:r,w=v?r:i;s=(w-N)/Math.max(1,g-d+h*2),u&&(s=Math.floor(s)),N+=(w-N-s*(g-d))*f,l=s*(1-d),u&&(N=Math.round(N),l=Math.round(l));var S=U5(g).map(function(b){return N+s*b});return n(v?S.reverse():S)}return e.domain=function(g){return arguments.length?(t(g),m()):t()},e.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(g){return arguments.length?(u=!!g,m()):u},e.padding=function(g){return arguments.length?(d=Math.min(1,h=+g),m()):d},e.paddingInner=function(g){return arguments.length?(d=Math.min(1,g),m()):d},e.paddingOuter=function(g){return arguments.length?(h=+g,m()):h},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),m()):f},e.copy=function(){return l0(t(),[r,i]).round(u).paddingInner(d).paddingOuter(h).align(f)},tr.apply(m(),arguments)}function BS(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return BS(t())},e}function H5(){return BS(l0.apply(null,arguments).paddingInner(1))}function c0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function FS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Wl(){}var Nl=.7,hd=1/Nl,bs="\\s*([+-]?\\d+)\\s*",Sl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Or="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Z5=/^#([0-9a-f]{3,8})$/,W5=new RegExp(`^rgb\\(${bs},${bs},${bs}\\)$`),V5=new RegExp(`^rgb\\(${Or},${Or},${Or}\\)$`),K5=new RegExp(`^rgba\\(${bs},${bs},${bs},${Sl}\\)$`),q5=new RegExp(`^rgba\\(${Or},${Or},${Or},${Sl}\\)$`),G5=new RegExp(`^hsl\\(${Sl},${Or},${Or}\\)$`),Y5=new RegExp(`^hsla\\(${Sl},${Or},${Or},${Sl}\\)$`),B_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c0(Wl,Pl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:F_,formatHex:F_,formatHex8:X5,formatHsl:Q5,formatRgb:U_,toString:U_});function F_(){return this.rgb().formatHex()}function X5(){return this.rgb().formatHex8()}function Q5(){return US(this).formatHsl()}function U_(){return this.rgb().formatRgb()}function Pl(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Z5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?H_(t):n===3?new on(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=W5.exec(e))?new on(t[1],t[2],t[3],1):(t=V5.exec(e))?new on(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=K5.exec(e))?Gc(t[1],t[2],t[3],t[4]):(t=q5.exec(e))?Gc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=G5.exec(e))?V_(t[1],t[2]/100,t[3]/100,1):(t=Y5.exec(e))?V_(t[1],t[2]/100,t[3]/100,t[4]):B_.hasOwnProperty(e)?H_(B_[e]):e==="transparent"?new on(NaN,NaN,NaN,0):null}function H_(e){return new on(e>>16&255,e>>8&255,e&255,1)}function Gc(e,t,n,r){return r<=0&&(e=t=n=NaN),new on(e,t,n,r)}function J5(e){return e instanceof Wl||(e=Pl(e)),e?(e=e.rgb(),new on(e.r,e.g,e.b,e.opacity)):new on}function ag(e,t,n,r){return arguments.length===1?J5(e):new on(e,t,n,r??1)}function on(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}c0(on,ag,FS(Wl,{brighter(e){return e=e==null?hd:Math.pow(hd,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nl:Math.pow(Nl,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new on(xa(this.r),xa(this.g),xa(this.b),md(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Z_,formatHex:Z_,formatHex8:e6,formatRgb:W_,toString:W_}));function Z_(){return`#${ua(this.r)}${ua(this.g)}${ua(this.b)}`}function e6(){return`#${ua(this.r)}${ua(this.g)}${ua(this.b)}${ua((isNaN(this.opacity)?1:this.opacity)*255)}`}function W_(){const e=md(this.opacity);return`${e===1?"rgb(":"rgba("}${xa(this.r)}, ${xa(this.g)}, ${xa(this.b)}${e===1?")":`, ${e})`}`}function md(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ua(e){return e=xa(e),(e<16?"0":"")+e.toString(16)}function V_(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new dr(e,t,n,r)}function US(e){if(e instanceof dr)return new dr(e.h,e.s,e.l,e.opacity);if(e instanceof Wl||(e=Pl(e)),!e)return new dr;if(e instanceof dr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,d=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=d<.5?s+i:2-s-i,l*=60):u=d>0&&d<1?0:l,new dr(l,u,d,e.opacity)}function t6(e,t,n,r){return arguments.length===1?US(e):new dr(e,t,n,r??1)}function dr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}c0(dr,t6,FS(Wl,{brighter(e){return e=e==null?hd:Math.pow(hd,e),new dr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nl:Math.pow(Nl,e),new dr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new on(gm(e>=240?e-240:e+120,i,r),gm(e,i,r),gm(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new dr(K_(this.h),Yc(this.s),Yc(this.l),md(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=md(this.opacity);return`${e===1?"hsl(":"hsla("}${K_(this.h)}, ${Yc(this.s)*100}%, ${Yc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function K_(e){return e=(e||0)%360,e<0?e+360:e}function Yc(e){return Math.max(0,Math.min(1,e||0))}function gm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const u0=e=>()=>e;function n6(e,t){return function(n){return e+n*t}}function r6(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function i6(e){return(e=+e)==1?HS:function(t,n){return n-t?r6(t,n,e):u0(isNaN(t)?n:t)}}function HS(e,t){var n=t-e;return n?n6(e,n):u0(isNaN(e)?t:e)}const q_=function e(t){var n=i6(t);function r(i,s){var l=n((i=ag(i)).r,(s=ag(s)).r),u=n(i.g,s.g),d=n(i.b,s.b),h=HS(i.opacity,s.opacity);return function(f){return i.r=l(f),i.g=u(f),i.b=d(f),i.opacity=h(f),i+""}}return r.gamma=e,r}(1);function a6(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function s6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function o6(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=Xs(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function l6(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function pd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function c6(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Xs(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var sg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vm=new RegExp(sg.source,"g");function u6(e){return function(){return e}}function d6(e){return function(t){return e(t)+""}}function f6(e,t){var n=sg.lastIndex=vm.lastIndex=0,r,i,s,l=-1,u=[],d=[];for(e=e+"",t=t+"";(r=sg.exec(e))&&(i=vm.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,d.push({i:l,x:pd(r,i)})),n=vm.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?d[0]?d6(d[0].x):u6(t):(t=d.length,function(h){for(var f=0,m;f<t;++f)u[(m=d[f]).i]=m.x(h);return u.join("")})}function Xs(e,t){var n=typeof t,r;return t==null||n==="boolean"?u0(t):(n==="number"?pd:n==="string"?(r=Pl(t))?(t=r,q_):f6:t instanceof Pl?q_:t instanceof Date?l6:s6(t)?a6:Array.isArray(t)?o6:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?c6:pd)(e,t)}function d0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function h6(e,t){t===void 0&&(t=e,e=Xs);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function m6(e){return function(){return e}}function gd(e){return+e}var G_=[0,1];function Kt(e){return e}function og(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:m6(isNaN(t)?NaN:.5)}function p6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function g6(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=og(i,r),s=n(l,s)):(r=og(r,i),s=n(s,l)),function(u){return s(r(u))}}function v6(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=og(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var d=Zl(e,u,1,r)-1;return s[d](i[d](u))}}function Vl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ef(){var e=G_,t=G_,n=Xs,r,i,s,l=Kt,u,d,h;function f(){var g=Math.min(e.length,t.length);return l!==Kt&&(l=p6(e[0],e[g-1])),u=g>2?v6:g6,d=h=null,m}function m(g){return g==null||isNaN(g=+g)?s:(d||(d=u(e.map(r),t,n)))(r(l(g)))}return m.invert=function(g){return l(i((h||(h=u(t,e.map(r),pd)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,gd),f()):e.slice()},m.range=function(g){return arguments.length?(t=Array.from(g),f()):t.slice()},m.rangeRound=function(g){return t=Array.from(g),n=d0,f()},m.clamp=function(g){return arguments.length?(l=g?!0:Kt,f()):l!==Kt},m.interpolate=function(g){return arguments.length?(n=g,f()):n},m.unknown=function(g){return arguments.length?(s=g,m):s},function(g,v){return r=g,i=v,f()}}function f0(){return Ef()(Kt,Kt)}function y6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Rs(e){return e=vd(Math.abs(e)),e?e[1]:NaN}function x6(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],d=0;i>0&&u>0&&(d+u+1>r&&(u=Math.max(1,r-d)),s.push(n.substring(i-=u,i+u)),!((d+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function b6(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var _6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kl(e){if(!(t=_6.exec(e)))throw new Error("invalid format: "+e);var t;return new h0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}kl.prototype=h0.prototype;function h0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}h0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function w6(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ZS;function j6(e,t){var n=vd(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(ZS=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+vd(e,Math.max(0,t+s-1))[0]}function Y_(e,t){var n=vd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const X_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:y6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Y_(e*100,t),r:Y_,s:j6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Q_(e){return e}var J_=Array.prototype.map,ew=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function N6(e){var t=e.grouping===void 0||e.thousands===void 0?Q_:x6(J_.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Q_:b6(J_.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function h(m){m=kl(m);var g=m.fill,v=m.align,N=m.sign,w=m.symbol,S=m.zero,b=m.width,j=m.comma,_=m.precision,k=m.trim,C=m.type;C==="n"?(j=!0,C="g"):X_[C]||(_===void 0&&(_=12),k=!0,C="g"),(S||g==="0"&&v==="=")&&(S=!0,g="0",v="=");var A=w==="$"?n:w==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",T=w==="$"?r:/[%p]/.test(C)?l:"",R=X_[C],B=/[defgprs%]/.test(C);_=_===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function I(M){var $=A,F=T,E,Z,z;if(C==="c")F=R(M)+F,M="";else{M=+M;var K=M<0||1/M<0;if(M=isNaN(M)?d:R(Math.abs(M),_),k&&(M=w6(M)),K&&+M==0&&N!=="+"&&(K=!1),$=(K?N==="("?N:u:N==="-"||N==="("?"":N)+$,F=(C==="s"?ew[8+ZS/3]:"")+F+(K&&N==="("?")":""),B){for(E=-1,Z=M.length;++E<Z;)if(z=M.charCodeAt(E),48>z||z>57){F=(z===46?i+M.slice(E+1):M.slice(E))+F,M=M.slice(0,E);break}}}j&&!S&&(M=t(M,1/0));var D=$.length+M.length+F.length,Q=D<b?new Array(b-D+1).join(g):"";switch(j&&S&&(M=t(Q+M,Q.length?b-F.length:1/0),Q=""),v){case"<":M=$+M+F+Q;break;case"=":M=$+Q+M+F;break;case"^":M=Q.slice(0,D=Q.length>>1)+$+M+F+Q.slice(D);break;default:M=Q+$+M+F;break}return s(M)}return I.toString=function(){return m+""},I}function f(m,g){var v=h((m=kl(m),m.type="f",m)),N=Math.max(-8,Math.min(8,Math.floor(Rs(g)/3)))*3,w=Math.pow(10,-N),S=ew[8+N/3];return function(b){return v(w*b)+S}}return{format:h,formatPrefix:f}}var Xc,m0,WS;S6({thousands:",",grouping:[3],currency:["$",""]});function S6(e){return Xc=N6(e),m0=Xc.format,WS=Xc.formatPrefix,Xc}function P6(e){return Math.max(0,-Rs(Math.abs(e)))}function k6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rs(t)/3)))*3-Rs(Math.abs(e)))}function C6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Rs(t)-Rs(e))+1}function VS(e,t,n,r){var i=rg(e,t,n),s;switch(r=kl(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=k6(i,l))&&(r.precision=s),WS(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=C6(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=P6(i))&&(r.precision=s-(r.type==="%")*2);break}}return m0(r)}function Ui(e){var t=e.domain;return e.ticks=function(n){var r=t();return tg(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return VS(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],d,h,f=10;for(u<l&&(h=l,l=u,u=h,h=i,i=s,s=h);f-- >0;){if(h=ng(l,u,n),h===d)return r[i]=l,r[s]=u,t(r);if(h>0)l=Math.floor(l/h)*h,u=Math.ceil(u/h)*h;else if(h<0)l=Math.ceil(l*h)/h,u=Math.floor(u*h)/h;else break;d=h}return e},e}function KS(){var e=f0();return e.copy=function(){return Vl(e,KS())},tr.apply(e,arguments),Ui(e)}function qS(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,gd),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return qS(e).unknown(t)},e=arguments.length?Array.from(e,gd):[0,1],Ui(n)}function GS(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function tw(e){return Math.log(e)}function nw(e){return Math.exp(e)}function E6(e){return-Math.log(-e)}function O6(e){return-Math.exp(-e)}function A6(e){return isFinite(e)?+("1e"+e):e<0?0:e}function T6(e){return e===10?A6:e===Math.E?Math.exp:t=>Math.pow(e,t)}function M6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rw(e){return(t,n)=>-e(-t,n)}function p0(e){const t=e(tw,nw),n=t.domain;let r=10,i,s;function l(){return i=M6(r),s=T6(r),n()[0]<0?(i=rw(i),s=rw(s),e(E6,O6)):e(tw,nw),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const d=n();let h=d[0],f=d[d.length-1];const m=f<h;m&&([h,f]=[f,h]);let g=i(h),v=i(f),N,w;const S=u==null?10:+u;let b=[];if(!(r%1)&&v-g<S){if(g=Math.floor(g),v=Math.ceil(v),h>0){for(;g<=v;++g)for(N=1;N<r;++N)if(w=g<0?N/s(-g):N*s(g),!(w<h)){if(w>f)break;b.push(w)}}else for(;g<=v;++g)for(N=r-1;N>=1;--N)if(w=g>0?N/s(-g):N*s(g),!(w<h)){if(w>f)break;b.push(w)}b.length*2<S&&(b=tg(h,f,S))}else b=tg(g,v,Math.min(v-g,S)).map(s);return m?b.reverse():b},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=kl(d)).precision==null&&(d.trim=!0),d=m0(d)),u===1/0)return d;const h=Math.max(1,r*u/t.ticks().length);return f=>{let m=f/s(Math.round(i(f)));return m*r<r-.5&&(m*=r),m<=h?d(f):""}},t.nice=()=>n(GS(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function YS(){const e=p0(Ef()).domain([1,10]);return e.copy=()=>Vl(e,YS()).base(e.base()),tr.apply(e,arguments),e}function iw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function aw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function g0(e){var t=1,n=e(iw(t),aw(t));return n.constant=function(r){return arguments.length?e(iw(t=+r),aw(t)):t},Ui(n)}function XS(){var e=g0(Ef());return e.copy=function(){return Vl(e,XS()).constant(e.constant())},tr.apply(e,arguments)}function sw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function L6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function D6(e){return e<0?-e*e:e*e}function v0(e){var t=e(Kt,Kt),n=1;function r(){return n===1?e(Kt,Kt):n===.5?e(L6,D6):e(sw(n),sw(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ui(t)}function y0(){var e=v0(Ef());return e.copy=function(){return Vl(e,y0()).exponent(e.exponent())},tr.apply(e,arguments),e}function I6(){return y0.apply(null,arguments).exponent(.5)}function ow(e){return Math.sign(e)*e*e}function R6(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function QS(){var e=f0(),t=[0,1],n=!1,r;function i(s){var l=R6(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(ow(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,gd)).map(ow)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return QS(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},tr.apply(i,arguments),Ui(i)}function JS(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=F5(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[Zl(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Li),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return JS().domain(e).range(t).unknown(r)},tr.apply(s,arguments)}function eP(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(d){return d!=null&&d<=d?i[Zl(r,d,0,n)]:s}function u(){var d=-1;for(r=new Array(n);++d<n;)r[d]=((d+1)*t-(d-n)*e)/(n+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(n=(i=Array.from(d)).length-1,u()):i.slice()},l.invertExtent=function(d){var h=i.indexOf(d);return h<0?[NaN,NaN]:h<1?[e,r[0]]:h>=n?[r[n-1],t]:[r[h-1],r[h]]},l.unknown=function(d){return arguments.length&&(s=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return eP().domain([e,t]).range(i).unknown(s)},tr.apply(Ui(l),arguments)}function tP(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Zl(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return tP().domain(e).range(t).unknown(n)},tr.apply(i,arguments)}const ym=new Date,xm=new Date;function dt(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const d=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return d;let h;do d.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<l);return d},i.filter=s=>dt(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(ym.setTime(+s),xm.setTime(+l),e(ym),e(xm),Math.floor(n(ym,xm))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const yd=dt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);yd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):yd);yd.range;const Vr=1e3,Wn=Vr*60,Kr=Wn*60,ni=Kr*24,x0=ni*7,lw=ni*30,bm=ni*365,da=dt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Vr)},(e,t)=>(t-e)/Vr,e=>e.getUTCSeconds());da.range;const b0=dt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vr)},(e,t)=>{e.setTime(+e+t*Wn)},(e,t)=>(t-e)/Wn,e=>e.getMinutes());b0.range;const _0=dt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Wn)},(e,t)=>(t-e)/Wn,e=>e.getUTCMinutes());_0.range;const w0=dt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vr-e.getMinutes()*Wn)},(e,t)=>{e.setTime(+e+t*Kr)},(e,t)=>(t-e)/Kr,e=>e.getHours());w0.range;const j0=dt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Kr)},(e,t)=>(t-e)/Kr,e=>e.getUTCHours());j0.range;const Kl=dt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Wn)/ni,e=>e.getDate()-1);Kl.range;const Of=dt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ni,e=>e.getUTCDate()-1);Of.range;const nP=dt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ni,e=>Math.floor(e/ni));nP.range;function Ia(e){return dt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Wn)/x0)}const Af=Ia(0),xd=Ia(1),z6=Ia(2),$6=Ia(3),zs=Ia(4),B6=Ia(5),F6=Ia(6);Af.range;xd.range;z6.range;$6.range;zs.range;B6.range;F6.range;function Ra(e){return dt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/x0)}const Tf=Ra(0),bd=Ra(1),U6=Ra(2),H6=Ra(3),$s=Ra(4),Z6=Ra(5),W6=Ra(6);Tf.range;bd.range;U6.range;H6.range;$s.range;Z6.range;W6.range;const N0=dt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());N0.range;const S0=dt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());S0.range;const ri=dt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ri.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ri.range;const ii=dt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ii.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ii.range;function rP(e,t,n,r,i,s){const l=[[da,1,Vr],[da,5,5*Vr],[da,15,15*Vr],[da,30,30*Vr],[s,1,Wn],[s,5,5*Wn],[s,15,15*Wn],[s,30,30*Wn],[i,1,Kr],[i,3,3*Kr],[i,6,6*Kr],[i,12,12*Kr],[r,1,ni],[r,2,2*ni],[n,1,x0],[t,1,lw],[t,3,3*lw],[e,1,bm]];function u(h,f,m){const g=f<h;g&&([h,f]=[f,h]);const v=m&&typeof m.range=="function"?m:d(h,f,m),N=v?v.range(h,+f+1):[];return g?N.reverse():N}function d(h,f,m){const g=Math.abs(f-h)/m,v=s0(([,,S])=>S).right(l,g);if(v===l.length)return e.every(rg(h/bm,f/bm,m));if(v===0)return yd.every(Math.max(rg(h,f,m),1));const[N,w]=l[g/l[v-1][2]<l[v][2]/g?v-1:v];return N.every(w)}return[u,d]}const[V6,K6]=rP(ii,S0,Tf,nP,j0,_0),[q6,G6]=rP(ri,N0,Af,Kl,w0,b0);function _m(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function To(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Y6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,h=Mo(i),f=Lo(i),m=Mo(s),g=Lo(s),v=Mo(l),N=Lo(l),w=Mo(u),S=Lo(u),b=Mo(d),j=Lo(d),_={a:K,A:D,b:Q,B:G,c:null,d:mw,e:mw,f:xR,g:ER,G:AR,H:gR,I:vR,j:yR,L:iP,m:bR,M:_R,p:V,q:Y,Q:vw,s:yw,S:wR,u:jR,U:NR,V:SR,w:PR,W:kR,x:null,X:null,y:CR,Y:OR,Z:TR,"%":gw},k={a:H,A:J,b:re,B:le,c:null,d:pw,e:pw,f:IR,g:VR,G:qR,H:MR,I:LR,j:DR,L:sP,m:RR,M:zR,p:Ne,q:Qt,Q:vw,s:yw,S:$R,u:BR,U:FR,V:UR,w:HR,W:ZR,x:null,X:null,y:WR,Y:KR,Z:GR,"%":gw},C={a:I,A:M,b:$,B:F,c:E,d:fw,e:fw,f:fR,g:dw,G:uw,H:hw,I:hw,j:lR,L:dR,m:oR,M:cR,p:B,q:sR,Q:mR,s:pR,S:uR,u:tR,U:nR,V:rR,w:eR,W:iR,x:Z,X:z,y:dw,Y:uw,Z:aR,"%":hR};_.x=A(n,_),_.X=A(r,_),_.c=A(t,_),k.x=A(n,k),k.X=A(r,k),k.c=A(t,k);function A(ie,ge){return function(me){var te=[],tt=-1,xe=0,Tt=ie.length,Mt,nr,Vi;for(me instanceof Date||(me=new Date(+me));++tt<Tt;)ie.charCodeAt(tt)===37&&(te.push(ie.slice(xe,tt)),(nr=cw[Mt=ie.charAt(++tt)])!=null?Mt=ie.charAt(++tt):nr=Mt==="e"?" ":"0",(Vi=ge[Mt])&&(Mt=Vi(me,nr)),te.push(Mt),xe=tt+1);return te.push(ie.slice(xe,tt)),te.join("")}}function T(ie,ge){return function(me){var te=To(1900,void 0,1),tt=R(te,ie,me+="",0),xe,Tt;if(tt!=me.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(ge&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(xe=wm(To(te.y,0,1)),Tt=xe.getUTCDay(),xe=Tt>4||Tt===0?bd.ceil(xe):bd(xe),xe=Of.offset(xe,(te.V-1)*7),te.y=xe.getUTCFullYear(),te.m=xe.getUTCMonth(),te.d=xe.getUTCDate()+(te.w+6)%7):(xe=_m(To(te.y,0,1)),Tt=xe.getDay(),xe=Tt>4||Tt===0?xd.ceil(xe):xd(xe),xe=Kl.offset(xe,(te.V-1)*7),te.y=xe.getFullYear(),te.m=xe.getMonth(),te.d=xe.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Tt="Z"in te?wm(To(te.y,0,1)).getUTCDay():_m(To(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Tt+5)%7:te.w+te.U*7-(Tt+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,wm(te)):_m(te)}}function R(ie,ge,me,te){for(var tt=0,xe=ge.length,Tt=me.length,Mt,nr;tt<xe;){if(te>=Tt)return-1;if(Mt=ge.charCodeAt(tt++),Mt===37){if(Mt=ge.charAt(tt++),nr=C[Mt in cw?ge.charAt(tt++):Mt],!nr||(te=nr(ie,me,te))<0)return-1}else if(Mt!=me.charCodeAt(te++))return-1}return te}function B(ie,ge,me){var te=h.exec(ge.slice(me));return te?(ie.p=f.get(te[0].toLowerCase()),me+te[0].length):-1}function I(ie,ge,me){var te=v.exec(ge.slice(me));return te?(ie.w=N.get(te[0].toLowerCase()),me+te[0].length):-1}function M(ie,ge,me){var te=m.exec(ge.slice(me));return te?(ie.w=g.get(te[0].toLowerCase()),me+te[0].length):-1}function $(ie,ge,me){var te=b.exec(ge.slice(me));return te?(ie.m=j.get(te[0].toLowerCase()),me+te[0].length):-1}function F(ie,ge,me){var te=w.exec(ge.slice(me));return te?(ie.m=S.get(te[0].toLowerCase()),me+te[0].length):-1}function E(ie,ge,me){return R(ie,t,ge,me)}function Z(ie,ge,me){return R(ie,n,ge,me)}function z(ie,ge,me){return R(ie,r,ge,me)}function K(ie){return l[ie.getDay()]}function D(ie){return s[ie.getDay()]}function Q(ie){return d[ie.getMonth()]}function G(ie){return u[ie.getMonth()]}function V(ie){return i[+(ie.getHours()>=12)]}function Y(ie){return 1+~~(ie.getMonth()/3)}function H(ie){return l[ie.getUTCDay()]}function J(ie){return s[ie.getUTCDay()]}function re(ie){return d[ie.getUTCMonth()]}function le(ie){return u[ie.getUTCMonth()]}function Ne(ie){return i[+(ie.getUTCHours()>=12)]}function Qt(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var ge=A(ie+="",_);return ge.toString=function(){return ie},ge},parse:function(ie){var ge=T(ie+="",!1);return ge.toString=function(){return ie},ge},utcFormat:function(ie){var ge=A(ie+="",k);return ge.toString=function(){return ie},ge},utcParse:function(ie){var ge=T(ie+="",!0);return ge.toString=function(){return ie},ge}}}var cw={"-":"",_:" ",0:"0"},xt=/^\s*\d+/,X6=/^%/,Q6=/[\\^$*+?|[\]().{}]/g;function Ee(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function J6(e){return e.replace(Q6,"\\$&")}function Mo(e){return new RegExp("^(?:"+e.map(J6).join("|")+")","i")}function Lo(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function eR(e,t,n){var r=xt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function tR(e,t,n){var r=xt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function nR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function rR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function iR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function uw(e,t,n){var r=xt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function dw(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function aR(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function sR(e,t,n){var r=xt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function oR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function fw(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function lR(e,t,n){var r=xt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function hw(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function cR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function uR(e,t,n){var r=xt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function dR(e,t,n){var r=xt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function fR(e,t,n){var r=xt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function hR(e,t,n){var r=X6.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function mR(e,t,n){var r=xt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function pR(e,t,n){var r=xt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function mw(e,t){return Ee(e.getDate(),t,2)}function gR(e,t){return Ee(e.getHours(),t,2)}function vR(e,t){return Ee(e.getHours()%12||12,t,2)}function yR(e,t){return Ee(1+Kl.count(ri(e),e),t,3)}function iP(e,t){return Ee(e.getMilliseconds(),t,3)}function xR(e,t){return iP(e,t)+"000"}function bR(e,t){return Ee(e.getMonth()+1,t,2)}function _R(e,t){return Ee(e.getMinutes(),t,2)}function wR(e,t){return Ee(e.getSeconds(),t,2)}function jR(e){var t=e.getDay();return t===0?7:t}function NR(e,t){return Ee(Af.count(ri(e)-1,e),t,2)}function aP(e){var t=e.getDay();return t>=4||t===0?zs(e):zs.ceil(e)}function SR(e,t){return e=aP(e),Ee(zs.count(ri(e),e)+(ri(e).getDay()===4),t,2)}function PR(e){return e.getDay()}function kR(e,t){return Ee(xd.count(ri(e)-1,e),t,2)}function CR(e,t){return Ee(e.getFullYear()%100,t,2)}function ER(e,t){return e=aP(e),Ee(e.getFullYear()%100,t,2)}function OR(e,t){return Ee(e.getFullYear()%1e4,t,4)}function AR(e,t){var n=e.getDay();return e=n>=4||n===0?zs(e):zs.ceil(e),Ee(e.getFullYear()%1e4,t,4)}function TR(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ee(t/60|0,"0",2)+Ee(t%60,"0",2)}function pw(e,t){return Ee(e.getUTCDate(),t,2)}function MR(e,t){return Ee(e.getUTCHours(),t,2)}function LR(e,t){return Ee(e.getUTCHours()%12||12,t,2)}function DR(e,t){return Ee(1+Of.count(ii(e),e),t,3)}function sP(e,t){return Ee(e.getUTCMilliseconds(),t,3)}function IR(e,t){return sP(e,t)+"000"}function RR(e,t){return Ee(e.getUTCMonth()+1,t,2)}function zR(e,t){return Ee(e.getUTCMinutes(),t,2)}function $R(e,t){return Ee(e.getUTCSeconds(),t,2)}function BR(e){var t=e.getUTCDay();return t===0?7:t}function FR(e,t){return Ee(Tf.count(ii(e)-1,e),t,2)}function oP(e){var t=e.getUTCDay();return t>=4||t===0?$s(e):$s.ceil(e)}function UR(e,t){return e=oP(e),Ee($s.count(ii(e),e)+(ii(e).getUTCDay()===4),t,2)}function HR(e){return e.getUTCDay()}function ZR(e,t){return Ee(bd.count(ii(e)-1,e),t,2)}function WR(e,t){return Ee(e.getUTCFullYear()%100,t,2)}function VR(e,t){return e=oP(e),Ee(e.getUTCFullYear()%100,t,2)}function KR(e,t){return Ee(e.getUTCFullYear()%1e4,t,4)}function qR(e,t){var n=e.getUTCDay();return e=n>=4||n===0?$s(e):$s.ceil(e),Ee(e.getUTCFullYear()%1e4,t,4)}function GR(){return"+0000"}function gw(){return"%"}function vw(e){return+e}function yw(e){return Math.floor(+e/1e3)}var Ga,lP,cP;YR({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function YR(e){return Ga=Y6(e),lP=Ga.format,Ga.parse,cP=Ga.utcFormat,Ga.utcParse,Ga}function XR(e){return new Date(e)}function QR(e){return e instanceof Date?+e:+new Date(+e)}function P0(e,t,n,r,i,s,l,u,d,h){var f=f0(),m=f.invert,g=f.domain,v=h(".%L"),N=h(":%S"),w=h("%I:%M"),S=h("%I %p"),b=h("%a %d"),j=h("%b %d"),_=h("%B"),k=h("%Y");function C(A){return(d(A)<A?v:u(A)<A?N:l(A)<A?w:s(A)<A?S:r(A)<A?i(A)<A?b:j:n(A)<A?_:k)(A)}return f.invert=function(A){return new Date(m(A))},f.domain=function(A){return arguments.length?g(Array.from(A,QR)):g().map(XR)},f.ticks=function(A){var T=g();return e(T[0],T[T.length-1],A??10)},f.tickFormat=function(A,T){return T==null?C:h(T)},f.nice=function(A){var T=g();return(!A||typeof A.range!="function")&&(A=t(T[0],T[T.length-1],A??10)),A?g(GS(T,A)):f},f.copy=function(){return Vl(f,P0(e,t,n,r,i,s,l,u,d,h))},f}function JR(){return tr.apply(P0(q6,G6,ri,N0,Af,Kl,w0,b0,da,lP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function e8(){return tr.apply(P0(V6,K6,ii,S0,Tf,Of,j0,_0,da,cP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mf(){var e=0,t=1,n,r,i,s,l=Kt,u=!1,d;function h(m){return m==null||isNaN(m=+m)?d:l(i===0?.5:(m=(s(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t]=m,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),h):[e,t]},h.clamp=function(m){return arguments.length?(u=!!m,h):u},h.interpolator=function(m){return arguments.length?(l=m,h):l};function f(m){return function(g){var v,N;return arguments.length?([v,N]=g,l=m(v,N),h):[l(0),l(1)]}}return h.range=f(Xs),h.rangeRound=f(d0),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return s=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),h}}function Hi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uP(){var e=Ui(Mf()(Kt));return e.copy=function(){return Hi(e,uP())},li.apply(e,arguments)}function dP(){var e=p0(Mf()).domain([1,10]);return e.copy=function(){return Hi(e,dP()).base(e.base())},li.apply(e,arguments)}function fP(){var e=g0(Mf());return e.copy=function(){return Hi(e,fP()).constant(e.constant())},li.apply(e,arguments)}function k0(){var e=v0(Mf());return e.copy=function(){return Hi(e,k0()).exponent(e.exponent())},li.apply(e,arguments)}function t8(){return k0.apply(null,arguments).exponent(.5)}function hP(){var e=[],t=Kt;function n(r){if(r!=null&&!isNaN(r=+r))return t((Zl(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Li),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>B5(e,s/r))},n.copy=function(){return hP(t).domain(e)},li.apply(n,arguments)}function Lf(){var e=0,t=.5,n=1,r=1,i,s,l,u,d,h=Kt,f,m=!1,g;function v(w){return isNaN(w=+w)?g:(w=.5+((w=+f(w))-s)*(r*w<r*s?u:d),h(m?Math.max(0,Math.min(1,w)):w))}v.domain=function(w){return arguments.length?([e,t,n]=w,i=f(e=+e),s=f(t=+t),l=f(n=+n),u=i===s?0:.5/(s-i),d=s===l?0:.5/(l-s),r=s<i?-1:1,v):[e,t,n]},v.clamp=function(w){return arguments.length?(m=!!w,v):m},v.interpolator=function(w){return arguments.length?(h=w,v):h};function N(w){return function(S){var b,j,_;return arguments.length?([b,j,_]=S,h=h6(w,[b,j,_]),v):[h(0),h(.5),h(1)]}}return v.range=N(Xs),v.rangeRound=N(d0),v.unknown=function(w){return arguments.length?(g=w,v):g},function(w){return f=w,i=w(e),s=w(t),l=w(n),u=i===s?0:.5/(s-i),d=s===l?0:.5/(l-s),r=s<i?-1:1,v}}function mP(){var e=Ui(Lf()(Kt));return e.copy=function(){return Hi(e,mP())},li.apply(e,arguments)}function pP(){var e=p0(Lf()).domain([.1,1,10]);return e.copy=function(){return Hi(e,pP()).base(e.base())},li.apply(e,arguments)}function gP(){var e=g0(Lf());return e.copy=function(){return Hi(e,gP()).constant(e.constant())},li.apply(e,arguments)}function C0(){var e=v0(Lf());return e.copy=function(){return Hi(e,C0()).exponent(e.exponent())},li.apply(e,arguments)}function n8(){return C0.apply(null,arguments).exponent(.5)}const Ho=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:l0,scaleDiverging:mP,scaleDivergingLog:pP,scaleDivergingPow:C0,scaleDivergingSqrt:n8,scaleDivergingSymlog:gP,scaleIdentity:qS,scaleImplicit:ig,scaleLinear:KS,scaleLog:YS,scaleOrdinal:o0,scalePoint:H5,scalePow:y0,scaleQuantile:JS,scaleQuantize:eP,scaleRadial:QS,scaleSequential:uP,scaleSequentialLog:dP,scaleSequentialPow:k0,scaleSequentialQuantile:hP,scaleSequentialSqrt:t8,scaleSequentialSymlog:fP,scaleSqrt:I6,scaleSymlog:XS,scaleThreshold:tP,scaleTime:JR,scaleUtc:e8,tickFormat:VS},Symbol.toStringTag,{value:"Module"}));var Zi=e=>e.chartData,r8=X([Zi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),E0=(e,t,n,r)=>r?r8(e):Zi(e);function Bs(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Pn(t)&&Pn(n))return!0}return!1}function xw(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function i8(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(Pn(n))i=n;else if(typeof n=="function")return;if(Pn(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(Bs(l))return l}}function a8(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Bs(r))return xw(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(de(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&h_.test(i)){var d=h_.exec(i);if(d==null||t==null)l=void 0;else{var h=+d[1];l=t[0]-h}}else l=t==null?void 0:t[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(de(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&m_.test(s)){var f=m_.exec(s);if(f==null||t==null)u=void 0;else{var m=+f[1];u=t[1]+m}}else u=t==null?void 0:t[1];var g=[l,u];if(Bs(g))return t==null?g:xw(g,t,n)}}}var Qs=1e9,s8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},A0,We=!0,Xn="[DecimalError] ",ba=Xn+"Invalid argument: ",O0=Xn+"Exponent out of range: ",Js=Math.floor,ra=Math.pow,o8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yn,mt=1e7,Fe=7,vP=9007199254740991,_d=Js(vP/Fe),oe={};oe.absoluteValue=oe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};oe.comparedTo=oe.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};oe.decimalPlaces=oe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Fe;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};oe.dividedBy=oe.div=function(e){return Yr(this,new this.constructor(e))};oe.dividedToIntegerBy=oe.idiv=function(e){var t=this,n=t.constructor;return Le(Yr(t,new n(e),0,1),n.precision)};oe.equals=oe.eq=function(e){return!this.cmp(e)};oe.exponent=function(){return at(this)};oe.greaterThan=oe.gt=function(e){return this.cmp(e)>0};oe.greaterThanOrEqualTo=oe.gte=function(e){return this.cmp(e)>=0};oe.isInteger=oe.isint=function(){return this.e>this.d.length-2};oe.isNegative=oe.isneg=function(){return this.s<0};oe.isPositive=oe.ispos=function(){return this.s>0};oe.isZero=function(){return this.s===0};oe.lessThan=oe.lt=function(e){return this.cmp(e)<0};oe.lessThanOrEqualTo=oe.lte=function(e){return this.cmp(e)<1};oe.logarithm=oe.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(yn))throw Error(Xn+"NaN");if(n.s<1)throw Error(Xn+(n.s?"NaN":"-Infinity"));return n.eq(yn)?new r(0):(We=!1,t=Yr(Cl(n,s),Cl(e,s),s),We=!0,Le(t,i))};oe.minus=oe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?bP(t,e):yP(t,(e.s=-e.s,e))};oe.modulo=oe.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Xn+"NaN");return n.s?(We=!1,t=Yr(n,e,0,1).times(e),We=!0,n.minus(t)):Le(new r(n),i)};oe.naturalExponential=oe.exp=function(){return xP(this)};oe.naturalLogarithm=oe.ln=function(){return Cl(this)};oe.negated=oe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};oe.plus=oe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?yP(t,e):bP(t,(e.s=-e.s,e))};oe.precision=oe.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ba+e);if(t=at(i)+1,r=i.d.length-1,n=r*Fe+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};oe.squareRoot=oe.sqrt=function(){var e,t,n,r,i,s,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Xn+"NaN")}for(e=at(u),We=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=kr(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Js((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new d(t)):r=new d(i.toString()),n=d.precision,i=l=n+3;;)if(s=r,r=s.plus(Yr(u,s,l+2)).times(.5),kr(s.d).slice(0,l)===(t=kr(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(Le(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return We=!0,Le(r,n)};oe.times=oe.mul=function(e){var t,n,r,i,s,l,u,d,h,f=this,m=f.constructor,g=f.d,v=(e=new m(e)).d;if(!f.s||!e.s)return new m(0);for(e.s*=f.s,n=f.e+e.e,d=g.length,h=v.length,d<h&&(s=g,g=v,v=s,l=d,d=h,h=l),s=[],l=d+h,r=l;r--;)s.push(0);for(r=h;--r>=0;){for(t=0,i=d+r;i>r;)u=s[i]+v[r]*g[i-r-1]+t,s[i--]=u%mt|0,t=u/mt|0;s[i]=(s[i]+t)%mt|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,We?Le(e,m.precision):e};oe.toDecimalPlaces=oe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Tr(e,0,Qs),t===void 0?t=r.rounding:Tr(t,0,8),Le(n,e+at(n)+1,t))};oe.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Oa(r,!0):(Tr(e,0,Qs),t===void 0?t=i.rounding:Tr(t,0,8),r=Le(new i(r),e+1,t),n=Oa(r,!0,e+1)),n};oe.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?Oa(i):(Tr(e,0,Qs),t===void 0?t=s.rounding:Tr(t,0,8),r=Le(new s(i),e+at(i)+1,t),n=Oa(r.abs(),!1,e+at(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};oe.toInteger=oe.toint=function(){var e=this,t=e.constructor;return Le(new t(e),at(e)+1,t.rounding)};oe.toNumber=function(){return+this};oe.toPower=oe.pow=function(e){var t,n,r,i,s,l,u=this,d=u.constructor,h=12,f=+(e=new d(e));if(!e.s)return new d(yn);if(u=new d(u),!u.s){if(e.s<1)throw Error(Xn+"Infinity");return u}if(u.eq(yn))return u;if(r=d.precision,e.eq(yn))return Le(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=f<0?-f:f)<=vP){for(i=new d(yn),t=Math.ceil(r/Fe+4),We=!1;n%2&&(i=i.times(u),_w(i.d,t)),n=Js(n/2),n!==0;)u=u.times(u),_w(u.d,t);return We=!0,e.s<0?new d(yn).div(i):Le(i,r)}}else if(s<0)throw Error(Xn+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,We=!1,i=e.times(Cl(u,r+h)),We=!0,i=xP(i),i.s=s,i};oe.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=at(i),r=Oa(i,n<=s.toExpNeg||n>=s.toExpPos)):(Tr(e,1,Qs),t===void 0?t=s.rounding:Tr(t,0,8),i=Le(new s(i),e,t),n=at(i),r=Oa(i,e<=n||n<=s.toExpNeg,e)),r};oe.toSignificantDigits=oe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Tr(e,1,Qs),t===void 0?t=r.rounding:Tr(t,0,8)),Le(new r(n),e,t)};oe.toString=oe.valueOf=oe.val=oe.toJSON=oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=at(e),n=e.constructor;return Oa(e,t<=n.toExpNeg||t>=n.toExpPos)};function yP(e,t){var n,r,i,s,l,u,d,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),We?Le(t,m):t;if(d=e.d,h=t.d,l=e.e,i=t.e,d=d.slice(),s=l-i,s){for(s<0?(r=d,s=-s,u=h.length):(r=h,i=l,u=d.length),l=Math.ceil(m/Fe),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=d.length,s=h.length,u-s<0&&(s=u,r=h,h=d,d=r),n=0;s;)n=(d[--s]=d[s]+h[s]+n)/mt|0,d[s]%=mt;for(n&&(d.unshift(n),++i),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=i,We?Le(t,m):t}function Tr(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ba+e)}function kr(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=Fe-r.length,n&&(s+=vi(n)),s+=r;l=e[t],r=l+"",n=Fe-r.length,n&&(s+=vi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var Yr=function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%mt|0,l=s/mt|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,d;if(s!=l)d=s>l?1:-1;else for(u=d=0;u<s;u++)if(r[u]!=i[u]){d=r[u]>i[u]?1:-1;break}return d}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*mt+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,d,h,f,m,g,v,N,w,S,b,j,_,k,C,A,T,R,B=r.constructor,I=r.s==i.s?1:-1,M=r.d,$=i.d;if(!r.s)return new B(r);if(!i.s)throw Error(Xn+"Division by zero");for(d=r.e-i.e,T=$.length,C=M.length,v=new B(I),N=v.d=[],h=0;$[h]==(M[h]||0);)++h;if($[h]>(M[h]||0)&&--d,s==null?j=s=B.precision:l?j=s+(at(r)-at(i))+1:j=s,j<0)return new B(0);if(j=j/Fe+2|0,h=0,T==1)for(f=0,$=$[0],j++;(h<C||f)&&j--;h++)_=f*mt+(M[h]||0),N[h]=_/$|0,f=_%$|0;else{for(f=mt/($[0]+1)|0,f>1&&($=e($,f),M=e(M,f),T=$.length,C=M.length),k=T,w=M.slice(0,T),S=w.length;S<T;)w[S++]=0;R=$.slice(),R.unshift(0),A=$[0],$[1]>=mt/2&&++A;do f=0,u=t($,w,T,S),u<0?(b=w[0],T!=S&&(b=b*mt+(w[1]||0)),f=b/A|0,f>1?(f>=mt&&(f=mt-1),m=e($,f),g=m.length,S=w.length,u=t(m,w,g,S),u==1&&(f--,n(m,T<g?R:$,g))):(f==0&&(u=f=1),m=$.slice()),g=m.length,g<S&&m.unshift(0),n(w,m,S),u==-1&&(S=w.length,u=t($,w,T,S),u<1&&(f++,n(w,T<S?R:$,S))),S=w.length):u===0&&(f++,w=[0]),N[h++]=f,u&&w[0]?w[S++]=M[k]||0:(w=[M[k]],S=1);while((k++<C||w[0]!==void 0)&&j--)}return N[0]||N.shift(),v.e=d,Le(v,l?s+at(v)+1:s)}}();function xP(e,t){var n,r,i,s,l,u,d=0,h=0,f=e.constructor,m=f.precision;if(at(e)>16)throw Error(O0+at(e));if(!e.s)return new f(yn);for(t==null?(We=!1,u=m):u=t,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(r=Math.log(ra(2,h))/Math.LN10*2+5|0,u+=r,n=i=s=new f(yn),f.precision=u;;){if(i=Le(i.times(e),u),n=n.times(++d),l=s.plus(Yr(i,n,u)),kr(l.d).slice(0,u)===kr(s.d).slice(0,u)){for(;h--;)s=Le(s.times(s),u);return f.precision=m,t==null?(We=!0,Le(s,m)):s}s=l}}function at(e){for(var t=e.e*Fe,n=e.d[0];n>=10;n/=10)t++;return t}function jm(e,t,n){if(t>e.LN10.sd())throw We=!0,n&&(e.precision=n),Error(Xn+"LN10 precision limit exceeded");return Le(new e(e.LN10),t)}function vi(e){for(var t="";e--;)t+="0";return t}function Cl(e,t){var n,r,i,s,l,u,d,h,f,m=1,g=10,v=e,N=v.d,w=v.constructor,S=w.precision;if(v.s<1)throw Error(Xn+(v.s?"NaN":"-Infinity"));if(v.eq(yn))return new w(0);if(t==null?(We=!1,h=S):h=t,v.eq(10))return t==null&&(We=!0),jm(w,h);if(h+=g,w.precision=h,n=kr(N),r=n.charAt(0),s=at(v),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(e),n=kr(v.d),r=n.charAt(0),m++;s=at(v),r>1?(v=new w("0."+n),s++):v=new w(r+"."+n.slice(1))}else return d=jm(w,h+2,S).times(s+""),v=Cl(new w(r+"."+n.slice(1)),h-g).plus(d),w.precision=S,t==null?(We=!0,Le(v,S)):v;for(u=l=v=Yr(v.minus(yn),v.plus(yn),h),f=Le(v.times(v),h),i=3;;){if(l=Le(l.times(f),h),d=u.plus(Yr(l,new w(i),h)),kr(d.d).slice(0,h)===kr(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus(jm(w,h+2,S).times(s+""))),u=Yr(u,new w(m),h),w.precision=S,t==null?(We=!0,Le(u,S)):u;u=d,i+=2}}function bw(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Js(n/Fe),e.d=[],r=(n+1)%Fe,n<0&&(r+=Fe),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Fe;r<i;)e.d.push(+t.slice(r,r+=Fe));t=t.slice(r),r=Fe-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),We&&(e.e>_d||e.e<-_d))throw Error(O0+n)}else e.s=0,e.e=0,e.d=[0];return e}function Le(e,t,n){var r,i,s,l,u,d,h,f,m=e.d;for(l=1,s=m[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=Fe,i=t,h=m[f=0];else{if(f=Math.ceil((r+1)/Fe),s=m.length,f>=s)return e;for(h=s=m[f],l=1;s>=10;s/=10)l++;r%=Fe,i=r-Fe+l}if(n!==void 0&&(s=ra(10,l-i-1),u=h/s%10|0,d=t<0||m[f+1]!==void 0||h%s,d=n<4?(u||d)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||d||n==6&&(r>0?i>0?h/ra(10,l-i):0:m[f-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return d?(s=at(e),m.length=1,t=t-s-1,m[0]=ra(10,(Fe-t%Fe)%Fe),e.e=Js(-t/Fe)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=f,s=1,f--):(m.length=f+1,s=ra(10,Fe-r),m[f]=i>0?(h/ra(10,l-i)%ra(10,i)|0)*s:0),d)for(;;)if(f==0){(m[0]+=s)==mt&&(m[0]=1,++e.e);break}else{if(m[f]+=s,m[f]!=mt)break;m[f--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(We&&(e.e>_d||e.e<-_d))throw Error(O0+at(e));return e}function bP(e,t){var n,r,i,s,l,u,d,h,f,m,g=e.constructor,v=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),We?Le(t,v):t;if(d=e.d,m=t.d,r=t.e,h=e.e,d=d.slice(),l=h-r,l){for(f=l<0,f?(n=d,l=-l,u=m.length):(n=m,r=h,u=d.length),i=Math.max(Math.ceil(v/Fe),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=d.length,u=m.length,f=i<u,f&&(u=i),i=0;i<u;i++)if(d[i]!=m[i]){f=d[i]<m[i];break}l=0}for(f&&(n=d,d=m,m=n,t.s=-t.s),u=d.length,i=m.length-u;i>0;--i)d[u++]=0;for(i=m.length;i>l;){if(d[--i]<m[i]){for(s=i;s&&d[--s]===0;)d[s]=mt-1;--d[s],d[i]+=mt}d[i]-=m[i]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(t.d=d,t.e=r,We?Le(t,v):t):new g(0)}function Oa(e,t,n){var r,i=at(e),s=kr(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+vi(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+vi(-i-1)+s,n&&(r=n-l)>0&&(s+=vi(r))):i>=l?(s+=vi(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+vi(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=vi(r))),e.s<0?"-"+s:s}function _w(e,t){if(e.length>t)return e.length=t,!0}function _P(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ba+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return bw(l,s.toString())}else if(typeof s!="string")throw Error(ba+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,o8.test(s))bw(l,s);else throw Error(ba+s)}if(i.prototype=oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=_P,i.config=i.set=l8,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function l8(e){if(!e||typeof e!="object")throw Error(Xn+"Object expected");var t,n,r,i=["precision",1,Qs,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Js(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(ba+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ba+n+": "+r);return this}var A0=_P(s8);yn=new A0(1);const Oe=A0;var c8=e=>e,wP={"@@functional/placeholder":!0},jP=e=>e===wP,ww=e=>function t(){return arguments.length===0||arguments.length===1&&jP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},NP=(e,t)=>e===1?t:ww(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==wP).length;return s>=e?t(...r):NP(e-s,ww(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var h=r.map(f=>jP(f)?u.shift():f);return t(...h,...u)}))}),Df=e=>NP(e.length,e),lg=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},u8=Df((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),d8=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return c8;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,d)=>d(u),s(...arguments))}},cg=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),SP=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=i,n=e(...i)),n}};function PP(e){var t;return e===0?t=1:t=Math.floor(new Oe(e).abs().log(10).toNumber())+1,t}function kP(e,t,n){for(var r=new Oe(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}Df((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Df((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Df((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var CP=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},EP=(e,t,n)=>{if(e.lte(0))return new Oe(0);var r=PP(e.toNumber()),i=new Oe(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new Oe(Math.ceil(s.div(l).toNumber())).add(n).mul(l),d=u.mul(i);return t?new Oe(d.toNumber()):new Oe(Math.ceil(d.toNumber()))},f8=(e,t,n)=>{var r=new Oe(1),i=new Oe(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new Oe(10).pow(PP(e)-1),i=new Oe(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Oe(Math.floor(e)))}else e===0?i=new Oe(Math.floor((t-1)/2)):n||(i=new Oe(Math.floor(e)));var l=Math.floor((t-1)/2),u=d8(u8(d=>i.add(new Oe(d-l).mul(r)).toNumber()),lg);return u(0,t)},OP=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new Oe(0),tickMin:new Oe(0),tickMax:new Oe(0)};var l=EP(new Oe(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new Oe(0):(u=new Oe(t).add(n).div(2),u=u.sub(new Oe(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),h=Math.ceil(new Oe(n).sub(u).div(l).toNumber()),f=d+h+1;return f>r?OP(t,n,r,i,s+1):(f<r&&(h=n>0?h+(r-f):h,d=n>0?d:d+(r-f)),{step:l,tickMin:u.sub(new Oe(d).mul(l)),tickMax:u.add(new Oe(h).mul(l))})};function h8(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=CP([t,n]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...lg(0,r-1).map(()=>1/0)]:[...lg(0,r-1).map(()=>-1/0),u];return t>n?cg(d):d}if(l===u)return f8(l,r,i);var{step:h,tickMin:f,tickMax:m}=OP(l,u,s,i,0),g=kP(f,m.add(new Oe(.1).mul(h)),h);return t>n?cg(g):g}function m8(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=CP([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),d=EP(new Oe(l).sub(s).div(u-1),i,0),h=[...kP(new Oe(s),new Oe(l),d),l];return i===!1&&(h=h.map(f=>Math.round(f))),n>r?cg(h):h}var p8=SP(h8),g8=SP(m8),AP=e=>e.rootProps.maxBarSize,v8=e=>e.rootProps.barGap,TP=e=>e.rootProps.barCategoryGap,y8=e=>e.rootProps.barSize,If=e=>e.rootProps.stackOffset,T0=e=>e.options.chartName,M0=e=>e.rootProps.syncId,MP=e=>e.rootProps.syncMethod,L0=e=>e.options.eventEmitter,Fr={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},vn={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},Rf=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},x8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Fr.angleAxisId,includeHidden:!1,name:void 0,reversed:Fr.reversed,scale:Fr.scale,tick:Fr.tick,tickCount:void 0,ticks:void 0,type:Fr.type,unit:void 0},b8={allowDataOverflow:vn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:vn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:vn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:vn.scale,tick:vn.tick,tickCount:vn.tickCount,ticks:void 0,type:vn.type,unit:void 0},_8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Fr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fr.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fr.scale,tick:Fr.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},w8={allowDataOverflow:vn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:vn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:vn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:vn.scale,tick:vn.tick,tickCount:vn.tickCount,ticks:void 0,type:"category",unit:void 0},D0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?_8:x8,I0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?w8:b8,zf=e=>e.polarOptions,R0=X([si,oi,yt],yD),LP=X([zf,R0],(e,t)=>{if(e!=null)return vr(e.innerRadius,t,0)}),DP=X([zf,R0],(e,t)=>{if(e!=null)return vr(e.outerRadius,t,t*.8)}),j8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},IP=X([zf],j8);X([D0,IP],Rf);var RP=X([R0,LP,DP],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});X([I0,RP],Rf);var zP=X([Te,zf,LP,DP,si,oi],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:d,endAngle:h}=t;return{cx:vr(l,i,i/2),cy:vr(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:d,endAngle:h,clockWise:!1}}}),ot=(e,t)=>t,$f=(e,t,n)=>n;function z0(e){return e==null?void 0:e.id}var ft=e=>{var t=Te(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},eo=e=>e.tooltip.settings.axisId,bt=e=>{var t=ft(e),n=eo(e);return ql(e,t,n)},$P=X([bt],e=>e==null?void 0:e.dataKey);function BP(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var d,h=(d=u.data)!==null&&d!==void 0?d:r;if(!(h==null||h.length===0)){var f=z0(u);h.forEach((m,g)=>{var v=s==null||i?g:String(Gt(m,s,null)),N=Gt(m,u.dataKey,0),w;l.has(v)?w=l.get(v):w={},Object.assign(w,{[f]:N}),l.set(v,w)})}}),Array.from(l.values())}function Bf(e){return e.stackId!=null&&e.dataKey!=null}function jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jw(Object(n),!0).forEach(function(r){N8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N8(e,t,n){return(t=S8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S8(e){var t=P8(e,"string");return typeof t=="symbol"?t:t+""}function P8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ug=[0,"auto"],hn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},FP=(e,t)=>e.cartesianAxis.xAxis[t],ci=(e,t)=>{var n=FP(e,t);return n??hn},mn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ug,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Hl},UP=(e,t)=>e.cartesianAxis.yAxis[t],ui=(e,t)=>{var n=UP(e,t);return n??mn},k8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},$0=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??k8},fn=(e,t,n)=>{switch(t){case"xAxis":return ci(e,n);case"yAxis":return ui(e,n);case"zAxis":return $0(e,n);case"angleAxis":return D0(e,n);case"radiusAxis":return I0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},C8=(e,t,n)=>{switch(t){case"xAxis":return ci(e,n);case"yAxis":return ui(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ql=(e,t,n)=>{switch(t){case"xAxis":return ci(e,n);case"yAxis":return ui(e,n);case"angleAxis":return D0(e,n);case"radiusAxis":return I0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},HP=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function ZP(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var B0=e=>e.graphicalItems.cartesianItems,E8=X([ot,$f],ZP),WP=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),Gl=X([B0,fn,E8],WP),VP=X([Gl],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Bf)),KP=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),qP=X([Gl],KP),GP=e=>e.map(t=>t.data).filter(Boolean).flat(1),O8=X([Gl],GP),YP=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},F0=X([O8,E0],YP),XP=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Gt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Gt(i,r)}))):e.map(r=>({value:r})),Ff=X([F0,fn,Gl],XP);function QP(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function za(e){return e.filter(t=>Ar(t)||t instanceof Date).map(Number).filter(t=>Nn(t)===!1)}function A8(e,t,n){return!n||typeof t!="number"||Nn(t)?[]:n.length?za(n.flatMap(r=>{var i=Gt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!Pn(s)||!Pn(l)))return[t-s,t+l]})):[]}var T8=X([VP,E0,bt],BP),JP=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,d=u.map(z0);return[l,{stackedData:LD(e,d,n),graphicalItems:u}]}))},dg=X([T8,VP,If],JP),ek=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=$D(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},M8=X([dg,Zi,ot],ek),tk=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,d,h=(u=r[l.id])===null||u===void 0?void 0:u.filter(m=>QP(i,m)),f=Gt(s,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey);return{value:f,errorDomain:A8(s,f,h)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Gt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),Uf=e=>e.errorBars,nk=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>QP(n,r));X([qP,Uf,ot],nk);var L8=X([F0,fn,qP,Uf,ot],tk);function D8(e){var{value:t}=e;if(Ar(t)||t instanceof Date)return t}var Nw=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=za(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},I8=(e,t,n)=>{var r=e.map(D8).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&XN(r))?IS(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},U0=e=>{var t;if(e==null||!("domain"in e))return ug;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=za(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ug},jd=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},rk=e=>e.referenceElements.dots,to=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),R8=X([rk,ot,$f],to),ik=e=>e.referenceElements.areas,z8=X([ik,ot,$f],to),ak=e=>e.referenceElements.lines,$8=X([ak,ot,$f],to),sk=(e,t)=>{var n=za(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},B8=X(R8,ot,sk),ok=(e,t)=>{var n=za(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},F8=X([z8,ot],ok),lk=(e,t)=>{var n=za(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},U8=X($8,ot,lk),H8=X(B8,U8,F8,(e,t,n)=>jd(e,n,t)),Z8=X([fn],U0),ck=(e,t,n,r,i,s,l)=>{var u=i8(t,e.allowDataOverflow);if(u!=null)return u;var d=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",h=d?jd(n,i,Nw(r)):jd(i,Nw(r));return a8(t,h,e.allowDataOverflow)},W8=X([fn,Z8,M8,L8,H8,Te,ot],ck),V8=[0,1],uk=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,h=Da(t,s);return h&&u==null?IS(0,n.length):d==="category"?I8(r,e,h):i==="expand"?V8:l}},H0=X([fn,Te,F0,Ff,If,ot,W8],uk),dk=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Bl(s));return u in Ho?u:"point"}}},Yl=X([fn,Te,HP,T0,ot],dk);function K8(e){if(e!=null){if(e in Ho)return Ho[e]();var t="scale".concat(Bl(e));if(t in Ho)return Ho[t]()}}function Z0(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=K8(t);if(i!=null){var s=i.domain(n).range(r);return ED(s),s}}}var fk=(e,t,n)=>{var r=U0(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Bs(e))return p8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Bs(e))return g8(e,t.tickCount,t.allowDecimals)}},W0=X([H0,ql,Yl],fk),hk=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Bs(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},q8=X([fn,H0,W0,ot],hk),G8=X(Ff,fn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(za(e.map(u=>u.value))).sort((u,d)=>u-d);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),mk=X(G8,Te,TP,yt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Pn(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=vr(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),Y8=(e,t)=>{var n=ci(e,t);return n==null||typeof n.padding!="string"?0:mk(e,"xAxis",t,n.padding)},X8=(e,t)=>{var n=ui(e,t);return n==null||typeof n.padding!="string"?0:mk(e,"yAxis",t,n.padding)},Q8=X(ci,Y8,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),J8=X(ui,X8,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),ez=X([yt,Q8,kf,Pf,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),tz=X([yt,Te,J8,kf,Pf,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Xl=(e,t,n,r)=>{var i;switch(t){case"xAxis":return ez(e,n,r);case"yAxis":return tz(e,n,r);case"zAxis":return(i=$0(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return IP(e);case"radiusAxis":return RP(e,n);default:return}},pk=X([fn,Xl],Rf),no=X([fn,Yl,q8,pk],Z0);X([Gl,Uf,ot],nk);function gk(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Hf=(e,t)=>t,Zf=(e,t,n)=>n,nz=X(Nf,Hf,Zf,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(gk)),rz=X(Sf,Hf,Zf,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(gk)),vk=(e,t)=>({width:e.width,height:t.height}),iz=(e,t)=>{var n=typeof t.width=="number"?t.width:Hl;return{width:n,height:e.height}},yk=X(yt,ci,vk),az=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},sz=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},oz=X(oi,yt,nz,Hf,Zf,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var d=vk(t,u);l==null&&(l=az(t,r,e));var h=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(h)*d.height,l+=(h?-1:1)*d.height}),s}),lz=X(si,yt,rz,Hf,Zf,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var d=iz(t,u);l==null&&(l=sz(t,r,e));var h=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(h)*d.width,l+=(h?-1:1)*d.width}),s}),cz=(e,t)=>{var n=ci(e,t);if(n!=null)return oz(e,n.orientation,n.mirror)},uz=X([yt,ci,cz,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),dz=(e,t)=>{var n=ui(e,t);if(n!=null)return lz(e,n.orientation,n.mirror)},fz=X([yt,ui,dz,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),xk=X(yt,ui,(e,t)=>{var n=typeof t.width=="number"?t.width:Hl;return{width:n,height:e.height}}),Sw=(e,t,n)=>{switch(t){case"xAxis":return yk(e,n).width;case"yAxis":return xk(e,n).height;default:return}},bk=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=Da(e,r),d=t.map(h=>h.value);if(l&&u&&s==="category"&&i&&XN(d))return d}},V0=X([Te,Ff,fn,ot],bk),_k=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Da(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},K0=X([Te,Ff,ql,ot],_k),Pw=X([Te,C8,Yl,no,V0,K0,Xl,W0,ot],(e,t,n,r,i,s,l,u,d)=>{if(t==null)return null;var h=Da(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:l,realScaleType:n,scale:r}}),hz=(e,t,n,r,i,s,l,u,d)=>{if(!(t==null||r==null)){var h=Da(e,d),{type:f,ticks:m,tickCount:g}=t,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,N=f==="category"&&r.bandwidth?r.bandwidth()/v:0;N=d==="angleAxis"&&s!=null&&s.length>=2?sn(s[0]-s[1])*2*N:N;var w=m||i;if(w){var S=w.map((b,j)=>{var _=l?l.indexOf(b):b;return{index:j,coordinate:r(_)+N,value:b,offset:N}});return S.filter(b=>!Nn(b.coordinate))}return h&&u?u.map((b,j)=>({coordinate:r(b)+N,value:b,index:j,offset:N})):r.ticks?r.ticks(g).map(b=>({coordinate:r(b)+N,value:b,offset:N})):r.domain().map((b,j)=>({coordinate:r(b)+N,value:l?l[b]:b,index:j,offset:N}))}},wk=X([Te,ql,Yl,no,W0,Xl,V0,K0,ot],hz),mz=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Da(e,l),{tickCount:d}=t,h=0;return h=l==="angleAxis"&&(r==null?void 0:r.length)>=2?sn(r[0]-r[1])*2*h:h,u&&s?s.map((f,m)=>({coordinate:n(f)+h,value:f,index:m,offset:h})):n.ticks?n.ticks(d).map(f=>({coordinate:n(f)+h,value:f,offset:h})):n.domain().map((f,m)=>({coordinate:n(f)+h,value:i?i[f]:f,index:m,offset:h}))}},Fs=X([Te,ql,no,Xl,V0,K0,ot],mz),Us=X(fn,no,(e,t)=>{if(!(e==null||t==null))return wd(wd({},e),{},{scale:t})}),pz=X([fn,Yl,H0,pk],Z0);X((e,t,n)=>$0(e,n),pz,(e,t)=>{if(!(e==null||t==null))return wd(wd({},e),{},{scale:t})});var gz=X([Te,Nf,Sf],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),jk=e=>e.options.defaultTooltipEventType,Nk=e=>e.options.validateTooltipEventTypes;function Sk(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function q0(e,t){var n=jk(e),r=Nk(e);return Sk(t,n,r)}function vz(e){return ue(t=>q0(t,e))}var Pk=(e,t)=>{var n,r=Number(t);if(!(Nn(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},yz=e=>e.tooltip.settings,wi={active:!1,index:null,dataKey:void 0,coordinate:void 0},xz={itemInteraction:{click:wi,hover:wi},axisInteraction:{click:wi,hover:wi},keyboardInteraction:wi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},kk=On({name:"tooltip",initialState:xz,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Gr(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:bz,removeTooltipEntrySettings:_z,setTooltipSettingsState:wz,setActiveMouseOverItemIndex:Ck,mouseLeaveItem:jz,mouseLeaveChart:Ek,setActiveClickItemIndex:Nz,setMouseOverAxisIndex:Ok,setMouseClickAxisIndex:Sz,setSyncInteraction:fg,setKeyboardInteraction:hg}=kk.actions,Pz=kk.reducer;function kw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kw(Object(n),!0).forEach(function(r){kz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kz(e,t,n){return(t=Cz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cz(e){var t=Ez(e,"string");return typeof t=="symbol"?t:t+""}function Ez(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oz(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Az(e){return e.index!=null}var Ak=(e,t,n,r)=>{if(t==null)return wi;var i=Oz(e,t,n);if(i==null)return wi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(Az(i)){if(s)return Qc(Qc({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Qc(Qc({},wi),{},{coordinate:i.coordinate})},G0=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!Pn(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},Tk=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var d=l[0],h=d==null?void 0:u(d.positions,s);if(h!=null)return h;var f=i==null?void 0:i[Number(s)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:f.coordinate}}}},Mk=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},Ql=e=>e.options.tooltipPayloadSearcher,ro=e=>e.tooltip;function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ew(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cw(Object(n),!0).forEach(function(r){Tz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tz(e,t,n){return(t=Mz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mz(e){var t=Lz(e,"string");return typeof t=="symbol"?t:t+""}function Lz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dz(e,t){return e??t}var Lk=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:d,dataStartIndex:h,dataEndIndex:f}=n,m=[];return e.reduce((g,v)=>{var N,{dataDefinedOnItem:w,settings:S}=v,b=Dz(w,u),j=Array.isArray(b)?vS(b,h,f):b,_=(N=S==null?void 0:S.dataKey)!==null&&N!==void 0?N:r,k=S==null?void 0:S.nameKey,C;if(r&&Array.isArray(j)&&!Array.isArray(j[0])&&l==="axis"?C=S3(j,r,i):C=s(j,t,d,k),Array.isArray(C))C.forEach(T=>{var R=Ew(Ew({},S),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});g.push(p_({tooltipEntrySettings:R,dataKey:T.dataKey,payload:T.payload,value:Gt(T.payload,T.dataKey),name:T.name}))});else{var A;g.push(p_({tooltipEntrySettings:S,dataKey:_,payload:C,value:Gt(C,_),name:(A=Gt(C,k))!==null&&A!==void 0?A:S==null?void 0:S.name}))}return g},m)}},Y0=X([bt,Te,HP,T0,ft],dk),Iz=X([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Rz=X([ft,eo],ZP),Jl=X([Iz,bt,Rz],WP),zz=X([Jl],e=>e.filter(Bf)),$z=X([Jl],GP),io=X([$z,Zi],YP),Bz=X([zz,Zi,bt],BP),X0=X([io,bt,Jl],XP),Fz=X([bt],U0),Uz=X([Jl],e=>e.filter(Bf)),Hz=X([Bz,Uz,If],JP),Zz=X([Hz,Zi,ft],ek),Wz=X([Jl],KP),Vz=X([io,bt,Wz,Uf,ft],tk),Kz=X([rk,ft,eo],to),qz=X([Kz,ft],sk),Gz=X([ik,ft,eo],to),Yz=X([Gz,ft],ok),Xz=X([ak,ft,eo],to),Qz=X([Xz,ft],lk),Jz=X([qz,Qz,Yz],jd),e7=X([bt,Fz,Zz,Vz,Jz,Te,ft],ck),Dk=X([bt,Te,io,X0,If,ft,e7],uk),t7=X([Dk,bt,Y0],fk),n7=X([bt,Dk,t7,ft],hk),Ik=e=>{var t=ft(e),n=eo(e),r=!1;return Xl(e,t,n,r)},Rk=X([bt,Ik],Rf),zk=X([bt,Y0,n7,Rk],Z0),r7=X([Te,X0,bt,ft],bk),i7=X([Te,X0,bt,ft],_k),a7=(e,t,n,r,i,s,l,u)=>{if(t){var{type:d}=t,h=Da(e,u);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=d==="category"&&r.bandwidth?r.bandwidth()/f:0;return m=u==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?sn(i[0]-i[1])*2*m:m,h&&l?l.map((g,v)=>({coordinate:r(g)+m,value:g,index:v,offset:m})):r.domain().map((g,v)=>({coordinate:r(g)+m,value:s?s[g]:g,index:v,offset:m}))}}},di=X([Te,bt,Y0,zk,Ik,r7,i7,ft],a7),Q0=X([jk,Nk,yz],(e,t,n)=>Sk(n.shared,e,t)),$k=e=>e.tooltip.settings.trigger,J0=e=>e.tooltip.settings.defaultIndex,Wf=X([ro,Q0,$k,J0],Ak),Hs=X([Wf,io],G0),Bk=X([di,Hs],Pk),Fk=X([Wf],e=>{if(e)return e.dataKey}),Uk=X([ro,Q0,$k,J0],Mk),s7=X([si,oi,Te,yt,di,J0,Uk,Ql],Tk),o7=X([Wf,s7],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),l7=X([Wf],e=>e.active),c7=X([Uk,Hs,Zi,$P,Bk,Ql,Q0],Lk);X([c7],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function Ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Aw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ow(Object(n),!0).forEach(function(r){u7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ow(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u7(e,t,n){return(t=d7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d7(e){var t=f7(e,"string");return typeof t=="symbol"?t:t+""}function f7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h7=()=>ue(bt),m7=()=>{var e=h7(),t=ue(di),n=ue(zk);return Xv(Aw(Aw({},e),{},{scale:n}),t)},p7=()=>ue(T0),ey=(e,t)=>t,Hk=(e,t,n)=>n,ty=(e,t,n,r)=>r,g7=X(di,e=>yf(e,t=>t.coordinate)),ny=X([ro,ey,Hk,ty],Ak),Zk=X([ny,io],G0),v7=(e,t,n)=>{if(t!=null){var r=ro(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Wk=X([ro,ey,Hk,ty],Mk),Nd=X([si,oi,Te,yt,di,ty,Wk,Ql],Tk),y7=X([ny,Nd],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),Vk=X(di,Zk,Pk),x7=X([Wk,Zk,Zi,$P,Vk,Ql,ey],Lk),b7=X([ny],e=>({isActive:e.active,activeIndex:e.index})),_7=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var d=BD(e.chartX,e.chartY,t,n,u);if(d){var h=UD(d,t),f=kD(h,l,s,r,i),m=FD(t,s,f,d);return{activeIndex:String(f),activeCoordinate:m}}}};function mg(){return mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mg.apply(null,arguments)}function Tw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tw(Object(n),!0).forEach(function(r){w7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w7(e,t,n){return(t=j7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j7(e){var t=N7(e,"string");return typeof t=="symbol"?t:t+""}function N7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S7(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:d,chartName:h}=e,f=t,m=n,g=r;if(!u||!f||h!=="ScatterChart"&&d!=="axis")return null;var v,N;if(h==="ScatterChart")v=f,N=KI;else if(h==="BarChart")v=qI(l,f,i,s),N=ES;else if(l==="radial"){var{cx:w,cy:S,radius:b,startAngle:j,endAngle:_}=OS(f);v={cx:w,cy:S,startAngle:j,endAngle:_,innerRadius:b,outerRadius:b},N=TS}else v={points:k5(l,f,i)},N=zI;var k=typeof u=="object"&&"className"in u?u.className:void 0,C=Jc(Jc(Jc(Jc({stroke:"#ccc",pointerEvents:"none"},i),v),At(u,!1)),{},{payload:m,payloadIndex:g,className:$e("recharts-tooltip-cursor",k)});return x.isValidElement(u)?x.cloneElement(u,C):x.createElement(N,C)}function P7(e){var t=m7(),n=wS(),r=n0(),i=p7();return x.createElement(S7,mg({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var Kk=x.createContext(null),k7=()=>x.useContext(Kk),qk={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(d,h,f){this.fn=d,this.context=h,this.once=f||!1}function s(d,h,f,m,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,m||d,g),N=n?n+h:h;return d._events[N]?d._events[N].fn?d._events[N]=[d._events[N],v]:d._events[N].push(v):(d._events[N]=v,d._eventsCount++),d}function l(d,h){--d._eventsCount===0?d._events=new r:delete d._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],f,m;if(this._eventsCount===0)return h;for(m in f=this._events)t.call(f,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},u.prototype.listeners=function(h){var f=n?n+h:h,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,v=m.length,N=new Array(v);g<v;g++)N[g]=m[g].fn;return N},u.prototype.listenerCount=function(h){var f=n?n+h:h,m=this._events[f];return m?m.fn?1:m.length:0},u.prototype.emit=function(h,f,m,g,v,N){var w=n?n+h:h;if(!this._events[w])return!1;var S=this._events[w],b=arguments.length,j,_;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),b){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,m),!0;case 4:return S.fn.call(S.context,f,m,g),!0;case 5:return S.fn.call(S.context,f,m,g,v),!0;case 6:return S.fn.call(S.context,f,m,g,v,N),!0}for(_=1,j=new Array(b-1);_<b;_++)j[_-1]=arguments[_];S.fn.apply(S.context,j)}else{var k=S.length,C;for(_=0;_<k;_++)switch(S[_].once&&this.removeListener(h,S[_].fn,void 0,!0),b){case 1:S[_].fn.call(S[_].context);break;case 2:S[_].fn.call(S[_].context,f);break;case 3:S[_].fn.call(S[_].context,f,m);break;case 4:S[_].fn.call(S[_].context,f,m,g);break;default:if(!j)for(C=1,j=new Array(b-1);C<b;C++)j[C-1]=arguments[C];S[_].fn.apply(S[_].context,j)}}return!0},u.prototype.on=function(h,f,m){return s(this,h,f,m,!1)},u.prototype.once=function(h,f,m){return s(this,h,f,m,!0)},u.prototype.removeListener=function(h,f,m,g){var v=n?n+h:h;if(!this._events[v])return this;if(!f)return l(this,v),this;var N=this._events[v];if(N.fn)N.fn===f&&(!g||N.once)&&(!m||N.context===m)&&l(this,v);else{for(var w=0,S=[],b=N.length;w<b;w++)(N[w].fn!==f||g&&!N[w].once||m&&N[w].context!==m)&&S.push(N[w]);S.length?this._events[v]=S.length===1?S[0]:S:l(this,v)}return this},u.prototype.removeAllListeners=function(h){var f;return h?(f=n?n+h:h,this._events[f]&&l(this,f)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(qk);var C7=qk.exports;const E7=Mr(C7);var El=new E7,pg="recharts.syncEvent.tooltip",Mw="recharts.syncEvent.brush";function O7(e,t){if(t){var n=Number.parseInt(t,10);if(!Nn(n))return e==null?void 0:e[n]}}var A7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Gk=On({name:"options",initialState:A7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),T7=Gk.reducer,{createEventEmitter:M7}=Gk.actions;function L7(e){return e.tooltip.syncInteraction}var D7={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Yk=On({name:"chartData",initialState:D7,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:Lw,setDataStartEndIndexes:I7,setComputedData:DZ}=Yk.actions,R7=Yk.reducer,z7=["x","y"];function Dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dw(Object(n),!0).forEach(function(r){$7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $7(e,t,n){return(t=B7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B7(e){var t=F7(e,"string");return typeof t=="symbol"?t:t+""}function F7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U7(e,t){if(e==null)return{};var n,r,i=H7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function H7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Xk=()=>{};function Z7(){var e=ue(M0),t=ue(L0),n=st(),r=ue(MP),i=ue(di),s=n0(),l=Jv(),u=ue(d=>d.rootProps.className);x.useEffect(()=>{if(e==null)return Xk;var d=(h,f,m)=>{if(t!==m&&e===h){if(r==="index"){var g;if(l&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate){var v=f.payload.coordinate,{x:N,y:w}=v,S=U7(v,z7),b=Qi(Qi(Qi({},S),typeof N=="number"&&{x:Math.max(l.x,Math.min(N,l.x+l.width))}),typeof w=="number"&&{y:Math.max(l.y,Math.min(w,l.y+l.height))}),j=Qi(Qi({},f),{},{payload:Qi(Qi({},f.payload),{},{coordinate:b})});n(j)}else n(f);return}if(i!=null){var _;if(typeof r=="function"){var k={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},C=r(i,k);_=i[C]}else r==="value"&&(_=i.find(F=>String(F.value)===f.payload.label));var{coordinate:A}=f.payload;if(_==null||f.payload.active===!1||A==null||l==null){n(fg({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:T,y:R}=A,B=Math.min(T,l.x+l.width),I=Math.min(R,l.y+l.height),M={x:s==="horizontal"?_.coordinate:B,y:s==="horizontal"?I:_.coordinate},$=fg({active:f.payload.active,coordinate:M,dataKey:f.payload.dataKey,index:String(_.index),label:f.payload.label});n($)}}};return El.on(pg,d),()=>{El.off(pg,d)}},[u,n,t,e,r,i,s,l])}function W7(){var e=ue(M0),t=ue(L0),n=st();x.useEffect(()=>{if(e==null)return Xk;var r=(i,s,l)=>{t!==l&&e===i&&n(I7(s))};return El.on(Mw,r),()=>{El.off(Mw,r)}},[n,t,e])}function V7(){var e=st();x.useEffect(()=>{e(M7())},[e]),Z7(),W7()}function K7(e,t,n,r,i,s){var l=ue(g=>v7(g,e,t)),u=ue(L0),d=ue(M0),h=ue(MP),f=ue(L7),m=f==null?void 0:f.active;x.useEffect(()=>{if(!m&&d!=null&&u!=null){var g=fg({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});El.emit(pg,d,g,u)}},[m,n,l,i,r,u,d,h,s])}function Iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Iw(Object(n),!0).forEach(function(r){q7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q7(e,t,n){return(t=G7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G7(e){var t=Y7(e,"string");return typeof t=="symbol"?t:t+""}function Y7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X7(e){return e.dataKey}function Q7(e,t){return x.isValidElement(e)?x.cloneElement(e,t):typeof e=="function"?x.createElement(e,t):x.createElement(NI,t)}var zw=[],J7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ys.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function e$(e){var t=er(e,J7),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:f,position:m,reverseDirection:g,useTranslate3d:v,wrapperStyle:N,cursor:w,shared:S,trigger:b,defaultIndex:j,portal:_,axisId:k}=t,C=st(),A=typeof j=="number"?String(j):j;x.useEffect(()=>{C(wz({shared:S,trigger:b,axisId:k,active:n,defaultIndex:A}))},[C,S,b,k,n,A]);var T=Jv(),R=NS(),B=vz(S),{activeIndex:I,isActive:M}=ue(re=>b7(re,B,b,A)),$=ue(re=>x7(re,B,b,A)),F=ue(re=>Vk(re,B,b,A)),E=ue(re=>y7(re,B,b,A)),Z=$,z=k7(),K=n??M,[D,Q]=V2([Z,K]),G=B==="axis"?F:void 0;K7(B,b,E,G,I,K);var V=_??z;if(V==null)return null;var Y=Z??zw;K||(Y=zw),u&&Y.length&&(Y=L2(Z.filter(re=>re.value!=null&&(re.hide!==!0||t.includeHidden)),f,X7));var H=Y.length>0,J=x.createElement(AI,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:d,active:K,coordinate:E,hasPayload:H,offset:h,position:m,reverseDirection:g,useTranslate3d:v,viewBox:T,wrapperStyle:N,lastBoundingBox:D,innerRef:Q,hasPortalFromProps:!!_},Q7(l,Rw(Rw({},t),{},{payload:Y,label:G,active:K,coordinate:E,accessibilityLayer:R})));return x.createElement(x.Fragment,null,Xd.createPortal(J,V),K&&x.createElement(P7,{cursor:w,tooltipEventType:B,coordinate:E,payload:Z,index:I}))}var Qk={},Jk={},eC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const d=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),f=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},m=()=>{h&&f(),w()};let g=null;const v=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,m()},r)},N=()=>{g!==null&&(clearTimeout(g),g=null)},w=()=>{N(),l=void 0,u=null},S=()=>{f()},b=function(...j){if(i!=null&&i.aborted)return;l=this,u=j;const _=g==null;v(),d&&_&&f()};return b.schedule=v,b.cancel=w,b.flush=S,i==null||i.addEventListener("abort",w,{once:!0}),b}e.debounce=t})(eC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eC;function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:d}=s,h=Array(2);l&&(h[0]="leading"),u&&(h[1]="trailing");let f,m=null;const g=t.debounce(function(...w){f=r.apply(this,w),m=null},i,{edges:h}),v=function(...w){return d!=null&&(m===null&&(m=Date.now()),Date.now()-m>=d)?(f=r.apply(this,w),m=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,w),f)},N=()=>(g.flush(),f);return v.cancel=g.cancel,v.flush=N,v}e.debounce=n})(Jk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jk;function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(Qk);var t$=Qk.throttle;const n$=Mr(t$);var Jo=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function $w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$w(Object(n),!0).forEach(function(r){r$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$w(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r$(e,t,n){return(t=i$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i$(e){var t=a$(e,"string");return typeof t=="symbol"?t:t+""}function a$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s$=x.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:d,children:h,debounce:f=0,id:m,className:g,onResize:v,style:N={}}=e,w=x.useRef(null),S=x.useRef();S.current=v,x.useImperativeHandle(t,()=>w.current);var[b,j]=x.useState({containerWidth:r.width,containerHeight:r.height}),_=x.useCallback((C,A)=>{j(T=>{var R=Math.round(C),B=Math.round(A);return T.containerWidth===R&&T.containerHeight===B?T:{containerWidth:R,containerHeight:B}})},[]);x.useEffect(()=>{var C=B=>{var I,{width:M,height:$}=B[0].contentRect;_(M,$),(I=S.current)===null||I===void 0||I.call(S,M,$)};f>0&&(C=n$(C,f,{trailing:!0,leading:!1}));var A=new ResizeObserver(C),{width:T,height:R}=w.current.getBoundingClientRect();return _(T,R),A.observe(w.current),()=>{A.disconnect()}},[_,f]);var k=x.useMemo(()=>{var{containerWidth:C,containerHeight:A}=b;if(C<0||A<0)return null;Jo(ca(i)||ca(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Jo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var T=ca(i)?C:i,R=ca(s)?A:s;return n&&n>0&&(T?R=T/n:R&&(T=R*n),d&&R>d&&(R=d)),Jo(T>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,R,i,s,l,u,n),x.Children.map(h,B=>x.cloneElement(B,{width:T,height:R,style:Nm({width:T,height:R},B.props.style)}))},[n,h,s,d,u,l,b,i]);return x.createElement("div",{id:m?"".concat(m):void 0,className:$e("recharts-responsive-container",g),style:Nm(Nm({},N),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:d}),ref:w},x.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),tC=e=>null;tC.displayName="Cell";function o$(e,t,n){return(t=l$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l$(e){var t=c$(e,"string");return typeof t=="symbol"?t:t+""}function c$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class u${constructor(t){o$(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function d$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bw(Object(n),!0).forEach(function(r){f$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f$(e,t,n){return(t=h$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h$(e){var t=m$(e,"string");return typeof t=="symbol"?t:t+""}function m$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p$={cacheSize:2e3,enableCache:!0},nC=d$({},p$),Fw=new u$(nC.cacheSize),g$={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Uw="recharts_measurement_span";function v$(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var Hw=(e,t)=>{try{var n=document.getElementById(Uw);n||(n=document.createElement("span"),n.setAttribute("id",Uw),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,g$,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},el=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ys.isSsr)return{width:0,height:0};if(!nC.enableCache)return Hw(t,n);var r=v$(t,n),i=Fw.get(r);if(i)return i;var s=Hw(t,n);return Fw.set(r,s),s},Zw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ww=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,y$=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,x$=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,rC={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},b$=Object.keys(rC),us="NaN";function _$(e,t){return e*rC[t]}class en{static parse(t){var n,[,r,i]=(n=x$.exec(t))!==null&&n!==void 0?n:[];return new en(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Nn(t)&&(this.unit=""),n!==""&&!y$.test(n)&&(this.num=NaN,this.unit=""),b$.includes(n)&&(this.num=_$(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new en(NaN,""):new en(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new en(NaN,""):new en(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new en(NaN,""):new en(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new en(NaN,""):new en(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Nn(this.num)}}function iC(e){if(e.includes(us))return us;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=Zw.exec(t))!==null&&n!==void 0?n:[],l=en.parse(r??""),u=en.parse(s??""),d=i==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return us;t=t.replace(Zw,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,f,m,g]=(h=Ww.exec(t))!==null&&h!==void 0?h:[],v=en.parse(f??""),N=en.parse(g??""),w=m==="+"?v.add(N):v.subtract(N);if(w.isNaN())return us;t=t.replace(Ww,w.toString())}return t}var Vw=/\(([^()]*)\)/;function w$(e){for(var t=e,n;(n=Vw.exec(t))!=null;){var[,r]=n;t=t.replace(Vw,iC(r))}return t}function j$(e){var t=e.replace(/\s+/g,"");return t=w$(t),t=iC(t),t}function N$(e){try{return j$(e)}catch{return us}}function Sm(e){var t=N$(e.slice(5,-1));return t===us?"":t}var S$=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],P$=["dx","dy","angle","className","breakAll"];function gg(){return gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gg.apply(null,arguments)}function Kw(e,t){if(e==null)return{};var n,r,i=k$(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function k$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var aC=/[ \f\n\r\t\v\u2028\u2029]+/,sC=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];vt(t)||(n?i=t.toString().split(""):i=t.toString().split(aC));var s=i.map(u=>({word:u,width:el(u,r).width})),l=n?0:el("",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},C$=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:d}=e,h=de(s),f=l,m=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce(($,F)=>{var{word:E,width:Z}=F,z=$[$.length-1];if(z&&(r==null||i||z.width+Z+n<Number(r)))z.words.push(E),z.width+=Z+n;else{var K={words:[E],width:Z};$.push(K)}return $},[])},g=m(t),v=I=>I.reduce((M,$)=>M.width>$.width?M:$);if(!h||i)return g;var N=g.length>s||v(g).width>Number(r);if(!N)return g;for(var w="",S=I=>{var M=f.slice(0,I),$=sC({breakAll:d,style:u,children:M+w}).wordsWithComputedWidth,F=m($),E=F.length>s||v(F).width>Number(r);return[E,F]},b=0,j=f.length-1,_=0,k;b<=j&&_<=f.length-1;){var C=Math.floor((b+j)/2),A=C-1,[T,R]=S(A),[B]=S(C);if(!T&&!B&&(b=C+1),T&&B&&(j=C-1),!T&&B){k=R;break}_++}return k||g},qw=e=>{var t=vt(e)?[]:e.toString().split(aC);return[{words:t}]},E$=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!Ys.isSsr){var u,d,h=sC({breakAll:s,children:r,style:i});if(h){var{wordsWithComputedWidth:f,spaceWidth:m}=h;u=f,d=m}else return qw(r);return C$({breakAll:s,children:r,maxLines:l,style:i},u,d,t,n)}return qw(r)},Gw="#808080",ry=x.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:d="end",fill:h=Gw}=e,f=Kw(e,S$),m=x.useMemo(()=>E$({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:g,dy:v,angle:N,className:w,breakAll:S}=f,b=Kw(f,P$);if(!Ar(n)||!Ar(r)||m.length===0)return null;var j=n+(de(g)?g:0),_=r+(de(v)?v:0),k;switch(d){case"start":k=Sm("calc(".concat(s,")"));break;case"middle":k=Sm("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:k=Sm("calc(".concat(m.length-1," * -").concat(i,")"));break}var C=[];if(l){var A=m[0].width,{width:T}=f;C.push("scale(".concat(de(T)?T/A:1,")"))}return N&&C.push("rotate(".concat(N,", ").concat(j,", ").concat(_,")")),C.length&&(b.transform=C.join(" ")),x.createElement("text",gg({},At(b,!0),{ref:t,x:j,y:_,className:$e("recharts-text",w),textAnchor:u,fill:h.includes("url")?Gw:h}),m.map((R,B)=>{var I=R.words.join(S?"":" ");return x.createElement("tspan",{x:j,dy:B===0?k:i,key:"".concat(I,"-").concat(B)},I)}))});ry.displayName="Text";var O$=["labelRef"];function A$(e,t){if(e==null)return{};var n,r,i=T$(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function T$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yw(Object(n),!0).forEach(function(r){M$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M$(e,t,n){return(t=L$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L$(e){var t=D$(e,"string");return typeof t=="symbol"?t:t+""}function D$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ur(){return Ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ur.apply(null,arguments)}var oC=x.createContext(null),I$=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=x.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return x.createElement(oC.Provider,{value:l},s)},lC=()=>{var e=x.useContext(oC),t=Jv();return e||t},R$=x.createContext(null),z$=()=>{var e=x.useContext(R$),t=ue(zP);return e||t},$$=e=>{var{value:t,formatter:n}=e,r=vt(e.children)?t:e.children;return typeof n=="function"?n(r):r},iy=e=>e!=null&&typeof e=="function",B$=(e,t)=>{var n=sn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},F$=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:d,innerRadius:h,outerRadius:f,startAngle:m,endAngle:g,clockWise:v}=i,N=(h+f)/2,w=B$(m,g),S=w>=0?1:-1,b,j;switch(t){case"insideStart":b=m+S*s,j=v;break;case"insideEnd":b=g-S*s,j=!v;break;case"end":b=g+S*s,j=v;break;default:throw new Error("Unsupported position ".concat(t))}j=w<=0?j:!j;var _=Pt(u,d,N,b),k=Pt(u,d,N,b+(j?1:-1)*359),C="M".concat(_.x,",").concat(_.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(j?0:1,`,
    `).concat(k.x,",").concat(k.y),A=vt(e.id)?bl("recharts-radial-line-"):e.id;return x.createElement("text",Ur({},r,{dominantBaseline:"central",className:$e("recharts-radial-bar-label",l)}),x.createElement("defs",null,x.createElement("path",{id:A,d:C})),x.createElement("textPath",{xlinkHref:"#".concat(A)},n))},U$=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:d}=e,h=(u+d)/2;if(n==="outside"){var{x:f,y:m}=Pt(r,i,l+t,h);return{x:f,y:m,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(s+l)/2,{x:v,y:N}=Pt(r,i,g,h);return{x:v,y:N,textAnchor:"middle",verticalAnchor:"middle"}},cC=e=>"cx"in e&&de(e.cx),H$=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!cC(n)&&(s=n);var{x:l,y:u,width:d,height:h}=t,f=h>=0?1:-1,m=f*r,g=f>0?"end":"start",v=f>0?"start":"end",N=d>=0?1:-1,w=N*r,S=N>0?"end":"start",b=N>0?"start":"end";if(i==="top"){var j={x:l+d/2,y:u-f*r,textAnchor:"middle",verticalAnchor:g};return Qe(Qe({},j),s?{height:Math.max(u-s.y,0),width:d}:{})}if(i==="bottom"){var _={x:l+d/2,y:u+h+m,textAnchor:"middle",verticalAnchor:v};return Qe(Qe({},_),s?{height:Math.max(s.y+s.height-(u+h),0),width:d}:{})}if(i==="left"){var k={x:l-w,y:u+h/2,textAnchor:S,verticalAnchor:"middle"};return Qe(Qe({},k),s?{width:Math.max(k.x-s.x,0),height:h}:{})}if(i==="right"){var C={x:l+d+w,y:u+h/2,textAnchor:b,verticalAnchor:"middle"};return Qe(Qe({},C),s?{width:Math.max(s.x+s.width-C.x,0),height:h}:{})}var A=s?{width:d,height:h}:{};return i==="insideLeft"?Qe({x:l+w,y:u+h/2,textAnchor:b,verticalAnchor:"middle"},A):i==="insideRight"?Qe({x:l+d-w,y:u+h/2,textAnchor:S,verticalAnchor:"middle"},A):i==="insideTop"?Qe({x:l+d/2,y:u+m,textAnchor:"middle",verticalAnchor:v},A):i==="insideBottom"?Qe({x:l+d/2,y:u+h-m,textAnchor:"middle",verticalAnchor:g},A):i==="insideTopLeft"?Qe({x:l+w,y:u+m,textAnchor:b,verticalAnchor:v},A):i==="insideTopRight"?Qe({x:l+d-w,y:u+m,textAnchor:S,verticalAnchor:v},A):i==="insideBottomLeft"?Qe({x:l+w,y:u+h-m,textAnchor:b,verticalAnchor:g},A):i==="insideBottomRight"?Qe({x:l+d-w,y:u+h-m,textAnchor:S,verticalAnchor:g},A):i&&typeof i=="object"&&(de(i.x)||ca(i.x))&&(de(i.y)||ca(i.y))?Qe({x:l+vr(i.x,d),y:u+vr(i.y,h),textAnchor:"end",verticalAnchor:"end"},A):Qe({x:l+d/2,y:u+h/2,textAnchor:"middle",verticalAnchor:"middle"},A)},Z$={offset:5};function yi(e){var t=er(e,Z$),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:d,labelRef:h}=t,f=z$(),m=lC(),g=r==="center"?m:f??m,v=n||g;if(!v||vt(i)&&vt(s)&&!x.isValidElement(l)&&typeof l!="function")return null;var N=Qe(Qe({},t),{},{viewBox:v});if(x.isValidElement(l)){var w=A$(N,O$);return x.cloneElement(l,w)}var S;if(typeof l=="function"){if(S=x.createElement(l,N),x.isValidElement(S))return S}else S=$$(t);var b=cC(v),j=At(t,!0);if(b&&(r==="insideStart"||r==="insideEnd"||r==="end"))return F$(t,r,S,j,v);var _=b?U$(v,t.offset,t.position):H$(t,v);return x.createElement(ry,Ur({ref:h,className:$e("recharts-label",u)},j,_,{breakAll:d}),S)}yi.displayName="Label";var W$=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?x.createElement(yi,Ur({key:"label-implicit"},r)):Ar(e)?x.createElement(yi,Ur({key:"label-implicit",value:e},r)):x.isValidElement(e)?e.type===yi?x.cloneElement(e,Qe({key:"label-implicit"},r)):x.createElement(yi,Ur({key:"label-implicit",content:e},r)):iy(e)?x.createElement(yi,Ur({key:"label-implicit",content:e},r)):e&&typeof e=="object"?x.createElement(yi,Ur({},e,{key:"label-implicit"},r)):null};function V$(e){var{label:t}=e,n=lC();return W$(t,n)||null}var uC={},dC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(dC);var fC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(fC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dC,n=fC,r=gf;function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(uC);var K$=uC.last;const q$=Mr(K$);var G$=["valueAccessor"],Y$=["dataKey","clockWise","id","textBreakAll"];function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sd.apply(null,arguments)}function Xw(e,t){if(e==null)return{};var n,r,i=X$(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function X$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Q$=e=>Array.isArray(e.value)?q$(e.value):e.value,hC=x.createContext(void 0),J$=hC.Provider,mC=x.createContext(void 0);mC.Provider;function eB(){return x.useContext(hC)}function tB(){return x.useContext(mC)}function vu(e){var{valueAccessor:t=Q$}=e,n=Xw(e,G$),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=Xw(n,Y$),d=eB(),h=tB(),f=d||h;return!f||!f.length?null:x.createElement(Ri,{className:"recharts-label-list"},f.map((m,g)=>{var v,N=vt(r)?t(m,g):Gt(m&&m.payload,r),w=vt(s)?{}:{id:"".concat(s,"-").concat(g)};return x.createElement(yi,Sd({},At(m,!0),u,w,{fill:(v=n.fill)!==null&&v!==void 0?v:m.fill,parentViewBox:m.parentViewBox,value:N,textBreakAll:l,viewBox:m.viewBox,key:"label-".concat(g),index:g}))}))}vu.displayName="LabelList";function nB(e){var{label:t}=e;return t?t===!0?x.createElement(vu,{key:"labelList-implicit"}):x.isValidElement(t)||iy(t)?x.createElement(vu,{key:"labelList-implicit",content:t}):typeof t=="object"?x.createElement(vu,Sd({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var rB={radiusAxis:{},angleAxis:{}},iB=On({name:"polarAxis",initialState:rB,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),aB=iB.reducer,pC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(pC);var sB=pC.isPlainObject;const oB=Mr(sB);function Qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qw(Object(n),!0).forEach(function(r){lB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lB(e,t,n){return(t=cB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cB(e){var t=uB(e,"string");return typeof t=="symbol"?t:t+""}function uB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pd(){return Pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pd.apply(null,arguments)}var e1=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},dB={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fB=e=>{var t=er(e,dB),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:d,animationDuration:h,animationBegin:f,isUpdateAnimationActive:m}=t,g=x.useRef(),[v,N]=x.useState(-1),w=x.useRef(i),S=x.useRef(s),b=x.useRef(l),j=x.useRef(n),_=x.useRef(r),k=a0(e,"trapezoid-");if(x.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var E=g.current.getTotalLength();E&&N(E)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var C=$e("recharts-trapezoid",u);if(!m)return x.createElement("g",null,x.createElement("path",Pd({},At(t,!0),{className:C,d:e1(n,r,i,s,l)})));var A=w.current,T=S.current,R=b.current,B=j.current,I=_.current,M="0px ".concat(v===-1?1:v,"px"),$="".concat(v,"px 0px"),F=SS(["strokeDasharray"],h,d);return x.createElement(i0,{animationId:k,key:k,canBegin:v>0,duration:h,easing:d,isActive:m,begin:f},E=>{var Z=Wt(A,i,E),z=Wt(T,s,E),K=Wt(R,l,E),D=Wt(B,n,E),Q=Wt(I,r,E);g.current&&(w.current=Z,S.current=z,b.current=K,j.current=D,_.current=Q);var G=E>0?{transition:F,strokeDasharray:$}:{strokeDasharray:M};return x.createElement("path",Pd({},At(t,!0),{className:C,d:e1(D,Q,Z,z,K),ref:g,style:Jw(Jw({},G),t.style)}))})},hB=["option","shapeType","propTransformer","activeClassName","isActive"];function mB(e,t){if(e==null)return{};var n,r,i=pB(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function pB(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function t1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t1(Object(n),!0).forEach(function(r){gB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gB(e,t,n){return(t=vB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vB(e){var t=yB(e,"string");return typeof t=="symbol"?t:t+""}function yB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xB(e,t){return kd(kd({},t),e)}function bB(e,t){return e==="symbols"}function n1(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return x.createElement(ES,n);case"trapezoid":return x.createElement(fB,n);case"sector":return x.createElement(TS,n);case"symbols":if(bB(t))return x.createElement(Av,n);break;default:return null}}function _B(e){return x.isValidElement(e)?e.props:e}function wB(e){var{option:t,shapeType:n,propTransformer:r=xB,activeClassName:i="recharts-active-shape",isActive:s}=e,l=mB(e,hB),u;if(x.isValidElement(t))u=x.cloneElement(t,kd(kd({},l),_B(t)));else if(typeof t=="function")u=t(l);else if(oB(t)&&typeof t!="boolean"){var d=r(t,l);u=x.createElement(n1,{shapeType:n,elementProps:d})}else{var h=l;u=x.createElement(n1,{shapeType:n,elementProps:h})}return s?x.createElement(Ri,{className:i},u):u}var gC=(e,t)=>{var n=st();return(r,i)=>s=>{e==null||e(r,i,s),n(Ck({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},vC=e=>{var t=st();return(n,r)=>i=>{e==null||e(n,r,i),t(jz())}},yC=(e,t)=>{var n=st();return(r,i)=>s=>{e==null||e(r,i,s),n(Nz({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function jB(e){var{fn:t,args:n}=e,r=st(),i=Jn();return x.useEffect(()=>{if(!i){var s=t(n);return r(bz(s)),()=>{r(_z(s))}}},[t,n,r,i]),null}var NB=()=>{};function SB(e){var{legendPayload:t}=e,n=st(),r=Jn();return x.useEffect(()=>r?NB:(n(sI(t)),()=>{n(oI(t))}),[n,r,t]),null}var Pm,PB=()=>{var[e]=x.useState(()=>bl("uid-"));return e},kB=(Pm=BO.useId)!==null&&Pm!==void 0?Pm:PB;function CB(e,t){var n=kB();return t||(e?"".concat(e,"-").concat(n):n)}var EB=x.createContext(void 0),OB=e=>{var{id:t,type:n,children:r}=e,i=CB("recharts-".concat(n),t);return x.createElement(EB.Provider,{value:i},r(i))},AB={cartesianItems:[],polarItems:[]},xC=On({name:"graphicalItems",initialState:AB,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Gr(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Gr(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Gr(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:TB,replaceCartesianGraphicalItem:MB,removeCartesianGraphicalItem:LB,addPolarGraphicalItem:IZ,removePolarGraphicalItem:RZ}=xC.actions,DB=xC.reducer;function IB(e){var t=st(),n=x.useRef(null);return x.useEffect(()=>{n.current===null?t(TB(e)):n.current!==e&&t(MB({prev:n.current,next:e})),n.current=e},[t,e]),x.useEffect(()=>()=>{n.current&&(t(LB(n.current)),n.current=null)},[t]),null}function r1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function i1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r1(Object(n),!0).forEach(function(r){RB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RB(e,t,n){return(t=zB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zB(e){var t=$B(e,"string");return typeof t=="symbol"?t:t+""}function $B(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BB={xAxis:{},yAxis:{},zAxis:{}},bC=On({name:"cartesianAxis",initialState:BB,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=i1(i1({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:FB,removeXAxis:UB,addYAxis:HB,removeYAxis:ZB,addZAxis:zZ,removeZAxis:$Z,updateYAxisWidth:WB}=bC.actions,VB=bC.reducer,KB=X([yt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),qB=X([KB,si,oi],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),_C=()=>ue(qB),GB="Invariant failed";function YB(e,t){throw new Error(GB)}var XB=["x","y"];function vg(){return vg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vg.apply(null,arguments)}function a1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a1(Object(n),!0).forEach(function(r){QB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QB(e,t,n){return(t=JB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JB(e){var t=eF(e,"string");return typeof t=="symbol"?t:t+""}function eF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tF(e,t){if(e==null)return{};var n,r,i=nF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function rF(e,t){var{x:n,y:r}=e,i=tF(e,XB),s="".concat(n),l=parseInt(s,10),u="".concat(r),d=parseInt(u,10),h="".concat(t.height||i.height),f=parseInt(h,10),m="".concat(t.width||i.width),g=parseInt(m,10);return Do(Do(Do(Do(Do({},t),i),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:g,name:t.name,radius:t.radius})}function ay(e){return x.createElement(wB,vg({shapeType:"rectangle",propTransformer:rF,activeClassName:"recharts-active-bar"},e))}var iF=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(de(t))return t;var s=de(r)||vt(r);return s?t(r,i):(s||YB(),n)}},aF={},sF=On({name:"errorBars",initialState:aF,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),oF=sF.reducer,lF=["children"];function cF(e,t){if(e==null)return{};var n,r,i=uF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var dF={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},fF=x.createContext(dF);function hF(e){var{children:t}=e,n=cF(e,lF);return x.createElement(fF.Provider,{value:n},t)}function wC(e,t){var n,r,i=ue(h=>ci(h,e)),s=ue(h=>ui(h,t)),l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:hn.allowDataOverflow,u=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:mn.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function mF(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=_C(),{needClipX:s,needClipY:l,needClip:u}=wC(t,n);if(!u)return null;var{x:d,y:h,width:f,height:m}=i;return x.createElement("clipPath",{id:"clipPath-".concat(r)},x.createElement("rect",{x:s?d:d-f/2,y:l?h:h-m/2,width:s?f:f*2,height:l?m:m*2}))}var pF=["onMouseEnter","onMouseLeave","onClick"],gF=["value","background","tooltipPosition"],vF=["id"],yF=["onMouseEnter","onClick","onMouseLeave"];function zi(){return zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zi.apply(null,arguments)}function s1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(n),!0).forEach(function(r){xF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xF(e,t,n){return(t=bF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bF(e){var t=_F(e,"string");return typeof t=="symbol"?t:t+""}function _F(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cd(e,t){if(e==null)return{};var n,r,i=wF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jF=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:bS(n,t),payload:e}]};function NF(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:bS(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function SF(e){var t=ue(Hs),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=s,h=Cd(s,pF),f=gC(l,r),m=vC(u),g=yC(d,r);if(!i||n==null)return null;var v=At(i,!1);return x.createElement(x.Fragment,null,n.map((N,w)=>{var{value:S,background:b,tooltipPosition:j}=N,_=Cd(N,gF);if(!b)return null;var k=f(N,w),C=m(N,w),A=g(N,w),T=Vt(Vt(Vt(Vt(Vt({option:i,isActive:String(w)===t},_),{},{fill:"#eee"},b),v),ff(h,N,w)),{},{onMouseEnter:k,onMouseLeave:C,onClick:A,dataKey:r,index:w,className:"recharts-bar-background-rectangle"});return x.createElement(ay,zi({key:"background-bar-".concat(T.index)},T))}))}function PF(e){var{showLabels:t,children:n,rects:r}=e,i=r==null?void 0:r.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Vt(Vt({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return x.createElement(J$,{value:t?i:void 0},n)}function kF(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=ue(Hs),d=ue(Fk),h=n&&String(s)===u&&(d==null||l===d),f=h?n:t;return x.createElement(ay,zi({},r,i,{isActive:h,option:f,index:s,dataKey:l}))}function CF(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return x.createElement(ay,zi({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function EF(e){var{data:t,props:n}=e,r=Gs(n),i=Cd(r,vF),{shape:s,dataKey:l,activeBar:u}=n,{onMouseEnter:d,onClick:h,onMouseLeave:f}=n,m=Cd(n,yF),g=gC(d,l),v=vC(f),N=yC(h,l);return t?x.createElement(x.Fragment,null,t.map((w,S)=>x.createElement(Ri,zi({className:"recharts-bar-rectangle"},ff(m,w,S),{onMouseEnter:g(w,S),onMouseLeave:v(w,S),onClick:N(w,S),key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(S)}),u?x.createElement(kF,{shape:s,activeBar:u,baseProps:i,entry:w,index:S,dataKey:l}):x.createElement(CF,{shape:s,baseProps:i,entry:w,index:S,dataKey:l})))):null}function OF(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:h,onAnimationStart:f}=t,m=n.current,g=a0(t,"recharts-bar-"),[v,N]=x.useState(!1),w=!v,S=x.useCallback(()=>{typeof h=="function"&&h(),N(!1)},[h]),b=x.useCallback(()=>{typeof f=="function"&&f(),N(!0)},[f]);return x.createElement(PF,{showLabels:w,rects:r},x.createElement(i0,{animationId:g,begin:l,duration:u,isActive:s,easing:d,onAnimationEnd:S,onAnimationStart:b,key:g},j=>{var _=j===1?r:r==null?void 0:r.map((k,C)=>{var A=m&&m[C];if(A)return Vt(Vt({},k),{},{x:Wt(A.x,k.x,j),y:Wt(A.y,k.y,j),width:Wt(A.width,k.width,j),height:Wt(A.height,k.height,j)});if(i==="horizontal"){var T=Wt(0,k.height,j);return Vt(Vt({},k),{},{y:k.y+k.height-T,height:T})}var R=Wt(0,k.width,j);return Vt(Vt({},k),{},{width:R})});return j>0&&(n.current=_??null),_==null?null:x.createElement(Ri,null,x.createElement(EF,{props:t,data:_}))}),x.createElement(nB,{label:t.label}),t.children)}function AF(e){var t=x.useRef(null);return x.createElement(OF,{previousRectanglesRef:t,props:e})}var jC=0,TF=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Gt(e,t)}};class MF extends x.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:d,id:h}=this.props;if(t||n==null)return null;var f=$e("recharts-bar",i),m=h;return x.createElement(Ri,{className:f,id:h},u&&x.createElement("defs",null,x.createElement(mF,{clipPathId:m,xAxisId:s,yAxisId:l})),x.createElement(Ri,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},x.createElement(SF,{data:n,dataKey:r,background:d,allOtherBarProps:this.props}),x.createElement(AF,this.props)))}}var LF={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ys.isSsr,legendType:"rect",minPointSize:jC,xAxisId:0,yAxisId:0};function DF(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:h,isAnimationActive:f}=e,{needClip:m}=wC(t,n),g=n0(),v=Jn(),N=A3(e.children,tC),w=ue(j=>c9(j,t,n,v,e.id,N));if(g!=="vertical"&&g!=="horizontal")return null;var S,b=w==null?void 0:w[0];return b==null||b.height==null||b.width==null?S=0:S=g==="vertical"?b.height/2:b.width/2,x.createElement(hF,{xAxisId:t,yAxisId:n,data:w,dataPointFormatter:TF,errorBarOffset:S},x.createElement(MF,zi({},e,{layout:g,needClip:m,data:w,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:h,isAnimationActive:f})))}function IF(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:h,stackedData:f,displayedData:m,offset:g,cells:v,parentViewBox:N}=e,w=t==="horizontal"?u:l,S=f?w.scale.domain():null,b=ID({numericAxis:w});return m.map((j,_)=>{var k,C,A,T,R,B;f?k=OD(f[_],S):(k=Gt(j,n),Array.isArray(k)||(k=[b,k]));var I=iF(r,jC)(k[1],_);if(t==="horizontal"){var M,[$,F]=[u.scale(k[0]),u.scale(k[1])];C=f_({axis:l,ticks:d,bandSize:s,offset:i.offset,entry:j,index:_}),A=(M=F??$)!==null&&M!==void 0?M:void 0,T=i.size;var E=$-F;if(R=Nn(E)?0:E,B={x:C,y:g.top,width:T,height:g.height},Math.abs(I)>0&&Math.abs(R)<Math.abs(I)){var Z=sn(R||I)*(Math.abs(I)-Math.abs(R));A-=Z,R+=Z}}else{var[z,K]=[l.scale(k[0]),l.scale(k[1])];if(C=z,A=f_({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:j,index:_}),T=K-z,R=i.size,B={x:g.left,y:A,width:g.width,height:R},Math.abs(I)>0&&Math.abs(T)<Math.abs(I)){var D=sn(T||I)*(Math.abs(I)-Math.abs(T));T+=D}}if(C==null||A==null||T==null||R==null)return null;var Q=Vt(Vt({},j),{},{x:C,y:A,width:T,height:R,value:f?k:k[1],payload:j,background:B,tooltipPosition:{x:C+T/2,y:A+R/2},parentViewBox:N},v&&v[_]&&v[_].props);return Q}).filter(Boolean)}function RF(e){var t=er(e,LF),n=Jn();return x.createElement(OB,{id:t.id,type:"bar"},r=>x.createElement(x.Fragment,null,x.createElement(SB,{legendPayload:jF(t)}),x.createElement(jB,{fn:NF,args:t}),x.createElement(IB,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:DD(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),x.createElement(DF,zi({},t,{id:r}))))}var yg=x.memo(RF);yg.displayName="Bar";function o1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o1(Object(n),!0).forEach(function(r){zF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zF(e,t,n){return(t=$F(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $F(e){var t=BF(e,"string");return typeof t=="symbol"?t:t+""}function BF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FF=(e,t)=>t,UF=(e,t,n)=>n,HF=(e,t,n,r)=>r,ZF=(e,t,n,r,i)=>i,ec=X([B0,ZF],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),WF=X([ec],e=>e==null?void 0:e.maxBarSize),VF=(e,t,n,r,i,s)=>s,l1=(e,t,n)=>{var r=n??e;if(!vt(r))return vr(r,t,0)},KF=X([Te,B0,FF,UF,HF],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),qF=(e,t,n,r)=>{var i=Te(e);return i==="horizontal"?dg(e,"yAxis",n,r):dg(e,"xAxis",t,r)},GF=(e,t,n)=>{var r=Te(e);return r==="horizontal"?Sw(e,"xAxis",t):Sw(e,"yAxis",n)},YF=(e,t,n)=>{var r={},i=e.filter(Bf),s=e.filter(h=>h.stackId==null),l=i.reduce((h,f)=>(h[f.stackId]||(h[f.stackId]=[]),h[f.stackId].push(f),h),r),u=Object.entries(l).map(h=>{var[f,m]=h,g=m.map(N=>N.dataKey),v=l1(t,n,m[0].barSize);return{stackId:f,dataKeys:g,barSize:v}}),d=s.map(h=>{var f=[h.dataKey].filter(g=>g!=null),m=l1(t,n,h.barSize);return{stackId:void 0,dataKeys:f,barSize:m}});return[...u,...d]},XF=X([KF,y8,GF],YF),QF=(e,t,n,r,i)=>{var s,l,u=ec(e,t,n,r,i);if(u!=null){var d=Te(e),h=AP(e),{maxBarSize:f}=u,m=vt(f)?h:f,g,v;return d==="horizontal"?(g=Us(e,"xAxis",t,r),v=Fs(e,"xAxis",t,r)):(g=Us(e,"yAxis",n,r),v=Fs(e,"yAxis",n,r)),(s=(l=Xv(g,v,!0))!==null&&l!==void 0?l:m)!==null&&s!==void 0?s:0}},NC=(e,t,n,r)=>{var i=Te(e),s,l;return i==="horizontal"?(s=Us(e,"xAxis",t,r),l=Fs(e,"xAxis",t,r)):(s=Us(e,"yAxis",n,r),l=Fs(e,"yAxis",n,r)),Xv(s,l)};function JF(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=vr(e,n,0,!0),u,d=[];if(Pn(r[0].barSize)){var h=!1,f=n/s,m=r.reduce((b,j)=>b+(j.barSize||0),0);m+=(s-1)*l,m>=n&&(m-=(s-1)*l,l=0),m>=n&&f>0&&(h=!0,f*=.9,m=s*f);var g=(n-m)/2>>0,v={offset:g-l,size:0};u=r.reduce((b,j)=>{var _,k={stackId:j.stackId,dataKeys:j.dataKeys,position:{offset:v.offset+v.size+l,size:h?f:(_=j.barSize)!==null&&_!==void 0?_:0}},C=[...b,k];return v=C[C.length-1].position,C},d)}else{var N=vr(t,n,0,!0);n-2*N-(s-1)*l<=0&&(l=0);var w=(n-2*N-(s-1)*l)/s;w>1&&(w>>=0);var S=Pn(i)?Math.min(w,i):w;u=r.reduce((b,j,_)=>[...b,{stackId:j.stackId,dataKeys:j.dataKeys,position:{offset:N+(w+l)*_+(w-S)/2,size:S}}],d)}return u}}var e9=(e,t,n,r,i,s,l)=>{var u=vt(l)?t:l,d=JF(n,r,i!==s?i:s,e,u);return i!==s&&d!=null&&(d=d.map(h=>eu(eu({},h),{},{position:eu(eu({},h.position),{},{offset:h.position.offset-i/2})}))),d},t9=X([XF,AP,v8,TP,QF,NC,WF],e9),n9=(e,t,n,r)=>Us(e,"xAxis",t,r),r9=(e,t,n,r)=>Us(e,"yAxis",n,r),i9=(e,t,n,r)=>Fs(e,"xAxis",t,r),a9=(e,t,n,r)=>Fs(e,"yAxis",n,r),s9=X([t9,ec],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),o9=(e,t)=>{var n=z0(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},l9=X([qF,ec],o9),c9=X([yt,Qv,n9,r9,i9,a9,s9,Te,E0,NC,l9,ec,VF],(e,t,n,r,i,s,l,u,d,h,f,m,g)=>{var{chartData:v,dataStartIndex:N,dataEndIndex:w}=d;if(!(m==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||h==null)){var{data:S}=m,b;if(S!=null&&S.length>0?b=S:b=v==null?void 0:v.slice(N,w+1),b!=null)return IF({layout:u,barSettings:m,pos:l,parentViewBox:t,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:f,displayedData:b,offset:e,cells:g})}}),u9=e=>{var{chartData:t}=e,n=st(),r=Jn();return x.useEffect(()=>r?()=>{}:(n(Lw(t)),()=>{n(Lw(void 0))}),[t,n,r]),null},c1={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},d9=On({name:"brush",initialState:c1,reducers:{setBrushSettings(e,t){return t.payload==null?c1:t.payload}}}),f9=d9.reducer;function h9(e,t,n){return(t=m9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m9(e){var t=p9(e,"string");return typeof t=="symbol"?t:t+""}function p9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sy{static create(t){return new sy(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}h9(sy,"EPS",1e-4);function g9(e){return(e%180+180)%180}var v9=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=g9(i),l=s*Math.PI/180,u=Math.atan(r/n),d=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(d)},y9={dots:[],areas:[],lines:[]},x9=On({name:"referenceElements",initialState:y9,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Gr(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Gr(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Gr(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),b9=x9.reducer,_9=x.createContext(void 0),w9=e=>{var{children:t}=e,[n]=x.useState("".concat(bl("recharts"),"-clip")),r=_C();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return x.createElement(_9.Provider,{value:n},x.createElement("defs",null,x.createElement("clipPath",{id:n},x.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function Zs(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function SC(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function j9(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return v9(r,n)}function N9(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Ed(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function S9(e,t){return SC(e,t+1)}function P9(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,d=0,h=1,f=l,m=function(){var N=r==null?void 0:r[d];if(N===void 0)return{v:SC(r,h)};var w=d,S,b=()=>(S===void 0&&(S=n(N,w)),S),j=N.coordinate,_=d===0||Ed(e,j,b,f,u);_||(d=0,f=l,h+=1),_&&(f=j+e*(b()/2+i),d+=h)},g;h<=s.length;)if(g=m(),g)return g.v;return[]}function u1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u1(Object(n),!0).forEach(function(r){k9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k9(e,t,n){return(t=C9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C9(e){var t=E9(e,"string");return typeof t=="symbol"?t:t+""}function E9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O9(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:d}=t,h=function(g){var v=s[g],N,w=()=>(N===void 0&&(N=n(v,g)),N);if(g===l-1){var S=e*(v.coordinate+e*w()/2-d);s[g]=v=It(It({},v),{},{tickCoord:S>0?v.coordinate-S*e:v.coordinate})}else s[g]=v=It(It({},v),{},{tickCoord:v.coordinate});var b=Ed(e,v.tickCoord,w,u,d);b&&(d=v.tickCoord-e*(w()/2+i),s[g]=It(It({},v),{},{isShow:!0}))},f=l-1;f>=0;f--)h(f);return s}function A9(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:d,end:h}=t;if(s){var f=r[u-1],m=n(f,u-1),g=e*(f.coordinate+e*m/2-h);l[u-1]=f=It(It({},f),{},{tickCoord:g>0?f.coordinate-g*e:f.coordinate});var v=Ed(e,f.tickCoord,()=>m,d,h);v&&(h=f.tickCoord-e*(m/2+i),l[u-1]=It(It({},f),{},{isShow:!0}))}for(var N=s?u-1:u,w=function(j){var _=l[j],k,C=()=>(k===void 0&&(k=n(_,j)),k);if(j===0){var A=e*(_.coordinate-e*C()/2-d);l[j]=_=It(It({},_),{},{tickCoord:A<0?_.coordinate-A*e:_.coordinate})}else l[j]=_=It(It({},_),{},{tickCoord:_.coordinate});var T=Ed(e,_.tickCoord,C,d,h);T&&(d=_.tickCoord+e*(C()/2+i),l[j]=It(It({},_),{},{isShow:!0}))},S=0;S<N;S++)w(S);return l}function oy(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:d,tickFormatter:h,unit:f,angle:m}=e;if(!i||!i.length||!r)return[];if(de(d)||Ys.isSsr){var g;return(g=S9(i,de(d)?d:0))!==null&&g!==void 0?g:[]}var v=[],N=u==="top"||u==="bottom"?"width":"height",w=f&&N==="width"?el(f,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(_,k)=>{var C=typeof h=="function"?h(_.value,k):_.value;return N==="width"?j9(el(C,{fontSize:t,letterSpacing:n}),w,m):el(C,{fontSize:t,letterSpacing:n})[N]},b=i.length>=2?sn(i[1].coordinate-i[0].coordinate):1,j=N9(s,b,N);return d==="equidistantPreserveStart"?P9(b,j,S,i,l):(d==="preserveStart"||d==="preserveStartEnd"?v=A9(b,j,S,i,l,d==="preserveStartEnd"):v=O9(b,j,S,i,l),v.filter(_=>_.isShow))}var T9=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(f=>{if(f){var m=f.getBoundingClientRect();m.width>l&&(l=m.width)}});var u=n?n.getBoundingClientRect().width:0,d=i+s,h=l+d+u+(n?r:0);return Math.round(h)}return 0},M9=["axisLine","width","height","className","hide","ticks"],L9=["viewBox"],D9=["viewBox"];function xg(e,t){if(e==null)return{};var n,r,i=I9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function I9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Aa.apply(null,arguments)}function d1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d1(Object(n),!0).forEach(function(r){R9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R9(e,t,n){return(t=z9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z9(e){var t=$9(e,"string");return typeof t=="symbol"?t:t+""}function $9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ly={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function B9(e){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var h=ct(ct(ct({},d),At(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var f=+(s==="top"&&!l||s==="bottom"&&l);h=ct(ct({},h),{},{x1:t,y1:n+f*i,x2:t+r,y2:n+f*i})}else{var m=+(s==="left"&&!l||s==="right"&&l);h=ct(ct({},h),{},{x1:t+m*r,y1:n,x2:t+m*r,y2:n+i})}return x.createElement("line",Aa({},h,{className:$e("recharts-cartesian-axis-line",Ts(u,"className"))}))}function F9(e,t,n,r,i,s,l,u,d){var h,f,m,g,v,N,w=u?-1:1,S=e.tickSize||l,b=de(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=f=e.coordinate,g=n+ +!u*i,m=g-w*S,N=m-w*d,v=b;break;case"left":m=g=e.coordinate,f=t+ +!u*r,h=f-w*S,v=h-w*d,N=b;break;case"right":m=g=e.coordinate,f=t+ +u*r,h=f+w*S,v=h+w*d,N=b;break;default:h=f=e.coordinate,g=n+ +u*i,m=g+w*S,N=m+w*d,v=b;break}return{line:{x1:h,y1:m,x2:f,y2:g},tick:{x:v,y:N}}}function U9(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function H9(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Z9(e){var{option:t,tickProps:n,value:r}=e,i,s=$e(n.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(t))i=x.cloneElement(t,ct(ct({},n),{},{className:s}));else if(typeof t=="function")i=t(ct(ct({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=$e(l,t==null?void 0:t.className)),i=x.createElement(ry,Aa({},n,{className:l}),r)}return i}function W9(e){var{ticks:t=[],tick:n,tickLine:r,stroke:i,tickFormatter:s,unit:l,padding:u,tickTextProps:d,orientation:h,mirror:f,x:m,y:g,width:v,height:N,tickSize:w,tickMargin:S,fontSize:b,letterSpacing:j,getTicksConfig:_,events:k}=e,C=oy(ct(ct({},_),{},{ticks:t}),b,j),A=U9(h,f),T=H9(h,f),R=Gs(_),B=At(n,!1),I=ct(ct({},R),{},{fill:"none"},At(r,!1)),M=C.map(($,F)=>{var{line:E,tick:Z}=F9($,m,g,v,N,h,w,f,S),z=ct(ct(ct(ct({textAnchor:A,verticalAnchor:T},R),{},{stroke:"none",fill:i},B),Z),{},{index:F,payload:$,visibleTicksCount:C.length,tickFormatter:s,padding:u},d);return x.createElement(Ri,Aa({className:"recharts-cartesian-axis-tick",key:"tick-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},ff(k,$,F)),r&&x.createElement("line",Aa({},I,E,{className:$e("recharts-cartesian-axis-tick-line",Ts(r,"className"))})),n&&x.createElement(Z9,{option:n,tickProps:z,value:"".concat(typeof s=="function"?s($.value,F):$.value).concat(l||"")}))});return M.length>0?x.createElement("g",{className:"recharts-cartesian-axis-ticks"},M):null}var V9=x.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:s,hide:l,ticks:u}=e,d=xg(e,M9),[h,f]=x.useState(""),[m,g]=x.useState(""),v=x.useRef([]);x.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var w;return T9({ticks:v.current,label:(w=e.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=x.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=Array.from(S);var b=S[0];if(b){var j=window.getComputedStyle(b),_=j.fontSize,k=j.letterSpacing;(_!==h||k!==m)&&(f(_),g(k))}}},[h,m]);return l||r!=null&&r<=0||i!=null&&i<=0?null:x.createElement(Ri,{className:$e("recharts-cartesian-axis",s),ref:N},x.createElement(B9,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Gs(e)}),x.createElement(W9,{ticks:u,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:h,letterSpacing:m,getTicksConfig:e,events:d}),x.createElement(I$,{x:e.x,y:e.y,width:e.width,height:e.height},x.createElement(V$,{label:e.label}),e.children))}),K9=x.memo(V9,(e,t)=>{var{viewBox:n}=e,r=xg(e,L9),{viewBox:i}=t,s=xg(t,D9);return Zs(n,i)&&Zs(r,s)}),cy=x.forwardRef((e,t)=>{var n=er(e,ly);return x.createElement(K9,Aa({},n,{ref:t}))});cy.displayName="CartesianAxis";var q9=["x1","y1","x2","y2","key"],G9=["offset"],Y9=["xAxisId","yAxisId"],X9=["xAxisId","yAxisId"];function f1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f1(Object(n),!0).forEach(function(r){Q9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q9(e,t,n){return(t=J9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J9(e){var t=eU(e,"string");return typeof t=="symbol"?t:t+""}function eU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fa(){return fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fa.apply(null,arguments)}function Od(e,t){if(e==null)return{};var n,r,i=tU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var nU=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return x.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function PC(e,t){var n;if(x.isValidElement(e))n=x.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,d=Od(t,q9),h=Gs(d),f=Od(h,G9);n=x.createElement("line",fa({},f,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function rU(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var s=Od(e,Y9),l=i.map((u,d)=>{var h=zt(zt({},s),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(d),index:d});return PC(r,h)});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function iU(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var s=Od(e,X9),l=i.map((u,d)=>{var h=zt(zt({},s),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(d),index:d});return PC(r,h)});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function aU(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var h=u.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==h[0]&&h.unshift(0);var f=h.map((m,g)=>{var v=!h[g+1],N=v?i+l-m:h[g+1]-m;if(N<=0)return null;var w=g%t.length;return x.createElement("rect",{key:"react-".concat(g),y:m,x:r,height:N,width:s,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function sU(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:d}=e;if(!t||!n||!n.length)return null;var h=d.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==h[0]&&h.unshift(0);var f=h.map((m,g)=>{var v=!h[g+1],N=v?i+l-m:h[g+1]-m;if(N<=0)return null;var w=g%n.length;return x.createElement("rect",{key:"react-".concat(g),x:m,y:s,width:N,height:u,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var oU=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return yS(oy(zt(zt(zt({},ly),n),{},{ticks:xS(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},lU=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return yS(oy(zt(zt(zt({},ly),n),{},{ticks:xS(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},cU={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function kC(e){var t=e0(),n=t0(),r=wS(),i=zt(zt({},er(e,cU)),{},{x:de(e.x)?e.x:r.left,y:de(e.y)?e.y:r.top,width:de(e.width)?e.width:r.width,height:de(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:d,width:h,height:f,syncWithTicks:m,horizontalValues:g,verticalValues:v}=i,N=Jn(),w=ue(B=>Pw(B,"xAxis",s,N)),S=ue(B=>Pw(B,"yAxis",l,N));if(!de(h)||h<=0||!de(f)||f<=0||!de(u)||u!==+u||!de(d)||d!==+d)return null;var b=i.verticalCoordinatesGenerator||oU,j=i.horizontalCoordinatesGenerator||lU,{horizontalPoints:_,verticalPoints:k}=i;if((!_||!_.length)&&typeof j=="function"){var C=g&&g.length,A=j({yAxis:S?zt(zt({},S),{},{ticks:C?g:S.ticks}):void 0,width:t,height:n,offset:r},C?!0:m);Jo(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(_=A)}if((!k||!k.length)&&typeof b=="function"){var T=v&&v.length,R=b({xAxis:w?zt(zt({},w),{},{ticks:T?v:w.ticks}):void 0,width:t,height:n,offset:r},T?!0:m);Jo(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(k=R)}return x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(nU,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),x.createElement(aU,fa({},i,{horizontalPoints:_})),x.createElement(sU,fa({},i,{verticalPoints:k})),x.createElement(rU,fa({},i,{offset:r,horizontalPoints:_,xAxis:w,yAxis:S})),x.createElement(iU,fa({},i,{offset:r,verticalPoints:k,xAxis:w,yAxis:S})))}kC.displayName="CartesianGrid";var uU=["dangerouslySetInnerHTML","ticks"],dU=["id"],fU=["domain"],hU=["domain"];function bg(){return bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bg.apply(null,arguments)}function Ad(e,t){if(e==null)return{};var n,r,i=mU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function pU(e){var t=st();return x.useEffect(()=>(t(FB(e)),()=>{t(UB(e))}),[e,t]),null}var gU=e=>{var{xAxisId:t,className:n}=e,r=ue(Qv),i=Jn(),s="xAxis",l=ue(v=>no(v,s,t,i)),u=ue(v=>wk(v,s,t,i)),d=ue(v=>yk(v,t)),h=ue(v=>uz(v,t)),f=ue(v=>FP(v,t));if(d==null||h==null||f==null)return null;var m=Ad(e,uU),g=Ad(f,dU);return x.createElement(cy,bg({},m,g,{scale:l,x:h.x,y:h.y,width:d.width,height:d.height,className:$e("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},vU={allowDataOverflow:hn.allowDataOverflow,allowDecimals:hn.allowDecimals,allowDuplicatedCategory:hn.allowDuplicatedCategory,height:hn.height,hide:!1,mirror:hn.mirror,orientation:hn.orientation,padding:hn.padding,reversed:hn.reversed,scale:hn.scale,tickCount:hn.tickCount,type:hn.type,xAxisId:0},yU=e=>{var t,n,r,i,s,l=er(e,vU);return x.createElement(x.Fragment,null,x.createElement(pU,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(i=l.minTickGap)!==null&&i!==void 0?i:5,tick:(s=l.tick)!==null&&s!==void 0?s:!0,tickFormatter:l.tickFormatter}),x.createElement(gU,l))},xU=(e,t)=>{var{domain:n}=e,r=Ad(e,fU),{domain:i}=t,s=Ad(t,hU);return Zs(r,s)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Zs({domain:n},{domain:i}):!1},CC=x.memo(yU,xU);CC.displayName="XAxis";var bU=["dangerouslySetInnerHTML","ticks"],_U=["id"],wU=["domain"],jU=["domain"];function _g(){return _g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_g.apply(null,arguments)}function Td(e,t){if(e==null)return{};var n,r,i=NU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function NU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function SU(e){var t=st();return x.useEffect(()=>(t(HB(e)),()=>{t(ZB(e))}),[e,t]),null}var PU=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,s=x.useRef(null),l=x.useRef(null),u=ue(Qv),d=Jn(),h=st(),f="yAxis",m=ue(j=>no(j,f,t,d)),g=ue(j=>xk(j,t)),v=ue(j=>fz(j,t)),N=ue(j=>wk(j,f,t,d)),w=ue(j=>UP(j,t));if(x.useLayoutEffect(()=>{if(!(r!=="auto"||!g||iy(i)||x.isValidElement(i)||w==null)){var j=s.current;if(j){var _=j.getCalculatedWidth();Math.round(g.width)!==Math.round(_)&&h(WB({id:t,width:_}))}}},[N,g,h,i,t,r,w]),g==null||v==null||w==null)return null;var S=Td(e,bU),b=Td(w,_U);return x.createElement(cy,_g({},S,b,{ref:s,labelRef:l,scale:m,x:v.x,y:v.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:g.width,height:g.height,className:$e("recharts-".concat(f," ").concat(f),n),viewBox:u,ticks:N}))},kU={allowDataOverflow:mn.allowDataOverflow,allowDecimals:mn.allowDecimals,allowDuplicatedCategory:mn.allowDuplicatedCategory,hide:!1,mirror:mn.mirror,orientation:mn.orientation,padding:mn.padding,reversed:mn.reversed,scale:mn.scale,tickCount:mn.tickCount,type:mn.type,width:mn.width,yAxisId:0},CU=e=>{var t,n,r,i,s,l=er(e,kU);return x.createElement(x.Fragment,null,x.createElement(SU,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(i=l.minTickGap)!==null&&i!==void 0?i:5,tick:(s=l.tick)!==null&&s!==void 0?s:!0,tickFormatter:l.tickFormatter}),x.createElement(PU,l))},EU=(e,t)=>{var{domain:n}=e,r=Td(e,wU),{domain:i}=t,s=Td(t,jU);return Zs(r,s)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Zs({domain:n},{domain:i}):!1},EC=x.memo(CU,EU);EC.displayName="YAxis";var OU={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc=x;function AU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var TU=typeof Object.is=="function"?Object.is:AU,MU=tc.useSyncExternalStore,LU=tc.useRef,DU=tc.useEffect,IU=tc.useMemo,RU=tc.useDebugValue;OU.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=LU(null);if(s.current===null){var l={hasValue:!1,value:null};s.current=l}else l=s.current;s=IU(function(){function d(v){if(!h){if(h=!0,f=v,v=r(v),i!==void 0&&l.hasValue){var N=l.value;if(i(N,v))return m=N}return m=v}if(N=m,TU(f,v))return N;var w=r(v);return i!==void 0&&i(N,w)?(f=v,N):(f=v,m=w)}var h=!1,f,m,g=n===void 0?null:n;return[function(){return d(t())},g===null?void 0:function(){return d(g())}]},[t,n,r,i]);var u=MU(e,s[0],s[1]);return DU(function(){l.hasValue=!0,l.value=u},[u]),RU(u),u};function zU(e){e()}function $U(){let e=null,t=null;return{clear(){e=null,t=null},notify(){zU(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var h1={notify(){},get:()=>[]};function BU(e,t){let n,r=h1,i=0,s=!1;function l(w){f();const S=r.subscribe(w);let b=!1;return()=>{b||(b=!0,S(),m())}}function u(){r.notify()}function d(){N.onStateChange&&N.onStateChange()}function h(){return s}function f(){i++,n||(n=e.subscribe(d),r=$U())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=h1)}function g(){s||(s=!0,f())}function v(){s&&(s=!1,m())}const N={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:h,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return N}var FU=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UU=FU(),HU=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ZU=HU(),WU=()=>UU||ZU?x.useLayoutEffect:x.useEffect,VU=WU(),km=Symbol.for("react-redux-context"),Cm=typeof globalThis<"u"?globalThis:{};function KU(){if(!x.createContext)return{};const e=Cm[km]??(Cm[km]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var qU=KU();function GU(e){const{children:t,context:n,serverState:r,store:i}=e,s=x.useMemo(()=>{const d=BU(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=x.useMemo(()=>i.getState(),[i]);VU(()=>{const{subscription:d}=s;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[s,l]);const u=n||qU;return x.createElement(u.Provider,{value:s},t)}var YU=GU,XU=(e,t)=>t,uy=X([XU,Te,zP,ft,Rk,di,g7,yt],_7),dy=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},OC=Yn("mouseClick"),AC=Ul();AC.startListening({actionCreator:OC,effect:(e,t)=>{var n=e.payload,r=uy(t.getState(),dy(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(Sz({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var wg=Yn("mouseMove"),TC=Ul();TC.startListening({actionCreator:wg,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=q0(r,r.tooltip.settings.shared),s=uy(r,dy(n));i==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(Ok({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Ek()))}});var m1={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},MC=On({name:"rootProps",initialState:m1,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:m1.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),QU=MC.reducer,{updateOptions:JU}=MC.actions,eH=On({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),tH=eH.reducer,LC=Yn("keyDown"),DC=Yn("focus"),fy=Ul();fy.startListening({actionCreator:LC,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(G0(i,io(n))),u=di(n);if(s==="Enter"){var d=Nd(n,"axis","hover",String(i.index));t.dispatch(hg({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var h=gz(n),f=h==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=l+m*f;if(!(u==null||g>=u.length||g<0)){var v=Nd(n,"axis","hover",String(g));t.dispatch(hg({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:v}))}}}}});fy.startListening({actionCreator:DC,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=Nd(n,"axis","hover",String(s));t.dispatch(hg({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var zn=Yn("externalEvent"),IC=Ul();IC.startListening({actionCreator:zn,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:o7(n),activeDataKey:Fk(n),activeIndex:Hs(n),activeLabel:Bk(n),activeTooltipIndex:Hs(n),isTooltipActive:l7(n)};e.payload.handler(r,e.payload.reactEvent)}}});var nH=X([ro],e=>e.tooltipItemPayloads),rH=X([nH,Ql,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),RC=Yn("touchMove"),zC=Ul();zC.startListening({actionCreator:RC,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=q0(r,r.tooltip.settings.shared);if(i==="axis"){var s=uy(r,dy({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(Ok({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var h=d.getAttribute(ZD),f=(l=d.getAttribute(WD))!==null&&l!==void 0?l:void 0,m=rH(t.getState(),h,f);t.dispatch(Ck({activeDataKey:f,activeIndex:h,activeCoordinate:m}))}}});var iH=q2({brush:f9,cartesianAxis:VB,chartData:R7,errorBars:oF,graphicalItems:DB,layout:hD,legend:lI,options:T7,polarAxis:aB,polarOptions:tH,referenceElements:b9,rootProps:QU,tooltip:Pz}),aH=function(t){return zL({reducer:iH,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([AC.middleware,TC.middleware,fy.middleware,IC.middleware,zC.middleware]),devTools:Ys.devToolsEnabled})};function sH(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Jn(),s=x.useRef(null);if(i)return n;s.current==null&&(s.current=aH(t));var l=Hv;return x.createElement(YU,{context:l,store:s.current},n)}function oH(e){var{layout:t,width:n,height:r,margin:i}=e,s=st(),l=Jn();return x.useEffect(()=>{l||(s(uD(t)),s(dD({width:n,height:r})),s(cD(i)))},[s,l,t,n,r,i]),null}function lH(e){var t=st();return x.useEffect(()=>{t(JU(e))},[t,e]),null}var cH=["children"];function uH(e,t){if(e==null)return{};var n,r,i=dH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function dH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Md(){return Md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Md.apply(null,arguments)}var fH={width:"100%",height:"100%"},hH=x.forwardRef((e,t)=>{var n=e0(),r=t0(),i=NS();if(!ld(n)||!ld(r))return null;var{children:s,otherAttributes:l,title:u,desc:d}=e,h,f;return typeof l.tabIndex=="number"?h=l.tabIndex:h=i?0:void 0,typeof l.role=="string"?f=l.role:f=i?"application":void 0,x.createElement(kv,Md({},l,{title:u,desc:d,role:f,tabIndex:h,width:n,height:r,style:fH,ref:t}),s)}),mH=e=>{var{children:t}=e,n=ue(kf);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return x.createElement(kv,{width:r,height:i,x:l,y:s},t)},p1=x.forwardRef((e,t)=>{var{children:n}=e,r=uH(e,cH),i=Jn();return i?x.createElement(mH,null,n):x.createElement(hH,Md({ref:t},r),n)});function pH(){var e=st(),[t,n]=x.useState(null),r=ue(HD);return x.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;Pn(s)&&s!==r&&e(fD(s))}},[t,e,r]),n}function g1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g1(Object(n),!0).forEach(function(r){vH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vH(e,t,n){return(t=yH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yH(e){var t=xH(e,"string");return typeof t=="symbol"?t:t+""}function xH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bH=x.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:h,onMouseLeave:f,onMouseMove:m,onMouseUp:g,onTouchEnd:v,onTouchMove:N,onTouchStart:w,style:S,width:b}=e,j=st(),[_,k]=x.useState(null),[C,A]=x.useState(null);V7();var T=pH(),R=x.useCallback(Y=>{T(Y),typeof t=="function"&&t(Y),k(Y),A(Y)},[T,t,k,A]),B=x.useCallback(Y=>{j(OC(Y)),j(zn({handler:s,reactEvent:Y}))},[j,s]),I=x.useCallback(Y=>{j(wg(Y)),j(zn({handler:h,reactEvent:Y}))},[j,h]),M=x.useCallback(Y=>{j(Ek()),j(zn({handler:f,reactEvent:Y}))},[j,f]),$=x.useCallback(Y=>{j(wg(Y)),j(zn({handler:m,reactEvent:Y}))},[j,m]),F=x.useCallback(()=>{j(DC())},[j]),E=x.useCallback(Y=>{j(LC(Y.key))},[j]),Z=x.useCallback(Y=>{j(zn({handler:l,reactEvent:Y}))},[j,l]),z=x.useCallback(Y=>{j(zn({handler:u,reactEvent:Y}))},[j,u]),K=x.useCallback(Y=>{j(zn({handler:d,reactEvent:Y}))},[j,d]),D=x.useCallback(Y=>{j(zn({handler:g,reactEvent:Y}))},[j,g]),Q=x.useCallback(Y=>{j(zn({handler:w,reactEvent:Y}))},[j,w]),G=x.useCallback(Y=>{j(RC(Y)),j(zn({handler:N,reactEvent:Y}))},[j,N]),V=x.useCallback(Y=>{j(zn({handler:v,reactEvent:Y}))},[j,v]);return x.createElement(Kk.Provider,{value:_},x.createElement(e2.Provider,{value:C},x.createElement("div",{className:$e("recharts-wrapper",r),style:gH({position:"relative",cursor:"default",width:b,height:i},S),onClick:B,onContextMenu:Z,onDoubleClick:z,onFocus:F,onKeyDown:E,onMouseDown:K,onMouseEnter:I,onMouseLeave:M,onMouseMove:$,onMouseUp:D,onTouchEnd:V,onTouchMove:G,onTouchStart:Q,ref:R},n)))}),_H=["children","className","width","height","style","compact","title","desc"];function wH(e,t){if(e==null)return{};var n,r,i=jH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function jH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var NH=x.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:d,desc:h}=e,f=wH(e,_H),m=Gs(f);return u?x.createElement(p1,{otherAttributes:m,title:d,desc:h},n):x.createElement(bH,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},x.createElement(p1,{otherAttributes:m,title:d,desc:h,ref:t},x.createElement(w9,null,n)))}),SH=["width","height"];function jg(){return jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jg.apply(null,arguments)}function PH(e,t){if(e==null)return{};var n,r,i=kH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var CH={top:5,right:5,bottom:5,left:5},EH={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:CH,reverseStackOrder:!1,syncMethod:"index"},OH=x.forwardRef(function(t,n){var r,i=er(t.categoricalChartProps,EH),{width:s,height:l}=i,u=PH(i,SH);if(!ld(s)||!ld(l))return null;var{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,categoricalChartProps:g}=t,v={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,eventEmitter:void 0};return x.createElement(sH,{preloadedState:{options:v},reduxStoreName:(r=g.id)!==null&&r!==void 0?r:d},x.createElement(u9,{chartData:g.data}),x.createElement(oH,{width:s,height:l,layout:i.layout,margin:i.margin}),x.createElement(lH,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),x.createElement(NH,jg({},u,{width:s,height:l,ref:n})))}),AH=["axis","item"],TH=x.forwardRef((e,t)=>x.createElement(OH,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:AH,tooltipPayloadSearcher:O7,categoricalChartProps:e,ref:t}));const MH=({patients:e})=>{const t=x.useMemo(()=>{const r=e.length,i=e.filter(u=>!!u.patient_categories.critical).length,s=e.filter(u=>!!u.patient_categories.elderly).length,l=e.filter(u=>!!u.patient_categories.pregnant).length;return[{group:"Critical",Yes:i,No:Math.max(r-i,0)},{group:"Elderly",Yes:s,No:Math.max(r-s,0)},{group:"Pregnant",Yes:l,No:Math.max(r-l,0)}]},[e]),n=e.length;return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Patient Categories Overview"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Total Patients: ",n]})]}),a.jsx("div",{className:"h-72",children:t.length===0?a.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 text-sm",children:"No data"}):a.jsx(s$,{width:"100%",height:"100%",children:a.jsxs(TH,{data:t,margin:{top:10,right:20,left:0,bottom:0},children:[a.jsx(kC,{strokeDasharray:"3 3"}),a.jsx(CC,{dataKey:"group",tick:{fontSize:12}}),a.jsx(EC,{allowDecimals:!1,tick:{fontSize:12}}),a.jsx(e$,{}),a.jsx(Cf,{}),a.jsx(yg,{dataKey:"Yes",name:"Yes",radius:[4,4,0,0],fill:"#2563eb"}),a.jsx(yg,{dataKey:"No",name:"No",radius:[4,4,0,0],fill:"#cbd5e1"})]})})})]})},Rn=()=>{const{user:e}=Pe(),[t,n]=x.useState([]),[r,i]=x.useState([]),[s,l]=x.useState(!0),[u,d]=x.useState(!1),[h,f]=x.useState(null),[m,g]=x.useState(null),[v,N]=x.useState(!1),[w,S]=x.useState([]),[b,j]=x.useState([]),_=async()=>{if(e!=null&&e.id)try{const{data:H,error:J}=await Lr(e.id);if(J&&J.code!=="PGRST116")console.error("Error fetching patient profile:",J);else{g(H);try{const{data:re}=await fr(),le=(re||[]).filter(Ne=>Ne.patient_id===(H==null?void 0:H.id));S(le)}catch(re){console.warn("Unable to load patient appointments",re)}}}catch(H){console.error("Error fetching patient profile:",H)}},k=async()=>{if(!m){alert("Patient profile not found. Please contact emergency services directly.");return}N(!0);try{const[{data:H},{data:J}]=await Promise.all([Ct(),dn()]),re=(H||[]).filter(xe=>xe.role==="doctor"),le=(m.assigned_doctor||"").toLowerCase(),Ne=re.filter(xe=>(xe.full_name||"").toLowerCase().includes(le)),Qt=(m.area_name||"").toLowerCase(),ie=(J||[]).filter(xe=>(xe.area_name||"").toLowerCase()===Qt);if(Ne.length===0&&ie.length===0)throw new Error("No assigned doctor or nearby volunteers found");const ge=` EMERGENCY - Immediate Assistance Needed

Patient: ${m.name}
MRN: ${m.medical_record_number}
Phone: ${m.phone_number||"N/A"}
Address: ${m.address}
Assigned Doctor: ${m.assigned_doctor||"N/A"}
Assigned VHV: ${m.assigned_vhv_name||"N/A"}
Area: ${m.area_name||"N/A"}

Flags:
- Critical: ${m.patient_categories.critical?"Yes":"No"}
- Elderly: ${m.patient_categories.elderly?"Yes":"No"}
- Pregnant: ${m.patient_categories.pregnant?"Yes":"No"}

Caregiver: ${m.caregivers_contact||"N/A"}

This is an urgent request for immediate medical assistance. Please respond as soon as possible.`,me=Ne.map(xe=>xe.id),te=ie.map(xe=>xe.user_id).filter(Boolean),tt=Array.from(new Set([...me,...te]));await Promise.all(tt.map(xe=>gr({sender_id:e.id,recipient_id:xe,content:ge,subject:" EMERGENCY - Immediate Assistance Needed",is_read:!1}))),alert(`Emergency message sent to ${me.length} doctor(s) and ${te.length} volunteer(s).`)}catch(H){console.error("Error sending emergency message:",H),alert("Failed to send emergency message. Please call emergency services directly or try again.")}finally{N(!1)}};x.useEffect(()=>{C(),(e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer"?(A(),(async()=>{try{const{data:H}=await fr(),J=(H||[]).filter(re=>re.assigned_to===(e==null?void 0:e.id)&&!!re.patient_id);j(J)}catch(H){console.warn("Unable to load my appointments",H)}})()):(e==null?void 0:e.role)==="patient"&&_()},[]);const C=async()=>{try{const{data:H,error:J}=await KM();J?console.error("Error fetching announcements:",J):n(H||[])}catch(H){console.error("Error fetching announcements:",H)}finally{l(!1)}},A=async()=>{try{const{data:H,error:J}=await Ot();J?console.error("Error fetching patients:",J):i(H||[])}catch(H){console.error("Error fetching patients:",H)}finally{l(!1)}},T=H=>{f(H),d(!0)},R=async H=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{const{error:J}=await YM(H);J?console.error("Error deleting announcement:",J):C()}catch(J){console.error("Error deleting announcement:",J)}},B=()=>{d(!1),f(null)},I=()=>{C()},M=()=>{switch(e==null?void 0:e.role){case"doctor":return"Welcome to your medical dashboard. Manage patient records and communications.";case"volunteer":return"Welcome to your volunteer dashboard. Help manage patient information and provide support.";case"patient":return"Welcome to your patient portal. View your medical information and communicate with your healthcare team.";default:return"Welcome to MedConnect Portal."}},$=()=>{const H=r.filter(Ne=>Ne.patient_categories.critical).length,J=r.filter(Ne=>Ne.patient_categories.elderly).length,re=r.filter(Ne=>Ne.patient_categories.pregnant).length,le=r.length;return{critical:H,elderly:J,pregnant:re,total:le}},F=[],E=new Date().toISOString().slice(0,10),Z=new Set(["pending","in_progress"]),z=w.filter(H=>H.due_date===E&&Z.has(H.status)).sort((H,J)=>(H.due_time||"").localeCompare(J.due_time||"")),K=w.filter(H=>(H.due_date||"")>E&&Z.has(H.status)).sort((H,J)=>(H.due_date||"").localeCompare(J.due_date||"")||(H.due_time||"").localeCompare(J.due_time||"")),D=b.filter(H=>H.due_date===E&&Z.has(H.status)).sort((H,J)=>(H.due_time||"").localeCompare(J.due_time||"")),Q=b.filter(H=>(H.due_date||"")>E&&Z.has(H.status)).sort((H,J)=>(H.due_date||"").localeCompare(J.due_date||"")||(H.due_time||"").localeCompare(J.due_time||"")),G=$(),V=H=>{switch(H){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Y=H=>{switch(H){case"urgent":return a.jsx(Wr,{className:"w-4 h-4"});case"high":return a.jsx(Wr,{className:"w-4 h-4"});default:return a.jsx(mu,{className:"w-4 h-4"})}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Good ",new Date().getHours()<12?"morning":new Date().getHours()<17?"afternoon":"evening",", ",e==null?void 0:e.full_name]}),a.jsx("p",{className:"text-gray-600",children:M()})]}),(e==null?void 0:e.role)==="doctor"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:a.jsx(zc,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.total}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Patients"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:a.jsx(Wr,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.critical}),a.jsx("p",{className:"text-sm text-gray-600",children:"Critical Patients"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:a.jsx(zc,{className:"w-6 h-6 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.elderly}),a.jsx("p",{className:"text-sm text-gray-600",children:"Elderly Patients"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-pink-100 p-3 rounded-lg",children:a.jsx(gn,{className:"w-6 h-6 text-pink-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.pregnant}),a.jsx("p",{className:"text-sm text-gray-600",children:"Pregnant Patients"})]})]})})]}),(e==null?void 0:e.role)==="doctor"&&a.jsx(MH,{patients:r}),(e==null?void 0:e.role)==="volunteer"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:a.jsx(zc,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.total}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Patients"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:a.jsx(Wr,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.critical}),a.jsx("p",{className:"text-sm text-gray-600",children:"Critical Patients"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:a.jsx(zc,{className:"w-6 h-6 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.elderly}),a.jsx("p",{className:"text-sm text-gray-600",children:"Elderly Patients"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-pink-100 p-3 rounded-lg",children:a.jsx(gn,{className:"w-6 h-6 text-pink-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.pregnant}),a.jsx("p",{className:"text-sm text-gray-600",children:"Pregnant Patients"})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(e==null?void 0:e.role)==="patient"&&a.jsx("div",{className:"md:col-span-2 lg:col-span-3 mb-4",children:a.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:a.jsx(Zu,{className:"w-8 h-8 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-red-800",children:"Emergency Assistance"}),a.jsx("p",{className:"text-red-700 text-sm",children:"Need immediate medical help? Click to send an urgent message to your healthcare team."}),a.jsx("p",{className:"text-red-600 text-xs mt-1",children:"For life-threatening emergencies, call emergency services immediately."})]})]}),a.jsx("button",{onClick:k,disabled:v||!m,className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 flex items-center space-x-2 font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 active:scale-95 w-full sm:w-auto justify-center",children:v?a.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Zu,{className:"w-6 h-6"}),a.jsx("span",{children:"EMERGENCY"})]})})]})})}),(e==null?void 0:e.role)==="patient"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Todays Appointments"}),a.jsx("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"appointments"}))}catch{}window.setAppView&&window.setAppView("appointments")},className:"text-sm text-blue-600 hover:text-blue-800",children:"View all"})]}),z.length===0?a.jsx("p",{className:"text-sm text-gray-600",children:"No appointments today."}):a.jsx("ul",{className:"space-y-3",children:z.slice(0,5).map(H=>a.jsxs("li",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-sm text-gray-900 font-medium",children:H.title||"Appointment"}),a.jsx("div",{className:"text-sm text-gray-600",children:H.due_time||""})]},H.id))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Upcoming Appointments"}),a.jsx("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"appointments"}))}catch{}window.setAppView&&window.setAppView("appointments")},className:"text-sm text-blue-600 hover:text-blue-800",children:"View all"})]}),K.length===0?a.jsx("p",{className:"text-sm text-gray-600",children:"No upcoming appointments."}):a.jsx("ul",{className:"space-y-3",children:K.slice(0,5).map(H=>a.jsxs("li",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-sm text-gray-900 font-medium",children:H.title||"Appointment"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[H.due_date,H.due_time?` ${H.due_time}`:""]})]},H.id))})]})]}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer")&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Todays Appointments"}),a.jsx("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"tasks"}))}catch{}window.setAppView&&window.setAppView("tasks")},className:"text-sm text-blue-600 hover:text-blue-800",children:"View all"})]}),D.length===0?a.jsx("p",{className:"text-sm text-gray-600",children:"No appointments today."}):a.jsx("ul",{className:"space-y-3",children:D.slice(0,5).map(H=>{var J;return a.jsxs("li",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[((J=H.patient)==null?void 0:J.name)||"Patient","  ",H.title||"Appointment"]}),a.jsx("div",{className:"text-sm text-gray-600",children:H.due_time||""})]},H.id)})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Upcoming Appointments"}),a.jsx("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"tasks"}))}catch{}window.setAppView&&window.setAppView("tasks")},className:"text-sm text-blue-600 hover:text-blue-800",children:"View all"})]}),Q.length===0?a.jsx("p",{className:"text-sm text-gray-600",children:"No upcoming appointments."}):a.jsx("ul",{className:"space-y-3",children:Q.slice(0,5).map(H=>{var J;return a.jsxs("li",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[((J=H.patient)==null?void 0:J.name)||"Patient","  ",H.title||"Appointment"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[H.due_date,H.due_time?` ${H.due_time}`:""]})]},H.id)})})]})]}),F.map((H,J)=>{const re=H.icon;return a.jsx("div",{onClick:()=>{const Ne={patients:"patients",messages:"messages","create-patient":"patients",tasks:"tasks",records:"records",map:"map",profile:"profile",resources:"dashboard",mental:"mental",appointments:"appointments"}[H.action]||"dashboard";try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:Ne}))}catch{}window.setAppView&&window.setAppView(Ne)},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all cursor-pointer group",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-blue-100 p-3 rounded-lg group-hover:bg-blue-200 transition-colors",children:a.jsx(re,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:H.title}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:H.description})]})]})},J)})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[a.jsx(mu,{className:"w-6 h-6 text-blue-600"}),a.jsx("span",{children:"Announcements"})]}),(e==null?void 0:e.role)==="doctor"&&a.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors w-full sm:w-auto justify-center",children:[a.jsx(Ut,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Announcement"})]})]}),s?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx("div",{className:"w-6 h-6 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t.length>0?a.jsx("div",{className:"space-y-4",children:t.slice(0,3).map(H=>{var J;return a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-all",children:a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:H.title}),a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium border flex items-center space-x-1 ${V(H.priority)}`,children:[Y(H.priority),a.jsx("span",{children:H.priority.charAt(0).toUpperCase()+H.priority.slice(1)})]})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-2",children:H.content}),a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[a.jsxs("span",{children:["By: ",(J=H.created_by_user)==null?void 0:J.full_name]}),a.jsx("span",{children:new Date(H.created_at).toLocaleDateString()})]})]}),(e==null?void 0:e.role)==="doctor"&&a.jsxs("div",{className:"flex space-x-2 ml-4",children:[a.jsx("button",{onClick:()=>T(H),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Announcement",children:a.jsx(kp,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>R(H.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Announcement",children:a.jsx(Os,{className:"w-4 h-4"})})]})]})},H.id)})}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(mu,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No announcements to display."}),(e==null?void 0:e.role)==="doctor"&&a.jsx("p",{className:"text-sm mt-1",children:"Create your first announcement to keep everyone informed."})]})]})]}),u&&a.jsx(x3,{announcement:h,onClose:B,onSuccess:I})]})};function $C(e,t){const n=x.useRef(t);x.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function BC(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const LH=1;function DH(e){return Object.freeze({__version:LH,map:e})}function Vf(e,t){return Object.freeze({...e,...t})}const FC=x.createContext(null),UC=FC.Provider;function Kf(){const e=x.useContext(FC);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function HC(e){function t(n,r){const{instance:i,context:s}=e(n).current;return x.useImperativeHandle(r,()=>i),n.children==null?null:yu.createElement(UC,{value:s},n.children)}return x.forwardRef(t)}function IH(e){function t(n,r){const[i,s]=x.useState(!1),{instance:l}=e(n,s).current;x.useImperativeHandle(r,()=>l),x.useEffect(function(){i&&l.update()},[l,i,n.children]);const u=l._contentNode;return u?Xd.createPortal(n.children,u):null}return x.forwardRef(t)}function RH(e){function t(n,r){const{instance:i}=e(n).current;return x.useImperativeHandle(r,()=>i),null}return x.forwardRef(t)}function hy(e,t){const n=x.useRef();x.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function qf(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function zH(e,t){return function(r,i){const s=Kf(),l=e(qf(r,s),s);return $C(s.map,r.attribution),hy(l.current,r.eventHandlers),t(l.current,s,r,i),l}}var Ng={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(NO,function(n){var r="1.9.4";function i(o){var c,p,y,P;for(p=1,y=arguments.length;p<y;p++){P=arguments[p];for(c in P)o[c]=P[c]}return o}var s=Object.create||function(){function o(){}return function(c){return o.prototype=c,new o}}();function l(o,c){var p=Array.prototype.slice;if(o.bind)return o.bind.apply(o,p.call(arguments,1));var y=p.call(arguments,2);return function(){return o.apply(c,y.length?y.concat(p.call(arguments)):arguments)}}var u=0;function d(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function h(o,c,p){var y,P,O,U;return U=function(){y=!1,P&&(O.apply(p,P),P=!1)},O=function(){y?P=arguments:(o.apply(p,arguments),setTimeout(U,c),y=!0)},O}function f(o,c,p){var y=c[1],P=c[0],O=y-P;return o===y&&p?o:((o-P)%O+O)%O+P}function m(){return!1}function g(o,c){if(c===!1)return o;var p=Math.pow(10,c===void 0?6:c);return Math.round(o*p)/p}function v(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function N(o){return v(o).split(/\s+/)}function w(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var p in c)o.options[p]=c[p];return o.options}function S(o,c,p){var y=[];for(var P in o)y.push(encodeURIComponent(p?P.toUpperCase():P)+"="+encodeURIComponent(o[P]));return(!c||c.indexOf("?")===-1?"?":"&")+y.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function j(o,c){return o.replace(b,function(p,y){var P=c[y];if(P===void 0)throw new Error("No value provided for variable "+p);return typeof P=="function"&&(P=P(c)),P})}var _=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function k(o,c){for(var p=0;p<o.length;p++)if(o[p]===c)return p;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var T=0;function R(o){var c=+new Date,p=Math.max(0,16-(c-T));return T=c+p,window.setTimeout(o,p)}var B=window.requestAnimationFrame||A("RequestAnimationFrame")||R,I=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function M(o,c,p){if(p&&B===R)o.call(c);else return B.call(window,l(o,c))}function $(o){o&&I.call(window,o)}var F={__proto__:null,extend:i,create:s,bind:l,get lastId(){return u},stamp:d,throttle:h,wrapNum:f,falseFn:m,formatNum:g,trim:v,splitWords:N,setOptions:w,getParamString:S,template:j,isArray:_,indexOf:k,emptyImageUrl:C,requestFn:B,cancelFn:I,requestAnimFrame:M,cancelAnimFrame:$};function E(){}E.extend=function(o){var c=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,y=s(p);y.constructor=c,c.prototype=y;for(var P in this)Object.prototype.hasOwnProperty.call(this,P)&&P!=="prototype"&&P!=="__super__"&&(c[P]=this[P]);return o.statics&&i(c,o.statics),o.includes&&(Z(o.includes),i.apply(null,[y].concat(o.includes))),i(y,o),delete y.statics,delete y.includes,y.options&&(y.options=p.options?s(p.options):{},i(y.options,o.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var O=0,U=y._initHooks.length;O<U;O++)y._initHooks[O].call(this)}},c},E.include=function(o){var c=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},E.mergeOptions=function(o){return i(this.prototype.options,o),this},E.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),p=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function Z(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=_(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var z={on:function(o,c,p){if(typeof o=="object")for(var y in o)this._on(y,o[y],c);else{o=N(o);for(var P=0,O=o.length;P<O;P++)this._on(o[P],c,p)}return this},off:function(o,c,p){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var y in o)this._off(y,o[y],c);else{o=N(o);for(var P=arguments.length===1,O=0,U=o.length;O<U;O++)P?this._off(o[O]):this._off(o[O],c,p)}return this},_on:function(o,c,p,y){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,p)===!1){p===this&&(p=void 0);var P={fn:c,ctx:p};y&&(P.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(P)}},_off:function(o,c,p){var y,P,O;if(this._events&&(y=this._events[o],!!y)){if(arguments.length===1){if(this._firingCount)for(P=0,O=y.length;P<O;P++)y[P].fn=m;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var U=this._listens(o,c,p);if(U!==!1){var W=y[U];this._firingCount&&(W.fn=m,this._events[o]=y=y.slice()),y.splice(U,1)}}},fire:function(o,c,p){if(!this.listens(o,p))return this;var y=i({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var P=this._events[o];if(P){this._firingCount=this._firingCount+1||1;for(var O=0,U=P.length;O<U;O++){var W=P[O],q=W.fn;W.once&&this.off(o,q,W.ctx),q.call(W.ctx||this,y)}this._firingCount--}}return p&&this._propagateEvent(y),this},listens:function(o,c,p,y){typeof o!="string"&&console.warn('"string" type argument expected');var P=c;typeof c!="function"&&(y=!!c,P=void 0,p=void 0);var O=this._events&&this._events[o];if(O&&O.length&&this._listens(o,P,p)!==!1)return!0;if(y){for(var U in this._eventParents)if(this._eventParents[U].listens(o,c,p,y))return!0}return!1},_listens:function(o,c,p){if(!this._events)return!1;var y=this._events[o]||[];if(!c)return!!y.length;p===this&&(p=void 0);for(var P=0,O=y.length;P<O;P++)if(y[P].fn===c&&y[P].ctx===p)return P;return!1},once:function(o,c,p){if(typeof o=="object")for(var y in o)this._on(y,o[y],c,!0);else{o=N(o);for(var P=0,O=o.length;P<O;P++)this._on(o[P],c,p,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[d(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[d(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};z.addEventListener=z.on,z.removeEventListener=z.clearAllEventListeners=z.off,z.addOneTimeEventListener=z.once,z.fireEvent=z.fire,z.hasEventListeners=z.listens;var K=E.extend(z);function D(o,c,p){this.x=p?Math.round(o):o,this.y=p?Math.round(c):c}var Q=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(o){return this.clone()._add(G(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(G(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new D(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new D(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Q(this.x),this.y=Q(this.y),this},distanceTo:function(o){o=G(o);var c=o.x-this.x,p=o.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(o){return o=G(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=G(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function G(o,c,p){return o instanceof D?o:_(o)?new D(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new D(o.x,o.y):new D(o,c,p)}function V(o,c){if(o)for(var p=c?[o,c]:o,y=0,P=p.length;y<P;y++)this.extend(p[y])}V.prototype={extend:function(o){var c,p;if(!o)return this;if(o instanceof D||typeof o[0]=="number"||"x"in o)c=p=G(o);else if(o=Y(o),c=o.min,p=o.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(o){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,p;return typeof o[0]=="number"||o instanceof D?o=G(o):o=Y(o),o instanceof V?(c=o.min,p=o.max):c=p=o,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(o){o=Y(o);var c=this.min,p=this.max,y=o.min,P=o.max,O=P.x>=c.x&&y.x<=p.x,U=P.y>=c.y&&y.y<=p.y;return O&&U},overlaps:function(o){o=Y(o);var c=this.min,p=this.max,y=o.min,P=o.max,O=P.x>c.x&&y.x<p.x,U=P.y>c.y&&y.y<p.y;return O&&U},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,p=this.max,y=Math.abs(c.x-p.x)*o,P=Math.abs(c.y-p.y)*o;return Y(G(c.x-y,c.y-P),G(p.x+y,p.y+P))},equals:function(o){return o?(o=Y(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function Y(o,c){return!o||o instanceof V?o:new V(o,c)}function H(o,c){if(o)for(var p=c?[o,c]:o,y=0,P=p.length;y<P;y++)this.extend(p[y])}H.prototype={extend:function(o){var c=this._southWest,p=this._northEast,y,P;if(o instanceof re)y=o,P=o;else if(o instanceof H){if(y=o._southWest,P=o._northEast,!y||!P)return this}else return o?this.extend(le(o)||J(o)):this;return!c&&!p?(this._southWest=new re(y.lat,y.lng),this._northEast=new re(P.lat,P.lng)):(c.lat=Math.min(y.lat,c.lat),c.lng=Math.min(y.lng,c.lng),p.lat=Math.max(P.lat,p.lat),p.lng=Math.max(P.lng,p.lng)),this},pad:function(o){var c=this._southWest,p=this._northEast,y=Math.abs(c.lat-p.lat)*o,P=Math.abs(c.lng-p.lng)*o;return new H(new re(c.lat-y,c.lng-P),new re(p.lat+y,p.lng+P))},getCenter:function(){return new re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new re(this.getNorth(),this.getWest())},getSouthEast:function(){return new re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof re||"lat"in o?o=le(o):o=J(o);var c=this._southWest,p=this._northEast,y,P;return o instanceof H?(y=o.getSouthWest(),P=o.getNorthEast()):y=P=o,y.lat>=c.lat&&P.lat<=p.lat&&y.lng>=c.lng&&P.lng<=p.lng},intersects:function(o){o=J(o);var c=this._southWest,p=this._northEast,y=o.getSouthWest(),P=o.getNorthEast(),O=P.lat>=c.lat&&y.lat<=p.lat,U=P.lng>=c.lng&&y.lng<=p.lng;return O&&U},overlaps:function(o){o=J(o);var c=this._southWest,p=this._northEast,y=o.getSouthWest(),P=o.getNorthEast(),O=P.lat>c.lat&&y.lat<p.lat,U=P.lng>c.lng&&y.lng<p.lng;return O&&U},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=J(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function J(o,c){return o instanceof H?o:new H(o,c)}function re(o,c,p){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,p!==void 0&&(this.alt=+p)}re.prototype={equals:function(o,c){if(!o)return!1;o=le(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+g(this.lat,o)+", "+g(this.lng,o)+")"},distanceTo:function(o){return Qt.distance(this,le(o))},wrap:function(){return Qt.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,p=c/Math.cos(Math.PI/180*this.lat);return J([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new re(this.lat,this.lng,this.alt)}};function le(o,c,p){return o instanceof re?o:_(o)&&typeof o[0]!="object"?o.length===3?new re(o[0],o[1],o[2]):o.length===2?new re(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new re(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new re(o,c,p)}var Ne={latLngToPoint:function(o,c){var p=this.projection.project(o),y=this.scale(c);return this.transformation._transform(p,y)},pointToLatLng:function(o,c){var p=this.scale(c),y=this.transformation.untransform(o,p);return this.projection.unproject(y)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(o),y=this.transformation.transform(c.min,p),P=this.transformation.transform(c.max,p);return new V(y,P)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?f(o.lng,this.wrapLng,!0):o.lng,p=this.wrapLat?f(o.lat,this.wrapLat,!0):o.lat,y=o.alt;return new re(p,c,y)},wrapLatLngBounds:function(o){var c=o.getCenter(),p=this.wrapLatLng(c),y=c.lat-p.lat,P=c.lng-p.lng;if(y===0&&P===0)return o;var O=o.getSouthWest(),U=o.getNorthEast(),W=new re(O.lat-y,O.lng-P),q=new re(U.lat-y,U.lng-P);return new H(W,q)}},Qt=i({},Ne,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var p=Math.PI/180,y=o.lat*p,P=c.lat*p,O=Math.sin((c.lat-o.lat)*p/2),U=Math.sin((c.lng-o.lng)*p/2),W=O*O+Math.cos(y)*Math.cos(P)*U*U,q=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*q}}),ie=6378137,ge={R:ie,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,p=this.MAX_LATITUDE,y=Math.max(Math.min(p,o.lat),-p),P=Math.sin(y*c);return new D(this.R*o.lng*c,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(o){var c=180/Math.PI;return new re((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:function(){var o=ie*Math.PI;return new V([-o,-o],[o,o])}()};function me(o,c,p,y){if(_(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=p,this._d=y}me.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new D((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function te(o,c,p,y){return new me(o,c,p,y)}var tt=i({},Qt,{code:"EPSG:3857",projection:ge,transformation:function(){var o=.5/(Math.PI*ge.R);return te(o,.5,-o,.5)}()}),xe=i({},tt,{code:"EPSG:900913"});function Tt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Mt(o,c){var p="",y,P,O,U,W,q;for(y=0,O=o.length;y<O;y++){for(W=o[y],P=0,U=W.length;P<U;P++)q=W[P],p+=(P?"L":"M")+q.x+" "+q.y;p+=c?ce.svg?"z":"x":""}return p||"M0 0"}var nr=document.documentElement.style,Vi="ActiveXObject"in window,QC=Vi&&!document.addEventListener,yy="msLaunchUri"in navigator&&!("documentMode"in document),Jf=xr("webkit"),xy=xr("android"),by=xr("android 2")||xr("android 3"),JC=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),eE=xy&&xr("Google")&&JC<537&&!("AudioNode"in window),eh=!!window.opera,_y=!yy&&xr("chrome"),wy=xr("gecko")&&!Jf&&!eh&&!Vi,tE=!_y&&xr("safari"),jy=xr("phantom"),Ny="OTransition"in nr,nE=navigator.platform.indexOf("Win")===0,Sy=Vi&&"transition"in nr,th="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!by,Py="MozPerspective"in nr,rE=!window.L_DISABLE_3D&&(Sy||th||Py)&&!Ny&&!jy,so=typeof orientation<"u"||xr("mobile"),iE=so&&Jf,aE=so&&th,ky=!window.PointerEvent&&window.MSPointerEvent,Cy=!!(window.PointerEvent||ky),Ey="ontouchstart"in window||!!window.TouchEvent,sE=!window.L_NO_TOUCH&&(Ey||Cy),oE=so&&eh,lE=so&&wy,cE=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,uE=function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",m,c),window.removeEventListener("testPassiveEventSupport",m,c)}catch{}return o}(),dE=function(){return!!document.createElement("canvas").getContext}(),nh=!!(document.createElementNS&&Tt("svg").createSVGRect),fE=!!nh&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),hE=!nh&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),mE=navigator.platform.indexOf("Mac")===0,pE=navigator.platform.indexOf("Linux")===0;function xr(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var ce={ie:Vi,ielt9:QC,edge:yy,webkit:Jf,android:xy,android23:by,androidStock:eE,opera:eh,chrome:_y,gecko:wy,safari:tE,phantom:jy,opera12:Ny,win:nE,ie3d:Sy,webkit3d:th,gecko3d:Py,any3d:rE,mobile:so,mobileWebkit:iE,mobileWebkit3d:aE,msPointer:ky,pointer:Cy,touch:sE,touchNative:Ey,mobileOpera:oE,mobileGecko:lE,retina:cE,passiveEvents:uE,canvas:dE,svg:nh,vml:hE,inlineSvg:fE,mac:mE,linux:pE},Oy=ce.msPointer?"MSPointerDown":"pointerdown",Ay=ce.msPointer?"MSPointerMove":"pointermove",Ty=ce.msPointer?"MSPointerUp":"pointerup",My=ce.msPointer?"MSPointerCancel":"pointercancel",rh={touchstart:Oy,touchmove:Ay,touchend:Ty,touchcancel:My},Ly={touchstart:_E,touchmove:rc,touchend:rc,touchcancel:rc},$a={},Dy=!1;function gE(o,c,p){return c==="touchstart"&&bE(),Ly[c]?(p=Ly[c].bind(this,p),o.addEventListener(rh[c],p,!1),p):(console.warn("wrong event specified:",c),m)}function vE(o,c,p){if(!rh[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(rh[c],p,!1)}function yE(o){$a[o.pointerId]=o}function xE(o){$a[o.pointerId]&&($a[o.pointerId]=o)}function Iy(o){delete $a[o.pointerId]}function bE(){Dy||(document.addEventListener(Oy,yE,!0),document.addEventListener(Ay,xE,!0),document.addEventListener(Ty,Iy,!0),document.addEventListener(My,Iy,!0),Dy=!0)}function rc(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in $a)c.touches.push($a[p]);c.changedTouches=[c],o(c)}}function _E(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&_t(c),rc(o,c)}function wE(o){var c={},p,y;for(y in o)p=o[y],c[y]=p&&p.bind?p.bind(o):p;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var jE=200;function NE(o,c){o.addEventListener("dblclick",c);var p=0,y;function P(O){if(O.detail!==1){y=O.detail;return}if(!(O.pointerType==="mouse"||O.sourceCapabilities&&!O.sourceCapabilities.firesTouchEvents)){var U=Fy(O);if(!(U.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!U.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var W=Date.now();W-p<=jE?(y++,y===2&&c(wE(O))):y=1,p=W}}}return o.addEventListener("click",P),{dblclick:c,simDblclick:P}}function SE(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var ih=sc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oo=sc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ry=oo==="webkitTransition"||oo==="OTransition"?oo+"End":"transitionend";function zy(o){return typeof o=="string"?document.getElementById(o):o}function lo(o,c){var p=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(o,null);p=y?y[c]:null}return p==="auto"?null:p}function Ce(o,c,p){var y=document.createElement(o);return y.className=c||"",p&&p.appendChild(y),y}function Ve(o){var c=o.parentNode;c&&c.removeChild(o)}function ic(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Ba(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function Fa(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function ah(o,c){if(o.classList!==void 0)return o.classList.contains(c);var p=ac(o);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function be(o,c){if(o.classList!==void 0)for(var p=N(c),y=0,P=p.length;y<P;y++)o.classList.add(p[y]);else if(!ah(o,c)){var O=ac(o);sh(o,(O?O+" ":"")+c)}}function Xe(o,c){o.classList!==void 0?o.classList.remove(c):sh(o,v((" "+ac(o)+" ").replace(" "+c+" "," ")))}function sh(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function ac(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function An(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&PE(o,c)}function PE(o,c){var p=!1,y="DXImageTransform.Microsoft.Alpha";try{p=o.filters.item(y)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):o.style.filter+=" progid:"+y+"(opacity="+c+")"}function sc(o){for(var c=document.documentElement.style,p=0;p<o.length;p++)if(o[p]in c)return o[p];return!1}function Ki(o,c,p){var y=c||new D(0,0);o.style[ih]=(ce.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(p?" scale("+p+")":"")}function nt(o,c){o._leaflet_pos=c,ce.any3d?Ki(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function qi(o){return o._leaflet_pos||new D(0,0)}var co,uo,oh;if("onselectstart"in document)co=function(){ve(window,"selectstart",_t)},uo=function(){Ie(window,"selectstart",_t)};else{var fo=sc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);co=function(){if(fo){var o=document.documentElement.style;oh=o[fo],o[fo]="none"}},uo=function(){fo&&(document.documentElement.style[fo]=oh,oh=void 0)}}function lh(){ve(window,"dragstart",_t)}function ch(){Ie(window,"dragstart",_t)}var oc,uh;function dh(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(lc(),oc=o,uh=o.style.outlineStyle,o.style.outlineStyle="none",ve(window,"keydown",lc))}function lc(){oc&&(oc.style.outlineStyle=uh,oc=void 0,uh=void 0,Ie(window,"keydown",lc))}function $y(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function fh(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var kE={__proto__:null,TRANSFORM:ih,TRANSITION:oo,TRANSITION_END:Ry,get:zy,getStyle:lo,create:Ce,remove:Ve,empty:ic,toFront:Ba,toBack:Fa,hasClass:ah,addClass:be,removeClass:Xe,setClass:sh,getClass:ac,setOpacity:An,testProp:sc,setTransform:Ki,setPosition:nt,getPosition:qi,get disableTextSelection(){return co},get enableTextSelection(){return uo},disableImageDrag:lh,enableImageDrag:ch,preventOutline:dh,restoreOutline:lc,getSizedParentNode:$y,getScale:fh};function ve(o,c,p,y){if(c&&typeof c=="object")for(var P in c)mh(o,P,c[P],p);else{c=N(c);for(var O=0,U=c.length;O<U;O++)mh(o,c[O],p,y)}return this}var br="_leaflet_events";function Ie(o,c,p,y){if(arguments.length===1)By(o),delete o[br];else if(c&&typeof c=="object")for(var P in c)ph(o,P,c[P],p);else if(c=N(c),arguments.length===2)By(o,function(W){return k(c,W)!==-1});else for(var O=0,U=c.length;O<U;O++)ph(o,c[O],p,y);return this}function By(o,c){for(var p in o[br]){var y=p.split(/\d/)[0];(!c||c(y))&&ph(o,y,null,null,p)}}var hh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function mh(o,c,p,y){var P=c+d(p)+(y?"_"+d(y):"");if(o[br]&&o[br][P])return this;var O=function(W){return p.call(y||o,W||window.event)},U=O;!ce.touchNative&&ce.pointer&&c.indexOf("touch")===0?O=gE(o,c,O):ce.touch&&c==="dblclick"?O=NE(o,O):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(hh[c]||c,O,ce.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(O=function(W){W=W||window.event,vh(o,W)&&U(W)},o.addEventListener(hh[c],O,!1)):o.addEventListener(c,U,!1):o.attachEvent("on"+c,O),o[br]=o[br]||{},o[br][P]=O}function ph(o,c,p,y,P){P=P||c+d(p)+(y?"_"+d(y):"");var O=o[br]&&o[br][P];if(!O)return this;!ce.touchNative&&ce.pointer&&c.indexOf("touch")===0?vE(o,c,O):ce.touch&&c==="dblclick"?SE(o,O):"removeEventListener"in o?o.removeEventListener(hh[c]||c,O,!1):o.detachEvent("on"+c,O),o[br][P]=null}function Gi(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function gh(o){return mh(o,"wheel",Gi),this}function ho(o){return ve(o,"mousedown touchstart dblclick contextmenu",Gi),o._leaflet_disable_click=!0,this}function _t(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Yi(o){return _t(o),Gi(o),this}function Fy(o){if(o.composedPath)return o.composedPath();for(var c=[],p=o.target;p;)c.push(p),p=p.parentNode;return c}function Uy(o,c){if(!c)return new D(o.clientX,o.clientY);var p=fh(c),y=p.boundingClientRect;return new D((o.clientX-y.left)/p.x-c.clientLeft,(o.clientY-y.top)/p.y-c.clientTop)}var CE=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Hy(o){return ce.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/CE:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function vh(o,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==o;)p=p.parentNode}catch{return!1}return p!==o}var EE={__proto__:null,on:ve,off:Ie,stopPropagation:Gi,disableScrollPropagation:gh,disableClickPropagation:ho,preventDefault:_t,stop:Yi,getPropagationPath:Fy,getMousePosition:Uy,getWheelDelta:Hy,isExternalTarget:vh,addListener:ve,removeListener:Ie},Zy=K.extend({run:function(o,c,p,y){this.stop(),this._el=o,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=qi(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var p=this._startPos.add(this._offset.multiplyBy(o));c&&p._round(),nt(this._el,p),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Se=K.extend({options:{crs:tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=w(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(le(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=oo&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ve(this._proxy,Ry,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(le(o),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=i({animate:p.animate},p.zoom),p.pan=i({animate:p.animate,duration:p.duration},p.pan));var y=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,p.zoom):this._tryAnimatedPan(o,p.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,p){var y=this.getZoomScale(c),P=this.getSize().divideBy(2),O=o instanceof D?o:this.latLngToContainerPoint(o),U=O.subtract(P).multiplyBy(1-1/y),W=this.containerPointToLatLng(P.add(U));return this.setView(W,c,{zoom:p})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():J(o);var p=G(c.paddingTopLeft||c.padding||[0,0]),y=G(c.paddingBottomRight||c.padding||[0,0]),P=this.getBoundsZoom(o,!1,p.add(y));if(P=typeof c.maxZoom=="number"?Math.min(c.maxZoom,P):P,P===1/0)return{center:o.getCenter(),zoom:P};var O=y.subtract(p).divideBy(2),U=this.project(o.getSouthWest(),P),W=this.project(o.getNorthEast(),P),q=this.unproject(U.add(W).divideBy(2).add(O),P);return{center:q,zoom:P}},fitBounds:function(o,c){if(o=J(o),!o.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(o,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=G(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Zy,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){be(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,p){if(p=p||{},p.animate===!1||!ce.any3d)return this.setView(o,c,p);this._stop();var y=this.project(this.getCenter()),P=this.project(o),O=this.getSize(),U=this._zoom;o=le(o),c=c===void 0?U:c;var W=Math.max(O.x,O.y),q=W*this.getZoomScale(U,c),ee=P.distanceTo(y)||1,ae=1.42,he=ae*ae;function we(rt){var bc=rt?-1:1,vO=rt?q:W,yO=q*q-W*W+bc*he*he*ee*ee,xO=2*vO*he*ee,Ch=yO/xO,Nx=Math.sqrt(Ch*Ch+1)-Ch,bO=Nx<1e-9?-18:Math.log(Nx);return bO}function Ht(rt){return(Math.exp(rt)-Math.exp(-rt))/2}function ht(rt){return(Math.exp(rt)+Math.exp(-rt))/2}function Mn(rt){return Ht(rt)/ht(rt)}var Jt=we(0);function Ka(rt){return W*(ht(Jt)/ht(Jt+ae*rt))}function hO(rt){return W*(ht(Jt)*Mn(Jt+ae*rt)-Ht(Jt))/he}function mO(rt){return 1-Math.pow(1-rt,1.5)}var pO=Date.now(),wx=(we(1)-Jt)/ae,gO=p.duration?1e3*p.duration:1e3*wx*.8;function jx(){var rt=(Date.now()-pO)/gO,bc=mO(rt)*wx;rt<=1?(this._flyToFrame=M(jx,this),this._move(this.unproject(y.add(P.subtract(y).multiplyBy(hO(bc)/ee)),U),this.getScaleZoom(W/Ka(bc),U),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),jx.call(this),this},flyToBounds:function(o,c){var p=this._getBoundsCenterZoom(o,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(o){return o=J(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var p=this.getCenter(),y=this._limitCenter(p,this._zoom,J(o));return p.equals(y)||this.panTo(y,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var p=G(c.paddingTopLeft||c.padding||[0,0]),y=G(c.paddingBottomRight||c.padding||[0,0]),P=this.project(this.getCenter()),O=this.project(o),U=this.getPixelBounds(),W=Y([U.min.add(p),U.max.subtract(y)]),q=W.getSize();if(!W.contains(O)){this._enforcingBounds=!0;var ee=O.subtract(W.getCenter()),ae=W.extend(O).getSize().subtract(q);P.x+=ee.x<0?-ae.x:ae.x,P.y+=ee.y<0?-ae.y:ae.y,this.panTo(this.unproject(P),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),y=c.divideBy(2).round(),P=p.divideBy(2).round(),O=y.subtract(P);return!O.x&&!O.y?this:(o.animate&&o.pan?this.panBy(O):(o.pan&&this._rawPanBy(O),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=l(this._handleGeolocationResponse,this),p=l(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,o):navigator.geolocation.getCurrentPosition(c,p,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,p=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,p=o.coords.longitude,y=new re(c,p),P=y.toBounds(o.coords.accuracy*2),O=this._locateOptions;if(O.setView){var U=this.getBoundsZoom(P);this.setView(y,O.maxZoom?Math.min(U,O.maxZoom):U)}var W={latlng:y,bounds:P,timestamp:o.timestamp};for(var q in o.coords)typeof o.coords[q]=="number"&&(W[q]=o.coords[q]);this.fire("locationfound",W)}},addHandler:function(o,c){if(!c)return this;var p=this[o]=new c(this);return this._handlers.push(p),this.options[o]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Ve(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var p="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),y=Ce("div",p,c||this._mapPane);return o&&(this._panes[o]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),p=this.unproject(o.getTopRight());return new H(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,p){o=J(o),p=G(p||[0,0]);var y=this.getZoom()||0,P=this.getMinZoom(),O=this.getMaxZoom(),U=o.getNorthWest(),W=o.getSouthEast(),q=this.getSize().subtract(p),ee=Y(this.project(W,y),this.project(U,y)).getSize(),ae=ce.any3d?this.options.zoomSnap:1,he=q.x/ee.x,we=q.y/ee.y,Ht=c?Math.max(he,we):Math.min(he,we);return y=this.getScaleZoom(Ht,y),ae&&(y=Math.round(y/(ae/100))*(ae/100),y=c?Math.ceil(y/ae)*ae:Math.floor(y/ae)*ae),Math.max(P,Math.min(O,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var p=this._getTopLeftPoint(o,c);return new V(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(o)/p.scale(c)},getScaleZoom:function(o,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var y=p.zoom(o*p.scale(c));return isNaN(y)?1/0:y},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(le(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(G(o),c)},layerPointToLatLng:function(o){var c=G(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(le(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(le(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(J(o))},distance:function(o,c){return this.options.crs.distance(le(o),le(c))},containerPointToLayerPoint:function(o){return G(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return G(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(G(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(le(o)))},mouseEventToContainerPoint:function(o){return Uy(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=zy(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ve(c,"scroll",this._onScroll,this),this._containerId=d(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,be(o,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=lo(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),nt(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(o.markerPane,"leaflet-zoom-hide"),be(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,p){nt(this._mapPane,new D(0,0));var y=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var P=this._zoom!==c;this._moveStart(P,p)._move(o,c)._moveEnd(P),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,p,y){c===void 0&&(c=this._zoom);var P=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),y?p&&p.pinch&&this.fire("zoom",p):((P||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){nt(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[d(this._container)]=this;var c=o?Ie:ve;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var p=[],y,P=c==="mouseout"||c==="mouseover",O=o.target||o.srcElement,U=!1;O;){if(y=this._targets[d(O)],y&&(c==="click"||c==="preclick")&&this._draggableMoved(y)){U=!0;break}if(y&&y.listens(c,!0)&&(P&&!vh(O,o)||(p.push(y),P))||O===this._container)break;O=O.parentNode}return!p.length&&!U&&!P&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var p=o.type;p==="mousedown"&&dh(c),this._fireDOMEvent(o,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,p){if(o.type==="click"){var y=i({},o);y.type="preclick",this._fireDOMEvent(y,y.type,p)}var P=this._findEventTargets(o,c);if(p){for(var O=[],U=0;U<p.length;U++)p[U].listens(c,!0)&&O.push(p[U]);P=O.concat(P)}if(P.length){c==="contextmenu"&&_t(o);var W=P[0],q={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var ee=W.getLatLng&&(!W._radius||W._radius<=10);q.containerPoint=ee?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(o),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=ee?W.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(U=0;U<P.length;U++)if(P[U].fire(c,q,!0),q.originalEvent._stopped||P[U].options.bubblingMouseEvents===!1&&k(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return qi(this._mapPane)||new D(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var p=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var p=this.getSize()._divideBy(2);return this.project(o,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,p){var y=this._getNewPixelOrigin(p,c);return this.project(o,c)._subtract(y)},_latLngBoundsToNewLayerBounds:function(o,c,p){var y=this._getNewPixelOrigin(p,c);return Y([this.project(o.getSouthWest(),c)._subtract(y),this.project(o.getNorthWest(),c)._subtract(y),this.project(o.getSouthEast(),c)._subtract(y),this.project(o.getNorthEast(),c)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,p){if(!p)return o;var y=this.project(o,c),P=this.getSize().divideBy(2),O=new V(y.subtract(P),y.add(P)),U=this._getBoundsOffset(O,p,c);return Math.abs(U.x)<=1&&Math.abs(U.y)<=1?o:this.unproject(y.add(U),c)},_limitOffset:function(o,c){if(!c)return o;var p=this.getPixelBounds(),y=new V(p.min.add(o),p.max.add(o));return o.add(this._getBoundsOffset(y,c))},_getBoundsOffset:function(o,c,p){var y=Y(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),P=y.min.subtract(o.min),O=y.max.subtract(o.max),U=this._rebound(P.x,-O.x),W=this._rebound(P.y,-O.y);return new D(U,W)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),p=this.getMaxZoom(),y=ce.any3d?this.options.zoomSnap:1;return y&&(o=Math.round(o/y)*y),Math.max(c,Math.min(p,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var p=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var o=this._proxy=Ce("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var p=ih,y=this._proxy.style[p];Ki(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),y===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();Ki(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(c),P=this._getCenterOffset(o)._divideBy(1-1/y);return p.animate!==!0&&!this.getSize().contains(P)?!1:(M(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,p,y){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function OE(o,c){return new Se(o,c)}var rr=E.extend({options:{position:"topright"},initialize:function(o){w(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),p=this.getPosition(),y=o._controlCorners[p];return be(c,"leaflet-control"),p.indexOf("bottom")!==-1?y.insertBefore(c,y.firstChild):y.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),mo=function(o){return new rr(o)};Se.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",p=this._controlContainer=Ce("div",c+"control-container",this._container);function y(P,O){var U=c+P+" "+c+O;o[P+O]=Ce("div",U,p)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Ve(this._controlCorners[o]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Wy=rr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,p,y){return p<y?-1:y<p?1:0}},initialize:function(o,c,p){w(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in o)this._addLayer(o[y],y);for(y in c)this._addLayer(c[y],y,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return rr.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(d(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Xe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=Ce("div",o),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),ho(c),gh(c);var y=this._section=Ce("section",o+"-list");p&&(this._map.on("click",this.collapse,this),ve(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var P=this._layersLink=Ce("a",o+"-toggle",c);P.href="#",P.title="Layers",P.setAttribute("role","button"),ve(P,{keydown:function(O){O.keyCode===13&&this._expandSafely()},click:function(O){_t(O),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Ce("div",o+"-base",y),this._separator=Ce("div",o+"-separator",y),this._overlaysList=Ce("div",o+"-overlays",y),c.appendChild(y)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&d(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,p){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(l(function(y,P){return this.options.sortFunction(y.layer,P.layer,y.name,P.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ic(this._baseLayersList),ic(this._overlaysList),this._layerControlInputs=[];var o,c,p,y,P=0;for(p=0;p<this._layers.length;p++)y=this._layers[p],this._addItem(y),c=c||y.overlay,o=o||!y.overlay,P+=y.overlay?0:1;return this.options.hideSingleBase&&(o=o&&P>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(d(o.target)),p=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(o,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=p,y.firstChild},_addItem:function(o){var c=document.createElement("label"),p=this._map.hasLayer(o.layer),y;o.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=p):y=this._createRadioElement("leaflet-base-layers_"+d(this),p),this._layerControlInputs.push(y),y.layerId=d(o.layer),ve(y,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+o.name;var O=document.createElement("span");c.appendChild(O),O.appendChild(y),O.appendChild(P);var U=o.overlay?this._overlaysList:this._baseLayersList;return U.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,p,y=[],P=[];this._handlingClick=!0;for(var O=o.length-1;O>=0;O--)c=o[O],p=this._getLayer(c.layerId).layer,c.checked?y.push(p):c.checked||P.push(p);for(O=0;O<P.length;O++)this._map.hasLayer(P[O])&&this._map.removeLayer(P[O]);for(O=0;O<y.length;O++)this._map.hasLayer(y[O])||this._map.addLayer(y[O]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,p,y=this._map.getZoom(),P=o.length-1;P>=0;P--)c=o[P],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&y<p.options.minZoom||p.options.maxZoom!==void 0&&y>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ve(o,"click",_t),this.expand();var c=this;setTimeout(function(){Ie(o,"click",_t),c._preventClick=!1})}}),AE=function(o,c,p){return new Wy(o,c,p)},yh=rr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",p=Ce("div",c+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,p,y,P){var O=Ce("a",p,y);return O.innerHTML=o,O.href="#",O.title=c,O.setAttribute("role","button"),O.setAttribute("aria-label",c),ho(O),ve(O,"click",Yi),ve(O,"click",P,this),ve(O,"click",this._refocusOnMap,this),O},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";Xe(this._zoomInButton,c),Xe(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(be(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(be(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Se.mergeOptions({zoomControl:!0}),Se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new yh,this.addControl(this.zoomControl))});var TE=function(o){return new yh(o)},Vy=rr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",p=Ce("div",c),y=this.options;return this._addScales(y,c+"-line",p),o.on(y.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),p},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,p){o.metric&&(this._mScale=Ce("div",c,p)),o.imperial&&(this._iScale=Ce("div",c,p))},_update:function(){var o=this._map,c=o.getSize().y/2,p=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/o)},_updateImperial:function(o){var c=o*3.2808399,p,y,P;c>5280?(p=c/5280,y=this._getRoundNum(p),this._updateScale(this._iScale,y+" mi",y/p)):(P=this._getRoundNum(c),this._updateScale(this._iScale,P+" ft",P/c))},_updateScale:function(o,c,p){o.style.width=Math.round(this.options.maxWidth*p)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),p=o/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),ME=function(o){return new Vy(o)},LE='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',xh=rr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?LE+" ":"")+"Leaflet</a>"},initialize:function(o){w(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Ce("div","leaflet-control-attribution"),ho(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),o.length&&p.push(o.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});Se.mergeOptions({attributionControl:!0}),Se.addInitHook(function(){this.options.attributionControl&&new xh().addTo(this)});var DE=function(o){return new xh(o)};rr.Layers=Wy,rr.Zoom=yh,rr.Scale=Vy,rr.Attribution=xh,mo.layers=AE,mo.zoom=TE,mo.scale=ME,mo.attribution=DE;var _r=E.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_r.addTo=function(o,c){return o.addHandler(c,this),this};var IE={Events:z},Ky=ce.touch?"touchstart mousedown":"mousedown",fi=K.extend({options:{clickTolerance:3},initialize:function(o,c,p,y){w(this,y),this._element=o,this._dragStartTarget=c||o,this._preventOutline=p},enable:function(){this._enabled||(ve(this._dragStartTarget,Ky,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fi._dragging===this&&this.finishDrag(!0),Ie(this._dragStartTarget,Ky,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!ah(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){fi._dragging===this&&this.finishDrag();return}if(!(fi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(fi._dragging=this,this._preventOutline&&dh(this._element),lh(),co(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,p=$y(this._element);this._startPoint=new D(c.clientX,c.clientY),this._startPos=qi(this._element),this._parentScale=fh(p);var y=o.type==="mousedown";ve(document,y?"mousemove":"touchmove",this._onMove,this),ve(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,p=new D(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,_t(o),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),nt(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Xe(document.body,"leaflet-dragging"),this._lastTarget&&(Xe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ie(document,"mousemove touchmove",this._onMove,this),Ie(document,"mouseup touchend touchcancel",this._onUp,this),ch(),uo();var c=this._moved&&this._moving;this._moving=!1,fi._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function qy(o,c,p){var y,P=[1,4,2,8],O,U,W,q,ee,ae,he,we;for(O=0,ae=o.length;O<ae;O++)o[O]._code=Xi(o[O],c);for(W=0;W<4;W++){for(he=P[W],y=[],O=0,ae=o.length,U=ae-1;O<ae;U=O++)q=o[O],ee=o[U],q._code&he?ee._code&he||(we=cc(ee,q,he,c,p),we._code=Xi(we,c),y.push(we)):(ee._code&he&&(we=cc(ee,q,he,c,p),we._code=Xi(we,c),y.push(we)),y.push(q));o=y}return o}function Gy(o,c){var p,y,P,O,U,W,q,ee,ae;if(!o||o.length===0)throw new Error("latlngs not passed");Tn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var he=le([0,0]),we=J(o),Ht=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());Ht<1700&&(he=bh(o));var ht=o.length,Mn=[];for(p=0;p<ht;p++){var Jt=le(o[p]);Mn.push(c.project(le([Jt.lat-he.lat,Jt.lng-he.lng])))}for(W=q=ee=0,p=0,y=ht-1;p<ht;y=p++)P=Mn[p],O=Mn[y],U=P.y*O.x-O.y*P.x,q+=(P.x+O.x)*U,ee+=(P.y+O.y)*U,W+=U*3;W===0?ae=Mn[0]:ae=[q/W,ee/W];var Ka=c.unproject(G(ae));return le([Ka.lat+he.lat,Ka.lng+he.lng])}function bh(o){for(var c=0,p=0,y=0,P=0;P<o.length;P++){var O=le(o[P]);c+=O.lat,p+=O.lng,y++}return le([c/y,p/y])}var RE={__proto__:null,clipPolygon:qy,polygonCenter:Gy,centroid:bh};function Yy(o,c){if(!c||!o.length)return o.slice();var p=c*c;return o=BE(o,p),o=$E(o,p),o}function Xy(o,c,p){return Math.sqrt(po(o,c,p,!0))}function zE(o,c,p){return po(o,c,p)}function $E(o,c){var p=o.length,y=typeof Uint8Array<"u"?Uint8Array:Array,P=new y(p);P[0]=P[p-1]=1,_h(o,P,c,0,p-1);var O,U=[];for(O=0;O<p;O++)P[O]&&U.push(o[O]);return U}function _h(o,c,p,y,P){var O=0,U,W,q;for(W=y+1;W<=P-1;W++)q=po(o[W],o[y],o[P],!0),q>O&&(U=W,O=q);O>p&&(c[U]=1,_h(o,c,p,y,U),_h(o,c,p,U,P))}function BE(o,c){for(var p=[o[0]],y=1,P=0,O=o.length;y<O;y++)FE(o[y],o[P])>c&&(p.push(o[y]),P=y);return P<O-1&&p.push(o[O-1]),p}var Qy;function Jy(o,c,p,y,P){var O=y?Qy:Xi(o,p),U=Xi(c,p),W,q,ee;for(Qy=U;;){if(!(O|U))return[o,c];if(O&U)return!1;W=O||U,q=cc(o,c,W,p,P),ee=Xi(q,p),W===O?(o=q,O=ee):(c=q,U=ee)}}function cc(o,c,p,y,P){var O=c.x-o.x,U=c.y-o.y,W=y.min,q=y.max,ee,ae;return p&8?(ee=o.x+O*(q.y-o.y)/U,ae=q.y):p&4?(ee=o.x+O*(W.y-o.y)/U,ae=W.y):p&2?(ee=q.x,ae=o.y+U*(q.x-o.x)/O):p&1&&(ee=W.x,ae=o.y+U*(W.x-o.x)/O),new D(ee,ae,P)}function Xi(o,c){var p=0;return o.x<c.min.x?p|=1:o.x>c.max.x&&(p|=2),o.y<c.min.y?p|=4:o.y>c.max.y&&(p|=8),p}function FE(o,c){var p=c.x-o.x,y=c.y-o.y;return p*p+y*y}function po(o,c,p,y){var P=c.x,O=c.y,U=p.x-P,W=p.y-O,q=U*U+W*W,ee;return q>0&&(ee=((o.x-P)*U+(o.y-O)*W)/q,ee>1?(P=p.x,O=p.y):ee>0&&(P+=U*ee,O+=W*ee)),U=o.x-P,W=o.y-O,y?U*U+W*W:new D(P,O)}function Tn(o){return!_(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function ex(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Tn(o)}function tx(o,c){var p,y,P,O,U,W,q,ee;if(!o||o.length===0)throw new Error("latlngs not passed");Tn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ae=le([0,0]),he=J(o),we=he.getNorthWest().distanceTo(he.getSouthWest())*he.getNorthEast().distanceTo(he.getNorthWest());we<1700&&(ae=bh(o));var Ht=o.length,ht=[];for(p=0;p<Ht;p++){var Mn=le(o[p]);ht.push(c.project(le([Mn.lat-ae.lat,Mn.lng-ae.lng])))}for(p=0,y=0;p<Ht-1;p++)y+=ht[p].distanceTo(ht[p+1])/2;if(y===0)ee=ht[0];else for(p=0,O=0;p<Ht-1;p++)if(U=ht[p],W=ht[p+1],P=U.distanceTo(W),O+=P,O>y){q=(O-y)/P,ee=[W.x-q*(W.x-U.x),W.y-q*(W.y-U.y)];break}var Jt=c.unproject(G(ee));return le([Jt.lat+ae.lat,Jt.lng+ae.lng])}var UE={__proto__:null,simplify:Yy,pointToSegmentDistance:Xy,closestPointOnSegment:zE,clipSegment:Jy,_getEdgeIntersection:cc,_getBitCode:Xi,_sqClosestPointOnSegment:po,isFlat:Tn,_flat:ex,polylineCenter:tx},wh={project:function(o){return new D(o.lng,o.lat)},unproject:function(o){return new re(o.y,o.x)},bounds:new V([-180,-90],[180,90])},jh={R:6378137,R_MINOR:6356752314245179e-9,bounds:new V([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,p=this.R,y=o.lat*c,P=this.R_MINOR/p,O=Math.sqrt(1-P*P),U=O*Math.sin(y),W=Math.tan(Math.PI/4-y/2)/Math.pow((1-U)/(1+U),O/2);return y=-p*Math.log(Math.max(W,1e-10)),new D(o.lng*c*p,y)},unproject:function(o){for(var c=180/Math.PI,p=this.R,y=this.R_MINOR/p,P=Math.sqrt(1-y*y),O=Math.exp(-o.y/p),U=Math.PI/2-2*Math.atan(O),W=0,q=.1,ee;W<15&&Math.abs(q)>1e-7;W++)ee=P*Math.sin(U),ee=Math.pow((1-ee)/(1+ee),P/2),q=Math.PI/2-2*Math.atan(O*ee)-U,U+=q;return new re(U*c,o.x*c/p)}},HE={__proto__:null,LonLat:wh,Mercator:jh,SphericalMercator:ge},ZE=i({},Qt,{code:"EPSG:3395",projection:jh,transformation:function(){var o=.5/(Math.PI*jh.R);return te(o,.5,-o,.5)}()}),nx=i({},Qt,{code:"EPSG:4326",projection:wh,transformation:te(1/180,1,-1/180,.5)}),WE=i({},Ne,{projection:wh,transformation:te(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var p=c.lng-o.lng,y=c.lat-o.lat;return Math.sqrt(p*p+y*y)},infinite:!0});Ne.Earth=Qt,Ne.EPSG3395=ZE,Ne.EPSG3857=tt,Ne.EPSG900913=xe,Ne.EPSG4326=nx,Ne.Simple=WE;var ir=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[d(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[d(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Se.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=d(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=d(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return d(o)in this._layers},eachLayer:function(o,c){for(var p in this._layers)o.call(c,this._layers[p]);return this},_addLayers:function(o){o=o?_(o)?o:[o]:[];for(var c=0,p=o.length;c<p;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[d(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=d(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,p=this._getZoomSpan();for(var y in this._zoomBoundLayers){var P=this._zoomBoundLayers[y].options;o=P.minZoom===void 0?o:Math.min(o,P.minZoom),c=P.maxZoom===void 0?c:Math.max(c,P.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ua=ir.extend({initialize:function(o,c){w(this,c),this._layers={};var p,y;if(o)for(p=0,y=o.length;p<y;p++)this.addLayer(o[p])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),p,y;for(p in this._layers)y=this._layers[p],y[o]&&y[o].apply(y,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var p in this._layers)o.call(c,this._layers[p]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return d(o)}}),VE=function(o,c){return new Ua(o,c)},Dr=Ua.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ua.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ua.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new H;for(var c in this._layers){var p=this._layers[c];o.extend(p.getBounds?p.getBounds():p.getLatLng())}return o}}),KE=function(o,c){return new Dr(o,c)},Ha=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){w(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var p=this._getIconUrl(o);if(!p){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(y,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(o,c){var p=this.options,y=p[c+"Size"];typeof y=="number"&&(y=[y,y]);var P=G(y),O=G(c==="shadow"&&p.shadowAnchor||p.iconAnchor||P&&P.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(p.className||""),O&&(o.style.marginLeft=-O.x+"px",o.style.marginTop=-O.y+"px"),P&&(o.style.width=P.x+"px",o.style.height=P.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return ce.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function qE(o){return new Ha(o)}var go=Ha.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof go.imagePath!="string"&&(go.imagePath=this._detectIconPath()),(this.options.imagePath||go.imagePath)+Ha.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(p,y,P){var O=y.exec(p);return O&&O[P]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Ce("div","leaflet-default-icon-path",document.body),c=lo(o,"background-image")||lo(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),rx=_r.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new fi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,p=c._map,y=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,O=qi(c._icon),U=p.getPixelBounds(),W=p.getPixelOrigin(),q=Y(U.min._subtract(W).add(P),U.max._subtract(W).subtract(P));if(!q.contains(O)){var ee=G((Math.max(q.max.x,O.x)-q.max.x)/(U.max.x-q.max.x)-(Math.min(q.min.x,O.x)-q.min.x)/(U.min.x-q.min.x),(Math.max(q.max.y,O.y)-q.max.y)/(U.max.y-q.max.y)-(Math.min(q.min.y,O.y)-q.min.y)/(U.min.y-q.min.y)).multiplyBy(y);p.panBy(ee,{animate:!1}),this._draggable._newPos._add(ee),this._draggable._startPos._add(ee),nt(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=M(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,p=c._shadow,y=qi(c._icon),P=c._map.layerPointToLatLng(y);p&&nt(p,y),c._latlng=P,o.latlng=P,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),uc=ir.extend({options:{icon:new go,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){w(this,c),this._latlng=le(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=le(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=o.icon.createIcon(this._icon),y=!1;p!==this._icon&&(this._icon&&this._removeIcon(),y=!0,o.title&&(p.title=o.title),p.tagName==="IMG"&&(p.alt=o.alt||"")),be(p,c),o.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ve(p,"focus",this._panOnFocus,this);var P=o.icon.createShadow(this._shadow),O=!1;P!==this._shadow&&(this._removeShadow(),O=!0),P&&(be(P,c),P.alt=""),this._shadow=P,o.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&O&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&nt(this._icon,o),this._shadow&&nt(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),rx)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new rx(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&An(this._icon,o),this._shadow&&An(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,p=c.iconSize?G(c.iconSize):G(0,0),y=c.iconAnchor?G(c.iconAnchor):G(0,0);o.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:p.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function GE(o,c){return new uc(o,c)}var hi=ir.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return w(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),dc=hi.extend({options:{fill:!0,radius:10},initialize:function(o,c){w(this,c),this._latlng=le(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=le(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return hi.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,p=this._clickTolerance(),y=[o+p,c+p];this._pxBounds=new V(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function YE(o,c){return new dc(o,c)}var Nh=dc.extend({initialize:function(o,c,p){if(typeof c=="number"&&(c=i({},p,{radius:c})),w(this,c),this._latlng=le(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:hi.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,p=this._map,y=p.options.crs;if(y.distance===Qt.distance){var P=Math.PI/180,O=this._mRadius/Qt.R/P,U=p.project([c+O,o]),W=p.project([c-O,o]),q=U.add(W).divideBy(2),ee=p.unproject(q).lat,ae=Math.acos((Math.cos(O*P)-Math.sin(c*P)*Math.sin(ee*P))/(Math.cos(c*P)*Math.cos(ee*P)))/P;(isNaN(ae)||ae===0)&&(ae=O/Math.cos(Math.PI/180*c)),this._point=q.subtract(p.getPixelOrigin()),this._radius=isNaN(ae)?0:q.x-p.project([ee,o-ae]).x,this._radiusY=q.y-U.y}else{var he=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(he).x}this._updateBounds()}});function XE(o,c,p){return new Nh(o,c,p)}var Ir=hi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){w(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,p=null,y=po,P,O,U=0,W=this._parts.length;U<W;U++)for(var q=this._parts[U],ee=1,ae=q.length;ee<ae;ee++){P=q[ee-1],O=q[ee];var he=y(o,P,O,!0);he<c&&(c=he,p=y(o,P,O))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tx(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=le(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new H,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],p=Tn(o),y=0,P=o.length;y<P;y++)p?(c[y]=le(o[y]),this._bounds.extend(c[y])):c[y]=this._convertLatLngs(o[y]);return c},_project:function(){var o=new V;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new D(o,o);this._rawPxBounds&&(this._pxBounds=new V([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,p){var y=o[0]instanceof re,P=o.length,O,U;if(y){for(U=[],O=0;O<P;O++)U[O]=this._map.latLngToLayerPoint(o[O]),p.extend(U[O]);c.push(U)}else for(O=0;O<P;O++)this._projectLatlngs(o[O],c,p)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,y,P,O,U,W,q;for(p=0,P=0,O=this._rings.length;p<O;p++)for(q=this._rings[p],y=0,U=q.length;y<U-1;y++)W=Jy(q[y],q[y+1],o,y,!0),W&&(c[P]=c[P]||[],c[P].push(W[0]),(W[1]!==q[y+1]||y===U-2)&&(c[P].push(W[1]),P++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,p=0,y=o.length;p<y;p++)o[p]=Yy(o[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var p,y,P,O,U,W,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(p=0,O=this._parts.length;p<O;p++)for(W=this._parts[p],y=0,U=W.length,P=U-1;y<U;P=y++)if(!(!c&&y===0)&&Xy(o,W[P],W[y])<=q)return!0;return!1}});function QE(o,c){return new Ir(o,c)}Ir._flat=ex;var Za=Ir.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gy(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=Ir.prototype._convertLatLngs.call(this,o),p=c.length;return p>=2&&c[0]instanceof re&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(o){Ir.prototype._setLatLngs.call(this,o),Tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Tn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,p=new D(c,c);if(o=new V(o.min.subtract(p),o.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,P=this._rings.length,O;y<P;y++)O=qy(this._rings[y],o,!0),O.length&&this._parts.push(O)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,p,y,P,O,U,W,q,ee;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(O=0,q=this._parts.length;O<q;O++)for(p=this._parts[O],U=0,ee=p.length,W=ee-1;U<ee;W=U++)y=p[U],P=p[W],y.y>o.y!=P.y>o.y&&o.x<(P.x-y.x)*(o.y-y.y)/(P.y-y.y)+y.x&&(c=!c);return c||Ir.prototype._containsPoint.call(this,o,!0)}});function JE(o,c){return new Za(o,c)}var Rr=Dr.extend({initialize:function(o,c){w(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=_(o)?o:o.features,p,y,P;if(c){for(p=0,y=c.length;p<y;p++)P=c[p],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var O=this.options;if(O.filter&&!O.filter(o))return this;var U=fc(o,O);return U?(U.feature=pc(o),U.defaultOptions=U.options,this.resetStyle(U),O.onEachFeature&&O.onEachFeature(o,U),this.addLayer(U)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function fc(o,c){var p=o.type==="Feature"?o.geometry:o,y=p?p.coordinates:null,P=[],O=c&&c.pointToLayer,U=c&&c.coordsToLatLng||Sh,W,q,ee,ae;if(!y&&!p)return null;switch(p.type){case"Point":return W=U(y),ix(O,o,W,c);case"MultiPoint":for(ee=0,ae=y.length;ee<ae;ee++)W=U(y[ee]),P.push(ix(O,o,W,c));return new Dr(P);case"LineString":case"MultiLineString":return q=hc(y,p.type==="LineString"?0:1,U),new Ir(q,c);case"Polygon":case"MultiPolygon":return q=hc(y,p.type==="Polygon"?1:2,U),new Za(q,c);case"GeometryCollection":for(ee=0,ae=p.geometries.length;ee<ae;ee++){var he=fc({geometry:p.geometries[ee],type:"Feature",properties:o.properties},c);he&&P.push(he)}return new Dr(P);case"FeatureCollection":for(ee=0,ae=p.features.length;ee<ae;ee++){var we=fc(p.features[ee],c);we&&P.push(we)}return new Dr(P);default:throw new Error("Invalid GeoJSON object.")}}function ix(o,c,p,y){return o?o(c,p):new uc(p,y&&y.markersInheritOptions&&y)}function Sh(o){return new re(o[1],o[0],o[2])}function hc(o,c,p){for(var y=[],P=0,O=o.length,U;P<O;P++)U=c?hc(o[P],c-1,p):(p||Sh)(o[P]),y.push(U);return y}function Ph(o,c){return o=le(o),o.alt!==void 0?[g(o.lng,c),g(o.lat,c),g(o.alt,c)]:[g(o.lng,c),g(o.lat,c)]}function mc(o,c,p,y){for(var P=[],O=0,U=o.length;O<U;O++)P.push(c?mc(o[O],Tn(o[O])?0:c-1,p,y):Ph(o[O],y));return!c&&p&&P.length>0&&P.push(P[0].slice()),P}function Wa(o,c){return o.feature?i({},o.feature,{geometry:c}):pc(c)}function pc(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var kh={toGeoJSON:function(o){return Wa(this,{type:"Point",coordinates:Ph(this.getLatLng(),o)})}};uc.include(kh),Nh.include(kh),dc.include(kh),Ir.include({toGeoJSON:function(o){var c=!Tn(this._latlngs),p=mc(this._latlngs,c?1:0,!1,o);return Wa(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),Za.include({toGeoJSON:function(o){var c=!Tn(this._latlngs),p=c&&!Tn(this._latlngs[0]),y=mc(this._latlngs,p?2:c?1:0,!0,o);return c||(y=[y]),Wa(this,{type:(p?"Multi":"")+"Polygon",coordinates:y})}}),Ua.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(o).geometry.coordinates)}),Wa(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var p=c==="GeometryCollection",y=[];return this.eachLayer(function(P){if(P.toGeoJSON){var O=P.toGeoJSON(o);if(p)y.push(O.geometry);else{var U=pc(O);U.type==="FeatureCollection"?y.push.apply(y,U.features):y.push(U)}}}),p?Wa(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function ax(o,c){return new Rr(o,c)}var eO=ax,gc=ir.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,p){this._url=o,this._bounds=J(c),w(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Ba(this._image),this},bringToBack:function(){return this._map&&Fa(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=J(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:Ce("img");if(be(c,"leaflet-image-layer"),this._zoomAnimated&&be(c,"leaflet-zoom-animated"),this.options.className&&be(c,this.options.className),c.onselectstart=m,c.onmousemove=m,c.onload=l(this.fire,this,"load"),c.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Ki(this._image,p,c)},_reset:function(){var o=this._image,c=new V(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();nt(o,c.min),o.style.width=p.x+"px",o.style.height=p.y+"px"},_updateOpacity:function(){An(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),tO=function(o,c,p){return new gc(o,c,p)},sx=gc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:Ce("video");if(be(c,"leaflet-image-layer"),this._zoomAnimated&&be(c,"leaflet-zoom-animated"),this.options.className&&be(c,this.options.className),c.onselectstart=m,c.onmousemove=m,c.onloadeddata=l(this.fire,this,"load"),o){for(var p=c.getElementsByTagName("source"),y=[],P=0;P<p.length;P++)y.push(p[P].src);this._url=p.length>0?y:[c.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var O=0;O<this._url.length;O++){var U=Ce("source");U.src=this._url[O],c.appendChild(U)}}});function nO(o,c,p){return new sx(o,c,p)}var ox=gc.extend({_initImage:function(){var o=this._image=this._url;be(o,"leaflet-image-layer"),this._zoomAnimated&&be(o,"leaflet-zoom-animated"),this.options.className&&be(o,this.options.className),o.onselectstart=m,o.onmousemove=m}});function rO(o,c,p){return new ox(o,c,p)}var wr=ir.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof re||_(o))?(this._latlng=le(o),w(this,c)):(w(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&An(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&An(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(An(this._container,0),this._removeTimeout=setTimeout(l(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&(Xe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=le(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ba(this._container),this},bringToBack:function(){return this._map&&Fa(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof Dr){c=null;var p=this._source._layers;for(var y in p)if(p[y]._map){c=p[y];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=G(this.options.offset),p=this._getAnchor();this._zoomAnimated?nt(this._container,o.add(p)):c=c.add(o).add(p);var y=this._containerBottom=-c.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=y+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});Se.include({_initOverlay:function(o,c,p,y){var P=c;return P instanceof o||(P=new o(y).setContent(c)),p&&P.setLatLng(p),P}}),ir.include({_initOverlay:function(o,c,p,y){var P=p;return P instanceof o?(w(P,y),P._source=this):(P=c&&!y?c:new o(y,this),P.setContent(p)),P}});var vc=wr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,wr.prototype.openOn.call(this,o)},onAdd:function(o){wr.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hi||this._source.on("preclick",Gi))},onRemove:function(o){wr.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hi||this._source.off("preclick",Gi))},getEvents:function(){var o=wr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=Ce("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Ce("div",o+"-content-wrapper",c);if(this._contentNode=Ce("div",o+"-content",p),ho(c),gh(this._contentNode),ve(c,"contextmenu",Gi),this._tipContainer=Ce("div",o+"-tip-container",c),this._tip=Ce("div",o+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=Ce("a",o+"-close-button",c);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',ve(y,"click",function(P){_t(P),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var p=o.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var y=o.offsetHeight,P=this.options.maxHeight,O="leaflet-popup-scrolled";P&&y>P?(c.height=P+"px",be(o,O)):Xe(o,O),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),p=this._getAnchor();nt(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(lo(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,y=this._containerWidth,P=new D(this._containerLeft,-p-this._containerBottom);P._add(qi(this._container));var O=o.layerPointToContainerPoint(P),U=G(this.options.autoPanPadding),W=G(this.options.autoPanPaddingTopLeft||U),q=G(this.options.autoPanPaddingBottomRight||U),ee=o.getSize(),ae=0,he=0;O.x+y+q.x>ee.x&&(ae=O.x+y-ee.x+q.x),O.x-ae-W.x<0&&(ae=O.x-W.x),O.y+p+q.y>ee.y&&(he=O.y+p-ee.y+q.y),O.y-he-W.y<0&&(he=O.y-W.y),(ae||he)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([ae,he]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),iO=function(o,c){return new vc(o,c)};Se.mergeOptions({closePopupOnClick:!0}),Se.include({openPopup:function(o,c,p){return this._initOverlay(vc,o,c,p).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),ir.include({bindPopup:function(o,c){return this._popup=this._initOverlay(vc,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Dr||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Yi(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof hi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var yc=wr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){wr.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){wr.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=wr.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ce("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,p,y=this._map,P=this._container,O=y.latLngToContainerPoint(y.getCenter()),U=y.layerPointToContainerPoint(o),W=this.options.direction,q=P.offsetWidth,ee=P.offsetHeight,ae=G(this.options.offset),he=this._getAnchor();W==="top"?(c=q/2,p=ee):W==="bottom"?(c=q/2,p=0):W==="center"?(c=q/2,p=ee/2):W==="right"?(c=0,p=ee/2):W==="left"?(c=q,p=ee/2):U.x<O.x?(W="right",c=0,p=ee/2):(W="left",c=q+(ae.x+he.x)*2,p=ee/2),o=o.subtract(G(c,p,!0)).add(ae).add(he),Xe(P,"leaflet-tooltip-right"),Xe(P,"leaflet-tooltip-left"),Xe(P,"leaflet-tooltip-top"),Xe(P,"leaflet-tooltip-bottom"),be(P,"leaflet-tooltip-"+W),nt(P,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&An(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),aO=function(o,c){return new yc(o,c)};Se.include({openTooltip:function(o,c,p){return this._initOverlay(yc,o,c,p).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),ir.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(yc,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Dr||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(ve(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ve(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,p,y;this._tooltip.options.sticky&&o.originalEvent&&(p=this._map.mouseEventToContainerPoint(o.originalEvent),y=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(c)}});var lx=Ha.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),p=this.options;if(p.html instanceof Element?(ic(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var y=G(p.bgPos);c.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function sO(o){return new lx(o)}Ha.Default=go;var vo=ir.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){w(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Ve(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ba(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Fa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof D?o:new D(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,p=-o(-1/0,1/0),y=0,P=c.length,O;y<P;y++)O=c[y].style.zIndex,c[y]!==this._container&&O&&(p=o(p,+O));isFinite(p)&&(this.options.zIndex=p+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){An(this._container,this.options.opacity);var o=+new Date,c=!1,p=!1;for(var y in this._tiles){var P=this._tiles[y];if(!(!P.current||!P.loaded)){var O=Math.min(1,(o-P.loaded)/200);An(P.el,O),O<1?c=!0:(P.active?p=!0:this._onOpaqueTile(P),P.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&($(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Ce("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===o?(this._levels[p].el.style.zIndex=c-Math.abs(o-p),this._onUpdateLevel(p)):(Ve(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var y=this._levels[o],P=this._map;return y||(y=this._levels[o]={},y.el=Ce("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=c,y.origin=P.project(P.unproject(P.getPixelOrigin()),o).round(),y.zoom=o,this._setZoomTransform(y,P.getCenter(),P.getZoom()),m(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var o,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var y=c.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Ve(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,p,y){var P=Math.floor(o/2),O=Math.floor(c/2),U=p-1,W=new D(+P,+O);W.z=+U;var q=this._tileCoordsToKey(W),ee=this._tiles[q];return ee&&ee.active?(ee.retain=!0,!0):(ee&&ee.loaded&&(ee.retain=!0),U>y?this._retainParent(P,O,U,y):!1)},_retainChildren:function(o,c,p,y){for(var P=2*o;P<2*o+2;P++)for(var O=2*c;O<2*c+2;O++){var U=new D(P,O);U.z=p+1;var W=this._tileCoordsToKey(U),q=this._tiles[W];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);p+1<y&&this._retainChildren(P,O,p+1,y)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,p,y){var P=Math.round(c);this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom?P=void 0:P=this._clampZoom(P);var O=this.options.updateWhenZooming&&P!==this._tileZoom;(!y||O)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(o),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],o,c)},_setZoomTransform:function(o,c,p){var y=this._map.getZoomScale(p,o.zoom),P=o.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(c,p)).round();ce.any3d?Ki(o.el,P,y):nt(o.el,P)},_resetGrid:function(){var o=this._map,c=o.options.crs,p=this._tileSize=this.getTileSize(),y=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],y).x/p.x),Math.ceil(o.project([0,c.wrapLng[1]],y).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],y).y/p.x),Math.ceil(o.project([c.wrapLat[1],0],y).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),y=c.getZoomScale(p,this._tileZoom),P=c.project(o,this._tileZoom).floor(),O=c.getSize().divideBy(y*2);return new V(P.subtract(O),P.add(O))},_update:function(o){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(o),P=this._pxBoundsToTileRange(y),O=P.getCenter(),U=[],W=this.options.keepBuffer,q=new V(P.getBottomLeft().subtract([W,-W]),P.getTopRight().add([W,-W]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ee in this._tiles){var ae=this._tiles[ee].coords;(ae.z!==this._tileZoom||!q.contains(new D(ae.x,ae.y)))&&(this._tiles[ee].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(o,p);return}for(var he=P.min.y;he<=P.max.y;he++)for(var we=P.min.x;we<=P.max.x;we++){var Ht=new D(we,he);if(Ht.z=this._tileZoom,!!this._isValidTile(Ht)){var ht=this._tiles[this._tileCoordsToKey(Ht)];ht?ht.current=!0:U.push(Ht)}}if(U.sort(function(Jt,Ka){return Jt.distanceTo(O)-Ka.distanceTo(O)}),U.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mn=document.createDocumentFragment();for(we=0;we<U.length;we++)this._addTile(U[we],Mn);this._level.el.appendChild(Mn)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(o.x<p.min.x||o.x>p.max.x)||!c.wrapLat&&(o.y<p.min.y||o.y>p.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(o);return J(this.options.bounds).overlaps(y)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,p=this.getTileSize(),y=o.scaleBy(p),P=y.add(p),O=c.unproject(y,o.z),U=c.unproject(P,o.z);return[O,U]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),p=new H(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),p=new D(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(o){var c=this._tiles[o];c&&(Ve(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){be(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=m,o.onmousemove=m,ce.ielt9&&this.options.opacity<1&&An(o,this.options.opacity)},_addTile:function(o,c){var p=this._getTilePos(o),y=this._tileCoordsToKey(o),P=this.createTile(this._wrapCoords(o),l(this._tileReady,this,o));this._initTile(P),this.createTile.length<2&&M(l(this._tileReady,this,o,null,P)),nt(P,p),this._tiles[y]={el:P,coords:o,current:!0},c.appendChild(P),this.fire("tileloadstart",{tile:P,coords:o})},_tileReady:function(o,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:o});var y=this._tileCoordsToKey(o);p=this._tiles[y],p&&(p.loaded=+new Date,this._map._fadeAnimated?(An(p.el,0),$(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(be(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new D(this._wrapX?f(o.x,this._wrapX):o.x,this._wrapY?f(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new V(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function oO(o){return new vo(o)}var Va=vo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=w(this,c),c.detectRetina&&ce.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var p=document.createElement("img");return ve(p,"load",l(this._tileOnLoad,this,c,p)),ve(p,"error",l(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(o),p},getTileUrl:function(o){var c={r:ce.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=p),c["-y"]=p}return j(this._url,i(c,this.options))},_tileOnLoad:function(o,c){ce.ielt9?setTimeout(l(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,p){var y=this.options.errorTileUrl;y&&c.getAttribute("src")!==y&&(c.src=y),o(p,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,y=this.options.zoomOffset;return p&&(o=c-o),o+y},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=m,c.onerror=m,!c.complete)){c.src=C;var p=this._tiles[o].coords;Ve(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",C),vo.prototype._removeTile.call(this,o)},_tileReady:function(o,c,p){if(!(!this._map||p&&p.getAttribute("src")===C))return vo.prototype._tileReady.call(this,o,c,p)}});function cx(o,c){return new Va(o,c)}var ux=Va.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var p=i({},this.defaultWmsParams);for(var y in c)y in this.options||(p[y]=c[y]);c=w(this,c);var P=c.detectRetina&&ce.retina?2:1,O=this.getTileSize();p.width=O.x*P,p.height=O.y*P,this.wmsParams=p},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Va.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),p=this._crs,y=Y(p.project(c[0]),p.project(c[1])),P=y.min,O=y.max,U=(this._wmsVersion>=1.3&&this._crs===nx?[P.y,P.x,O.y,O.x]:[P.x,P.y,O.x,O.y]).join(","),W=Va.prototype.getTileUrl.call(this,o);return W+S(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+U},setParams:function(o,c){return i(this.wmsParams,o),c||this.redraw(),this}});function lO(o,c){return new ux(o,c)}Va.WMS=ux,cx.wms=lO;var zr=ir.extend({options:{padding:.1},initialize:function(o){w(this,o),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var p=this._map.getZoomScale(c,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,c),O=y.multiplyBy(-p).add(P).subtract(this._map._getNewPixelOrigin(o,c));ce.any3d?Ki(this._container,O,p):nt(this._container,O)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new V(p,p.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),dx=zr.extend({options:{tolerance:0},getEvents:function(){var o=zr.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ve(o,"mousemove",this._onMouseMove,this),ve(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ve(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,Ve(this._container),Ie(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zr.prototype._update.call(this);var o=this._bounds,c=this._container,p=o.getSize(),y=ce.retina?2:1;nt(c,o.min),c.width=y*p.x,c.height=y*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){zr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[d(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,p=c.next,y=c.prev;p?p.prev=y:this._drawLast=y,y?y.next=p:this._drawFirst=p,delete o._order,delete this._layers[d(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),p=[],y,P;for(P=0;P<c.length;P++){if(y=Number(c[P]),isNaN(y))return;p.push(y)}o.options._dashArray=p}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new V,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)o=y.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var p,y,P,O,U=o._parts,W=U.length,q=this._ctx;if(W){for(q.beginPath(),p=0;p<W;p++){for(y=0,P=U[p].length;y<P;y++)O=U[p][y],q[y?"lineTo":"moveTo"](O.x,O.y);c&&q.closePath()}this._fillStroke(q,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,p=this._ctx,y=Math.max(Math.round(o._radius),1),P=(Math.max(Math.round(o._radiusY),1)||y)/y;P!==1&&(p.save(),p.scale(1,P)),p.beginPath(),p.arc(c.x,c.y/P,y,0,Math.PI*2,!1),P!==1&&p.restore(),this._fillStroke(p,o)}},_fillStroke:function(o,c){var p=c.options;p.fill&&(o.globalAlpha=p.fillOpacity,o.fillStyle=p.fillColor||p.color,o.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=p.opacity,o.lineWidth=p.weight,o.strokeStyle=p.color,o.lineCap=p.lineCap,o.lineJoin=p.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),p,y,P=this._drawFirst;P;P=P.next)p=P.layer,p.options.interactive&&p._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(p))&&(y=p);this._fireEvent(y?[y]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(Xe(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var p,y,P=this._drawFirst;P;P=P.next)p=P.layer,p.options.interactive&&p._containsPoint(c)&&(y=p);y!==this._hoveredLayer&&(this._handleMouseOut(o),y&&(be(this._container,"leaflet-interactive"),this._fireEvent([y],o,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,p){this._map._fireDOMEvent(c,p||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var p=c.next,y=c.prev;if(p)p.prev=y;else return;y?y.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var p=c.next,y=c.prev;if(y)y.next=p;else return;p?p.prev=y:y&&(this._drawLast=y),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function fx(o){return ce.canvas?new dx(o):null}var yo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),cO={_initContainer:function(){this._container=Ce("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zr.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=yo("shape");be(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=yo("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;Ve(c),o.removeInteractiveTarget(c),delete this._layers[d(o)]},_updateStyle:function(o){var c=o._stroke,p=o._fill,y=o.options,P=o._container;P.stroked=!!y.stroke,P.filled=!!y.fill,y.stroke?(c||(c=o._stroke=yo("stroke")),P.appendChild(c),c.weight=y.weight+"px",c.color=y.color,c.opacity=y.opacity,y.dashArray?c.dashStyle=_(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=y.lineCap.replace("butt","flat"),c.joinstyle=y.lineJoin):c&&(P.removeChild(c),o._stroke=null),y.fill?(p||(p=o._fill=yo("fill")),P.appendChild(p),p.color=y.fillColor||y.color,p.opacity=y.fillOpacity):p&&(P.removeChild(p),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),p=Math.round(o._radius),y=Math.round(o._radiusY||p);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+y+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){Ba(o._container)},_bringToBack:function(o){Fa(o._container)}},xc=ce.vml?yo:Tt,xo=zr.extend({_initContainer:function(){this._container=xc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=xc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),Ie(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zr.prototype._update.call(this);var o=this._bounds,c=o.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),nt(p,o.min),p.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=xc("path");o.options.className&&be(c,o.options.className),o.options.interactive&&be(c,"leaflet-interactive"),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Ve(o._path),o.removeInteractiveTarget(o._path),delete this._layers[d(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,p=o.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,Mt(o._parts,c))},_updateCircle:function(o){var c=o._point,p=Math.max(Math.round(o._radius),1),y=Math.max(Math.round(o._radiusY),1)||p,P="a"+p+","+y+" 0 1,0 ",O=o._empty()?"M0 0":"M"+(c.x-p)+","+c.y+P+p*2+",0 "+P+-p*2+",0 ";this._setPath(o,O)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){Ba(o._path)},_bringToBack:function(o){Fa(o._path)}});ce.vml&&xo.include(cO);function hx(o){return ce.svg||ce.vml?new xo(o):null}Se.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&fx(o)||hx(o)}});var mx=Za.extend({initialize:function(o,c){Za.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=J(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function uO(o,c){return new mx(o,c)}xo.create=xc,xo.pointsToPath=Mt,Rr.geometryToLayer=fc,Rr.coordsToLatLng=Sh,Rr.coordsToLatLngs=hc,Rr.latLngToCoords=Ph,Rr.latLngsToCoords=mc,Rr.getFeature=Wa,Rr.asFeature=pc,Se.mergeOptions({boxZoom:!0});var px=_r.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ve(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),co(),lh(),this._startPoint=this._map.mouseEventToContainerPoint(o),ve(document,{contextmenu:Yi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Ce("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new V(this._point,this._startPoint),p=c.getSize();nt(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Ve(this._box),Xe(this._container,"leaflet-crosshair")),uo(),ch(),Ie(document,{contextmenu:Yi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var c=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Se.addInitHook("addHandler","boxZoom",px),Se.mergeOptions({doubleClickZoom:!0});var gx=_r.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,p=c.getZoom(),y=c.options.zoomDelta,P=o.originalEvent.shiftKey?p-y:p+y;c.options.doubleClickZoom==="center"?c.setZoom(P):c.setZoomAround(o.containerPoint,P)}});Se.addInitHook("addHandler","doubleClickZoom",gx),Se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vx=_r.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new fi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xe(this._map._container,"leaflet-grab"),Xe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=J(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),p=this._initialWorldOffset,y=this._draggable._newPos.x,P=(y-c+p)%o+c-p,O=(y+c+p)%o-c-p,U=Math.abs(P+p)<Math.abs(O+p)?P:O;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=U},_onDragEnd:function(o){var c=this._map,p=c.options,y=!p.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),y)c.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),O=(this._lastTime-this._times[0])/1e3,U=p.easeLinearity,W=P.multiplyBy(U/O),q=W.distanceTo([0,0]),ee=Math.min(p.inertiaMaxSpeed,q),ae=W.multiplyBy(ee/q),he=ee/(p.inertiaDeceleration*U),we=ae.multiplyBy(-he/2).round();!we.x&&!we.y?c.fire("moveend"):(we=c._limitOffset(we,c.options.maxBounds),M(function(){c.panBy(we,{duration:he,easeLinearity:U,noMoveStart:!0,animate:!0})}))}}});Se.addInitHook("addHandler","dragging",vx),Se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yx=_r.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ve(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ie(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,p=o.scrollTop||c.scrollTop,y=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(y,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},p=this.keyCodes,y,P;for(y=0,P=p.left.length;y<P;y++)c[p.left[y]]=[-1*o,0];for(y=0,P=p.right.length;y<P;y++)c[p.right[y]]=[o,0];for(y=0,P=p.down.length;y<P;y++)c[p.down[y]]=[0,o];for(y=0,P=p.up.length;y<P;y++)c[p.up[y]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},p=this.keyCodes,y,P;for(y=0,P=p.zoomIn.length;y<P;y++)c[p.zoomIn[y]]=o;for(y=0,P=p.zoomOut.length;y<P;y++)c[p.zoomOut[y]]=-o},_addHooks:function(){ve(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,p=this._map,y;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(y=this._panKeys[c],o.shiftKey&&(y=G(y).multiplyBy(3)),p.options.maxBounds&&(y=p._limitOffset(G(y),p.options.maxBounds)),p.options.worldCopyJump){var P=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(y)));p.panTo(P)}else p.panBy(y)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Yi(o)}}});Se.addInitHook("addHandler","keyboard",yx),Se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xx=_r.extend({addHooks:function(){ve(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=Hy(o),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var y=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),y),Yi(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),p=this._map.options.zoomSnap||0;o._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),P=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,O=p?Math.ceil(P/p)*p:P,U=o._limitZoom(c+(this._delta>0?O:-O))-c;this._delta=0,this._startTime=null,U&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+U):o.setZoomAround(this._lastMousePos,c+U))}});Se.addInitHook("addHandler","scrollWheelZoom",xx);var dO=600;Se.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var bx=_r.extend({addHooks:function(){ve(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new D(c.clientX,c.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ve(document,"touchend",_t),ve(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),dO),ve(document,"touchend touchcancel contextmenu",this._cancel,this),ve(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Ie(document,"touchend",_t),Ie(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new D(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var p=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});Se.addInitHook("addHandler","tapHold",bx),Se.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var _x=_r.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),ve(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xe(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(o.touches[0]),y=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(y)._divideBy(2))),this._startDist=p.distanceTo(y),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ve(document,"touchmove",this._onTouchMove,this),ve(document,"touchend touchcancel",this._onTouchEnd,this),_t(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(o.touches[0]),y=c.mouseEventToContainerPoint(o.touches[1]),P=p.distanceTo(y)/this._startDist;if(this._zoom=c.getScaleZoom(P,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&P<1||this._zoom>c.getMaxZoom()&&P>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,P===1)return}else{var O=p._add(y)._divideBy(2)._subtract(this._centerPoint);if(P===1&&O.x===0&&O.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(O),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var U=l(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(U,this,!0),_t(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Se.addInitHook("addHandler","touchZoom",_x),Se.BoxZoom=px,Se.DoubleClickZoom=gx,Se.Drag=vx,Se.Keyboard=yx,Se.ScrollWheelZoom=xx,Se.TapHold=bx,Se.TouchZoom=_x,n.Bounds=V,n.Browser=ce,n.CRS=Ne,n.Canvas=dx,n.Circle=Nh,n.CircleMarker=dc,n.Class=E,n.Control=rr,n.DivIcon=lx,n.DivOverlay=wr,n.DomEvent=EE,n.DomUtil=kE,n.Draggable=fi,n.Evented=K,n.FeatureGroup=Dr,n.GeoJSON=Rr,n.GridLayer=vo,n.Handler=_r,n.Icon=Ha,n.ImageOverlay=gc,n.LatLng=re,n.LatLngBounds=H,n.Layer=ir,n.LayerGroup=Ua,n.LineUtil=UE,n.Map=Se,n.Marker=uc,n.Mixin=IE,n.Path=hi,n.Point=D,n.PolyUtil=RE,n.Polygon=Za,n.Polyline=Ir,n.Popup=vc,n.PosAnimation=Zy,n.Projection=HE,n.Rectangle=mx,n.Renderer=zr,n.SVG=xo,n.SVGOverlay=ox,n.TileLayer=Va,n.Tooltip=yc,n.Transformation=me,n.Util=F,n.VideoOverlay=sx,n.bind=l,n.bounds=Y,n.canvas=fx,n.circle=XE,n.circleMarker=YE,n.control=mo,n.divIcon=sO,n.extend=i,n.featureGroup=KE,n.geoJSON=ax,n.geoJson=eO,n.gridLayer=oO,n.icon=qE,n.imageOverlay=tO,n.latLng=le,n.latLngBounds=J,n.layerGroup=VE,n.map=OE,n.marker=GE,n.point=G,n.polygon=JE,n.polyline=QE,n.popup=iO,n.rectangle=uO,n.setOptions=w,n.stamp=d,n.svg=hx,n.svgOverlay=rO,n.tileLayer=cx,n.tooltip=aO,n.transformation=te,n.version=r,n.videoOverlay=nO;var fO=window.L;n.noConflict=function(){return window.L=fO,this},window.L=n})})(Ng,Ng.exports);var Wi=Ng.exports;const tl=Mr(Wi);function ao(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Gf(e,t){return t==null?function(r,i){const s=x.useRef();return s.current||(s.current=e(r,i)),s}:function(r,i){const s=x.useRef();s.current||(s.current=e(r,i));const l=x.useRef(r),{instance:u}=s.current;return x.useEffect(function(){l.current!==r&&(t(u,r,l.current),l.current=r)},[u,r,i]),s}}function ZC(e,t){x.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var s;(s=t.layerContainer)==null||s.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function WC(e){return function(n){const r=Kf(),i=e(qf(n,r),r);return $C(r.map,n.attribution),hy(i.current,n.eventHandlers),ZC(i.current,r),i}}function $H(e,t){const n=x.useRef();x.useEffect(function(){if(t.pathOptions!==n.current){const i=t.pathOptions??{};e.instance.setStyle(i),n.current=i}},[e,t])}function BH(e){return function(n){const r=Kf(),i=e(qf(n,r),r);return hy(i.current,n.eventHandlers),ZC(i.current,r),$H(i.current,n),i}}function FH(e,t){const n=Gf(e,t),r=WC(n);return HC(r)}function UH(e,t){const n=Gf(e),r=zH(n,t);return IH(r)}function my(e,t){const n=Gf(e,t),r=BH(n);return HC(r)}function HH(e,t){const n=Gf(e,t),r=WC(n);return RH(r)}function ZH(e,t,n){const{opacity:r,zIndex:i}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function py(){return Kf().map}function gy(e){const t=py();return x.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const WH=my(function({center:t,children:n,...r},i){const s=new Wi.Circle(t,r);return ao(s,Vf(i,{overlayContainer:s}))},BC),VC=my(function({center:t,children:n,...r},i){const s=new Wi.CircleMarker(t,r);return ao(s,Vf(i,{overlayContainer:s}))},BC);function Sg(){return Sg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sg.apply(this,arguments)}function VH({bounds:e,boundsOptions:t,center:n,children:r,className:i,id:s,placeholder:l,style:u,whenReady:d,zoom:h,...f},m){const[g]=x.useState({className:i,id:s,style:u}),[v,N]=x.useState(null);x.useImperativeHandle(m,()=>(v==null?void 0:v.map)??null,[v]);const w=x.useCallback(b=>{if(b!==null&&v===null){const j=new Wi.Map(b,f);n!=null&&h!=null?j.setView(n,h):e!=null&&j.fitBounds(e,t),d!=null&&j.whenReady(d),N(DH(j))}},[]);x.useEffect(()=>()=>{v==null||v.map.remove()},[v]);const S=v?yu.createElement(UC,{value:v},r):l??null;return yu.createElement("div",Sg({},g,{ref:w}),S)}const Yf=x.forwardRef(VH),ds=FH(function({position:t,...n},r){const i=new Wi.Marker(t,n);return ao(i,Vf(r,{overlayContainer:i}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),Ol=my(function({positions:t,...n},r){const i=new Wi.Polygon(t,n);return ao(i,Vf(r,{overlayContainer:i}))},function(t,n,r){n.positions!==r.positions&&t.setLatLngs(n.positions)}),ia=UH(function(t,n){const r=new Wi.Popup(t,n.overlayContainer);return ao(r,n)},function(t,n,{position:r},i){x.useEffect(function(){const{instance:l}=t;function u(h){h.popup===l&&(l.update(),i(!0))}function d(h){h.popup===l&&i(!1)}return n.map.on({popupopen:u,popupclose:d}),n.overlayContainer==null?(r!=null&&l.setLatLng(r),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var f;n.map.off({popupopen:u,popupclose:d}),(f=n.overlayContainer)==null||f.unbindPopup(),n.map.removeLayer(l)}},[t,n,i,r])}),Xf=HH(function({url:t,...n},r){const i=new Wi.TileLayer(t,qf(n,r));return ao(i,r)},function(t,n,r){ZH(t,n,r);const{url:i}=n;i!=null&&i!==r.url&&t.setUrl(i)}),KC="dummyMapAreas",vy=e=>{try{localStorage.setItem(KC,JSON.stringify(e))}catch(t){console.error("Failed saving areas to localStorage",t)}},Qf=()=>{try{const e=localStorage.getItem(KC);return e?JSON.parse(e):[...Hu]}catch(e){return console.error("Failed loading areas from localStorage",e),[...Hu]}},nc=async()=>({data:Qf().sort((t,n)=>t.name.localeCompare(n.name)),error:null}),KH=async e=>{const t=Qf(),n={...e,id:et(),created_at:fe(),updated_at:fe()};return t.push(n),vy(t),{data:n,error:null}},qH=async(e,t)=>{const n=Qf(),r=n.findIndex(i=>i.id===e);return r===-1?{data:null,error:{message:"Area not found"}}:(n[r]={...n[r],...t,updated_at:fe()},vy(n),{data:n[r],error:null})},GH=async e=>{const t=Qf(),n=t.findIndex(i=>i.id===e);if(n===-1)return{error:{message:"Area not found"}};const[r]=t.splice(n,1);vy(t);try{const i=await dn();await Promise.all((i.data||[]).filter(s=>s.area_id===e||s.area_name===(r==null?void 0:r.name)).map(s=>WN(s.id,{area_id:void 0,area_name:void 0})))}catch{}try{const i=await Ot();await Promise.all((i.data||[]).filter(s=>s.area_id===e||s.area_name===(r==null?void 0:r.name)).map(s=>Ku(s.id,{area_id:void 0,area_name:void 0})))}catch{}return{error:null}},YH=async e=>{const[t,n]=await Promise.all([dn(),Ot()]);return{volunteerCount:(t.data||[]).filter(r=>r.area_id===e).length,patientCount:(n.data||[]).filter(r=>r.area_id===e).length,error:null}},Em=new Map,XH=async e=>{if(!e||e.trim().length===0)return null;const t=e.toLowerCase().trim();if(Em.has(t))return Em.get(t);try{const n=encodeURIComponent(e),r=await fetch(`https://nominatim.openstreetmap.org/search?q=${n}&format=json&limit=1`,{headers:{"User-Agent":"HealthcareApp/1.0"}});if(!r.ok)return console.error("Geocoding API error:",r.statusText),null;const i=await r.json();if(!i||i.length===0)return console.warn("No geocoding results for address:",e),null;const s={lat:parseFloat(i[0].lat),lng:parseFloat(i[0].lon),display_name:i[0].display_name,confidence:parseFloat(i[0].importance||"0.5")};return Em.set(t,s),s}catch(n){return console.error("Error geocoding address:",n),null}},QH=(e,t)=>{const n=e[1],r=e[0];let i=!1;for(let s=0,l=t.length-1;s<t.length;l=s++){const u=t[s][1],d=t[s][0],h=t[l][1],f=t[l][0];d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(i=!i)}return i},qC=(e,t,n)=>{const r=[e,t];for(const i of n)if(i.geometry&&i.geometry.coordinates&&i.geometry.coordinates.length>0){const s=i.geometry.coordinates[0];if(QH(r,s))return i}return null},JH=async(e,t,n)=>{if(typeof e!="number"||typeof t!="number")return{area:null,method:"none",confidence:"low"};const r=qC(e,t,n);return r?{area:r,method:"gps",confidence:"high"}:{area:null,method:"none",confidence:"low"}},eZ=async(e,t)=>{const n=await XH(e);if(!n)return{area:null,method:"none",confidence:"low"};const r=qC(n.lat,n.lng,t);return r?{area:r,method:"address",confidence:n.confidence>.7?"high":n.confidence>.4?"medium":"low",geocodedLat:n.lat,geocodedLng:n.lng}:{area:null,method:"none",confidence:"low",geocodedLat:n.lat,geocodedLng:n.lng}},GC=async(e,t,n,r)=>{const i=await JH(e,t,r);if(i.area&&i.confidence==="high")return i;const s=await eZ(n,r);return s.area?s:i.area?i:{area:null,method:"none",confidence:"low"}},YC=["Amnat Charoen","Ang Thong","Bangkok","Bueng Kan","Buri Ram","Chachoengsao","Chai Nat","Chaiyaphum","Chanthaburi","Chiang Mai","Chiang Rai","Chon Buri","Chumphon","Kalasin","Kamphaeng Phet","Kanchanaburi","Khon Kaen","Krabi","Lampang","Lamphun","Loei","Lop Buri","Mae Hong Son","Maha Sarakham","Mukdahan","Nakhon Nayok","Nakhon Pathom","Nakhon Phanom","Nakhon Ratchasima","Nakhon Sawan","Nakhon Si Thammarat","Nan","Narathiwat","Nong Bua Lam Phu","Nong Khai","Nonthaburi","Pathum Thani","Pattani","Phangnga","Phatthalung","Phayao","Phetchabun","Phetchaburi","Phichit","Phitsanulok","Phrae","Phuket","Prachin Buri","Prachuap Khiri Khan","Ranong","Ratchaburi","Rayong","Roi Et","Sa Kaeo","Sakon Nakhon","Samut Prakan","Samut Sakhon","Samut Songkhram","Saraburi","Satun","Sing Buri","Si Sa Ket","Songkhla","Sukhothai","Suphan Buri","Surat Thani","Surin","Tak","Trang","Trat","Ubon Ratchathani","Udon Thani","Uthai Thani","Uttaradit","Yala","Yasothon"],Ld={"Nakhon Pathom":{"Mueang Nakhon Pathom":["Phra Pathom Chedi","Tha Tamnak","Phra Prathon","Don Yai Hom"],"Kamphaeng Saen":["Suan Mon","Nong Krathum","Thung Kraphang Hom"],"Nakhon Chai Si":["Wat Samrong","Bang Kaeo Fa","Tha Na"],"Don Tum":["Don Tum","Lam Hoei","Bo Phlap"],"Bang Len":["Bang Len","Nang Buat","Rang Krathum"],Phutthamonthon:["Salaya","Bang Krathuek","Khun Kaeo"],"Sam Phran":["Krathum Lom","Tha Kham","Om Yai"]},Bangkok:{"Phasi Charoen":["Bang Wa","Khlong Khwang","Pak Khlong Phasi Charoen"],"Bang Kapi":["Hua Mak","Khlong Chan"],"Phra Nakhon":["Bowon Niwet","Talat Yot","Wat Sam Phraya"]},Nonthaburi:{"Mueang Nonthaburi":["Bang Kraso","Talat Khwan","Tha Sai"],"Bang Bua Thong":["Bang Phlap","Phimon Rat","Lahan"]},"Pathum Thani":{"Mueang Pathum Thani":["Bang Paruat","Bang Duea","Ban Klang"],Thanyaburi:["Rangsit","Bueng Yitho","Pracha Thipat"],"Lam Luk Ka":["Khu Khot","Lam Luk Ka","Bueng Kham Phroi"]}},tZ=({patient:e,onClose:t})=>{var B;const{user:n}=Pe(),[r,i]=x.useState(!1),[s,l]=x.useState({name:"",doe:"",gender:"male",address:"",province:"",district:"",subdistrict:"",addressLine:"",phone_number:"",caregivers_contact:"",caregiver_name:"",caregiver_phone:"",assigned_doctor:"",last_record_date:"",today_date:new Date().toISOString().split("T")[0],assigned_vhv_name:"",medical_record_number:"",patient_categories:{critical:!1,elderly:!1,pregnant:!1},personal_health_history:"",doctor_diagnosed:"",medications_history:"",food_allergies:"",medication_allergies:"",height:"",weight:"",bmi:"",temperature:"",pulse:"",blood_pressure:"",diabetes:"",mental_health_status:"",other_symptoms:"",pregnancy_details:"",smoker:!1,doctors_note:"",photo_url:"",lat:void 0,lng:void 0,patient_email:""}),[u,d]=x.useState([]),[h,f]=x.useState([]),[m,g]=x.useState({}),[v,N]=x.useState([]),[w,S]=x.useState(null),[b,j]=x.useState(!1);x.useEffect(()=>{var I,M,$;(async()=>{const{data:F}=await Ct(),E=(F||[]).filter(K=>K.role==="doctor").map(K=>({id:K.id,full_name:K.full_name}));d(E);const Z=await dn();f(Z.data||[]);try{const K=await Ot(),D={};for(const Q of K.data||[]){const G=(Q.assigned_vhv_name||"").toLowerCase().trim();G&&(D[G]=(D[G]||0)+1)}g(D)}catch{}const z=await nc();N(z.data||[])})(),e&&l({name:e.name,doe:e.doe,gender:e.gender,address:e.address,province:e.address.split(",").map(F=>F.trim()).slice(-1)[0]||"",district:e.address.split(",").map(F=>F.trim()).slice(-2,-1)[0]||"",subdistrict:e.address.split(",").map(F=>F.trim()).slice(-3,-2)[0]||"",addressLine:e.address.split(",").slice(0,-3).join(", ").trim(),phone_number:e.phone_number||"",caregivers_contact:e.caregivers_contact,caregiver_name:((I=e.caregivers_contact.split("-")[0])==null?void 0:I.trim())||"",caregiver_phone:((M=e.caregivers_contact.split("-")[1])==null?void 0:M.trim())||"",assigned_doctor:e.assigned_doctor,last_record_date:e.last_record_date,today_date:e.today_date,assigned_vhv_name:e.assigned_vhv_name,medical_record_number:e.medical_record_number,patient_categories:e.patient_categories,personal_health_history:e.personal_health_history,doctor_diagnosed:e.doctor_diagnosed,medications_history:e.medications_history,food_allergies:e.food_allergies,medication_allergies:e.medication_allergies,height:e.height,weight:e.weight,bmi:e.bmi,temperature:e.temperature,pulse:e.pulse,blood_pressure:e.blood_pressure,diabetes:e.diabetes,mental_health_status:e.mental_health_status,other_symptoms:e.other_symptoms,pregnancy_details:e.pregnancy_details,smoker:e.smoker,doctors_note:e.doctors_note,lat:e.lat,lng:e.lng,patient_email:e.user_id&&(($=Mi(e.user_id))==null?void 0:$.email)||""})},[e]),x.useEffect(()=>{const I=[s.addressLine,s.subdistrict,s.district,s.province].filter(Boolean).join(", ");if(s.lat&&s.lng||I.length>5){const M=setTimeout(async()=>{j(!0);const $=await GC(s.lat,s.lng,I,v);S($),$.geocodedLat&&$.geocodedLng&&!s.lat&&!s.lng&&l(F=>({...F,lat:$.geocodedLat,lng:$.geocodedLng})),j(!1)},600);return()=>clearTimeout(M)}else S(null)},[s.lat,s.lng,s.addressLine,s.subdistrict,s.district,s.province,v]),x.useEffect(()=>{e||(async()=>{const I=await UN();l(M=>({...M,medical_record_number:I}))})()},[e]),x.useEffect(()=>{const I=parseFloat(s.height),M=parseFloat(s.weight);if(I>0&&M>0&&!Number.isNaN(I)&&!Number.isNaN(M)){const $=M/Math.pow(I/100,2);l(F=>({...F,bmi:$.toFixed(1)}))}},[s.height,s.weight]);const _=async I=>{var M,$;I.preventDefault(),i(!0);try{const F=[s.addressLine,s.subdistrict,s.district,s.province].filter(Boolean).join(", "),E=[s.caregiver_name,s.caregiver_phone].filter(Boolean).join(" - "),Z={name:s.name,doe:s.doe,gender:s.gender,address:F||s.address,phone_number:s.phone_number,caregivers_contact:E||s.caregivers_contact,assigned_doctor:s.assigned_doctor,last_record_date:s.last_record_date,today_date:s.today_date,assigned_vhv_name:s.assigned_vhv_name,medical_record_number:s.medical_record_number,patient_categories:s.patient_categories,personal_health_history:s.personal_health_history,doctor_diagnosed:s.doctor_diagnosed,medications_history:s.medications_history,food_allergies:s.food_allergies,medication_allergies:s.medication_allergies,height:s.height,weight:s.weight,bmi:s.bmi,temperature:s.temperature,pulse:s.pulse,blood_pressure:s.blood_pressure,diabetes:s.diabetes,mental_health_status:s.mental_health_status,other_symptoms:s.other_symptoms,pregnancy_details:s.pregnancy_details,smoker:s.smoker,doctors_note:s.doctors_note,lat:s.lat,lng:s.lng,photo_url:s.photo_url,area_id:(M=w==null?void 0:w.area)==null?void 0:M.id,area_name:($=w==null?void 0:w.area)==null?void 0:$.name};if(e){let z={...Z};if((!e.user_id||!Mi(e.user_id))&&s.patient_email){const{data:D}=await Lb(s.patient_email,s.name);D!=null&&D.id&&(z.user_id=D.id)}else if(e.user_id&&s.patient_email){const D=e.user_id?Mi(e.user_id):void 0;if(D&&D.email.toLowerCase()!==s.patient_email.toLowerCase()){const{error:Q}=await mM(e.user_id,s.patient_email);Q&&console.error("Error updating user email:",Q)}}const{error:K}=await Ku(e.id,z);if(K){console.error("Error updating patient:",K);return}}else{const{data:z}=await Lb(s.patient_email,s.name),{error:K}=await RM({...Z,created_by:(n==null?void 0:n.id)||"",user_id:(z==null?void 0:z.id)||""});if(K){console.error("Error creating patient:",K);return}}t()}catch(F){console.error("Error saving patient:",F)}finally{i(!1)}},k=I=>{const{name:M,value:$,type:F}=I.target;if(F==="checkbox"){const E=I.target;if(M.startsWith("patient_categories.")){const Z=M.split(".")[1];l({...s,patient_categories:{...s.patient_categories,[Z]:E.checked}})}else l({...s,[M]:E.checked})}else l(M==="province"?{...s,province:$,district:"",subdistrict:""}:M==="district"?{...s,district:$,subdistrict:""}:{...s,[M]:$})},C=!1,A=x.useMemo(()=>s.lat&&s.lng?[s.lat,s.lng]:[13.793,100.321],[s.lat,s.lng]),T=x.useMemo(()=>tl.divIcon({className:"patient-pin",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#a21caf;border:2px solid #fff;box-shadow:0 0 0 3px rgba(162,28,175,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),[]),R=()=>(gy({click(I){l(M=>({...M,lat:I.latlng.lat,lng:I.latlng.lng}))}}),null);return a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:a.jsx(Rl,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(Me,{className:"w-6 h-6 text-blue-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Patient":"New Patient"})]})]})}),a.jsxs("form",{onSubmit:_,className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Basic Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),a.jsx("input",{type:"text",name:"name",required:!0,value:s.name,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Entry (DOE) *"}),a.jsx("input",{type:"date",name:"doe",required:!0,value:s.doe,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),a.jsxs("select",{name:"gender",required:!0,value:s.gender,onChange:k,disabled:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",children:[a.jsx("option",{value:"male",children:"Male"}),a.jsx("option",{value:"female",children:"Female"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Record Number (auto)"}),a.jsx("input",{type:"text",name:"medical_record_number",required:!0,value:s.medical_record_number,onChange:k,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province"}),a.jsxs("select",{name:"province",value:s.province,onChange:k,disabled:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[a.jsx("option",{value:"",children:"Select Province"}),YC.map(I=>a.jsx("option",{value:I,children:I},I))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District / Amphoe"}),a.jsxs("select",{name:"district",value:s.district,onChange:k,disabled:!s.province,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[a.jsx("option",{value:"",children:"Select District"}),Object.keys(Ld[s.province]||{}).map(I=>a.jsx("option",{value:I,children:I},I))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-District / Tambon"}),a.jsxs("select",{name:"subdistrict",value:s.subdistrict,onChange:k,disabled:!s.district,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[a.jsx("option",{value:"",children:"Select Sub-District"}),(((B=Ld[s.province])==null?void 0:B[s.district])||[]).map(I=>a.jsx("option",{value:I,children:I},I))]})]}),a.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),a.jsx("input",{type:"text",name:"addressLine",placeholder:"House number, street, village",value:s.addressLine,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),a.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:I=>{var F;const M=(F=I.target.files)==null?void 0:F[0];if(!M)return;const $=new FileReader;$.onload=()=>l(E=>({...E,photo_url:String($.result)})),$.readAsDataURL(M)},disabled:C}),a.jsx("span",{className:"text-sm text-gray-500",children:"or"}),a.jsx("input",{type:"text",name:"photo_url",placeholder:"Image URL",value:s.photo_url||"",onChange:k,readOnly:C,className:"flex-1 px-3 py-2 border rounded"})]}),s.photo_url&&a.jsx("img",{src:s.photo_url,alt:"preview",className:"mt-2 w-20 h-20 rounded-full object-cover"})]}),a.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Email (for login)"}),a.jsx("input",{type:"email",name:"patient_email",value:s.patient_email,onChange:k,readOnly:C,required:!e,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caregiver's Name"}),a.jsx("input",{type:"text",name:"caregiver_name",value:s.caregiver_name,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caregiver's Contact Number"}),a.jsx("input",{type:"text",name:"caregiver_phone",value:s.caregiver_phone,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),a.jsx("input",{type:"text",name:"phone_number",value:s.phone_number,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Doctor *"}),a.jsxs("select",{name:"assigned_doctor",required:!0,value:s.assigned_doctor,onChange:k,disabled:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[a.jsx("option",{value:"",children:"Select"}),u.map(I=>a.jsx("option",{value:I.full_name,children:I.full_name},I.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned VHV"}),a.jsxs("select",{name:"assigned_vhv_name",value:s.assigned_vhv_name,onChange:k,disabled:!s.lat||!s.lng||!(w!=null&&w.area),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50",children:[a.jsx("option",{value:"",children:s.lat&&s.lng&&(w!=null&&w.area)?"Select":"Pin location on map first"}),(()=>{var E;const I=(E=w==null?void 0:w.area)==null?void 0:E.name,$=(h||[]).filter(Z=>(Z.area_name||"").toLowerCase()===(I||"").toLowerCase()).map(Z=>{var z;return{id:Z.user_id||Z.id,name:((z=Z.user)==null?void 0:z.full_name)||Z.name}}),F=new Set($.map(Z=>Z.name));return s.assigned_vhv_name&&!F.has(s.assigned_vhv_name)&&$.unshift({id:"current",name:s.assigned_vhv_name}),$.map(Z=>{const z=Z.name.toLowerCase(),K=m[z]||0;return a.jsxs("option",{value:Z.name,children:[Z.name," (",K,")"]},Z.id+Z.name)})})()]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Today's Date"}),a.jsx("input",{type:"date",name:"today_date",value:s.today_date,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Record Date"}),a.jsx("input",{type:"date",name:"last_record_date",value:s.last_record_date,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Location"}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Click on the map to set the patient's exact location."}),a.jsx("div",{className:"h-72 w-full border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs(Yf,{center:A,zoom:14,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[a.jsx(Xf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),a.jsx(R,{}),v.map(I=>{var F,E,Z;if(!((E=(F=I.geometry)==null?void 0:F.coordinates)!=null&&E[0]))return null;const M=I.geometry.coordinates[0].map(z=>[z[0],z[1]]),$=((Z=w==null?void 0:w.area)==null?void 0:Z.id)===I.id;return a.jsx(Ol,{positions:M,pathOptions:{color:I.color,fillColor:I.color,fillOpacity:$?.3:.1,weight:$?3:2}},I.id)}),typeof s.lat=="number"&&typeof s.lng=="number"&&a.jsx(ds,{position:[s.lat,s.lng],icon:T})]})}),w&&a.jsx("div",{className:`mt-3 p-3 rounded border ${w.area?"bg-green-50 border-green-200 text-green-800":"bg-yellow-50 border-yellow-200 text-yellow-800"}`,children:w.area?a.jsxs(a.Fragment,{children:["Assigned Area: ",a.jsx("strong",{children:w.area.name}),a.jsxs("span",{className:"ml-2 text-xs opacity-70",children:[w.confidence," (",w.method,")"]})]}):a.jsx(a.Fragment,{children:"No matching area for this location"})}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700",children:"Latitude"}),a.jsx("input",{type:"number",step:"any",name:"lat",value:s.lat??"",onChange:k,className:"w-full px-3 py-2 border rounded"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700",children:"Longitude"}),a.jsx("input",{type:"number",step:"any",name:"lng",value:s.lng??"",onChange:k,className:"w-full px-3 py-2 border rounded"})]})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Medical Information"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Categories"}),a.jsxs("div",{className:"flex space-x-6",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",name:"patient_categories.critical",checked:s.patient_categories.critical,onChange:k,disabled:C,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Critical"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",name:"patient_categories.elderly",checked:s.patient_categories.elderly,onChange:k,disabled:C,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Elderly"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",name:"patient_categories.pregnant",checked:s.patient_categories.pregnant,onChange:k,disabled:C,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Pregnant"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personal Health History"}),a.jsx("textarea",{name:"personal_health_history",rows:3,value:s.personal_health_history,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor Diagnosed"}),a.jsx("textarea",{name:"doctor_diagnosed",rows:3,value:s.doctor_diagnosed,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medications History"}),a.jsx("textarea",{name:"medications_history",rows:3,value:s.medications_history,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Food Allergies"}),a.jsx("input",{type:"text",name:"food_allergies",value:s.food_allergies,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medication Allergies"}),a.jsx("input",{type:"text",name:"medication_allergies",value:s.medication_allergies,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Height"}),a.jsx("input",{type:"text",name:"height",value:s.height,onChange:k,readOnly:C,placeholder:"e.g., 175 cm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight"}),a.jsx("input",{type:"text",name:"weight",value:s.weight,onChange:k,readOnly:C,placeholder:"e.g., 70 kg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BMI"}),a.jsx("input",{type:"text",name:"bmi",value:s.bmi,onChange:k,readOnly:!0,placeholder:"Auto-calculated",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),a.jsx("input",{type:"text",name:"temperature",value:s.temperature,onChange:k,readOnly:C,placeholder:"e.g., 98.6F",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pulse"}),a.jsx("input",{type:"text",name:"pulse",value:s.pulse,onChange:k,readOnly:C,placeholder:"e.g., 72 bpm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Pressure"}),a.jsx("input",{type:"text",name:"blood_pressure",value:s.blood_pressure,onChange:k,readOnly:C,placeholder:"e.g., 120/80 mmHg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diabetes"}),a.jsx("input",{type:"text",name:"diabetes",value:s.diabetes,onChange:k,readOnly:C,placeholder:"e.g., Type 2, HbA1c: 7.2%",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mental Health Status"}),a.jsx("div",{className:"flex flex-wrap gap-4",children:["Normal","Anxiety","Depression","Stress","Other"].map(I=>{const M=(s.mental_health_status||"").split(",").map($=>$.trim()).includes(I);return a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:M,onChange:$=>{const F=new Set((s.mental_health_status||"").split(",").map(E=>E.trim()).filter(Boolean));$.target.checked?F.add(I):F.delete(I),l(E=>({...E,mental_health_status:Array.from(F).join(", ")}))},disabled:C,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),I]},I)})})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Any Other Symptoms"}),a.jsx("textarea",{name:"other_symptoms",rows:2,value:s.other_symptoms,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pregnancy Details"}),a.jsx("textarea",{name:"pregnancy_details",rows:3,value:s.pregnancy_details,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",placeholder:"Include gestational age, due date, complications, etc."})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Smoker"}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"smoker",checked:s.smoker===!0,onChange:()=>l(I=>({...I,smoker:!0})),disabled:C}),"Yes"]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"smoker",checked:s.smoker===!1,onChange:()=>l(I=>({...I,smoker:!1})),disabled:C}),"No"]})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor's Notes"}),a.jsx("textarea",{name:"doctors_note",rows:4,value:s.doctors_note,onChange:k,readOnly:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:bg-gray-50",placeholder:"Doctor's observations, recommendations, and notes..."})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(La,{className:"w-5 h-5"}),a.jsx("span",{children:e?"Update Patient":"Create Patient"})]})})]})]})]})})},nZ=()=>{const{user:e}=Pe(),[t,n]=x.useState([]),[r,i]=x.useState(!0),[s,l]=x.useState(""),[u,d]=x.useState(!1),[h,f]=x.useState(null),[m,g]=x.useState(!1),[v,N]=x.useState(""),[w,S]=x.useState("");x.useEffect(()=>{b(),(async()=>{var Z;if((e==null?void 0:e.role)!=="volunteer")return;const{data:F}=await dn(),E=(F||[]).find(z=>z.user_id===e.id);E&&(N(((Z=E.user)==null?void 0:Z.full_name)||E.name),S(E.area_name||""))})()},[]);const b=async()=>{try{const{data:F,error:E}=await Ot();E?console.error("Error fetching patients:",E):n((F||[]).map(Z=>({...Z,created_by_user:Z.created_by_user})))}catch(F){console.error("Error fetching patients:",F)}finally{i(!1)}},j=x.useMemo(()=>{const F=s.toLowerCase();let E=t;if((e==null?void 0:e.role)==="volunteer"&&w){const Z=w.toLowerCase();E=E.filter(z=>(z.area_name||"").toLowerCase()===Z)}return(e==null?void 0:e.role)==="volunteer"&&m&&v&&(E=E.filter(Z=>(Z.assigned_vhv_name||"").toLowerCase().includes(v.toLowerCase()))),E.filter(Z=>{var z,K;return Z.name.toLowerCase().includes(F)||Z.medical_record_number.toLowerCase().includes(F)||((z=Z.assigned_vhv_name)==null?void 0:z.toLowerCase().includes(F))||((K=Z.assigned_doctor)==null?void 0:K.toLowerCase().includes(F))||Z.doctor_diagnosed.toLowerCase().includes(F)})},[t,s,e==null?void 0:e.role,m,v,w]),[_,k]=x.useState(1),C=10,A=Math.max(1,Math.ceil(j.length/C)),T=x.useMemo(()=>{const F=(_-1)*C;return j.slice(F,F+C)},[j,_]);x.useEffect(()=>{k(1)},[s]);const R=F=>{const E=[];return F.patient_categories.critical&&E.push("Critical"),F.patient_categories.elderly&&E.push("Elderly"),F.patient_categories.pregnant&&E.push("Pregnant"),E.length?E.join(", "):"Normal"},B=F=>{f(F),d(!0)},I=()=>{d(!1),f(null),b()};if(r)return a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})});if(u)return a.jsx(tZ,{patient:h,onClose:I});const M=(e==null?void 0:e.role)==="doctor",$=(e==null?void 0:e.role)==="volunteer";return M||$?a.jsxs("div",{className:"py-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"relative w-full max-w-xl",children:[a.jsx(Gn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search",value:s,onChange:F=>l(F.target.value),className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"ml-3 flex items-center gap-3",children:[$&&a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:m,onChange:F=>g(F.target.checked)}),"Assigned to me"]}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer")&&a.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[a.jsx(Ut,{className:"w-4 h-4"}),a.jsx("span",{children:"create new patient"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-sky-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Patient ID"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Assigned VHV"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100",children:[T.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:F.medical_record_number}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:F.name}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:R(F)}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:F.assigned_vhv_name||"-"}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>B(F),className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[a.jsx($N,{className:"w-4 h-4"}),"View Detail"]}),a.jsxs("button",{onClick:()=>{localStorage.setItem("records_selected_patient",F.id);try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"records"}))}catch{}window.setAppView&&window.setAppView("records")},className:"text-green-700 hover:underline inline-flex items-center gap-1",children:[a.jsx(ga,{className:"w-4 h-4"}),"Records"]})]})})]},F.id)),T.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:5,children:"No patients found."})})]})]})}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Math.min(_*C,j.length)," of ",j.length," patients"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>k(F=>Math.max(1,F-1)),disabled:_===1,"aria-label":"Previous page",children:"<"}),a.jsx("button",{className:`px-3 py-1 rounded ${_===1?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>k(1),children:"1"}),A>2&&a.jsxs(a.Fragment,{children:[_>2&&a.jsx("span",{className:"px-1",children:""}),_>1&&_<A&&a.jsx("button",{className:"px-3 py-1 rounded bg-gray-200",children:_}),_<A-1&&a.jsx("span",{className:"px-1",children:""})]}),A>1&&a.jsx("button",{className:`px-3 py-1 rounded ${_===A?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>k(A),children:A}),a.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>k(F=>Math.min(A,F+1)),disabled:_===A,"aria-label":"Next page",children:">"})]})]})]})]}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Patient Management"}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="volunteer")&&a.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[a.jsx(Ut,{className:"w-5 h-5"}),a.jsx("span",{children:"Add Patient"})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(Gn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search patients by name, MRN, or condition...",value:s,onChange:F=>l(F.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(F=>{var E,Z;return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all cursor-pointer",onClick:()=>B(F),children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:a.jsx(Me,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:F.name}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["MRN: ",F.medical_record_number]}),a.jsx("p",{className:"text-sm text-gray-600 truncate",children:F.doctor_diagnosed})]})]}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(nn,{className:"w-4 h-4"}),a.jsxs("span",{children:["Gender: ",F.gender]})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(Zu,{className:"w-4 h-4"}),a.jsx("span",{children:F.caregivers_contact})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(Me,{className:"w-4 h-4"}),a.jsxs("span",{children:["Dr: ",F.assigned_doctor]})]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-3",children:["Created by: ",(E=F.created_by_user)==null?void 0:E.full_name," (",(Z=F.created_by_user)==null?void 0:Z.role,")"]}),(F.patient_categories.critical||F.patient_categories.elderly||F.patient_categories.pregnant)&&a.jsxs("div",{className:"flex space-x-1 mt-2",children:[F.patient_categories.critical&&a.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Critical"}),F.patient_categories.elderly&&a.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:"Elderly"}),F.patient_categories.pregnant&&a.jsx("span",{className:"px-2 py-1 bg-pink-100 text-pink-800 text-xs rounded-full",children:"Pregnant"})]})]})]},F.id)})}),j.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Me,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:s?"No patients found matching your search.":"No patients found."})]})]})},rZ=()=>{var d,h;const{user:e}=Pe(),[t,n]=x.useState(null),[r,i]=x.useState(!0),[s,l]=x.useState(null);x.useEffect(()=>{u()},[e]);const u=async()=>{if(e)try{const{data:f,error:m}=await Lr(e.id);if(m&&m.code!=="PGRST116")console.error("Error fetching patient profile:",m);else if(n(f),f!=null&&f.assigned_vhv_name)try{const{data:g}=await dn(),v=(g||[]).find(N=>typeof f.assigned_vhv_name=="string"&&(N.name||"").toLowerCase().includes((f.assigned_vhv_name||"").toLowerCase()));v&&l(v)}catch{}}catch(f){console.error("Error fetching patient profile:",f)}finally{i(!1)}};return r?a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t?a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:a.jsx(Me,{className:"w-8 h-8 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),a.jsxs("p",{className:"text-gray-600",children:["Medical Record: ",t.medical_record_number]})]})]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[a.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[a.jsx("span",{className:"text-gray-600",children:"Patient ID:"})," ",a.jsx("span",{className:"font-mono text-gray-900",children:t.id})]}),a.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[a.jsx("span",{className:"text-gray-600",children:"User ID:"})," ",a.jsx("span",{className:"font-mono text-gray-900",children:t.user_id})]}),a.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[a.jsx("span",{className:"text-gray-600",children:"MRN:"})," ",a.jsx("span",{className:"font-mono text-gray-900",children:t.medical_record_number})]})]}),(t.patient_categories.critical||t.patient_categories.elderly||t.patient_categories.pregnant)&&a.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Patient Categories"}),a.jsxs("div",{className:"flex space-x-2",children:[t.patient_categories.critical&&a.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:"Critical"}),t.patient_categories.elderly&&a.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 text-sm rounded-full",children:"Elderly"}),t.patient_categories.pregnant&&a.jsx("span",{className:"px-3 py-1 bg-pink-100 text-pink-800 text-sm rounded-full",children:"Pregnant"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s&&a.jsx("div",{className:"lg:col-span-2 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(Me,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-blue-800",children:"Assigned VHV"}),a.jsxs("div",{className:"font-semibold text-blue-900",children:[s.name," ",s.volunteer_code?`(${s.volunteer_code})`:""]}),a.jsxs("div",{className:"text-sm text-blue-800",children:[s.email||""," ",s.phone?`  ${s.phone}`:""]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 sm:self-start",children:[a.jsxs("button",{onClick:()=>{try{localStorage.setItem("message:recipient",s.user_id)}catch{}try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"messages"}))}catch{}window.setAppView&&window.setAppView("messages")},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-flex items-center gap-2 text-sm",children:[a.jsx(zl,{className:"w-4 h-4"})," Message"]}),a.jsxs("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"map"}))}catch{}window.setAppView&&window.setAppView("map")},className:"px-3 py-2 border border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50 inline-flex items-center gap-2 text-sm",children:[a.jsx(_v,{className:"w-4 h-4"})," Open Map"]})]})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[a.jsx(Me,{className:"w-5 h-5"}),a.jsx("span",{children:"Basic Information"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(nn,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Gender"}),a.jsx("p",{className:"text-gray-900 capitalize",children:t.gender})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(cs,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Address"}),a.jsx("p",{className:"text-gray-900",children:t.address})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Zu,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Caregiver's Contact"}),a.jsx("p",{className:"text-gray-900",children:t.caregivers_contact})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Me,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Assigned Doctor"}),t.assigned_doctor?a.jsx("button",{onClick:()=>{try{localStorage.setItem("doctor:search",t.assigned_doctor)}catch{}try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"doctors"}))}catch{}window.setAppView&&window.setAppView("doctors")},className:"text-blue-700 hover:underline",children:t.assigned_doctor}):a.jsx("p",{className:"text-gray-900",children:"Not assigned"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Me,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Assigned VHV"}),a.jsx("p",{className:"text-gray-900",children:t.assigned_vhv_name||"Not assigned"})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[a.jsx(gn,{className:"w-5 h-5"}),a.jsx("span",{children:"Vital Signs"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Height / Weight / BMI"}),a.jsxs("p",{className:"text-gray-900",children:[t.height," / ",t.weight," / ",t.bmi]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Temperature"}),a.jsx("p",{className:"text-gray-900",children:t.temperature})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Pulse"}),a.jsx("p",{className:"text-gray-900",children:t.pulse})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Blood Pressure"}),a.jsx("p",{className:"text-gray-900",children:t.blood_pressure})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Diabetes Status"}),a.jsx("p",{className:"text-gray-900",children:t.diabetes||"None"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Smoker"}),a.jsx("p",{className:"text-gray-900",children:t.smoker?"Yes":"No"})]})]})]})]}),t.personal_health_history&&a.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsxs("h4",{className:"text-lg font-semibold text-blue-800 flex items-center space-x-2 mb-3",children:[a.jsx(cs,{className:"w-5 h-5"}),a.jsx("span",{children:"Personal Health History"})]}),a.jsx("p",{className:"text-blue-700",children:t.personal_health_history})]}),t.doctor_diagnosed&&a.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[a.jsxs("h4",{className:"text-lg font-semibold text-green-800 flex items-center space-x-2 mb-3",children:[a.jsx(cs,{className:"w-5 h-5"}),a.jsx("span",{children:"Doctor Diagnosed"})]}),a.jsx("p",{className:"text-green-700",children:t.doctor_diagnosed})]}),(t.food_allergies||t.medication_allergies)&&a.jsxs("div",{className:"mt-8 p-4 bg-red-50 rounded-lg border border-red-200",children:[a.jsxs("h4",{className:"text-lg font-semibold text-red-800 flex items-center space-x-2 mb-3",children:[a.jsx(Wr,{className:"w-5 h-5"}),a.jsx("span",{children:"Allergies"})]}),t.food_allergies&&a.jsxs("div",{className:"mb-2",children:[a.jsx("p",{className:"text-sm font-medium text-red-800",children:"Food Allergies:"}),a.jsx("p",{className:"text-red-700",children:t.food_allergies})]}),t.medication_allergies&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-800",children:"Medication Allergies:"}),a.jsx("p",{className:"text-red-700",children:t.medication_allergies})]})]}),t.medications_history&&a.jsxs("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[a.jsxs("h4",{className:"text-lg font-semibold text-purple-800 flex items-center space-x-2 mb-3",children:[a.jsx(qs,{className:"w-5 h-5"}),a.jsx("span",{children:"Medications History"})]}),a.jsx("p",{className:"text-purple-700",children:t.medications_history})]}),t.mental_health_status&&a.jsxs("div",{className:"mt-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[a.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 flex items-center space-x-2 mb-3",children:[a.jsx(gn,{className:"w-5 h-5"}),a.jsx("span",{children:"Mental Health Status"})]}),a.jsx("p",{className:"text-indigo-700",children:t.mental_health_status})]}),t.other_symptoms&&a.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[a.jsxs("h4",{className:"text-lg font-semibold text-yellow-800 flex items-center space-x-2 mb-3",children:[a.jsx(Wr,{className:"w-5 h-5"}),a.jsx("span",{children:"Other Symptoms"})]}),a.jsx("p",{className:"text-yellow-700",children:t.other_symptoms})]}),t.pregnancy_details&&a.jsxs("div",{className:"mt-6 p-4 bg-pink-50 rounded-lg border border-pink-200",children:[a.jsxs("h4",{className:"text-lg font-semibold text-pink-800 flex items-center space-x-2 mb-3",children:[a.jsx(gn,{className:"w-5 h-5"}),a.jsx("span",{children:"Pregnancy Details"})]}),a.jsx("p",{className:"text-pink-700",children:t.pregnancy_details})]}),t.doctors_note&&a.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center space-x-2 mb-3",children:[a.jsx(cs,{className:"w-5 h-5"}),a.jsx("span",{children:"Doctor's Notes"})]}),a.jsx("p",{className:"text-gray-700",children:t.doctors_note})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 text-sm text-gray-500",children:[a.jsxs("p",{children:["Date of Entry: ",new Date(t.doe).toLocaleDateString()]}),a.jsxs("p",{children:["Last Record Date: ",t.last_record_date?new Date(t.last_record_date).toLocaleDateString():"N/A"]}),a.jsxs("p",{children:["Profile created by: ",(d=t.created_by_user)==null?void 0:d.full_name," (",(h=t.created_by_user)==null?void 0:h.role,")"]}),a.jsxs("p",{children:["Created: ",new Date(t.created_at).toLocaleDateString()]}),t.updated_at&&a.jsxs("p",{children:["Last updated: ",new Date(t.updated_at).toLocaleDateString()]})]})]})]})}):a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[a.jsx(Me,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Profile Found"}),a.jsx("p",{className:"text-gray-600",children:"Your medical profile hasn't been created yet. Please contact your healthcare provider to set up your profile."})]})})},iZ=()=>{var Z,z,K,D,Q,G;const{user:e}=Pe(),[t,n]=x.useState([]),[r,i]=x.useState([]),[s,l]=x.useState(null),[u,d]=x.useState(""),[h,f]=x.useState(!1),[m,g]=x.useState(""),[v,N]=x.useState(!0),[w,S]=x.useState(""),[b,j]=x.useState(null),[_,k]=x.useState(null);x.useEffect(()=>{C(),A()},[e]),x.useEffect(()=>{try{const V=localStorage.getItem("message:recipient");if(V){f(!0),g(V);const Y=r.find(H=>H.id===V);Y&&S(Y.full_name),localStorage.removeItem("message:recipient")}}catch{}},[r]);const C=async()=>{if(e)try{const{data:V,error:Y}=await BM(e.id);Y?console.error("Error fetching messages:",Y):n(V||[])}catch(V){console.error("Error fetching messages:",V)}finally{N(!1)}},A=async()=>{try{const{data:V,error:Y}=await Ct(e==null?void 0:e.id);if(Y)console.error("Error fetching users:",Y);else{const H=V||[],J=(e==null?void 0:e.role)==="patient"?H.filter(re=>re.role!=="patient"):H;i(J)}}catch(V){console.error("Error fetching users:",V)}},T=()=>{const V=new Map;return t.forEach(Y=>{const H=Y.sender_id===(e==null?void 0:e.id)?Y.recipient_id:Y.sender_id,J=Y.sender_id===(e==null?void 0:e.id)?Y.recipient:Y.sender;V.has(H)||V.set(H,{userId:H,user:J,lastMessage:Y,messages:[]}),V.get(H).messages.push(Y)}),Array.from(V.values()).sort((Y,H)=>new Date(H.lastMessage.created_at).getTime()-new Date(Y.lastMessage.created_at).getTime())},R=V=>{var H;const Y=(H=V.target.files)==null?void 0:H[0];if(Y){if(Y.size>5*1024*1024){alert("Image size must be less than 5MB");return}if(!Y.type.startsWith("image/")){alert("Please select an image file");return}j(Y);const J=new FileReader;J.onload=re=>{var le;k((le=re.target)==null?void 0:le.result)},J.readAsDataURL(Y)}},B=()=>{j(null),k(null)},I=async()=>{if(!u.trim()&&!b)return;const V=h?m:s;if(!V)return;let Y,H;b&&(Y=_,H=b.name);try{const{data:J,error:re}=await gr({sender_id:(e==null?void 0:e.id)||"",recipient_id:V,subject:"",content:u||(b?`[Image: ${b.name}]`:""),image_url:Y,image_name:H,is_read:!1});re?(console.error("Error sending message:",re),alert("Failed to send message. Please try again.")):(d(""),B(),h&&(f(!1),g(""),S("")),await C())}catch(J){console.error("Error sending message:",J),alert("Failed to send message. Please try again.")}},M=async V=>{try{await FM(V,(e==null?void 0:e.id)||"")}catch(Y){console.error("Error marking message as read:",Y)}},$=T(),F=s?((Z=$.find(V=>V.userId===s))==null?void 0:Z.messages)||[]:[],E=r.filter(V=>V.full_name.toLowerCase().includes(w.toLowerCase())||V.email.toLowerCase().includes(w.toLowerCase()));return v?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Messages"}),a.jsxs("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors w-full sm:w-auto justify-center",children:[a.jsx(Ut,{className:"w-5 h-5"}),a.jsx("span",{children:"New Message"})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:h-[600px]",children:[a.jsxs("div",{className:"w-full md:w-1/3 border-b md:border-b-0 md:border-r border-gray-200",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"font-semibold text-gray-900",children:"Conversations"})}),a.jsx("div",{className:"md:overflow-y-auto",style:{height:"calc(600px - 60px)"},children:$.map(V=>{var Y,H;return a.jsx("div",{onClick:()=>{l(V.userId),f(!1),V.messages.filter(J=>J.recipient_id===(e==null?void 0:e.id)&&!J.is_read).forEach(J=>M(J.id))},className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ${s===V.userId?"bg-blue-50":""}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:a.jsx(Me,{className:"w-5 h-5 text-gray-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate",children:(Y=V.user)==null?void 0:Y.full_name}),a.jsx("p",{className:"text-sm text-gray-600 capitalize",children:(H=V.user)==null?void 0:H.role}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:V.lastMessage.content})]}),V.messages.some(J=>J.recipient_id===(e==null?void 0:e.id)&&!J.is_read)&&a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})},V.userId)})})]}),a.jsx("div",{className:"flex-1",children:h?a.jsxs("div",{className:"p-4 h-full flex flex-col",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"New Message"}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recipient"}),a.jsxs("div",{className:"relative",children:[a.jsx(Gn,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:w,onChange:V=>S(V.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),a.jsx("div",{className:"mt-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg",children:E.map(V=>a.jsxs("div",{onClick:()=>{g(V.id),S(V.full_name)},className:`p-2 cursor-pointer hover:bg-gray-50 ${m===V.id?"bg-blue-50":""}`,children:[a.jsx("p",{className:"text-sm font-medium",children:V.full_name}),a.jsx("p",{className:"text-xs text-gray-600 capitalize",children:V.role})]},V.id))})]})}),a.jsxs("div",{className:"flex-1 mt-4 flex flex-col",children:[_&&a.jsxs("div",{className:"mb-4 relative inline-block",children:[a.jsx("img",{src:_,alt:"Preview",className:"max-w-xs max-h-32 rounded-lg border border-gray-300"}),a.jsx("button",{onClick:B,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:a.jsx(As,{className:"w-3 h-3"})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b==null?void 0:b.name})]}),a.jsx("textarea",{value:u,onChange:V=>d(V.target.value),placeholder:b?"Add a caption (optional)...":"Type your message...",className:"flex-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mt-4",children:[a.jsx("div",{className:"flex space-x-2",children:a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"}),a.jsxs("div",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all inline-flex items-center space-x-1",children:[a.jsx(xM,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"Image"})]})]})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:I,disabled:!u.trim()&&!b||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(Wu,{className:"w-4 h-4"}),a.jsx("span",{children:"Send"})]})]})]})]})]}):s?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("p",{className:"font-semibold text-gray-900",children:((z=F[0])==null?void 0:z.sender_id)===(e==null?void 0:e.id)?(D=(K=F[0])==null?void 0:K.recipient)==null?void 0:D.full_name:(G=(Q=F[0])==null?void 0:Q.sender)==null?void 0:G.full_name})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:F.sort((V,Y)=>new Date(V.created_at).getTime()-new Date(Y.created_at).getTime()).map(V=>a.jsx("div",{className:`flex ${V.sender_id===(e==null?void 0:e.id)?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${V.sender_id===(e==null?void 0:e.id)?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[V.image_url&&a.jsxs("div",{className:"mb-2",children:[a.jsx("img",{src:V.image_url,alt:V.image_name||"Shared image",className:"max-w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(V.image_url,"_blank")}),V.image_name&&a.jsx("p",{className:`text-xs mt-1 ${V.sender_id===(e==null?void 0:e.id)?"text-blue-200":"text-gray-500"}`,children:V.image_name})]}),V.content&&V.content!==`[Image: ${V.image_name}]`&&a.jsx("p",{className:"text-sm",children:V.content}),a.jsx("p",{className:`text-xs mt-1 ${V.sender_id===(e==null?void 0:e.id)?"text-blue-200":"text-gray-500"}`,children:new Date(V.created_at).toLocaleString()})]})},V.id))}),a.jsxs("div",{className:"p-4 border-t border-gray-200",children:[_&&a.jsxs("div",{className:"mb-3 relative inline-block",children:[a.jsx("img",{src:_,alt:"Preview",className:"max-w-xs max-h-24 rounded-lg border border-gray-300"}),a.jsx("button",{onClick:B,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:a.jsx(As,{className:"w-3 h-3"})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b==null?void 0:b.name})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("label",{className:"cursor-pointer self-end",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"}),a.jsx("div",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",children:a.jsx(jM,{className:"w-5 h-5"})})]}),a.jsx("textarea",{value:u,onChange:V=>d(V.target.value),placeholder:b?"Add a caption (optional)...":"Type your reply...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none",rows:2,onKeyPress:V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),I())}}),a.jsx("button",{onClick:I,disabled:!u.trim()&&!b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx(Wu,{className:"w-5 h-5"})})]})]})]}):a.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx(zl,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"Select a conversation to start messaging"})]})})})]})})]})},XC=({task:e,onClose:t,rolesFilter:n,forceAssignedToUserId:r,hideAssignedTo:i})=>{const{user:s}=Pe(),[l,u]=x.useState(!1),[d,h]=x.useState([]),[f,m]=x.useState([]),[g,v]=x.useState([]),[N,w]=x.useState("general"),[S,b]=x.useState({title:"",description:"",priority:"",status:"pending",assigned_to:r||"",patient_id:"",due_date:""}),[j,_]=x.useState([]);x.useEffect(()=>{if(k(),A(),C(),e){const M=!!(e.patient_id&&e.due_date);w(M?"appointment":"general"),b({title:e.title,description:e.description,priority:e.priority,status:e.status,assigned_to:r||e.assigned_to,patient_id:e.patient_id||"",due_date:e.due_date||""}),e.form_fields&&Array.isArray(e.form_fields)&&_(e.form_fields.map($=>{var F;return{...$,options:((F=$.options)==null?void 0:F.join(", "))||""}}))}},[e]);const k=async()=>{try{const{data:M,error:$}=await Ct();if($)console.error("Error fetching users:",$);else{let F=(M||[]).filter(E=>E.role==="doctor"||E.role==="volunteer");n&&n.length&&(F=F.filter(E=>n.includes(E.role))),h(F)}}catch(M){console.error("Error fetching users:",M)}},C=async()=>{try{const{data:M,error:$}=await dn();$||v(M||[])}catch(M){console.error("Error fetching volunteers:",M)}},A=async()=>{try{const{data:M,error:$}=await Ot();$?console.error("Error fetching patients:",$):m(M||[])}catch(M){console.error("Error fetching patients:",M)}},T=async M=>{if(M.preventDefault(),u(!0),N==="appointment"&&!S.patient_id){alert("Please select a patient for the appointment."),u(!1);return}if(!S.due_date){alert("Please select a due date."),u(!1);return}const $=new Date().toISOString().slice(0,10);if(S.due_date<$){alert("Due date cannot be in the past."),u(!1);return}if(!S.priority){alert("Please select a priority for this task."),u(!1);return}try{const F=j.map(E=>({id:E.id,label:E.label,type:E.type,required:!!E.required,options:E.options?E.options.split(",").map(Z=>Z.trim()).filter(Boolean):void 0}));if(e){const{error:E}=await Pr(e.id,{...S,form_fields:F});if(E){console.error("Error updating task:",E);return}}else{const E={...S,assigned_to:r||S.assigned_to,assigned_by:(s==null?void 0:s.id)||"",patient_id:N==="appointment"?S.patient_id:void 0,form_fields:F,form_responses:{}},{error:Z}=await $l(E);if(Z){console.error("Error creating task:",Z);return}}t()}catch(F){console.error("Error saving task:",F)}finally{u(!1)}},R=M=>{const{name:$,value:F}=M.target;$==="assigned_to"&&r||b({...S,[$]:F})},B=M=>{w(M),M==="general"&&b({...S,patient_id:""})},I=(n==null?void 0:n.includes("volunteer"))&&!e;return a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:a.jsx(Rl,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(hu,{className:"w-6 h-6 text-blue-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Task":"Create New Task"})]})]})}),a.jsxs("form",{onSubmit:T,className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[I&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Type *"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"taskType",value:"general",checked:N==="general",onChange:()=>B("general"),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),a.jsx("span",{className:"text-sm text-gray-700",children:"General Task"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"taskType",value:"appointment",checked:N==="appointment",onChange:()=>B("appointment"),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Appointment"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N==="appointment"?`Appointments require a patient and date, and will appear in the volunteer's "Today's Appointments" tab.`:`General tasks will appear in the volunteer's "Today's To-Do" tab when due today.`})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title *"}),a.jsx("input",{type:"text",name:"title",required:!0,value:S.title,onChange:R,maxLength:100,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter task title..."}),a.jsxs("div",{className:"mt-1 text-right text-xs text-gray-400",children:[S.title.length,"/100"]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),a.jsx("textarea",{name:"description",required:!0,rows:4,value:S.description,onChange:R,maxLength:5e3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Describe the task in detail..."}),a.jsxs("div",{className:"mt-1 text-right text-xs text-gray-400",children:[S.description.length,"/5000"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),a.jsxs("select",{name:"priority",required:!0,value:S.priority,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"",children:"Select priority..."}),a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"urgent",children:"Urgent"})]})]}),(!(n!=null&&n.includes("volunteer"))||!!e)&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),a.jsxs("select",{name:"status",required:!0,value:S.status,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{className:N==="general"?"opacity-50":"",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:N==="appointment"?"Patient *":"Related Patient (Optional)"}),a.jsxs("select",{name:"patient_id",value:S.patient_id,onChange:R,required:N==="appointment",disabled:N==="general",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"",children:"Select patient..."}),f.map(M=>a.jsxs("option",{value:M.id,children:[M.name," - ",M.medical_record_number]},M.id))]}),N==="general"&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"General tasks don't require a patient assignment"})]}),i?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned To"}),a.jsx("div",{className:"px-4 py-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-700",children:"You"})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign To *"}),a.jsxs("select",{name:"assigned_to",required:!0,value:S.assigned_to,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"",children:"Select user..."}),(()=>{let M=d;if(n!=null&&n.includes("volunteer")){let $="";if(S.patient_id){const F=f.find(E=>E.id===S.patient_id);$=((F==null?void 0:F.area_name)||"").toLowerCase()}if($){const F=g.filter(E=>(E.area_name||"").toLowerCase()===$).map(E=>E.user_id);M=d.filter(E=>E.role==="volunteer"&&F.includes(E.id))}else M=d.filter(F=>F.role==="volunteer")}return M.map($=>a.jsxs("option",{value:$.id,children:[$.full_name," (",$.role,")"]},$.id))})()]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:N==="appointment"?"Appointment Date *":"Due Date *"}),a.jsx("input",{type:"date",name:"due_date",value:S.due_date,onChange:R,required:!0,min:new Date().toISOString().slice(0,10),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Due date is required and cannot be in the past."})]}),(n==null?void 0:n.includes("volunteer"))&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Form Fields (for volunteer to fill)"}),a.jsxs("div",{className:"space-y-3",children:[j.map((M,$)=>a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-center",children:[a.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Field label",value:M.label,onChange:F=>{const E=F.target.value;_(Z=>Z.map((z,K)=>K===$?{...z,label:E}:z))}}),a.jsxs("select",{className:"px-3 py-2 border rounded",value:M.type,onChange:F=>{const E=F.target.value;_(Z=>Z.map((z,K)=>K===$?{...z,type:E}:z))},children:[a.jsx("option",{value:"text",children:"Text"}),a.jsx("option",{value:"textarea",children:"Textarea"}),a.jsx("option",{value:"number",children:"Number"}),a.jsx("option",{value:"date",children:"Date"}),a.jsx("option",{value:"select",children:"Select"}),a.jsx("option",{value:"checkbox",children:"Checkbox"}),a.jsx("option",{value:"radio",children:"Radio"})]}),a.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Options (comma separated)",value:M.options||"",onChange:F=>{const E=F.target.value;_(Z=>Z.map((z,K)=>K===$?{...z,options:E}:z))}}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:!!M.required,onChange:F=>{const E=F.target.checked;_(Z=>Z.map((z,K)=>K===$?{...z,required:E}:z))}})," Required"]}),a.jsx("button",{type:"button",className:"text-red-600 text-sm",onClick:()=>_(F=>F.filter((E,Z)=>Z!==$)),children:"Remove"})]})]},M.id)),a.jsx("button",{type:"button",className:"px-3 py-2 border rounded text-sm",onClick:()=>_(M=>[...M,{id:"f-"+Math.random().toString(36).slice(2,9),label:"",type:"text",options:""}]),children:"+ Add Field"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"These fields will appear on the volunteer side when they open the task to complete it."})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(La,{className:"w-5 h-5"}),a.jsx("span",{children:e?"Update Task":"Create Task"})]})})]})]})]})})},v1=({personalOnly:e=!1,title:t})=>{const{user:n}=Pe(),[r,i]=x.useState([]),[s,l]=x.useState(!0),[u,d]=x.useState(""),[h,f]=x.useState("all"),[m,g]=x.useState("all"),[v,N]=x.useState(!1),[w,S]=x.useState(null);x.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:I,error:M}=await fr(n==null?void 0:n.id);if(M)console.error("Error fetching tasks:",M);else{let $=I||[];e&&(n!=null&&n.id)&&($=$.filter(F=>F.assigned_to===n.id)),i($)}}catch(I){console.error("Error fetching tasks:",I)}finally{l(!1)}},j=async(I,M)=>{try{const{error:$}=await Pr(I,{status:M});$?console.error("Error updating task:",$):b()}catch($){console.error("Error updating task:",$)}},_=async I=>{if(window.confirm("Are you sure you want to delete this task?"))try{const{error:M}=await VN(I);M?console.error("Error deleting task:",M):b()}catch(M){console.error("Error deleting task:",M)}},k=I=>{S(I),N(!0)},C=()=>{N(!1),S(null),b()},A=r.filter(I=>{var E;const M=I.title.toLowerCase().includes(u.toLowerCase())||I.description.toLowerCase().includes(u.toLowerCase())||((E=I.assigned_to_user)==null?void 0:E.full_name.toLowerCase().includes(u.toLowerCase())),$=h==="all"||I.status===h,F=m==="all"||I.priority===m;return M&&$&&F}),T=I=>{switch(I){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},R=I=>{switch(I){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=I=>{switch(I){case"completed":return a.jsx(ys,{className:"w-4 h-4"});case"in_progress":return a.jsx(xl,{className:"w-4 h-4"});case"pending":return a.jsx(Wr,{className:"w-4 h-4"});default:return a.jsx(xl,{className:"w-4 h-4"})}};return s?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):v?a.jsx(XC,{task:w,onClose:C,forceAssignedToUserId:e?n==null?void 0:n.id:void 0,hideAssignedTo:e}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t||(e?"My Tasks":"Task Management")}),a.jsxs("button",{onClick:()=>N(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[a.jsx(Ut,{className:"w-5 h-5"}),a.jsx("span",{children:e?"Add Task":"Create Task"})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Gn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search tasks...",value:u,onChange:I=>d(I.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("select",{value:h,onChange:I=>f(I.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]}),a.jsxs("select",{value:m,onChange:I=>g(I.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Priority"}),a.jsx("option",{value:"urgent",children:"Urgent"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:A.map(I=>{var M,$;return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2 line-clamp-1 break-words",children:I.title}),a.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2 break-words",children:I.description})]}),a.jsxs("div",{className:"flex space-x-2 ml-4",children:[a.jsx("button",{onClick:()=>k(I),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Task",children:a.jsx(Vu,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>_(I.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Task",children:a.jsx(Os,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${T(I.priority)}`,children:[I.priority.charAt(0).toUpperCase()+I.priority.slice(1)," Priority"]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${R(I.status)}`,children:[B(I.status),a.jsx("span",{children:I.status.replace("_"," ").charAt(0).toUpperCase()+I.status.replace("_"," ").slice(1)})]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Me,{className:"w-4 h-4"}),a.jsxs("span",{children:["Assigned to: ",(M=I.assigned_to_user)==null?void 0:M.full_name]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Me,{className:"w-4 h-4"}),a.jsxs("span",{children:["Created by: ",($=I.assigned_by_user)==null?void 0:$.full_name]})]}),I.patient&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Me,{className:"w-4 h-4"}),a.jsxs("span",{children:["Patient: ",I.patient.name]})]}),I.due_date&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(nn,{className:"w-4 h-4"}),a.jsxs("span",{children:["Due: ",new Date(I.due_date).toLocaleDateString()]})]})]}),I.status!=="completed"&&I.status!=="cancelled"&&a.jsxs("div",{className:"flex space-x-2",children:[I.status==="pending"&&a.jsx("button",{onClick:()=>j(I.id,"in_progress"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"Start Task"}),I.status==="in_progress"&&a.jsx("button",{onClick:()=>j(I.id,"completed"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:"Mark Complete"}),a.jsx("button",{onClick:()=>j(I.id,"cancelled"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Cancel"})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",children:[a.jsxs("p",{children:["Created: ",new Date(I.created_at).toLocaleDateString()]}),I.completed_at&&a.jsxs("p",{children:["Completed: ",new Date(I.completed_at).toLocaleDateString()]})]})]},I.id)})}),A.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ys,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:u||h!=="all"||m!=="all"?"No tasks found matching your filters.":"No tasks found."})]})]})},Al=({open:e,title:t,onClose:n,children:r})=>e?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:n}),a.jsxs("div",{className:"relative bg-white w-[95vw] max-w-3xl max-h-[85vh] rounded-2xl shadow-xl border border-gray-200 overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-200 bg-gray-50 shrink-0",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900",children:t}),a.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 px-2 py-1",children:""})]}),a.jsx("div",{className:"p-5 overflow-y-auto flex-1",children:r})]})]}):null,Om=(e,t)=>{if(!e)return"";const n=new Date(e).toLocaleDateString();return t?`${n} ${t}`:n},aZ=()=>{const{user:e}=Pe(),[t,n]=x.useState("appointments"),[r,i]=x.useState([]),[s,l]=x.useState(!0),[u,d]=x.useState([]),[h,f]=x.useState(()=>new Date().toISOString().slice(0,10)),[m,g]=x.useState(""),[v,N]=x.useState([]),[w,S]=x.useState(!1),[b,j]=x.useState({patientId:"",doctorId:"",date:new Date().toISOString().slice(0,10),time:"09:00",title:"Appointment",description:""}),[_,k]=x.useState(!1),[C,A]=x.useState(null),[T,R]=x.useState({patientId:"",doctorId:"",date:"",time:"09:00",title:"",description:""}),B=async()=>{l(!0);const[{data:z},{data:K},{data:D}]=await Promise.all([fr(),Ct(),Ot()]),Q=(z||[]).filter(G=>G.assigned_to===(e==null?void 0:e.id));i(Q),d((K||[]).filter(G=>G.role==="doctor")),N(D||[]),l(!1)};x.useEffect(()=>{B()},[]);const I=x.useMemo(()=>r.filter(z=>!!z.patient_id),[r]),M=x.useMemo(()=>{const z=m.toLowerCase();return I.filter(K=>{var D;return K.status==="pending"&&((K.title||"").toLowerCase().includes(z)||(((D=K.patient)==null?void 0:D.name)||"").toLowerCase().includes(z))})},[I,m]),$=x.useMemo(()=>{const z=m.toLowerCase();return I.filter(K=>{var D;return(K.status==="in_progress"||K.status==="completed")&&(h?K.due_date===h:!0)&&((K.title||"").toLowerCase().includes(z)||(((D=K.patient)==null?void 0:D.name)||"").toLowerCase().includes(z))})},[I,h,m]),F=x.useMemo(()=>{const z=m.toLowerCase();return I.filter(K=>{var D;return K.status==="cancelled"&&((K.title||"").toLowerCase().includes(z)||(((D=K.patient)==null?void 0:D.name)||"").toLowerCase().includes(z))})},[I,m]),E=async z=>{await Pr(z.id,{status:"in_progress"}),B()},Z=z=>{A(z),R({patientId:z.patient_id||"",doctorId:z.assigned_to,date:z.due_date||new Date().toISOString().slice(0,10),time:z.due_time||"09:00",title:z.title||"Appointment",description:z.description||""}),k(!0)};return a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"inline-flex rounded-lg overflow-hidden border border-gray-200",children:a.jsxs("button",{className:`px-4 py-2 text-sm inline-flex items-center gap-2 whitespace-nowrap ${t==="appointments"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>n("appointments"),children:[a.jsx(Cs,{className:"w-4 h-4"})," Appointments"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[t==="appointments"&&a.jsx("input",{type:"date",className:"px-3 py-2 border rounded",value:h,onChange:z=>f(z.target.value)}),a.jsxs("div",{className:"relative",children:[a.jsx(Gn,{className:"w-4 h-4 absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{className:"pl-7 pr-3 py-2 border rounded",placeholder:"Search...",value:m,onChange:z=>g(z.target.value)})]}),t==="appointments"&&a.jsxs("button",{className:"px-3 py-2 bg-blue-600 text-white rounded inline-flex items-center gap-1",onClick:()=>{j({patientId:"",doctorId:(e==null?void 0:e.id)||"",date:new Date().toISOString().slice(0,10),title:"Appointment",description:""}),S(!0)},children:[a.jsx(Ut,{className:"w-4 h-4"})," Create"]})]})]}),s?a.jsx("div",{className:"py-10 text-center",children:"Loading"}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden mb-6",children:[a.jsx("div",{className:"px-4 py-2 bg-red-50 border-b border-red-100 text-sm text-red-800",children:"Needs Approval"}),a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Patient"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Requested Date"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100",children:[M.map(z=>{var K;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:((K=z.patient)==null?void 0:K.name)||""}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:z.title||"Appointment"}),a.jsx("td",{className:"px-4 py-2 text-sm",children:Om(z.due_date,z.due_time)}),a.jsxs("td",{className:"px-4 py-2 text-sm flex gap-2",children:[a.jsxs("button",{onClick:()=>E(z),className:"px-3 py-1 bg-green-600 text-white rounded inline-flex items-center gap-1",children:[a.jsx(ys,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>Z(z),className:"px-3 py-1 bg-blue-600 text-white rounded inline-flex items-center gap-1",children:[a.jsx(Vu,{className:"w-4 h-4"}),"Edit"]}),a.jsxs("button",{onClick:()=>Pr(z.id,{status:"cancelled"}).then(B),className:"px-3 py-1 bg-red-600 text-white rounded inline-flex items-center gap-1",children:[a.jsx(Cp,{className:"w-4 h-4"}),"Cancel"]})]})]},z.id)}),M.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-4 py-4 text-center text-gray-500",children:"No pending requests."})})]})]})]}),a.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"px-4 py-2 bg-blue-50 border-b border-blue-100 text-sm text-blue-800",children:["Approved  ",h||"All Dates"]}),a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Patient"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Status"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100",children:[$.map(z=>{var K;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:((K=z.patient)==null?void 0:K.name)||""}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:z.title||"Appointment"}),a.jsx("td",{className:"px-4 py-2 text-sm",children:Om(z.due_date,z.due_time)}),a.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:z.status.replace("_"," ")}),a.jsxs("td",{className:"px-4 py-2 text-sm flex gap-2",children:[a.jsxs("button",{onClick:()=>Z(z),className:"px-3 py-1 bg-blue-600 text-white rounded inline-flex items-center gap-1",children:[a.jsx(Vu,{className:"w-4 h-4"}),"Edit"]}),a.jsxs("button",{onClick:()=>Pr(z.id,{status:"cancelled"}).then(B),className:"px-3 py-1 bg-red-600 text-white rounded inline-flex items-center gap-1",children:[a.jsx(Cp,{className:"w-4 h-4"}),"Cancel"]})]})]},z.id)}),$.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:"No approved appointments for this date."})})]})]})]}),a.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden mt-6",children:[a.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-100 text-sm text-gray-800",children:"Cancelled"}),a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Patient"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Title"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100",children:[F.map(z=>{var K;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:((K=z.patient)==null?void 0:K.name)||""}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:z.title||"Appointment"}),a.jsx("td",{className:"px-4 py-2 text-sm",children:Om(z.due_date,z.due_time)})]},z.id)}),F.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-gray-500",children:"No cancelled appointments."})})]})]})]})]}),a.jsx(Al,{open:w,title:"Create Appointment",onClose:()=>S(!1),children:a.jsxs("form",{onSubmit:async z=>{z.preventDefault(),!(!b.patientId||!b.doctorId||!b.date)&&(await $l({title:b.title||"Appointment",description:b.description||"Doctor scheduled appointment",priority:"medium",status:"in_progress",assigned_to:b.doctorId,assigned_by:(e==null?void 0:e.id)||"",patient_id:b.patientId,due_date:b.date,due_time:b.time}),S(!1),B())},className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient"}),a.jsxs("select",{className:"w-full px-3 py-2 border rounded",value:b.patientId,onChange:z=>j({...b,patientId:z.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select patient"}),v.map(z=>a.jsx("option",{value:z.id,children:z.name},z.id))]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor"}),a.jsxs("select",{className:"w-full px-3 py-2 border rounded",value:b.doctorId,onChange:z=>j({...b,doctorId:z.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select doctor"}),u.map(z=>a.jsx("option",{value:z.id,children:z.full_name},z.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:b.date,onChange:z=>j({...b,date:z.target.value}),required:!0}),a.jsx("input",{type:"time",className:"w-full px-3 py-2 border rounded",value:b.time,onChange:z=>j({...b,time:z.target.value}),required:!0})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:b.title,onChange:z=>j({...b,title:z.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border rounded",value:b.description,onChange:z=>j({...b,description:z.target.value})})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",className:"px-4 py-2 border rounded",onClick:()=>S(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Create"})]})]})}),a.jsx(Al,{open:_,title:"Edit Appointment",onClose:()=>k(!1),children:a.jsxs("form",{onSubmit:async z=>{z.preventDefault(),C&&(await Pr(C.id,{title:T.title,description:T.description,assigned_to:T.doctorId,due_date:T.date,due_time:T.time,status:C.status==="pending"?"in_progress":C.status}),k(!1),B())},className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor"}),a.jsxs("select",{className:"w-full px-3 py-2 border rounded",required:!0,value:T.doctorId,onChange:z=>R({...T,doctorId:z.target.value}),children:[a.jsx("option",{value:"",children:"Select doctor"}),u.map(z=>a.jsx("option",{value:z.id,children:z.full_name},z.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",required:!0,value:T.date,onChange:z=>R({...T,date:z.target.value})}),a.jsx("input",{type:"time",className:"w-full px-3 py-2 border rounded",required:!0,value:T.time,onChange:z=>R({...T,time:z.target.value})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:T.title,onChange:z=>R({...T,title:z.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border rounded",value:T.description,onChange:z=>R({...T,description:z.target.value})})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",className:"px-4 py-2 border rounded",onClick:()=>k(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save"})]})]})})]})},sZ=()=>{var I;const{user:e}=Pe(),[t,n]=x.useState([]),[r,i]=x.useState(!0),[s,l]=x.useState(""),[u,d]=x.useState("all"),[h,f]=x.useState("all"),[m,g]=x.useState(!1),[v,N]=x.useState(null),[w,S]=x.useState(null);x.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:M}=await fr(),$=(M||[]).filter(F=>{var E;return((E=F.assigned_to_user)==null?void 0:E.role)==="volunteer"});n($)}finally{i(!1)}},j=async(M,$)=>{const{error:F}=await Pr(M,{status:$});F||b()},_=async M=>{if(!window.confirm("Delete this task?"))return;const{error:$}=await VN(M);$||b()},k=M=>{N(M),g(!0)},C=()=>{g(!1),N(null),b()},A=t.filter(M=>{var Z;const $=M.title.toLowerCase().includes(s.toLowerCase())||M.description.toLowerCase().includes(s.toLowerCase())||((Z=M.assigned_to_user)==null?void 0:Z.full_name.toLowerCase().includes(s.toLowerCase())),F=u==="all"||M.status===u,E=h==="all"||M.priority===h;return $&&F&&E}),T=M=>{switch(M){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},R=M=>{switch(M){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=M=>{switch(M){case"completed":return a.jsx(ys,{className:"w-4 h-4"});case"in_progress":return a.jsx(xl,{className:"w-4 h-4"});case"pending":return a.jsx(Wr,{className:"w-4 h-4"});default:return a.jsx(xl,{className:"w-4 h-4"})}};return r?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):m?a.jsx(XC,{task:v,onClose:C,rolesFilter:["volunteer"]}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Volunteer Tasks"}),(e==null?void 0:e.role)==="doctor"&&a.jsxs("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[a.jsx(Ut,{className:"w-5 h-5"}),a.jsx("span",{children:"Assign Task"})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Gn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search tasks...",value:s,onChange:M=>l(M.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("select",{value:u,onChange:M=>d(M.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]}),a.jsxs("select",{value:h,onChange:M=>f(M.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Priority"}),a.jsx("option",{value:"urgent",children:"Urgent"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"low",children:"Low"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:A.map(M=>{var $;return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:M.title}),a.jsx("p",{className:"text-gray-600 text-sm mb-3",children:M.description})]}),a.jsxs("div",{className:"flex space-x-2 ml-4",children:[a.jsx("button",{onClick:()=>k(M),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Task",children:a.jsx(Vu,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>_(M.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Task",children:a.jsx(Os,{className:"w-4 h-4"})}),(M.report||M.form_responses&&Object.keys(M.form_responses).length>0)&&a.jsx("button",{onClick:()=>S(M),className:"p-2 text-gray-500 hover:text-green-700 hover:bg-green-50 rounded-lg transition-all",title:"Review Submission",children:a.jsx(ys,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${T(M.priority)}`,children:[M.priority.charAt(0).toUpperCase()+M.priority.slice(1)," Priority"]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${R(M.status)}`,children:[B(M.status),a.jsx("span",{children:M.status.replace("_"," ").charAt(0).toUpperCase()+M.status.replace("_"," ").slice(1)})]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Me,{className:"w-4 h-4"}),a.jsxs("span",{children:["Volunteer: ",($=M.assigned_to_user)==null?void 0:$.full_name]})]}),M.patient&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Me,{className:"w-4 h-4"}),a.jsxs("span",{children:["Patient: ",M.patient.name]})]}),M.due_date&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(nn,{className:"w-4 h-4"}),a.jsxs("span",{children:["Due: ",new Date(M.due_date).toLocaleDateString()]})]}),M.report&&a.jsxs("div",{className:"text-gray-700 bg-gray-50 border border-gray-200 rounded p-3",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Volunteer Report"}),a.jsx("div",{children:M.report})]})]}),M.status!=="completed"&&M.status!=="cancelled"&&a.jsxs("div",{className:"flex space-x-2",children:[M.status==="pending"&&a.jsx("button",{onClick:()=>j(M.id,"in_progress"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"Start"}),M.status==="in_progress"&&a.jsx("button",{onClick:()=>j(M.id,"completed"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:"Mark Complete"}),a.jsx("button",{onClick:()=>j(M.id,"cancelled"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Cancel"})]})]},M.id)})}),A.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ys,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No volunteer tasks found."})]}),a.jsx(Al,{open:!!w,title:w?`Review Submission: ${w.title}`:"",onClose:()=>S(null),children:w?a.jsxs("div",{className:"space-y-4 text-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"text-gray-700",children:["Volunteer: ",a.jsx("span",{className:"font-medium",children:(I=w.assigned_to_user)==null?void 0:I.full_name})]}),w.patient&&a.jsxs("div",{className:"text-gray-700",children:["Patient: ",a.jsx("span",{className:"font-medium",children:w.patient.name})]}),w.due_date&&a.jsxs("div",{className:"text-gray-700",children:["Due: ",a.jsx("span",{className:"font-medium",children:new Date(w.due_date).toLocaleDateString()})]}),a.jsxs("div",{className:"text-gray-700",children:["Status: ",a.jsx("span",{className:"font-medium capitalize",children:w.status.replace("_"," ")})]})]}),w.report?a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Volunteer Report"}),a.jsx("div",{className:"whitespace-pre-wrap text-gray-800",children:w.report})]}):a.jsx("div",{className:"text-gray-500",children:"No written report provided."}),w.form_fields&&w.form_fields.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Form Responses"}),a.jsx("div",{className:"space-y-2",children:w.form_fields.map(M=>{const $=(w.form_responses||{})[M.id],F=Array.isArray($)?$.join(", "):$??"";return a.jsxs("div",{className:"flex justify-between gap-4 border-b border-gray-100 pb-1",children:[a.jsx("div",{className:"text-gray-600",children:M.label}),a.jsx("div",{className:"text-gray-900 text-right break-words",children:String(F)||""})]},M.id)})})]})]}):null})]})},y1=e=>{if(!e)return!1;const t=new Date(e),n=new Date;return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()},oZ=()=>{const{user:e}=Pe(),[t,n]=x.useState([]),[r,i]=x.useState(!0),[s,l]=x.useState("appointments"),[u,d]=x.useState(null),[h,f]=x.useState(""),[m,g]=x.useState({});x.useEffect(()=>{v()},[]);const v=async()=>{const{data:E}=await fr(e==null?void 0:e.id),Z=(E||[]).filter(z=>z.assigned_to===(e==null?void 0:e.id));n(Z),i(!1)},N=E=>E.status==="completed"&&!(E.report&&String(E.report).trim().length>0)?"in_progress":E.status,w=x.useMemo(()=>t.filter(E=>y1(E.due_date)&&!!E.patient),[t]),S=x.useMemo(()=>t.filter(E=>y1(E.due_date)&&!E.patient),[t]),b=E=>{if(!E)return!1;const Z=new Date(E),z=new Date;return Z.setHours(0,0,0,0)>z.setHours(0,0,0,0)},j=E=>{if(!E)return!1;const Z=new Date(E),z=new Date;return Z.setHours(0,0,0,0)<z.setHours(0,0,0,0)},_=x.useMemo(()=>t.filter(E=>!!E.patient&&b(E.due_date)&&N(E)!=="completed"&&E.status!=="cancelled"),[t]),k=x.useMemo(()=>t.filter(E=>!!E.patient&&j(E.due_date)&&N(E)!=="completed"&&E.status!=="cancelled"),[t]),C=x.useMemo(()=>t.filter(E=>!!E.patient&&E.status==="completed"&&!!(E.report&&String(E.report).trim().length>0)),[t]),A=x.useMemo(()=>t.filter(E=>!E.patient&&b(E.due_date)&&N(E)!=="completed"&&E.status!=="cancelled"),[t]),T=x.useMemo(()=>t.filter(E=>!E.patient&&j(E.due_date)&&N(E)!=="completed"&&E.status!=="cancelled"),[t]),R=x.useMemo(()=>t.filter(E=>!E.patient&&E.status==="completed"&&!!(E.report&&String(E.report).trim().length>0)),[t]),B=async E=>{await Pr(E.id,{status:"in_progress"}),v()},I=E=>{d(E),f(E.report||""),g(E.form_responses||{})},M=async()=>{u&&(await Pr(u.id,{status:"completed",report:h,form_responses:m}),d(null),f(""),g({}),v())},$=s==="appointments"?w:S,F=({title:E,items:Z})=>a.jsxs("div",{className:"mt-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:E}),Z.length===0?a.jsx("div",{className:"text-gray-500 text-sm",children:"No items."}):a.jsx("div",{className:"space-y-3",children:Z.map(z=>a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:z.title}),a.jsx("div",{className:"text-gray-600 mt-1",children:z.description}),a.jsxs("div",{className:"text-gray-700 mt-2",children:["Due ",z.due_date?new Date(z.due_date).toLocaleDateString():""," ",z.patient&&a.jsxs("span",{children:[" Patient: ",z.patient.name]})]})]}),a.jsx("div",{className:"flex gap-2",children:N(z)!=="completed"&&z.status!=="cancelled"&&a.jsx("button",{onClick:()=>I(z),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Open"})})]})},z.id))})]});return r?a.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Tasks"}),a.jsxs("div",{className:"inline-flex rounded-lg overflow-hidden border border-gray-200",children:[a.jsxs("button",{className:`px-4 py-2 text-sm flex items-center gap-2 ${s==="appointments"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>l("appointments"),children:[a.jsx(Cs,{className:"w-4 h-4"})," Todays Appointments"]}),a.jsxs("button",{className:`px-4 py-2 text-sm border-l border-gray-200 flex items-center gap-2 ${s==="todos"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>l("todos"),children:[a.jsx(NM,{className:"w-4 h-4"})," Todays ToDo"]})]})]}),$.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Wr,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),"No tasks for today in this tab."]}):a.jsx("div",{className:"space-y-4",children:$.map(E=>a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-5 shadow-sm",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900",children:E.title}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:E.description}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-3",children:[a.jsx(nn,{className:"w-4 h-4"})," Due ",E.due_date?new Date(E.due_date).toLocaleDateString():"",E.patient&&a.jsxs("span",{children:[" Patient: ",E.patient.name]})]}),E.report&&a.jsxs("div",{className:"text-gray-700 bg-gray-50 border border-gray-200 rounded p-3 mt-3",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Submitted report"}),a.jsx("div",{children:E.report})]})]}),a.jsxs("div",{className:"flex gap-2",children:[N(E)==="pending"&&a.jsx("button",{onClick:()=>B(E),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Start"}),N(E)!=="completed"&&E.status!=="cancelled"&&a.jsx("button",{onClick:()=>I(E),className:"px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Open"})]})]})},E.id))}),s==="appointments"?a.jsxs(a.Fragment,{children:[a.jsx(F,{title:"Upcoming Appointments",items:_}),a.jsx(F,{title:"Overdue Appointments",items:k}),a.jsx(F,{title:"Finished Appointments",items:C})]}):a.jsxs(a.Fragment,{children:[a.jsx(F,{title:"Upcoming ToDo",items:A}),a.jsx(F,{title:"Overdue ToDo",items:T}),a.jsx(F,{title:"Finished ToDo",items:R})]}),a.jsx(Al,{open:!!u,title:u?`Complete Task: ${u.title}`:"",onClose:()=>d(null),children:a.jsxs("div",{className:"space-y-4",children:[(u==null?void 0:u.form_fields)&&u.form_fields.length>0&&a.jsx("div",{className:"space-y-3",children:u.form_fields.map(E=>{const Z=m[E.id]??"",z=K=>g(D=>({...D,[E.id]:K}));switch(E.type){case"textarea":return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[E.label,E.required&&" *"]}),a.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-lg p-2",value:Z,onChange:K=>z(K.target.value)})]},E.id);case"number":case"date":case"text":return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[E.label,E.required&&" *"]}),a.jsx("input",{type:E.type,className:"w-full border border-gray-300 rounded-lg p-2",value:Z,onChange:K=>z(K.target.value)})]},E.id);case"select":return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[E.label,E.required&&" *"]}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-lg p-2",value:Z,onChange:K=>z(K.target.value),children:[a.jsx("option",{value:"",children:"Select"}),(E.options||[]).map(K=>a.jsx("option",{value:K,children:K},K))]})]},E.id);case"checkbox":return a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-1",children:[E.label,E.required&&" *"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:(E.options||[]).map(K=>{const D=Array.isArray(Z)?Z:[],Q=D.includes(K);return a.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:Q,onChange:G=>{const V=new Set(D);G.target.checked?V.add(K):V.delete(K),z(Array.from(V))}})," ",K]},K)})})]},E.id);case"radio":return a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-1",children:[E.label,E.required&&" *"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:(E.options||[]).map(K=>a.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:E.id,checked:Z===K,onChange:()=>z(K)})," ",K]},K))})]},E.id);default:return null}})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Report / Notes"}),a.jsx("textarea",{value:h,onChange:E=>f(E.target.value),rows:4,className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500",placeholder:"Write your visit notes, actions taken, observations, etc."})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-lg",onClick:()=>d(null),children:"Cancel"}),a.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg",onClick:M,children:"Submit & Complete"})]})]})})]})},Am=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16"],lZ=({onClose:e,onAreaChanged:t})=>{const{user:n}=Pe(),[r,i]=x.useState([]),[s,l]=x.useState(!0),[u,d]=x.useState(!1),[h,f]=x.useState([]);x.useState(null);const[m,g]=x.useState(!1),[v,N]=x.useState(""),[w,S]=x.useState(Am[0]),[b,j]=x.useState(null),[_,k]=x.useState(null),C=x.useCallback(async()=>{l(!0);const{data:E,error:Z}=await nc();!Z&&E&&i(E),l(!1)},[]);x.useEffect(()=>{C()},[C]),x.useEffect(()=>{b?YH(b.id).then(E=>{k(E)}):k(null)},[b]);const A=()=>{d(!0),f([])},T=()=>{h.length>=3?g(!0):(alert("Please draw at least 3 points to create an area"),d(!1),f([]))},R=()=>{d(!1),f([])},B=async()=>{if(!v.trim()){alert("Please enter a name for the area");return}if(h.length<3){alert("Area must have at least 3 points");return}const E={type:"Polygon",coordinates:[[...h.map(K=>[K[0],K[1]]),h[0]].map(K=>[K[0],K[1]])]},{data:Z,error:z}=await KH({name:v,color:w,geometry:E,created_by:(n==null?void 0:n.id)||""});if(z){console.error("Error creating area:",z),alert("Failed to create area: "+z.message);return}g(!1),d(!1),f([]),N(""),S(Am[0]),await C(),t&&t()},I=async E=>{if(!confirm("Are you sure you want to delete this area? Volunteers and patients will be unassigned."))return;const{error:Z}=await GH(E);if(Z){console.error("Error deleting area:",Z),alert("Failed to delete area: "+Z.message);return}j(null),await C(),t&&t()},M=async(E,Z)=>{const{error:z}=await qH(E,{color:Z});if(z){console.error("Error updating area color:",z);return}await C(),t&&t()},$=()=>(gy({click(E){u&&f(Z=>[...Z,[E.latlng.lat,E.latlng.lng]])}}),null),F=()=>{const E=py();return x.useEffect(()=>{E.setView([13.793,100.321],13)},[E]),null};return s?a.jsx("div",{className:"py-10 text-center",children:"Loading areas..."}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Map Area Management"}),a.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:a.jsx(As,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-4 flex items-center gap-3",children:u?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:T,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[a.jsx(La,{className:"w-4 h-4"}),"Finish Drawing"]}),a.jsxs("button",{onClick:R,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:[a.jsx(As,{className:"w-4 h-4"}),"Cancel"]}),a.jsxs("span",{className:"text-sm text-gray-600",children:["Click on map to add points (",h.length," points)"]})]}):a.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(Ut,{className:"w-4 h-4"}),"Draw New Area"]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"lg:col-span-3",children:a.jsx("div",{className:"h-[600px] w-full border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs(Yf,{center:[13.793,100.321],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[a.jsx(F,{}),a.jsx(Xf,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.jsx($,{}),r.map(E=>{var z,K;if(!((K=(z=E.geometry)==null?void 0:z.coordinates)!=null&&K[0]))return null;const Z=E.geometry.coordinates[0].map(D=>[D[0],D[1]]);return a.jsx(Ol,{positions:Z,pathOptions:{color:E.color,fillColor:E.color,fillOpacity:(b==null?void 0:b.id)===E.id?.4:.2,weight:(b==null?void 0:b.id)===E.id?3:2},eventHandlers:{click:()=>j(E)},children:a.jsx(ia,{children:a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"font-semibold text-lg mb-2",children:E.name}),_&&(b==null?void 0:b.id)===E.id&&a.jsxs("div",{className:"text-sm space-y-1",children:[a.jsxs("div",{children:["Volunteers: ",_.volunteerCount]}),a.jsxs("div",{children:["Patients: ",_.patientCount]})]})]})})},`area-polygon-${E.id}`)}),u&&h.length>0&&a.jsxs(a.Fragment,{children:[h.length>=2&&a.jsx(Ol,{positions:h,pathOptions:{color:w,fillColor:w,fillOpacity:.3,weight:2,dashArray:"5, 5"}}),h.map((E,Z)=>a.jsx(VC,{center:E,radius:8,pathOptions:{color:w,fillColor:w,fillOpacity:.8,weight:2}},`drawing-point-${Z}`))]})]})})}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Areas (",r.length,")"]}),a.jsxs("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:[r.map(E=>a.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-all ${(b==null?void 0:b.id)===E.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>j(E),children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:E.color}}),a.jsx("span",{className:"font-medium text-sm",children:E.name})]})}),(b==null?void 0:b.id)===E.id&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Color:"}),a.jsx("input",{type:"color",value:E.color,onChange:Z=>M(E.id,Z.target.value),className:"w-8 h-6 rounded cursor-pointer"})]}),a.jsxs("button",{onClick:Z=>{Z.stopPropagation(),I(E.id)},className:"w-full inline-flex items-center justify-center gap-2 px-3 py-1.5 text-xs bg-red-50 text-red-700 rounded hover:bg-red-100",children:[a.jsx(Os,{className:"w-3 h-3"}),"Delete Area"]})]})]},E.id)),r.length===0&&a.jsx("div",{className:"text-sm text-gray-500 text-center py-8",children:'No areas yet. Click "Draw New Area" to create one.'})]})]})})]})]})]}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Name Your Area"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area Name"}),a.jsx("input",{type:"text",value:v,onChange:E=>N(E.target.value),placeholder:"e.g., North District Zone 1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area Color"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"color",value:w,onChange:E=>S(E.target.value),className:"w-12 h-10 rounded cursor-pointer"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Am.map(E=>a.jsx("button",{onClick:()=>S(E),className:`w-8 h-8 rounded ${w===E?"ring-2 ring-blue-500":""}`,style:{backgroundColor:E}},E))})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>{g(!1),d(!1),f([])},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Area"})]})]})]})})]})},Io=[13.793,100.321];function Tm(e,t){const n=h=>h*Math.PI/180,i=n(t[0]-e[0]),s=n(t[1]-e[1]),l=n(e[0]),u=n(t[0]),d=Math.sin(i/2)*Math.sin(i/2)+Math.cos(l)*Math.cos(u)*Math.sin(s/2)*Math.sin(s/2);return 2*6371*Math.asin(Math.sqrt(d))}const cZ=({onBack:e})=>{const{user:t}=Pe(),[n,r]=x.useState("all"),[i,s]=x.useState(10),[l,u]=x.useState([]),[d,h]=x.useState(null),[f,m]=x.useState(null),[g,v]=x.useState(Io),[N,w]=x.useState([]),[S,b]=x.useState([]),[j,_]=x.useState([]),[k,C]=x.useState(""),[A,T]=x.useState(null),[R,B]=x.useState([]),[I,M]=x.useState(!0),[$,F]=x.useState(!1);x.useEffect(()=>{(async()=>{const{data:H}=await WM();u(H||[])})()},[]);const E=x.useCallback(async()=>{const{data:H}=await nc();B(H||[])},[]);x.useEffect(()=>{E()},[E]),x.useEffect(()=>{(async()=>{if((t==null?void 0:t.role)==="volunteer"){const[{data:H},J]=await Promise.all([Ot(),dn()]),re=(J.data||[]).find(me=>me.user_id===t.id),le=((re==null?void 0:re.area_name)||"").toLowerCase();C((re==null?void 0:re.area_name)||""),T(re!=null&&re.lat&&(re!=null&&re.lng)?[re.lat,re.lng]:null);const Ne=t.full_name,Qt=(H||[]).filter(me=>typeof me.assigned_vhv_name=="string"&&me.assigned_vhv_name.toLowerCase().includes(Ne.toLowerCase()));w(Qt);const ie=(H||[]).filter(me=>(me.area_name||"").toLowerCase()===le);b(ie);const ge=(J.data||[]).filter(me=>(me.area_name||"").toLowerCase()===le);_(ge)}else if((t==null?void 0:t.role)==="doctor"||(t==null?void 0:t.role)==="patient"){const[{data:H},J]=await Promise.all([Ot(),dn()]);b(H||[]),_(J.data||[])}})()},[t]);const Z=x.useMemo(()=>(l||[]).filter(H=>n==="patients"||n!=="all"&&n!=="patients"&&H.type!==n||H.type==="volunteer"?!1:Tm(d||A||Io,[H.lat,H.lng])<=i),[l,n,i,d,A]),z=x.useMemo(()=>{const H=d||A||Io;let J=[];if((t==null?void 0:t.role)==="volunteer")J=n==="patients"?N||[]:S||[];else if((t==null?void 0:t.role)==="doctor")J=S||[];else return[];return J.filter(re=>typeof re.lat=="number"&&typeof re.lng=="number").filter(re=>Tm(H,[re.lat,re.lng])<=i)},[N,S,n,d,A,i,t]),K=x.useMemo(()=>{if(n==="patients")return[];if(n==="volunteer"||n==="all"){const H=d||A||Io;return(j||[]).filter(J=>typeof J.lat=="number"&&typeof J.lng=="number").filter(J=>Tm(H,[J.lat,J.lng])<=i)}return[]},[j,n,d,A,i]),D=H=>H==="volunteer"?"#22c55e":H==="center"?"#0ea5e9":"#ef4444",Q=x.useMemo(()=>tl.divIcon({className:"custom-my-location-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;background:#2563eb;border:2px solid #fff;box-shadow:0 0 0 3px rgba(37,99,235,0.25);color:#fff;font-size:16px;line-height:1"></div>',iconSize:[28,28],iconAnchor:[14,14],popupAnchor:[0,-14]}),[]),G=()=>{if(m(null),!("geolocation"in navigator)){m("Geolocation not supported by this browser");return}navigator.geolocation.getCurrentPosition(H=>{const J=[H.coords.latitude,H.coords.longitude];h(J),v(J)},H=>{m(H.message||"Unable to get current location")},{enableHighAccuracy:!0,timeout:1e4})},V=()=>{v(Io)},Y=({center:H})=>{const J=py();return x.useEffect(()=>{J.setView(H)},[H]),null};return $?a.jsx(lZ,{onClose:()=>F(!1),onAreaChanged:E}):a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:a.jsx(Rl,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:a.jsx(_v,{className:"w-6 h-6 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Nearby Care Network"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:n,onChange:H=>r(H.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"volunteer",children:"Volunteers"}),a.jsx("option",{value:"center",children:"Centers"}),a.jsx("option",{value:"hospital",children:"Hospitals"}),((t==null?void 0:t.role)==="volunteer"||(t==null?void 0:t.role)==="doctor")&&a.jsx("option",{value:"patients",children:(t==null?void 0:t.role)==="doctor"?"Patients":"My Patients"})]}),a.jsxs("select",{value:i,onChange:H=>s(parseInt(H.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:5,children:"5 km"}),a.jsx("option",{value:10,children:"10 km"}),a.jsx("option",{value:20,children:"20 km"})]}),a.jsx("button",{onClick:G,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",children:"Use My Location"}),a.jsx("button",{onClick:V,className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",children:"Reset"}),a.jsxs("button",{onClick:()=>M(!I),className:`px-3 py-2 text-sm rounded-lg border ${I?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 hover:bg-gray-50"}`,children:[I?"Hide":"Show"," Areas"]}),(t==null?void 0:t.role)==="doctor"&&a.jsxs("button",{onClick:()=>F(!0),className:"px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 inline-flex items-center gap-2",children:[a.jsx(CM,{className:"w-4 h-4"}),"Manage Areas"]})]})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"h-[600px] w-full border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs(Yf,{center:g,zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[a.jsx(Y,{center:g}),a.jsx(Xf,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.jsx(WH,{center:g,radius:i*1e3,pathOptions:{color:"#0ea5e9",weight:1}}),I&&R.map(H=>{var re,le;if(!((le=(re=H.geometry)==null?void 0:re.coordinates)!=null&&le[0]))return null;const J=H.geometry.coordinates[0].map(Ne=>[Ne[0],Ne[1]]);return a.jsx(Ol,{positions:J,pathOptions:{color:H.color,fillColor:H.color,fillOpacity:.15,weight:2},children:a.jsx(ia,{children:a.jsx("div",{className:"font-semibold",children:H.name})})},`area-${H.id}`)}),d&&a.jsx(ds,{position:d,icon:Q,children:a.jsx(ia,{children:a.jsx("div",{className:"font-semibold",children:"You are here"})})}),!d&&A&&a.jsx(ds,{position:A,icon:Q,children:a.jsx(ia,{children:a.jsx("div",{className:"font-semibold",children:"Your saved location"})})}),Z.map(H=>a.jsx(VC,{center:[H.lat,H.lng],radius:10,pathOptions:{color:D(H.type),weight:2,fillOpacity:.6},children:a.jsx(ia,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"font-semibold",children:H.name}),a.jsx("div",{className:"text-xs text-gray-600 capitalize",children:H.type}),H.address&&a.jsx("div",{className:"text-xs text-gray-700",children:H.address}),H.phone&&a.jsxs("div",{className:"text-xs text-gray-700",children:[" ",H.phone]})]})})},H.id)),((t==null?void 0:t.role)==="volunteer"||(t==null?void 0:t.role)==="doctor")&&(n==="all"||n==="patients")&&z.map(H=>a.jsx(ds,{position:[H.lat,H.lng],icon:tl.divIcon({className:"custom-patient-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#a21caf;border:2px solid #fff;box-shadow:0 0 0 3px rgba(162,28,175,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),children:a.jsx(ia,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"font-semibold",children:H.name}),a.jsx("div",{className:"text-xs text-gray-600",children:"Patient"}),a.jsxs("div",{className:"text-xs text-gray-700",children:["MRN: ",H.medical_record_number]}),H.phone_number&&a.jsxs("div",{className:"text-xs text-gray-700",children:[" ",H.phone_number]})]})})},`pat-${H.id}`)),K.map(H=>a.jsx(ds,{position:[H.lat,H.lng],icon:tl.divIcon({className:"custom-volunteer-icon",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#22c55e;border:2px solid #fff;box-shadow:0 0 0 3px rgba(34,197,94,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-13]}),children:a.jsx(ia,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"font-semibold",children:H.name}),a.jsx("div",{className:"text-xs text-gray-600",children:"Volunteer"}),a.jsxs("div",{className:"text-xs text-gray-700",children:["Code: ",H.volunteer_code]}),H.email&&a.jsx("div",{className:"text-xs text-gray-700",children:H.email}),H.phone&&a.jsxs("div",{className:"text-xs text-gray-700",children:[" ",H.phone]})]})})},`vol-${H.id}`))]})}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"About this map"}),a.jsxs("div",{className:"text-blue-700 text-sm space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Center:"})," Salaya, Nakhon Pathom"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Filters:"})," ",n,"  ",i," km radius"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Legend:"})," ",a.jsx("span",{className:"text-green-700",children:"Volunteers"}),", ",a.jsx("span",{className:"text-sky-700",children:"Centers"}),", ",a.jsx("span",{className:"text-red-700",children:"Hospitals"})]}),f&&a.jsxs("p",{className:"text-red-700",children:["Location error: ",f]})]})]})]})]})})},uZ=({record:e,patientId:t,onClose:n})=>{const{user:r}=Pe(),[i,s]=x.useState(!1),[l,u]=x.useState(null),[d,h]=x.useState([]),[f,m]=x.useState({patient_id:t||"",record_date:new Date().toISOString().split("T")[0],temperature:"",pulse:"",blood_pressure:"",weight:"",blood_sugar:"",oxygen_saturation:"",pain_level:0,fatigue_level:0,mood:"good",appetite:"good",sleep_quality:"good",symptoms_description:"",medications_taken:"",activities:"",notes:"",dr_instructions:"",custom_fields:[],custom_values:{}}),[g,v]=x.useState([]);x.useEffect(()=>{(r==null?void 0:r.role)==="patient"?N():((r==null?void 0:r.role)==="doctor"||(r==null?void 0:r.role)==="volunteer")&&w(),e&&(m({patient_id:e.patient_id,record_date:e.record_date,temperature:e.temperature||"",pulse:e.pulse||"",blood_pressure:e.blood_pressure||"",weight:e.weight||"",blood_sugar:e.blood_sugar||"",oxygen_saturation:e.oxygen_saturation||"",pain_level:e.pain_level||0,fatigue_level:e.fatigue_level||0,mood:e.mood||"good",appetite:e.appetite||"good",sleep_quality:e.sleep_quality||"good",symptoms_description:e.symptoms_description||"",medications_taken:e.medications_taken||"",activities:e.activities||"",notes:e.notes||"",dr_instructions:e.dr_instructions||"",custom_fields:e.custom_fields||[],custom_values:e.custom_values||{}}),v((e.custom_fields||[]).map(k=>({...k,options:(k.options||[]).join(", ")}))))},[e,r]);const N=async()=>{if(r)try{const{data:k,error:C}=await Lr(r.id);!C&&k&&(u(k),m(A=>({...A,patient_id:k.id})))}catch(k){console.error("Error fetching patient profile:",k)}},w=async()=>{try{const{data:k,error:C}=await Ot();if(!C&&k){if((r==null?void 0:r.role)==="volunteer"){const A=(r.full_name||"").toLowerCase(),T=(k||[]).filter(R=>typeof R.assigned_vhv_name=="string"&&R.assigned_vhv_name.toLowerCase().includes(A));h(T)}else h(k);t&&m(A=>({...A,patient_id:t}))}}catch(k){console.error("Error fetching patients:",k)}},S=async k=>{k.preventDefault(),s(!0);try{const C=f.patient_id||t||(l==null?void 0:l.id);if(!C){alert("Please select a patient before saving the record."),s(!1);return}if(e){const{error:A}=await JM(e.id,{...f,custom_fields:g.map(T=>({id:T.id,label:T.label,type:T.type,options:(T.options||"").split(",").map(R=>R.trim()).filter(Boolean)}))});if(A){console.error("Error updating daily record:",A);return}}else{const{error:A}=await QM({...f,custom_fields:g.map(T=>({id:T.id,label:T.label,type:T.type,options:(T.options||"").split(",").map(R=>R.trim()).filter(Boolean)})),patient_id:C,recorded_by:(r==null?void 0:r.id)||""});if(A){console.error("Error creating daily record:",A);return}if((r==null?void 0:r.role)==="patient")try{const T=[],R=E=>{const Z=(E||"").match(/-?\d+\.?\d*/);return Z?parseFloat(Z[0]):NaN},B=R(f.temperature);Number.isNaN(B)||(/c/i.test(f.temperature)?B*9/5+32:B)>=100.4&&T.push(`High temperature: ${f.temperature}`);const I=R(f.pulse);!Number.isNaN(I)&&(I>=110||I<=50)&&T.push(`Abnormal pulse: ${f.pulse}`);const M=(f.blood_pressure||"").match(/(\d+)\D+(\d+)/);if(M){const E=parseInt(M[1],10),Z=parseInt(M[2],10);(E>=140||Z>=90)&&T.push(`High blood pressure: ${f.blood_pressure}`),(E<=90||Z<=60)&&T.push(`Low blood pressure: ${f.blood_pressure}`)}const $=R(f.blood_sugar);!Number.isNaN($)&&$>=200&&T.push(`High blood sugar: ${f.blood_sugar}`);const F=R(f.oxygen_saturation);if(!Number.isNaN(F)&&F>0&&F<92&&T.push(`Low SpO: ${f.oxygen_saturation}`),f.pain_level>=8&&T.push(`Severe pain level: ${f.pain_level}/10`),f.fatigue_level>=8&&T.push(`Severe fatigue: ${f.fatigue_level}/10`),T.length>0){const{data:E}=await Ct(),{data:Z}=await dn(),z=l,K=((z==null?void 0:z.assigned_vhv_name)||"").toLowerCase(),D=(Z||[]).find(V=>(V.name||"").toLowerCase().includes(K)),Q=((z==null?void 0:z.assigned_doctor)||"").toLowerCase(),G=(E||[]).filter(V=>V.role==="doctor"&&(V.full_name||"").toLowerCase().includes(Q));if(D!=null&&D.user_id){const V="Alert: Abnormal Daily Health Measurement",Y=`Patient: ${z==null?void 0:z.name}
MRN: ${z==null?void 0:z.medical_record_number}
Date: ${f.record_date}

Issues:
- ${T.join(`
- `)}

Action: Please review and schedule an appointment with ${(z==null?void 0:z.assigned_doctor)||"doctor"} as needed.`;await gr({sender_id:r.id,recipient_id:D.user_id,subject:V,content:Y});const H=F&&F<90||B&&!Number.isNaN(B)&&(/c/i.test(f.temperature)?B>=40:B>=104)?"urgent":"high";if(await $l({title:"Schedule appointment for patient",description:`Auto-generated from daily record.

${T.join(`
`)}`,priority:H,status:"pending",assigned_to:D.user_id,assigned_by:r.id,patient_id:C,due_date:new Date().toISOString().slice(0,10)}),G.length>0){const J=G[0];await gr({sender_id:r.id,recipient_id:J.id,subject:"FYI: Abnormal Daily Record",content:`Patient ${z==null?void 0:z.name} submitted daily record with issues:
- ${T.join(`
- `)}
VHV has been asked to schedule an appointment.`})}}}}catch(T){console.warn("Alerting VHV failed:",T)}}n()}catch(C){console.error("Error saving daily record:",C)}finally{s(!1)}},b=k=>{const{name:C,value:A,type:T}=k.target;m(T==="range"||T==="number"?{...f,[C]:parseInt(A)||0}:{...f,[C]:A})},j=k=>k===0?"None":k<=3?"Mild":k<=6?"Moderate":k<=8?"Severe":"Extreme",_=k=>k===0?"text-green-600":k<=3?"text-yellow-600":k<=6?"text-orange-600":k<=8?"text-red-600":"text-red-800";return a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:a.jsx(Rl,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:a.jsx(ga,{className:"w-6 h-6 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Daily Record":"New Daily Record"})]})]})}),a.jsxs("form",{onSubmit:S,className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 pb-2 border-b border-gray-200",children:"Basic Information"}),((r==null?void 0:r.role)==="doctor"||(r==null?void 0:r.role)==="volunteer")&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Patient *"}),a.jsxs("select",{name:"patient_id",required:!0,value:f.patient_id,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"",children:"Choose a patient..."}),d.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Record Date *"}),a.jsx("input",{type:"date",name:"record_date",required:!0,value:f.record_date,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),a.jsx("h4",{className:"text-md font-semibold text-gray-800 mt-6",children:"Vital Signs"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),a.jsx("input",{type:"text",name:"temperature",value:f.temperature,onChange:b,placeholder:"e.g., 98.6F",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pulse"}),a.jsx("input",{type:"text",name:"pulse",value:f.pulse,onChange:b,placeholder:"e.g., 72 bpm",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Pressure"}),a.jsx("input",{type:"text",name:"blood_pressure",value:f.blood_pressure,onChange:b,placeholder:"e.g., 120/80 mmHg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight"}),a.jsx("input",{type:"text",name:"weight",value:f.weight,onChange:b,placeholder:"e.g., 70 kg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Sugar"}),a.jsx("input",{type:"text",name:"blood_sugar",value:f.blood_sugar,onChange:b,placeholder:"e.g., 110 mg/dL",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Oxygen Saturation"}),a.jsx("input",{type:"text",name:"oxygen_saturation",value:f.oxygen_saturation,onChange:b,placeholder:"e.g., 98%",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 pb-2 border-b border-gray-200",children:"Symptoms & Well-being"}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Pain Level: ",a.jsxs("span",{className:`font-semibold ${_(f.pain_level)}`,children:[f.pain_level," - ",j(f.pain_level)]})]}),a.jsx("input",{type:"range",name:"pain_level",min:"0",max:"10",value:f.pain_level,onChange:b,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"0 - No Pain"}),a.jsx("span",{children:"10 - Extreme Pain"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor Instructions"}),a.jsx("textarea",{name:"dr_instructions",rows:3,value:f.dr_instructions,onChange:b,readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:"Guidance for patient/volunteer (visible to them, not editable)",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all ${(r==null?void 0:r.role)!=="doctor"?"bg-gray-50":""}`})]}),(r==null?void 0:r.role)==="doctor"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Fields"}),a.jsxs("div",{className:"space-y-3",children:[g.map((k,C)=>a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-center",children:[a.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Label",value:k.label,onChange:A=>{const T=A.target.value;v(R=>R.map((B,I)=>I===C?{...B,label:T}:B))}}),a.jsxs("select",{className:"px-3 py-2 border rounded",value:k.type,onChange:A=>{const T=A.target.value;v(R=>R.map((B,I)=>I===C?{...B,type:T}:B))},children:[a.jsx("option",{value:"text",children:"Text"}),a.jsx("option",{value:"textarea",children:"Textarea"}),a.jsx("option",{value:"number",children:"Number"}),a.jsx("option",{value:"date",children:"Date"}),a.jsx("option",{value:"select",children:"Select"}),a.jsx("option",{value:"checkbox",children:"Checkbox"}),a.jsx("option",{value:"radio",children:"Radio"})]}),a.jsx("input",{className:"px-3 py-2 border rounded md:col-span-2",placeholder:"Options (comma separated)",value:k.options||"",onChange:A=>{const T=A.target.value;v(R=>R.map((B,I)=>I===C?{...B,options:T}:B))}}),a.jsx("button",{type:"button",className:"text-red-600 text-sm",onClick:()=>v(A=>A.filter((T,R)=>R!==C)),children:"Remove"})]},k.id)),a.jsx("button",{type:"button",className:"px-3 py-2 border rounded text-sm",onClick:()=>v(k=>[...k,{id:"cf-"+Math.random().toString(36).slice(2,9),label:"",type:"text",options:""}]),children:"+ Add Field"})]})]}),(g.length>0||(f.custom_fields||[]).length>0)&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Values"}),a.jsx("div",{className:"space-y-3",children:(((r==null?void 0:r.role)==="doctor"?g:f.custom_fields)||[]).map(k=>{const C=k.id,A=f.custom_values[C]??"",T=R=>m(B=>({...B,custom_values:{...B.custom_values||{},[C]:R}}));return k.type==="textarea"?a.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border rounded",value:A,onChange:R=>T(R.target.value),readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:k.label},C):k.type==="number"?a.jsx("input",{type:"number",className:"w-full px-3 py-2 border rounded",value:A,onChange:R=>T(R.target.value),readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:k.label},C):k.type==="date"?a.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:A,onChange:R=>T(R.target.value),readOnly:(r==null?void 0:r.role)!=="doctor"},C):k.type==="select"?a.jsxs("select",{className:"w-full px-3 py-2 border rounded",value:A,onChange:R=>T(R.target.value),disabled:(r==null?void 0:r.role)!=="doctor",children:[a.jsx("option",{value:"",children:"Select"}),(k.options||"").split(",").map(R=>R.trim()).filter(Boolean).map(R=>a.jsx("option",{value:R,children:R},R))]},C):k.type==="checkbox"?a.jsx("div",{className:"flex flex-wrap gap-3",children:(k.options||"").split(",").map(R=>R.trim()).filter(Boolean).map(R=>{const B=Array.isArray(A)?A:[],I=B.includes(R);return a.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:I,disabled:(r==null?void 0:r.role)!=="doctor",onChange:M=>{const $=new Set(B);M.target.checked?$.add(R):$.delete(R),T(Array.from($))}})," ",R]},R)})},C):k.type==="radio"?a.jsx("div",{className:"flex flex-wrap gap-3",children:(k.options||"").split(",").map(R=>R.trim()).filter(Boolean).map(R=>a.jsxs("label",{className:"text-sm text-gray-700 flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:C,value:R,checked:A===R,disabled:(r==null?void 0:r.role)!=="doctor",onChange:()=>T(R)})," ",R]},R))},C):a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:A,onChange:R=>T(R.target.value),readOnly:(r==null?void 0:r.role)!=="doctor",placeholder:k.label},C)})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Fatigue Level: ",a.jsxs("span",{className:`font-semibold ${_(f.fatigue_level)}`,children:[f.fatigue_level," - ",j(f.fatigue_level)]})]}),a.jsx("input",{type:"range",name:"fatigue_level",min:"0",max:"10",value:f.fatigue_level,onChange:b,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"0 - No Fatigue"}),a.jsx("span",{children:"10 - Extreme Fatigue"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mood"}),a.jsxs("select",{name:"mood",value:f.mood,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"excellent",children:"Excellent"}),a.jsx("option",{value:"good",children:"Good"}),a.jsx("option",{value:"fair",children:"Fair"}),a.jsx("option",{value:"poor",children:"Poor"}),a.jsx("option",{value:"very_poor",children:"Very Poor"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appetite"}),a.jsxs("select",{name:"appetite",value:f.appetite,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"excellent",children:"Excellent"}),a.jsx("option",{value:"good",children:"Good"}),a.jsx("option",{value:"fair",children:"Fair"}),a.jsx("option",{value:"poor",children:"Poor"}),a.jsx("option",{value:"very_poor",children:"Very Poor"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sleep Quality"}),a.jsxs("select",{name:"sleep_quality",value:f.sleep_quality,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"excellent",children:"Excellent"}),a.jsx("option",{value:"good",children:"Good"}),a.jsx("option",{value:"fair",children:"Fair"}),a.jsx("option",{value:"poor",children:"Poor"}),a.jsx("option",{value:"very_poor",children:"Very Poor"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Symptoms Description"}),a.jsx("textarea",{name:"symptoms_description",rows:3,value:f.symptoms_description,onChange:b,placeholder:"Describe any symptoms you're experiencing...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medications Taken"}),a.jsx("textarea",{name:"medications_taken",rows:2,value:f.medications_taken,onChange:b,placeholder:"List medications taken today...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activities"}),a.jsx("textarea",{name:"activities",rows:2,value:f.activities,onChange:b,placeholder:"Describe your activities today...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),a.jsx("textarea",{name:"notes",rows:3,value:f.notes,onChange:b,placeholder:"Any additional notes or observations...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:n,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(La,{className:"w-5 h-5"}),a.jsx("span",{children:e?"Update Record":"Save Record"})]})})]})]})]})})},dZ=({record:e,onClose:t})=>{const{user:n}=Pe(),[r,i]=x.useState([]),[s,l]=x.useState(!0),[u,d]=x.useState({patient_id:"",visit_date:new Date().toISOString().slice(0,10),title:"Visit Record",summary:"",diagnosis:"",prescriptions:"",instructions:""});x.useEffect(()=>{(async()=>{try{if((n==null?void 0:n.role)==="patient"){const{data:f}=await Lr(n.id);f&&i([f]),d(m=>({...m,patient_id:(f==null?void 0:f.id)||""}))}else{const{data:f}=await Ot();i(f||[])}e&&d({patient_id:e.patient_id,visit_date:e.visit_date,title:e.title||"Visit Record",summary:e.summary||"",diagnosis:e.diagnosis||"",prescriptions:e.prescriptions||"",instructions:e.instructions||""})}finally{l(!1)}})()},[e,n==null?void 0:n.id,n==null?void 0:n.role]);const h=async f=>{f.preventDefault(),!(!u.patient_id||!u.visit_date)&&n!=null&&n.id&&(e?await r3(e.id,{...u}):await n3({...u,recorded_by:n.id}),t())};return s?a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:a.jsx(Rl,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(ka,{className:"w-6 h-6 text-blue-700"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Visit Record":"New Visit Record"})]})]})}),a.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[(n==null?void 0:n.role)==="doctor"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient"}),a.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",required:!0,value:u.patient_id,onChange:f=>d({...u,patient_id:f.target.value}),children:[a.jsx("option",{value:"",children:"Select patient"}),r.map(f=>a.jsx("option",{value:f.id,children:f.name},f.id))]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visit Date"}),a.jsx("input",{type:"date",className:"w-full px-4 py-3 border rounded-lg",required:!0,value:u.visit_date,onChange:f=>d({...u,visit_date:f.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{className:"w-full px-4 py-3 border rounded-lg",value:u.title,onChange:f=>d({...u,title:f.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Summary"}),a.jsx("textarea",{rows:3,className:"w-full px-4 py-3 border rounded-lg",value:u.summary,onChange:f=>d({...u,summary:f.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Diagnosis"}),a.jsx("textarea",{rows:3,className:"w-full px-4 py-3 border rounded-lg",value:u.diagnosis,onChange:f=>d({...u,diagnosis:f.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prescriptions"}),a.jsx("textarea",{rows:3,className:"w-full px-4 py-3 border rounded-lg",value:u.prescriptions,onChange:f=>d({...u,prescriptions:f.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),a.jsx("textarea",{rows:3,className:"w-full px-4 py-3 border rounded-lg",value:u.instructions,onChange:f=>d({...u,instructions:f.target.value})})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded-lg",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Save"})]})]})]})})},fZ=()=>{const{user:e}=Pe(),[t,n]=x.useState("daily"),[r,i]=x.useState([]),[s,l]=x.useState([]),[u,d]=x.useState([]),[h,f]=x.useState(!0),[m,g]=x.useState(""),[v,N]=x.useState("all"),[w,S]=x.useState(!1),[b,j]=x.useState(null),[_,k]=x.useState(!1),[C,A]=x.useState(null);x.useEffect(()=>{const D=localStorage.getItem("records_selected_patient");D&&(N(D),localStorage.removeItem("records_selected_patient")),T(),(e==null?void 0:e.role)!=="patient"&&R()},[e]);const T=async()=>{try{const[D,Q]=await Promise.all([XM(void 0,(e==null?void 0:e.role)==="patient"?e.id:void 0),t3(void 0,(e==null?void 0:e.role)==="patient"?e.id:void 0)]);if(D.error)console.error("Error fetching daily records:",D.error);else{let G=D.data||[];if((e==null?void 0:e.role)==="volunteer"){const V=(e.full_name||"").toLowerCase();G=G.filter(Y=>Y.patient&&typeof Y.patient.assigned_vhv_name=="string"&&Y.patient.assigned_vhv_name.toLowerCase().includes(V))}i(G)}if(Q.error)console.error("Error fetching doctor records:",Q.error);else{let G=Q.data||[];if((e==null?void 0:e.role)==="volunteer"){const V=(e.full_name||"").toLowerCase();G=G.filter(Y=>Y.patient&&typeof Y.patient.assigned_vhv_name=="string"&&Y.patient.assigned_vhv_name.toLowerCase().includes(V))}l(G)}}catch(D){console.error("Error fetching daily records:",D)}finally{f(!1)}},R=async()=>{try{const{data:D,error:Q}=await Ot();if(Q)console.error("Error fetching patients:",Q);else if((e==null?void 0:e.role)==="volunteer"){const G=(e.full_name||"").toLowerCase(),V=(D||[]).filter(Y=>typeof Y.assigned_vhv_name=="string"&&Y.assigned_vhv_name.toLowerCase().includes(G));d(V)}else d(D||[])}catch(D){console.error("Error fetching patients:",D)}},B=D=>{j(D),S(!0)},I=D=>{A(D),k(!0)},M=async D=>{if(window.confirm("Are you sure you want to delete this daily record?"))try{const{error:Q}=await e3(D);Q?console.error("Error deleting record:",Q):T()}catch(Q){console.error("Error deleting record:",Q)}},$=async D=>{if(window.confirm("Delete this visit record?")){const{error:Q}=await i3(D);Q?console.error("Error deleting record:",Q):T()}},F=()=>{S(!1),j(null),T()},E=()=>{k(!1),A(null),T()},Z=r.filter(D=>{var V,Y,H;const Q=((V=D.patient)==null?void 0:V.name.toLowerCase().includes(m.toLowerCase()))||((Y=D.symptoms_description)==null?void 0:Y.toLowerCase().includes(m.toLowerCase()))||((H=D.notes)==null?void 0:H.toLowerCase().includes(m.toLowerCase())),G=v==="all"||D.patient_id===v;return Q&&G}),z=D=>{switch(D){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";case"poor":return"bg-orange-100 text-orange-800";case"very_poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},K=D=>!D||D===0?"text-green-600":D<=3?"text-yellow-600":D<=6?"text-orange-600":D<=8?"text-red-600":"text-red-800";return h?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin"})})}):w?a.jsx(uZ,{record:b,onClose:F}):_?a.jsx(dZ,{record:C,onClose:E}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"inline-flex rounded-lg overflow-hidden border border-gray-200",children:[a.jsx("button",{className:`px-4 py-2 text-sm ${t==="daily"?"bg-green-600 text-white":"bg-white text-gray-700"}`,onClick:()=>n("daily"),children:"Daily Records"}),a.jsx("button",{className:`px-4 py-2 text-sm border-l border-gray-200 ${t==="doctor"?"bg-blue-600 text-white":"bg-white text-gray-700"}`,onClick:()=>n("doctor"),children:"Visit Records"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[t==="daily"&&((e==null?void 0:e.role)==="patient"||(e==null?void 0:e.role)==="doctor")&&a.jsxs("button",{onClick:()=>S(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2 transition-colors",children:[a.jsx(Ut,{className:"w-5 h-5"}),a.jsx("span",{children:"Add Daily"})]}),t==="doctor"&&(e==null?void 0:e.role)==="doctor"&&a.jsxs("button",{onClick:()=>k(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[a.jsx(Ut,{className:"w-5 h-5"}),a.jsx("span",{children:"Add Visit Record"})]})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Gn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search records...",value:m,onChange:D=>g(D.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(e==null?void 0:e.role)!=="patient"&&a.jsxs("select",{value:v,onChange:D=>N(D.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Patients"}),u.map(D=>a.jsxs("option",{value:D.id,children:[D.name," - ",D.medical_record_number]},D.id))]})]})}),t==="daily"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:Z.map(D=>{var Q,G,V,Y;return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:a.jsx(ga,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:(e==null?void 0:e.role)==="patient"?"My Record":(Q=D.patient)==null?void 0:Q.name}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(nn,{className:"w-4 h-4"}),a.jsx("span",{children:new Date(D.record_date).toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[((e==null?void 0:e.role)==="doctor"||D.recorded_by===(e==null?void 0:e.id))&&a.jsx("button",{onClick:()=>B(D),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Edit Record",children:a.jsx(kp,{className:"w-4 h-4"})}),((e==null?void 0:e.role)==="doctor"||D.recorded_by===(e==null?void 0:e.id))&&a.jsx("button",{onClick:()=>M(D.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Record",children:a.jsx(Os,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Vital Signs"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[D.temperature&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Temp:"}),a.jsx("span",{className:"ml-1 font-medium",children:D.temperature})]}),D.pulse&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Pulse:"}),a.jsx("span",{className:"ml-1 font-medium",children:D.pulse})]}),D.blood_pressure&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"BP:"}),a.jsx("span",{className:"ml-1 font-medium",children:D.blood_pressure})]}),D.weight&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Weight:"}),a.jsx("span",{className:"ml-1 font-medium",children:D.weight})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Mood:"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z(D.mood)}`,children:((G=D.mood)==null?void 0:G.replace("_"," ").charAt(0).toUpperCase())+((V=D.mood)==null?void 0:V.replace("_"," ").slice(1))})]}),D.pain_level!==void 0&&D.pain_level>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Pain Level:"}),a.jsxs("span",{className:`font-medium ${K(D.pain_level)}`,children:[D.pain_level,"/10"]})]}),D.fatigue_level!==void 0&&D.fatigue_level>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Fatigue:"}),a.jsxs("span",{className:`font-medium ${K(D.fatigue_level)}`,children:[D.fatigue_level,"/10"]})]}),D.symptoms_description&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Symptoms:"}),a.jsx("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:D.symptoms_description})]}),D.notes&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:D.notes})]}),D.dr_instructions&&a.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsx("div",{className:"text-sm font-semibold text-blue-900",children:"Doctor Instructions"}),a.jsx("div",{className:"text-sm text-blue-800 mt-1 whitespace-pre-wrap",children:D.dr_instructions})]}),Array.isArray(D.custom_fields)&&D.custom_fields.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-800 mb-1",children:"Additional Information"}),a.jsx("div",{className:"space-y-1 text-sm",children:D.custom_fields.map(H=>{const J=D.custom_values?D.custom_values[H.id]:void 0,re=Array.isArray(J)?J.join(", "):J??"";return a.jsxs("div",{className:"flex justify-between gap-3",children:[a.jsx("span",{className:"text-gray-600",children:H.label}),a.jsx("span",{className:"text-gray-900 text-right break-words",children:String(re)||""})]},H.id)})})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Me,{className:"w-3 h-3"}),a.jsxs("span",{children:["Recorded by: ",(Y=D.recorded_by_user)==null?void 0:Y.full_name]})]}),a.jsxs("p",{className:"mt-1",children:["Created: ",new Date(D.created_at).toLocaleDateString()]})]})]},D.id)})}),Z.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ga,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:m||v!=="all"?"No records found matching your filters.":"No daily records found."}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Start tracking daily symptoms and vital signs by creating your first record."})]})]}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[s.filter(D=>v==="all"||D.patient_id===v).filter(D=>(D.title||"").toLowerCase().includes(m.toLowerCase())||(D.summary||"").toLowerCase().includes(m.toLowerCase())||(D.diagnosis||"").toLowerCase().includes(m.toLowerCase())).map(D=>{var Q;return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(ka,{className:"w-5 h-5 text-blue-700"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:D.title||"Visit Record"}),a.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[a.jsx(nn,{className:"w-4 h-4"}),new Date(D.visit_date).toLocaleDateString(),"  ",a.jsx(Me,{className:"w-4 h-4"}),((Q=D.recorded_by_user)==null?void 0:Q.full_name)||"Doctor"]})]})]}),(e==null?void 0:e.role)==="doctor"&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>I(D),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:a.jsx(kp,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>$(D.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:a.jsx(Os,{className:"w-4 h-4"})})]})]}),D.summary&&a.jsxs("div",{className:"text-sm text-gray-800 mb-2",children:[a.jsx("span",{className:"font-medium",children:"Summary:"})," ",D.summary]}),D.diagnosis&&a.jsxs("div",{className:"text-sm text-gray-800 mb-2",children:[a.jsx("span",{className:"font-medium",children:"Diagnosis:"})," ",D.diagnosis]}),D.prescriptions&&a.jsxs("div",{className:"text-sm text-gray-800 mb-2",children:[a.jsx("span",{className:"font-medium",children:"Prescriptions:"})," ",D.prescriptions]}),D.instructions&&a.jsxs("div",{className:"text-sm text-gray-800 mb-2",children:[a.jsx("span",{className:"font-medium",children:"Instructions:"})," ",D.instructions]})]},D.id)}),s.filter(D=>v==="all"||D.patient_id===v).length===0&&a.jsxs("div",{className:"text-center py-12 col-span-full",children:[a.jsx(ka,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No visit records found."})]})]})]})},hZ=()=>{const{user:e}=Pe(),[t,n]=x.useState(!0),[r,i]=x.useState(null),[s,l]=x.useState([]),[u,d]=x.useState(!1),[h,f]=x.useState([]),[m,g]=x.useState({doctorId:"",date:"",time:"09:00",title:"Appointment Request",message:""}),[v,N]=x.useState(!1),[w,S]=x.useState("");x.useEffect(()=>{(async()=>{try{if(!(e!=null&&e.id))return;const[{data:C},{data:A}]=await Promise.all([Lr(e.id),Ct()]),T=(C==null?void 0:C.id)||null;i(T);const R=(A||[]).filter(M=>M.role==="doctor");if(f(R),C!=null&&C.assigned_doctor){const M=R.find($=>($.full_name||"").toLowerCase().includes((C.assigned_doctor||"").toLowerCase()));M&&(S(M.id),g($=>({...$,doctorId:$.doctorId||M.id})))}const{data:B}=await fr(),I=(B||[]).filter(M=>M.patient_id===T);l(I)}finally{n(!1)}})()},[e]),x.useEffect(()=>{if(!r)return;const C=setInterval(async()=>{const{data:A}=await fr(),T=(A||[]).filter(R=>R.patient_id===r);l(T)},8e3);return()=>clearInterval(C)},[r]);const b=x.useMemo(()=>{const C=new Date;return C.setHours(0,0,0,0),C.getTime()},[]),j=x.useMemo(()=>{const C=[],A=[],T=[],R=[],B=[];for(const M of s){if(!M.due_date){B.push(M);continue}const $=new Date(M.due_date).getTime();M.status==="completed"?T.push(M):M.status==="cancelled"?R.push(M):$<b?C.push(M):A.push(M)}const I=(M,$)=>{const F=M.due_date?new Date(M.due_date).getTime():0,E=$.due_date?new Date($.due_date).getTime():0;return F-E};return{overdue:C.sort(I),upcoming:A.sort(I),completed:T.sort(I),cancelled:R.sort(I),undated:B}},[s,b]),_=async C=>{if(!C||!window.confirm("Cancel this appointment?"))return;await Pr(C,{status:"cancelled"});const{data:A}=await fr(),T=(A||[]).filter(R=>R.patient_id===r);l(T)},k=async C=>{if(C.preventDefault(),!r||!(e!=null&&e.id)){alert("Missing patient profile.");return}if(!m.doctorId){alert("Please select a doctor");return}if(!m.date){alert("Please choose a date");return}N(!0);try{await $l({title:m.title||"Appointment Request",description:m.message||"Patient requested an appointment",priority:"medium",status:"pending",assigned_to:m.doctorId,assigned_by:e.id,patient_id:r,due_date:m.date,due_time:m.time}),await gr({sender_id:e.id,recipient_id:m.doctorId,subject:"Appointment Request",content:`Patient requests an appointment on ${m.date}.

Message: ${m.message||"(no additional message)"}
`,is_read:!1}),d(!1),g({doctorId:"",date:"",time:"09:00",title:"",message:""});const{data:A}=await fr(),T=(A||[]).filter(R=>R.patient_id===r);l(T),alert("Appointment request sent")}finally{N(!1)}};return t?a.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(Cs,{className:"w-6 h-6 text-blue-600"})," Appointments"]}),a.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 w-full sm:w-auto justify-center",onClick:()=>{g(C=>({...C,doctorId:C.doctorId||w||""})),d(!0)},children:[a.jsx(Ut,{className:"w-4 h-4"})," Request Appointment"]})]}),s.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(nn,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),"No appointments found."]}):a.jsxs("div",{className:"space-y-6",children:[j.overdue.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-red-700 mb-2",children:"Overdue"}),a.jsx("div",{className:"space-y-3",children:j.overdue.map(C=>a.jsx("div",{className:"bg-white border border-red-200 rounded-xl p-4 shadow-sm",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900",children:C.title||"Appointment"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[a.jsx(nn,{className:"w-4 h-4"})," ",C.due_date?new Date(C.due_date).toLocaleDateString():""," ",C.due_time?` ${C.due_time}`:"",C.assigned_to_user&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx(Me,{className:"w-4 h-4"})," ",C.assigned_to_user.full_name]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 sm:self-start",children:[a.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-red-50 text-red-800 border-red-200 h-fit",children:"Overdue"}),a.jsx("button",{onClick:()=>_(C.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded",children:"Cancel"})]})]})},C.id))})]}),j.upcoming.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Upcoming"}),a.jsx("div",{className:"space-y-3",children:j.upcoming.map(C=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900",children:C.title||"Appointment"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[a.jsx(nn,{className:"w-4 h-4"})," ",C.due_date?new Date(C.due_date).toLocaleDateString():""," ",C.due_time?` ${C.due_time}`:"",C.assigned_to_user&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx(Me,{className:"w-4 h-4"})," ",C.assigned_to_user.full_name]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 sm:self-start",children:[a.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-blue-50 text-blue-800 border-blue-200 h-fit",children:C.status.replace("_"," ")}),a.jsx("button",{onClick:()=>_(C.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded",children:"Cancel"})]})]})},C.id))})]}),j.completed.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Completed"}),a.jsx("div",{className:"space-y-3",children:j.completed.map(C=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900",children:C.title||"Appointment"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[a.jsx(nn,{className:"w-4 h-4"})," ",C.due_date?new Date(C.due_date).toLocaleDateString():""," ",C.due_time?` ${C.due_time}`:"",C.assigned_to_user&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx(Me,{className:"w-4 h-4"})," ",C.assigned_to_user.full_name]})]})]}),a.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-green-50 text-green-800 border-green-200 h-fit",children:"Completed"})]})},C.id))})]}),j.cancelled.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Cancelled"}),a.jsx("div",{className:"space-y-3",children:j.cancelled.map(C=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900",children:C.title||"Appointment"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[a.jsx(nn,{className:"w-4 h-4"})," ",C.due_date?new Date(C.due_date).toLocaleDateString():""," ",C.due_time?` ${C.due_time}`:"",C.assigned_to_user&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx(Me,{className:"w-4 h-4"})," ",C.assigned_to_user.full_name]})]})]}),a.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-gray-50 text-gray-800 border-gray-200 h-fit",children:"Cancelled"})]})},C.id))})]}),j.undated.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Other"}),a.jsx("div",{className:"space-y-3",children:j.undated.map(C=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900",children:C.title||"Appointment"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:C.description}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 mt-2",children:[a.jsx(nn,{className:"w-4 h-4"})," ",C.assigned_to_user&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx(Me,{className:"w-4 h-4"})," ",C.assigned_to_user.full_name]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium border bg-blue-50 text-blue-800 border-blue-200 h-fit",children:C.status.replace("_"," ")}),a.jsx("button",{onClick:()=>_(C.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded",children:"Cancel"})]})]})},C.id))})]})]}),u&&a.jsxs("div",{className:"mt-8 bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[a.jsx(zl,{className:"w-5 h-5 text-blue-600"})," New Appointment Request"]}),a.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor"}),a.jsxs("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.doctorId,onChange:C=>g({...m,doctorId:C.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select doctor"}),h.map(C=>a.jsx("option",{value:C.id,children:C.full_name},C.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"date",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.date,onChange:C=>g({...m,date:C.target.value}),required:!0}),a.jsx("input",{type:"time",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.time,onChange:C=>g({...m,time:C.target.value}),required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),a.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.title,onChange:C=>g({...m,title:C.target.value}),placeholder:"e.g., Follow-up consultation",required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (optional)"}),a.jsx("textarea",{rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.message,onChange:C=>g({...m,message:C.target.value}),placeholder:"Additional details"})]}),a.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[a.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-lg",onClick:()=>d(!1),children:"Cancel"}),a.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50",children:v?"Sending":"Send Request"})]})]})]})]})},mZ=()=>{const{user:e}=Pe(),[t,n]=x.useState(!0),[r,i]=x.useState([]),[s,l]=x.useState([]),[u,d]=x.useState(!1),[h,f]=x.useState([]),[m,g]=x.useState({doctorId:"",date:"",time:"09:00",title:"",message:"",patientId:""}),v=((e==null?void 0:e.full_name)||"").toLowerCase(),N=async()=>{n(!0);const[{data:b},{data:j},{data:_}]=await Promise.all([Ot(),Ct(),fr()]),k=(b||[]).filter(T=>typeof T.assigned_vhv_name=="string"&&T.assigned_vhv_name.toLowerCase().includes(v));i(k),f((j||[]).filter(T=>T.role==="doctor"));const C=new Set(k.map(T=>T.id)),A=(_||[]).filter(T=>T.patient_id&&C.has(T.patient_id));l(A),n(!1)};x.useEffect(()=>{N()},[]),x.useEffect(()=>{const b=setInterval(()=>{N()},8e3);return()=>clearInterval(b)},[]);const w=x.useMemo(()=>{const b=new Date;b.setHours(0,0,0,0);const j=b.getTime(),_=[],k=[];for(const A of s){if(!A.due_date)continue;new Date(A.due_date).getTime()<j&&A.status!=="completed"&&A.status!=="cancelled"?k.push(A):_.push(A)}const C=(A,T)=>new Date(A.due_date||"").getTime()-new Date(T.due_date||"").getTime();return{overdue:k.sort(C),upcoming:_.sort(C)}},[s]),S=async b=>{b.preventDefault(),!(!(e!=null&&e.id)||!m.patientId||!m.doctorId||!m.date)&&(await $l({title:m.title||"Appointment Request",description:m.message||"Volunteer requested an appointment",priority:"medium",status:"pending",assigned_to:m.doctorId,assigned_by:e.id,patient_id:m.patientId,due_date:m.date,due_time:m.time}),await gr({sender_id:e.id,recipient_id:m.doctorId,subject:"Appointment Request",content:`Volunteer requested appointment on ${m.date} for patient.

Message: ${m.message||"(none)"}`}),d(!1),g({doctorId:"",date:"",time:"09:00",title:"",message:"",patientId:""}),N(),alert("Appointment request sent"))};return t?a.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(Cs,{className:"w-6 h-6 text-blue-600"})," Appointments"]}),a.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",onClick:()=>d(!0),children:[a.jsx(Ut,{className:"w-4 h-4"})," Request Appointment"]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-6",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Upcoming"}),w.upcoming.length===0?a.jsx("div",{className:"text-gray-500 text-sm",children:"No upcoming appointments."}):a.jsx("div",{className:"space-y-2",children:w.upcoming.map(b=>a.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:b.title||"Appointment"}),a.jsxs("div",{className:"text-gray-700 flex items-center gap-2 mt-1",children:[a.jsx(nn,{className:"w-4 h-4"})," ",b.due_date?new Date(b.due_date).toLocaleDateString():""," ",b.due_time?` ${b.due_time}`:""," ",b.patient&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx(Me,{className:"w-4 h-4"})," ",b.patient.name]})]})]}),a.jsx("div",{className:"text-xs px-2 py-1 rounded-full border bg-blue-50 text-blue-800",children:b.status.replace("_"," ")})]},b.id))})]}),u&&a.jsx("div",{className:"mt-4 bg-white rounded-xl border border-gray-200 p-6",children:a.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient"}),a.jsxs("select",{className:"w-full px-3 py-2 border rounded",required:!0,value:m.patientId,onChange:b=>g({...m,patientId:b.target.value}),children:[a.jsx("option",{value:"",children:"Select patient"}),r.map(b=>a.jsx("option",{value:b.id,children:b.name},b.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor"}),a.jsxs("select",{className:"w-full px-3 py-2 border rounded",required:!0,value:m.doctorId,onChange:b=>g({...m,doctorId:b.target.value}),children:[a.jsx("option",{value:"",children:"Select doctor"}),h.map(b=>a.jsx("option",{value:b.id,children:b.full_name},b.id))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",required:!0,value:m.title,onChange:b=>g({...m,title:b.target.value}),placeholder:"e.g., Home visit follow-up"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",required:!0,value:m.date,onChange:b=>g({...m,date:b.target.value})}),a.jsx("input",{type:"time",className:"w-full px-3 py-2 border rounded",required:!0,value:m.time,onChange:b=>g({...m,time:b.target.value})})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (optional)"}),a.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border rounded",value:m.message,onChange:b=>g({...m,message:b.target.value})})]}),a.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[a.jsx("button",{type:"button",className:"px-4 py-2 border rounded",onClick:()=>d(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Send Request"})]})]})})]})},pZ=async()=>{const[{data:e},{data:t}]=await Promise.all([dn(),nc()]),n=new Map((t||[]).map(i=>[i.id,i]));return{data:(e||[]).map(i=>({...i,area:i.area_id?n.get(i.area_id):void 0})),error:null}},gZ=async e=>{const{data:t,error:n}=await $M(e);return{data:t,error:n}},vZ=async(e,t)=>{const n={...t};delete n.area;const{data:r,error:i}=await WN(e,n);return{data:r,error:i}},yZ=async()=>ZN(),xZ=({record:e,onClose:t})=>{var $,F;const n=!!e,[r,i]=x.useState(!1),[s,l]=x.useState([]),[u,d]=x.useState(null),[h,f]=x.useState(!1),[m,g]=x.useState([]),[v,N]=x.useState([]),[w,S]=x.useState(""),b=((($=e==null?void 0:e.user)==null?void 0:$.full_name)||(e==null?void 0:e.name)||"").trim(),j=((e==null?void 0:e.area_name)||"").toLowerCase(),[_,k]=x.useState({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",dob:(e==null?void 0:e.dob)||"",photo_url:(e==null?void 0:e.photo_url)||"",volunteer_code:(e==null?void 0:e.volunteer_code)||"",province:"",district:"",subdistrict:"",addressLine:"",lat:e==null?void 0:e.lat,lng:e==null?void 0:e.lng});x.useEffect(()=>{if((async()=>{const{data:E}=await nc();l(E||[])})(),e!=null&&e.address){const E=e.address.split(",").map(Z=>Z.trim()).filter(Boolean);k(Z=>({...Z,province:E.slice(-1)[0]||"",district:E.slice(-2,-1)[0]||"",subdistrict:E.slice(-3,-2)[0]||"",addressLine:E.slice(0,-3).join(", ")}))}e||yZ().then(E=>{k(Z=>({...Z,volunteer_code:E}))})},[e]),x.useEffect(()=>{(async()=>{if(!e)return;const{data:E}=await Ot(),Z=E||[];if(N(Z),b){const z=Z.filter(K=>typeof K.assigned_vhv_name=="string"&&K.assigned_vhv_name.toLowerCase().includes(b.toLowerCase()));g(z)}else g([])})()},[e,b]),x.useEffect(()=>{const E=[_.addressLine,_.subdistrict,_.district,_.province].filter(Boolean).join(", ");if(_.lat&&_.lng||E.length>5){const Z=setTimeout(async()=>{f(!0);const z=await GC(_.lat,_.lng,E,s);d(z),z.geocodedLat&&z.geocodedLng&&!_.lat&&!_.lng&&k(K=>({...K,lat:z.geocodedLat,lng:z.geocodedLng})),f(!1)},1e3);return()=>clearTimeout(Z)}},[_.lat,_.lng,_.addressLine,_.subdistrict,_.district,_.province,s]);const C=async E=>{var Z,z;E.preventDefault(),i(!0);try{const K=[_.addressLine,_.subdistrict,_.district,_.province].filter(Boolean).join(", "),D={name:_.name,email:_.email,phone:_.phone,address:K,lat:_.lat,lng:_.lng,dob:_.dob,photo_url:_.photo_url,area_id:((Z=u==null?void 0:u.area)==null?void 0:Z.id)||null,area_name:((z=u==null?void 0:u.area)==null?void 0:z.name)||null};if(!_.lat||!_.lng){alert("Please click on the map to set the volunteer's exact location."),i(!1);return}if(!(u!=null&&u.area)){alert("Please place the volunteer inside a defined area created by a doctor."),i(!1);return}if(n&&e){D.volunteer_code=_.volunteer_code;const{error:Q}=await vZ(e.id,D);if(Q)throw Q}else{const{data:Q,error:G}=await UM(_.email,_.name);if(G)throw G;D.user_id=Q==null?void 0:Q.id,D.volunteer_code=_.volunteer_code;const{error:V}=await gZ(D);if(V)throw V}t()}catch(K){console.error("Error saving volunteer:",K),alert("Failed to save volunteer: "+K.message)}finally{i(!1)}},A=async()=>{const{data:E}=await Ot(),Z=E||[];if(N(Z),b){const z=Z.filter(K=>typeof K.assigned_vhv_name=="string"&&K.assigned_vhv_name.toLowerCase().includes(b.toLowerCase()));g(z)}},T=async E=>{if(!e||!E)return;const Z=(v||[]).find(K=>K.id===E);if(!(((Z==null?void 0:Z.area_name)||"").toLowerCase()===j||j==="")){alert("This patient is not in the same area as the volunteer.");return}await Ku(E,{assigned_vhv_name:b}),await A()},R=async E=>{E&&(await Ku(E,{assigned_vhv_name:""}),await A())},B=x.useMemo(()=>tl.divIcon({className:"vol-pin",html:'<div style="display:flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:#22c55e;border:2px solid #fff;box-shadow:0 0 0 3px rgba(34,197,94,0.25);color:#fff;font-size:14px;line-height:1"></div>',iconSize:[26,26],iconAnchor:[13,13]}),[]),I=_.lat&&_.lng?[_.lat,_.lng]:[13.793,100.321],M=()=>(gy({click(E){k(Z=>({...Z,lat:E.latlng.lat,lng:E.latlng.lng}))}}),null);return a.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:n?"Edit Volunteer":"Create Volunteer"}),n&&e&&a.jsxs("div",{className:"mt-1 text-xs text-gray-600 flex flex-wrap gap-2",children:[a.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["Record ID: ",a.jsx("span",{className:"font-mono",children:e.id})]}),a.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["User ID: ",a.jsx("span",{className:"font-mono",children:e.user_id})]}),e.volunteer_code&&a.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["Volunteer ID: ",a.jsx("span",{className:"font-mono",children:e.volunteer_code})]})]})]}),a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),a.jsx("input",{required:!0,className:"w-full px-4 py-3 border rounded-lg",value:_.name,onChange:E=>k(Z=>({...Z,name:E.target.value}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 border rounded-lg",value:_.email,onChange:E=>k(Z=>({...Z,email:E.target.value})),disabled:n})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),a.jsx("input",{className:"w-full px-4 py-3 border rounded-lg",value:_.phone,onChange:E=>k(Z=>({...Z,phone:E.target.value}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{type:"date",className:"w-full px-4 py-3 border rounded-lg",value:_.dob,onChange:E=>k(Z=>({...Z,dob:E.target.value}))})]}),n&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Volunteer ID"}),a.jsx("input",{className:"w-full px-4 py-3 border rounded-lg bg-gray-50",value:_.volunteer_code,readOnly:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),a.jsx("input",{placeholder:"Image URL",className:"w-full px-4 py-3 border rounded-lg",value:_.photo_url,onChange:E=>k(Z=>({...Z,photo_url:E.target.value}))})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Address Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province"}),a.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:_.province,onChange:E=>k(Z=>({...Z,province:E.target.value,district:"",subdistrict:""})),children:[a.jsx("option",{value:"",children:"Select Province"}),YC.map(E=>a.jsx("option",{value:E,children:E},E))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District"}),a.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:_.district,onChange:E=>k(Z=>({...Z,district:E.target.value,subdistrict:""})),disabled:!_.province,children:[a.jsx("option",{value:"",children:"Select District"}),Object.keys(Ld[_.province]||{}).map(E=>a.jsx("option",{value:E,children:E},E))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-District"}),a.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg",value:_.subdistrict,onChange:E=>k(Z=>({...Z,subdistrict:E.target.value})),disabled:!_.district,children:[a.jsx("option",{value:"",children:"Select Sub-District"}),(((F=Ld[_.province])==null?void 0:F[_.district])||[]).map(E=>a.jsx("option",{value:E,children:E},E))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line"}),a.jsx("input",{className:"w-full px-4 py-3 border rounded-lg",placeholder:"House number, street, village",value:_.addressLine,onChange:E=>k(Z=>({...Z,addressLine:E.target.value}))})]})]})]}),u&&a.jsx("div",{className:`p-4 rounded-lg border-2 ${u.area?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:a.jsx("div",{className:"flex items-start gap-3",children:u.area?a.jsxs(a.Fragment,{children:[a.jsx(_M,{className:"w-5 h-5 text-green-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-green-900",children:"Area Assigned"}),a.jsxs("div",{className:"text-sm text-green-700 mt-1",children:["This volunteer will be assigned to: ",a.jsx("strong",{children:u.area.name})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:u.area.color}}),a.jsxs("span",{className:"text-xs text-green-600",children:["Confidence: ",u.confidence," (",u.method,")"]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(yM,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-yellow-900",children:"No Area Match"}),a.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"This location is not within any defined area. The volunteer will be unassigned."})]})]})})}),h&&a.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[a.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"}),"Determining area assignment..."]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (click map to set)"}),a.jsx("div",{className:"h-80 w-full border rounded-lg overflow-hidden",children:a.jsxs(Yf,{center:I,zoom:14,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[a.jsx(Xf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),a.jsx(M,{}),s.map(E=>{var K,D,Q;if(!((D=(K=E.geometry)==null?void 0:K.coordinates)!=null&&D[0]))return null;const Z=E.geometry.coordinates[0].map(G=>[G[0],G[1]]),z=((Q=u==null?void 0:u.area)==null?void 0:Q.id)===E.id;return a.jsx(Ol,{positions:Z,pathOptions:{color:E.color,fillColor:E.color,fillOpacity:z?.3:.1,weight:z?3:2}},E.id)}),_.lat&&_.lng&&a.jsx(ds,{position:[_.lat,_.lng],icon:B})]})}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700",children:"Latitude"}),a.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded",value:_.lat??"",onChange:E=>k(Z=>({...Z,lat:parseFloat(E.target.value)}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700",children:"Longitude"}),a.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border rounded",value:_.lng??"",onChange:E=>k(Z=>({...Z,lng:parseFloat(E.target.value)}))})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50",children:[r?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(La,{className:"w-5 h-5"}),r?"Saving...":"Save Volunteer"]})]})]}),n&&a.jsxs("div",{className:"mt-10",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Assigned Patients"}),a.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Patients assigned to ",b||"this volunteer","."]}),a.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[a.jsx("input",{placeholder:"Search patients by name or MRN",value:w,onChange:E=>S(E.target.value),className:"flex-1 px-3 py-2 border rounded"}),a.jsxs("select",{className:"flex-1 px-3 py-2 border rounded",onChange:E=>T(E.target.value),defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Assign a patient"}),v.filter(E=>{const Z=w.toLowerCase(),z=(E.name||"").toLowerCase().includes(Z)||(E.medical_record_number||"").toLowerCase().includes(Z),K=typeof E.assigned_vhv_name=="string"&&E.assigned_vhv_name.toLowerCase().includes(b.toLowerCase()),D=(E.area_name||"").toLowerCase()===j||j==="";return z&&!K&&D}).slice(0,20).map(E=>a.jsxs("option",{value:E.id,children:[E.name,"  ",E.medical_record_number]},E.id))]})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Selecting a patient will immediately assign them to this volunteer. Only patients from the same area are listed."})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"MRN"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Area"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Action"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100",children:[m.map(E=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm",children:E.medical_record_number}),a.jsx("td",{className:"px-4 py-2 text-sm",children:E.name}),a.jsx("td",{className:"px-4 py-2 text-sm",children:E.area_name||"-"}),a.jsx("td",{className:"px-4 py-2 text-sm",children:a.jsx("button",{onClick:()=>R(E.id),className:"px-3 py-1 text-red-700 bg-red-50 hover:bg-red-100 rounded",children:"Remove"})})]},E.id)),m.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:4,children:"No patients assigned."})})]})]})})]})]})},bZ=()=>{const{user:e}=Pe(),t=(e==null?void 0:e.role)==="doctor",[n,r]=x.useState([]),[i,s]=x.useState(!0),[l,u]=x.useState({}),[d,h]=x.useState(""),[f,m]=x.useState(!1),[g,v]=x.useState(null),N=async()=>{s(!0);const[{data:S},{data:b}]=await Promise.all([pZ(),Ot()]);r(S||[]);const j={},_=b||[];(S||[]).forEach(k=>{var T;const C=(((T=k.user)==null?void 0:T.full_name)||k.name||"").toLowerCase(),A=_.filter(R=>typeof R.assigned_vhv_name=="string"&&R.assigned_vhv_name.toLowerCase().includes(C)).length;j[k.id]=A}),u(j),s(!1)};x.useEffect(()=>{N()},[]);const w=x.useMemo(()=>{const S=d.toLowerCase();return n.filter(b=>b.name.toLowerCase().includes(S)||(b.volunteer_code||"").toLowerCase().includes(S)||(b.email||"").toLowerCase().includes(S)||(b.phone||"").toLowerCase().includes(S)||(b.area_name||"").toLowerCase().includes(S))},[n,d]);return i?a.jsx("div",{className:"py-10 text-center",children:"Loading"}):f?a.jsx(xZ,{record:g,onClose:()=>{m(!1),v(null),N()}}):a.jsxs("div",{className:"py-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"relative w-full max-w-xl",children:[a.jsx(Gn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{value:d,onChange:S=>h(S.target.value),placeholder:"Search volunteers...",className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t&&a.jsxs("button",{onClick:()=>m(!0),className:"ml-3 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[a.jsx(Ut,{className:"w-4 h-4"}),"Create Volunteer"]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-sky-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Volunteer ID"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Phone"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Area"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Assigned Patients"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100",children:[w.map(S=>{var b;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm",children:S.volunteer_code}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("div",{className:"flex items-center gap-3",children:[S.photo_url?a.jsx("img",{src:S.photo_url,alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100"}),a.jsx("span",{children:S.name})]})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:S.email}),a.jsx("td",{className:"px-4 py-3 text-sm",children:S.phone||"-"}),a.jsx("td",{className:"px-4 py-3 text-sm",children:S.area_name?a.jsxs("div",{className:"flex items-center gap-2",children:[((b=S.area)==null?void 0:b.color)&&a.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:S.area.color}}),a.jsx("span",{children:S.area_name})]}):a.jsx("span",{className:"text-gray-400 text-xs",children:"Not assigned"})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:l[S.id]??0}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("button",{onClick:()=>{v(S),m(!0)},className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[a.jsx($N,{className:"w-4 h-4"}),"View Detail"]})})]},S.id)}),w.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No volunteers found"})})]})]})})})]})},_Z=()=>{const{user:e}=Pe(),[t,n]=x.useState([]),[r,i]=x.useState(""),[s,l]=x.useState(!0),[u,d]=x.useState(!1),[h,f]=x.useState(null),[m,g]=x.useState(""),[v,N]=x.useState("");x.useEffect(()=>{(async()=>{const{data:B}=await Ct();n(B||[]),l(!1)})()},[e==null?void 0:e.id]),x.useEffect(()=>{try{const B=localStorage.getItem("doctor:search");B&&(i(B),localStorage.removeItem("doctor:search"))}catch{}},[]);const w=x.useMemo(()=>(t||[]).filter(B=>B.role==="doctor").filter(B=>{const I=r.toLowerCase(),M=(B.doctor_code||"").toLowerCase();return(B.full_name||"").toLowerCase().includes(I)||(B.email||"").toLowerCase().includes(I)||M.includes(I)}),[t,r]),[S,b]=x.useState(1),j=10,_=Math.max(1,Math.ceil(w.length/j)),k=x.useMemo(()=>{const B=(S-1)*j;return w.slice(B,B+j)},[w,S]),C=B=>{try{localStorage.setItem("message:recipient",B)}catch{}try{window.dispatchEvent(new CustomEvent("codex:setView",{detail:"messages"}))}catch{}window.setAppView&&window.setAppView("messages")},A=(e==null?void 0:e.role)==="doctor",T=()=>{f(null),g(""),N(""),d(!0)},R=B=>{f(B),g(B.full_name),N(B.email),d(!0)};return s?a.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(ka,{className:"w-6 h-6 text-blue-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Doctors"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative w-64",children:[a.jsx(Gn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{value:r,onChange:B=>i(B.target.value),placeholder:"Search doctors...",className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),A&&a.jsxs("button",{onClick:T,className:"ml-3 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 border border-sky-200",children:[a.jsx(Ut,{className:"w-4 h-4"}),"New Doctor"]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-sky-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Doctor ID"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100",children:[k.map(B=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm",children:B.doctor_code||B.id}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(ka,{className:"w-4 h-4 text-blue-600"})}),a.jsx("span",{className:"text-gray-900",children:B.full_name})]})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:B.email}),a.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(B.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>C(B.id),className:"text-sky-700 hover:underline inline-flex items-center gap-1",children:[a.jsx(zl,{className:"w-4 h-4"}),"Message"]}),B.email&&a.jsxs("a",{href:`mailto:${B.email}`,className:"text-gray-700 hover:underline inline-flex items-center gap-1",children:[a.jsx(PM,{className:"w-4 h-4"}),"Email"]}),A&&a.jsxs("button",{onClick:()=>R(B),className:"text-gray-700 hover:underline inline-flex items-center gap-1",children:[a.jsx(kM,{className:"w-4 h-4"}),"Edit"]}),A&&a.jsx("button",{onClick:async()=>{if(!window.confirm("Delete this doctor account? This cannot be undone."))return;await ZM(B.id);const{data:I}=await Ct();n(I||[])},className:"text-red-700 hover:underline inline-flex items-center gap-1",children:"Delete"})]})})]},B.id)),k.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:5,children:"No doctors found."})})]})]})}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Math.min(S*j,w.length)," of ",w.length," doctors"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>b(B=>Math.max(1,B-1)),disabled:S===1,children:"<"}),a.jsx("button",{className:`px-3 py-1 rounded ${S===1?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>b(1),children:"1"}),_>2&&a.jsxs(a.Fragment,{children:[S>2&&a.jsx("span",{className:"px-1",children:""}),S>1&&S<_&&a.jsx("button",{className:"px-3 py-1 rounded bg-gray-200",children:S}),S<_-1&&a.jsx("span",{className:"px-1",children:""})]}),_>1&&a.jsx("button",{className:`px-3 py-1 rounded ${S===_?"bg-gray-200":"hover:bg-gray-100"}`,onClick:()=>b(_),children:_}),a.jsx("button",{className:"px-2 py-1 rounded hover:bg-gray-100 disabled:text-gray-300",onClick:()=>b(B=>Math.min(_,B+1)),disabled:S===_,children:">"})]})]})]}),a.jsx(Al,{open:u,title:h?"Edit Doctor":"New Doctor",onClose:()=>d(!1),children:a.jsxs("div",{className:"space-y-4",children:[h&&a.jsxs("div",{className:"text-xs text-gray-600 flex flex-wrap gap-2",children:[h.doctor_code&&a.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["Doctor ID: ",a.jsx("span",{className:"font-mono",children:h.doctor_code})]}),a.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded",children:["User ID: ",a.jsx("span",{className:"font-mono",children:h.id})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{value:m,onChange:B=>g(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:v,onChange:B=>N(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsx("input",{id:"doctor-phone",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),a.jsx("input",{id:"doctor-dob",type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Picture URL"}),a.jsx("input",{id:"doctor-photo",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>d(!1),className:"px-3 py-2 border border-gray-300 rounded-lg",children:"Cancel"}),a.jsx("button",{onClick:async()=>{var F,E,Z;const B=((F=document.getElementById("doctor-phone"))==null?void 0:F.value)||"",I=((E=document.getElementById("doctor-dob"))==null?void 0:E.value)||"",M=((Z=document.getElementById("doctor-photo"))==null?void 0:Z.value)||"";if(!v.trim()||!m.trim()){alert("Name and Email are required");return}if(h)await Op(h.id,{full_name:m,email:v,phone:B,dob:I,photo_url:M});else{const K=(await HM(v,m)).data;K&&await Op(K.id,{phone:B,dob:I,photo_url:M})}const{data:$}=await Ct();n($||[]),d(!1)},className:"px-3 py-2 bg-blue-600 text-white rounded-lg",children:"Save"})]})]})})]})},wZ=()=>{const{user:e}=Pe(),[t,n]=x.useState((e==null?void 0:e.full_name)||""),[r,i]=x.useState((e==null?void 0:e.photo_url)||""),[s,l]=x.useState(!1),[u,d]=x.useState((e==null?void 0:e.email)||""),[h,f]=x.useState(""),[m,g]=x.useState(""),[v,N]=x.useState(""),[w,S]=x.useState(""),[b,j]=x.useState(""),[_,k]=x.useState("");x.useEffect(()=>{n((e==null?void 0:e.full_name)||""),i((e==null?void 0:e.photo_url)||""),d((e==null?void 0:e.email)||"")},[e]);const C=T=>{if(!T)return;const R=new FileReader;R.onload=()=>i(String(R.result)),R.readAsDataURL(T)},A=async()=>{e&&(l(!0),await Op(e.id,{full_name:t,photo_url:r,email:u,phone:v,gender:h,dob:m,address:w}),l(!1),alert("Profile updated"))};return a.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"My Profile"}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-100",children:r?a.jsx("img",{src:r,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:""})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Role"}),a.jsx("div",{className:"font-medium text-gray-900 capitalize",children:e==null?void 0:e.role}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["User ID: ",a.jsx("span",{className:"font-mono",children:e==null?void 0:e.id})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{className:"w-full px-4 py-3 border rounded",value:t,onChange:T=>n(T.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Picture"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:T=>{var R;return C((R=T.target.files)==null?void 0:R[0])}}),a.jsx("span",{className:"text-sm text-gray-500",children:"or"}),a.jsx("input",{className:"w-full md:flex-1 px-3 py-2 border rounded",placeholder:"Image URL",value:r,onChange:T=>i(T.target.value)})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{className:"w-full px-4 py-3 border rounded",type:"email",value:u,onChange:T=>d(T.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),a.jsx("input",{className:"w-full px-4 py-3 border rounded",value:v,onChange:T=>N(T.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),a.jsxs("select",{className:"w-full px-4 py-3 border rounded",value:h,onChange:T=>f(T.target.value),children:[a.jsx("option",{value:"",children:"Select"}),a.jsx("option",{value:"male",children:"Male"}),a.jsx("option",{value:"female",children:"Female"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{className:"w-full px-4 py-3 border rounded",type:"date",value:m,onChange:T=>g(T.target.value)})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),a.jsx("input",{className:"w-full px-4 py-3 border rounded",value:w,onChange:T=>S(T.target.value)})]})]}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:A,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded",children:s?"Saving":"Save Changes"})}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Password"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsx("input",{type:"password",className:"w-full px-4 py-3 border rounded",value:b,onChange:T=>j(T.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),a.jsx("input",{type:"password",className:"w-full px-4 py-3 border rounded",value:_,onChange:T=>k(T.target.value)})]})]}),a.jsx("div",{className:"flex justify-end mt-4",children:a.jsx("button",{className:"px-4 py-2 border rounded",onClick:async()=>{if(!e)return;if(b.length<6)return alert("Password must be at least 6 characters");if(b!==_)return alert("Passwords do not match");const{error:T}=await Qd(e.id,b);if(T)return alert(T.message);j(""),k(""),alert("Password updated")},children:"Update Password"})})]})]})]})},jZ=()=>{const{user:e}=Pe(),[t,n]=x.useState(!0),[r,i]=x.useState(!1),[s,l]=x.useState(""),[u,d]=x.useState(""),[h,f]=x.useState(""),[m,g]=x.useState([]),[v,N]=x.useState(null),[w,S]=x.useState(null),[b,j]=x.useState(null),[_,k]=x.useState(""),[C,A]=x.useState("");x.useEffect(()=>{(async()=>{try{const{data:B}=await Lr((e==null?void 0:e.id)||""),[{data:I},{data:M}]=await Promise.all([Ct(),dn()]);if(B){const $=(I||[]).find(E=>E.role==="doctor"&&(E.full_name||"").toLowerCase().includes((B.assigned_doctor||"").toLowerCase()));$&&(S($.id),k($.full_name));const F=(M||[]).find(E=>(E.name||"").toLowerCase().includes((B.assigned_vhv_name||"").toLowerCase()));F&&(j(F.user_id),A(F.name)),N(B.id)}if(B){const{data:$}=await qu(B.id);g($||[])}}finally{n(!1)}})()},[e==null?void 0:e.id]);const T=x.useMemo(()=>s.trim().length>0&&(w||b),[s,w,b]),R=async()=>{if(T){if(!v){alert("Cannot find your patient profile.");return}i(!0);try{const B="Medication Request",I=`Patient requests medication refill/order.

Medication: ${s}
Quantity: ${u||"N/A"}
Notes: ${h||"N/A"}`,M=[w,b].filter(Boolean);await f3({patient_id:v,requested_by:e.id,title:B,medication:s,dosage:"",quantity:u,notes:h,status:"pending"}),await Promise.all(M.map(F=>gr({sender_id:e.id,recipient_id:F,subject:B,content:I,is_read:!1}))),l(""),d(""),f(""),alert("Request sent to your care team.");const{data:$}=await qu(v);g($||[])}catch{alert("Failed to send request")}finally{i(!1)}}};return t?a.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):a.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"border-b border-gray-200 p-6 flex items-center gap-3",children:[a.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:a.jsx(qs,{className:"w-6 h-6 text-purple-700"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Medication Request"})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medication Name"}),a.jsx("input",{value:s,onChange:B=>l(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"e.g., Metformin 500mg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),a.jsx("input",{value:u,onChange:B=>d(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"e.g., 30 tablets"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{value:h,onChange:B=>f(B.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Any additional information..."})]}),a.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("div",{className:"text-sm text-blue-800 mb-2 font-medium",children:"This request will be sent to:"}),a.jsxs("ul",{className:"text-sm text-blue-900 list-disc pl-5 space-y-1",children:[w?a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ka,{className:"w-4 h-4"})," Dr. ",_]}):a.jsx("li",{children:"No doctor found from your profile."}),b?a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Me,{className:"w-4 h-4"})," ",C," (VHV)"]}):a.jsx("li",{children:"No VHV found from your profile."})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{disabled:!T||r,onClick:R,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 inline-flex items-center gap-2 w-full sm:w-auto justify-center",children:[a.jsx(Wu,{className:"w-4 h-4"})," Submit Request"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mt-6",children:[a.jsx("div",{className:"p-4 text-gray-900 font-semibold",children:"My Medication Requests"}),a.jsx("div",{className:"p-4",children:m.length===0?a.jsx("div",{className:"text-gray-600 text-sm",children:"No requests yet."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Date"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Medication"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Quantity"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:m.map(B=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-3 py-2",children:new Date(B.created_at).toLocaleString()}),a.jsx("td",{className:"px-3 py-2",children:B.medication||"-"}),a.jsx("td",{className:"px-3 py-2",children:B.quantity||"-"}),a.jsx("td",{className:"px-3 py-2 capitalize",children:B.status.replace("_"," ")})]},B.id))})]})})})]})]})},Mm=["Little interest or pleasure in doing things","Feeling down, depressed, or hopeless","Trouble falling or staying asleep, or sleeping too much","Feeling tired or having little energy","Poor appetite or overeating","Feeling bad about yourself  or that you are a failure or have let yourself or your family down","Trouble concentrating on things, such as reading or watching television","Moving or speaking so slowly that other people could have noticed? Or the opposite  being so fidgety or restless that you have been moving around a lot more than usual","Thoughts that you would be better off dead, or thoughts of hurting yourself"];function NZ(e){return e>=20?"severe":e>=15?"moderately_severe":e>=10?"moderate":e>=5?"mild":"minimal"}const SZ=()=>{const{user:e}=Pe(),[t,n]=x.useState(null),[r,i]=x.useState(Array(Mm.length).fill(0)),[s,l]=x.useState(""),[u,d]=x.useState(!0),[h,f]=x.useState(!1),[m,g]=x.useState([]);x.useEffect(()=>{(async()=>{const{data:b}=await Lr((e==null?void 0:e.id)||"");if(n(b),b){const j=await Ap(b.id);g(j.data||[])}d(!1)})()},[e==null?void 0:e.id]);const v=x.useMemo(()=>(r||[]).reduce((b,j)=>b+(Number.isFinite(j)?j:0),0),[r]),N=NZ(v),w=(b,j)=>{i(_=>_.map((k,C)=>C===b?j:k))},S=async()=>{if(t){f(!0);try{const b=new Date().toISOString();await a3({patient_id:t.id,recorded_by:e.id,date:b,answers:r,total_score:v,severity:N,notes:s});const[{data:j},{data:_}]=await Promise.all([Ct(),dn()]),k=(t.assigned_doctor||"").toLowerCase(),C=(j||[]).filter(E=>E.role==="doctor"&&(E.full_name||"").toLowerCase().includes(k)),A=(t.assigned_vhv_name||"").toLowerCase(),R=(_||[]).filter(E=>(E.name||"").toLowerCase().includes(A)).map(E=>E.user_id).filter(Boolean),B=N==="moderately_severe"||N==="severe"?C.map(E=>E.id).filter(Boolean):[],I=[...R,...B],M="New Mental Health Assessment Submitted",$=`Patient: ${t.name}
MRN: ${t.medical_record_number}
Severity: ${N.replace("_"," ")}
Score: ${v}
Submitted at: ${new Date().toLocaleString()}

Notes: ${s||"N/A"}`;await Promise.all(I.map(E=>gr({sender_id:e.id,recipient_id:E,subject:M,content:$,is_read:!1}))),alert("Assessment submitted. Your care team has been notified.");const F=await Ap(t.id);g(F.data||[]),l(""),i(Array(Mm.length).fill(0))}catch{alert("Failed to submit assessment")}finally{f(!1)}}};return u?a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):t?a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"border-b border-gray-200 p-6 flex items-center gap-3",children:[a.jsx("div",{className:"bg-pink-100 p-2 rounded-lg",children:a.jsx(gn,{className:"w-6 h-6 text-pink-700"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mental Health Assessment (PHQ-9)"})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm text-gray-700",children:"Answer each question for the last two weeks. 0 = Not at all, 1 = Several days, 2 = More than half the days, 3 = Nearly every day."}),a.jsx("div",{className:"space-y-5",children:Mm.map((b,j)=>a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-center",children:[a.jsxs("div",{className:"md:col-span-3 text-gray-900",children:[j+1,". ",b]}),a.jsx("div",{className:"md:col-span-2 flex items-center gap-2",children:[0,1,2,3].map(_=>a.jsxs("label",{className:`px-3 py-2 rounded-lg border cursor-pointer ${r[j]===_?"bg-blue-600 text-white border-blue-600":"border-gray-300 text-gray-800 hover:bg-gray-50"}`,children:[a.jsx("input",{type:"radio",name:`q${j}`,value:_,checked:r[j]===_,onChange:()=>w(j,_),className:"hidden"}),_]},_))})]},j))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[a.jsx("div",{className:"text-sm text-blue-800",children:"Total Score"}),a.jsx("div",{className:"text-xl font-semibold text-blue-900",children:v})]}),a.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded",children:[a.jsx("div",{className:"text-sm text-purple-800",children:"Severity"}),a.jsx("div",{className:"text-xl font-semibold text-purple-900 capitalize",children:N.replace("_"," ")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optional)"}),a.jsx("textarea",{value:s,onChange:b=>l(b.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Anything you'd like to share..."})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{disabled:h,onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-flex items-center gap-2 w-full sm:w-auto justify-center",children:[a.jsx(Wu,{className:"w-4 h-4"})," Submit Assessment"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mt-6",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center gap-2 text-gray-900 font-semibold",children:[a.jsx(zN,{className:"w-5 h-5"})," Previous Assessments"]}),a.jsx("div",{className:"p-4",children:m.length===0?a.jsx("div",{className:"text-gray-600 text-sm",children:"No assessments yet."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Score"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Severity"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:m.map(b=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(b.date).toLocaleString()}),a.jsx("td",{className:"px-4 py-2 text-sm",children:b.total_score}),a.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:String(b.severity).replace("_"," ")})]},b.id))})]})})})]})]}):a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-700",children:"No patient profile found."})})},PZ=e=>e.replace("_"," "),kZ=()=>{const{user:e}=Pe(),[t,n]=x.useState([]),[r,i]=x.useState(!0),[s,l]=x.useState(""),[u,d]=x.useState(""),h=async()=>{i(!0);const{data:m}=await Ap();n(m||[]),i(!1)};x.useEffect(()=>{h()},[]);const f=x.useMemo(()=>{const m=s.toLowerCase();return(t||[]).filter(g=>!u||String(g.severity)===u).filter(g=>{var S,b;const v=(((S=g.patient)==null?void 0:S.name)||"").toLowerCase(),N=(((b=g.patient)==null?void 0:b.medical_record_number)||"").toLowerCase(),w=(g.notes||"").toLowerCase();return v.includes(m)||N.includes(m)||w.includes(m)})},[t,s,u]);return r?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):(e==null?void 0:e.role)!=="doctor"?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-8 text-center text-gray-700",children:"Only doctors can view mental health assessments."})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:a.jsx(zN,{className:"w-6 h-6 text-purple-700"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mental Health Assessments"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative w-64",children:[a.jsx(Gn,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{value:s,onChange:m=>l(m.target.value),placeholder:"Search patients, MRN or notes...",className:"w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("select",{value:u,onChange:m=>d(m.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"All severities"}),a.jsx("option",{value:"minimal",children:"Minimal"}),a.jsx("option",{value:"mild",children:"Mild"}),a.jsx("option",{value:"moderate",children:"Moderate"}),a.jsx("option",{value:"moderately_severe",children:"Moderately severe"}),a.jsx("option",{value:"severe",children:"Severe"})]})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-purple-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Patient"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"MRN"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Score"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Severity"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Notes"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100",children:[f.map(m=>{var g,v;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(m.date).toLocaleString()}),a.jsx("td",{className:"px-4 py-3 text-sm",children:((g=m.patient)==null?void 0:g.name)||"-"}),a.jsx("td",{className:"px-4 py-3 text-sm",children:((v=m.patient)==null?void 0:v.medical_record_number)||"-"}),a.jsx("td",{className:"px-4 py-3 text-sm",children:m.total_score}),a.jsx("td",{className:"px-4 py-3 text-sm capitalize",children:PZ(String(m.severity))}),a.jsx("td",{className:"px-4 py-3 text-sm truncate max-w-[320px]",children:m.notes||"-"})]},m.id)}),f.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:6,children:"No assessments found."})})]})]})})})]})};let ha=null,Ro={};const CZ=e=>{try{Ro=JSON.parse(localStorage.getItem("med:lastSent")||"{}")}catch{Ro={}}if(ha&&(clearInterval(ha),ha=null),!e)return;const t=async()=>{try{const{data:n}=await d3(e);if(!n||n.length===0)return;const{data:r}=await Lr(e);for(const i of n){const s=`${i.medication.id}@${i.scheduledAt}`;if(Ro[s])continue;const l="Medication Reminder",u=`Time to take your medication.

Medication: ${i.medication.name}${i.medication.dosage?`
Dosage: ${i.medication.dosage}`:""}
Scheduled time: ${new Date(i.scheduledAt).toLocaleTimeString()}
Patient: ${(r==null?void 0:r.name)||""}`;await gr({sender_id:e,recipient_id:e,subject:l,content:u}),Ro[s]=new Date().toISOString()}localStorage.setItem("med:lastSent",JSON.stringify(Ro))}catch{}};ha=setInterval(t,60*1e3),t()},x1=()=>{ha&&clearInterval(ha),ha=null},EZ=()=>{const{user:e}=Pe(),[t,n]=x.useState(null),[r,i]=x.useState([]),[s,l]=x.useState(!0),[u,d]=x.useState(!1),[h,f]=x.useState(null),[m,g]=x.useState({name:"",dosage:"",instructions:"",times:"09:00, 21:00",start_date:"",end_date:"",reminders_enabled:!0}),v=async()=>{l(!0);const{data:_}=await Lr((e==null?void 0:e.id)||"");n(_);const{data:k}=await s3(_==null?void 0:_.id);i(k||[]),l(!1)};x.useEffect(()=>{v()},[e==null?void 0:e.id]);const N=()=>{f(null),g({name:"",dosage:"",instructions:"",times:"09:00, 21:00",start_date:"",end_date:"",reminders_enabled:!0}),d(!0)},w=_=>{f(_),g({name:_.name||"",dosage:_.dosage||"",instructions:_.instructions||"",times:(_.times||[]).join(", "),start_date:_.start_date||"",end_date:_.end_date||"",reminders_enabled:_.reminders_enabled!==!1}),d(!0)},S=_=>_.split(",").map(k=>k.trim()).filter(Boolean),b=async()=>{if(!(t!=null&&t.id)||!m.name.trim())return alert("Name is required");const _={patient_id:t.id,name:m.name,dosage:m.dosage,instructions:m.instructions,times:S(m.times),start_date:m.start_date||void 0,end_date:m.end_date||void 0,reminders_enabled:!!m.reminders_enabled};h?await o3(h.id,_):await KN(_),d(!1),f(null),v()},j=async(_,k)=>{const C=new Date,[A,T]=k.split(":").map(R=>parseInt(R,10)||0);C.setHours(A,T,0,0),await c3(_.id,_.patient_id,C.toISOString()),alert("Marked as taken")};return s?a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:a.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto"})}):a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:a.jsx(qs,{className:"w-6 h-6 text-purple-700"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Medications"})]}),a.jsxs("button",{onClick:N,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 inline-flex items-center gap-2 w-full sm:w-auto justify-center",children:[a.jsx(Ut,{className:"w-4 h-4"})," Add"]})]}),a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:a.jsxs("div",{className:"divide-y divide-gray-100",children:[r.length===0&&a.jsx("div",{className:"p-6 text-gray-600",children:"No medications added."}),r.map(_=>a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-semibold text-gray-900",children:[_.name," ",_.dosage&&a.jsxs("span",{className:"text-gray-600 font-normal",children:[" ",_.dosage]})]}),_.instructions&&a.jsx("div",{className:"text-sm text-gray-700",children:_.instructions}),a.jsxs("div",{className:"text-sm text-gray-700 flex items-center gap-2 mt-1",children:[a.jsx(xl,{className:"w-4 h-4"})," ",(_.times||[]).join(", ")]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Reminders: ",_.reminders_enabled!==!1?"On":"Off"," ",_.start_date&&`  from ${_.start_date}`," ",_.end_date&&`  until ${_.end_date}`]})]}),a.jsxs("div",{className:"flex items-center gap-2 sm:self-start",children:[a.jsx("button",{onClick:()=>w(_),className:"px-3 py-2 border rounded",children:"Edit"}),a.jsx("button",{onClick:async()=>{confirm("Delete medication?")&&(await l3(_.id),v())},className:"px-3 py-2 border rounded text-red-700 border-red-300",children:"Delete"})]})]}),_.times&&_.times.length>0&&a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:_.times.map(k=>a.jsxs("button",{onClick:()=>j(_,k),className:"text-sm px-3 py-1 rounded border bg-purple-50 hover:bg-purple-100",children:["Mark ",k," taken"]},k))})]},_.id))]})}),u&&a.jsxs("div",{className:"mt-6 bg-white rounded-xl border border-gray-200 p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:m.name,onChange:_=>g({...m,name:_.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosage"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:m.dosage,onChange:_=>g({...m,dosage:_.target.value}),placeholder:"e.g., 500mg"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:m.instructions,onChange:_=>g({...m,instructions:_.target.value}),placeholder:"e.g., after meal"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Times (comma-separated HH:MM)"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:m.times,onChange:_=>g({...m,times:_.target.value}),placeholder:"09:00, 21:00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:m.start_date,onChange:_=>g({...m,start_date:_.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded",value:m.end_date,onChange:_=>g({...m,end_date:_.target.value})})]}),a.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[a.jsx("input",{id:"rem-on",type:"checkbox",checked:m.reminders_enabled,onChange:_=>g({...m,reminders_enabled:_.target.checked})}),a.jsx("label",{htmlFor:"rem-on",className:"text-sm text-gray-700",children:"Enable reminders"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx("button",{onClick:()=>{d(!1),f(null)},className:"px-3 py-2 border rounded",children:"Cancel"}),a.jsxs("button",{onClick:b,className:"px-3 py-2 bg-purple-600 text-white rounded inline-flex items-center gap-2",children:[a.jsx(La,{className:"w-4 h-4"})," Save"]})]})]})]})},OZ=()=>{const{user:e}=Pe(),[t,n]=x.useState(!0),[r,i]=x.useState([]),[s,l]=x.useState(""),[u,d]=x.useState(!1),[h,f]=x.useState(null),[m,g]=x.useState({name:"",dosage:"",instructions:"",times:"09:00, 21:00"}),v=async()=>{n(!0);const{data:_}=await qu();i(_||[]),n(!1)};x.useEffect(()=>{v()},[]);const N=x.useMemo(()=>{const _=s.toLowerCase();return(r||[]).filter(k=>{var C;return(k.status==="pending"||k.status==="approved"||k.status==="declined")&&((((C=k.patient)==null?void 0:C.name)||"").toLowerCase().includes(_)||(k.medication||"").toLowerCase().includes(_)||(k.notes||"").toLowerCase().includes(_))})},[r,s]),w=_=>{f(_),g({name:_.medication||"",dosage:"",instructions:"",times:"09:00, 21:00"}),d(!0)},S=_=>_.split(",").map(k=>k.trim()).filter(Boolean),b=async()=>{var B,I,M;if(!h||!m.name.trim())return;await KN({patient_id:h.patient_id,name:m.name,dosage:m.dosage,instructions:m.instructions,times:S(m.times),reminders_enabled:!0,assigned_by:e.id}),await Db(h.id,{status:"approved",resolved_by:e.id});const[{data:_},{data:k}]=await Promise.all([dn(),Ct()]),C=(((B=h.patient)==null?void 0:B.assigned_vhv_name)||"").toLowerCase(),A=(_||[]).find($=>($.name||"").toLowerCase().includes(C)),T="Prescription Created",R=`Prescription created for ${(I=h.patient)==null?void 0:I.name}.
Medication: ${m.name}
Dosage: ${m.dosage||"N/A"}
Times: ${S(m.times).join(", ")}
Instructions: ${m.instructions||""}`;await gr({sender_id:e.id,recipient_id:(M=h.patient)==null?void 0:M.user_id,subject:T,content:R}),A!=null&&A.user_id&&await gr({sender_id:e.id,recipient_id:A.user_id,subject:T,content:R}),d(!1),f(null),v()},j=async _=>{await Db(_.id,{status:"declined",resolved_by:e.id}),v()};return t?a.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:a.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto"})}):a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:a.jsx(qs,{className:"w-6 h-6 text-purple-700"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Medication Requests"})]}),a.jsxs("div",{className:"relative w-64",children:[a.jsx(Gn,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{value:s,onChange:_=>l(_.target.value),placeholder:"Search...",className:"w-full pl-9 pr-3 py-2 border rounded"})]})]}),a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[a.jsx("thead",{className:"bg-purple-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Patient"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Medication"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Quantity"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Notes"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Action"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100",children:[N.map(_=>{var k;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:new Date(_.created_at).toLocaleString()}),a.jsx("td",{className:"px-4 py-3",children:((k=_.patient)==null?void 0:k.name)||"-"}),a.jsx("td",{className:"px-4 py-3",children:_.medication||"-"}),a.jsx("td",{className:"px-4 py-3",children:_.quantity||"-"}),a.jsx("td",{className:"px-4 py-3 truncate max-w-[280px]",children:_.notes||"-"}),a.jsx("td",{className:"px-4 py-3 capitalize",children:_.status.replace("_"," ")}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{className:"px-3 py-1 border rounded inline-flex items-center gap-1",onClick:()=>w(_),children:[a.jsx(bM,{className:"w-4 h-4"})," Prescribe"]}),a.jsxs("button",{className:"px-3 py-1 border rounded text-red-700 border-red-300 inline-flex items-center gap-1",onClick:()=>j(_),children:[a.jsx(Cp,{className:"w-4 h-4"})," Decline"]})]})})]},_.id)}),N.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:7,children:"No requests"})})]})]})})}),u&&a.jsxs("div",{className:"mt-6 bg-white border border-gray-200 rounded-xl p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medication"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:m.name,onChange:_=>g({...m,name:_.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosage"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:m.dosage,onChange:_=>g({...m,dosage:_.target.value})})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:m.instructions,onChange:_=>g({...m,instructions:_.target.value})})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Times (comma separated HH:MM)"}),a.jsx("input",{className:"w-full px-3 py-2 border rounded",value:m.times,onChange:_=>g({...m,times:_.target.value}),placeholder:"09:00, 21:00"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx("button",{onClick:()=>{d(!1),f(null)},className:"px-3 py-2 border rounded",children:"Cancel"}),a.jsxs("button",{onClick:b,className:"px-3 py-2 bg-purple-600 text-white rounded inline-flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4"})," Prescribe"]})]})]})]})},AZ=()=>{const{user:e}=Pe(),[t,n]=x.useState(!0),[r,i]=x.useState([]),[s,l]=x.useState(""),u=async()=>{n(!0);const[{data:h},{data:f}]=await Promise.all([qu(),Ot()]),m=((e==null?void 0:e.full_name)||"").toLowerCase(),g=(f||[]).filter(w=>(w.assigned_vhv_name||"").toLowerCase().includes(m)),v=new Set(g.map(w=>w.id)),N=(h||[]).filter(w=>v.has(w.patient_id));i(N),n(!1)};x.useEffect(()=>{u()},[]);const d=x.useMemo(()=>{const h=s.toLowerCase();return(r||[]).filter(f=>{var m;return(((m=f.patient)==null?void 0:m.name)||"").toLowerCase().includes(h)||(f.medication||"").toLowerCase().includes(h)||(f.notes||"").toLowerCase().includes(h)})},[r,s]);return t?a.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:a.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto"})}):a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:a.jsx(qs,{className:"w-6 h-6 text-purple-700"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Medication Requests"})]}),a.jsxs("div",{className:"relative w-64",children:[a.jsx(Gn,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{value:s,onChange:h=>l(h.target.value),placeholder:"Search...",className:"w-full pl-9 pr-3 py-2 border rounded"})]})]}),a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[a.jsx("thead",{className:"bg-purple-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Patient"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Medication"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Quantity"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Status"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-100",children:[d.map(h=>{var f;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:new Date(h.created_at).toLocaleString()}),a.jsx("td",{className:"px-4 py-3",children:((f=h.patient)==null?void 0:f.name)||"-"}),a.jsx("td",{className:"px-4 py-3",children:h.medication||"-"}),a.jsx("td",{className:"px-4 py-3",children:h.quantity||"-"}),a.jsx("td",{className:"px-4 py-3 capitalize",children:h.status.replace("_"," ")})]},h.id)}),d.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:5,children:"No requests"})})]})]})})})]})};function TZ(){const{user:e,loading:t}=Pe(),[n,r]=x.useState("dashboard"),[i,s]=x.useState(!1);if(x.useEffect(()=>{lM(),window.setAppView=d=>r(d);const u=d=>{const h=d==null?void 0:d.detail;typeof h=="string"&&r(h)};return window.addEventListener("codex:setView",u),()=>window.removeEventListener("codex:setView",u)},[]),x.useEffect(()=>((e==null?void 0:e.role)==="patient"?CZ(e.id):x1(),()=>x1()),[e==null?void 0:e.id,e==null?void 0:e.role]),t)return a.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})});if(!e)return a.jsx(g3,{});const l=()=>{switch(n){case"dashboard":return a.jsx(Rn,{});case"patients":return e.role==="doctor"||e.role==="volunteer"?a.jsx(nZ,{}):a.jsx(Rn,{});case"profile":return e.role==="patient"?a.jsx(rZ,{}):a.jsx(Rn,{});case"messages":return a.jsx(iZ,{});case"tasks":return e.role==="volunteer"?a.jsx(oZ,{}):e.role==="doctor"?a.jsx(aZ,{}):a.jsx(v1,{personalOnly:!0,title:"My Tasks"});case"volunteer-tasks":return e.role==="doctor"?a.jsx(sZ,{}):a.jsx(v1,{});case"volunteers":return e.role==="doctor"?a.jsx(bZ,{}):a.jsx(Rn,{});case"doctors":return e.role==="volunteer"||e.role==="patient"||e.role==="doctor"?a.jsx(_Z,{}):a.jsx(Rn,{});case"map":return a.jsx(cZ,{onBack:()=>r("dashboard")});case"records":return a.jsx(fZ,{});case"appointments":return e.role==="patient"?a.jsx(hZ,{}):e.role==="volunteer"?a.jsx(mZ,{}):a.jsx(Rn,{});case"medication":return e.role==="patient"?a.jsx(jZ,{}):a.jsx(Rn,{});case"mental":return e.role==="patient"?a.jsx(SZ,{}):a.jsx(Rn,{});case"mental-assessments":return e.role==="doctor"?a.jsx(kZ,{}):a.jsx(Rn,{});case"medications":return e.role==="patient"?a.jsx(EZ,{}):a.jsx(Rn,{});case"med-requests":return e.role==="doctor"?a.jsx(OZ,{}):e.role==="volunteer"?a.jsx(AZ,{}):a.jsx(Rn,{});case"user-profile":return a.jsx(wZ,{});default:return a.jsx(Rn,{})}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[a.jsx(y3,{currentView:n,onViewChange:r,mobileOpen:i,setMobileOpen:s}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[a.jsx(v3,{currentView:n,onViewChange:r,onMenuClick:()=>s(!0)}),a.jsx("main",{className:"p-4 md:p-6 max-w-7xl w-full mx-auto",children:l()})]})]})}function MZ(){return a.jsx(pM,{children:a.jsx(TZ,{})})}TN(document.getElementById("root")).render(a.jsx(x.StrictMode,{children:a.jsx(MZ,{})}));
